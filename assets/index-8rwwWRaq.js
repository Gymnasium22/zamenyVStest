function KS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const A in r)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(r,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>r[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))r(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(A){if(A.ep)return;A.ep=!0;const s=n(A);fetch(A.href,s)}})();function zI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WI={exports:{}},Ef={},$I={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),GS=Symbol.for("react.portal"),zS=Symbol.for("react.fragment"),WS=Symbol.for("react.strict_mode"),$S=Symbol.for("react.profiler"),qS=Symbol.for("react.provider"),JS=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),YS=Symbol.for("react.suspense"),ZS=Symbol.for("react.memo"),ek=Symbol.for("react.lazy"),NB=Symbol.iterator;function tk(t){return t===null||typeof t!="object"?null:(t=NB&&t[NB]||t["@@iterator"],typeof t=="function"?t:null)}var qI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JI=Object.assign,XI={};function Da(t,e,n){this.props=t,this.context=e,this.refs=XI,this.updater=n||qI}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YI(){}YI.prototype=Da.prototype;function hw(t,e,n){this.props=t,this.context=e,this.refs=XI,this.updater=n||qI}var fw=hw.prototype=new YI;fw.constructor=hw;JI(fw,Da.prototype);fw.isPureReactComponent=!0;var PB=Array.isArray,ZI=Object.prototype.hasOwnProperty,gw={current:null},eE={key:!0,ref:!0,__self:!0,__source:!0};function tE(t,e,n){var r,A={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)ZI.call(e,r)&&!eE.hasOwnProperty(r)&&(A[r]=e[r]);var o=arguments.length-2;if(o===1)A.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];A.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)A[r]===void 0&&(A[r]=o[r]);return{$$typeof:au,type:t,key:s,ref:i,props:A,_owner:gw.current}}function nk(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pw(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function rk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DB=/\/+/g;function Yg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rk(""+t.key):e.toString(36)}function Gd(t,e,n,r,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case au:case GS:i=!0}}if(i)return i=t,A=A(i),t=r===""?"."+Yg(i,0):r,PB(A)?(n="",t!=null&&(n=t.replace(DB,"$&/")+"/"),Gd(A,e,n,"",function(c){return c})):A!=null&&(pw(A)&&(A=nk(A,n+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(DB,"$&/")+"/")+t)),e.push(A)),1;if(i=0,r=r===""?".":r+":",PB(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Yg(s,o);i+=Gd(s,e,n,a,A)}else if(a=tk(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Yg(s,o++),i+=Gd(s,e,n,a,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Xu(t,e,n){if(t==null)return t;var r=[],A=0;return Gd(t,r,"","",function(s){return e.call(n,s,A++)}),r}function Ak(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},zd={transition:null},sk={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:zd,ReactCurrentOwner:gw};function nE(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Xu,forEach:function(t,e,n){Xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xu(t,function(){e++}),e},toArray:function(t){return Xu(t,function(e){return e})||[]},only:function(t){if(!pw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=Da;Ve.Fragment=zS;Ve.Profiler=$S;Ve.PureComponent=hw;Ve.StrictMode=WS;Ve.Suspense=YS;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sk;Ve.act=nE;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=gw.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)ZI.call(e,a)&&!eE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:au,type:t.type,key:A,ref:s,props:r,_owner:i}};Ve.createContext=function(t){return t={$$typeof:JS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qS,_context:t},t.Consumer=t};Ve.createElement=tE;Ve.createFactory=function(t){var e=tE.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:XS,render:t}};Ve.isValidElement=pw;Ve.lazy=function(t){return{$$typeof:ek,_payload:{_status:-1,_result:t},_init:Ak}};Ve.memo=function(t,e){return{$$typeof:ZS,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=zd.transition;zd.transition={};try{t()}finally{zd.transition=e}};Ve.unstable_act=nE;Ve.useCallback=function(t,e){return jn.current.useCallback(t,e)};Ve.useContext=function(t){return jn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return jn.current.useEffect(t,e)};Ve.useId=function(){return jn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return jn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return jn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return jn.current.useReducer(t,e,n)};Ve.useRef=function(t){return jn.current.useRef(t)};Ve.useState=function(t){return jn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return jn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return jn.current.useTransition()};Ve.version="18.3.1";$I.exports=Ve;var S=$I.exports;const Ci=zI(S),ik=KS({__proto__:null,default:Ci},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=S,ak=Symbol.for("react.element"),lk=Symbol.for("react.fragment"),ck=Object.prototype.hasOwnProperty,uk=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dk={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,A={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)ck.call(e,r)&&!dk.hasOwnProperty(r)&&(A[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)A[r]===void 0&&(A[r]=e[r]);return{$$typeof:ak,type:t,key:s,ref:i,props:A,_owner:uk.current}}Ef.Fragment=lk;Ef.jsx=rE;Ef.jsxs=rE;WI.exports=Ef;var l=WI.exports,cm={},AE={exports:{}},fr={},sE={exports:{}},iE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,F){var L=G.length;G.push(F);e:for(;0<L;){var H=L-1>>>1,$=G[H];if(0<A($,F))G[H]=F,G[L]=$,L=H;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var F=G[0],L=G.pop();if(L!==F){G[0]=L;e:for(var H=0,$=G.length,z=$>>>1;H<z;){var fe=2*(H+1)-1,pe=G[fe],Ee=fe+1,re=G[Ee];if(0>A(pe,L))Ee<$&&0>A(re,pe)?(G[H]=re,G[Ee]=L,H=Ee):(G[H]=pe,G[fe]=L,H=fe);else if(Ee<$&&0>A(re,L))G[H]=re,G[Ee]=L,H=Ee;else break e}}return F}function A(G,F){var L=G.sortIndex-F.sortIndex;return L!==0?L:G.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,w=!1,m=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(G){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=G)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function k(G){if(x=!1,v(G),!m)if(n(a)!==null)m=!0,ee(R);else{var F=n(c);F!==null&&Ie(k,F.startTime-G)}}function R(G,F){m=!1,x&&(x=!1,y(_),_=-1),w=!0;var L=f;try{for(v(F),h=n(a);h!==null&&(!(h.expirationTime>F)||G&&!U());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var $=H(h.expirationTime<=F);F=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(a)&&r(a),v(F)}else r(a);h=n(a)}if(h!==null)var z=!0;else{var fe=n(c);fe!==null&&Ie(k,fe.startTime-F),z=!1}return z}finally{h=null,f=L,w=!1}}var N=!1,I=null,_=-1,b=5,Q=-1;function U(){return!(t.unstable_now()-Q<b)}function D(){if(I!==null){var G=t.unstable_now();Q=G;var F=!0;try{F=I(!0,G)}finally{F?T():(N=!1,I=null)}}else N=!1}var T;if(typeof B=="function")T=function(){B(D)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,et=Fe.port2;Fe.port1.onmessage=D,T=function(){et.postMessage(null)}}else T=function(){C(D,0)};function ee(G){I=G,N||(N=!0,T())}function Ie(G,F){_=C(function(){G(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){m||w||(m=!0,ee(R))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var L=f;f=F;try{return G()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,F){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var L=f;f=G;try{return F()}finally{f=L}},t.unstable_scheduleCallback=function(G,F,L){var H=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=L+$,G={id:d++,callback:F,priorityLevel:G,startTime:L,expirationTime:$,sortIndex:-1},L>H?(G.sortIndex=L,e(c,G),n(a)===null&&G===n(c)&&(x?(y(_),_=-1):x=!0,Ie(k,L-H))):(G.sortIndex=$,e(a,G),m||w||(m=!0,ee(R))),G},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(G){var F=f;return function(){var L=f;f=F;try{return G.apply(this,arguments)}finally{f=L}}}})(iE);sE.exports=iE;var hk=sE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=S,dr=hk;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oE=new Set,mc={};function ro(t,e){ua(t,e),ua(t+"Capture",e)}function ua(t,e){for(mc[t]=e,t=0;t<e.length;t++)oE.add(e[t])}var SA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LB={},OB={};function pk(t){return um.call(OB,t)?!0:um.call(LB,t)?!1:gk.test(t)?OB[t]=!0:(LB[t]=!0,!1)}function mk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wk(t,e,n,r){if(e===null||typeof e>"u"||mk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kn(t,e,n,r,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=A,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mn[t]=new Kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mn[e]=new Kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mn[t]=new Kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mn[t]=new Kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mn[t]=new Kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mn[t]=new Kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mn[t]=new Kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mn[t]=new Kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mn[t]=new Kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var mw=/[\-:]([a-z])/g;function ww(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mw,ww);mn[e]=new Kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mw,ww);mn[e]=new Kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mw,ww);mn[e]=new Kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!1,!1)});mn.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function vw(t,e,n,r){var A=mn.hasOwnProperty(e)?mn[e]:null;(A!==null?A.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wk(e,n,A,r)&&(n=null),r||A===null?pk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):A.mustUseProperty?t[A.propertyName]=n===null?A.type===3?!1:"":n:(e=A.attributeName,r=A.attributeNamespace,n===null?t.removeAttribute(e):(A=A.type,n=A===3||A===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var VA=fk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=Symbol.for("react.element"),Lo=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),aE=Symbol.for("react.provider"),lE=Symbol.for("react.context"),Bw=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),cE=Symbol.for("react.offscreen"),MB=Symbol.iterator;function ll(t){return t===null||typeof t!="object"?null:(t=MB&&t[MB]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,Zg;function Fl(t){if(Zg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zg=e&&e[1]||""}return`
`+Zg+t}var ep=!1;function tp(t,e){if(!t||ep)return"";ep=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var A=c.stack.split(`
`),s=r.stack.split(`
`),i=A.length-1,o=s.length-1;1<=i&&0<=o&&A[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(A[i]!==s[o]){if(i!==1||o!==1)do if(i--,o--,0>o||A[i]!==s[o]){var a=`
`+A[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{ep=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fl(t):""}function vk(t){switch(t.tag){case 5:return Fl(t.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return t=tp(t.type,!1),t;case 11:return t=tp(t.type.render,!1),t;case 1:return t=tp(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oo:return"Fragment";case Lo:return"Portal";case dm:return"Profiler";case yw:return"StrictMode";case hm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lE:return(t.displayName||"Context")+".Consumer";case aE:return(t._context.displayName||"Context")+".Provider";case Bw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xw:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case ls:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function yk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===yw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bk(t){var e=uE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var A=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=Bk(t))}function dE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pm(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hE(t,e){e=e.checked,e!=null&&vw(t,"checked",e,!1)}function mm(t,e){hE(t,e);var n=Ds(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wm(t,e.type,n):e.hasOwnProperty("defaultValue")&&wm(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wm(t,e,n){(e!=="number"||yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ul=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var A=0;A<n.length;A++)e["$"+n[A]]=!0;for(n=0;n<t.length;n++)A=e.hasOwnProperty("$"+t[n].value),t[n].selected!==A&&(t[n].selected=A),A&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ds(n),e=null,A=0;A<t.length;A++){if(t[A].value===n){t[A].selected=!0,r&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function vm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Ul(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ds(n)}}function fE(t,e){var n=Ds(e.value),r=Ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function KB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,pE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,A){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys($l).forEach(function(t){xk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$l[e]=$l[t]})});function mE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$l.hasOwnProperty(t)&&$l[t]?(""+e).trim():e+"px"}function wE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,A=mE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,A):t[n]=A}}var _k=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bm(t,e){if(e){if(_k[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function xm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function _w(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,Zo=null,ea=null;function GB(t){if(t=uu(t)){if(typeof Cm!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Qf(e),Cm(t.stateNode,t.type,e))}}function vE(t){Zo?ea?ea.push(t):ea=[t]:Zo=t}function yE(){if(Zo){var t=Zo,e=ea;if(ea=Zo=null,GB(t),e)for(t=0;t<e.length;t++)GB(e[t])}}function BE(t,e){return t(e)}function xE(){}var np=!1;function _E(t,e,n){if(np)return t(e,n);np=!0;try{return BE(t,e,n)}finally{np=!1,(Zo!==null||ea!==null)&&(xE(),yE())}}function vc(t,e){var n=t.stateNode;if(n===null)return null;var r=Qf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Im=!1;if(SA)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Im=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Im=!1}function Ck(t,e,n,r,A,s,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ql=!1,Bh=null,xh=!1,Em=null,Ik={onError:function(t){ql=!0,Bh=t}};function Ek(t,e,n,r,A,s,i,o,a){ql=!1,Bh=null,Ck.apply(Ik,arguments)}function bk(t,e,n,r,A,s,i,o,a){if(Ek.apply(this,arguments),ql){if(ql){var c=Bh;ql=!1,Bh=null}else throw Error(Z(198));xh||(xh=!0,Em=c)}}function Ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function CE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zB(t){if(Ao(t)!==t)throw Error(Z(188))}function Tk(t){var e=t.alternate;if(!e){if(e=Ao(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var A=n.return;if(A===null)break;var s=A.alternate;if(s===null){if(r=A.return,r!==null){n=r;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===n)return zB(A),t;if(s===r)return zB(A),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=A,r=s;else{for(var i=!1,o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function IE(t){return t=Tk(t),t!==null?EE(t):null}function EE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EE(t);if(e!==null)return e;t=t.sibling}return null}var bE=dr.unstable_scheduleCallback,WB=dr.unstable_cancelCallback,Fk=dr.unstable_shouldYield,Uk=dr.unstable_requestPaint,Mt=dr.unstable_now,Qk=dr.unstable_getCurrentPriorityLevel,Cw=dr.unstable_ImmediatePriority,TE=dr.unstable_UserBlockingPriority,_h=dr.unstable_NormalPriority,Sk=dr.unstable_LowPriority,FE=dr.unstable_IdlePriority,bf=null,AA=null;function kk(t){if(AA&&typeof AA.onCommitFiberRoot=="function")try{AA.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:Pk,Rk=Math.log,Nk=Math.LN2;function Pk(t){return t>>>=0,t===0?32:31-(Rk(t)/Nk|0)|0}var td=64,nd=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ch(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,A=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~A;o!==0?r=Ql(o):(s&=i,s!==0&&(r=Ql(s)))}else i=n&~A,i!==0?r=Ql(i):s!==0&&(r=Ql(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&A)&&(A=r&-r,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mr(e),A=1<<n,r|=t[n],e&=~A;return r}function Dk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Mr(s),o=1<<i,a=A[i];a===-1?(!(o&n)||o&r)&&(A[i]=Dk(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UE(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function rp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mr(e),t[e]=n}function Ok(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var A=31-Mr(n),s=1<<A;e[A]=0,r[A]=-1,t[A]=-1,n&=~s}}function Iw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mr(n),A=1<<r;A&e|t[r]&e&&(t[r]|=e),n&=~A}}var At=0;function QE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var SE,Ew,kE,RE,NE,Tm=!1,rd=[],Cs=null,Is=null,Es=null,yc=new Map,Bc=new Map,ds=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $B(t,e){switch(t){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(e.pointerId)}}function ul(t,e,n,r,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[A]},e!==null&&(e=uu(e),e!==null&&Ew(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function Vk(t,e,n,r,A){switch(e){case"focusin":return Cs=ul(Cs,t,e,n,r,A),!0;case"dragenter":return Is=ul(Is,t,e,n,r,A),!0;case"mouseover":return Es=ul(Es,t,e,n,r,A),!0;case"pointerover":var s=A.pointerId;return yc.set(s,ul(yc.get(s)||null,t,e,n,r,A)),!0;case"gotpointercapture":return s=A.pointerId,Bc.set(s,ul(Bc.get(s)||null,t,e,n,r,A)),!0}return!1}function PE(t){var e=Ii(t.target);if(e!==null){var n=Ao(e);if(n!==null){if(e=n.tag,e===13){if(e=CE(n),e!==null){t.blockedOn=e,NE(t.priority,function(){kE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_m=r,n.target.dispatchEvent(r),_m=null}else return e=uu(n),e!==null&&Ew(e),t.blockedOn=n,!1;e.shift()}return!0}function qB(t,e,n){Wd(t)&&n.delete(e)}function Hk(){Tm=!1,Cs!==null&&Wd(Cs)&&(Cs=null),Is!==null&&Wd(Is)&&(Is=null),Es!==null&&Wd(Es)&&(Es=null),yc.forEach(qB),Bc.forEach(qB)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Tm||(Tm=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,Hk)))}function xc(t){function e(A){return dl(A,t)}if(0<rd.length){dl(rd[0],t);for(var n=1;n<rd.length;n++){var r=rd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cs!==null&&dl(Cs,t),Is!==null&&dl(Is,t),Es!==null&&dl(Es,t),yc.forEach(e),Bc.forEach(e),n=0;n<ds.length;n++)r=ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ds.length&&(n=ds[0],n.blockedOn===null);)PE(n),n.blockedOn===null&&ds.shift()}var ta=VA.ReactCurrentBatchConfig,Ih=!0;function jk(t,e,n,r){var A=At,s=ta.transition;ta.transition=null;try{At=1,bw(t,e,n,r)}finally{At=A,ta.transition=s}}function Kk(t,e,n,r){var A=At,s=ta.transition;ta.transition=null;try{At=4,bw(t,e,n,r)}finally{At=A,ta.transition=s}}function bw(t,e,n,r){if(Ih){var A=Fm(t,e,n,r);if(A===null)hp(t,e,r,Eh,n),$B(t,r);else if(Vk(A,t,e,n,r))r.stopPropagation();else if($B(t,r),e&4&&-1<Mk.indexOf(t)){for(;A!==null;){var s=uu(A);if(s!==null&&SE(s),s=Fm(t,e,n,r),s===null&&hp(t,e,r,Eh,n),s===A)break;A=s}A!==null&&r.stopPropagation()}else hp(t,e,r,null,n)}}var Eh=null;function Fm(t,e,n,r){if(Eh=null,t=_w(r),t=Ii(t),t!==null)if(e=Ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=CE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eh=t,null}function DE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qk()){case Cw:return 1;case TE:return 4;case _h:case Sk:return 16;case FE:return 536870912;default:return 16}default:return 16}}var ps=null,Tw=null,$d=null;function LE(){if($d)return $d;var t,e=Tw,n=e.length,r,A="value"in ps?ps.value:ps.textContent,s=A.length;for(t=0;t<n&&e[t]===A[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===A[s-r];r++);return $d=A.slice(t,1<r?1-r:void 0)}function qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ad(){return!0}function JB(){return!1}function gr(t){function e(n,r,A,s,i){this._reactName=n,this._targetInst=A,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ad:JB,this.isPropagationStopped=JB,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fw=gr(La),cu=bt({},La,{view:0,detail:0}),Gk=gr(cu),Ap,sp,hl,Tf=bt({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(Ap=t.screenX-hl.screenX,sp=t.screenY-hl.screenY):sp=Ap=0,hl=t),Ap)},movementY:function(t){return"movementY"in t?t.movementY:sp}}),XB=gr(Tf),zk=bt({},Tf,{dataTransfer:0}),Wk=gr(zk),$k=bt({},cu,{relatedTarget:0}),ip=gr($k),qk=bt({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),Jk=gr(qk),Xk=bt({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yk=gr(Xk),Zk=bt({},La,{data:0}),YB=gr(Zk),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n2[t])?!!e[t]:!1}function Uw(){return r2}var A2=bt({},cu,{key:function(t){if(t.key){var e=e2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uw,charCode:function(t){return t.type==="keypress"?qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s2=gr(A2),i2=bt({},Tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZB=gr(i2),o2=bt({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uw}),a2=gr(o2),l2=bt({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=gr(l2),u2=bt({},Tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=gr(u2),h2=[9,13,27,32],Qw=SA&&"CompositionEvent"in window,Jl=null;SA&&"documentMode"in document&&(Jl=document.documentMode);var f2=SA&&"TextEvent"in window&&!Jl,OE=SA&&(!Qw||Jl&&8<Jl&&11>=Jl),ex=" ",tx=!1;function ME(t,e){switch(t){case"keyup":return h2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function g2(t,e){switch(t){case"compositionend":return VE(e);case"keypress":return e.which!==32?null:(tx=!0,ex);case"textInput":return t=e.data,t===ex&&tx?null:t;default:return null}}function p2(t,e){if(Mo)return t==="compositionend"||!Qw&&ME(t,e)?(t=LE(),$d=Tw=ps=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OE&&e.locale!=="ko"?null:e.data;default:return null}}var m2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m2[t.type]:e==="textarea"}function HE(t,e,n,r){vE(r),e=bh(e,"onChange"),0<e.length&&(n=new Fw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xl=null,_c=null;function w2(t){ZE(t,0)}function Ff(t){var e=jo(t);if(dE(e))return t}function v2(t,e){if(t==="change")return e}var jE=!1;if(SA){var op;if(SA){var ap="oninput"in document;if(!ap){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),ap=typeof rx.oninput=="function"}op=ap}else op=!1;jE=op&&(!document.documentMode||9<document.documentMode)}function Ax(){Xl&&(Xl.detachEvent("onpropertychange",KE),_c=Xl=null)}function KE(t){if(t.propertyName==="value"&&Ff(_c)){var e=[];HE(e,_c,t,_w(t)),_E(w2,e)}}function y2(t,e,n){t==="focusin"?(Ax(),Xl=e,_c=n,Xl.attachEvent("onpropertychange",KE)):t==="focusout"&&Ax()}function B2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ff(_c)}function x2(t,e){if(t==="click")return Ff(e)}function _2(t,e){if(t==="input"||t==="change")return Ff(e)}function C2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:C2;function Cc(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var A=n[r];if(!um.call(e,A)||!jr(t[A],e[A]))return!1}return!0}function sx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ix(t,e){var n=sx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sx(n)}}function GE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?GE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zE(){for(var t=window,e=yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yh(t.document)}return e}function Sw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I2(t){var e=zE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&GE(n.ownerDocument.documentElement,n)){if(r!==null&&Sw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=n.textContent.length,s=Math.min(r.start,A);r=r.end===void 0?s:Math.min(r.end,A),!t.extend&&s>r&&(A=r,r=s,s=A),A=ix(n,s);var i=ix(n,r);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E2=SA&&"documentMode"in document&&11>=document.documentMode,Vo=null,Um=null,Yl=null,Qm=!1;function ox(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qm||Vo==null||Vo!==yh(r)||(r=Vo,"selectionStart"in r&&Sw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&Cc(Yl,r)||(Yl=r,r=bh(Um,"onSelect"),0<r.length&&(e=new Fw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},lp={},WE={};SA&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Uf(t){if(lp[t])return lp[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WE)return lp[t]=e[n];return t}var $E=Uf("animationend"),qE=Uf("animationiteration"),JE=Uf("animationstart"),XE=Uf("transitionend"),YE=new Map,ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,e){YE.set(t,e),ro(e,[t])}for(var cp=0;cp<ax.length;cp++){var up=ax[cp],b2=up.toLowerCase(),T2=up[0].toUpperCase()+up.slice(1);Xs(b2,"on"+T2)}Xs($E,"onAnimationEnd");Xs(qE,"onAnimationIteration");Xs(JE,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(XE,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function lx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bk(r,e,void 0,t),t.currentTarget=null}function ZE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],A=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==s&&A.isPropagationStopped())break e;lx(A,o,c),s=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==s&&A.isPropagationStopped())break e;lx(A,o,c),s=a}}}if(xh)throw t=Em,xh=!1,Em=null,t}function ht(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(eb(e,t,2,!1),n.add(r))}function dp(t,e,n){var r=0;e&&(r|=4),eb(n,t,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[id]){t[id]=!0,oE.forEach(function(n){n!=="selectionchange"&&(F2.has(n)||dp(n,!1,t),dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,dp("selectionchange",!1,e))}}function eb(t,e,n,r){switch(DE(e)){case 1:var A=jk;break;case 4:A=Kk;break;default:A=bw}n=A.bind(null,e,n,t),A=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),r?A!==void 0?t.addEventListener(e,n,{capture:!0,passive:A}):t.addEventListener(e,n,!0):A!==void 0?t.addEventListener(e,n,{passive:A}):t.addEventListener(e,n,!1)}function hp(t,e,n,r,A){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===A||o.nodeType===8&&o.parentNode===A)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===A||a.nodeType===8&&a.parentNode===A))return;i=i.return}for(;o!==null;){if(i=Ii(o),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}o=o.parentNode}}r=r.return}_E(function(){var c=s,d=_w(n),h=[];e:{var f=YE.get(t);if(f!==void 0){var w=Fw,m=t;switch(t){case"keypress":if(qd(n)===0)break e;case"keydown":case"keyup":w=s2;break;case"focusin":m="focus",w=ip;break;case"focusout":m="blur",w=ip;break;case"beforeblur":case"afterblur":w=ip;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=XB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Wk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=a2;break;case $E:case qE:case JE:w=Jk;break;case XE:w=c2;break;case"scroll":w=Gk;break;case"wheel":w=d2;break;case"copy":case"cut":case"paste":w=Yk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ZB}var x=(e&4)!==0,C=!x&&t==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var B=c,v;B!==null;){v=B;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,y!==null&&(k=vc(B,y),k!=null&&x.push(Ec(B,k,v)))),C)break;B=B.return}0<x.length&&(f=new w(f,m,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&n!==_m&&(m=n.relatedTarget||n.fromElement)&&(Ii(m)||m[kA]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(m=n.relatedTarget||n.toElement,w=c,m=m?Ii(m):null,m!==null&&(C=Ao(m),m!==C||m.tag!==5&&m.tag!==6)&&(m=null)):(w=null,m=c),w!==m)){if(x=XB,k="onMouseLeave",y="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(x=ZB,k="onPointerLeave",y="onPointerEnter",B="pointer"),C=w==null?f:jo(w),v=m==null?f:jo(m),f=new x(k,B+"leave",w,n,d),f.target=C,f.relatedTarget=v,k=null,Ii(d)===c&&(x=new x(y,B+"enter",m,n,d),x.target=v,x.relatedTarget=C,k=x),C=k,w&&m)t:{for(x=w,y=m,B=0,v=x;v;v=mo(v))B++;for(v=0,k=y;k;k=mo(k))v++;for(;0<B-v;)x=mo(x),B--;for(;0<v-B;)y=mo(y),v--;for(;B--;){if(x===y||y!==null&&x===y.alternate)break t;x=mo(x),y=mo(y)}x=null}else x=null;w!==null&&cx(h,f,w,x,!1),m!==null&&C!==null&&cx(h,C,m,x,!0)}}e:{if(f=c?jo(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var R=v2;else if(nx(f))if(jE)R=_2;else{R=B2;var N=y2}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=x2);if(R&&(R=R(t,c))){HE(h,R,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&wm(f,"number",f.value)}switch(N=c?jo(c):window,t){case"focusin":(nx(N)||N.contentEditable==="true")&&(Vo=N,Um=c,Yl=null);break;case"focusout":Yl=Um=Vo=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,ox(h,n,d);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":ox(h,n,d)}var I;if(Qw)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Mo?ME(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(OE&&n.locale!=="ko"&&(Mo||_!=="onCompositionStart"?_==="onCompositionEnd"&&Mo&&(I=LE()):(ps=d,Tw="value"in ps?ps.value:ps.textContent,Mo=!0)),N=bh(c,_),0<N.length&&(_=new YB(_,t,null,n,d),h.push({event:_,listeners:N}),I?_.data=I:(I=VE(n),I!==null&&(_.data=I)))),(I=f2?g2(t,n):p2(t,n))&&(c=bh(c,"onBeforeInput"),0<c.length&&(d=new YB("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}ZE(h,e)})}function Ec(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=vc(t,n),s!=null&&r.unshift(Ec(t,s,A)),s=vc(t,e),s!=null&&r.push(Ec(t,s,A))),t=t.return}return r}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cx(t,e,n,r,A){for(var s=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,A?(a=vc(n,s),a!=null&&i.unshift(Ec(n,a,o))):A||(a=vc(n,s),a!=null&&i.push(Ec(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var U2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function ux(t){return(typeof t=="string"?t:""+t).replace(U2,`
`).replace(Q2,"")}function od(t,e,n){if(e=ux(e),ux(t)!==e&&n)throw Error(Z(425))}function Th(){}var Sm=null,km=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,S2=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,k2=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(t){return dx.resolve(null).then(t).catch(R2)}:Nm;function R2(t){setTimeout(function(){throw t})}function fp(t,e){var n=e,r=0;do{var A=n.nextSibling;if(t.removeChild(n),A&&A.nodeType===8)if(n=A.data,n==="/$"){if(r===0){t.removeChild(A),xc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=A}while(n);xc(e)}function bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),qr="__reactFiber$"+Oa,bc="__reactProps$"+Oa,kA="__reactContainer$"+Oa,Pm="__reactEvents$"+Oa,N2="__reactListeners$"+Oa,P2="__reactHandles$"+Oa;function Ii(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kA]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hx(t);t!==null;){if(n=t[qr])return n;t=hx(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[qr]||t[kA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Qf(t){return t[bc]||null}var Dm=[],Ko=-1;function Ys(t){return{current:t}}function gt(t){0>Ko||(t.current=Dm[Ko],Dm[Ko]=null,Ko--)}function lt(t,e){Ko++,Dm[Ko]=t.current,t.current=e}var Ls={},Un=Ys(Ls),er=Ys(!1),Oi=Ls;function da(t,e){var n=t.type.contextTypes;if(!n)return Ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in n)A[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function tr(t){return t=t.childContextTypes,t!=null}function Fh(){gt(er),gt(Un)}function fx(t,e,n){if(Un.current!==Ls)throw Error(Z(168));lt(Un,e),lt(er,n)}function tb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var A in r)if(!(A in e))throw Error(Z(108,yk(t)||"Unknown",A));return bt({},n,r)}function Uh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,Oi=Un.current,lt(Un,t),lt(er,er.current),!0}function gx(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=tb(t,e,Oi),r.__reactInternalMemoizedMergedChildContext=t,gt(er),gt(Un),lt(Un,t)):gt(er),lt(er,n)}var xA=null,Sf=!1,gp=!1;function nb(t){xA===null?xA=[t]:xA.push(t)}function D2(t){Sf=!0,nb(t)}function Zs(){if(!gp&&xA!==null){gp=!0;var t=0,e=At;try{var n=xA;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xA=null,Sf=!1}catch(A){throw xA!==null&&(xA=xA.slice(t+1)),bE(Cw,Zs),A}finally{At=e,gp=!1}}return null}var Go=[],zo=0,Qh=null,Sh=0,yr=[],Br=0,Mi=null,_A=1,CA="";function fi(t,e){Go[zo++]=Sh,Go[zo++]=Qh,Qh=t,Sh=e}function rb(t,e,n){yr[Br++]=_A,yr[Br++]=CA,yr[Br++]=Mi,Mi=t;var r=_A;t=CA;var A=32-Mr(r)-1;r&=~(1<<A),n+=1;var s=32-Mr(e)+A;if(30<s){var i=A-A%5;s=(r&(1<<i)-1).toString(32),r>>=i,A-=i,_A=1<<32-Mr(e)+A|n<<A|r,CA=s+t}else _A=1<<s|n<<A|r,CA=t}function kw(t){t.return!==null&&(fi(t,1),rb(t,1,0))}function Rw(t){for(;t===Qh;)Qh=Go[--zo],Go[zo]=null,Sh=Go[--zo],Go[zo]=null;for(;t===Mi;)Mi=yr[--Br],yr[Br]=null,CA=yr[--Br],yr[Br]=null,_A=yr[--Br],yr[Br]=null}var ur=null,lr=null,wt=!1,Or=null;function Ab(t,e){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function px(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,lr=bs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mi!==null?{id:_A,overflow:CA}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,lr=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(wt){var e=lr;if(e){var n=e;if(!px(t,e)){if(Lm(t))throw Error(Z(418));e=bs(n.nextSibling);var r=ur;e&&px(t,e)?Ab(r,n):(t.flags=t.flags&-4097|2,wt=!1,ur=t)}}else{if(Lm(t))throw Error(Z(418));t.flags=t.flags&-4097|2,wt=!1,ur=t}}}function mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function ad(t){if(t!==ur)return!1;if(!wt)return mx(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=lr)){if(Lm(t))throw sb(),Error(Z(418));for(;e;)Ab(t,e),e=bs(e.nextSibling)}if(mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){lr=bs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}lr=null}}else lr=ur?bs(t.stateNode.nextSibling):null;return!0}function sb(){for(var t=lr;t;)t=bs(t.nextSibling)}function ha(){lr=ur=null,wt=!1}function Nw(t){Or===null?Or=[t]:Or.push(t)}var L2=VA.ReactCurrentBatchConfig;function fl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var A=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var o=A.refs;i===null?delete o[s]:o[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ld(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wx(t){var e=t._init;return e(t._payload)}function ib(t){function e(y,B){if(t){var v=y.deletions;v===null?(y.deletions=[B],y.flags|=16):v.push(B)}}function n(y,B){if(!t)return null;for(;B!==null;)e(y,B),B=B.sibling;return null}function r(y,B){for(y=new Map;B!==null;)B.key!==null?y.set(B.key,B):y.set(B.index,B),B=B.sibling;return y}function A(y,B){return y=Qs(y,B),y.index=0,y.sibling=null,y}function s(y,B,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<B?(y.flags|=2,B):v):(y.flags|=2,B)):(y.flags|=1048576,B)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,B,v,k){return B===null||B.tag!==6?(B=xp(v,y.mode,k),B.return=y,B):(B=A(B,v),B.return=y,B)}function a(y,B,v,k){var R=v.type;return R===Oo?d(y,B,v.props.children,k,v.key):B!==null&&(B.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ls&&wx(R)===B.type)?(k=A(B,v.props),k.ref=fl(y,B,v),k.return=y,k):(k=nh(v.type,v.key,v.props,null,y.mode,k),k.ref=fl(y,B,v),k.return=y,k)}function c(y,B,v,k){return B===null||B.tag!==4||B.stateNode.containerInfo!==v.containerInfo||B.stateNode.implementation!==v.implementation?(B=_p(v,y.mode,k),B.return=y,B):(B=A(B,v.children||[]),B.return=y,B)}function d(y,B,v,k,R){return B===null||B.tag!==7?(B=ki(v,y.mode,k,R),B.return=y,B):(B=A(B,v),B.return=y,B)}function h(y,B,v){if(typeof B=="string"&&B!==""||typeof B=="number")return B=xp(""+B,y.mode,v),B.return=y,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Yu:return v=nh(B.type,B.key,B.props,null,y.mode,v),v.ref=fl(y,null,B),v.return=y,v;case Lo:return B=_p(B,y.mode,v),B.return=y,B;case ls:var k=B._init;return h(y,k(B._payload),v)}if(Ul(B)||ll(B))return B=ki(B,y.mode,v,null),B.return=y,B;ld(y,B)}return null}function f(y,B,v,k){var R=B!==null?B.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return R!==null?null:o(y,B,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yu:return v.key===R?a(y,B,v,k):null;case Lo:return v.key===R?c(y,B,v,k):null;case ls:return R=v._init,f(y,B,R(v._payload),k)}if(Ul(v)||ll(v))return R!==null?null:d(y,B,v,k,null);ld(y,v)}return null}function w(y,B,v,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(v)||null,o(B,y,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Yu:return y=y.get(k.key===null?v:k.key)||null,a(B,y,k,R);case Lo:return y=y.get(k.key===null?v:k.key)||null,c(B,y,k,R);case ls:var N=k._init;return w(y,B,v,N(k._payload),R)}if(Ul(k)||ll(k))return y=y.get(v)||null,d(B,y,k,R,null);ld(B,k)}return null}function m(y,B,v,k){for(var R=null,N=null,I=B,_=B=0,b=null;I!==null&&_<v.length;_++){I.index>_?(b=I,I=null):b=I.sibling;var Q=f(y,I,v[_],k);if(Q===null){I===null&&(I=b);break}t&&I&&Q.alternate===null&&e(y,I),B=s(Q,B,_),N===null?R=Q:N.sibling=Q,N=Q,I=b}if(_===v.length)return n(y,I),wt&&fi(y,_),R;if(I===null){for(;_<v.length;_++)I=h(y,v[_],k),I!==null&&(B=s(I,B,_),N===null?R=I:N.sibling=I,N=I);return wt&&fi(y,_),R}for(I=r(y,I);_<v.length;_++)b=w(I,y,_,v[_],k),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?_:b.key),B=s(b,B,_),N===null?R=b:N.sibling=b,N=b);return t&&I.forEach(function(U){return e(y,U)}),wt&&fi(y,_),R}function x(y,B,v,k){var R=ll(v);if(typeof R!="function")throw Error(Z(150));if(v=R.call(v),v==null)throw Error(Z(151));for(var N=R=null,I=B,_=B=0,b=null,Q=v.next();I!==null&&!Q.done;_++,Q=v.next()){I.index>_?(b=I,I=null):b=I.sibling;var U=f(y,I,Q.value,k);if(U===null){I===null&&(I=b);break}t&&I&&U.alternate===null&&e(y,I),B=s(U,B,_),N===null?R=U:N.sibling=U,N=U,I=b}if(Q.done)return n(y,I),wt&&fi(y,_),R;if(I===null){for(;!Q.done;_++,Q=v.next())Q=h(y,Q.value,k),Q!==null&&(B=s(Q,B,_),N===null?R=Q:N.sibling=Q,N=Q);return wt&&fi(y,_),R}for(I=r(y,I);!Q.done;_++,Q=v.next())Q=w(I,y,_,Q.value,k),Q!==null&&(t&&Q.alternate!==null&&I.delete(Q.key===null?_:Q.key),B=s(Q,B,_),N===null?R=Q:N.sibling=Q,N=Q);return t&&I.forEach(function(D){return e(y,D)}),wt&&fi(y,_),R}function C(y,B,v,k){if(typeof v=="object"&&v!==null&&v.type===Oo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Yu:e:{for(var R=v.key,N=B;N!==null;){if(N.key===R){if(R=v.type,R===Oo){if(N.tag===7){n(y,N.sibling),B=A(N,v.props.children),B.return=y,y=B;break e}}else if(N.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ls&&wx(R)===N.type){n(y,N.sibling),B=A(N,v.props),B.ref=fl(y,N,v),B.return=y,y=B;break e}n(y,N);break}else e(y,N);N=N.sibling}v.type===Oo?(B=ki(v.props.children,y.mode,k,v.key),B.return=y,y=B):(k=nh(v.type,v.key,v.props,null,y.mode,k),k.ref=fl(y,B,v),k.return=y,y=k)}return i(y);case Lo:e:{for(N=v.key;B!==null;){if(B.key===N)if(B.tag===4&&B.stateNode.containerInfo===v.containerInfo&&B.stateNode.implementation===v.implementation){n(y,B.sibling),B=A(B,v.children||[]),B.return=y,y=B;break e}else{n(y,B);break}else e(y,B);B=B.sibling}B=_p(v,y.mode,k),B.return=y,y=B}return i(y);case ls:return N=v._init,C(y,B,N(v._payload),k)}if(Ul(v))return m(y,B,v,k);if(ll(v))return x(y,B,v,k);ld(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,B!==null&&B.tag===6?(n(y,B.sibling),B=A(B,v),B.return=y,y=B):(n(y,B),B=xp(v,y.mode,k),B.return=y,y=B),i(y)):n(y,B)}return C}var fa=ib(!0),ob=ib(!1),kh=Ys(null),Rh=null,Wo=null,Pw=null;function Dw(){Pw=Wo=Rh=null}function Lw(t){var e=kh.current;gt(kh),t._currentValue=e}function Mm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function na(t,e){Rh=t,Pw=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jn=!0),t.firstContext=null)}function Ur(t){var e=t._currentValue;if(Pw!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(Rh===null)throw Error(Z(308));Wo=t,Rh.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var Ei=null;function Ow(t){Ei===null?Ei=[t]:Ei.push(t)}function ab(t,e,n,r){var A=e.interleaved;return A===null?(n.next=n,Ow(e)):(n.next=A.next,A.next=n),e.interleaved=n,RA(t,r)}function RA(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function Mw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function TA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var A=r.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),r.pending=e,RA(t,n)}return A=r.interleaved,A===null?(e.next=e,Ow(r)):(e.next=A.next,A.next=e),r.interleaved=e,RA(t,n)}function Jd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iw(t,n)}}function vx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var A=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?A=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?A=s=e:s=s.next=e}else A=s=e;n={baseState:r.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nh(t,e,n,r){var A=t.updateQueue;cs=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,o=A.shared.pending;if(o!==null){A.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?s=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(s!==null){var h=A.baseState;i=0,d=c=a=null,o=s;do{var f=o.lane,w=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,x=o;switch(f=e,w=n,x.tag){case 1:if(m=x.payload,typeof m=="function"){h=m.call(w,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=x.payload,f=typeof m=="function"?m.call(w,h,f):m,f==null)break e;h=bt({},h,f);break e;case 2:cs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[o]:f.push(o))}else w={eventTime:w,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=w,a=h):d=d.next=w,i|=f;if(o=o.next,o===null){if(o=A.shared.pending,o===null)break;f=o,o=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(a=h),A.baseState=a,A.firstBaseUpdate=c,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Hi|=i,t.lanes=i,t.memoizedState=h}}function yx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],A=r.callback;if(A!==null){if(r.callback=null,r=n,typeof A!="function")throw Error(Z(191,A));A.call(r)}}}var du={},sA=Ys(du),Tc=Ys(du),Fc=Ys(du);function bi(t){if(t===du)throw Error(Z(174));return t}function Vw(t,e){switch(lt(Fc,e),lt(Tc,t),lt(sA,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ym(e,t)}gt(sA),lt(sA,e)}function ga(){gt(sA),gt(Tc),gt(Fc)}function cb(t){bi(Fc.current);var e=bi(sA.current),n=ym(e,t.type);e!==n&&(lt(Tc,t),lt(sA,n))}function Hw(t){Tc.current===t&&(gt(sA),gt(Tc))}var _t=Ys(0);function Ph(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pp=[];function jw(){for(var t=0;t<pp.length;t++)pp[t]._workInProgressVersionPrimary=null;pp.length=0}var Xd=VA.ReactCurrentDispatcher,mp=VA.ReactCurrentBatchConfig,Vi=0,Ct=null,qt=null,An=null,Dh=!1,Zl=!1,Uc=0,O2=0;function _n(){throw Error(Z(321))}function Kw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function Gw(t,e,n,r,A,s){if(Vi=s,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xd.current=t===null||t.memoizedState===null?j2:K2,t=n(r,A),Zl){s=0;do{if(Zl=!1,Uc=0,25<=s)throw Error(Z(301));s+=1,An=qt=null,e.updateQueue=null,Xd.current=G2,t=n(r,A)}while(Zl)}if(Xd.current=Lh,e=qt!==null&&qt.next!==null,Vi=0,An=qt=Ct=null,Dh=!1,e)throw Error(Z(300));return t}function zw(){var t=Uc!==0;return Uc=0,t}function $r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Ct.memoizedState=An=t:An=An.next=t,An}function Qr(){if(qt===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=An===null?Ct.memoizedState:An.next;if(e!==null)An=e,qt=t;else{if(t===null)throw Error(Z(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},An===null?Ct.memoizedState=An=t:An=An.next=t}return An}function Qc(t,e){return typeof e=="function"?e(t):e}function wp(t){var e=Qr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=qt,A=r.baseQueue,s=n.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}r.baseQueue=A=s,n.pending=null}if(A!==null){s=A.next,r=r.baseState;var o=i=null,a=null,c=s;do{var d=c.lane;if((Vi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,Ct.lanes|=d,Hi|=d}c=c.next}while(c!==null&&c!==s);a===null?i=r:a.next=o,jr(r,e.memoizedState)||(Jn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){A=t;do s=A.lane,Ct.lanes|=s,Hi|=s,A=A.next;while(A!==t)}else A===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vp(t){var e=Qr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,A=n.pending,s=e.memoizedState;if(A!==null){n.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);jr(s,e.memoizedState)||(Jn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ub(){}function db(t,e){var n=Ct,r=Qr(),A=e(),s=!jr(r.memoizedState,A);if(s&&(r.memoizedState=A,Jn=!0),r=r.queue,Ww(gb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||An!==null&&An.memoizedState.tag&1){if(n.flags|=2048,Sc(9,fb.bind(null,n,r,A,e),void 0,null),on===null)throw Error(Z(349));Vi&30||hb(n,e,A)}return A}function hb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fb(t,e,n,r){e.value=n,e.getSnapshot=r,pb(e)&&mb(t)}function gb(t,e,n){return n(function(){pb(e)&&mb(t)})}function pb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jr(t,n)}catch{return!0}}function mb(t){var e=RA(t,1);e!==null&&Vr(e,t,1,-1)}function Bx(t){var e=$r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:t},e.queue=t,t=t.dispatch=H2.bind(null,Ct,t),[e.memoizedState,t]}function Sc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wb(){return Qr().memoizedState}function Yd(t,e,n,r){var A=$r();Ct.flags|=t,A.memoizedState=Sc(1|e,n,void 0,r===void 0?null:r)}function kf(t,e,n,r){var A=Qr();r=r===void 0?null:r;var s=void 0;if(qt!==null){var i=qt.memoizedState;if(s=i.destroy,r!==null&&Kw(r,i.deps)){A.memoizedState=Sc(e,n,s,r);return}}Ct.flags|=t,A.memoizedState=Sc(1|e,n,s,r)}function xx(t,e){return Yd(8390656,8,t,e)}function Ww(t,e){return kf(2048,8,t,e)}function vb(t,e){return kf(4,2,t,e)}function yb(t,e){return kf(4,4,t,e)}function Bb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xb(t,e,n){return n=n!=null?n.concat([t]):null,kf(4,4,Bb.bind(null,e,t),n)}function $w(){}function _b(t,e){var n=Qr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cb(t,e){var n=Qr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ib(t,e,n){return Vi&21?(jr(n,e)||(n=UE(),Ct.lanes|=n,Hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jn=!0),t.memoizedState=n)}function M2(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=mp.transition;mp.transition={};try{t(!1),e()}finally{At=n,mp.transition=r}}function Eb(){return Qr().memoizedState}function V2(t,e,n){var r=Us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bb(t))Tb(e,n);else if(n=ab(t,e,n,r),n!==null){var A=Ln();Vr(n,t,r,A),Fb(n,e,r)}}function H2(t,e,n){var r=Us(t),A={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bb(t))Tb(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,o=s(i,n);if(A.hasEagerState=!0,A.eagerState=o,jr(o,i)){var a=e.interleaved;a===null?(A.next=A,Ow(e)):(A.next=a.next,a.next=A),e.interleaved=A;return}}catch{}finally{}n=ab(t,e,A,r),n!==null&&(A=Ln(),Vr(n,t,r,A),Fb(n,e,r))}}function bb(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function Tb(t,e){Zl=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iw(t,n)}}var Lh={readContext:Ur,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},j2={readContext:Ur,useCallback:function(t,e){return $r().memoizedState=[t,e===void 0?null:e],t},useContext:Ur,useEffect:xx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4194308,4,Bb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yd(4,2,t,e)},useMemo:function(t,e){var n=$r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V2.bind(null,Ct,t),[r.memoizedState,t]},useRef:function(t){var e=$r();return t={current:t},e.memoizedState=t},useState:Bx,useDebugValue:$w,useDeferredValue:function(t){return $r().memoizedState=t},useTransition:function(){var t=Bx(!1),e=t[0];return t=M2.bind(null,t[1]),$r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ct,A=$r();if(wt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),on===null)throw Error(Z(349));Vi&30||hb(r,e,n)}A.memoizedState=n;var s={value:n,getSnapshot:e};return A.queue=s,xx(gb.bind(null,r,s,t),[t]),r.flags|=2048,Sc(9,fb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$r(),e=on.identifierPrefix;if(wt){var n=CA,r=_A;n=(r&~(1<<32-Mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K2={readContext:Ur,useCallback:_b,useContext:Ur,useEffect:Ww,useImperativeHandle:xb,useInsertionEffect:vb,useLayoutEffect:yb,useMemo:Cb,useReducer:wp,useRef:wb,useState:function(){return wp(Qc)},useDebugValue:$w,useDeferredValue:function(t){var e=Qr();return Ib(e,qt.memoizedState,t)},useTransition:function(){var t=wp(Qc)[0],e=Qr().memoizedState;return[t,e]},useMutableSource:ub,useSyncExternalStore:db,useId:Eb,unstable_isNewReconciler:!1},G2={readContext:Ur,useCallback:_b,useContext:Ur,useEffect:Ww,useImperativeHandle:xb,useInsertionEffect:vb,useLayoutEffect:yb,useMemo:Cb,useReducer:vp,useRef:wb,useState:function(){return vp(Qc)},useDebugValue:$w,useDeferredValue:function(t){var e=Qr();return qt===null?e.memoizedState=t:Ib(e,qt.memoizedState,t)},useTransition:function(){var t=vp(Qc)[0],e=Qr().memoizedState;return[t,e]},useMutableSource:ub,useSyncExternalStore:db,useId:Eb,unstable_isNewReconciler:!1};function Dr(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rf={isMounted:function(t){return(t=t._reactInternals)?Ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ln(),A=Us(t),s=TA(r,A);s.payload=e,n!=null&&(s.callback=n),e=Ts(t,s,A),e!==null&&(Vr(e,t,A,r),Jd(e,t,A))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ln(),A=Us(t),s=TA(r,A);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ts(t,s,A),e!==null&&(Vr(e,t,A,r),Jd(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ln(),r=Us(t),A=TA(n,r);A.tag=2,e!=null&&(A.callback=e),e=Ts(t,A,r),e!==null&&(Vr(e,t,r,n),Jd(e,t,r))}};function _x(t,e,n,r,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Cc(n,r)||!Cc(A,s):!0}function Ub(t,e,n){var r=!1,A=Ls,s=e.contextType;return typeof s=="object"&&s!==null?s=Ur(s):(A=tr(e)?Oi:Un.current,r=e.contextTypes,s=(r=r!=null)?da(t,A):Ls),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rf.enqueueReplaceState(e,e.state,null)}function Hm(t,e,n,r){var A=t.stateNode;A.props=n,A.state=t.memoizedState,A.refs={},Mw(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=Ur(s):(s=tr(e)?Oi:Un.current,A.context=da(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vm(t,e,s,n),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&Rf.enqueueReplaceState(A,A.state,null),Nh(t,n,A,r),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function pa(t,e){try{var n="",r=e;do n+=vk(r),r=r.return;while(r);var A=n}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function yp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z2=typeof WeakMap=="function"?WeakMap:Map;function Qb(t,e,n){n=TA(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mh||(Mh=!0,Zm=r),jm(t,e)},n}function Sb(t,e,n){n=TA(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var A=e.value;n.payload=function(){return r(A)},n.callback=function(){jm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jm(t,e),typeof r!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ix(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z2;var A=new Set;r.set(e,A)}else A=r.get(e),A===void 0&&(A=new Set,r.set(e,A));A.has(n)||(A.add(n),t=iR.bind(null,t,e,n),e.then(t,t))}function Ex(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bx(t,e,n,r,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=TA(-1,1),e.tag=2,Ts(n,e,1))),n.lanes|=1),t)}var W2=VA.ReactCurrentOwner,Jn=!1;function Nn(t,e,n,r){e.child=t===null?ob(e,null,n,r):fa(e,t.child,n,r)}function Tx(t,e,n,r,A){n=n.render;var s=e.ref;return na(e,A),r=Gw(t,e,n,r,s,A),n=zw(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,NA(t,e,A)):(wt&&n&&kw(e),e.flags|=1,Nn(t,e,r,A),e.child)}function Fx(t,e,n,r,A){if(t===null){var s=n.type;return typeof s=="function"&&!nv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kb(t,e,s,r,A)):(t=nh(n.type,null,r,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cc,n(i,r)&&t.ref===e.ref)return NA(t,e,A)}return e.flags|=1,t=Qs(s,r),t.ref=e.ref,t.return=e,e.child=t}function kb(t,e,n,r,A){if(t!==null){var s=t.memoizedProps;if(Cc(s,r)&&t.ref===e.ref)if(Jn=!1,e.pendingProps=r=s,(t.lanes&A)!==0)t.flags&131072&&(Jn=!0);else return e.lanes=t.lanes,NA(t,e,A)}return Km(t,e,n,r,A)}function Rb(t,e,n){var r=e.pendingProps,A=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(qo,sr),sr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(qo,sr),sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,lt(qo,sr),sr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,lt(qo,sr),sr|=r;return Nn(t,e,A,n),e.child}function Nb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Km(t,e,n,r,A){var s=tr(n)?Oi:Un.current;return s=da(e,s),na(e,A),n=Gw(t,e,n,r,s,A),r=zw(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,NA(t,e,A)):(wt&&r&&kw(e),e.flags|=1,Nn(t,e,n,A),e.child)}function Ux(t,e,n,r,A){if(tr(n)){var s=!0;Uh(e)}else s=!1;if(na(e,A),e.stateNode===null)Zd(t,e),Ub(e,n,r),Hm(e,n,r,A),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ur(c):(c=tr(n)?Oi:Un.current,c=da(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&Cx(e,i,r,c),cs=!1;var f=e.memoizedState;i.state=f,Nh(e,r,i,A),a=e.memoizedState,o!==r||f!==a||er.current||cs?(typeof d=="function"&&(Vm(e,n,d,r),a=e.memoizedState),(o=cs||_x(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,lb(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Dr(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ur(a):(a=tr(n)?Oi:Un.current,a=da(e,a));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Cx(e,i,r,a),cs=!1,f=e.memoizedState,i.state=f,Nh(e,r,i,A);var m=e.memoizedState;o!==h||f!==m||er.current||cs?(typeof w=="function"&&(Vm(e,n,w,r),m=e.memoizedState),(c=cs||_x(e,n,c,r,f,m,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,m,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,m,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),i.props=r,i.state=m,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Gm(t,e,n,r,s,A)}function Gm(t,e,n,r,A,s){Nb(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return A&&gx(e,n,!1),NA(t,e,s);r=e.stateNode,W2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=fa(e,t.child,null,s),e.child=fa(e,null,o,s)):Nn(t,e,o,s),e.memoizedState=r.state,A&&gx(e,n,!0),e.child}function Pb(t){var e=t.stateNode;e.pendingContext?fx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fx(t,e.context,!1),Vw(t,e.containerInfo)}function Qx(t,e,n,r,A){return ha(),Nw(A),e.flags|=256,Nn(t,e,n,r),e.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Db(t,e,n){var r=e.pendingProps,A=_t.current,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(A&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),lt(_t,A&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Df(i,r,0,null),t=ki(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wm(n),e.memoizedState=zm,t):qw(e,i));if(A=t.memoizedState,A!==null&&(o=A.dehydrated,o!==null))return $2(t,e,i,r,o,A,n);if(s){s=r.fallback,i=e.mode,A=t.child,o=A.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==A?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Qs(A,a),r.subtreeFlags=A.subtreeFlags&14680064),o!==null?s=Qs(o,s):(s=ki(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?Wm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=zm,r}return s=t.child,t=s.sibling,r=Qs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qw(t,e){return e=Df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cd(t,e,n,r){return r!==null&&Nw(r),fa(e,t.child,null,n),t=qw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $2(t,e,n,r,A,s,i){if(n)return e.flags&256?(e.flags&=-257,r=yp(Error(Z(422))),cd(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,A=e.mode,r=Df({mode:"visible",children:r.children},A,0,null),s=ki(s,A,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fa(e,t.child,null,i),e.child.memoizedState=Wm(i),e.memoizedState=zm,s);if(!(e.mode&1))return cd(t,e,i,null);if(A.data==="$!"){if(r=A.nextSibling&&A.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Z(419)),r=yp(s,r,void 0),cd(t,e,i,r)}if(o=(i&t.childLanes)!==0,Jn||o){if(r=on,r!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(r.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,RA(t,A),Vr(r,t,A,-1))}return tv(),r=yp(Error(Z(421))),cd(t,e,i,r)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=oR.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,lr=bs(A.nextSibling),ur=e,wt=!0,Or=null,t!==null&&(yr[Br++]=_A,yr[Br++]=CA,yr[Br++]=Mi,_A=t.id,CA=t.overflow,Mi=e),e=qw(e,r.children),e.flags|=4096,e)}function Sx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mm(t.return,e,n)}function Bp(t,e,n,r,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=A)}function Lb(t,e,n){var r=e.pendingProps,A=r.revealOrder,s=r.tail;if(Nn(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sx(t,n,e);else if(t.tag===19)Sx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(_t,r),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(n=e.child,A=null;n!==null;)t=n.alternate,t!==null&&Ph(t)===null&&(A=n),n=n.sibling;n=A,n===null?(A=e.child,e.child=null):(A=n.sibling,n.sibling=null),Bp(e,!1,A,n,s);break;case"backwards":for(n=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&Ph(t)===null){e.child=A;break}t=A.sibling,A.sibling=n,n=A,A=t}Bp(e,!0,n,null,s);break;case"together":Bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function NA(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Qs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function q2(t,e,n){switch(e.tag){case 3:Pb(e),ha();break;case 5:cb(e);break;case 1:tr(e.type)&&Uh(e);break;case 4:Vw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,A=e.memoizedProps.value;lt(kh,r._currentValue),r._currentValue=A;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?Db(t,e,n):(lt(_t,_t.current&1),t=NA(t,e,n),t!==null?t.sibling:null);lt(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Lb(t,e,n);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),lt(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,Rb(t,e,n)}return NA(t,e,n)}var Ob,$m,Mb,Vb;Ob=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};Mb=function(t,e,n,r){var A=t.memoizedProps;if(A!==r){t=e.stateNode,bi(sA.current);var s=null;switch(n){case"input":A=pm(t,A),r=pm(t,r),s=[];break;case"select":A=bt({},A,{value:void 0}),r=bt({},r,{value:void 0}),s=[];break;case"textarea":A=vm(t,A),r=vm(t,r),s=[];break;default:typeof A.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Th)}Bm(n,r);var i;n=null;for(c in A)if(!r.hasOwnProperty(c)&&A.hasOwnProperty(c)&&A[c]!=null)if(c==="style"){var o=A[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(o=A!=null?A[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ht("scroll",t),s||o===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Vb=function(t,e,n,r){n!==r&&(e.flags|=4)};function gl(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags&14680064,r|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags,r|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J2(t,e,n){var r=e.pendingProps;switch(Rw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(e),null;case 1:return tr(e.type)&&Fh(),Cn(e),null;case 3:return r=e.stateNode,ga(),gt(er),gt(Un),jw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ad(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(n0(Or),Or=null))),$m(t,e),Cn(e),null;case 5:Hw(e);var A=bi(Fc.current);if(n=e.type,t!==null&&e.stateNode!=null)Mb(t,e,n,r,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Cn(e),null}if(t=bi(sA.current),ad(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qr]=e,r[bc]=s,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(A=0;A<Sl.length;A++)ht(Sl[A],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":VB(r,s),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ht("invalid",r);break;case"textarea":jB(r,s),ht("invalid",r)}Bm(n,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&od(r.textContent,o,t),A=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&od(r.textContent,o,t),A=["children",""+o]):mc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ht("scroll",r)}switch(n){case"input":Zu(r),HB(r,s,!0);break;case"textarea":Zu(r),KB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Th)}r=A,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[qr]=e,t[bc]=r,Ob(t,e,!1,!1),e.stateNode=t;e:{switch(i=xm(n,r),n){case"dialog":ht("cancel",t),ht("close",t),A=r;break;case"iframe":case"object":case"embed":ht("load",t),A=r;break;case"video":case"audio":for(A=0;A<Sl.length;A++)ht(Sl[A],t);A=r;break;case"source":ht("error",t),A=r;break;case"img":case"image":case"link":ht("error",t),ht("load",t),A=r;break;case"details":ht("toggle",t),A=r;break;case"input":VB(t,r),A=pm(t,r),ht("invalid",t);break;case"option":A=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},A=bt({},r,{value:void 0}),ht("invalid",t);break;case"textarea":jB(t,r),A=vm(t,r),ht("invalid",t);break;default:A=r}Bm(n,A),o=A;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?wE(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&pE(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&wc(t,a):typeof a=="number"&&wc(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mc.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ht("scroll",t):a!=null&&vw(t,s,a,i))}switch(n){case"input":Zu(t),HB(t,r,!1);break;case"textarea":Zu(t),KB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ds(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=Th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cn(e),null;case 6:if(t&&e.stateNode!=null)Vb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=bi(Fc.current),bi(sA.current),ad(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(s=r.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:od(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&od(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return Cn(e),null;case 13:if(gt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&lr!==null&&e.mode&1&&!(e.flags&128))sb(),ha(),e.flags|=98560,s=!1;else if(s=ad(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[qr]=e}else ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cn(e),s=!1}else Or!==null&&(n0(Or),Or=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Xt===0&&(Xt=3):tv())),e.updateQueue!==null&&(e.flags|=4),Cn(e),null);case 4:return ga(),$m(t,e),t===null&&Ic(e.stateNode.containerInfo),Cn(e),null;case 10:return Lw(e.type._context),Cn(e),null;case 17:return tr(e.type)&&Fh(),Cn(e),null;case 19:if(gt(_t),s=e.memoizedState,s===null)return Cn(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)gl(s,!1);else{if(Xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Ph(t),i!==null){for(e.flags|=128,gl(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(_t,_t.current&1|2),e.child}t=t.sibling}s.tail!==null&&Mt()>ma&&(e.flags|=128,r=!0,gl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ph(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!wt)return Cn(e),null}else 2*Mt()-s.renderingStartTime>ma&&n!==1073741824&&(e.flags|=128,r=!0,gl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mt(),e.sibling=null,n=_t.current,lt(_t,r?n&1|2:n&1),e):(Cn(e),null);case 22:case 23:return ev(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?sr&1073741824&&(Cn(e),e.subtreeFlags&6&&(e.flags|=8192)):Cn(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function X2(t,e){switch(Rw(e),e.tag){case 1:return tr(e.type)&&Fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),gt(er),gt(Un),jw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hw(e),null;case 13:if(gt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(_t),null;case 4:return ga(),null;case 10:return Lw(e.type._context),null;case 22:case 23:return ev(),null;case 24:return null;default:return null}}var ud=!1,Fn=!1,Y2=typeof WeakSet=="function"?WeakSet:Set,ve=null;function $o(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ut(t,e,r)}else n.current=null}function qm(t,e,n){try{n()}catch(r){Ut(t,e,r)}}var kx=!1;function Z2(t,e){if(Sm=Ih,t=zE(),Sw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var A=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==n||A!==0&&h.nodeType!==3||(o=i+A),h!==s||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===n&&++c===A&&(o=i),f===s&&++d===r&&(a=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},Ih=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var x=m.memoizedProps,C=m.memoizedState,y=e.stateNode,B=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:Dr(e.type,x),C);y.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(k){Ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return m=kx,kx=!1,m}function ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var A=r=r.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&qm(e,n,s)}A=A.next}while(A!==r)}}function Nf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hb(t){var e=t.alternate;e!==null&&(t.alternate=null,Hb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[bc],delete e[Pm],delete e[N2],delete e[P2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jb(t){return t.tag===5||t.tag===3||t.tag===4}function Rx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Th));else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}var cn=null,Lr=!1;function ts(t,e,n){for(n=n.child;n!==null;)Kb(t,e,n),n=n.sibling}function Kb(t,e,n){if(AA&&typeof AA.onCommitFiberUnmount=="function")try{AA.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Fn||$o(n,e);case 6:var r=cn,A=Lr;cn=null,ts(t,e,n),cn=r,Lr=A,cn!==null&&(Lr?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(Lr?(t=cn,n=n.stateNode,t.nodeType===8?fp(t.parentNode,n):t.nodeType===1&&fp(t,n),xc(t)):fp(cn,n.stateNode));break;case 4:r=cn,A=Lr,cn=n.stateNode.containerInfo,Lr=!0,ts(t,e,n),cn=r,Lr=A;break;case 0:case 11:case 14:case 15:if(!Fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){A=r=r.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&qm(n,e,i),A=A.next}while(A!==r)}ts(t,e,n);break;case 1:if(!Fn&&($o(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ut(n,e,o)}ts(t,e,n);break;case 21:ts(t,e,n);break;case 22:n.mode&1?(Fn=(r=Fn)||n.memoizedState!==null,ts(t,e,n),Fn=r):ts(t,e,n);break;default:ts(t,e,n)}}function Nx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y2),e.forEach(function(r){var A=aR.bind(null,t,r);n.has(r)||(n.add(r),r.then(A,A))})}}function Nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var A=n[r];try{var s=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:cn=o.stateNode,Lr=!1;break e;case 3:cn=o.stateNode.containerInfo,Lr=!0;break e;case 4:cn=o.stateNode.containerInfo,Lr=!0;break e}o=o.return}if(cn===null)throw Error(Z(160));Kb(s,i,A),cn=null,Lr=!1;var a=A.alternate;a!==null&&(a.return=null),A.return=null}catch(c){Ut(A,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gb(e,t),e=e.sibling}function Gb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nr(e,t),zr(t),r&4){try{ec(3,t,t.return),Nf(3,t)}catch(x){Ut(t,t.return,x)}try{ec(5,t,t.return)}catch(x){Ut(t,t.return,x)}}break;case 1:Nr(e,t),zr(t),r&512&&n!==null&&$o(n,n.return);break;case 5:if(Nr(e,t),zr(t),r&512&&n!==null&&$o(n,n.return),t.flags&32){var A=t.stateNode;try{wc(A,"")}catch(x){Ut(t,t.return,x)}}if(r&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&hE(A,s),xm(o,i);var c=xm(o,s);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?wE(A,h):d==="dangerouslySetInnerHTML"?pE(A,h):d==="children"?wc(A,h):vw(A,d,h,c)}switch(o){case"input":mm(A,s);break;case"textarea":fE(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Yo(A,!!s.multiple,w,!1):f!==!!s.multiple&&(s.defaultValue!=null?Yo(A,!!s.multiple,s.defaultValue,!0):Yo(A,!!s.multiple,s.multiple?[]:"",!1))}A[bc]=s}catch(x){Ut(t,t.return,x)}}break;case 6:if(Nr(e,t),zr(t),r&4){if(t.stateNode===null)throw Error(Z(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(x){Ut(t,t.return,x)}}break;case 3:if(Nr(e,t),zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(x){Ut(t,t.return,x)}break;case 4:Nr(e,t),zr(t);break;case 13:Nr(e,t),zr(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||(Yw=Mt())),r&4&&Nx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Fn=(c=Fn)||d,Nr(e,t),Fn=c):Nr(e,t),zr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ve=t,d=t.child;d!==null;){for(h=ve=d;ve!==null;){switch(f=ve,w=f.child,f.tag){case 0:case 11:case 14:case 15:ec(4,f,f.return);break;case 1:$o(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(x){Ut(r,n,x)}}break;case 5:$o(f,f.return);break;case 22:if(f.memoizedState!==null){Dx(h);continue}}w!==null?(w.return=f,ve=w):Dx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,c?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=mE("display",i))}catch(x){Ut(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Ut(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nr(e,t),zr(t),r&4&&Nx(t);break;case 21:break;default:Nr(e,t),zr(t)}}function zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jb(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var A=r.stateNode;r.flags&32&&(wc(A,""),r.flags&=-33);var s=Rx(t);Ym(t,s,A);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Rx(t);Xm(t,o,i);break;default:throw Error(Z(161))}}catch(a){Ut(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eR(t,e,n){ve=t,zb(t)}function zb(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var A=ve,s=A.child;if(A.tag===22&&r){var i=A.memoizedState!==null||ud;if(!i){var o=A.alternate,a=o!==null&&o.memoizedState!==null||Fn;o=ud;var c=Fn;if(ud=i,(Fn=a)&&!c)for(ve=A;ve!==null;)i=ve,a=i.child,i.tag===22&&i.memoizedState!==null?Lx(A):a!==null?(a.return=i,ve=a):Lx(A);for(;s!==null;)ve=s,zb(s),s=s.sibling;ve=A,ud=o,Fn=c}Px(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,ve=s):Px(t)}}function Px(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fn||Nf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fn)if(n===null)r.componentDidMount();else{var A=e.elementType===e.type?n.memoizedProps:Dr(e.type,n.memoizedProps);r.componentDidUpdate(A,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yx(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Fn||e.flags&512&&Jm(e)}catch(f){Ut(e,e.return,f)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Dx(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Lx(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nf(4,e)}catch(a){Ut(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var A=e.return;try{r.componentDidMount()}catch(a){Ut(e,A,a)}}var s=e.return;try{Jm(e)}catch(a){Ut(e,s,a)}break;case 5:var i=e.return;try{Jm(e)}catch(a){Ut(e,i,a)}}}catch(a){Ut(e,e.return,a)}if(e===t){ve=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ve=o;break}ve=e.return}}var tR=Math.ceil,Oh=VA.ReactCurrentDispatcher,Jw=VA.ReactCurrentOwner,Tr=VA.ReactCurrentBatchConfig,Je=0,on=null,Wt=null,gn=0,sr=0,qo=Ys(0),Xt=0,kc=null,Hi=0,Pf=0,Xw=0,tc=null,qn=null,Yw=0,ma=1/0,BA=null,Mh=!1,Zm=null,Fs=null,dd=!1,ms=null,Vh=0,nc=0,e0=null,eh=-1,th=0;function Ln(){return Je&6?Mt():eh!==-1?eh:eh=Mt()}function Us(t){return t.mode&1?Je&2&&gn!==0?gn&-gn:L2.transition!==null?(th===0&&(th=UE()),th):(t=At,t!==0||(t=window.event,t=t===void 0?16:DE(t.type)),t):1}function Vr(t,e,n,r){if(50<nc)throw nc=0,e0=null,Error(Z(185));lu(t,n,r),(!(Je&2)||t!==on)&&(t===on&&(!(Je&2)&&(Pf|=n),Xt===4&&hs(t,gn)),nr(t,r),n===1&&Je===0&&!(e.mode&1)&&(ma=Mt()+500,Sf&&Zs()))}function nr(t,e){var n=t.callbackNode;Lk(t,e);var r=Ch(t,t===on?gn:0);if(r===0)n!==null&&WB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WB(n),e===1)t.tag===0?D2(Ox.bind(null,t)):nb(Ox.bind(null,t)),k2(function(){!(Je&6)&&Zs()}),n=null;else{switch(QE(r)){case 1:n=Cw;break;case 4:n=TE;break;case 16:n=_h;break;case 536870912:n=FE;break;default:n=_h}n=eT(n,Wb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Wb(t,e){if(eh=-1,th=0,Je&6)throw Error(Z(327));var n=t.callbackNode;if(ra()&&t.callbackNode!==n)return null;var r=Ch(t,t===on?gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hh(t,r);else{e=r;var A=Je;Je|=2;var s=qb();(on!==t||gn!==e)&&(BA=null,ma=Mt()+500,Si(t,e));do try{AR();break}catch(o){$b(t,o)}while(!0);Dw(),Oh.current=s,Je=A,Wt!==null?e=0:(on=null,gn=0,e=Xt)}if(e!==0){if(e===2&&(A=bm(t),A!==0&&(r=A,e=t0(t,A))),e===1)throw n=kc,Si(t,0),hs(t,r),nr(t,Mt()),n;if(e===6)hs(t,r);else{if(A=t.current.alternate,!(r&30)&&!nR(A)&&(e=Hh(t,r),e===2&&(s=bm(t),s!==0&&(r=s,e=t0(t,s))),e===1))throw n=kc,Si(t,0),hs(t,r),nr(t,Mt()),n;switch(t.finishedWork=A,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:gi(t,qn,BA);break;case 3:if(hs(t,r),(r&130023424)===r&&(e=Yw+500-Mt(),10<e)){if(Ch(t,0)!==0)break;if(A=t.suspendedLanes,(A&r)!==r){Ln(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Nm(gi.bind(null,t,qn,BA),e);break}gi(t,qn,BA);break;case 4:if(hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,A=-1;0<r;){var i=31-Mr(r);s=1<<i,i=e[i],i>A&&(A=i),r&=~s}if(r=A,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tR(r/1960))-r,10<r){t.timeoutHandle=Nm(gi.bind(null,t,qn,BA),r);break}gi(t,qn,BA);break;case 5:gi(t,qn,BA);break;default:throw Error(Z(329))}}}return nr(t,Mt()),t.callbackNode===n?Wb.bind(null,t):null}function t0(t,e){var n=tc;return t.current.memoizedState.isDehydrated&&(Si(t,e).flags|=256),t=Hh(t,e),t!==2&&(e=qn,qn=n,e!==null&&n0(e)),t}function n0(t){qn===null?qn=t:qn.push.apply(qn,t)}function nR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var A=n[r],s=A.getSnapshot;A=A.value;try{if(!jr(s(),A))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hs(t,e){for(e&=~Xw,e&=~Pf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mr(e),r=1<<n;t[n]=-1,e&=~r}}function Ox(t){if(Je&6)throw Error(Z(327));ra();var e=Ch(t,0);if(!(e&1))return nr(t,Mt()),null;var n=Hh(t,e);if(t.tag!==0&&n===2){var r=bm(t);r!==0&&(e=r,n=t0(t,r))}if(n===1)throw n=kc,Si(t,0),hs(t,e),nr(t,Mt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,qn,BA),nr(t,Mt()),null}function Zw(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(ma=Mt()+500,Sf&&Zs())}}function ji(t){ms!==null&&ms.tag===0&&!(Je&6)&&ra();var e=Je;Je|=1;var n=Tr.transition,r=At;try{if(Tr.transition=null,At=1,t)return t()}finally{At=r,Tr.transition=n,Je=e,!(Je&6)&&Zs()}}function ev(){sr=qo.current,gt(qo)}function Si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S2(n)),Wt!==null)for(n=Wt.return;n!==null;){var r=n;switch(Rw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fh();break;case 3:ga(),gt(er),gt(Un),jw();break;case 5:Hw(r);break;case 4:ga();break;case 13:gt(_t);break;case 19:gt(_t);break;case 10:Lw(r.type._context);break;case 22:case 23:ev()}n=n.return}if(on=t,Wt=t=Qs(t.current,null),gn=sr=e,Xt=0,kc=null,Xw=Pf=Hi=0,qn=tc=null,Ei!==null){for(e=0;e<Ei.length;e++)if(n=Ei[e],r=n.interleaved,r!==null){n.interleaved=null;var A=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=A,r.next=i}n.pending=r}Ei=null}return t}function $b(t,e){do{var n=Wt;try{if(Dw(),Xd.current=Lh,Dh){for(var r=Ct.memoizedState;r!==null;){var A=r.queue;A!==null&&(A.pending=null),r=r.next}Dh=!1}if(Vi=0,An=qt=Ct=null,Zl=!1,Uc=0,Jw.current=null,n===null||n.return===null){Xt=1,kc=e,Wt=null;break}e:{var s=t,i=n.return,o=n,a=e;if(e=gn,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Ex(i);if(w!==null){w.flags&=-257,bx(w,i,o,s,e),w.mode&1&&Ix(s,c,e),e=w,a=c;var m=e.updateQueue;if(m===null){var x=new Set;x.add(a),e.updateQueue=x}else m.add(a);break e}else{if(!(e&1)){Ix(s,c,e),tv();break e}a=Error(Z(426))}}else if(wt&&o.mode&1){var C=Ex(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),bx(C,i,o,s,e),Nw(pa(a,o));break e}}s=a=pa(a,o),Xt!==4&&(Xt=2),tc===null?tc=[s]:tc.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Qb(s,a,e);vx(s,y);break e;case 1:o=a;var B=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof B.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Fs===null||!Fs.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Sb(s,o,e);vx(s,k);break e}}s=s.return}while(s!==null)}Xb(n)}catch(R){e=R,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function qb(){var t=Oh.current;return Oh.current=Lh,t===null?Lh:t}function tv(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),on===null||!(Hi&268435455)&&!(Pf&268435455)||hs(on,gn)}function Hh(t,e){var n=Je;Je|=2;var r=qb();(on!==t||gn!==e)&&(BA=null,Si(t,e));do try{rR();break}catch(A){$b(t,A)}while(!0);if(Dw(),Je=n,Oh.current=r,Wt!==null)throw Error(Z(261));return on=null,gn=0,Xt}function rR(){for(;Wt!==null;)Jb(Wt)}function AR(){for(;Wt!==null&&!Fk();)Jb(Wt)}function Jb(t){var e=Zb(t.alternate,t,sr);t.memoizedProps=t.pendingProps,e===null?Xb(t):Wt=e,Jw.current=null}function Xb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X2(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xt=6,Wt=null;return}}else if(n=J2(n,e,sr),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Xt===0&&(Xt=5)}function gi(t,e,n){var r=At,A=Tr.transition;try{Tr.transition=null,At=1,sR(t,e,n,r)}finally{Tr.transition=A,At=r}return null}function sR(t,e,n,r){do ra();while(ms!==null);if(Je&6)throw Error(Z(327));n=t.finishedWork;var A=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ok(t,s),t===on&&(Wt=on=null,gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dd||(dd=!0,eT(_h,function(){return ra(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tr.transition,Tr.transition=null;var i=At;At=1;var o=Je;Je|=4,Jw.current=null,Z2(t,n),Gb(n,t),I2(km),Ih=!!Sm,km=Sm=null,t.current=n,eR(n),Uk(),Je=o,At=i,Tr.transition=s}else t.current=n;if(dd&&(dd=!1,ms=t,Vh=A),s=t.pendingLanes,s===0&&(Fs=null),kk(n.stateNode),nr(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)A=e[n],r(A.value,{componentStack:A.stack,digest:A.digest});if(Mh)throw Mh=!1,t=Zm,Zm=null,t;return Vh&1&&t.tag!==0&&ra(),s=t.pendingLanes,s&1?t===e0?nc++:(nc=0,e0=t):nc=0,Zs(),null}function ra(){if(ms!==null){var t=QE(Vh),e=Tr.transition,n=At;try{if(Tr.transition=null,At=16>t?16:t,ms===null)var r=!1;else{if(t=ms,ms=null,Vh=0,Je&6)throw Error(Z(331));var A=Je;for(Je|=4,ve=t.current;ve!==null;){var s=ve,i=s.child;if(ve.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(ve=c;ve!==null;){var d=ve;switch(d.tag){case 0:case 11:case 15:ec(8,d,s)}var h=d.child;if(h!==null)h.return=d,ve=h;else for(;ve!==null;){d=ve;var f=d.sibling,w=d.return;if(Hb(d),d===c){ve=null;break}if(f!==null){f.return=w,ve=f;break}ve=w}}}var m=s.alternate;if(m!==null){var x=m.child;if(x!==null){m.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}ve=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,ve=i;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ec(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ve=y;break e}ve=s.return}}var B=t.current;for(ve=B;ve!==null;){i=ve;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,ve=v;else e:for(i=B;ve!==null;){if(o=ve,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Nf(9,o)}}catch(R){Ut(o,o.return,R)}if(o===i){ve=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,ve=k;break e}ve=o.return}}if(Je=A,Zs(),AA&&typeof AA.onPostCommitFiberRoot=="function")try{AA.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{At=n,Tr.transition=e}}return!1}function Mx(t,e,n){e=pa(n,e),e=Qb(t,e,1),t=Ts(t,e,1),e=Ln(),t!==null&&(lu(t,1,e),nr(t,e))}function Ut(t,e,n){if(t.tag===3)Mx(t,t,n);else for(;e!==null;){if(e.tag===3){Mx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fs===null||!Fs.has(r))){t=pa(n,t),t=Sb(e,t,1),e=Ts(e,t,1),t=Ln(),e!==null&&(lu(e,1,t),nr(e,t));break}}e=e.return}}function iR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ln(),t.pingedLanes|=t.suspendedLanes&n,on===t&&(gn&n)===n&&(Xt===4||Xt===3&&(gn&130023424)===gn&&500>Mt()-Yw?Si(t,0):Xw|=n),nr(t,e)}function Yb(t,e){e===0&&(t.mode&1?(e=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):e=1);var n=Ln();t=RA(t,e),t!==null&&(lu(t,e,n),nr(t,n))}function oR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Yb(t,n)}function aR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,A=t.memoizedState;A!==null&&(n=A.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),Yb(t,n)}var Zb;Zb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||er.current)Jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jn=!1,q2(t,e,n);Jn=!!(t.flags&131072)}else Jn=!1,wt&&e.flags&1048576&&rb(e,Sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zd(t,e),t=e.pendingProps;var A=da(e,Un.current);na(e,n),A=Gw(null,e,r,t,A,n);var s=zw();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tr(r)?(s=!0,Uh(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Mw(e),A.updater=Rf,e.stateNode=A,A._reactInternals=e,Hm(e,r,t,n),e=Gm(null,e,r,!0,s,n)):(e.tag=0,wt&&s&&kw(e),Nn(null,e,A,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zd(t,e),t=e.pendingProps,A=r._init,r=A(r._payload),e.type=r,A=e.tag=cR(r),t=Dr(r,t),A){case 0:e=Km(null,e,r,t,n);break e;case 1:e=Ux(null,e,r,t,n);break e;case 11:e=Tx(null,e,r,t,n);break e;case 14:e=Fx(null,e,r,Dr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Dr(r,A),Km(t,e,r,A,n);case 1:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Dr(r,A),Ux(t,e,r,A,n);case 3:e:{if(Pb(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,A=s.element,lb(t,e),Nh(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=pa(Error(Z(423)),e),e=Qx(t,e,r,n,A);break e}else if(r!==A){A=pa(Error(Z(424)),e),e=Qx(t,e,r,n,A);break e}else for(lr=bs(e.stateNode.containerInfo.firstChild),ur=e,wt=!0,Or=null,n=ob(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ha(),r===A){e=NA(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return cb(e),t===null&&Om(e),r=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,Rm(r,A)?i=null:s!==null&&Rm(r,s)&&(e.flags|=32),Nb(t,e),Nn(t,e,i,n),e.child;case 6:return t===null&&Om(e),null;case 13:return Db(t,e,n);case 4:return Vw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fa(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Dr(r,A),Tx(t,e,r,A,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,lt(kh,r._currentValue),r._currentValue=i,s!==null)if(jr(s.value,i)){if(s.children===A.children&&!er.current){e=NA(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){i=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=TA(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Mm(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Z(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Mm(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Nn(t,e,A.children,n),e=e.child}return e;case 9:return A=e.type,r=e.pendingProps.children,na(e,n),A=Ur(A),r=r(A),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,A=Dr(r,e.pendingProps),A=Dr(r.type,A),Fx(t,e,r,A,n);case 15:return kb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Dr(r,A),Zd(t,e),e.tag=1,tr(r)?(t=!0,Uh(e)):t=!1,na(e,n),Ub(e,r,A),Hm(e,r,A,n),Gm(null,e,r,!0,t,n);case 19:return Lb(t,e,n);case 22:return Rb(t,e,n)}throw Error(Z(156,e.tag))};function eT(t,e){return bE(t,e)}function lR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,e,n,r){return new lR(t,e,n,r)}function nv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cR(t){if(typeof t=="function")return nv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bw)return 11;if(t===xw)return 14}return 2}function Qs(t,e){var n=t.alternate;return n===null?(n=Cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nh(t,e,n,r,A,s){var i=2;if(r=t,typeof t=="function")nv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Oo:return ki(n.children,A,s,e);case yw:i=8,A|=8;break;case dm:return t=Cr(12,n,e,A|2),t.elementType=dm,t.lanes=s,t;case hm:return t=Cr(13,n,e,A),t.elementType=hm,t.lanes=s,t;case fm:return t=Cr(19,n,e,A),t.elementType=fm,t.lanes=s,t;case cE:return Df(n,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aE:i=10;break e;case lE:i=9;break e;case Bw:i=11;break e;case xw:i=14;break e;case ls:i=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Cr(i,n,e,A),e.elementType=t,e.type=r,e.lanes=s,e}function ki(t,e,n,r){return t=Cr(7,t,r,e),t.lanes=n,t}function Df(t,e,n,r){return t=Cr(22,t,r,e),t.elementType=cE,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=Cr(6,t,null,e),t.lanes=n,t}function _p(t,e,n){return e=Cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uR(t,e,n,r,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rp(0),this.expirationTimes=rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rp(0),this.identifierPrefix=r,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function rv(t,e,n,r,A,s,i,o,a){return t=new uR(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mw(s),t}function dR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tT(t){if(!t)return Ls;t=t._reactInternals;e:{if(Ao(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(tr(n))return tb(t,n,e)}return e}function nT(t,e,n,r,A,s,i,o,a){return t=rv(n,r,!0,t,A,s,i,o,a),t.context=tT(null),n=t.current,r=Ln(),A=Us(n),s=TA(r,A),s.callback=e??null,Ts(n,s,A),t.current.lanes=A,lu(t,A,r),nr(t,r),t}function Lf(t,e,n,r){var A=e.current,s=Ln(),i=Us(A);return n=tT(n),e.context===null?e.context=n:e.pendingContext=n,e=TA(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ts(A,e,i),t!==null&&(Vr(t,A,i,s),Jd(t,A,i)),i}function jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Av(t,e){Vx(t,e),(t=t.alternate)&&Vx(t,e)}function hR(){return null}var rT=typeof reportError=="function"?reportError:function(t){console.error(t)};function sv(t){this._internalRoot=t}Of.prototype.render=sv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Lf(t,e,null,null)};Of.prototype.unmount=sv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ji(function(){Lf(null,t,null,null)}),e[kA]=null}};function Of(t){this._internalRoot=t}Of.prototype.unstable_scheduleHydration=function(t){if(t){var e=RE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ds.length&&e!==0&&e<ds[n].priority;n++);ds.splice(n,0,t),n===0&&PE(t)}};function iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function fR(t,e,n,r,A){if(A){if(typeof r=="function"){var s=r;r=function(){var c=jh(i);s.call(c)}}var i=nT(e,r,t,0,null,!1,!1,"",Hx);return t._reactRootContainer=i,t[kA]=i.current,Ic(t.nodeType===8?t.parentNode:t),ji(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof r=="function"){var o=r;r=function(){var c=jh(a);o.call(c)}}var a=rv(t,0,!1,null,null,!1,!1,"",Hx);return t._reactRootContainer=a,t[kA]=a.current,Ic(t.nodeType===8?t.parentNode:t),ji(function(){Lf(e,a,n,r)}),a}function Vf(t,e,n,r,A){var s=n._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var o=A;A=function(){var a=jh(i);o.call(a)}}Lf(e,i,t,A)}else i=fR(n,e,t,A,r);return jh(i)}SE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(Iw(e,n|1),nr(e,Mt()),!(Je&6)&&(ma=Mt()+500,Zs()))}break;case 13:ji(function(){var r=RA(t,1);if(r!==null){var A=Ln();Vr(r,t,1,A)}}),Av(t,1)}};Ew=function(t){if(t.tag===13){var e=RA(t,134217728);if(e!==null){var n=Ln();Vr(e,t,134217728,n)}Av(t,134217728)}};kE=function(t){if(t.tag===13){var e=Us(t),n=RA(t,e);if(n!==null){var r=Ln();Vr(n,t,e,r)}Av(t,e)}};RE=function(){return At};NE=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};Cm=function(t,e,n){switch(e){case"input":if(mm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var A=Qf(r);if(!A)throw Error(Z(90));dE(r),mm(r,A)}}}break;case"textarea":fE(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};BE=Zw;xE=ji;var gR={usingClientEntryPoint:!1,Events:[uu,jo,Qf,vE,yE,Zw]},pl={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pR={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:VA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IE(t),t===null?null:t.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||hR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{bf=hd.inject(pR),AA=hd}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR;fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(e))throw Error(Z(200));return dR(t,e,null,n)};fr.createRoot=function(t,e){if(!iv(t))throw Error(Z(299));var n=!1,r="",A=rT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=rv(t,1,!1,null,null,n,!1,r,A),t[kA]=e.current,Ic(t.nodeType===8?t.parentNode:t),new sv(e)};fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=IE(e),t=t===null?null:t.stateNode,t};fr.flushSync=function(t){return ji(t)};fr.hydrate=function(t,e,n){if(!Mf(e))throw Error(Z(200));return Vf(null,t,e,!0,n)};fr.hydrateRoot=function(t,e,n){if(!iv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,A=!1,s="",i=rT;if(n!=null&&(n.unstable_strictMode===!0&&(A=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=nT(e,null,t,1,n??null,A,!1,s,i),t[kA]=e.current,Ic(t),r)for(t=0;t<r.length;t++)n=r[t],A=n._getVersion,A=A(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,A]:e.mutableSourceEagerHydrationData.push(n,A);return new Of(e)};fr.render=function(t,e,n){if(!Mf(e))throw Error(Z(200));return Vf(null,t,e,!1,n)};fr.unmountComponentAtNode=function(t){if(!Mf(t))throw Error(Z(40));return t._reactRootContainer?(ji(function(){Vf(null,null,t,!1,function(){t._reactRootContainer=null,t[kA]=null})}),!0):!1};fr.unstable_batchedUpdates=Zw;fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Vf(t,e,n,!1,r)};fr.version="18.3.1-next-f1338f8080-20240426";function AT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AT)}catch(t){console.error(t)}}AT(),AE.exports=fr;var mR=AE.exports,jx=mR;cm.createRoot=jx.createRoot,cm.hydrateRoot=jx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(this,arguments)}var ws;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ws||(ws={}));const Kx="popstate";function wR(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:o="",hash:a=""}=so(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),r0("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(A,s){let i=A.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=A.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof s=="string"?s:Kh(s))}function r(A,s){Hf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return yR(e,n,r,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vR(){return Math.random().toString(36).substr(2,8)}function Gx(t,e){return{usr:t.state,key:t.key,idx:e}}function r0(t,e,n,r){return n===void 0&&(n=null),Rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||r||vR()})}function Kh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yR(t,e,n,r){r===void 0&&(r={});let{window:A=document.defaultView,v5Compat:s=!1}=r,i=A.history,o=ws.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Rc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=ws.Pop;let C=d(),y=C==null?null:C-c;c=C,a&&a({action:o,location:x.location,delta:y})}function f(C,y){o=ws.Push;let B=r0(x.location,C,y);n&&n(B,C),c=d()+1;let v=Gx(B,c),k=x.createHref(B);try{i.pushState(v,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;A.location.assign(k)}s&&a&&a({action:o,location:x.location,delta:1})}function w(C,y){o=ws.Replace;let B=r0(x.location,C,y);n&&n(B,C),c=d();let v=Gx(B,c),k=x.createHref(B);i.replaceState(v,"",k),s&&a&&a({action:o,location:x.location,delta:0})}function m(C){let y=A.location.origin!=="null"?A.location.origin:A.location.href,B=typeof C=="string"?C:Kh(C);return B=B.replace(/ $/,"%20"),It(y,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,y)}let x={get action(){return o},get location(){return t(A,i)},listen(C){if(a)throw new Error("A history only accepts one active listener");return A.addEventListener(Kx,h),a=C,()=>{A.removeEventListener(Kx,h),a=null}},createHref(C){return e(A,C)},createURL:m,encodeLocation(C){let y=m(C);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:w,go(C){return i.go(C)}};return x}var zx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zx||(zx={}));function BR(t,e,n){return n===void 0&&(n="/"),xR(t,e,n)}function xR(t,e,n,r){let A=typeof e=="string"?so(e):e,s=wa(A.pathname||"/",n);if(s==null)return null;let i=sT(t);_R(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=RR(s);o=SR(i[a],c)}return o}function sT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let A=(s,i,o)=>{let a={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};a.relativePath.startsWith("/")&&(It(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Ss([r,a.relativePath]),d=n.concat(a);s.children&&s.children.length>0&&(It(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sT(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:UR(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))A(s,i);else for(let a of iT(s.path))A(s,i,a)}),e}function iT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,A=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return A?[s,""]:[s];let i=iT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?s:[s,a].join("/"))),A&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function _R(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CR=/^:[\w-]+$/,IR=3,ER=2,bR=1,TR=10,FR=-2,Wx=t=>t==="*";function UR(t,e){let n=t.split("/"),r=n.length;return n.some(Wx)&&(r+=FR),e&&(r+=ER),n.filter(A=>!Wx(A)).reduce((A,s)=>A+(CR.test(s)?IR:s===""?bR:TR),r)}function QR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,A)=>r===e[A])?t[t.length-1]-e[e.length-1]:0}function SR(t,e,n){let{routesMeta:r}=t,A={},s="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=A0({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:Ss([s,h.pathname]),pathnameBase:OR(Ss([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Ss([s,h.pathnameBase]))}return i}function A0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kR(t.path,t.caseSensitive,t.end),A=e.match(n);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),o=A.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let x=o[h]||"";i=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const m=o[h];return w&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function kR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Hf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),r]}function RR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const NR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PR=t=>NR.test(t);function DR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:A=""}=typeof t=="string"?so(t):t,s;if(n)if(PR(n))s=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Hf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?s=$x(n.substring(1),"/"):s=$x(n,e)}else s=e;return{pathname:s,search:MR(r),hash:VR(A)}}function $x(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?n.length>1&&n.pop():A!=="."&&n.push(A)}),n.length>1?n.join("/"):"/"}function Cp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ov(t,e){let n=LR(t);return e?n.map((r,A)=>A===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function av(t,e,n,r){r===void 0&&(r=!1);let A;typeof t=="string"?A=so(t):(A=Rc({},t),It(!A.pathname||!A.pathname.includes("?"),Cp("?","pathname","search",A)),It(!A.pathname||!A.pathname.includes("#"),Cp("#","pathname","hash",A)),It(!A.search||!A.search.includes("#"),Cp("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=DR(A,o),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const Ss=t=>t.join("/").replace(/\/\/+/g,"/"),OR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oT=["post","put","patch","delete"];new Set(oT);const jR=["get",...oT];new Set(jR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const jf=S.createContext(null),aT=S.createContext(null),HA=S.createContext(null),Kf=S.createContext(null),jA=S.createContext({outlet:null,matches:[],isDataRoute:!1}),lT=S.createContext(null);function KR(t,e){let{relative:n}=e===void 0?{}:e;Ma()||It(!1);let{basename:r,navigator:A}=S.useContext(HA),{hash:s,pathname:i,search:o}=Gf(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:Ss([r,i])),A.createHref({pathname:a,search:o,hash:s})}function Ma(){return S.useContext(Kf)!=null}function ei(){return Ma()||It(!1),S.useContext(Kf).location}function cT(t){S.useContext(HA).static||S.useLayoutEffect(t)}function hu(){let{isDataRoute:t}=S.useContext(jA);return t?sN():GR()}function GR(){Ma()||It(!1);let t=S.useContext(jf),{basename:e,future:n,navigator:r}=S.useContext(HA),{matches:A}=S.useContext(jA),{pathname:s}=ei(),i=JSON.stringify(ov(A,n.v7_relativeSplatPath)),o=S.useRef(!1);return cT(()=>{o.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=av(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ss([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,s,t])}const zR=S.createContext(null);function WR(t){let e=S.useContext(jA).outlet;return e&&S.createElement(zR.Provider,{value:t},e)}function Gf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(HA),{matches:A}=S.useContext(jA),{pathname:s}=ei(),i=JSON.stringify(ov(A,r.v7_relativeSplatPath));return S.useMemo(()=>av(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function $R(t,e){return qR(t,e)}function qR(t,e,n,r){Ma()||It(!1);let{navigator:A}=S.useContext(HA),{matches:s}=S.useContext(jA),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=ei(),d;if(e){var h;let C=typeof e=="string"?so(e):e;a==="/"||(h=C.pathname)!=null&&h.startsWith(a)||It(!1),d=C}else d=c;let f=d.pathname||"/",w=f;if(a!=="/"){let C=a.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(C.length).join("/")}let m=BR(t,{pathname:w}),x=eN(m&&m.map(C=>Object.assign({},C,{params:Object.assign({},o,C.params),pathname:Ss([a,A.encodeLocation?A.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?a:Ss([a,A.encodeLocation?A.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&x?S.createElement(Kf.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ws.Pop}},x):x}function JR(){let t=AN(),e=HR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:A},n):null,null)}const XR=S.createElement(JR,null);class YR extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(jA.Provider,{value:this.props.routeContext},S.createElement(lT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZR(t){let{routeContext:e,match:n,children:r}=t,A=S.useContext(jf);return A&&A.static&&A.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(jA.Provider,{value:e},r)}function eN(t,e,n,r){var A;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(A=n)==null?void 0:A.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||It(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:w}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||m){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,m=!1,x=null,C=null;n&&(w=o&&h.route.id?o[h.route.id]:void 0,x=h.route.errorElement||XR,a&&(c<0&&f===0?(iN("route-fallback"),m=!0,C=null):c===f&&(m=!0,C=h.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,f+1)),B=()=>{let v;return w?v=x:m?v=C:h.route.Component?v=S.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,S.createElement(ZR,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(YR,{location:n.location,revalidation:n.revalidation,component:x,error:w,children:B(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):B()},null)}var uT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uT||{}),dT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dT||{});function tN(t){let e=S.useContext(jf);return e||It(!1),e}function nN(t){let e=S.useContext(aT);return e||It(!1),e}function rN(t){let e=S.useContext(jA);return e||It(!1),e}function hT(t){let e=rN(),n=e.matches[e.matches.length-1];return n.route.id||It(!1),n.route.id}function AN(){var t;let e=S.useContext(lT),n=nN(),r=hT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sN(){let{router:t}=tN(uT.UseNavigateStable),e=hT(dT.UseNavigateStable),n=S.useRef(!1);return cT(()=>{n.current=!0}),S.useCallback(function(A,s){s===void 0&&(s={}),n.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,Nc({fromRouteId:e},s)))},[t,e])}const qx={};function iN(t,e,n){qx[t]||(qx[t]=!0)}function oN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Gh(t){let{to:e,replace:n,state:r,relative:A}=t;Ma()||It(!1);let{future:s,static:i}=S.useContext(HA),{matches:o}=S.useContext(jA),{pathname:a}=ei(),c=hu(),d=av(e,ov(o,s.v7_relativeSplatPath),a,A==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:A}),[c,h,A,n,r]),null}function aN(t){return WR(t.context)}function wr(t){It(!1)}function lN(t){let{basename:e="/",children:n=null,location:r,navigationType:A=ws.Pop,navigator:s,static:i=!1,future:o}=t;Ma()&&It(!1);let a=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:a,navigator:s,static:i,future:Nc({v7_relativeSplatPath:!1},o)}),[a,o,s,i]);typeof r=="string"&&(r=so(r));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:m="default"}=r,x=S.useMemo(()=>{let C=wa(d,a);return C==null?null:{location:{pathname:C,search:h,hash:f,state:w,key:m},navigationType:A}},[a,d,h,f,w,m,A]);return x==null?null:S.createElement(HA.Provider,{value:c},S.createElement(Kf.Provider,{children:n,value:x}))}function cN(t){let{children:e,location:n}=t;return $R(s0(e),n)}new Promise(()=>{});function s0(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,A)=>{if(!S.isValidElement(r))return;let s=[...e,A];if(r.type===S.Fragment){n.push.apply(n,s0(r.props.children,s));return}r.type!==wr&&It(!1),!r.props.index||!r.props.children||It(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=s0(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zh(){return zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zh.apply(this,arguments)}function fT(t,e){if(t==null)return{};var n={},r=Object.keys(t),A,s;for(s=0;s<r.length;s++)A=r[s],!(e.indexOf(A)>=0)&&(n[A]=t[A]);return n}function uN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dN(t,e){return t.button===0&&(!e||e==="_self")&&!uN(t)}function i0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(A=>[n,A]):[[n,r]])},[]))}function hN(t,e){let n=i0(t);return e&&e.forEach((r,A)=>{n.has(A)||e.getAll(A).forEach(s=>{n.append(A,s)})}),n}const fN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pN="6";try{window.__reactRouterVersion=pN}catch{}const mN=S.createContext({isTransitioning:!1}),wN="startTransition",Jx=ik[wN];function vN(t){let{basename:e,children:n,future:r,window:A}=t,s=S.useRef();s.current==null&&(s.current=wR({window:A,v5Compat:!0}));let i=s.current,[o,a]=S.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Jx?Jx(()=>a(h)):a(h)},[a,c]);return S.useLayoutEffect(()=>i.listen(d),[i,d]),S.useEffect(()=>oN(r),[r]),S.createElement(lN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const yN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xN=S.forwardRef(function(e,n){let{onClick:r,relative:A,reloadDocument:s,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=fT(e,fN),{basename:w}=S.useContext(HA),m,x=!1;if(typeof c=="string"&&BN.test(c)&&(m=c,yN))try{let v=new URL(window.location.href),k=c.startsWith("//")?new URL(v.protocol+c):new URL(c),R=wa(k.pathname,w);k.origin===v.origin&&R!=null?c=R+k.search+k.hash:x=!0}catch{}let C=KR(c,{relative:A}),y=IN(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:A,viewTransition:h});function B(v){r&&r(v),v.defaultPrevented||y(v)}return S.createElement("a",zh({},f,{href:m||C,onClick:x||s?r:B,ref:n,target:a}))}),_N=S.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:A=!1,className:s="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=fT(e,gN),f=Gf(a,{relative:h.relative}),w=ei(),m=S.useContext(aT),{navigator:x,basename:C}=S.useContext(HA),y=m!=null&&bN(f)&&c===!0,B=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,v=w.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;A||(v=v.toLowerCase(),k=k?k.toLowerCase():null,B=B.toLowerCase()),k&&C&&(k=wa(k,C)||k);const R=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let N=v===B||!i&&v.startsWith(B)&&v.charAt(R)==="/",I=k!=null&&(k===B||!i&&k.startsWith(B)&&k.charAt(B.length)==="/"),_={isActive:N,isPending:I,isTransitioning:y},b=N?r:void 0,Q;typeof s=="function"?Q=s(_):Q=[s,N?"active":null,I?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(_):o;return S.createElement(xN,zh({},h,{"aria-current":b,className:Q,ref:n,style:U,to:a,viewTransition:c}),typeof d=="function"?d(_):d)});var o0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(o0||(o0={}));var Xx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xx||(Xx={}));function CN(t){let e=S.useContext(jf);return e||It(!1),e}function IN(t,e){let{target:n,replace:r,state:A,preventScrollReset:s,relative:i,viewTransition:o}=e===void 0?{}:e,a=hu(),c=ei(),d=Gf(t,{relative:i});return S.useCallback(h=>{if(dN(h,n)){h.preventDefault();let f=r!==void 0?r:Kh(c)===Kh(d);a(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:o})}},[c,a,d,r,A,n,t,s,i,o])}function EN(t){let e=S.useRef(i0(t)),n=S.useRef(!1),r=ei(),A=S.useMemo(()=>hN(r.search,n.current?null:e.current),[r.search]),s=hu(),i=S.useCallback((o,a)=>{const c=i0(typeof o=="function"?o(A):o);n.current=!0,s("?"+c,a)},[s,A]);return[A,i]}function bN(t,e){e===void 0&&(e={});let n=S.useContext(mN);n==null&&It(!1);let{basename:r}=CN(o0.useViewTransitionState),A=Gf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=wa(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=wa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return A0(A.pathname,i)!=null||A0(A.pathname,s)!=null}var ae=(t=>(t.First="1 ",t.Second="2 ",t))(ae||{}),or=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(or||{});const bn=["","","","",""],eA={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Yx=["","","/","","","",""," "],gT=[{shift:ae.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ae.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ae.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ae.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ae.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ae.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ae.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ae.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ae.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ae.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ae.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ae.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ae.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ae.Second,period:6,start:"18:50",end:"19:35",day:"default"}],_r={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ae.First,studentsCount:25},{id:"c2",name:"6",shift:ae.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],substitutions:[],bellSchedule:gT,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}},TN="GymnasiumDB",FN=5,wo="appData",ns="publicAppData",Zx="root",ar={open:()=>new Promise((t,e)=>{const n=indexedDB.open(TN,FN);n.onupgradeneeded=r=>{const A=r.target.result;A.objectStoreNames.contains(wo)||A.createObjectStore(wo),A.objectStoreNames.contains(ns)||A.createObjectStore(ns)},n.onsuccess=r=>t(r.target.result),n.onerror=r=>e(r.target.error)}),save:async t=>{const e=await ar.open();return new Promise((n,r)=>{const A=e.transaction(wo,"readwrite");A.objectStore(wo).put(t,Zx),A.oncomplete=()=>n(),A.onerror=()=>r(A.error)})},load:async()=>{const t=await ar.open();return new Promise((e,n)=>{const r=t.transaction(wo,"readonly").objectStore(wo).get(Zx);r.onsuccess=()=>{const A=r.result||{},s={..._r,...A};A.settings&&(s.settings={..._r.settings,...A.settings}),e(s)},r.onerror=()=>n(r.error)})},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{const n=await ar.open();return new Promise((r,A)=>{const s=n.transaction(ns,"readwrite"),i={subjects:e.subjects,teachers:e.teachers.map(o=>({id:o.id,name:o.name,subjectIds:o.subjectIds,shifts:o.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}};s.objectStore(ns).put(i,t),s.oncomplete=()=>r(),s.onerror=()=>A(s.error)})},getPublicData:async t=>{const e=await ar.open();return new Promise((n,r)=>{const A=e.transaction(ns,"readonly").objectStore(ns).get(t);A.onsuccess=()=>n(A.result||null),A.onerror=()=>r(A.error)})},deletePublicData:async t=>{const e=await ar.open();return new Promise((n,r)=>{const A=e.transaction(ns,"readwrite");A.objectStore(ns).delete(t),A.oncomplete=()=>n(),A.onerror=()=>r(A.error)})}},pT=S.createContext(void 0),mT=({children:t,initialData:e})=>{const[n,r]=S.useState(_r),[A,s]=S.useState(!0),[i,o]=S.useState([]),[a,c]=S.useState(-1);S.useEffect(()=>{e?(r(e),o([e]),c(0),s(!1)):ar.load().then(x=>{const C={..._r,...x};C.teachers||(C.teachers=[]),C.teachers=C.teachers.map(y=>({shifts:[ae.First,ae.Second],telegramChatId:"",...y})),C.schedule||(C.schedule=[]),C.substitutions||(C.substitutions=[]),C.bellSchedule||(C.bellSchedule=gT),C.settings?C.settings={..._r.settings,...C.settings}:C.settings=_r.settings,r(C),o([C]),c(0),s(!1)}).catch(x=>{console.error(x),s(!1)})},[e]);const d=S.useCallback(async(x,C=!0)=>{const y={...n,...x};if(r(y),await ar.save(y),C){const B=i.slice(0,a+1);B.push(y),B.length>50&&B.shift(),o(B),c(B.length-1)}},[n,i,a]),h=S.useCallback(async()=>{if(a>0){const x=i[a-1];c(a-1),r(x),await ar.save(x)}},[i,a]),f=S.useCallback(async()=>{if(a<i.length-1){const x=i[a+1];c(a+1),r(x),await ar.save(x)}},[i,a]),w=S.useCallback(async()=>{await d(_r)},[d]),m=S.useMemo(()=>({data:n,isLoading:A,saveData:d,resetData:w,undo:h,redo:f,canUndo:a>0,canRedo:a<i.length-1}),[n,A,d,w,h,f,a]);return l.jsx(pT.Provider,{value:m,children:t})},zf=()=>{const t=S.useContext(pT);if(!t)throw new Error("useFullData must be used within DataProvider");return t},wT=S.createContext(void 0),vT=S.createContext(void 0),yT=({children:t})=>{const{data:e,saveData:n}=zf(),r=S.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=S.useCallback(async(i,o)=>{await n(i,o)},[n]),s=S.useMemo(()=>({...r,saveStaticData:A}),[r,A]);return l.jsx(wT.Provider,{value:s,children:t})},BT=({children:t})=>{const{data:e,saveData:n}=zf(),r=S.useMemo(()=>({schedule:e.schedule,substitutions:e.substitutions}),[e.schedule,e.substitutions]),A=S.useCallback(async(i,o)=>{await n(i,o)},[n]),s=S.useMemo(()=>({...r,saveScheduleData:A}),[r,A]);return l.jsx(vT.Provider,{value:s,children:t})},KA=()=>{const t=S.useContext(wT);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=zf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Va=()=>{const t=S.useContext(vT);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=zf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}};var e_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let A=t.charCodeAt(r);A<128?e[n++]=A:A<2048?(e[n++]=A>>6|192,e[n++]=A&63|128):(A&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=A>>18|240,e[n++]=A>>12&63|128,e[n++]=A>>6&63|128,e[n++]=A&63|128):(e[n++]=A>>12|224,e[n++]=A>>6&63|128,e[n++]=A&63|128)}return e},UN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const A=t[n++];if(A<128)e[r++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[n++];e[r++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[n++],i=t[n++],o=t[n++],a=((A&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},_T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,o=i?t[A+1]:0,a=A+2<t.length,c=a?t[A+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,w=c&63;a||(w=64,i||(f=64)),r.push(n[d],n[h],n[f],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let A=0;A<t.length;){const s=n[t.charAt(A++)],o=A<t.length?n[t.charAt(A)]:0;++A;const c=A<t.length?n[t.charAt(A)]:64;++A;const h=A<t.length?n[t.charAt(A)]:64;if(++A,s==null||o==null||c==null||h==null)throw new QN;const f=s<<2|o>>4;if(r.push(f),c!==64){const w=o<<4&240|c>>2;if(r.push(w),h!==64){const m=c<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SN=function(t){const e=xT(t);return _T.encodeByteArray(e,!0)},Wh=function(t){return SN(t).replace(/\./g,"")},CT=function(t){try{return _T.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!kN(n)||(t[n]=$h(t[n],e[n]));return t}function kN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=()=>IT().__FIREBASE_DEFAULTS__,NN=()=>{if(typeof process>"u"||typeof e_>"u")return;const t=e_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CT(t[1]);return e&&JSON.parse(e)},lv=()=>{try{return RN()||NN()||PN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ET=()=>{var t;return(t=lv())===null||t===void 0?void 0:t.config},DN=t=>{var e;return(e=lv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wh(JSON.stringify(n)),Wh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function cv(){var t;const e=(t=lv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VN(){return typeof window<"u"||bT()}function bT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function HN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FT(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UT(){return!cv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pc(){try{return typeof indexedDB=="object"}catch{return!1}}function jN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(r);A.onsuccess=()=>{A.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},A.onupgradeneeded=()=>{n=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KN,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,io.prototype.create)}}class io{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?GN(s,r):"Error",o=`${this.serviceName}: ${i} (${A}).`;return new On(A,o,r)}}function GN(t,e){return t.replace(zN,(n,r)=>{const A=e[r];return A!=null?String(A):`<${r}?>`})}const zN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function WN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const A of n){if(!r.includes(A))return!1;const s=t[A],i=e[A];if(n_(s)&&n_(i)){if(!Dc(s,i))return!1}else if(s!==i)return!1}for(const A of r)if(!n.includes(A))return!1;return!0}function n_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(A=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[A,s]=r.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function kl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QT(t,e){const n=new $N(t,e);return n.subscribe.bind(n)}class $N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let A;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?A=e:A={next:e,error:n,complete:r},A.next===void 0&&(A.next=Ip),A.error===void 0&&(A.error=Ip),A.complete===void 0&&(A.complete=Ip);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class aA{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:n});A&&r.resolve(A)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YN(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:A});r.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(A)}return A}onInit(e,n){var r;const A=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(A))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const A of r)try{A(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XN(t){return t===pi?void 0:t}function YN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=[];var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const kT={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},ZN=Me.INFO,eP={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},tP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),A=eP[e];if(A)console[A](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Wf=class{constructor(e){this.name=e,this._logLevel=ZN,this._logHandler=tP,this._userLogHandler=null,dv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}};function nP(t){dv.forEach(e=>{e.setLogLevel(t)})}function rP(t,e){for(const n of dv){let r=null;e&&e.level&&(r=kT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(A,s,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");s>=(r??A.logLevel)&&t({level:Me[s].toLowerCase(),message:o,args:i,type:A.name})}}}const AP=(t,e)=>e.some(n=>t instanceof n);let r_,A_;function sP(){return r_||(r_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iP(){return A_||(A_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RT=new WeakMap,a0=new WeakMap,NT=new WeakMap,Ep=new WeakMap,hv=new WeakMap;function oP(t){const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(ks(t.result)),A()},i=()=>{r(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&RT.set(n,t)}).catch(()=>{}),hv.set(e,t),e}function aP(t){if(a0.has(t))return;const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),A()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});a0.set(t,e)}let l0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ks(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lP(t){l0=t(l0)}function cP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bp(this),e,...n);return NT.set(r,e.sort?e.sort():[e]),ks(r)}:iP().includes(t)?function(...e){return t.apply(bp(this),e),ks(RT.get(this))}:function(...e){return ks(t.apply(bp(this),e))}}function uP(t){return typeof t=="function"?cP(t):(t instanceof IDBTransaction&&aP(t),AP(t,sP())?new Proxy(t,l0):t)}function ks(t){if(t instanceof IDBRequest)return oP(t);if(Ep.has(t))return Ep.get(t);const e=uP(t);return e!==t&&(Ep.set(t,e),hv.set(e,t)),e}const bp=t=>hv.get(t);function dP(t,e,{blocked:n,upgrade:r,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),o=ks(i);return r&&i.addEventListener("upgradeneeded",a=>{r(ks(i.result),a.oldVersion,a.newVersion,ks(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),A&&a.addEventListener("versionchange",c=>A(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const hP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],Tp=new Map;function s_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,A=fP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(A||hP.includes(n)))return;const s=async function(i,...o){const a=this.transaction(i,A?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),A&&a.done]))[0]};return Tp.set(e,s),s}lP(t=>({...t,get:(e,n,r)=>s_(e,n)||t.get(e,n,r),has:(e,n)=>!!s_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",c0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new Wf("@firebase/app"),mP="@firebase/app-compat",wP="@firebase/analytics-compat",vP="@firebase/analytics",yP="@firebase/app-check-compat",BP="@firebase/app-check",xP="@firebase/auth",_P="@firebase/auth-compat",CP="@firebase/database",IP="@firebase/data-connect",EP="@firebase/database-compat",bP="@firebase/functions",TP="@firebase/functions-compat",FP="@firebase/installations",UP="@firebase/installations-compat",QP="@firebase/messaging",SP="@firebase/messaging-compat",kP="@firebase/performance",RP="@firebase/performance-compat",NP="@firebase/remote-config",PP="@firebase/remote-config-compat",DP="@firebase/storage",LP="@firebase/storage-compat",OP="@firebase/firestore",MP="@firebase/vertexai-preview",VP="@firebase/firestore-compat",HP="firebase",jP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]",KP={[qh]:"fire-core",[mP]:"fire-core-compat",[vP]:"fire-analytics",[wP]:"fire-analytics-compat",[BP]:"fire-app-check",[yP]:"fire-app-check-compat",[xP]:"fire-auth",[_P]:"fire-auth-compat",[CP]:"fire-rtdb",[IP]:"fire-data-connect",[EP]:"fire-rtdb-compat",[bP]:"fire-fn",[TP]:"fire-fn-compat",[FP]:"fire-iid",[UP]:"fire-iid-compat",[QP]:"fire-fcm",[SP]:"fire-fcm-compat",[kP]:"fire-perf",[RP]:"fire-perf-compat",[NP]:"fire-rc",[PP]:"fire-rc-compat",[DP]:"fire-gcs",[LP]:"fire-gcs-compat",[OP]:"fire-fst",[VP]:"fire-fst-compat",[MP]:"fire-vertex","fire-js":"fire-js",[HP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Map,va=new Map,ya=new Map;function Lc(t,e){try{t.container.addComponent(e)}catch(n){PA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function PT(t,e){t.container.addOrOverwriteComponent(e)}function Vs(t){const e=t.name;if(ya.has(e))return PA.debug(`There were multiple attempts to register component ${e}.`),!1;ya.set(e,t);for(const n of Ms.values())Lc(n,t);for(const n of va.values())Lc(n,t);return!0}function DT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function GP(t,e,n=Os){DT(t,e).clearInstance(n)}function LT(t){return t.options!==void 0}function Qt(t){return t.settings!==void 0}function zP(){ya.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new io("app","Firebase",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new aA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P extends OT{constructor(e,n,r,A){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,i,A);else{const o=e;super(o.options,i,A)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Hr(qh,c0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){gv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=jP;function fv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Os,automaticDataCollectionEnabled:!1},e),A=r.name;if(typeof A!="string"||!A)throw Fr.create("bad-app-name",{appName:String(A)});if(n||(n=ET()),!n)throw Fr.create("no-options");const s=Ms.get(A);if(s){if(Dc(n,s.options)&&Dc(r,s.config))return s;throw Fr.create("duplicate-app",{appName:A})}const i=new ST(A);for(const a of ya.values())i.addComponent(a);const o=new OT(n,r,i);return Ms.set(A,o),o}function qP(t,e){if(VN()&&!bT())throw Fr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;LT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const A=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fr.create("finalization-registry-not-supported",{});const s=""+A(JSON.stringify(r)),i=va.get(s);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new ST(s);for(const c of ya.values())o.addComponent(c);const a=new $P(n,e,s,o);return va.set(s,a),a}function JP(t=Os){const e=Ms.get(t);if(!e&&t===Os&&ET())return fv();if(!e)throw Fr.create("no-app",{appName:t});return e}function XP(){return Array.from(Ms.values())}async function gv(t){let e=!1;const n=t.name;Ms.has(n)?(e=!0,Ms.delete(n)):va.has(n)&&t.decRefCount()<=0&&(va.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Hr(t,e,n){var r;let A=(r=KP[t])!==null&&r!==void 0?r:t;n&&(A+=`-${n}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${A}" with version "${e}":`];s&&o.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),PA.warn(o.join(" "));return}Vs(new aA(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}function MT(t,e){if(t!==null&&typeof t!="function")throw Fr.create("invalid-log-argument");rP(t,e)}function VT(t){nP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebase-heartbeat-database",ZP=1,Oc="firebase-heartbeat-store";let Fp=null;function HT(){return Fp||(Fp=dP(YP,ZP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),Fp}async function eD(t){try{const n=(await HT()).transaction(Oc),r=await n.objectStore(Oc).get(jT(t));return await n.done,r}catch(e){if(e instanceof On)PA.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});PA.warn(n.message)}}}async function i_(t,e){try{const r=(await HT()).transaction(Oc,"readwrite");await r.objectStore(Oc).put(e,jT(t)),await r.done}catch(n){if(n instanceof On)PA.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});PA.warn(r.message)}}}function jT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1024,nD=30*24*60*60*1e3;class rD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=o_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=nD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){PA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=o_(),{heartbeatsToSend:r,unsentEntries:A}=AD(this._heartbeatsCache.heartbeats),s=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return PA.warn(n),""}}}function o_(){return new Date().toISOString().substring(0,10)}function AD(t,e=tD){const n=[];let r=t.slice();for(const A of t){const s=n.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),a_(n)>e){s.dates.pop();break}}else if(n.push({agent:A.agent,dates:[A.date]}),a_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pc()?jN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return i_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return i_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function a_(t){return Wh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){Vs(new aA("platform-logger",e=>new gP(e),"PRIVATE")),Vs(new aA("heartbeat",e=>new rD(e),"PRIVATE")),Hr(qh,c0,t),Hr(qh,c0,"esm2017"),Hr("fire-js","")}iD("");const oD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:On,SDK_VERSION:ti,_DEFAULT_ENTRY_NAME:Os,_addComponent:Lc,_addOrOverwriteComponent:PT,_apps:Ms,_clearComponents:zP,_components:ya,_getProvider:DT,_isFirebaseApp:LT,_isFirebaseServerApp:Qt,_registerComponent:Vs,_removeServiceInstance:GP,_serverApps:va,deleteApp:gv,getApp:JP,getApps:XP,initializeApp:fv,initializeServerApp:qP,onLog:MT,registerVersion:Hr,setLogLevel:VT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this._delegate=e,this.firebase=n,Lc(e,new aA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),gv(this._delegate)))}_getService(e,n=Os){var r;this._delegate.checkDestroyed();const A=this._delegate.container.getProvider(e);return!A.isInitialized()&&((r=A.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&A.initialize(),A.getImmediate({identifier:n})}_removeServiceInstance(e,n=Os){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Lc(this._delegate,e)}_addOrOverwriteComponent(e){PT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},l_=new io("app-compat","Firebase",lD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){const e={},n={__esModule:!0,initializeApp:s,app:A,registerVersion:Hr,setLogLevel:VT,onLog:MT,apps:null,SDK_VERSION:ti,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:oD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(c){delete e[c]}function A(c){if(c=c||Os,!t_(e,c))throw l_.create("no-app",{appName:c});return e[c]}A.App=t;function s(c,d={}){const h=fv(c,d);if(t_(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(c=>e[c])}function o(c){const d=c.name,h=d.replace("-compat","");if(Vs(c)&&c.type==="PUBLIC"){const f=(w=A())=>{if(typeof w[h]!="function")throw l_.create("invalid-app-argument",{appName:d});return w[h]()};c.serviceProps!==void 0&&$h(f,c.serviceProps),n[h]=f,t.prototype[h]=function(...w){return this._getService.bind(this,d).apply(this,c.multipleInstances?w:[])}}return c.type==="PUBLIC"?n[h]:null}function a(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){const t=cD(aD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:KT,extendNamespace:e,createSubscribe:QT,ErrorFactory:io,deepExtend:$h});function e(n){$h(t,n)}return t}const uD=KT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Wf("@firebase/app-compat"),dD="@firebase/app-compat",hD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){Hr(dD,hD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=IT();if(t.firebase!==void 0){c_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&c_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ni=uD;fD();function pv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,r=Object.getOwnPropertySymbols(t);A<r.length;A++)e.indexOf(r[A])<0&&Object.prototype.propertyIsEnumerable.call(t,r[A])&&(n[r[A]]=t[r[A]]);return n}const ml={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},vo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function GT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pD=gD,mD=GT,zT=new io("auth","Firebase",GT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Wf("@firebase/auth");function wD(t,...e){Jh.logLevel<=Me.WARN&&Jh.warn(`Auth (${ti}): ${t}`,...e)}function rh(t,...e){Jh.logLevel<=Me.ERROR&&Jh.error(`Auth (${ti}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw wv(t,...e)}function Yt(t,...e){return wv(t,...e)}function mv(t,e,n){const r=Object.assign(Object.assign({},mD()),{[e]:n});return new io("auth","Firebase",r).create(e,{appName:t.name})}function an(t){return mv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ja(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wn(t,"argument-error"),mv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zT.create(t,...e)}function te(t,e,...n){if(!t)throw wv(e,...n)}function tA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rh(e),new Error(e)}function Kr(t,e){t||tA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vv(){return u_()==="http:"||u_()==="https:"}function u_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vv()||TT()||"connection"in navigator)?navigator.onLine:!0}function yD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=MN()||uv()}get(){return vD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new fu(3e4,6e4);function Rt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nt(t,e,n,r,A={}){return $T(t,A,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=Ha(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return HN()||(c.referrerPolicy="no-referrer"),WT.fetch()(qT(t,t.config.apiHost,n,o),c)})}async function $T(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BD),e);try{const A=new CD(t),s=await Promise.race([n(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Rl(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rl(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Rl(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Rl(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw mv(t,d,c);wn(t,d)}}catch(A){if(A instanceof On)throw A;wn(t,"network-request-failed",{message:String(A)})}}async function GA(t,e,n,r,A={}){const s=await Nt(t,e,n,r,A);return"mfaPendingCredential"in s&&wn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qT(t,e,n,r){const A=`${e}${n}?${r}`;return t.config.emulator?yv(t.config,A):`${t.config.apiScheme}://${A}`}function _D(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yt(this.auth,"network-request-failed")),xD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const A=Yt(t,e,r);return A.customData._tokenResponse=n,A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){return t!==void 0&&t.getResponse!==void 0}function h_(t){return t!==void 0&&t.enterprise!==void 0}class ID{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _D(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t){return(await Nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function bD(t,e){return Nt(t,"GET","/v2/recaptchaConfig",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return Nt(t,"POST","/v1/accounts:delete",e)}async function FD(t,e){return Nt(t,"POST","/v1/accounts:update",e)}async function JT(t,e){return Nt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UD(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),A=$f(r);te(A&&A.exp&&A.auth_time&&A.iat,n.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:r,authTime:rc(Up(A.auth_time)),issuedAtTime:rc(Up(A.iat)),expirationTime:rc(Up(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Up(t){return Number(t)*1e3}function $f(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{const A=CT(n);return A?JSON.parse(A):(rh("Failed to decode base64 JWT payload"),null)}catch(A){return rh("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function f_(t){const e=$f(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&QD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const A=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t){var e;const n=t.auth,r=await t.getIdToken(),A=await DA(t,JT(n,{idToken:r}));te(A==null?void 0:A.users.length,n,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?XT(s.providerUserInfo):[],o=RD(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new u0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function kD(t){const e=Ue(t);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RD(t,e){return[...t.filter(r=>!e.some(A=>A.providerId===r.providerId)),...e]}function XT(t){return t.map(e=>{var{providerId:n}=e,r=pv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){const n=await $T(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=qT(t,A,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",WT.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PD(t,e){return Nt(t,"POST","/v2/accounts:revokeToken",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=f_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:A,expiresIn:s}=await ND(e,n);this.updateTokensAndExpiration(r,A,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:A,expirationTime:s}=n,i=new Aa;return r&&(te(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),A&&(te(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(te(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return tA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class IA{constructor(e){var{uid:n,auth:r,stsTokenManager:A}=e,s=pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new u0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await DA(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UD(this,e)}reload(){return kD(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new IA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(an(this.auth));const e=await this.getIdToken();return await DA(this,TD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,A,s,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(A=n.email)!==null&&A!==void 0?A:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=n.photoURL)!==null&&i!==void 0?i:void 0,x=(o=n.tenantId)!==null&&o!==void 0?o:void 0,C=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,B=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:k,isAnonymous:R,providerData:N,stsTokenManager:I}=n;te(v&&I,e,"internal-error");const _=Aa.fromJSON(this.name,I);te(typeof v=="string",e,"internal-error"),rs(h,e.name),rs(f,e.name),te(typeof k=="boolean",e,"internal-error"),te(typeof R=="boolean",e,"internal-error"),rs(w,e.name),rs(m,e.name),rs(x,e.name),rs(C,e.name),rs(y,e.name),rs(B,e.name);const b=new IA({uid:v,auth:e,email:f,emailVerified:k,displayName:h,isAnonymous:R,photoURL:m,phoneNumber:w,tenantId:x,stsTokenManager:_,createdAt:y,lastLoginAt:B});return N&&Array.isArray(N)&&(b.providerData=N.map(Q=>Object.assign({},Q))),C&&(b._redirectEventId=C),b}static async _fromIdTokenResponse(e,n,r=!1){const A=new Aa;A.updateFromServerResponse(n);const s=new IA({uid:n.localId,auth:e,stsTokenManager:A,isAnonymous:r});return await Vc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const A=n.users[0];te(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?XT(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),o=new Aa;o.updateFromIdToken(r);const a=new IA({uid:A.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new u0(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;function cr(t){Kr(t instanceof Function,"Expected a class definition");let e=g_.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YT.type="NONE";const Ba=YT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e,n){return`firebase:${t}:${e}:${n}`}class sa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:A,name:s}=this.auth;this.fullUserKey=Ri(this.userKey,A.apiKey,s),this.fullPersistenceKey=Ri("persistence",A.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?IA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sa(cr(Ba),e,r);const A=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=A[0]||cr(Ba);const i=Ri(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=IA._fromJSON(e,d);c!==s&&(o=h),s=c;break}}catch{}const a=A.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new sa(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new sa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rF(e))return"Blackberry";if(AF(e))return"Webos";if(eF(e))return"Safari";if((e.includes("chrome/")||tF(e))&&!e.includes("edge/"))return"Chrome";if(gu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZT(t=Tt()){return/firefox\//i.test(t)}function eF(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tF(t=Tt()){return/crios\//i.test(t)}function nF(t=Tt()){return/iemobile/i.test(t)}function gu(t=Tt()){return/android/i.test(t)}function rF(t=Tt()){return/blackberry/i.test(t)}function AF(t=Tt()){return/webos/i.test(t)}function pu(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DD(t=Tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function LD(t=Tt()){var e;return pu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OD(){return FT()&&document.documentMode===10}function sF(t=Tt()){return pu(t)||gu(t)||AF(t)||rF(t)||/windows phone/i.test(t)||nF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t,e=[]){let n;switch(t){case"Browser":n=p_(Tt());break;case"Worker":n=`${p_(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ti}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const A of n)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e={}){return Nt(t,"GET","/v2/passwordPolicy",Rt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=6;class jD{constructor(e){var n,r,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:HD,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,A,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(A=a.containsLowercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),A&&(n.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let A=0;A<e.length;A++)r=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,A){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m_(this),this.idTokenSubscription=new m_(this),this.beforeStateQueue=new MD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var r,A;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await JT(this,{idToken:e}),r=await IA._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let A=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=A==null?void 0:A._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(A=a.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(an(this));const n=e?Ue(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(an(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(an(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VD(this),n=new jD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new io("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,A){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,A);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const A=await this._getAppCheckToken();return A&&(n["X-Firebase-AppCheck"]=A),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function St(t){return Ue(t)}class m_{constructor(e){this.auth=e,this.observer=null,this.addObserver=QT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GD(t){mu=t}function Bv(t){return mu.loadJS(t)}function zD(){return mu.recaptchaV2Script}function WD(){return mu.recaptchaEnterpriseScript}function $D(){return mu.gapiScript}function oF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qD="recaptcha-enterprise",JD="NO_RECAPTCHA";class XD{constructor(e){this.type=qD,this.auth=St(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{bD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new ID(a);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function A(s,i,o){const a=window.grecaptcha;h_(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(JD)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{r(this.auth).then(o=>{if(!n&&h_(window.grecaptcha))A(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=WD();a.length!==0&&(a+=o),Bv(a).then(()=>{A(o,s,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function w_(t,e,n,r=!1){const A=new XD(t);let s;try{s=await A.verify(n)}catch{s=await A.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Hc(t,e,n,r){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await w_(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await w_(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(s)})}function YD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ZD(t,e,n){const r=St(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const A=!!(n!=null&&n.disableWarnings),s=aF(e),{host:i,port:o}=e4(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||t4()}function aF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e4(t){const e=aF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(r);if(A){const s=A[1];return{host:s,port:v_(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:v_(i)}}}function v_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tA("not implemented")}_getIdTokenResponse(e){return tA("not implemented")}_linkToIdToken(e,n){return tA("not implemented")}_getReauthenticationResolver(e){return tA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(t,e){return Nt(t,"POST","/v1/accounts:resetPassword",Rt(t,e))}async function n4(t,e){return Nt(t,"POST","/v1/accounts:update",e)}async function r4(t,e){return Nt(t,"POST","/v1/accounts:signUp",e)}async function A4(t,e){return Nt(t,"POST","/v1/accounts:update",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return GA(t,"POST","/v1/accounts:signInWithPassword",Rt(t,e))}async function qf(t,e){return Nt(t,"POST","/v1/accounts:sendOobCode",Rt(t,e))}async function i4(t,e){return qf(t,e)}async function o4(t,e){return qf(t,e)}async function a4(t,e){return qf(t,e)}async function l4(t,e){return qf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return GA(t,"POST","/v1/accounts:signInWithEmailLink",Rt(t,e))}async function u4(t,e){return GA(t,"POST","/v1/accounts:signInWithEmailLink",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Ka{constructor(e,n,r,A=null){super("password",r),this._email=e,this._password=n,this._tenantId=A}static _fromEmailAndPassword(e,n){return new jc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hc(e,n,"signInWithPassword",s4);case"emailLink":return c4(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hc(e,r,"signUpPassword",r4);case"emailLink":return u4(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e){return GA(t,"POST","/v1/accounts:signInWithIdp",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="http://localhost";class lA extends Ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A}=n,s=pv(n,["providerId","signInMethod"]);if(!r||!A)return null;const i=new lA(r,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return FA(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,FA(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,FA(e,n)}buildRequest(){const e={requestUri:d4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(t,e){return Nt(t,"POST","/v1/accounts:sendVerificationCode",Rt(t,e))}async function f4(t,e){return GA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,e))}async function g4(t,e){const n=await GA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,e));if(n.temporaryProof)throw Rl(t,"account-exists-with-different-credential",n);return n}const p4={USER_NOT_FOUND:"user-not-found"};async function m4(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return GA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,n),p4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Ka{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ni({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ni({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return f4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return g4(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return m4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:A}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:A}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:A,temporaryProof:s}=e;return!r&&!n&&!A&&!s?null:new Ni({verificationId:n,verificationCode:r,phoneNumber:A,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v4(t){const e=Jo(kl(t)).link,n=e?Jo(kl(e)).deep_link_id:null,r=Jo(kl(t)).deep_link_id;return(r?Jo(kl(r)).link:null)||r||n||e||t}class Jf{constructor(e){var n,r,A,s,i,o;const a=Jo(kl(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=w4((A=a.mode)!==null&&A!==void 0?A:null);te(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=v4(e);try{return new Jf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.providerId=ri.PROVIDER_ID}static credential(e,n){return jc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jf.parseLink(n);return te(r,"argument-error"),jc._fromEmailAndCode(e,r.code,r.tenantId)}}ri.PROVIDER_ID="password";ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ia extends Ga{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return te("providerId"in n&&"signInMethod"in n,"argument-error"),lA._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),lA._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ia.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ia.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:A,pendingToken:s,nonce:i,providerId:o}=e;if(!r&&!A&&!n&&!s||!o)return null;try{return new ia(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Ga{constructor(){super("facebook.com")}static credential(e){return lA._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lA._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Ga{constructor(){super("github.com")}static credential(e){return lA._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="http://localhost";class xa extends Ka{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return FA(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,FA(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,FA(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A,pendingToken:s}=n;return!r||!A||!s||r!==A?null:new xa(r,s)}static _create(e,n){return new xa(e,n)}buildRequest(){return{requestUri:y4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="saml.";class Xh extends zA{constructor(e){te(e.startsWith(B4),"argument-error"),super(e)}static credentialFromResult(e){return Xh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Xh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=xa.fromJSON(e);return te(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return xa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Ga{constructor(){super("twitter.com")}static credential(e,n){return lA._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF(t,e){return GA(t,"POST","/v1/accounts:signUp",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,A=!1){const s=await IA._fromIdTokenResponse(e,r,A),i=y_(r);return new Sr({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const A=y_(r);return new Sr({user:e,providerId:A,_tokenResponse:r,operationType:n})}}function y_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t){var e;if(Qt(t.app))return Promise.reject(an(t));const n=St(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Sr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await cF(n,{returnSecureToken:!0}),A=await Sr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(A.user),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends On{constructor(e,n,r,A){var s;super(n.code,n.message),this.operationType=r,this.user=A,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,A){return new Yh(e,n,r,A)}}function uF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e){const n=Ue(t);await Xf(!0,n,e);const{providerUserInfo:r}=await FD(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),A=dF(r||[]);return n.providerData=n.providerData.filter(s=>A.has(s.providerId)),A.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xv(t,e,n=!1){const r=await DA(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sr._forOperation(t,"link",r)}async function Xf(t,e,n){await Vc(e);const r=dF(e.providerData),A=t===!1?"provider-already-linked":"no-such-provider";te(r.has(n)===t,e.auth,A)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(an(r));const A="reauthenticate";try{const s=await DA(t,uF(r,A,e,t),n);te(s.idToken,r,"internal-error");const i=$f(s.idToken);te(i,r,"internal-error");const{sub:o}=i;return te(t.uid===o,r,"user-mismatch"),Sr._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t,e,n=!1){if(Qt(t.app))return Promise.reject(an(t));const r="signIn",A=await uF(t,r,e),s=await Sr._fromIdTokenResponse(t,r,A);return n||await t._updateCurrentUser(s.user),s}async function Yf(t,e){return fF(St(t),e)}async function gF(t,e){const n=Ue(t);return await Xf(!1,n,e.providerId),xv(n,e)}async function pF(t,e){return hF(Ue(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e){return GA(t,"POST","/v1/accounts:signInWithCustomToken",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e){if(Qt(t.app))return Promise.reject(an(t));const n=St(t),r=await C4(n,{token:e,returnSecureToken:!0}),A=await Sr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(A.user),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?_v._fromServerResponse(e,n):"totpInfo"in n?Cv._fromServerResponse(e,n):wn(e,"internal-error")}}class _v extends wu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new _v(n)}}class Cv extends wu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Cv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e,n){var r;te(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),te(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(te(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(te(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(t){const e=St(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E4(t,e,n){const r=St(t),A={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Zf(r,A,n),await Hc(r,A,"getOobCode",o4)}async function b4(t,e,n){await lF(Ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Iv(t),r})}async function T4(t,e){await A4(Ue(t),{oobCode:e})}async function mF(t,e){const n=Ue(t),r=await lF(n,{oobCode:e}),A=r.requestType;switch(te(A,n,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,n,"internal-error");default:te(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=wu._fromServerResponse(St(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:A}}async function F4(t,e){const{data:n}=await mF(Ue(t),e);return n.email}async function U4(t,e,n){if(Qt(t.app))return Promise.reject(an(t));const r=St(t),i=await Hc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cF).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Iv(t),a}),o=await Sr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function Q4(t,e,n){return Qt(t.app)?Promise.reject(an(t)):Yf(Ue(t),ri.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Iv(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t,e,n){const r=St(t),A={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(i,o){te(o.handleCodeInApp,r,"argument-error"),o&&Zf(r,i,o)}s(A,n),await Hc(r,A,"getOobCode",a4)}function k4(t,e){const n=Jf.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function R4(t,e,n){if(Qt(t.app))return Promise.reject(an(t));const r=Ue(t),A=ri.credentialWithLink(e,n||Mc());return te(A._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yf(r,A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(t,e){return Nt(t,"POST","/v1/accounts:createAuthUri",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e){const n=vv()?Mc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:A}=await N4(Ue(t),r);return A||[]}async function D4(t,e){const n=Ue(t),A={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Zf(n.auth,A,e);const{email:s}=await i4(n.auth,A);s!==t.email&&await t.reload()}async function L4(t,e,n){const r=Ue(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Zf(r.auth,s,n);const{email:i}=await l4(r.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e){return Nt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M4(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ue(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await DA(r,O4(r.auth,s));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function V4(t,e){const n=Ue(t);return Qt(n.auth.app)?Promise.reject(an(n.auth)):wF(n,e,null)}function H4(t,e){return wF(Ue(t),null,e)}async function wF(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const i=await DA(t,n4(r,s));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){var e,n;if(!t)return null;const{providerId:r}=t,A=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=$f(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new oa(s,o)}}if(!r)return null;switch(r){case"facebook.com":return new K4(s,A);case"github.com":return new G4(s,A);case"google.com":return new z4(s,A);case"twitter.com":return new W4(s,A,t.screenName||null);case"custom":case"anonymous":return new oa(s,null);default:return new oa(s,r,A)}}class oa{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class vF extends oa{constructor(e,n,r,A){super(e,n,r),this.username=A}}class K4 extends oa{constructor(e,n){super(e,"facebook.com",n)}}class G4 extends vF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class z4 extends oa{constructor(e,n){super(e,"google.com",n)}}class W4 extends vF{constructor(e,n,r){super(e,"twitter.com",n,r)}}function $4(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:j4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ti("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ti("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ti._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ti._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=St(e),A=n.customData._serverResponse,s=(A.mfaInfo||[]).map(o=>wu._fromServerResponse(r,o));te(A.mfaPendingCredential,r,"internal-error");const i=Ti._fromMfaPendingCredential(A.mfaPendingCredential);return new Ev(i,s,async o=>{const a=await o._process(r,i);delete A.mfaInfo,delete A.mfaPendingCredential;const c=Object.assign(Object.assign({},A),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await Sr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return te(n.user,r,"internal-error"),Sr._forOperation(n.user,n.operationType,c);default:wn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function q4(t,e){var n;const r=Ue(t),A=e;return te(e.customData.operationType,r,"argument-error"),te((n=A.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Ev._fromError(r,A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:start",Rt(t,e))}function X4(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(t,e))}function Y4(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(t,e))}class bv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>wu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new bv(e)}async getSession(){return Ti._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,A=await this.getSession(),s=await DA(this.user,r._process(this.user.auth,A,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const A=await DA(this.user,Y4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(A),await this.user.reload()}catch(A){throw A}}}const Qp=new WeakMap;function Z4(t){const e=Ue(t);return Qp.has(e)||Qp.set(e,bv._fromUser(e)),Qp.get(e)}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=1e3,tL=10;class BF extends yF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),A=this.localCache[n];r!==A&&e(n,A,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);OD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,tL):A()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BF.type="LOCAL";const Tv=BF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF extends yF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xF.type="SESSION";const Ki=xF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(A=>A.isListeningto(e));if(n)return n;const r=new eg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:A,data:s}=n.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:A});const o=Array.from(i).map(async c=>c(n.origin,s)),a=await nL(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:A,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=vu("",20);A.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(d),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function AL(t){Gt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function sL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oL(){return Fv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F="firebaseLocalStorageDb",aL=1,ef="firebaseLocalStorage",CF="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tg(t,e){return t.transaction([ef],e?"readwrite":"readonly").objectStore(ef)}function lL(){const t=indexedDB.deleteDatabase(_F);return new yu(t).toPromise()}function d0(){const t=indexedDB.open(_F,aL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ef,{keyPath:CF})}catch(A){n(A)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ef)?e(r):(r.close(),await lL(),e(await d0()))})})}async function B_(t,e,n){const r=tg(t,!0).put({[CF]:e,value:n});return new yu(r).toPromise()}async function cL(t,e){const n=tg(t,!1).get(e),r=await new yu(n).toPromise();return r===void 0?null:r.value}function x_(t,e){const n=tg(t,!0).delete(e);return new yu(n).toPromise()}const uL=800,dL=3;class IF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await d0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eg._getInstance(oL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sL(),!this.activeServiceWorker)return;this.sender=new rL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await d0();return await B_(e,Zh,"1"),await x_(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>B_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>x_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=tg(A,!1).getAll();return new yu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)r.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),n.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!r.has(A)&&(this.notifyListeners(A,null),n.push(A));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IF.type="LOCAL";const Kc=IF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){return Nt(t,"POST","/v2/accounts/mfaSignIn:start",Rt(t,e))}function fL(t,e){return Nt(t,"POST","/v2/accounts/mfaSignIn:finalize",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=500,pL=6e4,fd=1e12;class mL{constructor(e){this.auth=e,this.counter=fd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new wL(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||fd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||fd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||fd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class wL{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A=typeof e=="string"?document.getElementById(e):e;te(A,"argument-error",{appName:n}),this.container=A,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=vL(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},pL)},gL))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function vL(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=oF("rcb"),yL=new fu(3e4,6e4);class BL{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Gt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(xL(n),e,"argument-error"),this.shouldResolveImmediately(n)&&d_(Gt().grecaptcha)?Promise.resolve(Gt().grecaptcha):new Promise((r,A)=>{const s=Gt().setTimeout(()=>{A(Yt(e,"network-request-failed"))},yL.get());Gt()[Sp]=()=>{Gt().clearTimeout(s),delete Gt()[Sp];const o=Gt().grecaptcha;if(!o||!d_(o)){A(Yt(e,"internal-error"));return}const a=o.render;o.render=(c,d)=>{const h=a(c,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${zD()}?${Ha({onload:Sp,render:"explicit",hl:n})}`;Bv(i).catch(()=>{clearTimeout(s),A(Yt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Gt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function xL(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class _L{async load(e){return new mL(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="recaptcha",CL={theme:"light",type:"image"};let IL=class{constructor(e,n,r=Object.assign({},CL)){this.parameters=r,this.type=EF,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=St(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A=typeof n=="string"?document.getElementById(n):n;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _L:new BL,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(A=>{const s=i=>{i&&(this.tokenChangeListeners.delete(s),A(i))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Gt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(vv()&&!Fv(),this.auth,"internal-error"),await EL(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await ED(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function EL(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ni._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function bL(t,e,n){if(Qt(t.app))return Promise.reject(an(t));const r=St(t),A=await ng(r,e,Ue(n));return new Uv(A,s=>Yf(r,s))}async function TL(t,e,n){const r=Ue(t);await Xf(!1,r,"phone");const A=await ng(r.auth,e,Ue(n));return new Uv(A,s=>gF(r,s))}async function FL(t,e,n){const r=Ue(t);if(Qt(r.auth.app))return Promise.reject(an(r.auth));const A=await ng(r.auth,e,Ue(n));return new Uv(A,s=>pF(r,s))}async function ng(t,e,n){var r;const A=await n.verify();try{te(typeof A=="string",t,"argument-error"),te(n.type===EF,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s)return te(i.type==="enroll",t,"internal-error"),(await J4(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return te(o,t,"missing-multi-factor-info"),(await hL(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await h4(t,{phoneNumber:s.phoneNumber,recaptchaToken:A});return i}}finally{n._reset()}}async function UL(t,e){const n=Ue(t);if(Qt(n.auth.app))return Promise.reject(an(n.auth));await xv(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi=class Ah{constructor(e){this.providerId=Ah.PROVIDER_ID,this.auth=St(e)}verifyPhoneNumber(e,n){return ng(this.auth,e,Ue(n))}static credential(e,n){return Ni._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Ah.credentialFromTaggedObject(n)}static credentialFromError(e){return Ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ni._fromTokenResponse(n,r):null}};Gi.PROVIDER_ID="phone";Gi.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e){return e?cr(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends Ka{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return FA(e,this._buildIdpRequest())}_linkToIdToken(e,n){return FA(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return FA(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QL(t){return fF(t.auth,new Qv(t),t.bypassAuthState)}function SL(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),hF(n,new Qv(t),t.bypassAuthState)}async function kL(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),xv(n,new Qv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,n,r,A,s=!1){this.auth=e,this.resolver=r,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:A,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QL;case"linkViaPopup":case"linkViaRedirect":return kL;case"reauthViaPopup":case"reauthViaRedirect":return SL;default:wn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new fu(2e3,1e4);async function NL(t,e,n){if(Qt(t.app))return Promise.reject(Yt(t,"operation-not-supported-in-this-environment"));const r=St(t);ja(t,e,zA);const A=oo(r,n);return new EA(r,"signInViaPopup",e,A).executeNotNull()}async function PL(t,e,n){const r=Ue(t);if(Qt(r.auth.app))return Promise.reject(Yt(r.auth,"operation-not-supported-in-this-environment"));ja(r.auth,e,zA);const A=oo(r.auth,n);return new EA(r.auth,"reauthViaPopup",e,A,r).executeNotNull()}async function DL(t,e,n){const r=Ue(t);ja(r.auth,e,zA);const A=oo(r.auth,n);return new EA(r.auth,"linkViaPopup",e,A,r).executeNotNull()}class EA extends bF{constructor(e,n,r,A,s){super(e,n,A,s),this.provider=r,this.authWindow=null,this.pollId=null,EA.currentPopupAction&&EA.currentPopupAction.cancel(),EA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=vu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,EA.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RL.get())};e()}}EA.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="pendingRedirect",Ac=new Map;class OL extends bF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ac.get(this.auth._key());if(!e){try{const r=await ML(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ac.set(this.auth._key(),e)}return this.bypassAuthState||Ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ML(t,e){const n=FF(e),r=TF(t);if(!await r._isAvailable())return!1;const A=await r._get(n)==="true";return await r._remove(n),A}async function Sv(t,e){return TF(t)._set(FF(e),"true")}function VL(){Ac.clear()}function kv(t,e){Ac.set(t._key(),e)}function TF(t){return cr(t._redirectPersistence)}function FF(t){return Ri(LL,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t,e,n){return jL(t,e,n)}async function jL(t,e,n){if(Qt(t.app))return Promise.reject(an(t));const r=St(t);ja(t,e,zA),await r._initializationPromise;const A=oo(r,n);return await Sv(A,r),A._openRedirect(r,e,"signInViaRedirect")}function KL(t,e,n){return GL(t,e,n)}async function GL(t,e,n){const r=Ue(t);if(ja(r.auth,e,zA),Qt(r.auth.app))return Promise.reject(an(r.auth));await r.auth._initializationPromise;const A=oo(r.auth,n);await Sv(A,r.auth);const s=await UF(r);return A._openRedirect(r.auth,e,"reauthViaRedirect",s)}function zL(t,e,n){return WL(t,e,n)}async function WL(t,e,n){const r=Ue(t);ja(r.auth,e,zA),await r.auth._initializationPromise;const A=oo(r.auth,n);await Xf(!1,r,e.providerId),await Sv(A,r.auth);const s=await UF(r);return A._openRedirect(r.auth,e,"linkViaRedirect",s)}async function $L(t,e){return await St(t)._initializationPromise,rg(t,e,!1)}async function rg(t,e,n=!1){if(Qt(t.app))return Promise.reject(an(t));const r=St(t),A=oo(r,e),i=await new OL(r,A,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function UF(t){const e=vu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=10*60*1e3;class QF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SF(e)){const A=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yt(this.auth,A))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qL&&this.cachedEventUids.clear(),this.cachedEventUids.has(__(e))}saveEventToCache(e){this.cachedEventUids.add(__(e)),this.lastProcessedEventTime=Date.now()}}function __(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(t,e={}){return Nt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YL=/^https?/;async function ZL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kF(t);for(const n of e)try{if(eO(n))return}catch{}wn(t,"unauthorized-domain")}function eO(t){const e=Mc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!YL.test(n))return!1;if(XL.test(t))return r===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new fu(3e4,6e4);function C_(){const t=Gt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nO(t){return new Promise((e,n)=>{var r,A,s;function i(){C_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C_(),n(Yt(t,"network-request-failed"))},timeout:tO.get()})}if(!((A=(r=Gt().gapi)===null||r===void 0?void 0:r.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=Gt().gapi)===null||s===void 0)&&s.load)i();else{const o=oF("iframefcb");return Gt()[o]=()=>{gapi.load?i():n(Yt(t,"network-request-failed"))},Bv(`${$D()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw sh=null,e})}let sh=null;function rO(t){return sh=sh||nO(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new fu(5e3,15e3),sO="__/auth/iframe",iO="emulator/auth/iframe",oO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lO(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yv(e,iO):`https://${t.config.authDomain}/${sO}`,r={apiKey:e.apiKey,appName:t.name,v:ti},A=aO.get(t.config.apiHost);A&&(r.eid=A);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ha(r).slice(1)}`}async function cO(t){const e=await rO(t),n=Gt().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:lO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oO,dontclear:!0},r=>new Promise(async(A,s)=>{await r.restyle({setHideOnLeave:!1});const i=Yt(t,"network-request-failed"),o=Gt().setTimeout(()=>{s(i)},AO.get());function a(){Gt().clearTimeout(o),A(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dO=500,hO=600,fO="_blank",gO="http://localhost";class I_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pO(t,e,n,r=dO,A=hO){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},uO),{width:r.toString(),height:A.toString(),top:s,left:i}),c=Tt().toLowerCase();n&&(o=tF(c)?fO:n),ZT(c)&&(e=e||gO,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[w,m])=>`${f}${w}=${m},`,"");if(LD(c)&&o!=="_self")return mO(e||"",o),new I_(null);const h=window.open(e||"",o,d);te(h,t,"popup-blocked");try{h.focus()}catch{}return new I_(h)}function mO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="__/auth/handler",vO="emulator/auth/handler",yO=encodeURIComponent("fac");async function h0(t,e,n,r,A,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ti,eventId:A};if(e instanceof zA){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",WN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))i[d]=h}if(e instanceof Ga){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${yO}=${encodeURIComponent(a)}`:"";return`${BO(t)}?${Ha(o).slice(1)}${c}`}function BO({config:t}){return t.emulator?yv(t,vO):`https://${t.authDomain}/${wO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class xO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ki,this._completeRedirectFn=rg,this._overrideRedirectResult=kv}async _openPopup(e,n,r,A){var s;Kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await h0(e,n,r,Mc(),A);return pO(e,i,vu())}async _openRedirect(e,n,r,A){await this._originValidation(e);const s=await h0(e,n,r,Mc(),A);return AL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:A,promise:s}=this.eventManagers[n];return A?Promise.resolve(A):(Kr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cO(e),r=new QF(e);return n.register("authEvent",A=>(te(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:r.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kp,{type:kp},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[kp];i!==void 0&&n(!!i),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sF()||eF()||pu()}}const _O=xO;class CO{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return tA("unexpected MultiFactorSessionType")}}}class Rv extends CO{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Rv(e)}_finalizeEnroll(e,n,r){return X4(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return fL(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class RF{constructor(){}static assertion(e){return Rv._fromCredential(e)}}RF.FACTOR_ID="phone";var E_="@firebase/auth",b_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bO(t){Vs(new aA("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;te(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iF(t)},c=new KD(r,A,s,a);return YD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new aA("auth-internal",e=>{const n=St(e.getProvider("auth").getImmediate());return(r=>new IO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(E_,b_,EO(t)),Hr(E_,b_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=5*60;DN("authIdTokenMaxAge");function FO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=A=>{const s=Yt("internal-error");s.customData=A,n(s)},r.type="text/javascript",r.charset="UTF-8",FO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bO("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=2e3;async function QO(t,e,n){var r;const{BuildInfo:A}=zi();Kr(e.sessionId,"AuthEvent did not contain a session ID");const s=await PO(e.sessionId),i={};return pu()?i.ibi=A.packageName:gu()?i.apn=A.packageName:wn(t,"operation-not-supported-in-this-environment"),A.displayName&&(i.appDisplayName=A.displayName),i.sessionId=s,h0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function SO(t){const{BuildInfo:e}=zi(),n={};pu()?n.iosBundleId=e.packageName:gu()?n.androidPackageName=e.packageName:wn(t,"operation-not-supported-in-this-environment"),await kF(t,n)}function kO(t){const{cordova:e}=zi();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let A=null;r?e.plugins.browsertab.openUrl(t):A=e.InAppBrowser.open(t,DD()?"_blank":"_system","location=yes"),n(A)})})}async function RO(t,e,n){const{cordova:r}=zi();let A=()=>{};try{await new Promise((s,i)=>{let o=null;function a(){var h;s();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{i(Yt(t,"redirect-cancelled-by-user"))},UO))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(a),document.addEventListener("resume",c,!1),gu()&&document.addEventListener("visibilitychange",d,!1),A=()=>{e.removePassiveListener(a),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{A()}}function NO(t){var e,n,r,A,s,i,o,a,c,d;const h=zi();te(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof((s=(A=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||A===void 0?void 0:A.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function PO(t){const e=DO(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(A=>A.toString(16).padStart(2,"0")).join("")}function DO(t){if(Kr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=20;class OO extends QF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function MO(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:jO(),postBody:null,tenantId:t.tenantId,error:Yt(t,"no-auth-event")}}function VO(t,e){return f0()._set(g0(t),e)}async function T_(t){const e=await f0()._get(g0(t));return e&&await f0()._remove(g0(t)),e}function HO(t,e){var n,r;const A=GO(e);if(A.includes("/__/auth/callback")){const s=ih(A),i=s.firebaseError?KO(decodeURIComponent(s.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?Yt(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:A,postBody:null}}return null}function jO(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<LO;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function f0(){return cr(Tv)}function g0(t){return Ri("authEvent",t.config.apiKey,t.name)}function KO(t){try{return JSON.parse(t)}catch{return null}}function GO(t){const e=ih(t),n=e.link?decodeURIComponent(e.link):void 0,r=ih(n).link,A=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ih(A).link||A||r||n||t}function ih(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Jo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=500;class WO{constructor(){this._redirectPersistence=Ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rg,this._overrideRedirectResult=kv}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new OO(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){wn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,A){NO(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),VL(),await this._originValidation(e);const i=MO(e,r,A);await VO(e,i);const o=await QO(e,i,n),a=await kO(o);return RO(e,s,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SO(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:A,BuildInfo:s}=zi(),i=setTimeout(async()=>{await T_(e),n.onEvent(F_())},zO),o=async d=>{clearTimeout(i);const h=await T_(e);let f=null;h&&(d!=null&&d.url)&&(f=HO(h,d.url)),n.onEvent(f||F_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=A,c=`${s.packageName.toLowerCase()}://`;zi().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const $O=WO;function F_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){St(t)._logFramework(e)}var JO="@firebase/auth-compat",XO="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=1e3;function sc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function ZO(){return sc()==="http:"||sc()==="https:"}function NF(t=Tt()){return!!((sc()==="file:"||sc()==="ionic:"||sc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function eM(){return uv()||cv()}function tM(){return FT()&&(document==null?void 0:document.documentMode)===11}function nM(t=Tt()){return/Edge\/\d+/.test(t)}function rM(t=Tt()){return tM()||nM(t)}function PF(){try{const t=self.localStorage,e=vu();if(t)return t.setItem(e,"1"),t.removeItem(e),rM()?Pc():!0}catch{return Nv()&&Pc()}return!1}function Nv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rp(){return(ZO()||TT()||NF())&&!eM()&&PF()&&!Nv()}function DF(){return NF()&&typeof document<"u"}async function AM(){return DF()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},YO);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function sM(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir={LOCAL:"local",NONE:"none",SESSION:"session"},wl=te,LF="persistence";function iM(t,e){if(wl(Object.values(ir).includes(e),t,"invalid-persistence-type"),uv()){wl(e!==ir.SESSION,t,"unsupported-persistence-type");return}if(cv()){wl(e===ir.NONE,t,"unsupported-persistence-type");return}if(Nv()){wl(e===ir.NONE||e===ir.LOCAL&&Pc(),t,"unsupported-persistence-type");return}wl(e===ir.NONE||PF(),t,"unsupported-persistence-type")}async function p0(t){await t._initializationPromise;const e=OF(),n=Ri(LF,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function oM(t,e){const n=OF();if(!n)return[];const r=Ri(LF,t,e);switch(n.getItem(r)){case ir.NONE:return[Ba];case ir.LOCAL:return[Kc,Ki];case ir.SESSION:return[Ki];default:return[]}}function OF(){var t;try{return((t=sM())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=te;class vs{constructor(){this.browserResolver=cr(_O),this.cordovaResolver=cr($O),this.underlyingResolver=null,this._redirectPersistence=Ki,this._completeRedirectFn=rg,this._overrideRedirectResult=kv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,A){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,A)}async _openRedirect(e,n,r,A){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,A)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return DF()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aM(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await AM();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){return t.unwrap()}function lM(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){return VF(t)}function uM(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const A=e;A.resolver=new dM(t,q4(t,e))}else if(r){const A=VF(e),s=e;A&&(s.credential=A,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function VF(t){const{_tokenResponse:e}=t instanceof On?t.customData:t;if(!e)return null;if(!(t instanceof On)&&"temporaryProof"in e&&"phoneNumber"in e)return Gi.credentialFromResult(t);const n=e.providerId;if(!n||n===ml.PASSWORD)return null;let r;switch(n){case ml.GOOGLE:r=Xr;break;case ml.FACEBOOK:r=Jr;break;case ml.GITHUB:r=Yr;break;case ml.TWITTER:r=Zr;break;default:const{oauthIdToken:A,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!s&&!i&&!A&&!o?null:o?n.startsWith("saml.")?xa._create(n,o):lA._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:A,accessToken:s}):new ia(n).credential({idToken:A,accessToken:s,rawNonce:a})}return t instanceof On?r.credentialFromError(t):r.credentialFromResult(t)}function zn(t,e){return e.catch(n=>{throw n instanceof On&&uM(t,n),n}).then(n=>{const r=n.operationType,A=n.user;return{operationType:r,credential:cM(n),additionalUserInfo:$4(n),user:Ag.getOrCreate(A)}})}async function m0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>zn(t,n.confirm(r))}}class dM{constructor(e,n){this.resolver=n,this.auth=lM(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return zn(MF(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag=class Nl{constructor(e){this._delegate=e,this.multiFactor=Z4(e)}static getOrCreate(e){return Nl.USER_MAP.has(e)||Nl.USER_MAP.set(e,new Nl(e)),Nl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return zn(this.auth,gF(this._delegate,e))}async linkWithPhoneNumber(e,n){return m0(this.auth,TL(this._delegate,e,n))}async linkWithPopup(e){return zn(this.auth,DL(this._delegate,e,vs))}async linkWithRedirect(e){return await p0(St(this.auth)),zL(this._delegate,e,vs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return zn(this.auth,pF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return m0(this.auth,FL(this._delegate,e,n))}reauthenticateWithPopup(e){return zn(this.auth,PL(this._delegate,e,vs))}async reauthenticateWithRedirect(e){return await p0(St(this.auth)),KL(this._delegate,e,vs)}sendEmailVerification(e){return D4(this._delegate,e)}async unlink(e){return await _4(this._delegate,e),this}updateEmail(e){return V4(this._delegate,e)}updatePassword(e){return H4(this._delegate,e)}updatePhoneNumber(e){return UL(this._delegate,e)}updateProfile(e){return M4(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return L4(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Ag.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=te;class w0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;vl(r,"invalid-api-key",{appName:e.name}),vl(r,"invalid-api-key",{appName:e.name});const A=typeof window<"u"?vs:void 0;this._delegate=n.initialize({options:{persistence:hM(r,e.name),popupRedirectResolver:A}}),this._delegate._updateErrorMap(pD),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ag.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){ZD(this._delegate,e,n)}applyActionCode(e){return T4(this._delegate,e)}checkActionCode(e){return mF(this._delegate,e)}confirmPasswordReset(e,n){return b4(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return zn(this._delegate,U4(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return P4(this._delegate,e)}isSignInWithEmailLink(e){return k4(this._delegate,e)}async getRedirectResult(){vl(Rp(),this._delegate,"operation-not-supported-in-this-environment");const e=await $L(this._delegate,vs);return e?zn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){qO(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:A,error:s,complete:i}=U_(e,n,r);return this._delegate.onAuthStateChanged(A,s,i)}onIdTokenChanged(e,n,r){const{next:A,error:s,complete:i}=U_(e,n,r);return this._delegate.onIdTokenChanged(A,s,i)}sendSignInLinkToEmail(e,n){return S4(this._delegate,e,n)}sendPasswordResetEmail(e,n){return E4(this._delegate,e,n||void 0)}async setPersistence(e){iM(this._delegate,e);let n;switch(e){case ir.SESSION:n=Ki;break;case ir.LOCAL:n=await cr(Kc)._isAvailable()?Kc:Tv;break;case ir.NONE:n=Ba;break;default:return wn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return zn(this._delegate,x4(this._delegate))}signInWithCredential(e){return zn(this._delegate,Yf(this._delegate,e))}signInWithCustomToken(e){return zn(this._delegate,I4(this._delegate,e))}signInWithEmailAndPassword(e,n){return zn(this._delegate,Q4(this._delegate,e,n))}signInWithEmailLink(e,n){return zn(this._delegate,R4(this._delegate,e,n))}signInWithPhoneNumber(e,n){return m0(this._delegate,bL(this._delegate,e,n))}async signInWithPopup(e){return vl(Rp(),this._delegate,"operation-not-supported-in-this-environment"),zn(this._delegate,NL(this._delegate,e,vs))}async signInWithRedirect(e){return vl(Rp(),this._delegate,"operation-not-supported-in-this-environment"),await p0(this._delegate),HL(this._delegate,e,vs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return F4(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}w0.Persistence=ir;function U_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const A=r;return{next:i=>A(i&&Ag.getOrCreate(i)),error:e,complete:n}}function hM(t,e){const n=oM(t,e);if(typeof self<"u"&&!n.includes(Kc)&&n.push(Kc),typeof window<"u")for(const r of[Tv,Ki])n.includes(r)||n.push(r);return n.includes(Ba)||n.push(Ba),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.providerId="phone",this._delegate=new Gi(MF(ni.auth()))}static credential(e,n){return Gi.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Pv.PHONE_SIGN_IN_METHOD=Gi.PHONE_SIGN_IN_METHOD;Pv.PROVIDER_ID=Gi.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=te;class gM{constructor(e,n,r=ni.app()){var A;fM((A=r.options)===null||A===void 0?void 0:A.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new IL(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="auth-compat";function mM(t){t.INTERNAL.registerComponent(new aA(pM,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new w0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vo.EMAIL_SIGNIN,PASSWORD_RESET:vo.PASSWORD_RESET,RECOVER_EMAIL:vo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:vo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:vo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:vo.VERIFY_EMAIL}},EmailAuthProvider:ri,FacebookAuthProvider:Jr,GithubAuthProvider:Yr,GoogleAuthProvider:Xr,OAuthProvider:ia,SAMLAuthProvider:Xh,PhoneAuthProvider:Pv,PhoneMultiFactorGenerator:RF,RecaptchaVerifier:gM,TwitterAuthProvider:Zr,Auth:w0,AuthCredential:Ka,Error:On}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(JO,XO)}mM(ni);var wM="firebase",vM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni.registerVersion(wM,vM,"app-compat");var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,HF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function b(){}b.prototype=_.prototype,I.D=_.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(Q,U,D){for(var T=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)T[Fe-2]=arguments[Fe];return _.prototype[U].apply(Q,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(I,_,b){b||(b=0);var Q=Array(16);if(typeof _=="string")for(var U=0;16>U;++U)Q[U]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(U=0;16>U;++U)Q[U]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=I.g[0],b=I.g[1],U=I.g[2];var D=I.g[3],T=_+(D^b&(U^D))+Q[0]+3614090360&4294967295;_=b+(T<<7&4294967295|T>>>25),T=D+(U^_&(b^U))+Q[1]+3905402710&4294967295,D=_+(T<<12&4294967295|T>>>20),T=U+(b^D&(_^b))+Q[2]+606105819&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(_^U&(D^_))+Q[3]+3250441966&4294967295,b=U+(T<<22&4294967295|T>>>10),T=_+(D^b&(U^D))+Q[4]+4118548399&4294967295,_=b+(T<<7&4294967295|T>>>25),T=D+(U^_&(b^U))+Q[5]+1200080426&4294967295,D=_+(T<<12&4294967295|T>>>20),T=U+(b^D&(_^b))+Q[6]+2821735955&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(_^U&(D^_))+Q[7]+4249261313&4294967295,b=U+(T<<22&4294967295|T>>>10),T=_+(D^b&(U^D))+Q[8]+1770035416&4294967295,_=b+(T<<7&4294967295|T>>>25),T=D+(U^_&(b^U))+Q[9]+2336552879&4294967295,D=_+(T<<12&4294967295|T>>>20),T=U+(b^D&(_^b))+Q[10]+4294925233&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(_^U&(D^_))+Q[11]+2304563134&4294967295,b=U+(T<<22&4294967295|T>>>10),T=_+(D^b&(U^D))+Q[12]+1804603682&4294967295,_=b+(T<<7&4294967295|T>>>25),T=D+(U^_&(b^U))+Q[13]+4254626195&4294967295,D=_+(T<<12&4294967295|T>>>20),T=U+(b^D&(_^b))+Q[14]+2792965006&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(_^U&(D^_))+Q[15]+1236535329&4294967295,b=U+(T<<22&4294967295|T>>>10),T=_+(U^D&(b^U))+Q[1]+4129170786&4294967295,_=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(_^b))+Q[6]+3225465664&4294967295,D=_+(T<<9&4294967295|T>>>23),T=U+(_^b&(D^_))+Q[11]+643717713&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^_&(U^D))+Q[0]+3921069994&4294967295,b=U+(T<<20&4294967295|T>>>12),T=_+(U^D&(b^U))+Q[5]+3593408605&4294967295,_=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(_^b))+Q[10]+38016083&4294967295,D=_+(T<<9&4294967295|T>>>23),T=U+(_^b&(D^_))+Q[15]+3634488961&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^_&(U^D))+Q[4]+3889429448&4294967295,b=U+(T<<20&4294967295|T>>>12),T=_+(U^D&(b^U))+Q[9]+568446438&4294967295,_=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(_^b))+Q[14]+3275163606&4294967295,D=_+(T<<9&4294967295|T>>>23),T=U+(_^b&(D^_))+Q[3]+4107603335&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^_&(U^D))+Q[8]+1163531501&4294967295,b=U+(T<<20&4294967295|T>>>12),T=_+(U^D&(b^U))+Q[13]+2850285829&4294967295,_=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(_^b))+Q[2]+4243563512&4294967295,D=_+(T<<9&4294967295|T>>>23),T=U+(_^b&(D^_))+Q[7]+1735328473&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^_&(U^D))+Q[12]+2368359562&4294967295,b=U+(T<<20&4294967295|T>>>12),T=_+(b^U^D)+Q[5]+4294588738&4294967295,_=b+(T<<4&4294967295|T>>>28),T=D+(_^b^U)+Q[8]+2272392833&4294967295,D=_+(T<<11&4294967295|T>>>21),T=U+(D^_^b)+Q[11]+1839030562&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^_)+Q[14]+4259657740&4294967295,b=U+(T<<23&4294967295|T>>>9),T=_+(b^U^D)+Q[1]+2763975236&4294967295,_=b+(T<<4&4294967295|T>>>28),T=D+(_^b^U)+Q[4]+1272893353&4294967295,D=_+(T<<11&4294967295|T>>>21),T=U+(D^_^b)+Q[7]+4139469664&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^_)+Q[10]+3200236656&4294967295,b=U+(T<<23&4294967295|T>>>9),T=_+(b^U^D)+Q[13]+681279174&4294967295,_=b+(T<<4&4294967295|T>>>28),T=D+(_^b^U)+Q[0]+3936430074&4294967295,D=_+(T<<11&4294967295|T>>>21),T=U+(D^_^b)+Q[3]+3572445317&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^_)+Q[6]+76029189&4294967295,b=U+(T<<23&4294967295|T>>>9),T=_+(b^U^D)+Q[9]+3654602809&4294967295,_=b+(T<<4&4294967295|T>>>28),T=D+(_^b^U)+Q[12]+3873151461&4294967295,D=_+(T<<11&4294967295|T>>>21),T=U+(D^_^b)+Q[15]+530742520&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^_)+Q[2]+3299628645&4294967295,b=U+(T<<23&4294967295|T>>>9),T=_+(U^(b|~D))+Q[0]+4096336452&4294967295,_=b+(T<<6&4294967295|T>>>26),T=D+(b^(_|~U))+Q[7]+1126891415&4294967295,D=_+(T<<10&4294967295|T>>>22),T=U+(_^(D|~b))+Q[14]+2878612391&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~_))+Q[5]+4237533241&4294967295,b=U+(T<<21&4294967295|T>>>11),T=_+(U^(b|~D))+Q[12]+1700485571&4294967295,_=b+(T<<6&4294967295|T>>>26),T=D+(b^(_|~U))+Q[3]+2399980690&4294967295,D=_+(T<<10&4294967295|T>>>22),T=U+(_^(D|~b))+Q[10]+4293915773&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~_))+Q[1]+2240044497&4294967295,b=U+(T<<21&4294967295|T>>>11),T=_+(U^(b|~D))+Q[8]+1873313359&4294967295,_=b+(T<<6&4294967295|T>>>26),T=D+(b^(_|~U))+Q[15]+4264355552&4294967295,D=_+(T<<10&4294967295|T>>>22),T=U+(_^(D|~b))+Q[6]+2734768916&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~_))+Q[13]+1309151649&4294967295,b=U+(T<<21&4294967295|T>>>11),T=_+(U^(b|~D))+Q[4]+4149444226&4294967295,_=b+(T<<6&4294967295|T>>>26),T=D+(b^(_|~U))+Q[11]+3174756917&4294967295,D=_+(T<<10&4294967295|T>>>22),T=U+(_^(D|~b))+Q[2]+718787259&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~_))+Q[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(U+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var b=_-this.blockSize,Q=this.B,U=this.h,D=0;D<_;){if(U==0)for(;D<=b;)A(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(Q[U++]=I.charCodeAt(D++),U==this.blockSize){A(this,Q),U=0;break}}else for(;D<_;)if(Q[U++]=I[D++],U==this.blockSize){A(this,Q),U=0;break}}this.h=U,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var b=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=b&255,b/=256;for(this.u(I),I=Array(16),_=b=0;4>_;++_)for(var Q=0;32>Q;Q+=8)I[b++]=this.g[_]>>>Q&255;return I};function s(I,_){var b=o;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=_(I)}function i(I,_){this.h=_;for(var b=[],Q=!0,U=I.length-1;0<=U;U--){var D=I[U]|0;Q&&D==_||(b[U]=D,Q=!1)}this.g=b}var o={};function a(I){return-128<=I&&128>I?s(I,function(_){return new i([_|0],0>_?-1:0)}):new i([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return C(c(-I));for(var _=[],b=1,Q=0;I>=b;Q++)_[Q]=I/b|0,b*=4294967296;return new i(_,0)}function d(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(d(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(_,8)),Q=h,U=0;U<I.length;U+=8){var D=Math.min(8,I.length-U),T=parseInt(I.substring(U,U+D),_);8>D?(D=c(Math.pow(_,D)),Q=Q.j(D).add(c(T))):(Q=Q.j(b),Q=Q.add(c(T)))}return Q}var h=a(0),f=a(1),w=a(16777216);t=i.prototype,t.m=function(){if(x(this))return-C(this).m();for(var I=0,_=1,b=0;b<this.g.length;b++){var Q=this.i(b);I+=(0<=Q?Q:4294967296+Q)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(m(this))return"0";if(x(this))return"-"+C(this).toString(I);for(var _=c(Math.pow(I,6)),b=this,Q="";;){var U=k(b,_).g;b=y(b,U.j(_));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=U,m(b))return D+Q;for(;6>D.length;)D="0"+D;Q=D+Q}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function m(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=y(this,I),x(I)?-1:m(I)?0:1};function C(I){for(var _=I.g.length,b=[],Q=0;Q<_;Q++)b[Q]=~I.g[Q];return new i(b,~I.h).add(f)}t.abs=function(){return x(this)?C(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],Q=0,U=0;U<=_;U++){var D=Q+(this.i(U)&65535)+(I.i(U)&65535),T=(D>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);Q=T>>>16,D&=65535,T&=65535,b[U]=T<<16|D}return new i(b,b[b.length-1]&-2147483648?-1:0)};function y(I,_){return I.add(C(_))}t.j=function(I){if(m(this)||m(I))return h;if(x(this))return x(I)?C(this).j(C(I)):C(C(this).j(I));if(x(I))return C(this.j(C(I)));if(0>this.l(w)&&0>I.l(w))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,b=[],Q=0;Q<2*_;Q++)b[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var U=0;U<I.g.length;U++){var D=this.i(Q)>>>16,T=this.i(Q)&65535,Fe=I.i(U)>>>16,et=I.i(U)&65535;b[2*Q+2*U]+=T*et,B(b,2*Q+2*U),b[2*Q+2*U+1]+=D*et,B(b,2*Q+2*U+1),b[2*Q+2*U+1]+=T*Fe,B(b,2*Q+2*U+1),b[2*Q+2*U+2]+=D*Fe,B(b,2*Q+2*U+2)}for(Q=0;Q<_;Q++)b[Q]=b[2*Q+1]<<16|b[2*Q];for(Q=_;Q<2*_;Q++)b[Q]=0;return new i(b,0)};function B(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function v(I,_){this.g=I,this.h=_}function k(I,_){if(m(_))throw Error("division by zero");if(m(I))return new v(h,h);if(x(I))return _=k(C(I),_),new v(C(_.g),C(_.h));if(x(_))return _=k(I,C(_)),new v(C(_.g),_.h);if(30<I.g.length){if(x(I)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var b=f,Q=_;0>=Q.l(I);)b=R(b),Q=R(Q);var U=N(b,1),D=N(Q,1);for(Q=N(Q,2),b=N(b,2);!m(Q);){var T=D.add(Q);0>=T.l(I)&&(U=U.add(b),D=T),Q=N(Q,1),b=N(b,1)}return _=y(I,U.j(_)),new v(U,_)}for(U=h;0<=I.l(_);){for(b=Math.max(1,Math.floor(I.m()/_.m())),Q=Math.ceil(Math.log(b)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),D=c(b),T=D.j(_);x(T)||0<T.l(I);)b-=Q,D=c(b),T=D.j(_);m(D)&&(D=f),U=U.add(D),I=y(I,T)}return new v(U,I)}t.A=function(I){return k(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],Q=0;Q<_;Q++)b[Q]=this.i(Q)&I.i(Q);return new i(b,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],Q=0;Q<_;Q++)b[Q]=this.i(Q)|I.i(Q);return new i(b,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),b=[],Q=0;Q<_;Q++)b[Q]=this.i(Q)^I.i(Q);return new i(b,this.h^I.h)};function R(I){for(var _=I.g.length+1,b=[],Q=0;Q<_;Q++)b[Q]=I.i(Q)<<1|I.i(Q-1)>>>31;return new i(b,I.h)}function N(I,_){var b=_>>5;_%=32;for(var Q=I.g.length-b,U=[],D=0;D<Q;D++)U[D]=0<_?I.i(D+b)>>>_|I.i(D+b+1)<<32-_:I.i(D+b);return new i(U,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HF=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Pi=i}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jF,Pl,KF,oh,v0,GF,zF,WF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gd=="object"&&gd];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function A(u,g){if(g)e:{var p=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in p))break e;p=p[M]}u=u[u.length-1],E=p[u],g=g(E),g!=E&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,E=!1,M={next:function(){if(!E&&p<u.length){var K=p++;return{value:g(K,u[K]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function m(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(E,M,K){for(var se=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)se[ot-2]=arguments[ot];return g.prototype[M].apply(E,se)}}function x(u){const g=u.length;if(0<g){const p=Array(g);for(let E=0;E<g;E++)p[E]=u[E];return p}return[]}function C(u,g){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(a(E)){const M=u.length||0,K=E.length||0;u.length=M+K;for(let se=0;se<K;se++)u[M+se]=E[se]}else u.push(E)}}class y{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function B(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var R=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function N(u,g,p){for(const E in u)g.call(p,u[E],E,u)}function I(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function _(u){const g={};for(const p in u)g[p]=u[p];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,g){let p,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(p in E)u[p]=E[p];for(let K=0;K<b.length;K++)p=b[K],Object.prototype.hasOwnProperty.call(E,p)&&(u[p]=E[p])}}function U(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function D(u){o.setTimeout(()=>{throw u},0)}function T(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Fe{constructor(){this.h=this.g=null}add(g,p){const E=et.get();E.set(g,p),this.h?this.h.next=E:this.g=E,this.h=E}}var et=new y(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,G=!1,F=new Fe,L=()=>{const u=o.Promise.resolve(void 0);Ie=()=>{u.then(H)}};var H=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){D(p)}var g=et;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}G=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,g),o.removeEventListener("test",p,g)}catch{}return u}();function pe(u,g){if(z.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(R){e:{try{k(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pe.aa.h.call(this)}}m(pe,z);var Ee={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),Re=0;function $e(u,g,p,E,M){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!E,this.ha=M,this.key=++Re,this.da=this.fa=!1}function Qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Le(u){this.src=u,this.g={},this.h=0}Le.prototype.add=function(u,g,p,E,M){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var se=Se(u,g,E,M);return-1<se?(g=u[se],p||(g.fa=!1)):(g=new $e(g,this.src,K,!!E,M),g.fa=p,u.push(g)),g};function Xe(u,g){var p=g.type;if(p in u.g){var E=u.g[p],M=Array.prototype.indexOf.call(E,g,void 0),K;(K=0<=M)&&Array.prototype.splice.call(E,M,1),K&&(Qe(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Se(u,g,p,E){for(var M=0;M<u.length;++M){var K=u[M];if(!K.da&&K.listener==g&&K.capture==!!p&&K.ha==E)return M}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Oe={};function Pt(u,g,p,E,M){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Pt(u,g[K],p,E,M);return null}return p=_e(p),u&&u[re]?u.K(g,p,c(E)?!!E.capture:!1,M):ut(u,g,p,!1,E,M)}function ut(u,g,p,E,M,K){if(!g)throw Error("Invalid event type");var se=c(M)?!!M.capture:!!M,ot=ue(u);if(ot||(u[ke]=ot=new Le(u)),p=ot.add(g,p,E,se,K),p.proxy)return p;if(E=en(),p.proxy=E,E.src=u,E.listener=p,u.addEventListener)fe||(M=se),M===void 0&&(M=!1),u.addEventListener(g.toString(),E,M);else if(u.attachEvent)u.attachEvent(W(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function en(){function u(p){return g.call(u.src,u.listener,p)}const g=ne;return u}function vn(u,g,p,E,M){if(Array.isArray(g))for(var K=0;K<g.length;K++)vn(u,g[K],p,E,M);else E=c(E)?!!E.capture:!!E,p=_e(p),u&&u[re]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],p=Se(K,p,E,M),-1<p&&(Qe(K[p]),Array.prototype.splice.call(K,p,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=ue(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Se(g,p,E,M)),(p=-1<u?g[u]:null)&&O(p))}function O(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[re])Xe(g.i,u);else{var p=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(p,E,u.capture):g.detachEvent?g.detachEvent(W(p),E):g.addListener&&g.removeListener&&g.removeListener(E),(p=ue(g))?(Xe(p,u),p.h==0&&(p.src=null,g[ke]=null)):Qe(u)}}}function W(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function ne(u,g){if(u.da)u=!0;else{g=new pe(g,this);var p=u.listener,E=u.ha||u.src;u.fa&&O(u),u=p.call(E,g)}return u}function ue(u){return u=u[ke],u instanceof Le?u:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(u){return typeof u=="function"?u:(u[be]||(u[be]=function(g){return u.handleEvent(g)}),u[be])}function Ae(){$.call(this),this.i=new Le(this),this.M=this,this.F=null}m(Ae,$),Ae.prototype[re]=!0,Ae.prototype.removeEventListener=function(u,g,p,E){vn(this,u,g,p,E)};function ge(u,g){var p,E=u.F;if(E)for(p=[];E;E=E.F)p.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new z(g,u);else if(g instanceof z)g.target=g.target||u;else{var M=g;g=new z(E,u),Q(g,M)}if(M=!0,p)for(var K=p.length-1;0<=K;K--){var se=g.g=p[K];M=de(se,E,!0,g)&&M}if(se=g.g=u,M=de(se,E,!0,g)&&M,M=de(se,E,!1,g)&&M,p)for(K=0;K<p.length;K++)se=g.g=p[K],M=de(se,E,!1,g)&&M}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],E=0;E<p.length;E++)Qe(p[E]);delete u.g[g],u.h--}}this.F=null},Ae.prototype.K=function(u,g,p,E){return this.i.add(String(u),g,!1,p,E)},Ae.prototype.L=function(u,g,p,E){return this.i.add(String(u),g,!0,p,E)};function de(u,g,p,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,K=0;K<g.length;++K){var se=g[K];if(se&&!se.da&&se.capture==p){var ot=se.listener,ln=se.ha||se.src;se.fa&&Xe(u.i,se),M=ot.call(ln,E)!==!1&&M}}return M&&!E.defaultPrevented}function xe(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Ge(u){u.g=xe(()=>{u.g=null,u.i&&(u.i=!1,Ge(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Dt extends ${constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(u){$.call(this),this.h=u,this.g={}}m(ze,$);var Ne=[];function pr(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&O(g)},u),u.g={}}ze.prototype.N=function(){ze.aa.N.call(this),pr(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mr=o.JSON.stringify,JA=o.JSON.parse,gA=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function xt(){}xt.prototype.h=null;function Sn(u){return u.h||(u.h=u.i())}function Gn(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){z.call(this,"d")}m(kn,z);function P(){z.call(this,"c")}m(P,z);var q={},ye=null;function ie(){return ye=ye||new Ae}q.La="serverreachability";function ce(u){z.call(this,q.La,u)}m(ce,z);function Te(u){const g=ie();ge(g,new ce(g))}q.STAT_EVENT="statevent";function nt(u,g){z.call(this,q.STAT_EVENT,u),this.stat=g}m(nt,z);function qe(u){const g=ie();ge(g,new nt(g,u))}q.Ma="timingevent";function $t(u,g){z.call(this,q.Ma,u),this.size=g}m($t,z);function kr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function tn(){this.g=!0}tn.prototype.xa=function(){this.g=!1};function qy(u,g,p,E,M,K){u.info(function(){if(u.g)if(K)for(var se="",ot=K.split("&"),ln=0;ln<ot.length;ln++){var Ye=ot[ln].split("=");if(1<Ye.length){var Bn=Ye[0];Ye=Ye[1];var xn=Bn.split("_");se=2<=xn.length&&xn[1]=="type"?se+(Bn+"="+Ye+"&"):se+(Bn+"=redacted&")}}else se=null;else se=K;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+g+`
`+p+`
`+se})}function Og(u,g,p,E,M,K,se){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+g+`
`+p+`
`+K+" "+se})}function XA(u,g,p,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+CS(u,p)+(E?" "+E:"")})}function pA(u,g){u.info(function(){return"TIMEOUT: "+g})}tn.prototype.info=function(){};function CS(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var E=p[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var K=M[0];if(K!="noop"&&K!="stop"&&K!="close")for(var se=1;se<M.length;se++)M[se]=""}}}}return mr(p)}catch{return g}}var Du={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mg;function Lu(){}m(Lu,xt),Lu.prototype.g=function(){return new XMLHttpRequest},Lu.prototype.i=function(){return{}},Mg=new Lu;function YA(u,g,p,E){this.j=u,this.i=g,this.l=p,this.R=E||1,this.U=new ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Yy={},Vg={};function Hg(u,g,p){u.L=1,u.v=Hu(mA(g)),u.m=p,u.P=!0,Zy(u,null)}function Zy(u,g){u.F=Date.now(),Ou(u),u.A=mA(u.v);var p=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),hB(p.i,"t",E),u.C=0,p=u.j.J,u.h=new Xy,u.g=QB(u.j,p?g:null,!u.m),0<u.O&&(u.M=new Dt(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ne[0]=M.toString()),M=Ne);for(var K=0;K<M.length;K++){var se=Pt(p,M[K],E||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Te(),qy(u.i,u.u,u.A,u.l,u.R,u.m)}YA.prototype.ca=function(u){u=u.target;const g=this.M;g&&wA(u)==3?g.j():this.Y(u)},YA.prototype.Y=function(u){try{if(u==this.g)e:{const xn=wA(this.g);var g=this.g.Ba();const po=this.g.Z();if(!(3>xn)&&(xn!=3||this.g&&(this.h.h||this.g.oa()||yB(this.g)))){this.J||xn!=4||g==7||(g==8||0>=po?Te(3):Te(2)),jg(this);var p=this.g.Z();this.X=p;t:if(eB(this)){var E=yB(this.g);u="";var M=E.length,K=wA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),tl(this);var se="";break t}this.h.i=new o.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(K&&g==M-1)});E.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=p==200,Og(this.i,this.u,this.A,this.l,this.R,xn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,ln=this.g;if((ot=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ot)){var Ye=ot;break t}}Ye=null}if(p=Ye)XA(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kg(this,p);else{this.o=!1,this.s=3,qe(12),ai(this),tl(this);break e}}if(this.P){p=!0;let Rr;for(;!this.J&&this.C<se.length;)if(Rr=IS(this,se),Rr==Vg){xn==4&&(this.s=4,qe(14),p=!1),XA(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Yy){this.s=4,qe(15),XA(this.i,this.l,se,"[Invalid Chunk]"),p=!1;break}else XA(this.i,this.l,Rr,null),Kg(this,Rr);if(eB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xn!=4||se.length!=0||this.h.h||(this.s=1,qe(16),p=!1),this.o=this.o&&p,!p)XA(this.i,this.l,se,"[Invalid Chunked Response]"),ai(this),tl(this);else if(0<se.length&&!this.W){this.W=!0;var Bn=this.j;Bn.g==this&&Bn.ba&&!Bn.M&&(Bn.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Jg(Bn),Bn.M=!0,qe(11))}}else XA(this.i,this.l,se,null),Kg(this,se);xn==4&&ai(this),this.o&&!this.J&&(xn==4?bB(this.j,this):(this.o=!1,Ou(this)))}else HS(this.g),p==400&&0<se.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),ai(this),tl(this)}}}catch{}finally{}};function eB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function IS(u,g){var p=u.C,E=g.indexOf(`
`,p);return E==-1?Vg:(p=Number(g.substring(p,E)),isNaN(p)?Yy:(E+=1,E+p>g.length?Vg:(g=g.slice(E,E+p),u.C=E+p,g)))}YA.prototype.cancel=function(){this.J=!0,ai(this)};function Ou(u){u.S=Date.now()+u.I,tB(u,u.I)}function tB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kr(f(u.ba,u),g)}function jg(u){u.B&&(o.clearTimeout(u.B),u.B=null)}YA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(pA(this.i,this.A),this.L!=2&&(Te(),qe(17)),ai(this),this.s=2,tl(this)):tB(this,this.S-u)};function tl(u){u.j.G==0||u.J||bB(u.j,u)}function ai(u){jg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,pr(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Kg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||Gg(p.h,u))){if(!u.K&&Gg(p.h,u)&&p.G==3){try{var E=p.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)$u(p),zu(p);else break e;qg(p),qe(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=kr(f(p.Za,p),6e3));if(1>=AB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ci(p,11)}else if((u.K||p.g==u)&&$u(p),!B(g))for(M=p.Da.g.parse(g),g=0;g<M.length;g++){let Ye=M[g];if(p.T=Ye[0],Ye=Ye[1],p.G==2)if(Ye[0]=="c"){p.K=Ye[1],p.ia=Ye[2];const Bn=Ye[3];Bn!=null&&(p.la=Bn,p.j.info("VER="+p.la));const xn=Ye[4];xn!=null&&(p.Aa=xn,p.j.info("SVER="+p.Aa));const po=Ye[5];po!=null&&typeof po=="number"&&0<po&&(E=1.5*po,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Rr=u.g;if(Rr){const Ju=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ju){var K=E.h;K.g||Ju.indexOf("spdy")==-1&&Ju.indexOf("quic")==-1&&Ju.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(zg(K,K.h),K.h=null))}if(E.D){const Xg=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xg&&(E.ya=Xg,dt(E.I,E.D,Xg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var se=u;if(E.qa=UB(E,E.J?E.ia:null,E.W),se.K){sB(E.h,se);var ot=se,ln=E.L;ln&&(ot.I=ln),ot.B&&(jg(ot),Ou(ot)),E.g=se}else IB(E);0<p.i.length&&Wu(p)}else Ye[0]!="stop"&&Ye[0]!="close"||ci(p,7);else p.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ci(p,7):$g(p):Ye[0]!="noop"&&p.l&&p.l.ta(Ye),p.v=0)}}Te(4)}catch{}}var ES=class{constructor(u,g){this.g=u,this.map=g}};function nB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AB(u){return u.h?1:u.g?u.g.size:0}function Gg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function zg(u,g){u.g?u.g.add(g):u.h=g}function sB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}nB.prototype.cancel=function(){if(this.i=iB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function iB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return x(u.i)}function bS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,E=0;E<p;E++)g.push(u[E]);return g}g=[],p=0;for(E in u)g[p++]=u[E];return g}function TS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const E in u)g[p++]=E;return g}}}function oB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=TS(u),E=bS(u),M=E.length,K=0;K<M;K++)g.call(void 0,E[K],p&&p[K],u)}var aB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FS(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var E=u[p].indexOf("="),M=null;if(0<=E){var K=u[p].substring(0,E);M=u[p].substring(E+1)}else K=u[p];g(K,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function li(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof li){this.h=u.h,Mu(this,u.j),this.o=u.o,this.g=u.g,Vu(this,u.s),this.l=u.l;var g=u.i,p=new Al;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),lB(this,p),this.m=u.m}else u&&(g=String(u).match(aB))?(this.h=!1,Mu(this,g[1]||"",!0),this.o=nl(g[2]||""),this.g=nl(g[3]||"",!0),Vu(this,g[4]),this.l=nl(g[5]||"",!0),lB(this,g[6]||"",!0),this.m=nl(g[7]||"")):(this.h=!1,this.i=new Al(null,this.h))}li.prototype.toString=function(){var u=[],g=this.j;g&&u.push(rl(g,cB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(rl(g,cB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(rl(p,p.charAt(0)=="/"?SS:QS,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",rl(p,RS)),u.join("")};function mA(u){return new li(u)}function Mu(u,g,p){u.j=p?nl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Vu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function lB(u,g,p){g instanceof Al?(u.i=g,NS(u.i,u.h)):(p||(g=rl(g,kS)),u.i=new Al(g,u.h))}function dt(u,g,p){u.i.set(g,p)}function Hu(u){return dt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function nl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function rl(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,US),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function US(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cB=/[#\/\?@]/g,QS=/[#\?:]/g,SS=/[#\?]/g,kS=/[#\?@]/g,RS=/#/g;function Al(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ZA(u){u.g||(u.g=new Map,u.h=0,u.i&&FS(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Al.prototype,t.add=function(u,g){ZA(this),this.i=null,u=fo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function uB(u,g){ZA(u),g=fo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function dB(u,g){return ZA(u),g=fo(u,g),u.g.has(g)}t.forEach=function(u,g){ZA(this),this.g.forEach(function(p,E){p.forEach(function(M){u.call(g,M,E,this)},this)},this)},t.na=function(){ZA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let E=0;E<g.length;E++){const M=u[E];for(let K=0;K<M.length;K++)p.push(g[E])}return p},t.V=function(u){ZA(this);let g=[];if(typeof u=="string")dB(this,u)&&(g=g.concat(this.g.get(fo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return ZA(this),this.i=null,u=fo(this,u),dB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function hB(u,g,p){uB(u,g),0<p.length&&(u.i=null,u.g.set(fo(u,g),x(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var E=g[p];const K=encodeURIComponent(String(E)),se=this.V(E);for(E=0;E<se.length;E++){var M=K;se[E]!==""&&(M+="="+encodeURIComponent(String(se[E]))),u.push(M)}}return this.i=u.join("&")};function fo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function NS(u,g){g&&!u.j&&(ZA(u),u.i=null,u.g.forEach(function(p,E){var M=E.toLowerCase();E!=M&&(uB(this,E),hB(this,M,p))},u)),u.j=g}function PS(u,g){const p=new tn;if(o.Image){const E=new Image;E.onload=w(es,p,"TestLoadImage: loaded",!0,g,E),E.onerror=w(es,p,"TestLoadImage: error",!1,g,E),E.onabort=w(es,p,"TestLoadImage: abort",!1,g,E),E.ontimeout=w(es,p,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function DS(u,g){const p=new tn,E=new AbortController,M=setTimeout(()=>{E.abort(),es(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(K=>{clearTimeout(M),K.ok?es(p,"TestPingServer: ok",!0,g):es(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),es(p,"TestPingServer: error",!1,g)})}function es(u,g,p,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(p)}catch{}}function LS(){this.g=new gA}function OS(u,g,p){const E=p||"";try{oB(u,function(M,K){let se=M;c(M)&&(se=mr(M)),g.push(E+K+"="+encodeURIComponent(se))})}catch(M){throw g.push(E+"type="+encodeURIComponent("_badmap")),M}}function ju(u){this.l=u.Ub||null,this.j=u.eb||!1}m(ju,xt),ju.prototype.g=function(){return new Ku(this.l,this.j)},ju.prototype.i=function(u){return function(){return u}}({});function Ku(u,g){Ae.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Ku,Ae),t=Ku.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,il(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,il(this)),this.g&&(this.readyState=3,il(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function fB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?sl(this):il(this),this.readyState==3&&fB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,sl(this))},t.Qa=function(u){this.g&&(this.response=u,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,il(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function il(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ku.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gB(u){let g="";return N(u,function(p,E){g+=E,g+=":",g+=p,g+=`\r
`}),g}function Wg(u,g,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=gB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):dt(u,g,p))}function Ft(u){Ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ft,Ae);var MS=/^https?$/i,VS=["POST","PUT"];t=Ft.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mg.g(),this.v=this.o?Sn(this.o):Sn(Mg),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){pB(this,K);return}if(u=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)p.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const K of E.keys())p.set(K,E.get(K));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(K=>K.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(VS,g,void 0))||E||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of p)this.g.setRequestHeader(K,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vB(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){pB(this,K)}};function pB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,mB(u),Gu(u)}function mB(u){u.A||(u.A=!0,ge(u,"complete"),ge(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ge(this,"complete"),ge(this,"abort"),Gu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gu(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wB(this):this.bb())},t.bb=function(){wB(this)};function wB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||wA(u)!=4||u.Z()!=2)){if(u.u&&wA(u)==4)xe(u.Ea,0,u);else if(ge(u,"readystatechange"),wA(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var E;if(E=se===0){var M=String(u.D).match(aB)[1]||null;!M&&o.self&&o.self.location&&(M=o.self.location.protocol.slice(0,-1)),E=!MS.test(M?M.toLowerCase():"")}p=E}if(p)ge(u,"complete"),ge(u,"success");else{u.m=6;try{var K=2<wA(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",mB(u)}}finally{Gu(u)}}}}function Gu(u,g){if(u.g){vB(u);const p=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ge(u,"ready");try{p.onreadystatechange=E}catch{}}}function vB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function wA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<wA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),JA(g)}};function yB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HS(u){const g={};u=(u.g&&2<=wA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(B(u[E]))continue;var p=U(u[E]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const K=g[M]||[];g[M]=K,K.push(p)}I(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function BB(u){this.Aa=0,this.i=[],this.j=new tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,u),this.cb=ol("retryDelaySeedMs",1e4,u),this.Wa=ol("forwardChannelMaxRetries",2,u),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new nB(u&&u.concurrentRequestLimit),this.Da=new LS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=BB.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,E){qe(0),this.W=u,this.H=g||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=UB(this,null,this.W),Wu(this)};function $g(u){if(xB(u),u.G==3){var g=u.U++,p=mA(u.I);if(dt(p,"SID",u.K),dt(p,"RID",g),dt(p,"TYPE","terminate"),al(u,p),g=new YA(u,u.j,g),g.L=2,g.v=Hu(mA(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=g.v,p=!0),p||(g.g=QB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ou(g)}FB(u)}function zu(u){u.g&&(Jg(u),u.g.cancel(),u.g=null)}function xB(u){zu(u),u.u&&(o.clearTimeout(u.u),u.u=null),$u(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function Wu(u){if(!rB(u.h)&&!u.s){u.s=!0;var g=u.Ga;Ie||L(),G||(Ie(),G=!0),F.add(g,u),u.B=0}}function jS(u,g){return AB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kr(f(u.Ga,u,g),TB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new YA(this,this.j,u);let K=this.o;if(this.S&&(K?(K=_(K),Q(K,this.S)):K=this.S),this.m!==null||this.O||(M.H=K,K=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=CB(this,M,g),p=mA(this.I),dt(p,"RID",u),dt(p,"CVER",22),this.D&&dt(p,"X-HTTP-Session-Id",this.D),al(this,p),K&&(this.O?g="headers="+encodeURIComponent(String(gB(K)))+"&"+g:this.m&&Wg(p,this.m,K)),zg(this.h,M),this.Ua&&dt(p,"TYPE","init"),this.P?(dt(p,"$req",g),dt(p,"SID","null"),M.T=!0,Hg(M,p,null)):Hg(M,p,g),this.G=2}}else this.G==3&&(u?_B(this,u):this.i.length==0||rB(this.h)||_B(this))};function _B(u,g){var p;g?p=g.l:p=u.U++;const E=mA(u.I);dt(E,"SID",u.K),dt(E,"RID",p),dt(E,"AID",u.T),al(u,E),u.m&&u.o&&Wg(E,u.m,u.o),p=new YA(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=CB(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),zg(u.h,p),Hg(p,E,g)}function al(u,g){u.H&&N(u.H,function(p,E){dt(g,E,p)}),u.l&&oB({},function(p,E){dt(g,E,p)})}function CB(u,g,p){p=Math.min(u.i.length,p);var E=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let K=-1;for(;;){const se=["count="+p];K==-1?0<p?(K=M[0].g,se.push("ofs="+K)):K=0:se.push("ofs="+K);let ot=!0;for(let ln=0;ln<p;ln++){let Ye=M[ln].g;const Bn=M[ln].map;if(Ye-=K,0>Ye)K=Math.max(0,M[ln].g-100),ot=!1;else try{OS(Bn,se,"req"+Ye+"_")}catch{E&&E(Bn)}}if(ot){E=se.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,E}function IB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Ie||L(),G||(Ie(),G=!0),F.add(g,u),u.v=0}}function qg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kr(f(u.Fa,u),TB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,EB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kr(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),zu(this),EB(this))};function Jg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function EB(u){u.g=new YA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=mA(u.qa);dt(g,"RID","rpc"),dt(g,"SID",u.K),dt(g,"AID",u.T),dt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&dt(g,"TO",u.ja),dt(g,"TYPE","xmlhttp"),al(u,g),u.m&&u.o&&Wg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Hu(mA(g)),p.m=null,p.P=!0,Zy(p,u)}t.Za=function(){this.C!=null&&(this.C=null,zu(this),qg(this),qe(19))};function $u(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function bB(u,g){var p=null;if(u.g==g){$u(u),Jg(u),u.g=null;var E=2}else if(Gg(u.h,g))p=g.D,sB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;E=ie(),ge(E,new $t(E,p)),Wu(u)}else IB(u);else if(M=g.s,M==3||M==0&&0<g.X||!(E==1&&jS(u,g)||E==2&&qg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),M){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function TB(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function ci(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),E=u.Xa;const M=!E;E=new li(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Mu(E,"https"),Hu(E),M?PS(E.toString(),p):DS(E.toString(),p)}else qe(2);u.G=0,u.l&&u.l.sa(g),FB(u),xB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function FB(u){if(u.G=0,u.ka=[],u.l){const g=iB(u.h);(g.length!=0||u.i.length!=0)&&(C(u.ka,g),C(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function UB(u,g,p){var E=p instanceof li?mA(p):new li(p);if(E.g!="")g&&(E.g=g+"."+E.g),Vu(E,E.s);else{var M=o.location;E=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var K=new li(null);E&&Mu(K,E),g&&(K.g=g),M&&Vu(K,M),p&&(K.l=p),E=K}return p=u.D,g=u.ya,p&&g&&dt(E,p,g),dt(E,"VER",u.la),al(u,E),E}function QB(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ft(new ju({eb:p})):new Ft(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SB(){}t=SB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qu(){}qu.prototype.g=function(u,g){return new rr(u,g)};function rr(u,g){Ae.call(this),this.g=new BB(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!B(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!B(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new go(this)}m(rr,Ae),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){$g(this.g)},rr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=mr(u),u=p);g.i.push(new ES(g.Ya++,u)),g.G==3&&Wu(g)},rr.prototype.N=function(){this.g.l=null,delete this.j,$g(this.g),delete this.g,rr.aa.N.call(this)};function kB(u){kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}m(kB,kn);function RB(){P.call(this),this.status=1}m(RB,P);function go(u){this.g=u}m(go,SB),go.prototype.ua=function(){ge(this.g,"a")},go.prototype.ta=function(u){ge(this.g,new kB(u))},go.prototype.sa=function(u){ge(this.g,new RB)},go.prototype.ra=function(){ge(this.g,"b")},qu.prototype.createWebChannel=qu.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,WF=function(){return new qu},zF=function(){return ie()},GF=q,v0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Du.NO_ERROR=0,Du.TIMEOUT=8,Du.HTTP_ERROR=6,oh=Du,Jy.COMPLETE="complete",KF=Jy,Gn.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Pl=Gn,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,jF=Ft}).apply(typeof gd<"u"?gd:typeof self<"u"?self:typeof window<"u"?window:{});const S_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Wf("@firebase/firestore");function Qo(){return Hs.logLevel}function yM(t){Hs.setLogLevel(t)}function Y(t,...e){if(Hs.logLevel<=Me.DEBUG){const n=e.map(Dv);Hs.debug(`Firestore (${za}): ${t}`,...n)}}function Vt(t,...e){if(Hs.logLevel<=Me.ERROR){const n=e.map(Dv);Hs.error(`Firestore (${za}): ${t}`,...n)}}function cA(t,...e){if(Hs.logLevel<=Me.WARN){const n=e.map(Dv);Hs.warn(`Firestore (${za}): ${t}`,...n)}}function Dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw Vt(e),new Error(e)}function Be(t,e){t||we()}function BM(t,e){t||we()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class _M{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CM{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let r=this.i;const A=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pn,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await A(this.currentUser)})},o=a=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new $F(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new sn(e)}}class IM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class EM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new IM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const A=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new bM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const A=FM(40);for(let s=0;s<A.length;++s)r.length<20&&A[s]<n&&(r+=e.charAt(A[s]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function _a(t,e,n){return t.length===e.length&&t.every((r,A)=>n(r,e[A]))}function JF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bt.fromMillis(Date.now())}static fromDate(e){return Bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Bt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Bt(0,0))}static max(){return new Ce(new Bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let A=0;A<r;A++){const s=e.get(A),i=n.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Gc{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(A=>A.length>0))}return new je(n)}static emptyPath(){return new je([])}}const UM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Gc{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return UM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",A=0;const s=()=>{if(r.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;A<e.length;){const o=e[A];if(o==="\\"){if(A+1===e.length)throw new X(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[A+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new X(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,A+=2}else o==="`"?(i=!i,A++):o!=="."||i?(r+=o,A++):(s(),A++)}if(s(),i)throw new X(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(je.fromString(e))}static fromName(e){return new oe(je.fromString(e).popFirst(5))}static empty(){return new oe(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,r,A){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=A}}function y0(t){return t.fields.find(e=>e.kind===2)}function mi(t){return t.fields.filter(e=>e.kind!==2)}tf.UNKNOWN_ID=-1;class ah{constructor(e,n){this.fieldPath=e,this.kind=n}}class zc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new zc(0,hr.min())}}function XF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,A=Ce.fromTimestamp(r===1e9?new Bt(n+1,0):new Bt(n,r));return new hr(A,oe.empty(),e)}function YF(t){return new hr(t.readTime,t.key,-1)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(Ce.min(),oe.empty(),-1)}static max(){return new hr(Ce.max(),oe.empty(),-1)}}function Lv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==ZF)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,A)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,A)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let A=0,s=0,i=!1;e.forEach(o=>{++A,o.next(()=>{++s,i&&s===A&&n()},a=>r(a))}),i=!0,s===A&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(A=>A?V.resolve(A):r());return n}static forEach(e,n){const r=[];return e.forEach((A,s)=>{r.push(n.call(this,A,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,A)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===s&&r(i)},d=>A(d))}})}static doWhile(e,n){return new V((r,A)=>{const s=()=>{e()===!0?n().next(()=>{s()},A):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new pn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ic(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const A=Ov(r.target.error);this.V.reject(new ic(e,A))}}static open(e,n,r,A){try{return new sg(n,e.transaction(A,r))}catch(s){throw new ic(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Y("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new SM(n)}}class iA{constructor(e,n,r){this.name=e,this.version=n,this.p=r,iA.S(Tt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Y("SimpleDb","Removing database:",e),wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pc())return!1;if(iA.v())return!0;const e=Tt(),n=iA.S(e),r=0<n&&n<10,A=t1(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Y("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;n(i)},A.onblocked=()=>{r(new ic(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?r(new X(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new X(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new ic(e,i))},A.onupgradeneeded=s=>{Y("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{Y("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,A){const s=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=sg.open(this.db,e,s?"readonly":"readwrite",r),a=A(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),V.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(Y("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function t1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class QM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wi(this.B.delete())}}class ic extends X{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function si(t){return t.name==="IndexedDbTransactionError"}class SM{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wi(r)}add(e){return Y("SimpleDb","ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Y("SimpleDb","DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return Y("SimpleDb","COUNT",this.store.name),wi(this.store.count())}U(e,n){const r=this.options(e,n),A=r.index?this.store.index(r.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(r.range);return new V((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}{const s=this.cursor(r),i=[];return this.W(s,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((A,s)=>{r.onerror=i=>{s(i.target.error)},r.onsuccess=i=>{A(i.target.result)}})}j(e,n){Y("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const A=this.cursor(r);return this.W(A,(s,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const A=this.cursor(r);return this.W(A,n)}Y(e){const n=this.cursor({});return new V((r,A)=>{n.onerror=s=>{const i=Ov(s.target.error);A(i)},n.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new V((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void A();const a=new QM(o),c=n(o.primaryKey,o.value,a);if(c instanceof V){const d=c.catch(h=>(a.done(),V.reject(h)));r.push(d)}a.isDone?A():a.K===null?o.continue():o.continue(a.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function wi(t){return new V((e,n)=>{t.onsuccess=r=>{const A=r.target.result;e(A)},t.onerror=r=>{const A=Ov(r.target.error);n(A)}})}let k_=!1;function Ov(t){const e=iA.S(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return k_||(k_=!0,setTimeout(()=>{throw r},0)),r}}return t}class kM{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Y("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Y("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){si(n)?Y("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ai(n)}await this.X(6e4)})}}class RM{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let A=n,s=!0;return V.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return Y("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(o=>{A-=o,r.add(i)});s=!1})).next(()=>n-A)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(A=>this.localStore.localDocuments.getNextDocuments(e,n,A,r).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(o=>(Y("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((A,s)=>{const i=YF(s);Lv(i,r)>0&&(r=i)}),new hr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xn.oe=-1;function Bu(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function n1(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=R_(e)),e=NM(t.get(n),e);return R_(e)}function NM(t,e){let n=e;const r=t.length;for(let A=0;A<r;A++){const s=t.charAt(A);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function R_(t){return t+""}function nA(t){const e=t.length;if(Be(e>=2),e===2)return Be(t.charAt(0)===""&&t.charAt(1)===""),je.emptyPath();const n=e-2,r=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>n)&&we(),t.charAt(i+1)){case"":const o=t.substring(s,i);let a;A.length===0?a=o:(A+=o,a=A,A=""),r.push(a);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:we()}s=i+2}return new je(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e){return[t,Mn(e)]}function r1(t,e,n){return[t,Mn(e),n]}const PM={},DM=["prefixPath","collectionGroup","readTime","documentId"],LM=["prefixPath","collectionGroup","documentId"],OM=["collectionGroup","readTime","prefixPath","documentId"],MM=["canonicalId","targetId"],VM=["targetId","path"],HM=["path","targetId"],jM=["collectionId","parent"],KM=["indexId","uid"],GM=["uid","sequenceNumber"],zM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WM=["indexId","uid","orderedDocumentKey"],$M=["userId","collectionPath","documentId"],qM=["userId","collectionPath","largestBatchId"],JM=["userId","collectionGroup","largestBatchId"],A1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XM=[...A1,"documentOverlays"],s1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],i1=s1,Mv=[...i1,"indexConfiguration","indexState","indexEntries"],YM=Mv,ZM=[...Mv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends e1{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Zt(t,e){const n=le(t);return iA.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const A=this.comparator(e,r.key);if(A===0)return n+r.left.size;A<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,n,r,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,A,s){this.key=e,this.value=n,this.color=r??dn.RED,this.left=A??dn.EMPTY,this.right=s??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,A,s){return new dn(e??this.key,n??this.value,r??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let A=this;const s=r(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,n,r),null):s===0?A.copy(null,n,null,null,null):A.copy(null,null,null,null,A.right.insert(e,n,r)),A.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,A=this;if(n(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,n),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),n(e,A.key)===0){if(A.right.isEmpty())return dn.EMPTY;r=A.right.min(),A=A.copy(r.key,r.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,n))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,A,s){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const A=r.getNext();if(this.comparator(A.key,e[1])>=0)return;n(A.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D_(this.data.getIterator())}getIteratorFrom(e){return new D_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class D_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new it(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new a1("Invalid base64 string: "+s):s}}(e);return new kt(n)}static fromUint8Array(e){const n=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let A=0;A<n.length;A++)r[A]=n.charCodeAt(A);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const tV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function LA(t){if(Be(!!t),typeof t=="string"){let e=0;const n=tV.exec(t);if(Be(!!n),n[1]){let A=n[1];A=(A+"000000000").substr(0,9),e=Number(A)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vv(t){const e=t.mapValue.fields.__previous_value__;return ig(e)?Vv(e):e}function $c(t){const e=LA(t.mapValue.fields.__local_write_time__.timestampValue);return new Bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,A,s,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ks{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ks("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ch={nullValue:"NULL_VALUE"};function Wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ig(t)?4:l1(t)?9007199254740991:og(t)?10:11:we()}function uA(t,e){if(t===e)return!0;const n=Wi(t);if(n!==Wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $c(t).isEqual($c(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=LA(A.timestampValue),o=LA(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return js(A.bytesValue).isEqual(js(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return mt(A.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(A.geoPointValue.longitude)===mt(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return mt(A.integerValue)===mt(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=mt(A.doubleValue),o=mt(s.doubleValue);return i===o?Wc(i)===Wc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],uA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},o=s.mapValue.fields||{};if(P_(i)!==P_(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!uA(i[a],o[a])))return!1;return!0}(t,e);default:return we()}}function qc(t,e){return(t.values||[]).find(n=>uA(n,e))!==void 0}function Gs(t,e){if(t===e)return 0;const n=Wi(t),r=Wi(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=mt(s.integerValue||s.doubleValue),a=mt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return L_(t.timestampValue,e.timestampValue);case 4:return L_($c(t),$c(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(s,i){const o=js(s),a=js(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=Pe(o[c],a[c]);if(d!==0)return d}return Pe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Pe(mt(s.latitude),mt(i.latitude));return o!==0?o:Pe(mt(s.longitude),mt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return O_(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,c,d;const h=s.fields||{},f=i.fields||{},w=(o=h.value)===null||o===void 0?void 0:o.arrayValue,m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=Pe(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:O_(w,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===ys.mapValue&&i===ys.mapValue)return 0;if(s===ys.mapValue)return 1;if(i===ys.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Pe(a[h],d[h]);if(f!==0)return f;const w=Gs(o[a[h]],c[d[h]]);if(w!==0)return w}return Pe(a.length,d.length)}(t.mapValue,e.mapValue);default:throw we()}}function L_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=LA(t),r=LA(e),A=Pe(n.seconds,r.seconds);return A!==0?A:Pe(n.nanos,r.nanos)}function O_(t,e){const n=t.values||[],r=e.values||[];for(let A=0;A<n.length&&A<r.length;++A){const s=Gs(n[A],r[A]);if(s)return s}return Pe(n.length,r.length)}function Ca(t){return x0(t)}function x0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=LA(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",A=!0;for(const s of n.values||[])A?A=!1:r+=",",r+=x0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let A="{",s=!0;for(const i of r)s?s=!1:A+=",",A+=`${i}:${x0(n.fields[i])}`;return A+"}"}(t.mapValue):we()}function $i(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _0(t){return!!t&&"integerValue"in t}function Jc(t){return!!t&&"arrayValue"in t}function M_(t){return!!t&&"nullValue"in t}function V_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uh(t){return!!t&&"mapValue"in t}function og(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function l1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const c1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rV(t){return"nullValue"in t?ch:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?$i(Ks.empty(),oe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?og(t)?c1:{mapValue:{}}:we()}function AV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?$i(Ks.empty(),oe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?c1:"mapValue"in t?og(t)?{mapValue:{}}:ys:we()}function H_(t,e){const n=Gs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function j_(t,e){const n=Gs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!uh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=vt.emptyPath(),r={},A=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,A),r={},A=[],n=o.popLast()}i?r[o.lastSegment()]=oc(i):A.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,A)}delete(e){const n=this.field(e.popLast());uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return uA(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let A=n.mapValue.fields[e.get(r)];uh(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=A),n=A}return n.mapValue.fields}applyChanges(e,n,r){ao(n,(A,s)=>e[A]=s);for(const A of r)delete e[A]}clone(){return new hn(oc(this.value))}}function u1(t){const e=[];return ao(t.fields,(n,r)=>{const A=new vt([n]);if(uh(r)){const s=u1(r.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,A,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=A,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new ft(e,0,Ce.min(),Ce.min(),Ce.min(),hn.empty(),0)}static newFoundDocument(e,n,r,A){return new ft(e,1,n,Ce.min(),r,A,0)}static newNoDocument(e,n){return new ft(e,2,n,Ce.min(),Ce.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,Ce.min(),Ce.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.position=e,this.inclusive=n}}function K_(t,e,n){let r=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?r=oe.comparator(oe.fromName(i.referenceValue),n.key):r=Gs(i,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function G_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!uA(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function sV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{}class Ke extends d1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iV(e,n,r):n==="array-contains"?new lV(e,r):n==="in"?new w1(e,r):n==="not-in"?new cV(e,r):n==="array-contains-any"?new uV(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oV(e,r):new aV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gs(n,this.value)):n!==null&&Wi(this.value)===Wi(n)&&this.matchesComparison(Gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rt extends d1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rt(e,n)}matches(e){return Ia(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ia(t){return t.op==="and"}function C0(t){return t.op==="or"}function Hv(t){return h1(t)&&Ia(t)}function h1(t){for(const e of t.filters)if(e instanceof rt)return!1;return!0}function I0(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(Hv(t))return t.filters.map(e=>I0(e)).join(",");{const e=t.filters.map(n=>I0(n)).join(",");return`${t.op}(${e})`}}function f1(t,e){return t instanceof Ke?function(r,A){return A instanceof Ke&&r.op===A.op&&r.field.isEqual(A.field)&&uA(r.value,A.value)}(t,e):t instanceof rt?function(r,A){return A instanceof rt&&r.op===A.op&&r.filters.length===A.filters.length?r.filters.reduce((s,i,o)=>s&&f1(i,A.filters[o]),!0):!1}(t,e):void we()}function g1(t,e){const n=t.filters.concat(e);return rt.create(n,t.op)}function p1(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Ca(n.value)}`}(t):t instanceof rt?function(n){return n.op.toString()+" {"+n.getFilters().map(p1).join(" ,")+"}"}(t):"Filter"}class iV extends Ke{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class oV extends Ke{constructor(e,n){super(e,"in",n),this.keys=m1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aV extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=m1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function m1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class lV extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jc(n)&&qc(n.arrayValue,this.value)}}class w1 extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qc(this.value.arrayValue,n)}}class cV extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qc(this.value.arrayValue,n)}}class uV extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n=null,r=[],A=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=A,this.limit=s,this.startAt=i,this.endAt=o,this.ue=null}}function E0(t,e=null,n=[],r=[],A=null,s=null,i=null){return new dV(t,e,n,r,A,s,i)}function qi(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>I0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ca(r)).join(",")),e.ue=n}return e.ue}function xu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!G_(t.startAt,e.startAt)&&G_(t.endAt,e.endAt)}function nf(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rf(t,e){return t.filters.filter(n=>n instanceof Ke&&n.field.isEqual(e))}function z_(t,e,n){let r=ch,A=!0;for(const s of rf(t,e)){let i=ch,o=!0;switch(s.op){case"<":case"<=":i=rV(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,o=!1;break;case"!=":case"not-in":i=ch}H_({value:r,inclusive:A},{value:i,inclusive:o})<0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];H_({value:r,inclusive:A},{value:i,inclusive:n.inclusive})<0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}function W_(t,e,n){let r=ys,A=!0;for(const s of rf(t,e)){let i=ys,o=!0;switch(s.op){case">=":case">":i=AV(s.value),o=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,o=!1;break;case"!=":case"not-in":i=ys}j_({value:r,inclusive:A},{value:i,inclusive:o})>0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];j_({value:r,inclusive:A},{value:i,inclusive:n.inclusive})>0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n=null,r=[],A=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=A,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function v1(t,e,n,r,A,s,i,o){return new WA(t,e,n,r,A,s,i,o)}function Wa(t){return new WA(t)}function $_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jv(t){return t.collectionGroup!==null}function aa(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new it(vt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xc(s,r))}),n.has(vt.keyField().canonicalString())||e.ce.push(new Xc(vt.keyField(),r))}return e.ce}function Vn(t){const e=le(t);return e.le||(e.le=hV(e,aa(t))),e.le}function hV(t,e){if(t.limitType==="F")return E0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new Xc(A.field,s)});const n=t.endAt?new zs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zs(t.startAt.position,t.startAt.inclusive):null;return E0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function b0(t,e){const n=t.filters.concat([e]);return new WA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Af(t,e,n){return new WA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _u(t,e){return xu(Vn(t),Vn(e))&&t.limitType===e.limitType}function y1(t){return`${qi(Vn(t))}|lt:${t.limitType}`}function So(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(A=>p1(A)).join(", ")}]`),Bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(A=>Ca(A)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(A=>Ca(A)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function Cu(t,e){return e.isFoundDocument()&&function(r,A){const s=A.key.path;return r.collectionGroup!==null?A.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,A){for(const s of aa(r))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,A){for(const s of r.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(r,A){return!(r.startAt&&!function(i,o,a){const c=K_(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,aa(r),A)||r.endAt&&!function(i,o,a){const c=K_(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,aa(r),A))}(t,e)}function B1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x1(t){return(e,n)=>{let r=!1;for(const A of aa(t)){const s=fV(A,e,n);if(s!==0)return s;r=r||A.field.isKeyField()}return 0}}function fV(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Gs(a,c):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[A,s]of r)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),A=this.inner[r];if(A===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,n]);A.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let A=0;A<r.length;A++)if(this.equalsFn(r[A][0],e))return r.length===1?delete this.inner[n]:r.splice(A,1),this.innerSize--,!0;return!1}forEach(e){ao(this.inner,(n,r)=>{for(const[A,s]of r)e(A,s)})}isEmpty(){return o1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=new ct(oe.comparator);function Zn(){return gV}const _1=new ct(oe.comparator);function Dl(...t){let e=_1;for(const n of t)e=e.insert(n.key,n);return e}function C1(t){let e=_1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rA(){return ac()}function I1(){return ac()}function ac(){return new ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const pV=new ct(oe.comparator),mV=new it(oe.comparator);function De(...t){let e=mV;for(const n of t)e=e.add(n);return e}const wV=new it(Pe);function Kv(){return wV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function E1(t){return{integerValue:""+t}}function b1(t,e){return n1(e)?E1(e):Gv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this._=void 0}}function vV(t,e,n){return t instanceof Ea?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&ig(s)&&(s=Vv(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Ji?F1(t,e):t instanceof Xi?U1(t,e):function(A,s){const i=T1(A,s),o=q_(i)+q_(A.Pe);return _0(i)&&_0(A.Pe)?E1(o):Gv(A.serializer,o)}(t,e)}function yV(t,e,n){return t instanceof Ji?F1(t,e):t instanceof Xi?U1(t,e):n}function T1(t,e){return t instanceof ba?function(r){return _0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ea extends ag{}class Ji extends ag{constructor(e){super(),this.elements=e}}function F1(t,e){const n=Q1(e);for(const r of t.elements)n.some(A=>uA(A,r))||n.push(r);return{arrayValue:{values:n}}}class Xi extends ag{constructor(e){super(),this.elements=e}}function U1(t,e){let n=Q1(e);for(const r of t.elements)n=n.filter(A=>!uA(A,r));return{arrayValue:{values:n}}}class ba extends ag{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function q_(t){return mt(t.integerValue||t.doubleValue)}function Q1(t){return Jc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.field=e,this.transform=n}}function BV(t,e){return t.field.isEqual(e.field)&&function(r,A){return r instanceof Ji&&A instanceof Ji||r instanceof Xi&&A instanceof Xi?_a(r.elements,A.elements,uA):r instanceof ba&&A instanceof ba?uA(r.Pe,A.Pe):r instanceof Ea&&A instanceof Ea}(t.transform,e.transform)}class xV{constructor(e,n){this.version=e,this.transformResults=n}}class yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yt}static exists(e){return new yt(void 0,e)}static updateTime(e){return new yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lg{}function S1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qa(t.key,yt.none()):new $a(t.key,t.data,yt.none());{const n=t.data,r=hn.empty();let A=new it(vt.comparator);for(let s of e.fields)if(!A.has(s)){let i=n.field(s);i===null&&s.length>1&&(s=s.popLast(),i=n.field(s)),i===null?r.delete(s):r.set(s,i),A=A.add(s)}return new $A(t.key,r,new Yn(A.toArray()),yt.none())}}function _V(t,e,n){t instanceof $a?function(A,s,i){const o=A.value.clone(),a=X_(A.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof $A?function(A,s,i){if(!dh(A.precondition,s))return void s.convertToUnknownDocument(i.version);const o=X_(A.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(k1(A)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof $a?function(s,i,o,a){if(!dh(s.precondition,i))return o;const c=s.value.clone(),d=Y_(s.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof $A?function(s,i,o,a){if(!dh(s.precondition,i))return o;const c=Y_(s.fieldTransforms,a,i),d=i.data;return d.setAll(k1(s)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,o){return dh(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function CV(t,e){let n=null;for(const r of t.fieldTransforms){const A=e.data.field(r.field),s=T1(r.transform,A||null);s!=null&&(n===null&&(n=hn.empty()),n.set(r.field,s))}return n||null}function J_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,A){return r===void 0&&A===void 0||!(!r||!A)&&_a(r,A,(s,i)=>BV(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $a extends lg{constructor(e,n,r,A=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class $A extends lg{constructor(e,n,r,A,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function k1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function X_(t,e,n){const r=new Map;Be(t.length===n.length);for(let A=0;A<n.length;A++){const s=t[A],i=s.transform,o=e.data.field(s.field);r.set(s.field,yV(i,o,n[A]))}return r}function Y_(t,e,n){const r=new Map;for(const A of t){const s=A.transform,i=n.data.field(A.field);r.set(A.field,vV(s,i,e))}return r}class qa extends lg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zv extends lg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,r,A){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=A}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&_V(s,e,r[A])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=I1();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=n.has(A.key)?null:o;const a=S1(i,o);a!==null&&r.set(A.key,a),i.isValidDocument()||i.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,r)=>J_(n,r))&&_a(this.baseMutations,e.baseMutations,(n,r)=>J_(n,r))}}class $v{constructor(e,n,r,A){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=A}static from(e,n,r){Be(e.mutations.length===r.length);let A=function(){return pV}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,r[i].version);return new $v(e,n,r,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,We;function R1(t){switch(t){default:return we();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function N1(t){if(t===void 0)return Vt("GRPC error has no .code"),j.UNKNOWN;switch(t){case Kt.OK:return j.OK;case Kt.CANCELLED:return j.CANCELLED;case Kt.UNKNOWN:return j.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return j.INTERNAL;case Kt.UNAVAILABLE:return j.UNAVAILABLE;case Kt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Kt.NOT_FOUND:return j.NOT_FOUND;case Kt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Kt.ABORTED:return j.ABORTED;case Kt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Kt.DATA_LOSS:return j.DATA_LOSS;default:return we()}}(We=Kt||(Kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new Pi([4294967295,4294967295],0);function Z_(t){const e=P1().encode(t),n=new HF;return n.update(e),new Uint8Array(n.digest())}function eC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([A,s],0)]}class Jv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ll(`Invalid padding: ${n}`);if(r<0)throw new Ll(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pi.fromNumber(this.Ie)}Ee(e,n,r){let A=e.add(n.multiply(Pi.fromNumber(r)));return A.compare(EV)===1&&(A=new Pi([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Z_(e),[r,A]=eC(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);if(!this.de(i))return!1}return!0}static create(e,n,r){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Jv(s,A,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=Z_(e),[r,A]=eC(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,A,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const A=new Map;return A.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eu(Ce.min(),A,new ct(Pe),Zn(),De())}}class bu{constructor(e,n,r,A,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bu(r,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,A){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=A}}class D1{constructor(e,n){this.targetId=e,this.me=n}}class L1{constructor(e,n,r=kt.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=A}}class tC{constructor(){this.fe=0,this.ge=rC(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),n=De(),r=De();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:n=n.add(A);break;case 1:r=r.add(A);break;default:we()}}),new bu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=nC(),this.Qe=new ct(Pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,A)=>{this.ze(A)&&n(A)})}He(e){const n=e.targetId,r=e.me.count,A=this.Je(n);if(A){const s=A.target;if(nf(s))if(r===0){const i=new oe(s.path);this.Ue(n,i,ft.newNoDocument(i,Ce.min()))}else Be(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:A=0},hashCount:s=0}=n;let i,o;try{i=js(r).toUint8Array()}catch(a){if(a instanceof a1)return cA("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Jv(i,A,s)}catch(a){return cA(a instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let A=0;return r.forEach(s=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),A++)}),A}rt(e){const n=new Map;this.Be.forEach((s,i)=>{const o=this.Je(i);if(o){if(s.current&&nf(o.target)){const a=new oe(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,ft.newNoDocument(a,e))}s.be&&(n.set(i,s.ve()),s.Ce())}});let r=De();this.qe.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new Eu(e,n,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=nC(),this.Qe=new ct(Pe),A}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,n)?A.Fe(n,1):A.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(Pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nC(){return new ct(oe.comparator)}function rC(){return new ct(oe.comparator)}const TV={asc:"ASCENDING",desc:"DESCENDING"},FV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UV={and:"AND",or:"OR"};class QV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function T0(t,e){return t.useProto3Json||Bu(e)?e:{value:e}}function Ta(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SV(t,e){return Ta(t,e.toTimestamp())}function Ht(t){return Be(!!t),Ce.fromTimestamp(function(n){const r=LA(n);return new Bt(r.seconds,r.nanos)}(t))}function Xv(t,e){return F0(t,e).canonicalString()}function F0(t,e){const n=function(A){return new je(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?n:n.child(e)}function M1(t){const e=je.fromString(t);return Be(J1(e)),e}function Yc(t,e){return Xv(t.databaseId,e.path)}function oA(t,e){const n=M1(e);if(n.get(1)!==t.databaseId.projectId)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(j1(n))}function V1(t,e){return Xv(t.databaseId,e)}function H1(t){const e=M1(t);return e.length===4?je.emptyPath():j1(e)}function U0(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function j1(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AC(t,e,n){return{name:Yc(t,e),fields:n.value.mapValue.fields}}function K1(t,e,n){const r=oA(t,e.name),A=Ht(e.updateTime),s=e.createTime?Ht(e.createTime):Ce.min(),i=new hn({mapValue:{fields:e.fields}}),o=ft.newFoundDocument(r,A,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function kV(t,e){return"found"in e?function(r,A){Be(!!A.found),A.found.name,A.found.updateTime;const s=oA(r,A.found.name),i=Ht(A.found.updateTime),o=A.found.createTime?Ht(A.found.createTime):Ce.min(),a=new hn({mapValue:{fields:A.found.fields}});return ft.newFoundDocument(s,i,o,a)}(t,e):"missing"in e?function(r,A){Be(!!A.missing),Be(!!A.readTime);const s=oA(r,A.missing),i=Ht(A.readTime);return ft.newNoDocument(s,i)}(t,e):we()}function RV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Be(d===void 0||typeof d=="string"),kt.fromBase64String(d||"")):(Be(d===void 0||d instanceof Buffer||d instanceof Uint8Array),kt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?j.UNKNOWN:N1(c.code);return new X(d,c.message||"")}(i);n=new L1(r,A,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const A=oA(t,r.document.name),s=Ht(r.document.updateTime),i=r.document.createTime?Ht(r.document.createTime):Ce.min(),o=new hn({mapValue:{fields:r.document.fields}}),a=ft.newFoundDocument(A,s,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new hh(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const A=oA(t,r.document),s=r.readTime?Ht(r.readTime):Ce.min(),i=ft.newNoDocument(A,s),o=r.removedTargetIds||[];n=new hh([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const A=oA(t,r.document),s=r.removedTargetIds||[];n=new hh([],s,A,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:A=0,unchangedNames:s}=r,i=new IV(A,s),o=r.targetId;n=new D1(o,i)}}return n}function Zc(t,e){let n;if(e instanceof $a)n={update:AC(t,e.key,e.value)};else if(e instanceof qa)n={delete:Yc(t,e.key)};else if(e instanceof $A)n={update:AC(t,e.key,e.data),updateMask:MV(e.fieldMask)};else{if(!(e instanceof zv))return we();n={verify:Yc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Ea)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ji)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ba)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:SV(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we()}(t,e.precondition)),n}function Q0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?yt.updateTime(Ht(s.updateTime)):s.exists!==void 0?yt.exists(s.exists):yt.none()}(e.currentDocument):yt.none(),r=e.updateTransforms?e.updateTransforms.map(A=>function(i,o){let a=null;if("setToServerValue"in o)Be(o.setToServerValue==="REQUEST_TIME"),a=new Ea;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new Ji(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Xi(d)}else"increment"in o?a=new ba(i,o.increment):we();const c=vt.fromServerFormat(o.fieldPath);return new Iu(c,a)}(t,A)):[];if(e.update){e.update.name;const A=oA(t,e.update.name),s=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new Yn(c.map(d=>vt.fromServerFormat(d)))}(e.updateMask);return new $A(A,s,i,n,r)}return new $a(A,s,n,r)}if(e.delete){const A=oA(t,e.delete);return new qa(A,n)}if(e.verify){const A=oA(t,e.verify);return new zv(A,n)}return we()}function NV(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(A,s){let i=A.updateTime?Ht(A.updateTime):Ht(s);return i.isEqual(Ce.min())&&(i=Ht(s)),new xV(i,A.transformResults||[])}(n,e))):[]}function G1(t,e){return{documents:[V1(t,e.path)]}}function z1(t,e){const n={structuredQuery:{}},r=e.path;let A;e.collectionGroup!==null?(A=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=V1(t,A);const s=function(c){if(c.length!==0)return q1(rt.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:ko(f.field),direction:DV(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=T0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:A}}function W1(t){let e=H1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let A=null;if(r>0){Be(r===1);const d=n.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=$1(h);return f instanceof rt&&Hv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(m){return new Xc(Ro(m.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,Bu(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,w=h.values||[];return new zs(w,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,w=h.values||[];return new zs(w,f)}(n.endAt)),v1(e,A,i,s,o,"F",a,c)}function PV(t,e){const n=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ro(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const A=Ro(n.unaryFilter.field);return Ke.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ro(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ro(n.unaryFilter.field);return Ke.create(i,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Ro(n.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rt.create(n.compositeFilter.filters.map(r=>$1(r)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function DV(t){return TV[t]}function LV(t){return FV[t]}function OV(t){return UV[t]}function ko(t){return{fieldPath:t.canonicalString()}}function Ro(t){return vt.fromServerFormat(t.fieldPath)}function q1(t){return t instanceof Ke?function(n){if(n.op==="=="){if(V_(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(M_(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V_(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(M_(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:LV(n.op),value:n.value}}}(t):t instanceof rt?function(n){const r=n.getFilters().map(A=>q1(A));return r.length===1?r[0]:{compositeFilter:{op:OV(n.op),filters:r}}}(t):we()}function MV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function J1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r,A,s=Ce.min(),i=Ce.min(),o=kt.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new bA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bA(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.ct=e}}function VV(t,e){let n;if(e.document)n=K1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),A=Zi(e.noDocument.readTime);n=ft.newNoDocument(r,A),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we();{const r=oe.fromSegments(e.unknownDocument.path),A=Zi(e.unknownDocument.version);n=ft.newUnknownDocument(r,A)}}return e.readTime&&n.setReadTime(function(A){const s=new Bt(A[0],A[1]);return Ce.fromTimestamp(s)}(e.readTime)),n}function sC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:Yc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:Ta(s,i.version.toTimestamp()),createTime:Ta(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Yi(e.version)};else{if(!e.isUnknownDocument())return we();r.unknownDocument={path:n.path.toArray(),version:Yi(e.version)}}return r}function sf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(t){const e=new Bt(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function vi(t,e){const n=(e.baseMutations||[]).map(s=>Q0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Q0(t.ct,s)),A=Bt.fromMillis(e.localWriteTimeMs);return new Wv(e.batchId,A,n,r)}function Ol(t){const e=Zi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Zi(t.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Be(s.documents.length===1),Vn(Wa(H1(s.documents[0])))}(t.query):function(s){return Vn(W1(s))}(t.query),new bA(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,kt.fromBase64String(t.resumeToken))}function Y1(t,e){const n=Yi(e.snapshotVersion),r=Yi(e.lastLimboFreeSnapshotVersion);let A;A=nf(e.target)?G1(t.ct,e.target):z1(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qi(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:A}}function Yv(t){const e=W1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Af(e,e.limit,"L"):e}function Np(t,e){return new qv(e.largestBatchId,Q0(t.ct,e.overlayMutation))}function iC(t,e){const n=e.path.lastSegment();return[t,Mn(e.path.popLast()),n]}function oC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Yi(r.readTime),documentKey:Mn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{getBundleMetadata(e,n){return aC(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Zi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return aC(e).put(function(A){return{bundleId:A.id,createTime:Yi(Ht(A.createTime)),version:A.version}}(n))}getNamedQuery(e,n){return lC(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Yv(s.bundledQuery),readTime:Zi(s.readTime)}}(r)})}saveNamedQuery(e,n){return lC(e).put(function(A){return{name:A.name,readTime:Yi(Ht(A.readTime)),bundledQuery:A.bundledQuery}}(n))}}function aC(t){return Zt(t,"bundles")}function lC(t){return Zt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new cg(e,r)}getOverlay(e,n){return yl(e).get(iC(this.userId,n)).next(r=>r?Np(this.serializer,r):null)}getOverlays(e,n){const r=rA();return V.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){const A=[];return r.forEach((s,i)=>{const o=new qv(n,i);A.push(this.ht(e,o))}),V.waitFor(A)}removeOverlaysForBatchId(e,n,r){const A=new Set;n.forEach(i=>A.add(Mn(i.getCollectionPath())));const s=[];return A.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);s.push(yl(e).j("collectionPathOverlayIndex",o))}),V.waitFor(s)}getOverlaysForCollection(e,n,r){const A=rA(),s=Mn(n),i=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return yl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=Np(this.serializer,a);A.set(c.getKey(),c)}return A})}getOverlaysForCollectionGroup(e,n,r,A){const s=rA();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return yl(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=Np(this.serializer,c);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return yl(e).put(function(A,s,i){const[o,a,c]=iC(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Zc(A.ct,i.mutation)}}(this.serializer,this.userId,n))}}function yl(t){return Zt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{Pt(e){return Zt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?kt.fromUint8Array(r):kt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Wc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=LA(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(js(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?l1(e)?this.dt(n,Number.MAX_SAFE_INTEGER):og(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):we()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const A of Object.keys(r))this.Vt(A,n),this.Tt(r[A],n)}wt(e,n){var r,A;const s=e.fields||{};this.dt(n,53);const i="value",o=((A=(r=s[i].arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.length)||0;this.dt(n,15),n.At(mt(o)),this.Vt(i,n),this.Tt(s[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const A of r)this.Tt(A,n)}yt(e,n){this.dt(n,37),oe.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}yi.vt=new yi;function KV(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function cC(t){const e=64-function(r){let A=0;for(let s=0;s<8;++s){const i=KV(255&r[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class GV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const A=n.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const A=n.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const n=this.qt(e),r=cC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=255&n[A]}Kt(e){const n=this.qt(e),r=cC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=~(255&n[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let A=1;A<n.length;++A)n[A]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const A=new Uint8Array(r);A.set(this.buffer),this.buffer=A}}class zV{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class WV{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Bl{constructor(){this.jt=new GV,this.Ht=new zV(this.jt),this.Jt=new WV(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r,A){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=A}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Bi(this.indexId,this.documentKey,this.arrayValue,r)}}function As(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=uC(t.arrayValue,e.arrayValue),n!==0?n:(n=uC(t.directionalValue,e.directionalValue),n!==0?n:oe.comparator(t.documentKey,e.documentKey)))}function uC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.Xt=new it((n,r)=>vt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Be(e.collectionGroup===this.collectionId),this.nn)return!1;const n=y0(e);if(n!==void 0&&!this.sn(n))return!1;const r=mi(e);let A=new Set,s=0,i=0;for(;s<r.length&&this.sn(r[s]);++s)A=A.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!A.has(o.field.canonicalString())){const a=r[s];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++s}for(;s<r.length;++s){const o=r[s];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new it(vt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ah(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ah(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ah(r.field,r.dir==="asc"?0:1)));return new tf(tf.UNKNOWN_ID,this.collectionId,n,zc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){var e,n;if(Be(t instanceof Ke||t instanceof rt),t instanceof Ke){if(t instanceof w1){const A=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ke.create(t.field,"==",s)))||[];return rt.create(A,"or")}return t}const r=t.filters.map(A=>Z1(A));return rt.create(r,t.op)}function $V(t){if(t.getFilters().length===0)return[];const e=R0(Z1(t));return Be(eU(e)),S0(e)||k0(e)?[e]:e.getFilters()}function S0(t){return t instanceof Ke}function k0(t){return t instanceof rt&&Hv(t)}function eU(t){return S0(t)||k0(t)||function(n){if(n instanceof rt&&C0(n)){for(const r of n.getFilters())if(!S0(r)&&!k0(r))return!1;return!0}return!1}(t)}function R0(t){if(Be(t instanceof Ke||t instanceof rt),t instanceof Ke)return t;if(t.filters.length===1)return R0(t.filters[0]);const e=t.filters.map(r=>R0(r));let n=rt.create(e,t.op);return n=of(n),eU(n)?n:(Be(n instanceof rt),Be(Ia(n)),Be(n.filters.length>1),n.filters.reduce((r,A)=>Zv(r,A)))}function Zv(t,e){let n;return Be(t instanceof Ke||t instanceof rt),Be(e instanceof Ke||e instanceof rt),n=t instanceof Ke?e instanceof Ke?function(A,s){return rt.create([A,s],"and")}(t,e):hC(t,e):e instanceof Ke?hC(e,t):function(A,s){if(Be(A.filters.length>0&&s.filters.length>0),Ia(A)&&Ia(s))return g1(A,s.getFilters());const i=C0(A)?A:s,o=C0(A)?s:A,a=i.filters.map(c=>Zv(c,o));return rt.create(a,"or")}(t,e),of(n)}function hC(t,e){if(Ia(e))return g1(e,t.getFilters());{const n=e.filters.map(r=>Zv(t,r));return rt.create(n,"or")}}function of(t){if(Be(t instanceof Ke||t instanceof rt),t instanceof Ke)return t;const e=t.getFilters();if(e.length===1)return of(e[0]);if(h1(t))return t;const n=e.map(A=>of(A)),r=[];return n.forEach(A=>{A instanceof Ke?r.push(A):A instanceof rt&&(A.op===t.op?r.push(...A.filters):r.push(A))}),r.length===1?r[0]:rt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.un=new ey}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(hr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class ey{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n]||new it(je.comparator),s=!A.has(r);return this.index[n]=A.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n];return A&&A.has(r)}getEntries(e){return(this.index[e]||new it(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Uint8Array(0);class JV{constructor(e,n){this.databaseId=n,this.cn=new ey,this.ln=new ii(r=>qi(r),(r,A)=>xu(r,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),A=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Mn(A)};return fC(e).put(s)}return V.resolve()}getCollectionParents(e,n){const r=[],A=IDBKeyRange.bound([n,""],[JF(n),""],!1,!0);return fC(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==n)break;r.push(nA(i.parent))}return r})}addFieldIndex(e,n){const r=xl(e),A=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete A.indexId;const s=r.add(A);if(n.indexState){const i=xo(e);return s.next(o=>{i.put(oC(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=xl(e),A=xo(e),s=Bo(e);return r.delete(n.indexId).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xl(e),r=Bo(e),A=xo(e);return n.j().next(()=>r.j()).next(()=>A.j())}createTargetIndexes(e,n){return V.forEach(this.hn(n),r=>this.getIndexType(e,r).next(A=>{if(A===0||A===1){const s=new dC(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Bo(e);let A=!0;const s=new Map;return V.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{A&&(A=!!o),s.set(i,o)})).next(()=>{if(A){let i=De();const o=[];return V.forEach(s,(a,c)=>{Y("IndexedDbIndexManager",`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(a)} to execute ${qi(n)}`);const d=function(v,k){const R=y0(k);if(R===void 0)return null;for(const N of rf(v,R.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(v,k){const R=new Map;for(const N of mi(k))for(const I of rf(v,N.fieldPath))switch(I.op){case"==":case"in":R.set(N.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return R.set(N.fieldPath.canonicalString(),I.value),Array.from(R.values())}return null}(c,a),f=function(v,k){const R=[];let N=!0;for(const I of mi(k)){const _=I.kind===0?z_(v,I.fieldPath,v.startAt):W_(v,I.fieldPath,v.startAt);R.push(_.value),N&&(N=_.inclusive)}return new zs(R,N)}(c,a),w=function(v,k){const R=[];let N=!0;for(const I of mi(k)){const _=I.kind===0?W_(v,I.fieldPath,v.endAt):z_(v,I.fieldPath,v.endAt);R.push(_.value),N&&(N=_.inclusive)}return new zs(R,N)}(c,a),m=this.In(a,c,f),x=this.In(a,c,w),C=this.Tn(a,c,h),y=this.En(a.indexId,d,m,f.inclusive,x,w.inclusive,C);return V.forEach(y,B=>r.G(B,n.limit).next(v=>{v.forEach(k=>{const R=oe.fromSegments(k.documentKey);i.has(R)||(i=i.add(R),o.push(R))})}))}).next(()=>o)}return V.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=$V(rt.create(e.filters,"and")).map(r=>E0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,A,s,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,s.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):md,w=this.An(e,f,r[h%c],A),m=this.Rn(e,f,s[h%c],i),x=o.map(C=>this.An(e,f,C,!0));d.push(...this.createRange(w,m,x))}return d}An(e,n,r,A){const s=new Bi(e,oe.empty(),n,r);return A?s:s.Zt()}Rn(e,n,r,A){const s=new Bi(e,oe.empty(),n,r);return A?s.Zt():s}Pn(e,n){const r=new dC(n),A=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const o of s)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const A=this.hn(n);return V.forEach(A,s=>this.Pn(e,s).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new it(vt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&A.length>1&&r===2?1:r)}Vn(e,n){const r=new Bl;for(const A of mi(e)){const s=n.data.field(A.fieldPath);if(s==null)return null;const i=r.Yt(A.kind);yi.vt.It(s,i)}return r.zt()}dn(e){const n=new Bl;return yi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Bl;return yi.vt.It($i(this.databaseId,n),r.Yt(function(s){const i=mi(s);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let A=[];A.push(new Bl);let s=0;for(const i of mi(e)){const o=r[s++];for(const a of A)if(this.fn(n,i.fieldPath)&&Jc(o))A=this.gn(A,i,o);else{const c=a.Yt(i.kind);yi.vt.It(o,c)}}return this.pn(A)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const A=[...e],s=[];for(const i of r.arrayValue.values||[])for(const o of A){const a=new Bl;a.seed(o.zt()),yi.vt.It(i,a.Yt(n.kind)),s.push(a)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Ke&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xl(e),A=xo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const i=[];return V.forEach(s,o=>A.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new zc(h.sequenceNumber,new hr(Zi(h.readTime),new oe(nA(h.documentKey)),h.largestBatchId)):zc.empty(),w=d.fields.map(([m,x])=>new ah(vt.fromServerFormat(m),x));return new tf(d.indexId,d.collectionGroup,w,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,A)=>{const s=r.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Pe(r.collectionGroup,A.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const A=xl(e),s=xo(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>V.forEach(o,a=>s.put(oC(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(A,s)=>{const i=r.get(A.collectionGroup);return(i?V.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(o=>(r.set(A.collectionGroup,o),V.forEach(o,a=>this.wn(e,A,a).next(c=>{const d=this.Sn(s,a);return c.isEqual(d)?V.resolve():this.bn(e,s,a,c,d)}))))})}Dn(e,n,r,A){return Bo(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,A){return Bo(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const A=Bo(e);let s=new it(As);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{s=s.add(new Bi(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,n){let r=new it(As);const A=this.Vn(n,e);if(A==null)return r;const s=y0(n);if(s!=null){const i=e.data.field(s.fieldPath);if(Jc(i))for(const o of i.arrayValue.values||[])r=r.add(new Bi(n.indexId,e.key,this.dn(o),A))}else r=r.add(new Bi(n.indexId,e.key,md,A));return r}bn(e,n,r,A,s){Y("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const w=a.getIterator(),m=c.getIterator();let x=yo(w),C=yo(m);for(;x||C;){let y=!1,B=!1;if(x&&C){const v=d(x,C);v<0?B=!0:v>0&&(y=!0)}else x!=null?B=!0:y=!0;y?(h(C),C=yo(m)):B?(f(x),x=yo(w)):(x=yo(w),C=yo(m))}}(A,s,As,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),V.waitFor(i)}yn(e){let n=1;return xo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,A,s)=>{s.done(),n=A.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>As(i,o)).filter((i,o,a)=>!o||As(i,a[o-1])!==0);const A=[];A.push(e);for(const i of r){const o=As(i,e),a=As(i,n);if(o===0)A[0]=e.Zt();else if(o>0&&a<0)A.push(i),A.push(i.Zt());else if(a>0)break}A.push(n);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const o=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,md,[]],a=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,md,[]];s.push(IDBKeyRange.bound(o,a))}return s}Cn(e,n){return As(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gC)}getMinOffset(e,n){return V.mapArray(this.hn(n),r=>this.Pn(e,r).next(A=>A||we())).next(gC)}}function fC(t){return Zt(t,"collectionParents")}function Bo(t){return Zt(t,"indexEntries")}function xl(t){return Zt(t,"indexConfiguration")}function xo(t){return Zt(t,"indexState")}function gC(t){Be(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const A=t[r].indexState.offset;Lv(A,e)<0&&(e=A),n<A.largestBatchId&&(n=A.largestBatchId)}return new hr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t,e,n){const r=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));s.push(a.next(()=>{Be(o===1)}));const c=[];for(const d of n.mutations){const h=r1(e,d.key.path,n.batchId);s.push(A.delete(h)),c.push(d.key)}return V.waitFor(s).next(()=>c)}function af(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(41943040,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);class ug{constructor(e,n,r,A){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=A,this.Fn={}}static lt(e,n,r,A){Be(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new ug(s,n,r,A)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).J({index:"userMutationsIndex",range:r},(A,s,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,A){const s=No(e),i=ss(e);return i.add({}).next(o=>{Be(typeof o=="number");const a=new Wv(o,n,r,A),c=function(w,m,x){const C=x.baseMutations.map(B=>Zc(w.ct,B)),y=x.mutations.map(B=>Zc(w.ct,B));return{userId:m,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:C,mutations:y}}(this.serializer,this.userId,a),d=[];let h=new it((f,w)=>Pe(f.canonicalString(),w.canonicalString()));for(const f of A){const w=r1(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(s.put(w,PM))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),V.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return ss(e).get(n).next(r=>r?(Be(r.userId===this.userId),vi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?V.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const A=r.keys();return this.Fn[n]=A,A}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ss(e).J({index:"userMutationsIndex",range:A},(i,o,a)=>{o.userId===this.userId&&(Be(o.batchId>=r),s=vi(this.serializer,o)),a.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ss(e).J({index:"userMutationsIndex",range:n,reverse:!0},(A,s,i)=>{r=s.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).U("userMutationsIndex",n).next(r=>r.map(A=>vi(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lh(this.userId,n.path),A=IDBKeyRange.lowerBound(r),s=[];return No(e).J({range:A},(i,o,a)=>{const[c,d,h]=i,f=nA(d);if(c===this.userId&&n.path.isEqual(f))return ss(e).get(h).next(w=>{if(!w)throw we();Be(w.userId===this.userId),s.push(vi(this.serializer,w))});a.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(Pe);const A=[];return n.forEach(s=>{const i=lh(this.userId,s.path),o=IDBKeyRange.lowerBound(i),a=No(e).J({range:o},(c,d,h)=>{const[f,w,m]=c,x=nA(w);f===this.userId&&s.path.isEqual(x)?r=r.add(m):h.done()});A.push(a)}),V.waitFor(A).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1,s=lh(this.userId,r),i=IDBKeyRange.lowerBound(s);let o=new it(Pe);return No(e).J({range:i},(a,c,d)=>{const[h,f,w]=a,m=nA(f);h===this.userId&&r.isPrefixOf(m)?m.length===A&&(o=o.add(w)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],A=[];return n.forEach(s=>{A.push(ss(e).get(s).next(i=>{if(i===null)throw we();Be(i.userId===this.userId),r.push(vi(this.serializer,i))}))}),V.waitFor(A).next(()=>r)}removeMutationBatch(e,n){return tU(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),V.forEach(r,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return No(e).J({range:r},(s,i,o)=>{if(s[0]===this.userId){const a=nA(s[1]);A.push(a)}else o.done()}).next(()=>{Be(A.length===0)})})}containsKey(e,n){return nU(e,this.userId,n)}Nn(e){return rU(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nU(t,e,n){const r=lh(e,n.path),A=r[1],s=IDBKeyRange.lowerBound(r);let i=!1;return No(t).J({range:s,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===A&&(i=!0),c.done()}).next(()=>i)}function ss(t){return Zt(t,"mutations")}function No(t){return Zt(t,"documentMutations")}function rU(t){return Zt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new eo(0)}static kn(){return new eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new eo(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ce.fromTimestamp(new Bt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(A=>(A.highestListenSequenceNumber=n,r&&(A.lastRemoteSnapshotVersion=r.toTimestamp()),n>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=n),this.Qn(e,A)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>_o(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Be(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let A=0;const s=[];return _o(e).J((i,o)=>{const a=Ol(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(A++,s.push(this.removeTargetData(e,a)))}).next(()=>V.waitFor(s)).next(()=>A)}forEachTarget(e,n){return _o(e).J((r,A)=>{const s=Ol(A);n(s)})}qn(e){return mC(e).get("targetGlobalKey").next(n=>(Be(n!==null),n))}Qn(e,n){return mC(e).put("targetGlobalKey",n)}Kn(e,n){return _o(e).put(Y1(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=qi(n),A=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return _o(e).J({range:A,index:"queryTargetsIndex"},(i,o,a)=>{const c=Ol(o);xu(n,c.target)&&(s=c,a.done())}).next(()=>s)}addMatchingKeys(e,n,r){const A=[],s=fs(e);return n.forEach(i=>{const o=Mn(i.path);A.push(s.put({targetId:r,path:o})),A.push(this.referenceDelegate.addReference(e,r,i))}),V.waitFor(A)}removeMatchingKeys(e,n,r){const A=fs(e);return V.forEach(n,s=>{const i=Mn(s.path);return V.waitFor([A.delete([r,i]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=fs(e),A=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(A)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),A=fs(e);let s=De();return A.J({range:r,H:!0},(i,o,a)=>{const c=nA(i[1]),d=new oe(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Mn(n.path),A=IDBKeyRange.bound([r],[JF(r)],!1,!0);let s=0;return fs(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,o],a,c)=>{i!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return _o(e).get(n).next(r=>r?Ol(r):null)}}function _o(t){return Zt(t,"targets")}function mC(t){return Zt(t,"targetGlobal")}function fs(t){return Zt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC([t,e],[n,r]){const A=Pe(t,n);return A===0?Pe(e,r):A}class YV{constructor(e){this.Un=e,this.buffer=new it(wC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();wC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Y("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){si(n)?Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ai(n)}await this.Hn(3e5)})}}class eH{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Xn.oe);const r=new YV(n);return this.Jn.forEachTarget(e,A=>r.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>r.zn(A))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(pC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,A,s,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Qo()<=Me.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function tH(t,e){return new eH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,n){this.db=e,this.garbageCollector=tH(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(A=>r+A))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,A)=>n(A))}addReference(e,n,r){return wd(e,r)}removeReference(e,n,r){return wd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wd(e,n)}nr(e,n){return function(A,s){let i=!1;return rU(A).Y(o=>nU(A,o,s).next(a=>(a&&(i=!0),V.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return s++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Ce.min()),fs(e).delete(function(h){return[0,Mn(h.path)]}(i))))});A.push(a)}}).next(()=>V.waitFor(A)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wd(e,n)}tr(e,n){const r=fs(e);let A,s=Xn.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(s!==Xn.oe&&n(new oe(nA(A)),s),s=c,A=a):s=Xn.oe}).next(()=>{s!==Xn.oe&&n(new oe(nA(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(t,e){return fs(t).put(function(r,A){return{targetId:0,path:Mn(r.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(){this.changes=new ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ui(e).put(r)}removeEntry(e,n,r){return ui(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],sf(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=ft.newInvalidDocument(n);return ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_l(n))},(A,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:ft.newInvalidDocument(n)};return ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(_l(n))},(A,s)=>{r={document:this.ir(n,s),size:af(s)}}).next(()=>r)}getEntries(e,n){let r=Zn();return this._r(e,n,(A,s)=>{const i=this.ir(A,s);r=r.insert(A,i)}).next(()=>r)}ar(e,n){let r=Zn(),A=new ct(oe.comparator);return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o),A=A.insert(s,af(i))}).next(()=>({documents:r,ur:A}))}_r(e,n,r){if(n.isEmpty())return V.resolve();let A=new it(BC);n.forEach(a=>A=A.add(a));const s=IDBKeyRange.bound(_l(A.first()),_l(A.last())),i=A.getIterator();let o=i.getNext();return ui(e).J({index:"documentKeyIndex",range:s},(a,c,d)=>{const h=oe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&BC(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(_l(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,A,s){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),sf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ui(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=Zn();for(const h of c){const f=this.ir(oe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Cu(n,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,A){let s=Zn();const i=yC(n,r),o=yC(n,hr.max());return ui(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(oe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new AH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return vC(e).get("remoteDocumentGlobalKey").next(n=>(Be(!!n),n))}rr(e,n){return vC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=VV(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return ft.newInvalidDocument(e)}}function sU(t){return new rH(t)}class AH extends AU{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ii(r=>r.toString(),(r,A)=>r.isEqual(A))}applyChanges(e){const n=[];let r=0,A=new it((s,i)=>Pe(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=sC(this.cr.serializer,i);A=A.add(s.path.popLast());const c=af(a);r+=c-o.size,n.push(this.cr.addEntry(e,s,a))}else if(r-=o.size,this.trackRemovals){const a=sC(this.cr.serializer,i.convertToNoDocument(Ce.min()));n.push(this.cr.addEntry(e,s,a))}}),A.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:r.get(s).readTime})}),r))}}function vC(t){return Zt(t,"remoteDocumentGlobal")}function ui(t){return Zt(t,"remoteDocumentsV14")}function _l(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yC(t,e){const n=e.documentKey.path.toArray();return[t,sf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function BC(t,e){const n=t.path.toArray(),r=e.path.toArray();let A=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(A=Pe(n[s],r[s]),A)return A;return A=Pe(n.length,r.length),A||(A=Pe(n[n.length-2],r[r.length-2]),A||Pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n,r,A){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=A}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(A=>(r=A,this.remoteDocumentCache.getEntry(e,n))).next(A=>(r!==null&&lc(r.mutation,A,Yn.empty(),Bt.now()),A))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,n,r=De()){const A=rA();return this.populateOverlays(e,A,n).next(()=>this.computeViews(e,n,A,r).next(s=>{let i=Dl();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=rA();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,De()))}populateOverlays(e,n,r){const A=[];return r.forEach(s=>{n.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,A){let s=Zn();const i=ac(),o=function(){return ac()}();return n.forEach((a,c)=>{const d=r.get(c.key);A.has(c.key)&&(d===void 0||d.mutation instanceof $A)?s=s.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),lc(d.mutation,c,d.mutation.getFieldMask(),Bt.now())):i.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new sH(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=ac();let A=new ct((i,o)=>i-o),s=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||Yn.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(A.get(o.batchId)||De()).add(a);A=A.insert(o.batchId,h)})}).next(()=>{const i=[],o=A.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=I1();d.forEach(f=>{if(!s.has(f)){const w=S1(n.get(f),r.get(f));w!==null&&h.set(f,w),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,A){return function(i){return oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,A):this.getDocumentsMatchingCollectionQuery(e,n,r,A)}getNextDocuments(e,n,r,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,A-s.size):V.resolve(rA());let o=-1,a=s;return i.next(c=>V.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,De())).next(d=>({batchId:o,changes:C1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let A=Dl();return r.isFoundDocument()&&(A=A.insert(r.key,r)),A})}getDocumentsMatchingCollectionGroupQuery(e,n,r,A){const s=n.collectionGroup;let i=Dl();return this.indexManager.getCollectionParents(e,s).next(o=>V.forEach(o,a=>{const c=function(h,f){return new WA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,A))).next(i=>{s.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,ft.newInvalidDocument(d)))});let o=Dl();return i.forEach((a,c)=>{const d=s.get(a);d!==void 0&&lc(d.mutation,c,Yn.empty(),Bt.now()),Cu(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(A){return{id:A.id,version:A.version,createTime:Ht(A.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(A){return{name:A.name,query:Yv(A.bundledQuery),readTime:Ht(A.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(){this.overlays=new ct(oe.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rA();return V.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((A,s)=>{this.ht(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const A=this.Ir.get(r);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const A=rA(),s=n.length+1,i=new oe(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&A.set(a.getKey(),a)}return V.resolve(A)}getOverlaysForCollectionGroup(e,n,r,A){let s=new ct((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=rA(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=rA(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=A)););return V.resolve(o)}ht(e,n,r){const A=this.overlays.get(r.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(r.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new qv(n,r));let s=this.Ir.get(n);s===void 0&&(s=De(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Tr=new it(rn.Er),this.dr=new it(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new oe(new je([])),r=new rn(n,e),A=new rn(n,e+1),s=[];return this.dr.forEachInRange([r,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new je([])),r=new rn(n,e),A=new rn(n,e+1);let s=De();return this.dr.forEachInRange([r,A],i=>{s=s.add(i.key)}),s}containsKey(e){const n=new rn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Pe(e.wr,n.wr)}static Ar(e,n){return Pe(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new it(rn.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Wv(s,n,r,A);this.mutationQueue.push(i);for(const o of A)this.br=this.br.add(new rn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return V.resolve(i)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=this.vr(r),s=A<0?0:A;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),A=new rn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,A],i=>{const o=this.Dr(i.wr);s.push(o)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(Pe);return n.forEach(A=>{const s=new rn(A,0),i=new rn(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],o=>{r=r.add(o.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1;let s=r;oe.isDocumentKey(s)||(s=s.child(""));const i=new rn(new oe(s),0);let o=new it(Pe);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===A&&(o=o.add(a.wr)),!0)},i),V.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const A=this.Dr(r);A!==null&&n.push(A)}),n}removeMutationBatch(e,n){Be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,A=>{const s=new rn(A.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rn(n,0),A=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e){this.Mr=e,this.docs=function(){return new ct(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,A=this.docs.get(r),s=A?A.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(A=>{const s=this.docs.get(A);r=r.insert(A,s?s.document.mutableCopy():ft.newInvalidDocument(A))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,A){let s=Zn();const i=n.path,o=new oe(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Lv(YF(d),r)<=0||(A.has(d.key)||Cu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,A){we()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uH(this)}getSize(e){return V.resolve(this.size)}}class uH extends AU{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,A)=>{A.isValidDocument()?n.push(this.cr.addEntry(e,A)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.persistence=e,this.Nr=new ii(n=>qi(n),xu),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ty,this.targetCount=0,this.kr=eo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,A)=>n(A)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let A=0;const s=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),A++)}),V.waitFor(s).next(()=>A)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const A=this.persistence.referenceDelegate,s=[];return A&&n.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xn(0),this.Kr=!1,this.Kr=!0,this.$r=new aH,this.referenceDelegate=e(this),this.Ur=new dH(this),this.indexManager=new qV,this.remoteDocumentCache=function(A){return new cH(A)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new X1(n),this.Gr=new iH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new lH(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const A=new hH(this.Qr.next());return this.referenceDelegate.zr(),r(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hH extends e1{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Jr=new ty,this.Yr=null}static Zr(e){return new dg(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(A=>this.Xr.add(A.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const A=oe.fromPath(r);return this.ei(e,A).next(s=>{s||n.removeEntry(A,Ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e){this.serializer=e}O(e,n,r,A){const s=new sg("createOrUpgrade",n);r<1&&A>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",N_,{unique:!0}),a.createObjectStore("documentMutations")}(e),xC(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=V.resolve();return r<3&&A>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),xC(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&A>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",N_,{unique:!0});const h=c.store("mutations"),f=d.map(w=>h.put(w));return V.waitFor(f)})}(e,s))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&A>=5&&(i=i.next(()=>this.ni(s))),r<6&&A>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&A>=7&&(i=i.next(()=>this.ii(s))),r<8&&A>=8&&(i=i.next(()=>this.si(e,s))),r<9&&A>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&A>=10&&(i=i.next(()=>this.oi(s))),r<11&&A>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&A>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:$M});c.createIndex("collectionPathOverlayIndex",qM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",JM,{unique:!1})})(e)})),r<13&&A>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:DM});c.createIndex("documentKeyIndex",LM),c.createIndex("collectionGroupIndex",OM)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),r<15&&A>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:KM}).createIndex("sequenceNumberIndex",GM,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:zM}).createIndex("documentKeyIndex",WM,{unique:!1})}(e))),r<16&&A>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&A>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,A)=>{n+=af(A)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(A=>V.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>V.forEach(o,a=>{Be(a.userId===s.userId);const c=vi(this.serializer,a);return tU(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return r.J((i,o)=>{const a=new je(i),c=function(h){return[0,Mn(h)]}(a);s.push(n.get(c).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:Mn(h),sequenceNumber:A.highestListenSequenceNumber}))(a)))}).next(()=>V.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:jM});const r=n.store("collectionParents"),A=new ey,s=i=>{if(A.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Mn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new je(i);return s(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=nA(o);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,A)=>{const s=Ol(A),i=Y1(this.serializer,s);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),A=[];return r.J((s,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new oe(je.fromString(h.document.name).popFirst(5)):h.noDocument?oe.fromSegments(h.noDocument.path):h.unknownDocument?oe.fromSegments(h.unknownDocument.path):we()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(o.put(c))}).next(()=>V.waitFor(A))}ai(e,n){const r=n.store("mutations"),A=sU(this.serializer),s=new oU(dg.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:De();vi(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),V.forEach(o,(a,c)=>{const d=new sn(c),h=cg.lt(this.serializer,d),f=s.getIndexManager(d),w=ug.lt(d,this.serializer,f,s.referenceDelegate);return new iU(A,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new B0(n,Xn.oe),a).next()})})}}function xC(t){t.createObjectStore("targetDocuments",{keyPath:VM}).createIndex("documentTargetsIndex",HM,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",MM,{unique:!0}),t.createObjectStore("targetGlobal")}const Pp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ny{constructor(e,n,r,A,s,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!ny.D())throw new X(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nH(this,A),this.Ai=n+"main",this.serializer=new X1(a),this.Ri=new iA(this.Ai,this.hi,new fH(this.serializer)),this.$r=new jV,this.Ur=new XV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sU(this.serializer),this.Gr=new HV,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(j.FAILED_PRECONDITION,Pp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Xn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(si(e))return Y("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Cl(e).get("owner").next(n=>V.resolve(this.vi(n)))}Ci(e){return vd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Zt(n,"clientMetadata");return r.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(o=>s.indexOf(o)===-1);return V.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?V.resolve(!0):Cl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new X(j.FAILED_PRECONDITION,Pp);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).U().next(r=>this.xi(r,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,o=this.networkEnabled===A.networkEnabled;if(s||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new B0(e,Xn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return ug.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JV(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("IndexedDbPersistence","Starting transaction:",e);const A=n==="readonly"?"readonly":"readwrite",s=function(a){return a===17?ZM:a===16?YM:a===15?Mv:a===14?i1:a===13?s1:a===12?XM:a===11?A1:void we()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,o=>(i=new B0(o,this.Qr?this.Qr.next():Xn.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new X(j.FAILED_PRECONDITION,ZF);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return Cl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(j.FAILED_PRECONDITION,Pp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cl(e).put("owner",n)}static D(){return iA.D()}bi(e){const n=Cl(e);return n.get("owner").next(r=>this.vi(r)?(Y("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;UT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Y("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cl(t){return Zt(t,"owner")}function vd(t){return Zt(t,"clientMetadata")}function ry(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,r,A){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=A}static Wi(e,n){let r=De(),A=De();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new Ay(e,n.fromCache,r,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return UT()?8:t1(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,A){const s={result:null};return this.Yi(e,n).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,n,A,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new gH;return this.Xi(e,n,i).next(o=>{if(s.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>s.result)}es(e,n,r,A){return r.documentReadCount<this.ji?(Qo()<=Me.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Qo()<=Me.DEBUG&&Y("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",A,"documents as results."),r.documentReadCount>this.Hi*A?(Qo()<=Me.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):V.resolve())}Yi(e,n){if($_(n))return V.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(A=>A===0?null:(n.limit!==null&&A===1&&(n=Af(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=De(...s);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,Af(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,A){return $_(n)||A.isEqual(Ce.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const i=this.ts(n,s);return this.ns(n,i,r,A)?V.resolve(null):(Qo()<=Me.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),So(n)),this.rs(e,i,n,XF(A,-1)).next(o=>o))})}ts(e,n){let r=new it(x1(e));return n.forEach((A,s)=>{Cu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,A){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,n,r){return Qo()<=Me.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",So(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),r)}rs(e,n,r,A){return this.Ji.getDocumentsMatchingQuery(e,r,A).next(s=>(n.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e,n,r,A){this.persistence=e,this.ss=n,this.serializer=A,this.os=new ct(Pe),this._s=new ii(s=>qi(s),xu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lU(t,e,n,r){return new pH(t,e,n,r)}async function cU(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let A;return n.mutationQueue.getAllMutationBatches(r).next(s=>(A=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=De();for(const c of A){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of s){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function mH(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const A=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let w=V.resolve();return f.forEach(m=>{w=w.next(()=>d.getEntry(a,m)).next(x=>{const C=c.docVersions.get(m);Be(C!==null),x.version.compareTo(C)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,A,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=De();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,A))})}function uU(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function wH(t,e){const n=le(t),r=e.snapshotVersion;let A=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});A=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let w=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(kt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),A=A.insert(h,w),function(x,C,y){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,w,d)&&o.push(n.Ur.updateTargetData(s,w))});let a=Zn(),c=De();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(dU(s,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(Ce.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return V.waitFor(o).next(()=>i.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(n.os=A,s))}function dU(t,e,n){let r=De(),A=De();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=Zn();return n.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(A=A.add(o)),a.isNoDocument()&&a.version.isEqual(Ce.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):Y("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:A}})}function vH(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fa(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let A;return n.Ur.getTargetData(r,e).next(s=>s?(A=s,V.resolve(A)):n.Ur.allocateTargetId(r).next(i=>(A=new bA(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,A).next(()=>A))))}).then(r=>{const A=n.os.get(r.targetId);return(A===null||r.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ua(t,e,n){const r=le(t),A=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!si(i))throw i;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(A.target)}function lf(t,e,n){const r=le(t);let A=Ce.min(),s=De();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=le(a),f=h._s.get(d);return f!==void 0?V.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,Vn(e)).next(o=>{if(o)return A=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?A:Ce.min(),n?s:De())).next(o=>(gU(r,B1(e),o),{documents:o,Ts:s})))}function hU(t,e){const n=le(t),r=le(n.Ur),A=n.os.get(e);return A?Promise.resolve(A.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(i=>i?i.target:null))}function fU(t,e){const n=le(t),r=n.us.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",A=>n.cs.getAllFromCollectionGroup(A,e,XF(r,-1),Number.MAX_SAFE_INTEGER)).then(A=>(gU(n,e,A),A))}function gU(t,e,n){let r=t.us.get(e)||Ce.min();n.forEach((A,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function yH(t,e,n,r){const A=le(t);let s=De(),i=Zn();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=A.cs.newChangeBuffer({trackRemovals:!0}),a=await Fa(A,function(d){return Vn(Wa(je.fromString(`__bundle__/docs/${d}`)))}(r));return A.persistence.runTransaction("Apply bundle documents","readwrite",c=>dU(c,o,i).next(d=>(o.apply(c),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>A.Ur.addMatchingKeys(c,s,a.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function BH(t,e,n=De()){const r=await Fa(t,Vn(Yv(e.bundledQuery))),A=le(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=Ht(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const o=r.withResumeToken(kt.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(o.targetId,o),A.Ur.updateTargetData(s,o).next(()=>A.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>A.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function _C(t,e){return`firestore_clients_${t}_${e}`}function CC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dp(t,e){return`firestore_targets_${t}_${e}`}class cf{constructor(e,n,r,A){this.user=e,this.batchId=n,this.state=r,this.error=A}static Rs(e,n,r){const A=JSON.parse(r);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new X(A.error.code,A.error.message))),i?new cf(e,n,A.state,s):(Vt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let A,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(A=new X(r.error.code,r.error.message))),s?new cc(e,r.state,A):(Vt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let A=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Kv();for(let i=0;A&&i<r.activeTargetIds.length;++i)A=n1(r.activeTargetIds[i]),s=s.add(r.activeTargetIds[i]);return A?new uf(e,s):(Vt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class sy{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new sy(n.clientId,n.onlineState):(Vt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class N0{constructor(){this.activeTargetIds=Kv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lp{constructor(e,n,r,A,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ct(Pe),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=_C(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new N0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const A=this.getItem(_C(this.persistenceKey,r));if(A){const s=uf.Rs(r,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,A)=>{A.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Dp(this.persistenceKey,e));if(A){const s=cc.Rs(e,A);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(A=>{this.Qs(A)}),this.currentUser=e,r.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y("SharedClientState","READ",e,n),n}setItem(e,n){Y("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Y("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let i=Xn.oe;if(s!=null)try{const o=JSON.parse(s);Be(typeof o=="number"),i=o}catch(o){Vt("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Xn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const A=new cf(this.currentUser,e,n,r),s=CC(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const n=CC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const A=Dp(this.persistenceKey,e),s=new cc(e,n,r);this.setItem(A,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return uf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),A=Number(r[1]),s=r[2]!==void 0?r[2]:null;return cf.Rs(new sn(s),A,n)}Ys(e,n){const r=this.Ms.exec(e),A=Number(r[1]);return cc.Rs(A,n)}Ls(e){return sy.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Y("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(r),i=[],o=[];return s.forEach(a=>{A.has(a)||i.push(a)}),A.forEach(a=>{s.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Kv();return e.forEach((r,A)=>{n=n.unionWith(A.activeTargetIds)}),n}}class pU{constructor(){this.so=new N0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new N0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function Op(){return yd===null?yd=function(){return 268435456+Math.round(2147483648*Math.random())}():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class IH extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(n,r,A,s,i){const o=Op(),a=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${o}:`,a,A);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,i),this.No(n,a,c,A).then(d=>(Y("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw cA("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",A),d})}Lo(n,r,A,s,i,o){return this.Mo(n,r,A,s,i)}Oo(n,r,A){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>n[i]=s),A&&A.headers.forEach((s,i)=>n[i]=s)}xo(n,r){const A=_H[n];return`${this.Do}/v1/${r}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,A){const s=Op();return new Promise((i,o)=>{const a=new jF;a.setWithCredentials(!0),a.listenOnce(KF.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case oh.NO_ERROR:const d=a.getResponseJson();Y(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case oh.TIMEOUT:Y(In,`RPC '${e}' ${s} timed out`),o(new X(j.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const h=a.getStatus();if(Y(In,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const m=function(C){const y=C.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(y)>=0?y:j.UNKNOWN}(w.status);o(new X(m,w.message))}else o(new X(j.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new X(j.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{Y(In,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(A);Y(In,`RPC '${e}' ${s} sending request:`,A),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const A=Op(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=WF(),o=zF(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=s.join("");Y(In,`Creating RPC '${e}' stream ${A}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,w=!1;const m=new CH({Io:C=>{w?Y(In,`Not sending because RPC '${e}' stream ${A} is closed:`,C):(f||(Y(In,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),Y(In,`RPC '${e}' stream ${A} sending:`,C),h.send(C))},To:()=>h.close()}),x=(C,y,B)=>{C.listen(y,v=>{try{B(v)}catch(k){setTimeout(()=>{throw k},0)}})};return x(h,Pl.EventType.OPEN,()=>{w||(Y(In,`RPC '${e}' stream ${A} transport opened.`),m.yo())}),x(h,Pl.EventType.CLOSE,()=>{w||(w=!0,Y(In,`RPC '${e}' stream ${A} transport closed`),m.So())}),x(h,Pl.EventType.ERROR,C=>{w||(w=!0,cA(In,`RPC '${e}' stream ${A} transport errored:`,C),m.So(new X(j.UNAVAILABLE,"The operation could not be completed")))}),x(h,Pl.EventType.MESSAGE,C=>{var y;if(!w){const B=C.data[0];Be(!!B);const v=B,k=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(k){Y(In,`RPC '${e}' stream ${A} received error:`,k);const R=k.status;let N=function(b){const Q=Kt[b];if(Q!==void 0)return N1(Q)}(R),I=k.message;N===void 0&&(N=j.INTERNAL,I="Unknown error status: "+R+" with message "+k.message),w=!0,m.So(new X(N,I)),h.close()}else Y(In,`RPC '${e}' stream ${A} received:`,B),m.bo(B)}}),x(o,GF.STAT_EVENT,C=>{C.stat===v0.PROXY?Y(In,`RPC '${e}' stream ${A} detected buffering proxy`):C.stat===v0.NOPROXY&&Y(In,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(){return typeof window<"u"?window:null}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return new QV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,r=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),A=Math.max(0,n-r);A>0&&Y("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,r,A,s,i,o,a){this.ui=e,this.Ho=r,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iy(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Vt(n.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,A])=>{this.Yo===n&&this.P_(r,A)},r=>{e(()=>{const A=new X(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(A)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{r(()=>this.I_(A))}),this.stream.onMessage(A=>{r(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EH extends wU{constructor(e,n,r,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=RV(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ce.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Ce.min():i.readTime?Ht(i.readTime):Ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=U0(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=nf(a)?{documents:G1(s,a)}:{query:z1(s,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=O1(s,i.resumeToken);const c=T0(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ce.min())>0){o.readTime=Ta(s,i.snapshotVersion.toTimestamp());const c=T0(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=PV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=U0(this.serializer),n.removeTarget=e,this.a_(n)}}class bH extends wU{constructor(e,n,r,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=NV(e.writeResults,e.commitTime),r=Ht(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=U0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Zc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH extends class{}{constructor(e,n,r,A){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,F0(n,r),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(j.UNKNOWN,s.toString())})}Lo(e,n,r,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,F0(n,r),A,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(j.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class FH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vt(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e,n,r,A,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{r.enqueueAndForget(async()=>{oi(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=le(a);c.L_.add(4),await Ja(c),c.q_.set("Unknown"),c.L_.delete(4),await Fu(c)}(this))})}),this.q_=new FH(r,A)}}async function Fu(t){if(oi(t))for(const e of t.B_)await e(!0)}async function Ja(t){for(const e of t.B_)await e(!1)}function hg(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ly(n)?ay(n):Ya(n).r_()&&oy(n,e))}function Qa(t,e){const n=le(t),r=Ya(n);n.N_.delete(e),r.r_()&&vU(n,e),n.N_.size===0&&(r.r_()?r.o_():oi(n)&&n.q_.set("Unknown"))}function oy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ya(t).A_(e)}function vU(t,e){t.Q_.xe(e),Ya(t).R_(e)}function ay(t){t.Q_=new bV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ya(t).start(),t.q_.v_()}function ly(t){return oi(t)&&!Ya(t).n_()&&t.N_.size>0}function oi(t){return le(t).L_.size===0}function yU(t){t.Q_=void 0}async function QH(t){t.q_.set("Online")}async function SH(t){t.N_.forEach((e,n)=>{oy(t,e)})}async function kH(t,e){yU(t),ly(t)?(t.q_.M_(e),ay(t)):t.q_.set("Unknown")}async function RH(t,e,n){if(t.q_.set("Online"),e instanceof L1&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const o of s.targetIds)A.N_.has(o)&&(await A.remoteSyncer.rejectListen(o,i),A.N_.delete(o),A.Q_.removeTarget(o))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await df(t,r)}else if(e instanceof hh?t.Q_.Ke(e):e instanceof D1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ce.min()))try{const r=await uU(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=s.N_.get(a);if(!d)return;s.N_.set(a,d.withResumeToken(kt.EMPTY_BYTE_STRING,d.snapshotVersion)),vU(s,a);const h=new bA(d.target,a,c,d.sequenceNumber);oy(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await df(t,r)}}async function df(t,e,n){if(!si(e))throw e;t.L_.add(1),await Ja(t),t.q_.set("Offline"),n||(n=()=>uU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fu(t)})}function BU(t,e){return e().catch(n=>df(t,n,e))}async function Xa(t){const e=le(t),n=Ws(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;NH(e);)try{const A=await vH(e.localStore,r);if(A===null){e.O_.length===0&&n.o_();break}r=A.batchId,PH(e,A)}catch(A){await df(e,A)}xU(e)&&_U(e)}function NH(t){return oi(t)&&t.O_.length<10}function PH(t,e){t.O_.push(e);const n=Ws(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xU(t){return oi(t)&&!Ws(t).n_()&&t.O_.length>0}function _U(t){Ws(t).start()}async function DH(t){Ws(t).p_()}async function LH(t){const e=Ws(t);for(const n of t.O_)e.m_(n.mutations)}async function OH(t,e,n){const r=t.O_.shift(),A=$v.from(r,e,n);await BU(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await Xa(t)}async function MH(t,e){e&&Ws(t).V_&&await async function(r,A){if(function(i){return R1(i)&&i!==j.ABORTED}(A.code)){const s=r.O_.shift();Ws(r).s_(),await BU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,A)),await Xa(r)}}(t,e),xU(t)&&_U(t)}async function EC(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=oi(n);n.L_.add(3),await Ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fu(n)}async function P0(t,e){const n=le(t);e?(n.L_.delete(2),await Fu(n)):e||(n.L_.add(2),await Ja(n),n.q_.set("Unknown"))}function Ya(t){return t.K_||(t.K_=function(n,r,A){const s=le(n);return s.w_(),new EH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:QH.bind(null,t),Ro:SH.bind(null,t),mo:kH.bind(null,t),d_:RH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ly(t)?ay(t):t.q_.set("Unknown")):(await t.K_.stop(),yU(t))})),t.K_}function Ws(t){return t.U_||(t.U_=function(n,r,A){const s=le(n);return s.w_(),new bH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DH.bind(null,t),mo:MH.bind(null,t),f_:LH.bind(null,t),g_:OH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Xa(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n,r,A,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=A,this.removalCallback=s,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,A,s){const i=Date.now()+r,o=new cy(e,n,i,A,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Za(t,e){if(Vt("AsyncQueue",`${e}: ${t}`),si(t))return new X(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=Dl(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new la(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof la)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new la;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.W_=new ct(oe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sa{constructor(e,n,r,A,s,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,A,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Sa(e,n,la.emptySet(n),i,r,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let A=0;A<n.length;A++)if(n[A].type!==r[A].type||!n[A].doc.isEqual(r[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HH{constructor(){this.queries=TC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const A=le(n),s=A.queries;A.queries=TC(),s.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new X(j.ABORTED,"Firestore shutting down"))}}function TC(){return new ii(t=>y1(t),_u)}async function uy(t,e){const n=le(t);let r=3;const A=e.query;let s=n.queries.get(A);s?!s.H_()&&e.J_()&&(r=2):(s=new VH,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(A,!0);break;case 1:s.z_=await n.onListen(A,!1);break;case 2:await n.onFirstRemoteStoreListen(A)}}catch(i){const o=Za(i,`Initialization of query '${So(e.query)}' failed`);return void e.onError(o)}n.queries.set(A,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&hy(n)}async function dy(t,e){const n=le(t),r=e.query;let A=3;const s=n.queries.get(r);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jH(t,e){const n=le(t);let r=!1;for(const A of e){const s=A.query,i=n.queries.get(s);if(i){for(const o of i.j_)o.X_(A)&&(r=!0);i.z_=A}}r&&hy(n)}function KH(t,e,n){const r=le(t),A=r.queries.get(e);if(A)for(const s of A.j_)s.onError(n);r.queries.delete(e)}function hy(t){t.Y_.forEach(e=>{e.next()})}var D0,FC;(FC=D0||(D0={})).ea="default",FC.Cache="cache";class fy{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const A of e.docChanges)A.type!==3&&r.push(A);e=new Sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==D0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.serializer=e}Es(e){return oA(this.serializer,e)}ds(e){return e.metadata.exists?K1(this.serializer,e.document,!1):ft.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ht(e)}}class zH{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CU(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=je.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new UC(this.serializer);for(const A of e)if(A.metadata.queries){const s=r.Es(A.metadata.name);for(const i of A.metadata.queries){const o=(n.get(i)||De()).add(s);n.set(i,o)}}return n}async complete(){const e=await yH(this.localStore,new UC(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await BH(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function CU(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.key=e}}class EU{constructor(e){this.key=e}}class bU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=x1(e),this.Ra=new la(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new bC,A=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,i=A,o=!1;const a=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,c=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),w=Cu(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;f&&w?f.data.isEqual(w.data)?m!==x&&(r.track({type:3,doc:w}),C=!0):this.ga(f,w)||(r.track({type:2,doc:w}),C=!0,(a&&this.Aa(w,a)>0||c&&this.Aa(w,c)<0)&&(o=!0)):!f&&w?(r.track({type:0,doc:w}),C=!0):f&&!w&&(r.track({type:1,doc:f}),C=!0,(a||c)&&(o=!0)),C&&(w?(i=i.add(w),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,m){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return x(w)-x(m)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),A=A!=null&&A;const o=n&&!A?this.ya():[],a=this.da.size===0&&this.current&&!A?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new Sa(this.query,e.Ra,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new EU(r))}),this.da.forEach(r=>{e.has(r)||n.push(new IU(r))}),n}ba(e){this.Ta=e.Ts,this.da=De();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Sa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class WH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $H{constructor(e){this.key=e,this.va=!1}}class qH{constructor(e,n,r,A,s,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new ii(o=>y1(o),_u),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(oe.comparator),this.Na=new Map,this.La=new ty,this.Ba={},this.ka=new Map,this.qa=eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JH(t,e,n=!0){const r=fg(t);let A;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await TU(r,e,n,!0),A}async function XH(t,e){const n=fg(t);await TU(n,e,!0,!1)}async function TU(t,e,n,r){const A=await Fa(t.localStore,Vn(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await gy(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&n&&hg(t.remoteStore,A),o}async function gy(t,e,n,r,A){t.Ka=(h,f,w)=>async function(x,C,y,B){let v=C.view.ma(y);v.ns&&(v=await lf(x.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,v)));const k=B&&B.targetChanges.get(C.targetId),R=B&&B.targetMismatches.get(C.targetId)!=null,N=C.view.applyChanges(v,x.isPrimaryClient,k,R);return L0(x,C.targetId,N.wa),N.snapshot}(t,h,f,w);const s=await lf(t.localStore,e,!0),i=new bU(e,s.Ts),o=i.ma(s.documents),a=bu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",A),c=i.applyChanges(o,t.isPrimaryClient,a);L0(t,n,c.wa);const d=new WH(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function YH(t,e,n){const r=le(t),A=r.Fa.get(e),s=r.Ma.get(A.targetId);if(s.length>1)return r.Ma.set(A.targetId,s.filter(i=>!_u(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(A.targetId),r.sharedClientState.isActiveQueryTarget(A.targetId)||await Ua(r.localStore,A.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(A.targetId),n&&Qa(r.remoteStore,A.targetId),ka(r,A.targetId)}).catch(Ai)):(ka(r,A.targetId),await Ua(r.localStore,A.targetId,!0))}async function ZH(t,e){const n=le(t),r=n.Fa.get(e),A=n.Ma.get(r.targetId);n.isPrimaryClient&&A.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qa(n.remoteStore,r.targetId))}async function ej(t,e,n){const r=vy(t);try{const A=await function(i,o){const a=le(i),c=Bt.now(),d=o.reduce((w,m)=>w.add(m.key),De());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let m=Zn(),x=De();return a.cs.getEntries(w,d).next(C=>{m=C,m.forEach((y,B)=>{B.isValidDocument()||(x=x.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,m)).next(C=>{h=C;const y=[];for(const B of o){const v=CV(B,h.get(B.key).overlayedDocument);v!=null&&y.push(new $A(B.key,v,u1(v.value.mapValue),yt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,c,y,o)}).next(C=>{f=C;const y=C.applyToLocalDocumentSet(h,x);return a.documentOverlayCache.saveOverlays(w,C.batchId,y)})}).then(()=>({batchId:f.batchId,changes:C1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(A.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new ct(Pe)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,A.batchId,n),await qA(r,A.changes),await Xa(r.remoteStore)}catch(A){const s=Za(A,"Failed to persist write");n.reject(s)}}async function FU(t,e){const n=le(t);try{const r=await wH(n.localStore,e);e.targetChanges.forEach((A,s)=>{const i=n.Na.get(s);i&&(Be(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?Be(i.va):A.removedDocuments.size>0&&(Be(i.va),i.va=!1))}),await qA(n,r,e)}catch(r){await Ai(r)}}function QC(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const A=[];r.Fa.forEach((s,i)=>{const o=i.view.Z_(e);o.snapshot&&A.push(o.snapshot)}),function(i,o){const a=le(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&hy(a)}(r.eventManager,e),A.length&&r.Ca.d_(A),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tj(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const A=r.Na.get(e),s=A&&A.key;if(s){let i=new ct(oe.comparator);i=i.insert(s,ft.newNoDocument(s,Ce.min()));const o=De().add(s),a=new Eu(Ce.min(),new Map,new ct(Pe),i,o);await FU(r,a),r.Oa=r.Oa.remove(s),r.Na.delete(e),wy(r)}else await Ua(r.localStore,e,!1).then(()=>ka(r,e,n)).catch(Ai)}async function nj(t,e){const n=le(t),r=e.batch.batchId;try{const A=await mH(n.localStore,e);my(n,r,null),py(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qA(n,A)}catch(A){await Ai(A)}}async function rj(t,e,n){const r=le(t);try{const A=await function(i,o){const a=le(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Be(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);my(r,e,n),py(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qA(r,A)}catch(A){await Ai(A)}}async function Aj(t,e){const n=le(t);oi(n.remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=le(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const A=n.ka.get(r)||[];A.push(e),n.ka.set(r,A)}catch(r){const A=Za(r,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function py(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function my(t,e,n){const r=le(t);let A=r.Ba[r.currentUser.toKey()];if(A){const s=A.get(e);s&&(n?s.reject(n):s.resolve(),A=A.remove(e)),r.Ba[r.currentUser.toKey()]=A}}function ka(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||UU(t,r)})}function UU(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Qa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),wy(t))}function L0(t,e,n){for(const r of n)r instanceof IU?(t.La.addReference(r.key,e),sj(t,r)):r instanceof EU?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||UU(t,r.key)):we()}function sj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),wy(t))}function wy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(je.fromString(e)),r=t.qa.next();t.Na.set(r,new $H(n)),t.Oa=t.Oa.insert(n,r),hg(t.remoteStore,new bA(Vn(Wa(n.path)),r,"TargetPurposeLimboResolution",Xn.oe))}}async function qA(t,e,n){const r=le(t),A=[],s=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){A.push(c);const h=Ay.Wi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.Ca.d_(A),await async function(a,c){const d=le(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>V.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!si(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),m=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(f,x)}}}(r.localStore,s))}async function ij(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await cU(n.localStore,e);n.currentUser=e,function(s,i){s.ka.forEach(o=>{o.forEach(a=>{a.reject(new X(j.CANCELLED,i))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qA(n,r.hs)}}function oj(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return De().add(r.key);{let A=De();const s=n.Ma.get(e);if(!s)return A;for(const i of s){const o=n.Fa.get(i);A=A.unionWith(o.view.Va)}return A}}async function aj(t,e){const n=le(t),r=await lf(n.localStore,e.query,!0),A=e.view.ba(r);return n.isPrimaryClient&&L0(n,e.targetId,A.wa),A}async function lj(t,e){const n=le(t);return fU(n.localStore,e).then(r=>qA(n,r))}async function cj(t,e,n,r){const A=le(t),s=await function(o,a){const c=le(o),d=le(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(A.localStore,e);s!==null?(n==="pending"?await Xa(A.remoteStore):n==="acknowledged"||n==="rejected"?(my(A,e,r||null),py(A,e),function(o,a){le(le(o).mutationQueue).On(a)}(A.localStore,e)):we(),await qA(A,s)):Y("SyncEngine","Cannot apply mutation batch with id: "+e)}async function uj(t,e){const n=le(t);if(fg(n),vy(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),A=await SC(n,r.toArray());n.Qa=!0,await P0(n.remoteStore,!0);for(const s of A)hg(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let A=Promise.resolve();n.Ma.forEach((s,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):A=A.then(()=>(ka(n,i),Ua(n.localStore,i,!0))),Qa(n.remoteStore,i)}),await A,await SC(n,r),function(i){const o=le(i);o.Na.forEach((a,c)=>{Qa(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new ct(oe.comparator)}(n),n.Qa=!1,await P0(n.remoteStore,!1)}}async function SC(t,e,n){const r=le(t),A=[],s=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await Fa(r.localStore,Vn(a[0]));for(const c of a){const d=r.Fa.get(c),h=await aj(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await hU(r.localStore,i);o=await Fa(r.localStore,c),await gy(r,QU(c),i,!1,o.resumeToken)}A.push(o)}return r.Ca.d_(s),A}function QU(t){return v1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dj(t){return function(n){return le(le(n).persistence).Qi()}(le(t).localStore)}async function hj(t,e,n,r){const A=le(t);if(A.Qa)return void Y("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const i=await fU(A.localStore,B1(s[0])),o=Eu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",kt.EMPTY_BYTE_STRING);await qA(A,i,o);break}case"rejected":await Ua(A.localStore,e,!0),ka(A,e,r);break;default:we()}}async function fj(t,e,n){const r=fg(t);if(r.Qa){for(const A of e){if(r.Ma.has(A)&&r.sharedClientState.isActiveQueryTarget(A)){Y("SyncEngine","Adding an already active target "+A);continue}const s=await hU(r.localStore,A),i=await Fa(r.localStore,s);await gy(r,QU(s),i.targetId,!1,i.resumeToken),hg(r.remoteStore,i)}for(const A of n)r.Ma.has(A)&&await Ua(r.localStore,A,!1).then(()=>{Qa(r.remoteStore,A),ka(r,A)}).catch(Ai)}}function fg(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tj.bind(null,e),e.Ca.d_=jH.bind(null,e.eventManager),e.Ca.$a=KH.bind(null,e.eventManager),e}function vy(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rj.bind(null,e),e}function gj(t,e,n){const r=le(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(w,m){const x=le(w),C=Ht(m.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",y=>x.Gr.getBundleMetadata(y,m.id)).then(y=>!!y&&y.createTime.compareTo(C)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(CU(a));const c=new zH(a,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await qA(s,h.Ia,void 0),await function(w,m){const x=le(w);return x.persistence.runTransaction("Save bundle","readwrite",C=>x.Gr.saveBundleMetadata(C,m))}(s.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return cA("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(A=>{r.sharedClientState.notifyBundleLoaded(A)})}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lU(this.persistence,new aU,e.initialUser,this.serializer)}Ga(e){return new oU(dg.Zr,this.serializer)}Wa(e){return new pU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class SU extends eu{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await vy(this.Ja.syncEngine),await Xa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return lU(this.persistence,new aU,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ZV(r,e.asyncQueue,n)}Ha(e,n){const r=new RM(n,this.persistence);return new kM(e.asyncQueue,r)}Ga(e){const n=ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new ny(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,mU(),fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new pU}}class pj extends SU{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Lp&&(this.sharedClientState.syncEngine={no:cj.bind(null,n),ro:hj.bind(null,n),io:fj.bind(null,n),Qi:dj.bind(null,n),eo:lj.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await uj(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=mU();if(!Lp.D(n))throw new X(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class tu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ij.bind(null,this.syncEngine),await P0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HH}()}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),r=function(s){return new IH(s)}(e.databaseInfo);return function(s,i,o,a){return new TH(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,A,s,i,o){return new UH(r,A,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>QC(this.syncEngine,n,0),function(){return IC.D()?new IC:new xH}())}createSyncEngine(e,n){return function(A,s,i,o,a,c,d){const h=new qH(A,s,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(A){const s=le(A);Y("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ja(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}tu.provider={build:()=>new tu};function kC(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new pn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const A=await this.iu(r);return new GH(JSON.parse(A),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new X(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(A,s){const i=le(A),o={documents:s.map(h=>Yc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,je.emptyPath(),o,s.length),c=new Map;a.forEach(h=>{const f=kV(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());Be(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const A=oe.fromPath(r);this.mutations.push(new zv(A,this.precondition(A)))}),await async function(r,A){const s=le(r),i={writes:A.map(o=>Zc(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,je.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw we();n=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ce.min())?yt.exists(!1):yt.updateTime(n):yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ce.min()))throw new X(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yt.updateTime(n)}return yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n,r,A,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=A,this.deferred=s,this._u=r.maxAttempts,this.t_=new iy(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new wj(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(A=>{this.lu(A)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Bu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!R1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,A,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=A,this.user=sn.UNAUTHENTICATED,this.clientId=qF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{Y("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Y("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Za(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mp(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async A=>{r.isEqual(A)||(await cU(e.localStore,A),r=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function RC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yy(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>EC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,A)=>EC(e.remoteStore,A)),t._onlineComponents=e}async function yy(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(A){return A.name==="FirebaseError"?A.code===j.FAILED_PRECONDITION||A.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(n))throw n;cA("Error using user provided cache. Falling back to memory cache: "+n),await Mp(t,new eu)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Mp(t,new eu);return t._offlineComponents}async function pg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await RC(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await RC(t,new tu))),t._onlineComponents}function kU(t){return yy(t).then(e=>e.persistence)}function By(t){return yy(t).then(e=>e.localStore)}function RU(t){return pg(t).then(e=>e.remoteStore)}function xy(t){return pg(t).then(e=>e.syncEngine)}function Bj(t){return pg(t).then(e=>e.datastore)}async function Ra(t){const e=await pg(t),n=e.eventManager;return n.onListen=JH.bind(null,e.syncEngine),n.onUnlisten=YH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZH.bind(null,e.syncEngine),n}function xj(t){return t.asyncQueue.enqueue(async()=>{const e=await kU(t),n=await RU(t);return e.setNetworkEnabled(!0),function(A){const s=le(A);return s.L_.delete(0),Fu(s)}(n)})}function _j(t){return t.asyncQueue.enqueue(async()=>{const e=await kU(t),n=await RU(t);return e.setNetworkEnabled(!1),async function(A){const s=le(A);s.L_.add(0),await Ja(s),s.q_.set("Offline")}(n)})}function Cj(t,e){const n=new pn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await function(c,d){const h=le(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new X(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Za(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await By(t),e,n)),n.promise}function NU(t,e,n={}){const r=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const d=new gg({next:f=>{d.Za(),i.enqueueAndForget(()=>dy(s,h));const w=f.docs.has(o);!w&&f.fromCache?c.reject(new X(j.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&a&&a.source==="server"?c.reject(new X(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new fy(Wa(o.path),d,{includeMetadataChanges:!0,_a:!0});return uy(s,h)}(await Ra(t),t.asyncQueue,e,n,r)),r.promise}function Ij(t,e){const n=new pn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await lf(A,s,!0),a=new bU(s,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=Za(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await By(t),e,n)),n.promise}function PU(t,e,n={}){const r=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const d=new gg({next:f=>{d.Za(),i.enqueueAndForget(()=>dy(s,h)),f.fromCache&&a.source==="server"?c.reject(new X(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new fy(o,d,{includeMetadataChanges:!0,_a:!0});return uy(s,h)}(await Ra(t),t.asyncQueue,e,n,r)),r.promise}function Ej(t,e){const n=new gg(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){le(A).Y_.add(s),s.next()}(await Ra(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){le(A).Y_.delete(s)}(await Ra(t),n))}}function bj(t,e,n,r){const A=function(i,o){let a;return a=typeof i=="string"?P1().encode(i):i,function(d,h){return new mj(d,h)}(function(d,h){if(d instanceof Uint8Array)return kC(d,h);if(d instanceof ArrayBuffer)return kC(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Tu(e));t.asyncQueue.enqueueAndForget(async()=>{gj(await xy(t),A,r)})}function Tj(t,e){return t.asyncQueue.enqueue(async()=>function(r,A){const s=le(r);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await By(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t,e,n){if(!n)throw new X(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LU(t,e,n,r){if(e===!0&&r===!0)throw new X(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PC(t){if(!oe.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DC(t){if(oe.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mg(t);throw new X(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OU(t,e){if(e<=0)throw new X(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,A){return r.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,n,r,A){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xM;switch(r.type){case"firstParty":return new EM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=NC.get(n);r&&(Y("ComponentProvider","Removing Datastore"),NC.delete(n),r.terminate())}(this),Promise.resolve()}}function Fj(t,e,n,r={}){var A;const s=(t=Ze(t,Uu))._getSettings(),i=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&cA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=sn.MOCK_USER;else{o=ON(r.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new sn(c)}t._authCredentials=new _M(new $F(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class MU{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new MU(this.firestore,e,this._query)}},Et=class VU{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new VU(this.firestore,e,this._key)}},Rs=class HU extends Hn{constructor(e,n,r){super(e,n,Wa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new oe(e))}withConverter(e){return new HU(this.firestore,e,this._path)}};function jU(t,e,...n){if(t=Ue(t),_y("collection","path",e),t instanceof Uu){const r=je.fromString(e,...n);return DC(r),new Rs(t,null,r)}{if(!(t instanceof Et||t instanceof Rs))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return DC(r),new Rs(t.firestore,null,r)}}function Uj(t,e){if(t=Ze(t,Uu),_y("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hn(t,null,function(r){return new WA(je.emptyPath(),r)}(e))}function hf(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=qF.newId()),_y("doc","path",e),t instanceof Uu){const r=je.fromString(e,...n);return PC(r),new Et(t,null,new oe(r))}{if(!(t instanceof Et||t instanceof Rs))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return PC(r),new Et(t.firestore,t instanceof Rs?t.converter:null,new oe(r))}}function KU(t,e){return t=Ue(t),e=Ue(e),(t instanceof Et||t instanceof Rs)&&(e instanceof Et||e instanceof Rs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function GU(t,e){return t=Ue(t),e=Ue(e),t instanceof Hn&&e instanceof Hn&&t.firestore===e.firestore&&_u(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iy(this,"async_queue_retry"),this.Vu=()=>{const r=fh();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new pn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!si(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const A=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Vt("INTERNAL UNHANDLED ERROR: ",A),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const A=cy.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&we()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function O0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const A=n;for(const s of r)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Qj{constructor(){this._progressObserver={},this._taskCompletionResolver=new pn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=-1;let jt=class extends Uu{constructor(e,n,r,A){super(e,n,r,A),this.type="firestore",this._queue=new OC,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OC(e),this._firestoreClient=void 0,await e}}};function Qn(t){if(t._terminated)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zU(t),t._firestoreClient}function zU(t){var e,n,r;const A=t._freezeSettings(),s=function(o,a,c,d){return new nV(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,DU(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((n=A.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=A.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new yj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function kj(t,e){cA("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return WU(t,tu.provider,{build:r=>new SU(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Rj(t){cA("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();WU(t,tu.provider,{build:n=>new pj(n,e.cacheSizeBytes)})}function WU(t,e,n){if((t=Ze(t,jt))._firestoreClient||t._terminated)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new X(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},zU(t)}function Nj(t){if(t._initialized&&!t._terminated)throw new X(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!iA.D())return Promise.resolve();const A=r+"main";await iA.delete(A)}(ry(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Pj(t){return function(n){const r=new pn;return n.asyncQueue.enqueueAndForget(async()=>Aj(await xy(n),r)),r.promise}(Qn(t=Ze(t,jt)))}function Dj(t){return xj(Qn(t=Ze(t,jt)))}function Lj(t){return _j(Qn(t=Ze(t,jt)))}function Oj(t,e){const n=Qn(t=Ze(t,jt)),r=new Qj;return bj(n,t._databaseId,e,r),r}function Mj(t,e){return Tj(Qn(t=Ze(t,jt)),e).then(n=>n?new Hn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dA(kt.fromBase64String(e))}catch(n){throw new X(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dA(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,A){if(r.length!==A.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=/^__.*__$/;class Hj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $A(e,this.data,this.fieldMask,n,this.fieldTransforms):new $a(e,this.data,n,this.fieldTransforms)}}class $U{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $A(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class vg{constructor(e,n,r,A,s,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.Ou(e),A}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ff(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qU(this.Cu)&&Vj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Tu(e)}Qu(e,n,r,A=!1){return new vg({Cu:e,methodName:n,qu:r,path:vt.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function co(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new jj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yg(t,e,n,r,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,n,A);Qy("Data must be an object, but it was:",i,r);const o=YU(r,i);let a,c;if(s.merge)a=new Yn(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=M0(e,h,n);if(!i.contains(f))throw new X(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);eQ(d,f)||d.push(f)}a=new Yn(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new Hj(new hn(o),a,c)}class Qu extends lo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qu}}function JU(t,e,n){return new vg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Iy extends lo{_toFieldTransform(e){return new Iu(e.path,new Ea)}isEqual(e){return e instanceof Iy}}class Ey extends lo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=JU(this,e,!0),r=this.Ku.map(s=>uo(s,n)),A=new Ji(r);return new Iu(e.path,A)}isEqual(e){return e instanceof Ey&&Dc(this.Ku,e.Ku)}}class by extends lo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=JU(this,e,!0),r=this.Ku.map(s=>uo(s,n)),A=new Xi(r);return new Iu(e.path,A)}isEqual(e){return e instanceof by&&Dc(this.Ku,e.Ku)}}class Ty extends lo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ba(e.serializer,b1(e.serializer,this.$u));return new Iu(e.path,n)}isEqual(e){return e instanceof Ty&&this.$u===e.$u}}function Fy(t,e,n,r){const A=t.Qu(1,e,n);Qy("Data must be an object, but it was:",A,r);const s=[],i=hn.empty();ao(r,(a,c)=>{const d=Sy(e,a,n);c=Ue(c);const h=A.Nu(d);if(c instanceof Qu)s.push(d);else{const f=uo(c,h);f!=null&&(s.push(d),i.set(d,f))}});const o=new Yn(s);return new $U(i,o,A.fieldTransforms)}function Uy(t,e,n,r,A,s){const i=t.Qu(1,e,n),o=[M0(e,r,n)],a=[A];if(s.length%2!=0)throw new X(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(M0(e,s[f])),a.push(s[f+1]);const c=[],d=hn.empty();for(let f=o.length-1;f>=0;--f)if(!eQ(c,o[f])){const w=o[f];let m=a[f];m=Ue(m);const x=i.Nu(w);if(m instanceof Qu)c.push(w);else{const C=uo(m,x);C!=null&&(c.push(w),d.set(w,C))}}const h=new Yn(c);return new $U(d,h,i.fieldTransforms)}function XU(t,e,n,r=!1){return uo(n,t.Qu(r?4:3,e))}function uo(t,e){if(ZU(t=Ue(t)))return Qy("Unsupported field value:",e,t),YU(t,e);if(t instanceof lo)return function(r,A){if(!qU(A.Cu))throw A.Bu(`${r._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,A){const s=[];let i=0;for(const o of r){let a=uo(o,A.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,A){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return b1(A.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Bt.fromDate(r);return{timestampValue:Ta(A.serializer,s)}}if(r instanceof Bt){const s=new Bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ta(A.serializer,s)}}if(r instanceof wg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dA)return{bytesValue:O1(A.serializer,r._byteString)};if(r instanceof Et){const s=A.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xv(r.firestore._databaseId||A.databaseId,r._key.path)}}if(r instanceof Cy)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return Gv(o.serializer,a)})}}}}}}(r,A);throw A.Bu(`Unsupported field value: ${mg(r)}`)}(t,e)}function YU(t,e){const n={};return o1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ao(t,(r,A)=>{const s=uo(A,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ZU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bt||t instanceof wg||t instanceof dA||t instanceof Et||t instanceof lo||t instanceof Cy)}function Qy(t,e,n){if(!ZU(n)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(n)){const r=mg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function M0(t,e,n){if((e=Ue(e))instanceof $s)return e._internalPath;if(typeof e=="string")return Sy(t,e);throw ff("Field path arguments must be of type string or ",t,!1,void 0,n)}const Kj=new RegExp("[~\\*/\\[\\]]");function Sy(t,e,n){if(e.search(Kj)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $s(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ff(t,e,n,r,A){const s=r&&!r.isEmpty(),i=A!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${A}`),a+=")"),new X(j.INVALID_ARGUMENT,o+t+a)}function eQ(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r,A,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Gj extends nu{data(){return super.data()}}function Bg(t,e){return typeof e=="string"?Sy(t,e):e instanceof $s?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ky{}class Su extends ky{}function is(t,e,...n){let r=[];e instanceof ky&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof Ry).length,o=s.filter(a=>a instanceof xg).length;if(i>1||i>0&&o>0)throw new X(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const A of r)t=A._apply(t);return t}class xg extends Su{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xg(e,n,r)}_apply(e){const n=this._parse(e);return rQ(e._query,n),new Hn(e.firestore,e.converter,b0(e._query,n))}_parse(e){const n=co(e.firestore);return function(s,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){VC(h,d);const w=[];for(const m of h)w.push(MC(a,s,m));f={arrayValue:{values:w}}}else f=MC(a,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||VC(h,d),f=XU(o,i,h,d==="in"||d==="not-in");return Ke.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zj(t,e,n){const r=e,A=Bg("where",t);return xg._create(A,r,n)}class Ry extends ky{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ry(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(A,s){let i=A;const o=s.getFlattenedFilters();for(const a of o)rQ(i,a),i=b0(i,a)}(e._query,n),new Hn(e.firestore,e.converter,b0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ny extends Su{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ny(e,n)}_apply(e){const n=function(A,s,i){if(A.startAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xc(s,i)}(e._query,this._field,this._direction);return new Hn(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new WA(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,n))}}function Wj(t,e="asc"){const n=e,r=Bg("orderBy",t);return Ny._create(r,n)}class _g extends Su{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _g(e,n,r)}_apply(e){return new Hn(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function $j(t){return OU("limit",t),_g._create("limit",t,"F")}function qj(t){return OU("limitToLast",t),_g._create("limitToLast",t,"L")}class Cg extends Su{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cg(e,n,r)}_apply(e){const n=nQ(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,function(A,s){return new WA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,n))}}function Jj(...t){return Cg._create("startAt",t,!0)}function Xj(...t){return Cg._create("startAfter",t,!1)}class Ig extends Su{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ig(e,n,r)}_apply(e){const n=nQ(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,function(A,s){return new WA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,n))}}function Yj(...t){return Ig._create("endBefore",t,!1)}function Zj(...t){return Ig._create("endAt",t,!0)}function nQ(t,e,n,r){if(n[0]=Ue(n[0]),n[0]instanceof nu)return function(s,i,o,a,c){if(!a)throw new X(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of aa(s))if(h.field.isKeyField())d.push($i(i,a.key));else{const f=a.data.field(h.field);if(ig(f))throw new X(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new X(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new zs(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const A=co(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new X(j.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let m=0;m<d.length;m++){const x=d[m];if(f[m].field.isKeyField()){if(typeof x!="string")throw new X(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!jv(i)&&x.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const C=i.path.child(je.fromString(x));if(!oe.isDocumentKey(C))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const y=new oe(C);w.push($i(o,y))}else{const C=XU(a,c,x);w.push(C)}}return new zs(w,h)}(t._query,t.firestore._databaseId,A,e,n,r)}}function MC(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new X(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jv(e)&&n.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!oe.isDocumentKey(r))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $i(t,new oe(r))}if(n instanceof Et)return $i(t,n._key);throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mg(n)}.`)}function VC(t,e){if(!Array.isArray(t)||t.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rQ(t,e){const n=function(A,s){for(const i of A)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Py{convertValue(e,n="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ao(e,(A,s)=>{r[A]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,A;const s=(A=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.map(i=>mt(i.doubleValue));return new Cy(s)}convertGeoPoint(e){return new wg(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=LA(e);return new Bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Be(J1(r));const A=new Ks(r.get(1),r.get(3)),s=new oe(r.popFirst(5));return A.isEqual(n)||Vt(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class eK extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new dA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let OA=class extends nu{constructor(e,n,r,A,s,i){super(e,n,r,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},uc=class extends OA{data(e={}){return super.data(e)}},qs=class{constructor(e,n,r,A){this._firestore=e,this._userDataWriter=n,this._snapshot=A,this.metadata=new Fi(A.hasPendingWrites,A.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uc(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(o=>{const a=new uc(A._firestore,A._userDataWriter,o.doc.key,o.doc,new Fi(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new uc(A._firestore,A._userDataWriter,o.doc.key,o.doc,new Fi(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:tK(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function tK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}function AQ(t,e){return t instanceof OA&&e instanceof OA?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qs&&e instanceof qs&&t._firestore===e._firestore&&GU(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){t=Ze(t,Et);const e=Ze(t.firestore,jt);return NU(Qn(e),t._key).then(n=>Dy(e,t,n))}class ho extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new dA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function rK(t){t=Ze(t,Et);const e=Ze(t.firestore,jt),n=Qn(e),r=new ho(e);return Cj(n,t._key).then(A=>new OA(e,r,t._key,A,new Fi(A!==null&&A.hasLocalMutations,!0),t.converter))}function AK(t){t=Ze(t,Et);const e=Ze(t.firestore,jt);return NU(Qn(e),t._key,{source:"server"}).then(n=>Dy(e,t,n))}function sK(t){t=Ze(t,Hn);const e=Ze(t.firestore,jt),n=Qn(e),r=new ho(e);return tQ(t._query),PU(n,t._query).then(A=>new qs(e,r,t,A))}function iK(t){t=Ze(t,Hn);const e=Ze(t.firestore,jt),n=Qn(e),r=new ho(e);return Ij(n,t._query).then(A=>new qs(e,r,t,A))}function oK(t){t=Ze(t,Hn);const e=Ze(t.firestore,jt),n=Qn(e),r=new ho(e);return PU(n,t._query,{source:"server"}).then(A=>new qs(e,r,t,A))}function HC(t,e,n){t=Ze(t,Et);const r=Ze(t.firestore,jt),A=Eg(t.converter,e,n);return ku(r,[yg(co(r),"setDoc",t._key,A,t.converter!==null,n).toMutation(t._key,yt.none())])}function jC(t,e,n,...r){t=Ze(t,Et);const A=Ze(t.firestore,jt),s=co(A);let i;return i=typeof(e=Ue(e))=="string"||e instanceof $s?Uy(s,"updateDoc",t._key,e,n,r):Fy(s,"updateDoc",t._key,e),ku(A,[i.toMutation(t._key,yt.exists(!0))])}function aK(t){return ku(Ze(t.firestore,jt),[new qa(t._key,yt.none())])}function lK(t,e){const n=Ze(t.firestore,jt),r=hf(t),A=Eg(t.converter,e);return ku(n,[yg(co(t.firestore),"addDoc",r._key,A,t.converter!==null,{}).toMutation(r._key,yt.exists(!1))]).then(()=>r)}function sQ(t,...e){var n,r,A;t=Ue(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||O0(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(O0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let a,c,d;if(t instanceof Et)c=Ze(t.firestore,jt),d=Wa(t._key.path),a={next:h=>{e[i]&&e[i](Dy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=Ze(t,Hn);c=Ze(h.firestore,jt),d=h._query;const f=new ho(c);a={next:w=>{e[i]&&e[i](new qs(c,f,h,w))},error:e[i+1],complete:e[i+2]},tQ(t._query)}return function(f,w,m,x){const C=new gg(x),y=new fy(w,C,m);return f.asyncQueue.enqueueAndForget(async()=>uy(await Ra(f),y)),()=>{C.Za(),f.asyncQueue.enqueueAndForget(async()=>dy(await Ra(f),y))}}(Qn(c),d,o,a)}function cK(t,e){return Ej(Qn(t=Ze(t,jt)),O0(e)?e:{next:e})}function ku(t,e){return function(r,A){const s=new pn;return r.asyncQueue.enqueueAndForget(async()=>ej(await xy(r),A,s)),s.promise}(Qn(t),e)}function Dy(t,e,n){const r=n.docs.get(e._key),A=new ho(t);return new OA(t,A,e._key,r,new Fi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dK=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=co(e)}set(e,n,r){this._verifyNotCommitted();const A=gs(e,this._firestore),s=Eg(A.converter,n,r),i=yg(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,r);return this._mutations.push(i.toMutation(A._key,yt.none())),this}update(e,n,r,...A){this._verifyNotCommitted();const s=gs(e,this._firestore);let i;return i=typeof(n=Ue(n))=="string"||n instanceof $s?Uy(this._dataReader,"WriteBatch.update",s._key,n,r,A):Fy(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(i.toMutation(s._key,yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gs(e,this._firestore);return this._mutations=this._mutations.concat(new qa(n._key,yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gs(t,e){if((t=Ue(t)).firestore!==e)throw new X(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hK=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=co(n)}get(n){const r=gs(n,this._firestore),A=new eK(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return we();const i=s[0];if(i.isFoundDocument())return new nu(this._firestore,A,i.key,i,r.converter);if(i.isNoDocument())return new nu(this._firestore,A,r._key,null,r.converter);throw we()})}set(n,r,A){const s=gs(n,this._firestore),i=Eg(s.converter,r,A),o=yg(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,o),this}update(n,r,A,...s){const i=gs(n,this._firestore);let o;return o=typeof(r=Ue(r))=="string"||r instanceof $s?Uy(this._dataReader,"Transaction.update",i._key,r,A,s):Fy(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=gs(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=gs(e,this._firestore),r=new ho(this._firestore);return super.get(e).then(A=>new OA(this._firestore,r,n._key,A._document,new Fi(!1,!1),n.converter))}};function fK(t,e,n){t=Ze(t,jt);const r=Object.assign(Object.assign({},uK),n);return function(s){if(s.maxAttempts<1)throw new X(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,o){const a=new pn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await Bj(s);new vj(s.asyncQueue,c,o,i,a).au()}),a.promise}(Qn(t),A=>e(new hK(t,A)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(){return new Qu("deleteField")}function pK(){return new Iy("serverTimestamp")}function mK(...t){return new Ey("arrayUnion",t)}function wK(...t){return new by("arrayRemove",t)}function vK(t){return new Ty("increment",t)}(function(e,n=!0){(function(A){za=A})(ti),Vs(new aA("firestore",(r,{instanceIdentifier:A,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new jt(new CM(r.getProvider("auth-internal")),new TM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(c.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Hr(S_,"4.7.3",e),Hr(S_,"4.7.3","esm2017")})();const yK="@firebase/firestore-compat",BK="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function GC(){if(!eV())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}let iQ=class V0{constructor(e){this._delegate=e}static fromBase64String(e){return GC(),new V0(dA.fromBase64String(e))}static fromUint8Array(e){return KC(),new V0(dA.fromUint8Array(e))}toBase64(){return GC(),this._delegate.toBase64()}toUint8Array(){return KC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){return xK(t,["next","error","complete"])}function xK(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{enableIndexedDbPersistence(e,n){return kj(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Rj(e._delegate)}clearIndexedDbPersistence(e){return Nj(e._delegate)}}class oQ{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&cA("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Fj(this._delegate,e,n,r)}enableNetwork(){return Dj(this._delegate)}disableNetwork(){return Lj(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LU("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Pj(this._delegate)}onSnapshotsInSync(e){return cK(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Na(this,jU(this._delegate,e))}catch(n){throw Dn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ir(this,hf(this._delegate,e))}catch(n){throw Dn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pn(this,Uj(this._delegate,e))}catch(n){throw Dn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return fK(this._delegate,n=>e(new aQ(this,n)))}batch(){return Qn(this._delegate),new lQ(new dK(this._delegate,e=>ku(this._delegate,e)))}loadBundle(e){return Oj(this._delegate,e)}namedQuery(e){return Mj(this._delegate,e).then(n=>n?new Pn(this,n):null)}}class bg extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new iQ(new dA(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ir.forKey(n,this.firestore,null)}}function CK(t){yM(t)}class aQ{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new bg(e)}get(e){const n=Ui(e);return this._delegate.get(n).then(r=>new ru(this._firestore,new OA(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const A=Ui(e);return r?(Ly("Transaction.set",r),this._delegate.set(A,n,r)):this._delegate.set(A,n),this}update(e,n,r,...A){const s=Ui(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...A),this}delete(e){const n=Ui(e);return this._delegate.delete(n),this}}class lQ{constructor(e){this._delegate=e}set(e,n,r){const A=Ui(e);return r?(Ly("WriteBatch.set",r),this._delegate.set(A,n,r)):this._delegate.set(A,n),this}update(e,n,r,...A){const s=Ui(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...A),this}delete(e){const n=Ui(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class to{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new uc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Au(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=to.INSTANCES;let A=r.get(e);A||(A=new WeakMap,r.set(e,A));let s=A.get(n);return s||(s=new to(e,new bg(e),n),A.set(n,s)),s}}to.INSTANCES=new WeakMap;class Ir{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ir(n,new Et(n._delegate,r,new oe(e)))}static forKey(e,n,r){return new Ir(n,new Et(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Na(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Na(this.firestore,jU(this._delegate,e))}catch(n){throw Dn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ue(e),e instanceof Et?KU(this._delegate,e):!1}set(e,n){n=Ly("DocumentReference.set",n);try{return n?HC(this._delegate,e,n):HC(this._delegate,e)}catch(r){throw Dn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?jC(this._delegate,e):jC(this._delegate,e,n,...r)}catch(A){throw Dn(A,"updateDoc()","DocumentReference.update()")}}delete(){return aK(this._delegate)}onSnapshot(...e){const n=cQ(e),r=uQ(e,A=>new ru(this.firestore,new OA(this.firestore._delegate,this._userDataWriter,A._key,A._document,A.metadata,this._delegate.converter)));return sQ(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=rK(this._delegate):(e==null?void 0:e.source)==="server"?n=AK(this._delegate):n=nK(this._delegate),n.then(r=>new ru(this.firestore,new OA(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ir(this.firestore,e?this._delegate.withConverter(to.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Dn(t,e,n){return t.message=t.message.replace(e,n),t}function cQ(t){for(const e of t)if(typeof e=="object"&&!H0(e))return e;return{}}function uQ(t,e){var n,r;let A;return H0(t[0])?A=t[0]:H0(t[1])?A=t[1]:typeof t[0]=="function"?A={next:t[0],error:t[1],complete:t[2]}:A={next:t[1],error:t[2],complete:t[3]},{next:s=>{A.next&&A.next(e(s))},error:(n=A.error)===null||n===void 0?void 0:n.bind(A),complete:(r=A.complete)===null||r===void 0?void 0:r.bind(A)}}class ru{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return AQ(this._delegate,e._delegate)}}class Au extends ru{data(e){const n=this._delegate.data(e);return this._delegate._converter||BM(n!==void 0),n}}class Pn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new bg(e)}where(e,n,r){try{return new Pn(this.firestore,is(this._delegate,zj(e,n,r)))}catch(A){throw Dn(A,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Pn(this.firestore,is(this._delegate,Wj(e,n)))}catch(r){throw Dn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pn(this.firestore,is(this._delegate,$j(e)))}catch(n){throw Dn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Pn(this.firestore,is(this._delegate,qj(e)))}catch(n){throw Dn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pn(this.firestore,is(this._delegate,Jj(...e)))}catch(n){throw Dn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pn(this.firestore,is(this._delegate,Xj(...e)))}catch(n){throw Dn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pn(this.firestore,is(this._delegate,Yj(...e)))}catch(n){throw Dn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pn(this.firestore,is(this._delegate,Zj(...e)))}catch(n){throw Dn(n,"endAt()","Query.endAt()")}}isEqual(e){return GU(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=iK(this._delegate):(e==null?void 0:e.source)==="server"?n=oK(this._delegate):n=sK(this._delegate),n.then(r=>new j0(this.firestore,new qs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=cQ(e),r=uQ(e,A=>new j0(this.firestore,new qs(this.firestore._delegate,this._userDataWriter,this._delegate,A._snapshot)));return sQ(this._delegate,n,r)}withConverter(e){return new Pn(this.firestore,e?this._delegate.withConverter(to.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class IK{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Au(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class j0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Pn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Au(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new IK(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Au(this._firestore,r))})}isEqual(e){return AQ(this._delegate,e._delegate)}}class Na extends Pn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ir(this.firestore,e):null}doc(e){try{return e===void 0?new Ir(this.firestore,hf(this._delegate)):new Ir(this.firestore,hf(this._delegate,e))}catch(n){throw Dn(n,"doc()","CollectionReference.doc()")}}add(e){return lK(this._delegate,e).then(n=>new Ir(this.firestore,n))}isEqual(e){return KU(this._delegate,e._delegate)}withConverter(e){return new Na(this.firestore,e?this._delegate.withConverter(to.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ui(t){return Ze(t,Et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(...e){this._delegate=new $s(...e)}static documentId(){return new Oy(vt.keyField().canonicalString())}isEqual(e){return e=Ue(e),e instanceof $s?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._delegate=e}static serverTimestamp(){const e=pK();return e._methodName="FieldValue.serverTimestamp",new xi(e)}static delete(){const e=gK();return e._methodName="FieldValue.delete",new xi(e)}static arrayUnion(...e){const n=mK(...e);return n._methodName="FieldValue.arrayUnion",new xi(n)}static arrayRemove(...e){const n=wK(...e);return n._methodName="FieldValue.arrayRemove",new xi(n)}static increment(e){const n=vK(e);return n._methodName="FieldValue.increment",new xi(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK={Firestore:oQ,GeoPoint:wg,Timestamp:Bt,Blob:iQ,Transaction:aQ,WriteBatch:lQ,DocumentReference:Ir,DocumentSnapshot:ru,Query:Pn,QueryDocumentSnapshot:Au,QuerySnapshot:j0,CollectionReference:Na,FieldPath:Oy,FieldValue:xi,setLogLevel:CK,CACHE_SIZE_UNLIMITED:Sj};function bK(t,e){t.INTERNAL.registerComponent(new aA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),A=n.getProvider("firestore").getImmediate();return e(r,A)},"PUBLIC").setServiceProps(Object.assign({},EK)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t){bK(t,(e,n)=>new oQ(e,n,new _K)),t.registerVersion(yK,BK)}TK(ni);const FK={VITE_FIREBASE_API_KEY:"AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",VITE_FIREBASE_APP_ID:"1:323355347910:web:c81f2813dce5ee9373c0c7",VITE_FIREBASE_AUTH_DOMAIN:"zameny-b6c3f.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"323355347910",VITE_FIREBASE_PROJECT_ID:"zameny-b6c3f",VITE_FIREBASE_STORAGE_BUCKET:"zameny-b6c3f.firebasestorage.app"},Co=FK,dQ={apiKey:Co.VITE_FIREBASE_API_KEY,authDomain:Co.VITE_FIREBASE_AUTH_DOMAIN,projectId:Co.VITE_FIREBASE_PROJECT_ID,storageBucket:Co.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Co.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Co.VITE_FIREBASE_APP_ID};if(!dQ.apiKey)throw alert(" :  Firebase API . ,    .env          VITE_"),new Error("CRITICAL ERROR: Firebase API Key is missing. Check that your .env file exists and is configured correctly with VITE_ variables.");ni.initializeApp(dQ);ni.firestore();const gh=ni.auth(),hQ=S.createContext(void 0),UK="admin@gymnasium22.com",QK="teacher@gymnasium22.com",SK=({children:t})=>{const[e,n]=S.useState(null),[r,A]=S.useState(null),[s,i]=S.useState(!0);S.useEffect(()=>{const c=gh.onAuthStateChanged(d=>{n(d),d?d.email===UK?A("admin"):d.email===QK?A("teacher"):(A(null),gh.signOut()):A(null),i(!1)});return()=>c()},[]);const o=async()=>{await gh.signOut(),A(null)},a=()=>{A("guest"),i(!1)};return l.jsx(hQ.Provider,{value:{user:e,role:r,loading:s,logout:o,setGuestRole:a},children:t})},Ru=()=>{const t=S.useContext(hQ);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},kK={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},J=({name:t,size:e=24,className:n="",...r})=>{const A=kK[t];return A?l.jsx(A,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},UA=({isOpen:t,onClose:e,title:n,children:r,maxWidth:A="max-w-lg"})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(J,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,RK=({x:t,y:e,onClose:n,actions:r})=>{if(S.useEffect(()=>{const s=()=>n();return window.addEventListener("click",s),()=>window.removeEventListener("click",s)},[n]),t===null||e===null)return null;const A={top:e,left:t};return window.innerWidth-t<200&&(A.left=t-200),l.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:A,children:r.map((s,i)=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),s.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${s.color||"text-slate-700 dark:text-slate-200"}`,children:[s.icon&&l.jsx(J,{name:s.icon,size:16}),s.label]},i))})},NK=()=>{const{bellSchedule:t}=KA(),[e,n]=S.useState("..."),[r,A]=S.useState(""),[s,i]=S.useState(0),[o,a]=S.useState("bg-slate-500"),[c,d]=S.useState("");return S.useEffect(()=>{const h=()=>{const w=new Date,m=w.getDay(),C=[null,or.Monday,or.Tuesday,or.Wednesday,or.Thursday,or.Friday,null][m];if(d(C||""),!C){n(" "),A(" "),a("bg-slate-400"),i(0);return}const y=w.getHours()*60+w.getMinutes();let B=t.filter(R=>R.day===C);B.length===0&&(B=t.filter(R=>R.day==="default"));let v=null;const k=R=>{const[N,I]=R.split(":").map(Number);return N*60+I};for(const R of B){const N=k(R.start),I=k(R.end);if(y>=N&&y<I){v={...R,duration:I-N,passed:y-N};break}}if(v)n(`${v.period} `),A(`${v.shift===ae.First?"1 ":"2 "}  . ${v.duration-v.passed} `),i(v.passed/v.duration*100),a("bg-indigo-600");else{let R=1/0,N=null;for(const I of B){const _=k(I.start);_>y&&_-y<R&&(R=_-y,N=I)}N&&R<30?(n(""),A(` ${R}  ${N.period} `),a("bg-amber-500"),i(100-R/20*100)):(n(" "),A(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:l.jsx(J,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),s>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${s}%`}})})]})},Vp=({options:t,value:e,onChange:n,placeholder:r,groupBy:A})=>{var w;const[s,i]=S.useState(!1),[o,a]=S.useState(""),c=S.useRef(null);S.useEffect(()=>{const m=x=>{c.current&&!c.current.contains(x.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const h=((w=(A?t.flatMap(m=>m.options):t).find(m=>m.value===e))==null?void 0:w.label)||r,f=A?t.map(m=>({...m,options:m.options.filter(x=>x.label.toLowerCase().includes(o.toLowerCase()))})).filter(m=>m.options.length>0):t.filter(m=>m.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(J,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:m=>a(m.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A?f.map((m,x)=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:m.label}),m.options.map(C=>l.jsx("div",{onClick:()=>{n(C.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===C.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:C.label},C.value))]},x)):f.map(m=>l.jsx("div",{onClick:()=>{n(m.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===m.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:m.label},m.value))]})]})},Bd=({children:t,className:e=""})=>{const n=Ci.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,A)=>l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:r},A))})},Hp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>l.jsx("div",{className:"space-y-3",children:t.map((r,A)=>l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},A))}),PK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,settings:s}=KA(),{schedule:i,substitutions:o}=Va(),a=hu(),[c,d]=S.useState(localStorage.getItem("gym_notes")||""),[h]=S.useState(new Date),[f,w]=S.useState(""),[m,x]=S.useState(null),[C,y]=S.useState(!1),[B,v]=S.useState(""),[k,R]=S.useState(!1),[N,I]=S.useState(""),[_,b]=S.useState(!1);S.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){v("");const F=setTimeout(()=>v(""),2e3);return()=>clearTimeout(F)}},[c]);const Q=F=>new Date(F.getTime()-F.getTimezoneOffset()*6e4).toISOString().split("T")[0],U=S.useMemo(()=>Q(h),[h]),D=S.useMemo(()=>{const F=h.getDay();return F===0||F===6?null:bn[F-1]},[h]),T=S.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),e.filter(L=>L.birthDate).map(L=>{const H=new Date(L.birthDate);let $=new Date(F.getFullYear(),H.getMonth(),H.getDate());$<F&&$.setFullYear(F.getFullYear()+1);const z=Math.ceil(($.getTime()-F.getTime())/(1e3*60*60*24));return{...L,diff:z,age:F.getFullYear()-H.getFullYear()}}).filter(L=>L.diff<=30).sort((L,H)=>L.diff-H.diff)},[e]),Fe=S.useMemo(()=>{const F=e.length,L=new Map;e.filter(re=>re.unavailableDates.includes(U)).forEach(re=>{var Qe;const $e=((Qe=re.absenceReasons)==null?void 0:Qe[U])===" "?" ":"";L.set(re.id,{id:re.id,name:re.name,displayReason:$e})});const H=o.filter(re=>re.date===U&&re.replacementTeacherId!=="conducted"),$=new Map;H.forEach(re=>{if(L.has(re.originalTeacherId))return;const Re=e.find(Le=>Le.id===re.originalTeacherId);if(!Re)return;const $e=i.find(Le=>Le.id===re.scheduleItemId);if(!$e)return;$.has(re.originalTeacherId)||$.set(re.originalTeacherId,{teacher:Re,lessons:[]}),$.get(re.originalTeacherId).lessons.push({period:$e.period,reason:re.lessonAbsenceReason})});const z=Array.from(L.values());$.forEach((re,Re)=>{const $e=re.lessons.sort((Se,ke)=>Se.period-ke.period),Qe=$e.map(Se=>Se.period).join(", "),Xe=$e.some(Se=>Se.reason===" ")?" ":"";z.push({id:Re,name:re.teacher.name,displayReason:`${Qe} : ${Xe}`})}),z.sort((re,Re)=>re.name.localeCompare(Re.name));const fe=z.length,pe=F-fe;return{presentPercent:F>0?Math.round(pe/F*100):0,absentCount:fe,totalTeachers:F,absentTeachersList:z}},[e,U,o,i]),et=S.useMemo(()=>{const F=new Date(h);for(F.setDate(h.getDate()+1);F.getDay()===0||F.getDay()===6;)F.setDate(F.getDate()+1);const H=[null,"","","","","",null][F.getDay()];if(!H)return[];const $=[];return n.forEach(z=>{const fe=i.filter(pe=>pe.classId===z.id&&pe.day===H);fe.length===0?$.push({class:z.name,issue:`   ${H}`}):fe.length<4&&$.push({class:z.name,issue:`  (${fe.length})`}),fe.forEach(pe=>{if(i.some(re=>re.id!==pe.id&&re.day===H&&re.period===pe.period&&re.shift===pe.shift&&re.teacherId===pe.teacherId)&&$.push({class:z.name,issue:`  (${pe.period} )`}),pe.roomId){const re=r.find(Re=>Re.id===pe.roomId);re&&re.capacity<z.studentsCount&&$.push({class:z.name,issue:`: ${re.name} (${pe.period} )`})}})}),$.filter((z,fe,pe)=>pe.findIndex(Ee=>Ee.class===z.class&&Ee.issue===z.issue)===fe).slice(0,10)},[i,n,e,r,h]),ee=S.useMemo(()=>{if(!D)return 0;let F=0;const L=i.filter(H=>H.day===D);for(const H of L){const $=e.find(z=>z.id===H.teacherId);if($&&$.unavailableDates.includes(U)){const z=o.find(fe=>fe.scheduleItemId===H.id&&fe.date===U);(!z||z.replacementTeacherId==="cancelled"||z.replacementTeacherId==="conducted")&&F++}}return F},[i,e,o,U,D]),Ie=()=>{var $e;if(!f){x(null);return}const F=new Date,H=[null,or.Monday,or.Tuesday,or.Wednesday,or.Thursday,or.Friday,null][F.getDay()];if(!H){x({status:"",detail:"  ",color:"text-slate-500"});return}const $=Qe=>{const[Le,Xe]=Qe.split(":").map(Number);return Le*60+Xe},z=F.getHours()*60+F.getMinutes();let fe=A.filter(Qe=>Qe.day===H);fe.length===0&&(fe=A.filter(Qe=>Qe.day==="default"));const pe=fe.find(Qe=>{const Le=$(Qe.start),Xe=$(Qe.end);return z>=Le&&z<=Xe}),Ee=f.toLowerCase(),re=e.find(Qe=>Qe.name.toLowerCase().includes(Ee)),Re=n.find(Qe=>Qe.name.toLowerCase().includes(Ee));if(!re&&!Re){x({status:" ",detail:" ",color:"text-red-500"});return}if(re){if(re.unavailableDates.includes(U)){x({status:"",detail:(($e=re.absenceReasons)==null?void 0:$e[U])||"/",color:"text-red-500",icon:"UserX",items:[]});return}if(!pe){x({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Qe=i.filter(Se=>Se.teacherId===re.id&&Se.day===H&&Se.period===pe.period),Le=o.filter(Se=>Se.date===U&&Se.replacementTeacherId===re.id).map(Se=>i.find(ke=>ke.id===Se.scheduleItemId)).filter(Se=>!!Se&&Se.day===H&&Se.period===pe.period);let Xe=[];Qe.forEach(Se=>{var Oe,Pt,ut;const ke=o.find(en=>en.date===U&&en.scheduleItemId===Se.id);if(!ke||ke.replacementTeacherId===re.id){const en=((Oe=r.find(W=>W.id===((ke==null?void 0:ke.replacementRoomId)||Se.roomId)))==null?void 0:Oe.name)||(ke==null?void 0:ke.replacementRoomId)||Se.roomId||" .",vn=(Pt=t.find(W=>W.id===Se.subjectId))==null?void 0:Pt.name,O=(ut=n.find(W=>W.id===Se.classId))==null?void 0:ut.name;Xe.push({room:en,subject:vn,entityName:O,direction:Se.direction,isSubstitution:!!(ke&&ke.replacementTeacherId===re.id),originalTeacherName:null})}}),Le.forEach(Se=>{var vn,O,W;const ke=o.find(ne=>ne.date===U&&ne.scheduleItemId===Se.id&&ne.replacementTeacherId===re.id);if(!ke)return;const Oe=((vn=r.find(ne=>ne.id===(ke.replacementRoomId||Se.roomId)))==null?void 0:vn.name)||ke.replacementRoomId||Se.roomId||" .",Pt=(O=t.find(ne=>ne.id===Se.subjectId))==null?void 0:O.name,ut=(W=n.find(ne=>ne.id===Se.classId))==null?void 0:W.name,en=e.find(ne=>ne.id===ke.originalTeacherId);Xe.push({room:Oe,subject:Pt,entityName:ut,direction:Se.direction,isSubstitution:!0,originalTeacherName:en==null?void 0:en.name})}),Xe.length>0?x({status:` ${pe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Xe}):x({status:"",detail:` ( ${pe.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(Re){if(!pe){x({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Qe=i.filter(Le=>Le.classId===Re.id&&Le.day===H&&Le.period===pe.period);if(Qe.length>0){const Le=Qe.map(ke=>{var ue,be,_e,Ae,ge;const Oe=o.find(de=>de.scheduleItemId===ke.id&&de.date===U);if(Oe&&Oe.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(ue=t.find(de=>de.id===ke.subjectId))==null?void 0:ue.name};const Pt=!!(Oe&&Oe.replacementTeacherId!=="conducted"&&Oe.replacementTeacherId!=="cancelled"),ut=Pt?Oe.replacementTeacherId:ke.teacherId,en=(Oe==null?void 0:Oe.replacementRoomId)||ke.roomId,vn=(be=e.find(de=>de.id===ut))==null?void 0:be.name,O=((_e=r.find(de=>de.id===en))==null?void 0:_e.name)||en||" .",W=(Ae=t.find(de=>de.id===ke.subjectId))==null?void 0:Ae.name,ne=Pt?(ge=e.find(de=>de.id===Oe.originalTeacherId))==null?void 0:ge.name:null;return{room:O,subject:W,entityName:vn,direction:ke.direction,isSubstitution:Pt,originalTeacherName:ne}}),Xe=Le.filter(ke=>!ke.cancelled),Se=Le.filter(ke=>!!ke.cancelled);Xe.length>0?x({status:` ${pe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Xe}):Se.length>0?x({status:" ",detail:Se.map(ke=>ke.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):x({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else x({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},G=async()=>{if(!N.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}b(!0);const F=` *   :*

${N}`;try{const H=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:F,parse_mode:"Markdown"})})).json();if(H.ok)alert("!   ."),R(!1),I("");else throw new Error(H.description)}catch(L){console.error("   Telegram:",L),alert(`   . : ${L}`)}finally{b(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(J,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(J,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:F=>w(F.target.value),onKeyDown:F=>F.key==="Enter"&&Ie(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:Ie,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(J,{name:"Search",size:20})})]}),m&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${m.color}`,children:[l.jsx(J,{name:m.icon||"Info",size:14})," ",m.status]}),m.items&&m.items.length>0?l.jsx("div",{className:"space-y-2",children:m.items.map((F,L)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[F.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:F.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.subject}),F.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:F.originalTeacherName?` ( ${F.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:F.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:F.room})]})]},L))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:m.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(J,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:ee>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:ee}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(J,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>y(!C),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:C?" ":" ",children:l.jsx(J,{name:C?"PieChart":"List",size:20})})]}),C?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Fe.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Fe.absentTeachersList.map(F=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:F.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:F.displayReason})]},F.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(J,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Fe.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Fe.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Fe.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(J,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(F=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.name}),l.jsx("span",{className:"font-bold text-slate-400",children:F.diff===0?"!":`${F.diff} .`})]},F.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(J,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:et.length?et.map((F,L)=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:F.issue})]},L)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(J,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:F=>d(F.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),B&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(J,{name:"Save",size:12})," ",B]})]})]})]}),l.jsx(UA,{isOpen:k,onClose:()=>R(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:N,onChange:F=>I(F.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:G,disabled:_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[_?l.jsx(J,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(J,{name:"Send",size:16}),_?"...":""]})})]})})]})};var fQ={},gQ={},pQ={},Tg={};Object.defineProperty(Tg,"__esModule",{value:!0});function DK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Tg.default=DK;var My={};Object.defineProperty(My,"__esModule",{value:!0});var LK=Tg,OK=" and ";function MK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],A=LK.default(n),s=r;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(OK)}My.default=MK;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});function VK(){}Vy.default=VK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Tg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=My;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=Vy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(pQ);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=S,n=pQ;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(A){return!0}};var r=function(A){return function(s,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&c(!!f.matches)};return f.addListener(w),c(f.matches),function(){h=!1,f.removeListener(w)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(gQ);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=gQ;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(fQ);const HK=zI(fQ),mQ=({readOnly:t=!1})=>{const{subjects:e,teachers:n,classes:r,rooms:A}=KA(),{schedule:s,saveScheduleData:i,canUndo:o,canRedo:a,undo:c,redo:d}=Va(),[h,f]=S.useState(ae.First),[w,m]=S.useState(or.Monday),[x,C]=S.useState(!1),[y,B]=S.useState({}),[v,k]=S.useState("class"),[R,N]=S.useState(""),[I,_]=S.useState(""),[b,Q]=S.useState(""),[U,D]=S.useState(!1),[T,Fe]=S.useState({visible:!1,x:0,y:0,item:null,cell:null}),[et,ee]=S.useState(null),[Ie,G]=S.useState([]),[F,L]=S.useState(null),[H,$]=S.useState(null),z=HK({maxWidth:767}),[fe,pe]=S.useState(!0),[Ee,re]=S.useState(!1),[Re,$e]=S.useState({isOpen:!1,type:"",day:"",classId:""}),[Qe,Le]=S.useState(or.Monday),[Xe,Se]=S.useState(""),ke=eA[h],Oe=()=>v==="week"?eA[h].map(P=>({id:P.toString(),name:`${P} `})):v==="class"?R?r.filter(P=>P.id===R&&P.shift===h):r.filter(P=>P.shift===h):v==="teacher"?R?n.filter(P=>P.id===R):n:v==="subject"?R?e.filter(P=>P.id===R):e:[],Pt=(P,q)=>{let ye=[];if(v==="week"){const ie=parseInt(P),ce=q;ye=s.filter(Te=>Te.shift===h&&Te.period===ie&&Te.day===ce),R&&(ye=ye.filter(Te=>Te.classId===R))}else{const ie=q;v==="class"&&(ye=s.filter(ce=>ce.classId===P&&ce.period===ie&&ce.day===w&&ce.shift===h)),v==="teacher"&&(ye=s.filter(ce=>ce.teacherId===P&&ce.period===ie&&ce.day===w&&ce.shift===h)),v==="subject"&&(ye=s.filter(ce=>ce.subjectId===P&&ce.period===ie&&ce.day===w&&ce.shift===h))}return I&&(ye=ye.filter(ie=>{if(!ie.roomId)return!1;const ce=A.find(nt=>nt.id===ie.roomId);return(ce?ce.name:ie.roomId).toLowerCase().includes(I.toLowerCase())})),b&&(ye=ye.filter(ie=>{var ce;return(ce=ie.direction)==null?void 0:ce.toLowerCase().includes(b.toLowerCase())})),ye},ut=P=>{const q=[],ye=s.filter(Te=>Te.id!==P.id&&Te.day===P.day&&Te.period===P.period&&Te.shift===P.shift);return ye.find(Te=>Te.teacherId===P.teacherId)&&q.push("teacher"),ye.find(Te=>!(Te.classId!==P.classId||Te.direction&&P.direction&&Te.direction!==P.direction))&&q.push("class"),P.roomId&&ye.find(nt=>nt.roomId===P.roomId)&&q.push("room"),q},en=(P,q,ye)=>{const ie=[],ce=r.find(qe=>qe.id===P),Te=e.find(qe=>qe.id===q),nt=A.find(qe=>qe.id===ye);return nt&&(ce&&nt.capacity<ce.studentsCount&&ie.push(`  !   ${ce.studentsCount} .,     ${nt.capacity}.`),Te&&Te.requiredRoomType&&Te.requiredRoomType!==""&&nt.type!==Te.requiredRoomType&&ie.push(`   !   "${Te.requiredRoomType}",   "${nt.type}".`)),ie},vn=P=>{const q=en(P.classId,P.subjectId,P.roomId);G(q)},O=P=>{t||(B(P),vn(P),C(!0))},W=(P,q,ye=w)=>{if(t)return;const ie={period:q,day:ye,shift:h,id:Math.random().toString(36).substr(2,9)};v==="class"&&(ie.classId=P),v==="teacher"&&(ie.teacherId=P),v==="subject"&&(ie.subjectId=P),v==="week"&&(ie.period=parseInt(P),ie.day=ye,R&&r.find(ce=>ce.id===R)&&(ie.classId=R)),B(ie),G([]),C(!0)},ne=async()=>{if(!y.subjectId||!y.teacherId||!y.classId)return;let P=[...s];const q=P.findIndex(ye=>ye.id===y.id);q>=0?P[q]=y:P.push(y),await i({schedule:P}),C(!1)},ue=async P=>{const q=s.filter(ye=>ye.id!==(P||y.id));await i({schedule:q}),C(!1)},be=(P,q,ye)=>{t||(P.preventDefault(),P.stopPropagation(),Fe({visible:!0,x:P.clientX,y:P.clientY,item:q,cell:ye}))},_e=(P,q)=>{if(t)return;L(q),P.dataTransfer.effectAllowed="move";const ye=P.target;setTimeout(()=>ye.classList.add("dragging"),0)},Ae=P=>{P.target.classList.remove("dragging"),L(null),$(null)},ge=(P,q)=>{P.preventDefault(),!t&&$(`${q.rowId}-${q.colKey}`)},de=async(P,q)=>{if(P.preventDefault(),!F||t)return;const ye={...F};v==="week"?(ye.period=parseInt(q.rowId),ye.day=q.colKey):(ye.period=q.colKey,ye.day=w,v==="class"&&(ye.classId=q.rowId),v==="teacher"&&(ye.teacherId=q.rowId),v==="subject"&&(ye.subjectId=q.rowId));let ie=s.map(ce=>ce.id===ye.id?ye:ce);await i({schedule:ie}),L(null),$(null)},xe=[];T.item?xe.push({label:"",icon:"Copy",onClick:()=>ee(T.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>ue(T.item.id)}):T.cell&&(et&&xe.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...et,id:Math.random().toString(36).substr(2,9),day:w,shift:h,period:T.cell.colKey};v==="week"&&(P.day=T.cell.colKey,P.period=parseInt(T.cell.rowId)),v==="class"?P.classId=T.cell.rowId:v==="teacher"?P.teacherId=T.cell.rowId:v==="subject"&&(P.subjectId=T.cell.rowId);let q=[...s,P];await i({schedule:q}),ee(null)}}),xe.push({label:" ",icon:"Plus",onClick:()=>W(T.cell.rowId,T.cell.colKey,v==="week"?T.cell.colKey:w)}));const Ge=y.subjectId?n.filter(P=>P.subjectIds.includes(y.subjectId)):[],Dt=y.subjectId?n.filter(P=>!P.subjectIds.includes(y.subjectId)):n,ze=S.useMemo(()=>{var P,q,ye,ie;if(R){if(v==="teacher")return(P=n.find(ce=>ce.id===R))==null?void 0:P.name;if(v==="class")return(q=r.find(ce=>ce.id===R))==null?void 0:q.name;if(v==="subject")return(ye=e.find(ce=>ce.id===R))==null?void 0:ye.name;if(v==="week")return(ie=r.find(ce=>ce.id===R))==null?void 0:ie.name}return`  ${w}`},[R,v,n,r,e,w]),Ne=!!R,pr=S.useMemo(()=>Ne?bn:ke,[Ne,ke]),mr=S.useMemo(()=>Ne?eA[h].map(P=>({id:P.toString(),name:`${P} `})):Oe(),[Ne,h,Oe]),JA=(P,q)=>{if(Ne){const ye=parseInt(P),ie=q;let ce=s.filter(Te=>Te.shift===h&&Te.period===ye&&Te.day===ie);return v==="class"||v==="week"?ce=ce.filter(Te=>Te.classId===R):v==="teacher"?ce=ce.filter(Te=>Te.teacherId===R):v==="subject"&&(ce=ce.filter(Te=>Te.subjectId===R)),ce}else return Pt(P,q)},gA=Oe(),xt=v==="week"?bn:ke,Sn=(P,q,ye)=>{$e({isOpen:!0,type:P,day:q||"",classId:ye||""})},Gn=async()=>{let P=[...s];Re.type==="clearAll"?P=[]:Re.type==="clearDay"&&Re.day?P=P.filter(q=>q.day!==Re.day):Re.type==="clearClass"&&Re.classId&&(P=P.filter(q=>q.classId!==Re.classId)),await i({schedule:P}),$e({isOpen:!1,type:"",day:"",classId:""}),re(!1)},yn=(P,q,ye)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(ie=>{const ce=e.find(tn=>tn.id===ie.subjectId),Te=n.find(tn=>tn.id===ie.teacherId),nt=r.find(tn=>tn.id===ie.classId),qe=ut(ie),$t=A.find(tn=>tn.id===ie.roomId),kr=$t?$t.name:ie.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:tn=>_e(tn,ie),onDragEnd:t?void 0:Ae,onClick:t?void 0:()=>O(ie),onContextMenu:t?void 0:tn=>be(tn,ie,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${qe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:qe.length===0&&(ce!=null&&ce.color)?{backgroundColor:`${ce.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?nt==null?void 0:nt.name:ce==null?void 0:ce.name}),ie.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:ie.direction})]}),v==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:ce==null?void 0:ce.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:Te==null?void 0:Te.name,children:[l.jsx(J,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:v==="teacher"?nt==null?void 0:nt.name:Te==null?void 0:Te.name})]}),kr&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:$t?`: ${$t.capacity}, : ${$t.type}`:"",children:kr})]}),qe.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${qe.join(", ")}`,children:"!"})]},ie.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>W(ye,q,v==="week"?q:w),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(J,{name:"Plus",size:16})})]}),kn=()=>{if(!R)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=s.filter(q=>q.day===w&&q.shift===h&&(v==="class"&&q.classId===R||v==="teacher"&&q.teacherId===R||v==="subject"&&q.subjectId===R)).sort((q,ye)=>q.period-ye.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",w,"  ",h,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(q=>{const ye=e.find($t=>$t.id===q.subjectId),ie=n.find($t=>$t.id===q.teacherId),ce=r.find($t=>$t.id===q.classId),Te=A.find($t=>$t.id===q.roomId),nt=Te?Te.name:q.roomId,qe=ut(q);return l.jsxs("div",{onClick:t?void 0:()=>O(q),className:`rounded-xl p-4 shadow-sm border ${qe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[q.period," "]}),qe.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${qe.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ye==null?void 0:ye.name," ",q.direction&&`(${q.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ce==null?void 0:ce.name,"  ",ie==null?void 0:ie.name]}),nt&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",nt]})]},q.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[T.visible&&l.jsx(RK,{x:T.x,y:T.y,onClose:()=>Fe({...T,visible:!1}),actions:xe}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ae.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ae.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:bn.map(P=>l.jsx("button",{onClick:()=>m(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${w===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:c,disabled:!o,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(J,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:d,disabled:!a,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(J,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{k("class"),N("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(J,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{k("teacher"),N("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(J,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{k("subject"),N("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(J,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;k("week"),N(((P=r[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(J,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(J,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:R,onChange:P=>N(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&r.filter(P=>P.shift===h).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="teacher"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="subject"&&e.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:I,onChange:P=>_(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:P=>Q(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>re(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(J,{name:"List",size:16})," . ."]}),(R||v==="week")&&l.jsx("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(J,{name:"Printer",size:16})})]})]}),z&&!t&&R&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>pe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${fe?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(J,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>pe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${fe?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(J,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:z&&fe&&!t&&R?kn():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),xt.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:gA.length>0?gA.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),xt.map(q=>{const ye=Pt(P.id,q),ie=`${P.id}-${q}`;return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${H===ie?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:ce=>be(ce,null,{rowId:P.id,colKey:q}),onDragOver:t?void 0:ce=>ge(ce,{rowId:P.id,colKey:q}),onDrop:t?void 0:ce=>de(ce,{rowId:P.id,colKey:q}),children:yn(ye,q,P.id)},q)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(UA,{isOpen:x,onClose:()=>C(!1),title:y.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",y.day]}),l.jsxs("span",{children:[": ",y.period]}),l.jsxs("span",{children:[": ",y.shift===ae.First?"1 ":"2 "]})]}),Ie.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Ie.map((P,q)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(J,{name:"AlertTriangle",size:14}),P]},q))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Vp,{options:r.filter(P=>P.shift===h).map(P=>({value:P.id,label:P.name})),value:y.classId,onChange:P=>{B({...y,classId:P}),vn({...y,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Vp,{options:e.map(P=>({value:P.id,label:P.name})),value:y.subjectId,onChange:P=>{B({...y,subjectId:P}),vn({...y,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Vp,{options:[{value:"recommend",label:"",options:Ge.map(P=>({value:P.id,label:P.name}))},{value:"others",label:"",options:Dt.map(P=>({value:P.id,label:P.name}))}],value:y.teacherId,onChange:P=>B({...y,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:y.direction||"",onChange:P=>B({...y,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:y.roomId||"",onChange:P=>{B({...y,roomId:P.target.value}),vn({...y,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[y.id&&l.jsx("button",{onClick:()=>ue(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:ne,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(UA,{isOpen:Ee,onClose:()=>re(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>Sn("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:Qe,onChange:P=>Le(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:bn.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>Sn("clearDay",Qe),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Qe]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Xe,onChange:P=>Se(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{Xe&&Sn("clearClass",void 0,Xe)},disabled:!Xe,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(UA,{isOpen:Re.isOpen,onClose:()=>$e({...Re,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>$e({...Re,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Gn,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),U&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(J,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:ze}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:Ne||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),pr.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:Ne||v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:mr.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),pr.map(q=>{const ye=JA(P.id,q);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ye.map(ie=>{const ce=e.find(pA=>pA.id===ie.subjectId),Te=n.find(pA=>pA.id===ie.teacherId),nt=r.find(pA=>pA.id===ie.classId),qe=A.find(pA=>pA.id===ie.roomId),$t=qe?qe.name:ie.roomId,kr=v==="teacher",Og=v==="subject"||v==="week"||Ne&&kr?nt==null?void 0:nt.name:ce==null?void 0:ce.name,XA=kr?nt==null?void 0:nt.name:Te==null?void 0:Te.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Og,ie.direction&&` (${ie.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:XA}),$t&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:$t})]})]},ie.id)})},q)})]},P.id))})]})]})})]})]})},jK=()=>{var Ie,G;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,saveStaticData:s}=KA(),[i,o]=S.useState("teachers"),[a,c]=S.useState(!1),[d,h]=S.useState(null),[f,w]=S.useState({}),[m,x]=S.useState({}),[C,y]=S.useState({}),[B,v]=S.useState({}),[k,R]=S.useState("default"),[N,I]=S.useState(null),_=F=>{h(F||null),i==="teachers"?w(F?e.find(L=>L.id===F):{subjectIds:[],unavailableDates:[],shifts:[ae.First,ae.Second],telegramChatId:""}):i==="subjects"?x(F?t.find(L=>L.id===F):{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?y(F?n.find(L=>L.id===F):{shift:ae.First,studentsCount:25}):i==="rooms"&&v(F?r.find(L=>L.id===F):{capacity:30,type:""}),c(!0)},b=async()=>{const F=()=>Math.random().toString(36).substr(2,9);let L=[];if(i==="teachers"){if(!f.name)return;L=[...e],d?L=L.map(H=>H.id===d?{...H,...f}:H):L.push({...f,id:F(),unavailableDates:[]}),await s({teachers:L})}else if(i==="subjects"){if(!m.name)return;L=[...t],d?L=L.map(H=>H.id===d?{...H,...m}:H):L.push({...m,id:F()}),await s({subjects:L})}else if(i==="classes"){if(!C.name)return;L=[...n],d?L=L.map(H=>H.id===d?{...H,...C}:H):L.push({...C,id:F()}),await s({classes:L})}else if(i==="rooms"){if(!B.name)return;L=[...r],d?L=L.map(H=>H.id===d?{...H,...B}:H):L.push({...B,id:F()}),await s({rooms:L})}c(!1)},Q=async F=>{window.confirm(" ?")&&(i==="teachers"&&await s({teachers:e.filter(L=>L.id!==F)}),i==="subjects"&&await s({subjects:t.filter(L=>L.id!==F)}),i==="classes"&&await s({classes:n.filter(L=>L.id!==F)}),i==="rooms"&&await s({rooms:r.filter(L=>L.id!==F)}))},U=(F,L)=>{I(L),F.dataTransfer.effectAllowed="move"},D=F=>{F.preventDefault()},T=async(F,L)=>{if(N===null||N===L)return;let H=[];i==="teachers"?H=[...e]:i==="subjects"?H=[...t]:i==="classes"?H=[...n]:H=[...r];const $=H.splice(N,1)[0];H.splice(L,0,$),i==="teachers"?await s({teachers:H}):i==="subjects"?await s({subjects:H}):i==="classes"?await s({classes:H}):await s({rooms:H}),I(null)},Fe=(F,L)=>{const H=k;let $=A.find(z=>z.shift===F&&z.period===L&&z.day===H);if(!$&&H!=="default"){const z=A.find(fe=>fe.shift===F&&fe.period===L&&fe.day==="default");return z?{...z,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return $||{start:"",end:""}},et=async(F,L,H,$)=>{let z=[...A];const fe=k,pe=z.findIndex(Ee=>Ee.shift===F&&Ee.period===L&&Ee.day===fe);pe>=0?z[pe]={...z[pe],[H]:$}:z.push({shift:F,period:L,[H]:$,start:"00:00",end:"00:00",day:fe}),await s({bellSchedule:z})},ee=F=>{const L=f.shifts||[];L.includes(F)?w({...f,shifts:L.filter(H=>H!==F)}):w({...f,shifts:[...L,F]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(F=>l.jsxs("button",{onClick:()=>o(F.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===F.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(J,{name:F.icon,size:18})," ",F.label]},F.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>_(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(J,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(Bd,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((F,L)=>{var H,$;return l.jsxs("div",{draggable:!0,onDragStart:z=>U(z,L),onDragOver:D,onDrop:z=>T(z,L),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:F.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>_(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(J,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(J,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:F.birthDate?`: ${new Date(F.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[((H=F.shifts)==null?void 0:H.includes(ae.First))&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),(($=F.shifts)==null?void 0:$.includes(ae.Second))&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:F.subjectIds.map(z=>{const fe=t.find(pe=>pe.id===z);return fe?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:fe.color,color:"#334155"},children:fe.name},z):null})})]},F.id)})}),i==="subjects"&&l.jsx(Bd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:F.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.difficulty,"  ",F.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>_(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(J,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(J,{name:"Trash2",size:16})})]})]},F.id))}),i==="classes"&&l.jsx(Bd,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(J,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[F.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${F.shift===ae.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[F.shift===ae.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>_(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(J,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(J,{name:"Trash2",size:14})})]})]},F.id))}),i==="rooms"&&l.jsx(Bd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(J,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.capacity,"  ",F.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>_(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(J,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(J,{name:"Trash2",size:16})})]})]},F.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(F=>l.jsx("button",{onClick:()=>R(F),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${k===F?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:F==="default"?"":F===""?"":""},F))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ae.First,ae.Second].map(F=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${F===ae.First?"bg-indigo-600":"bg-purple-600"}`,children:F}),l.jsx("div",{className:"p-6 space-y-3",children:eA[F].map(L=>{const H=Fe(F,L);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${H.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:L}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.start,onChange:$=>et(F,L,"start",$.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.end,onChange:$=>et(F,L,"end",$.target.value)})]})]},L)})})]},F))})]})]}),l.jsx(UA,{isOpen:a,onClose:()=>c(!1),title:"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:F=>w({...f,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:F=>w({...f,birthDate:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:F=>w({...f,telegramChatId:F.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Ie=f.shifts)==null?void 0:Ie.includes(ae.First),onChange:()=>ee(ae.First)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(G=f.shifts)==null?void 0:G.includes(ae.Second),onChange:()=>ee(ae.Second)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(F=>{var L;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(L=f.subjectIds)==null?void 0:L.includes(F.id),onChange:H=>{const $=f.subjectIds||[];w({...f,subjectIds:H.target.checked?[...$,F.id]:$.filter(z=>z!==F.id)})}}),l.jsx("span",{className:"text-sm dark:text-slate-300",children:F.name})]},F.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:m.name||"",onChange:F=>x({...m,name:F.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:m.color||"#ffffff",onChange:F=>x({...m,color:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.difficulty||5,onChange:F=>x({...m,difficulty:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.requiredRoomType,onChange:F=>x({...m,requiredRoomType:F.target.value}),children:Yx.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:C.name||"",onChange:F=>y({...C,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:C.studentsCount||25,onChange:F=>y({...C,studentsCount:parseInt(F.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>y({...C,shift:ae.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${C.shift===ae.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>y({...C,shift:ae.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${C.shift===ae.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:B.name||"",onChange:F=>v({...B,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.capacity||30,onChange:F=>v({...B,capacity:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.type,onChange:F=>v({...B,type:F.target.value}),children:Yx.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},KK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,saveStaticData:s}=KA(),{schedule:i,substitutions:o,saveScheduleData:a}=Va(),c=ei(),[d,h]=S.useState(new Date().toISOString().split("T")[0]),[f,w]=S.useState(!1),[m,x]=S.useState(null),[C,y]=S.useState(!1),[B,v]=S.useState(!1),[k,R]=S.useState(null),[N,I]=S.useState(""),[_,b]=S.useState(!1),[Q,U]=S.useState(""),[D,T]=S.useState(""),[Fe,et]=S.useState("all"),[ee,Ie]=S.useState(""),[G,F]=S.useState(""),[L,H]=S.useState(""),[$,z]=S.useState("");S.useEffect(()=>{var O;(O=c.state)!=null&&O.subParams&&(x(c.state.subParams),H(""),z(""),w(!0),window.history.replaceState({},document.title))},[c.state]);const fe=S.useMemo(()=>{const O=new Date(d).getDay();return O===0||O===6?null:bn[O-1]},[d]),pe=S.useMemo(()=>e.filter(O=>{const W=O.name.toLowerCase().includes(D.toLowerCase()),ne=Fe==="all"?!0:O.shifts.includes(Fe);return W&&ne}),[e,D,Fe]),Ee=S.useMemo(()=>e.filter(O=>O.unavailableDates.includes(d)),[e,d]),re=S.useMemo(()=>{if(!fe)return[];const O=Ee.map(Ae=>Ae.id),W=i.filter(Ae=>Ae.day===fe&&O.includes(Ae.teacherId)),ue=o.filter(Ae=>Ae.date===d).map(Ae=>Ae.scheduleItemId),be=i.filter(Ae=>ue.includes(Ae.id)),_e=[...W];return be.forEach(Ae=>{_e.find(ge=>ge.id===Ae.id)||_e.push(Ae)}),_e.sort((Ae,ge)=>Ae.period-ge.period)},[i,fe,Ee,o,d]),Re=O=>{var ne;const W=e.find(ue=>ue.id===O);R(O),I(((ne=W==null?void 0:W.absenceReasons)==null?void 0:ne[d])||""),y(!0)},$e=S.useCallback(async()=>{let O=[...e];const W=O.findIndex(ue=>ue.id===k);if(W===-1)return;const ne={...O[W]};ne.unavailableDates.includes(d)||(ne.unavailableDates=[...ne.unavailableDates,d]),ne.absenceReasons||(ne.absenceReasons={}),ne.absenceReasons[d]=N,O[W]=ne,await s({teachers:O}),y(!1)},[e,k,d,N,s]),Qe=S.useCallback(async O=>{let W=[...e];const ne=W.findIndex(be=>be.id===O);if(ne===-1)return;const ue={...W[ne]};ue.unavailableDates=ue.unavailableDates.filter(be=>be!==d),ue.absenceReasons&&delete ue.absenceReasons[d],W[ne]=ue,await s({teachers:W})},[e,d,s]),Le=S.useCallback(async O=>{if(!m){alert(":   .    . ,   ."),console.error("assignSubstitution: currentSubParams is null, returning.");return}const W=[...o],ne=i.find(_e=>_e.id===m.scheduleItemId);if(!ne){alert(":     . ,   ."),console.error("assignSubstitution: Schedule item not found for ID:",m.scheduleItemId);return}const ue=W.findIndex(_e=>_e.scheduleItemId===m.scheduleItemId&&_e.date===d),be={id:ue>=0?W[ue].id:Math.random().toString(36).substr(2,9),date:d,scheduleItemId:m.scheduleItemId,originalTeacherId:ne.teacherId,replacementTeacherId:O,replacementRoomId:L||void 0,lessonAbsenceReason:O!=="conducted"&&O!=="cancelled"&&$?$:void 0};ue>=0?W[ue]=be:W.push(be),await a({substitutions:W}),w(!1),Ie(""),H(""),z(""),x(null)},[m,d,L,i,o,e,$,a]),Xe=S.useCallback(async O=>{const W=o.filter(ne=>!(ne.scheduleItemId===O&&ne.date===d));await a({substitutions:W})},[o,d,a]),Se=S.useCallback(()=>{let O=`*  ${new Date(d).toLocaleDateString("ru-RU")}*
`;const W=o.some(ue=>ue.date===d&&ue.replacementTeacherId!=="conducted"),ne=(ue,be)=>{const Ae=re.filter(ge=>ge.shift===be).filter(ge=>{const de=o.find(xe=>xe.scheduleItemId===ge.id&&xe.date===d);return de&&de.replacementTeacherId!=="conducted"});Ae.length>0&&(O+=`
 *${ue.toUpperCase()}*
`,Ae.forEach(ge=>{var yn,kn,P;const de=o.find(q=>q.scheduleItemId===ge.id&&q.date===d),xe=n.find(q=>q.id===ge.classId),Ge=t.find(q=>q.id===ge.subjectId),Dt=de?e.find(q=>q.id===de.replacementTeacherId):null,ze=e.find(q=>q.id===ge.teacherId),Ne=((yn=r.find(q=>q.id===ge.roomId))==null?void 0:yn.name)||ge.roomId||"?",pr=(kn=ze==null?void 0:ze.absenceReasons)==null?void 0:kn[d],mr=de==null?void 0:de.lessonAbsenceReason,xt=(mr===" "?mr:null)||(pr===" "?pr:null),Sn=(ze==null?void 0:ze.name)+(xt?` (${xt})`:""),Gn=de!=null&&de.replacementRoomId?((P=r.find(q=>q.id===de.replacementRoomId))==null?void 0:P.name)||de.replacementRoomId:null;if(de)if(de.replacementTeacherId==="cancelled")O+=` ${xe==null?void 0:xe.name} (${ge.period} ): ${Ge==null?void 0:Ge.name} (${Sn}) ->  
`;else if(de.replacementTeacherId===de.originalTeacherId&&Gn)O+=` ${xe==null?void 0:xe.name} (${ge.period} ): ${Ge==null?void 0:Ge.name} (${ze==null?void 0:ze.name}) ->  ${Ne}  ${Gn}
`;else{let q=` ${xe==null?void 0:xe.name} (${ge.period} ): ${Ge==null?void 0:Ge.name} -> ${Dt==null?void 0:Dt.name} ( ${Sn})`;Gn&&(q+=`  . ${Gn}`),O+=q+`
`}}))};W?(ne(ae.First,ae.First),ne(ae.Second,ae.Second)):O+=`
 .`,navigator.clipboard.writeText(O),alert("     !")},[d,o,re,n,t,e,r]),ke=S.useCallback(()=>{let O=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(_e=>_e.date===d).forEach(_e=>{var gA;const Ae=i.find(xt=>xt.id===_e.scheduleItemId);if(!Ae)return;let ge="Unknown";if(_e.replacementTeacherId==="cancelled")ge=" ";else if(_e.replacementTeacherId==="conducted")ge=" ";else{const xt=e.find(Sn=>Sn.id===_e.replacementTeacherId);xt&&(ge=xt.name)}const de=t.find(xt=>xt.id===Ae.subjectId),xe=n.find(xt=>xt.id===Ae.classId),Ge=_e.date.replace(/-/g,""),Dt=e.find(xt=>xt.id===_e.originalTeacherId),ze=(gA=Dt==null?void 0:Dt.absenceReasons)==null?void 0:gA[d],Ne=_e.lessonAbsenceReason,JA=(Ne===" "?Ne:null)||(ze===" "?ze:null);O+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Ge}
SUMMARY:: ${xe==null?void 0:xe.name} - ${de==null?void 0:de.name}
DESCRIPTION:: ${ge}${JA?` (: ${JA})`:""}
END:VEVENT
`}),O+="END:VCALENDAR";const ne=new Blob([O],{type:"text/calendar"}),ue=URL.createObjectURL(ne),be=document.createElement("a");be.href=ue,be.download="substitutions.ics",document.body.appendChild(be),be.click(),document.body.removeChild(be)},[d,o,i,e,t,n]),Oe=S.useCallback(async()=>{if(!(A!=null&&A.telegramToken)){alert(" Telegram      ''.");return}let O=`*  ${new Date(d).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,W=!1;const ne=new Set,ue=[ae.First,ae.Second];for(const _e of ue){const ge=re.filter(de=>de.shift===_e).filter(de=>o.some(xe=>xe.scheduleItemId===de.id&&xe.date===d&&xe.replacementTeacherId!=="conducted"));ge.length>0&&(W=!0,O+=` *${_e.toUpperCase()}*
`,ge.forEach(de=>{var P,q,ye;const xe=o.find(ie=>ie.scheduleItemId===de.id&&ie.date===d);if(!xe)return;const Ge=n.find(ie=>ie.id===de.classId),Dt=t.find(ie=>ie.id===de.subjectId),ze=e.find(ie=>ie.id===xe.originalTeacherId),Ne=e.find(ie=>ie.id===xe.replacementTeacherId),pr=(P=ze==null?void 0:ze.absenceReasons)==null?void 0:P[d],mr=xe.lessonAbsenceReason,xt=(mr===" "?mr:null)||(pr===" "?pr:null),Sn=(ze==null?void 0:ze.name)+(xt?` (${xt})`:""),Gn=((q=r.find(ie=>ie.id===de.roomId))==null?void 0:q.name)||de.roomId||"",yn=xe.replacementRoomId?((ye=r.find(ie=>ie.id===xe.replacementRoomId))==null?void 0:ye.name)||xe.replacementRoomId:Gn;let kn=`${de.period}  (${Ge==null?void 0:Ge.name} ${Dt==null?void 0:Dt.name}${de.direction?` ${de.direction}`:""}): `;xe.replacementTeacherId==="cancelled"?kn+=`* * ( ${Sn})`:xe.replacementTeacherId===xe.originalTeacherId?kn+=`: ${Sn}.  : ${Gn}  ${yn}`:(kn+=`*${Ne==null?void 0:Ne.name}* ( *${Sn}*)`,Gn!==yn?kn+=`. : ${Gn}  ${yn}`:yn!==""&&(kn+=`. : ${yn}`)),O+=`${kn}
`,ze!=null&&ze.telegramChatId&&ne.add(ze.telegramChatId),Ne!=null&&Ne.telegramChatId&&ne.add(Ne.telegramChatId)}),O+=`
`)}if(W||(O+=` .
`),Ee.forEach(_e=>{var xe;const Ae=o.some(Ge=>Ge.date===d&&Ge.originalTeacherId===_e.id&&Ge.replacementTeacherId!=="cancelled"&&Ge.replacementTeacherId!=="conducted"),ge=(xe=_e.absenceReasons)==null?void 0:xe[d],de=ge===" "?ge:"";_e.telegramChatId&&!Ae&&_e.unavailableDates.includes(d)&&(ne.add(_e.telegramChatId),W?O+=`_:  ${_e.name} ${de},        /._
`:O+=`_:  ${_e.name} ${de},      ._
`)}),ne.size===0){alert("    Telegram Chat ID   .");return}const be=`https://api.telegram.org/bot${A.telegramToken}/sendMessage`;try{const _e=Array.from(ne).map(Ae=>fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:Ae,text:O,parse_mode:"Markdown"})}));await Promise.all(_e),alert(`   ${ne.size} !`)}catch(_e){console.error("    Telegram:",_e),alert("     Telegram.     .")}},[d,re,o,n,t,e,r,Ee,A==null?void 0:A.telegramToken]),Pt=S.useMemo(()=>{if(!m||!fe)return[];const O=d.substring(0,7);return e.filter(W=>W.name.toLowerCase().includes(ee.toLowerCase())).map(W=>{const ne=W.unavailableDates.includes(d),ue=i.some(ge=>ge.teacherId===W.id&&ge.day===fe&&ge.period===m.period&&ge.shift===m.shift),be=W.subjectIds.includes(m.subjectId),_e=o.filter(ge=>ge.replacementTeacherId===W.id&&ge.date.startsWith(O)).length;let Ae=0;return ne&&(Ae-=1e3),ue&&(Ae-=100),be&&(Ae+=50),{teacher:W,isAbsent:ne,isBusy:ue,isSpecialist:be,score:Ae,subsCount:_e}}).sort((W,ne)=>ne.score-W.score)},[e,m,d,ee,fe,i,o]),ut=S.useMemo(()=>{var _e;if(!m)return null;const O=i.find(Ae=>Ae.id===m.scheduleItemId);if(!O)return null;const W=n.find(Ae=>Ae.id===O.classId),ne=t.find(Ae=>Ae.id===O.subjectId),ue=e.find(Ae=>Ae.id===O.teacherId),be=((_e=ue==null?void 0:ue.unavailableDates)==null?void 0:_e.includes(d))||!1;return{className:W==null?void 0:W.name,subjectName:ne==null?void 0:ne.name,teacherName:ue==null?void 0:ue.name,teacherId:ue==null?void 0:ue.id,period:O.period,roomId:O.roomId,isTeacherAbsent:be}},[m,i,n,t,e,d]),en=S.useMemo(()=>{if(!fe||G.length<2)return[];const O=G.toLowerCase(),W=e.filter(be=>be.name.toLowerCase().includes(O)),ne=n.filter(be=>be.name.toLowerCase().includes(O)),ue=[];return W.forEach(be=>{i.filter(Ae=>Ae.teacherId===be.id&&Ae.day===fe).forEach(Ae=>{const ge=n.find(xe=>xe.id===Ae.classId),de=t.find(xe=>xe.id===Ae.subjectId);ue.push({...Ae,entityName:be.name,subInfo:ge==null?void 0:ge.name,subjectName:de==null?void 0:de.name})})}),ne.forEach(be=>{i.filter(Ae=>Ae.classId===be.id&&Ae.day===fe).forEach(Ae=>{if(ue.find(xe=>xe.id===Ae.id))return;const ge=e.find(xe=>xe.id===Ae.teacherId),de=t.find(xe=>xe.id===Ae.subjectId);ue.push({...Ae,entityName:be.name,subInfo:ge==null?void 0:ge.name,subjectName:de==null?void 0:de.name})})}),ue.sort((be,_e)=>be.period-_e.period)},[G,fe,e,n,i,t]),vn=S.useCallback(async(O,W,ne,ue,be,_e)=>{const ge=new Date(_e).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),de=W.shift===ae.First?"1 ":"2 ",xe=` *  *
${O.name}

 : ${ge}
 : ${de}
 : ${ne==null?void 0:ne.name}
1 : ${W.period}
 : ${ue==null?void 0:ue.name}
 : ${be||" "}`;if(A!=null&&A.telegramToken&&O.telegramChatId)try{const Dt=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:O.telegramChatId,text:xe,parse_mode:"Markdown"})})).json();Dt.ok?alert(`   Telegram  ${O.name}!`):Dt.description.includes("chat not found")?alert(` Telegram:   .

  ${O.name}       "" (/start).`):alert(` Telegram: ${Dt.description}`)}catch(Ge){alert("   Telegram (/)."),console.error(Ge)}else navigator.share?navigator.share({title:"",text:xe}).catch(()=>{}):(navigator.clipboard.writeText(xe),alert(" ! (Telegram     Chat ID)"))},[A==null?void 0:A.telegramToken]);return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(J,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:d,onChange:O=>h(O.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>b(!_),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${_?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(J,{name:"History",size:16})," ",_?" ":" "]})]}),_?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:Q,onChange:O=>U(O.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(O=>{var W;return O.date.includes(Q)||((W=e.find(ne=>ne.id===O.replacementTeacherId))==null?void 0:W.name.toLowerCase().includes(Q.toLowerCase()))}).map(O=>{const W=e.find(ue=>ue.id===O.replacementTeacherId),ne=r.find(ue=>ue.id===O.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:O.date}),l.jsx("div",{children:(W==null?void 0:W.name)||(O.replacementTeacherId==="cancelled"?"":"")}),ne&&l.jsxs("div",{className:"text-indigo-500",children:[". ",ne.name]})]},O.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>et("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Fe==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>et(ae.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Fe===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>et(ae.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Fe===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:D,onChange:O=>T(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[pe.map(O=>{const W=O.unavailableDates.includes(d),ne=O.absenceReasons?O.absenceReasons[d]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${W?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${W?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:O.name}),l.jsx("button",{onClick:()=>W?Qe(O.id):Re(O.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${W?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:W?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:O.shifts.map(ue=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:ue===ae.First?"1":"2"},ue))}),W&&l.jsxs("div",{className:"flex items-center gap-1",children:[ne&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:ne}),l.jsx("button",{onClick:()=>Re(O.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(J,{name:"Edit2",size:14})})]})]})]},O.id)}),pe.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",re.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(J,{name:"Calendar",size:16})," iCal"]}),re.length>0&&l.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(J,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Oe,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{F(""),v(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(J,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:re.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(J,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):re.map(O=>{var ze;const W=o.find(Ne=>Ne.scheduleItemId===O.id&&Ne.date===d),ne=W&&W.replacementTeacherId!=="cancelled"&&W.replacementTeacherId!=="conducted"?e.find(Ne=>Ne.id===W.replacementTeacherId):null,ue=e.find(Ne=>Ne.id===O.teacherId),be=t.find(Ne=>Ne.id===O.subjectId),_e=n.find(Ne=>Ne.id===O.classId),Ae=r.find(Ne=>Ne.id===O.roomId),ge=Ae?Ae.name:O.roomId,de=W==null?void 0:W.replacementRoomId,xe=de?((ze=r.find(Ne=>Ne.id===de))==null?void 0:ze.name)||de:null;let Ge=null;if((W==null?void 0:W.replacementTeacherId)==="conducted")Ge=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Xe(O.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(J,{name:"X",size:16})})]});else if((W==null?void 0:W.replacementTeacherId)==="cancelled")Ge=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Xe(O.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(J,{name:"X",size:16})})]});else if(ne||de){const Ne=(W==null?void 0:W.replacementTeacherId)===(W==null?void 0:W.originalTeacherId)&&de;Ge=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Ne?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:Ne?"  ":ne==null?void 0:ne.name}),W.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",W.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>vn(ne||ue,O,_e,be,xe||ge,d),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(J,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>Xe(O.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(J,{name:"UserX",size:18})})]})]})}else Ge=l.jsxs("button",{onClick:()=>{x({scheduleItemId:O.id,subjectId:O.subjectId,period:O.period,shift:O.shift,classId:O.classId,teacherId:O.teacherId,roomId:O.roomId,day:O.day}),w(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(J,{name:"ArrowRight",size:16})]});const Dt=!Ee.find(Ne=>Ne.id===O.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:O.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:_e==null?void 0:_e.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:O.shift===ae.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:be==null?void 0:be.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:Dt?"font-semibold":"line-through decoration-red-400 decoration-2",children:ue==null?void 0:ue.name}),ge&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[ge," ",xe&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",xe]})]}),(W==null?void 0:W.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",W.lessonAbsenceReason,")"]})]})]})]}),Ge]},O.id)})})]}),l.jsxs(UA,{isOpen:f,onClose:()=>w(!1),title:" ",children:[ut&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[ut.className,"  ",ut.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:ut.subjectName}),l.jsx("span",{className:ut.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:ut.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:L,onChange:O=>H(O.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(O=>l.jsxs("option",{value:O.id,children:[O.name," (",O.capacity," )"]},O.id))]})]}),ut&&!ut.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:$,onChange:O=>z(O.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Le("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Le("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(ut==null?void 0:ut.teacherId)&&!ut.isTeacherAbsent&&l.jsx("button",{onClick:()=>Le(ut.teacherId),className:"w-full p-3 mb-4 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:ee,onChange:O=>Ie(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[Pt.map(({teacher:O,isAbsent:W,isBusy:ne,isSpecialist:ue,subsCount:be})=>l.jsxs("button",{disabled:W||ne,onClick:()=>Le(O.id),title:W?" ":ne?" ":"",className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${W?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":ne?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 opacity-60":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${ue?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:ue?l.jsx(J,{name:"Star",size:14,fill:"currentColor"}):O.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:O.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[ue&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),ne&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded",children:""}),W&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${be>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",be]})]})]})]}),!W&&!ne&&l.jsx("div",{className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""})]},O.id)),Pt.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(UA,{isOpen:B,onClose:()=>v(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:G,onChange:O=>F(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[en.map(O=>{var W;return l.jsxs("button",{onClick:()=>{v(!1),x({scheduleItemId:O.id,subjectId:O.subjectId,period:O.period,shift:O.shift,classId:O.classId,teacherId:O.teacherId,roomId:O.roomId,day:O.day}),w(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[O.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",O.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[O.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:O.subjectName}),O.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((W=r.find(ne=>ne.id===O.roomId))==null?void 0:W.name)||O.roomId]})]})]},O.id)}),G.length>1&&en.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",d,")"]})]})]}),l.jsx(UA,{isOpen:C,onClose:()=>y(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:N,onChange:O=>I(O.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:$e,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},GK=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:A}=KA(),{schedule:s}=Va(),[i,o]=S.useState("teachers"),[a,c]=S.useState(new Date().toISOString().split("T")[0]),[d,h]=S.useState(ae.First),[f,w]=S.useState(1),[m,x]=S.useState(ae.First),[C,y]=S.useState(1),[B,v]=S.useState(""),[k,R]=S.useState("");S.useEffect(()=>{r&&(v(r.telegramToken||""),R(r.feedbackChatId||""))},[r]),S.useEffect(()=>{w(d===ae.First?1:0)},[d]),S.useEffect(()=>{y(m===ae.First?1:0)},[m]);const N=S.useMemo(()=>{const U=new Date(a).getDay();return U===0||U===6?null:bn[U-1]},[a]),I=eA[d],_=S.useMemo(()=>N?e.filter(U=>U.shifts&&!U.shifts.includes(d)||U.unavailableDates.includes(a)?!1:!s.some(T=>T.teacherId===U.id&&T.day===N&&T.period>f&&T.shift===d)).sort((U,D)=>U.name.localeCompare(D.name)):[],[e,a,N,f,d,s]),b=S.useMemo(()=>{if(!N)return[];const U=new Set;return s.forEach(T=>{T.day===N&&T.period===C&&T.shift===m&&T.roomId&&U.add(T.roomId)}),n.filter(T=>!U.has(T.id)).map(T=>T.name)},[s,n,N,C,m]),Q=async()=>{await A({settings:{...r,telegramToken:B,feedbackChatId:k}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(J,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),i!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:a,onChange:U=>c(U.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),i==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>h(ae.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>h(ae.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:I.map(U=>l.jsx("button",{onClick:()=>w(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${f===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>x(ae.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${m===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x(ae.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${m===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:eA[m].map(U=>l.jsx("button",{onClick:()=>y(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${C===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:B,onChange:U=>v(U.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:k,onChange:U=>R(U.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Save",size:20}),"  "]})]})]}),i==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[_.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(J,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:U.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:U.subjectIds.slice(0,2).map(D=>{const T=t.find(Fe=>Fe.id===D);return T?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:T.name},D):null})})]})]},U.id)),_.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",f,"   ",d]})]}),i==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[b.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(J,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:U}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},U)),b.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(J,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K0=function(t,e){return K0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(n[A]=r[A])},K0(t,e)};function Gr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var G0=function(){return G0=Object.assign||function(e){for(var n,r=1,A=arguments.length;r<A;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},G0.apply(this,arguments)};function Rn(t,e,n,r){function A(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):A(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function En(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,A,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,A&&(s=c[0]&2?A.return:c[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,c[1])).done)return s;switch(A=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,A=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],A=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function xd(t,e,n){if(arguments.length===2)for(var r=0,A=e.length,s;r<A;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var MA=function(){function t(e,n,r,A){this.left=e,this.top=n,this.width=r,this.height=A}return t.prototype.add=function(e,n,r,A){return new t(this.left+e,this.top+n,this.width+r,this.height+A)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(A){return A.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Fg=function(t,e){return MA.fromClientRect(t,e.getBoundingClientRect())},zK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),A=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new MA(0,0,r,A)},Ug=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},zC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",WK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _d=0;_d<zC.length;_d++)WK[zC.charCodeAt(_d)]=_d;var WC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ml=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cd=0;Cd<WC.length;Cd++)Ml[WC.charCodeAt(Cd)]=Cd;var $K=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)s=Ml[t.charCodeAt(r)],i=Ml[t.charCodeAt(r+1)],o=Ml[t.charCodeAt(r+2)],a=Ml[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return c},qK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},JK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Di=5,Hy=11,jp=2,XK=Hy-Di,wQ=65536>>Di,YK=1<<Di,Kp=YK-1,ZK=1024>>Di,e3=wQ+ZK,t3=e3,n3=32,r3=t3+n3,A3=65536>>Hy,s3=1<<XK,i3=s3-1,$C=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},o3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},a3=function(t,e){var n=$K(t),r=Array.isArray(n)?JK(n):new Uint32Array(n),A=Array.isArray(n)?qK(n):new Uint16Array(n),s=24,i=$C(A,s/2,r[4]/2),o=r[5]===2?$C(A,(s+r[4])/2):o3(r,Math.ceil((s+r[4])/4));return new l3(r[0],r[1],r[2],r[3],i,o)},l3=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Di],n=(n<<jp)+(e&Kp),this.data[n];if(e<=65535)return n=this.index[wQ+(e-55296>>Di)],n=(n<<jp)+(e&Kp),this.data[n];if(e<this.highStart)return n=r3-A3+(e>>Hy),n=this.index[n],n+=e>>Di&i3,n=this.index[n],n=(n<<jp)+(e&Kp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),qC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Id=0;Id<qC.length;Id++)c3[qC.charCodeAt(Id)]=Id;var u3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",JC=50,d3=1,vQ=2,yQ=3,h3=4,f3=5,XC=7,BQ=8,YC=9,Bs=10,z0=11,ZC=12,W0=13,g3=14,Vl=15,$0=16,Ed=17,Il=18,p3=19,eI=20,q0=21,El=22,Gp=23,Io=24,Ar=25,Hl=26,jl=27,Eo=28,m3=29,_i=30,w3=31,bd=32,Td=33,J0=34,X0=35,Y0=36,su=37,Z0=38,ph=39,mh=40,zp=41,xQ=42,v3=43,y3=[9001,65288],_Q="!",He="",Fd="",ew=a3(u3),vA=[_i,Y0],tw=[d3,vQ,yQ,f3],CQ=[Bs,BQ],tI=[jl,Hl],B3=tw.concat(CQ),nI=[Z0,ph,mh,J0,X0],x3=[Vl,W0],_3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],A=[];return t.forEach(function(s,i){var o=ew.get(s);if(o>JC?(A.push(!0),o-=JC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),n.push($0);if(o===h3||o===z0){if(i===0)return r.push(i),n.push(_i);var a=n[i-1];return B3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(_i))}if(r.push(i),o===w3)return n.push(e==="strict"?q0:su);if(o===xQ||o===m3)return n.push(_i);if(o===v3)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(su):n.push(_i);n.push(o)}),[r,n,A]},Wp=function(t,e,n,r){var A=r[n];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=n;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==Bs)break}if(A===Bs)for(var s=n;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==Bs)break}if(o!==Bs)break}return!1},rI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===Bs)n--;else return r}return 0},C3=function(t,e,n,r,A){if(n[r]===0)return He;var s=r-1;if(Array.isArray(A)&&A[s]===!0)return He;var i=s-1,o=s+1,a=e[s],c=i>=0?e[i]:0,d=e[o];if(a===vQ&&d===yQ)return He;if(tw.indexOf(a)!==-1)return _Q;if(tw.indexOf(d)!==-1||CQ.indexOf(d)!==-1)return He;if(rI(s,e)===BQ)return Fd;if(ew.get(t[s])===z0||(a===bd||a===Td)&&ew.get(t[o])===z0||a===XC||d===XC||a===YC||[Bs,W0,Vl].indexOf(a)===-1&&d===YC||[Ed,Il,p3,Io,Eo].indexOf(d)!==-1||rI(s,e)===El||Wp(Gp,El,s,e)||Wp([Ed,Il],q0,s,e)||Wp(ZC,ZC,s,e))return He;if(a===Bs)return Fd;if(a===Gp||d===Gp)return He;if(d===$0||a===$0)return Fd;if([W0,Vl,q0].indexOf(d)!==-1||a===g3||c===Y0&&x3.indexOf(a)!==-1||a===Eo&&d===Y0||d===eI||vA.indexOf(d)!==-1&&a===Ar||vA.indexOf(a)!==-1&&d===Ar||a===jl&&[su,bd,Td].indexOf(d)!==-1||[su,bd,Td].indexOf(a)!==-1&&d===Hl||vA.indexOf(a)!==-1&&tI.indexOf(d)!==-1||tI.indexOf(a)!==-1&&vA.indexOf(d)!==-1||[jl,Hl].indexOf(a)!==-1&&(d===Ar||[El,Vl].indexOf(d)!==-1&&e[o+1]===Ar)||[El,Vl].indexOf(a)!==-1&&d===Ar||a===Ar&&[Ar,Eo,Io].indexOf(d)!==-1)return He;if([Ar,Eo,Io,Ed,Il].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===Ar)return He;if([Eo,Io].indexOf(f)!==-1)h--;else break}if([jl,Hl].indexOf(d)!==-1)for(var h=[Ed,Il].indexOf(a)!==-1?i:s;h>=0;){var f=e[h];if(f===Ar)return He;if([Eo,Io].indexOf(f)!==-1)h--;else break}if(Z0===a&&[Z0,ph,J0,X0].indexOf(d)!==-1||[ph,J0].indexOf(a)!==-1&&[ph,mh].indexOf(d)!==-1||[mh,X0].indexOf(a)!==-1&&d===mh||nI.indexOf(a)!==-1&&[eI,Hl].indexOf(d)!==-1||nI.indexOf(d)!==-1&&a===jl||vA.indexOf(a)!==-1&&vA.indexOf(d)!==-1||a===Io&&vA.indexOf(d)!==-1||vA.concat(Ar).indexOf(a)!==-1&&d===El&&y3.indexOf(t[o])===-1||vA.concat(Ar).indexOf(d)!==-1&&a===Il)return He;if(a===zp&&d===zp){for(var w=n[s],m=1;w>0&&(w--,e[w]===zp);)m++;if(m%2!==0)return He}return a===bd&&d===Td?He:Fd},I3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=_3(t,e.lineBreak),r=n[0],A=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(o){return[Ar,_i,xQ].indexOf(o)!==-1?su:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,A,i]},E3=function(){function t(e,n,r,A){this.codePoints=e,this.required=n===_Q,this.start=r,this.end=A}return t.prototype.slice=function(){return Ot.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),b3=function(t,e){var n=Ug(t),r=I3(n,e),A=r[0],s=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=He;c<o&&(d=C3(n,s,A,++c,i))===He;);if(d!==He||c===o){var h=new E3(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},T3=1,F3=2,Nu=4,AI=8,gf=10,sI=47,dc=92,U3=9,Q3=32,Ud=34,bl=61,S3=35,k3=36,R3=37,Qd=39,Sd=40,Tl=41,N3=95,$n=45,P3=33,D3=60,L3=62,O3=64,M3=91,V3=93,H3=61,j3=123,kd=63,K3=125,iI=124,G3=126,z3=128,oI=65533,$p=42,Qi=43,W3=44,$3=58,q3=59,iu=46,J3=0,X3=8,Y3=11,Z3=14,e5=31,t5=127,Wr=-1,IQ=48,EQ=97,bQ=101,n5=102,r5=117,A5=122,TQ=65,FQ=69,UQ=70,s5=85,i5=90,Tn=function(t){return t>=IQ&&t<=57},o5=function(t){return t>=55296&&t<=57343},bo=function(t){return Tn(t)||t>=TQ&&t<=UQ||t>=EQ&&t<=n5},a5=function(t){return t>=EQ&&t<=A5},l5=function(t){return t>=TQ&&t<=i5},c5=function(t){return a5(t)||l5(t)},u5=function(t){return t>=z3},Rd=function(t){return t===gf||t===U3||t===Q3},pf=function(t){return c5(t)||u5(t)||t===N3},aI=function(t){return pf(t)||Tn(t)||t===$n},d5=function(t){return t>=J3&&t<=X3||t===Y3||t>=Z3&&t<=e5||t===t5},us=function(t,e){return t!==dc?!1:e!==gf},Nd=function(t,e,n){return t===$n?pf(e)||us(e,n):pf(t)?!0:!!(t===dc&&us(t,e))},qp=function(t,e,n){return t===Qi||t===$n?Tn(e)?!0:e===iu&&Tn(n):Tn(t===iu?e:t)},h5=function(t){var e=0,n=1;(t[e]===Qi||t[e]===$n)&&(t[e]===$n&&(n=-1),e++);for(var r=[];Tn(t[e]);)r.push(t[e++]);var A=r.length?parseInt(Ot.apply(void 0,r),10):0;t[e]===iu&&e++;for(var s=[];Tn(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(Ot.apply(void 0,s),10):0;(t[e]===FQ||t[e]===bQ)&&e++;var a=1;(t[e]===Qi||t[e]===$n)&&(t[e]===$n&&(a=-1),e++);for(var c=[];Tn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Ot.apply(void 0,c),10):0;return n*(A+o*Math.pow(10,-i))*Math.pow(10,a*d)},f5={type:2},g5={type:3},p5={type:4},m5={type:13},w5={type:8},v5={type:21},y5={type:9},B5={type:10},x5={type:11},_5={type:12},C5={type:14},Pd={type:23},I5={type:1},E5={type:25},b5={type:24},T5={type:26},F5={type:27},U5={type:28},Q5={type:29},S5={type:31},nw={type:32},QQ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Ug(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==nw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ud:return this.consumeStringToken(Ud);case S3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),A=this.peekCodePoint(2);if(aI(n)||us(r,A)){var s=Nd(n,r,A)?F3:T3,i=this.consumeName();return{type:5,value:i,flags:s}}break;case k3:if(this.peekCodePoint(0)===bl)return this.consumeCodePoint(),m5;break;case Qd:return this.consumeStringToken(Qd);case Sd:return f5;case Tl:return g5;case $p:if(this.peekCodePoint(0)===bl)return this.consumeCodePoint(),C5;break;case Qi:if(qp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case W3:return p5;case $n:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(qp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Nd(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===$n&&c===L3)return this.consumeCodePoint(),this.consumeCodePoint(),b5;break;case iu:if(qp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case sI:if(this.peekCodePoint(0)===$p)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===$p&&(d=this.consumeCodePoint(),d===sI))return this.consumeToken();if(d===Wr)return this.consumeToken()}break;case $3:return T5;case q3:return F5;case D3:if(this.peekCodePoint(0)===P3&&this.peekCodePoint(1)===$n&&this.peekCodePoint(2)===$n)return this.consumeCodePoint(),this.consumeCodePoint(),E5;break;case O3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(Nd(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case M3:return U5;case dc:if(us(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case V3:return Q5;case H3:if(this.peekCodePoint(0)===bl)return this.consumeCodePoint(),w5;break;case j3:return x5;case K3:return _5;case r5:case s5:var m=this.peekCodePoint(0),x=this.peekCodePoint(1);return m===Qi&&(bo(x)||x===kd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case iI:if(this.peekCodePoint(0)===bl)return this.consumeCodePoint(),y5;if(this.peekCodePoint(0)===iI)return this.consumeCodePoint(),v5;break;case G3:if(this.peekCodePoint(0)===bl)return this.consumeCodePoint(),B5;break;case Wr:return nw}return Rd(e)?(this.consumeWhiteSpace(),S5):Tn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):pf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ot(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();bo(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===kd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var A=parseInt(Ot.apply(void 0,e.map(function(a){return a===kd?IQ:a})),16),s=parseInt(Ot.apply(void 0,e.map(function(a){return a===kd?UQ:a})),16);return{type:30,start:A,end:s}}var i=parseInt(Ot.apply(void 0,e),16);if(this.peekCodePoint(0)===$n&&bo(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];bo(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var s=parseInt(Ot.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Sd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Sd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Wr)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Qd||n===Ud){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Wr||this.peekCodePoint(0)===Tl)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Pd)}for(;;){var A=this.consumeCodePoint();if(A===Wr||A===Tl)return{type:22,value:Ot.apply(void 0,e)};if(Rd(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Wr||this.peekCodePoint(0)===Tl?(this.consumeCodePoint(),{type:22,value:Ot.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Pd);if(A===Ud||A===Qd||A===Sd||d5(A))return this.consumeBadUrlRemnants(),Pd;if(A===dc)if(us(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Pd;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;Rd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Tl||e===Wr)return;us(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var A=Math.min(n,e);r+=Ot.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var A=this._value[r];if(A===Wr||A===void 0||A===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(A===gf)return this._value.splice(0,r),I5;if(A===dc){var s=this._value[r+1];s!==Wr&&s!==void 0&&(s===gf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):us(A,s)&&(n+=this.consumeStringSlice(r),n+=Ot(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Nu,r=this.peekCodePoint(0);for((r===Qi||r===$n)&&e.push(this.consumeCodePoint());Tn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(r===iu&&Tn(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=AI;Tn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===FQ||r===bQ)&&((A===Qi||A===$n)&&Tn(s)||Tn(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=AI;Tn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[h5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Nd(A,s,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return A===R3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(bo(e)){for(var n=Ot(e);bo(this.peekCodePoint(0))&&n.length<6;)n+=Ot(this.consumeCodePoint());Rd(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||o5(r)||r>1114111?oI:r}return e===Wr?oI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(aI(n))e+=Ot(n);else if(us(n,this.peekCodePoint(0)))e+=Ot(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),SQ=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new QQ;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||R5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Pu=function(t){return t.type===15},el=function(t){return t.type===17},st=function(t){return t.type===20},k5=function(t){return t.type===0},rw=function(t,e){return st(t)&&t.value===e},kQ=function(t){return t.type!==31},Pa=function(t){return t.type!==31&&t.type!==4},hA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},R5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Js=function(t){return t.type===17||t.type===15},zt=function(t){return t.type===16||Js(t)},RQ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},fn={type:17,number:0,flags:Nu},jy={type:16,number:50,flags:Nu},xs={type:16,number:100,flags:Nu},Kl=function(t,e,n){var r=t[0],A=t[1];return[at(r,e),at(typeof A<"u"?A:r,n)]},at=function(t,e){if(t.type===16)return t.number/100*e;if(Pu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},NQ="deg",PQ="grad",DQ="rad",LQ="turn",Qg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case NQ:return Math.PI*e.number/180;case PQ:return Math.PI/200*e.number;case DQ:return e.number;case LQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},OQ=function(t){return t.type===15&&(t.unit===NQ||t.unit===PQ||t.unit===DQ||t.unit===LQ)},MQ=function(t){var e=t.filter(st).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[fn,fn];case"to top":case"bottom":return Er(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[fn,xs];case"to right":case"left":return Er(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[xs,xs];case"to bottom":case"top":return Er(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[xs,fn];case"to left":case"right":return Er(270)}return 0},Er=function(t){return Math.PI*t/180},Ns={name:"color",parse:function(t,e){if(e.type===18){var n=N5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return _s(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return _s(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return _s(parseInt(r,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return _s(parseInt(r,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=QA[e.value.toUpperCase()];if(typeof o<"u")return o}return QA.TRANSPARENT}},Ps=function(t){return(255&t)===0},nn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+r+","+n+","+e/255+")":"rgb("+A+","+r+","+n+")"},_s=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},lI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},cI=function(t,e){var n=e.filter(Pa);if(n.length===3){var r=n.map(lI),A=r[0],s=r[1],i=r[2];return _s(A,s,i,1)}if(n.length===4){var o=n.map(lI),A=o[0],s=o[1],i=o[2],a=o[3];return _s(A,s,i,a)}return 0};function Jp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var uI=function(t,e){var n=e.filter(Pa),r=n[0],A=n[1],s=n[2],i=n[3],o=(r.type===17?Er(r.number):Qg.parse(t,r))/(Math.PI*2),a=zt(A)?A.number/100:0,c=zt(s)?s.number/100:0,d=typeof i<"u"&&zt(i)?at(i,1):1;if(a===0)return _s(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,w=Jp(f,h,o+1/3),m=Jp(f,h,o),x=Jp(f,h,o-1/3);return _s(w*255,m*255,x*255,d)},N5={hsl:uI,hsla:uI,rgb:cI,rgba:cI},hc=function(t,e){return Ns.parse(t,SQ.create(e).parseComponentValue())},QA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},P5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(st(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},D5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Sg=function(t,e){var n=Ns.parse(t,e[0]),r=e[1];return r&&zt(r)?{color:n,stop:r}:{color:n,stop:null}},dI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=fn),r.stop===null&&(r.stop=xs);for(var A=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=at(o,e);a>s?A.push(a):A.push(s),s=a}else A.push(null)}for(var c=null,i=0;i<A.length;i++){var d=A[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=A[c-1],w=(d-f)/(h+1),m=1;m<=h;m++)A[c+m-1]=w*m;c=null}}return t.map(function(x,C){var y=x.color;return{color:y,stop:Math.max(Math.min(1,A[C]/e),0)}})},L5=function(t,e,n){var r=e/2,A=n/2,s=at(t[0],e)-r,i=A-at(t[1],n);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},O5=function(t,e,n){var r=typeof t=="number"?t:L5(t,e,n),A=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,i=n/2,o=A/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[A,s-c,s+c,i-a,i+a]},Pr=function(t,e){return Math.sqrt(t*t+e*e)},hI=function(t,e,n,r,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],c=o[1],d=Pr(n-a,r-c);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},M5=function(t,e,n,r,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-A)));break;case 2:if(t.shape===0)s=i=Math.min(Pr(e,n),Pr(e,n-A),Pr(e-r,n),Pr(e-r,n-A));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-A))/Math.min(Math.abs(e),Math.abs(e-r)),a=hI(r,A,e,n,!0),c=a[0],d=a[1];s=Pr(c-e,(d-n)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-A)));break;case 3:if(t.shape===0)s=i=Math.max(Pr(e,n),Pr(e,n-A),Pr(e-r,n),Pr(e-r,n-A));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-A))/Math.max(Math.abs(e),Math.abs(e-r)),h=hI(r,A,e,n,!1),c=h[0],d=h[1];s=Pr(c-e,(d-n)/o),i=o*s}break}return Array.isArray(t.size)&&(s=at(t.size[0],r),i=t.size.length===2?at(t.size[1],A):s),[s,i]},V5=function(t,e){var n=Er(180),r=[];return hA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){n=MQ(A);return}else if(OQ(i)){n=Qg.parse(t,i);return}}var o=Sg(t,A);r.push(o)}),{angle:n,stops:r,type:1}},Dd=function(t,e){var n=Er(180),r=[];return hA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=MQ(A);return}else if(OQ(i)){n=(Qg.parse(t,i)+Er(270))%Er(360);return}}var o=Sg(t,A);r.push(o)}),{angle:n,stops:r,type:1}},H5=function(t,e){var n=Er(180),r=[],A=1,s=0,i=3,o=[];return hA(e).forEach(function(a,c){var d=a[0];if(c===0){if(st(d)&&d.value==="linear"){A=1;return}else if(st(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=Ns.parse(t,d.values[0]);r.push({stop:fn,color:h})}else if(d.name==="to"){var h=Ns.parse(t,d.values[0]);r.push({stop:xs,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Pa);if(f.length===2){var h=Ns.parse(t,f[1]),w=f[0];el(w)&&r.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),A===1?{angle:(n+Er(180))%Er(360),stops:r,type:A}:{size:i,shape:s,stops:r,position:o,type:A}},VQ="closest-side",HQ="farthest-side",jQ="closest-corner",KQ="farthest-corner",GQ="circle",zQ="ellipse",WQ="cover",$Q="contain",j5=function(t,e){var n=0,r=3,A=[],s=[];return hA(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(st(f))switch(f.value){case"center":return s.push(jy),h;case"top":case"left":return s.push(fn),h;case"right":case"bottom":return s.push(xs),h}else(zt(f)||Js(f))&&s.push(f);else if(st(f))switch(f.value){case GQ:return n=0,!1;case zQ:return n=1,!1;case"at":return c=!0,!1;case VQ:return r=0,!1;case WQ:case HQ:return r=1,!1;case $Q:case jQ:return r=2,!1;case KQ:return r=3,!1}else if(Js(f)||zt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=Sg(t,i);A.push(d)}}),{size:r,shape:n,stops:A,position:s,type:2}},Ld=function(t,e){var n=0,r=3,A=[],s=[];return hA(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(st(h))switch(h.value){case"center":return s.push(jy),!1;case"top":case"left":return s.push(fn),!1;case"right":case"bottom":return s.push(xs),!1}else if(zt(h)||Js(h))return s.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(st(h))switch(h.value){case GQ:return n=0,!1;case zQ:return n=1,!1;case $Q:case VQ:return r=0,!1;case HQ:return r=1,!1;case jQ:return r=2,!1;case WQ:case KQ:return r=3,!1}else if(Js(h)||zt(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=Sg(t,i);A.push(c)}}),{size:r,shape:n,stops:A,position:s,type:2}},K5=function(t){return t.type===1},G5=function(t){return t.type===2},Ky={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=qQ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function z5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!qQ[t.name])}var qQ={"linear-gradient":V5,"-moz-linear-gradient":Dd,"-ms-linear-gradient":Dd,"-o-linear-gradient":Dd,"-webkit-linear-gradient":Dd,"radial-gradient":j5,"-moz-radial-gradient":Ld,"-ms-radial-gradient":Ld,"-o-radial-gradient":Ld,"-webkit-radial-gradient":Ld,"-webkit-gradient":H5},W5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Pa(r)&&z5(r)}).map(function(r){return Ky.parse(t,r)})}},$5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(st(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},q5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return hA(e).map(function(n){return n.filter(zt)}).map(RQ)}},J5={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return hA(e).map(function(n){return n.filter(st).map(function(r){return r.value}).join(" ")}).map(X5)}},X5=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ca;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ca||(ca={}));var Y5={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return hA(e).map(function(n){return n.filter(Z5)})}},Z5=function(t){return st(t)||zt(t)},kg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},e6=kg("top"),t6=kg("right"),n6=kg("bottom"),r6=kg("left"),Rg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return RQ(n.filter(zt))}}},A6=Rg("top-left"),s6=Rg("top-right"),i6=Rg("bottom-right"),o6=Rg("bottom-left"),Ng=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},a6=Ng("top"),l6=Ng("right"),c6=Ng("bottom"),u6=Ng("left"),Pg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Pu(n)?n.number:0}}},d6=Pg("top"),h6=Pg("right"),f6=Pg("bottom"),g6=Pg("left"),p6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},m6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},w6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(st).reduce(function(n,r){return n|v6(r.value)},0)}},v6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},y6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},B6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},mf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(mf||(mf={}));var x6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return mf.STRICT;case"normal":default:return mf.NORMAL}}},_6={name:"line-height",initialValue:"normal",prefix:!1,type:4},fI=function(t,e){return st(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:zt(t)?at(t,e):e},C6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Ky.parse(t,e)}},I6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Aw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Dg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},E6=Dg("top"),b6=Dg("right"),T6=Dg("bottom"),F6=Dg("left"),U6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(st).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Q6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Lg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},S6=Lg("top"),k6=Lg("right"),R6=Lg("bottom"),N6=Lg("left"),P6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},D6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},L6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rw(e[0],"none")?[]:hA(e).map(function(n){for(var r={color:QA.TRANSPARENT,offsetX:fn,offsetY:fn,blur:fn},A=0,s=0;s<n.length;s++){var i=n[s];Js(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:r.blur=i,A++):r.color=Ns.parse(t,i)}return r})}},O6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},M6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=j6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},V6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},H6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,A,s,i,o]:null},j6={matrix:V6,matrix3d:H6},gI={type:16,number:50,flags:Nu},K6=[gI,gI],G6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(zt);return n.length!==2?K6:[n[0],n[1]]}},z6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},fc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(fc||(fc={}));var W6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return fc.BREAK_ALL;case"keep-all":return fc.KEEP_ALL;case"normal":default:return fc.NORMAL}}},$6={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(el(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},q6={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return el(e)?e.number:1}},J6={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},X6={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(st).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Y6={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:n.push(A.value);break;case 17:n.push(A.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},Z6={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},eG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(el(e))return e.number;if(st(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},tG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(st).map(function(n){return n.value})}},nG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Jt=function(t,e){return(t&e)!==0},rG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},AG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],A=e.filter(kQ),s=0;s<A.length;s++){var i=A[s],o=A[s+1];if(i.type===20){var a=o&&el(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},sG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(kQ),A=0;A<r.length;A++){var s=r[A],i=r[A+1];if(st(s)&&s.value!=="none"){var o=i&&el(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},iG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Pu).map(function(n){return JQ.parse(t,n)})}},oG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],A=e.filter(k5);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,o=A[s+1].value;r.push({open:i,close:o})}return r}},pI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},aG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rw(e[0],"none")?[]:hA(e).map(function(n){for(var r={color:255,offsetX:fn,offsetY:fn,blur:fn,spread:fn,inset:!1},A=0,s=0;s<n.length;s++){var i=n[s];rw(i,"inset")?r.inset=!0:Js(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:A===2?r.blur=i:r.spread=i,A++):r.color=Ns.parse(t,i)}return r})}},lG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(st).forEach(function(A){switch(A.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(A){r.indexOf(A)===-1&&r.push(A)}),r}},cG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},uG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Pu(e)?e.number:0}},dG=function(){function t(e,n){var r,A;this.animationDuration=me(e,iG,n.animationDuration),this.backgroundClip=me(e,P5,n.backgroundClip),this.backgroundColor=me(e,D5,n.backgroundColor),this.backgroundImage=me(e,W5,n.backgroundImage),this.backgroundOrigin=me(e,$5,n.backgroundOrigin),this.backgroundPosition=me(e,q5,n.backgroundPosition),this.backgroundRepeat=me(e,J5,n.backgroundRepeat),this.backgroundSize=me(e,Y5,n.backgroundSize),this.borderTopColor=me(e,e6,n.borderTopColor),this.borderRightColor=me(e,t6,n.borderRightColor),this.borderBottomColor=me(e,n6,n.borderBottomColor),this.borderLeftColor=me(e,r6,n.borderLeftColor),this.borderTopLeftRadius=me(e,A6,n.borderTopLeftRadius),this.borderTopRightRadius=me(e,s6,n.borderTopRightRadius),this.borderBottomRightRadius=me(e,i6,n.borderBottomRightRadius),this.borderBottomLeftRadius=me(e,o6,n.borderBottomLeftRadius),this.borderTopStyle=me(e,a6,n.borderTopStyle),this.borderRightStyle=me(e,l6,n.borderRightStyle),this.borderBottomStyle=me(e,c6,n.borderBottomStyle),this.borderLeftStyle=me(e,u6,n.borderLeftStyle),this.borderTopWidth=me(e,d6,n.borderTopWidth),this.borderRightWidth=me(e,h6,n.borderRightWidth),this.borderBottomWidth=me(e,f6,n.borderBottomWidth),this.borderLeftWidth=me(e,g6,n.borderLeftWidth),this.boxShadow=me(e,aG,n.boxShadow),this.color=me(e,p6,n.color),this.direction=me(e,m6,n.direction),this.display=me(e,w6,n.display),this.float=me(e,y6,n.cssFloat),this.fontFamily=me(e,Y6,n.fontFamily),this.fontSize=me(e,Z6,n.fontSize),this.fontStyle=me(e,nG,n.fontStyle),this.fontVariant=me(e,tG,n.fontVariant),this.fontWeight=me(e,eG,n.fontWeight),this.letterSpacing=me(e,B6,n.letterSpacing),this.lineBreak=me(e,x6,n.lineBreak),this.lineHeight=me(e,_6,n.lineHeight),this.listStyleImage=me(e,C6,n.listStyleImage),this.listStylePosition=me(e,I6,n.listStylePosition),this.listStyleType=me(e,Aw,n.listStyleType),this.marginTop=me(e,E6,n.marginTop),this.marginRight=me(e,b6,n.marginRight),this.marginBottom=me(e,T6,n.marginBottom),this.marginLeft=me(e,F6,n.marginLeft),this.opacity=me(e,q6,n.opacity);var s=me(e,U6,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=me(e,Q6,n.overflowWrap),this.paddingTop=me(e,S6,n.paddingTop),this.paddingRight=me(e,k6,n.paddingRight),this.paddingBottom=me(e,R6,n.paddingBottom),this.paddingLeft=me(e,N6,n.paddingLeft),this.paintOrder=me(e,lG,n.paintOrder),this.position=me(e,D6,n.position),this.textAlign=me(e,P6,n.textAlign),this.textDecorationColor=me(e,J6,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=me(e,X6,(A=n.textDecorationLine)!==null&&A!==void 0?A:n.textDecoration),this.textShadow=me(e,L6,n.textShadow),this.textTransform=me(e,O6,n.textTransform),this.transform=me(e,M6,n.transform),this.transformOrigin=me(e,G6,n.transformOrigin),this.visibility=me(e,z6,n.visibility),this.webkitTextStrokeColor=me(e,cG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=me(e,uG,n.webkitTextStrokeWidth),this.wordBreak=me(e,W6,n.wordBreak),this.zIndex=me(e,$6,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ps(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Jt(this.display,4)||Jt(this.display,33554432)||Jt(this.display,268435456)||Jt(this.display,536870912)||Jt(this.display,67108864)||Jt(this.display,134217728)},t}(),hG=function(){function t(e,n){this.content=me(e,rG,n.content),this.quotes=me(e,oG,n.quotes)}return t}(),mI=function(){function t(e,n){this.counterIncrement=me(e,AG,n.counterIncrement),this.counterReset=me(e,sG,n.counterReset)}return t}(),me=function(t,e,n){var r=new QQ,A=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(A);var s=new SQ(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,st(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Qg.parse(t,s.parseComponentValue());case"color":return Ns.parse(t,s.parseComponentValue());case"image":return Ky.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Js(o)?o:fn;case"length-percentage":var a=s.parseComponentValue();return zt(a)?a:fn;case"time":return JQ.parse(t,s.parseComponentValue())}break}},fG="data-html2canvas-debug",gG=function(t){var e=t.getAttribute(fG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},sw=function(t,e){var n=gG(t);return n===1||e===n},fA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,sw(n,3))debugger;this.styles=new dG(e,window.getComputedStyle(n,null)),aw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Fg(this.context,n),sw(n,4)&&(this.flags|=16)}return t}(),pG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",wI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Od=0;Od<wI.length;Od++)Gl[wI.charCodeAt(Od)]=Od;var mG=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)s=Gl[t.charCodeAt(r)],i=Gl[t.charCodeAt(r+1)],o=Gl[t.charCodeAt(r+2)],a=Gl[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return c},wG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},vG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Li=5,Gy=11,Xp=2,yG=Gy-Li,XQ=65536>>Li,BG=1<<Li,Yp=BG-1,xG=1024>>Li,_G=XQ+xG,CG=_G,IG=32,EG=CG+IG,bG=65536>>Gy,TG=1<<yG,FG=TG-1,vI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},UG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},QG=function(t,e){var n=mG(t),r=Array.isArray(n)?vG(n):new Uint32Array(n),A=Array.isArray(n)?wG(n):new Uint16Array(n),s=24,i=vI(A,s/2,r[4]/2),o=r[5]===2?vI(A,(s+r[4])/2):UG(r,Math.ceil((s+r[4])/4));return new SG(r[0],r[1],r[2],r[3],i,o)},SG=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Li],n=(n<<Xp)+(e&Yp),this.data[n];if(e<=65535)return n=this.index[XQ+(e-55296>>Li)],n=(n<<Xp)+(e&Yp),this.data[n];if(e<this.highStart)return n=EG-bG+(e>>Gy),n=this.index[n],n+=e>>Li&FG,n=this.index[n],n=(n<<Xp)+(e&Yp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),yI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Md=0;Md<yI.length;Md++)kG[yI.charCodeAt(Md)]=Md;var RG=1,Zp=2,em=3,BI=4,xI=5,NG=7,_I=8,tm=9,nm=10,CI=11,II=12,EI=13,bI=14,rm=15,PG=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},DG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},LG=QG(pG),vr="",Am="",OG=function(t){return LG.get(t)},MG=function(t,e,n){var r=n-2,A=e[r],s=e[n-1],i=e[n];if(s===Zp&&i===em)return vr;if(s===Zp||s===em||s===BI||i===Zp||i===em||i===BI)return Am;if(s===_I&&[_I,tm,CI,II].indexOf(i)!==-1||(s===CI||s===tm)&&(i===tm||i===nm)||(s===II||s===nm)&&i===nm||i===EI||i===xI||i===NG||s===RG)return vr;if(s===EI&&i===bI){for(;A===xI;)A=e[--r];if(A===bI)return vr}if(s===rm&&i===rm){for(var o=0;A===rm;)o++,A=e[--r];if(o%2===0)return vr}return Am},VG=function(t){var e=PG(t),n=e.length,r=0,A=0,s=e.map(OG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=vr;r<n&&(i=MG(e,s,++r))===vr;);if(i!==vr||r===n){var o=DG.apply(null,e.slice(A,r));return A=r,{value:o,done:!1}}return{done:!0,value:null}}}},HG=function(t){for(var e=VG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},jG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var A=n.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(r),s===e)return!0}}return!1},KG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,A=Ug(r.data).map(function(a){return Ot(a)}),s=0,i={},o=A.every(function(a,c){n.setStart(r,s),n.setEnd(r,s+a.length);var d=n.getBoundingClientRect();s+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},GG=function(){return typeof new Image().crossOrigin<"u"},zG=function(){return typeof new XMLHttpRequest().responseType=="string"},WG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},TI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},$G=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var A=new Image,s=e.toDataURL();A.src=s;var i=iw(n,n,0,0,A);return r.fillStyle="red",r.fillRect(0,0,n,n),FI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=n+"px",TI(a)?FI(iw(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),TI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},iw=function(t,e,n,r,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(A),i},FI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},un={get SUPPORT_RANGE_BOUNDS(){var t=jG(document);return Object.defineProperty(un,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=un.SUPPORT_RANGE_BOUNDS&&KG(document);return Object.defineProperty(un,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=WG(document);return Object.defineProperty(un,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?$G(document):Promise.resolve(!1);return Object.defineProperty(un,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=GG();return Object.defineProperty(un,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=zG();return Object.defineProperty(un,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(un,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(un,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},gc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),qG=function(t,e,n,r){var A=YG(e,n),s=[],i=0;return A.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(un.SUPPORT_RANGE_BOUNDS){var a=UI(r,i,o.length).getClientRects();if(a.length>1){var c=zy(o),d=0;c.forEach(function(f){s.push(new gc(f,MA.fromDOMRectList(t,UI(r,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new gc(o,MA.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new gc(o,JG(t,r))),r=h}else un.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},JG=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(r,e);var s=Fg(t,r);return r.firstChild&&A.replaceChild(r.firstChild,r),s}}return MA.EMPTY},UI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var A=r.createRange();return A.setStart(t,e),A.setEnd(t,e+n),A},zy=function(t){if(un.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return HG(t)},XG=function(t,e){if(un.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return e8(t,e)},YG=function(t,e){return e.letterSpacing!==0?zy(t):XG(t,e)},ZG=[32,160,4961,65792,65793,4153,4241],e8=function(t,e){for(var n=b3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],A,s=function(){if(A.value){var i=A.value.slice(),o=Ug(i),a="";o.forEach(function(c){ZG.indexOf(c)===-1?a+=Ot(c):(a.length&&r.push(a),r.push(Ot(c)),a="")}),a.length&&r.push(a)}};!(A=n.next()).done;)s();return r},t8=function(){function t(e,n,r){this.text=n8(n.data,r.textTransform),this.textBounds=qG(e,this.text,r,n)}return t}(),n8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(r8,A8);case 2:return t.toUpperCase();default:return t}},r8=/(^|\s|:|-|\(|\))([a-z])/g,A8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},YQ=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.src=r.currentSrc||r.src,A.intrinsicWidth=r.naturalWidth,A.intrinsicHeight=r.naturalHeight,A.context.cache.addImage(A.src),A}return e}(fA),ZQ=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r,A.intrinsicWidth=r.width,A.intrinsicHeight=r.height,A}return e}(fA),eS=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=new XMLSerializer,i=Fg(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),A.intrinsicWidth=r.width.baseVal.value,A.intrinsicHeight=r.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(fA),tS=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(fA),ow=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.start=r.start,A.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,A}return e}(fA),s8=[{type:15,flags:0,unit:"px",number:3}],i8=[{type:16,flags:0,number:50}],o8=function(t){return t.width>t.height?new MA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new MA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},a8=function(t){var e=t.type===l8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},wf="checkbox",vf="radio",l8="password",QI=707406591,Wy=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;switch(A.type=r.type.toLowerCase(),A.checked=r.checked,A.value=a8(r),(A.type===wf||A.type===vf)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=o8(A.bounds)),A.type){case wf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=s8;break;case vf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=i8;break}return A}return e}(fA),nS=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(fA),rS=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(fA),AS=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;A.src=r.src,A.width=parseInt(r.width,10)||0,A.height=parseInt(r.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){A.tree=iS(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?hc(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):QA.TRANSPARENT,i=r.contentWindow.document.body?hc(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):QA.TRANSPARENT;A.backgroundColor=Ps(s)?Ps(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(fA),c8=["OL","UL","MENU"],wh=function(t,e,n,r){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,oS(A)&&A.data.trim().length>0)n.textNodes.push(new t8(t,A,n.styles));else if(Xo(A))if(uS(A)&&A.assignedNodes)A.assignedNodes().forEach(function(o){return wh(t,o,n,r)});else{var i=sS(t,A);i.styles.isVisible()&&(u8(A,i,r)?i.flags|=4:d8(i.styles)&&(i.flags|=2),c8.indexOf(A.tagName)!==-1&&(i.flags|=8),n.elements.push(i),A.slot,A.shadowRoot?wh(t,A.shadowRoot,i,r):!yf(A)&&!aS(A)&&!Bf(A)&&wh(t,A,i,r))}},sS=function(t,e){return lw(e)?new YQ(t,e):lS(e)?new ZQ(t,e):aS(e)?new eS(t,e):h8(e)?new tS(t,e):f8(e)?new ow(t,e):g8(e)?new Wy(t,e):Bf(e)?new nS(t,e):yf(e)?new rS(t,e):cS(e)?new AS(t,e):new fA(t,e)},iS=function(t,e){var n=sS(t,e);return n.flags|=4,wh(t,e,n,n),n},u8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||$y(t)&&n.styles.isTransparent()},d8=function(t){return t.isPositioned()||t.isFloating()},oS=function(t){return t.nodeType===Node.TEXT_NODE},Xo=function(t){return t.nodeType===Node.ELEMENT_NODE},aw=function(t){return Xo(t)&&typeof t.style<"u"&&!vh(t)},vh=function(t){return typeof t.className=="object"},h8=function(t){return t.tagName==="LI"},f8=function(t){return t.tagName==="OL"},g8=function(t){return t.tagName==="INPUT"},p8=function(t){return t.tagName==="HTML"},aS=function(t){return t.tagName==="svg"},$y=function(t){return t.tagName==="BODY"},lS=function(t){return t.tagName==="CANVAS"},SI=function(t){return t.tagName==="VIDEO"},lw=function(t){return t.tagName==="IMG"},cS=function(t){return t.tagName==="IFRAME"},kI=function(t){return t.tagName==="STYLE"},m8=function(t){return t.tagName==="SCRIPT"},yf=function(t){return t.tagName==="TEXTAREA"},Bf=function(t){return t.tagName==="SELECT"},uS=function(t){return t.tagName==="SLOT"},RI=function(t){return t.tagName.indexOf("-")>0},w8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,A=e.counterReset,s=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(s=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return s&&A.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),NI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},PI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},v8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},y8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},To=function(t,e,n,r,A,s){return t<e||t>n?ou(t,A,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},dS=function(t,e,n,r){var A="";do n||t--,A=r(t)+A,t/=e;while(t*e>=e);return A},Lt=function(t,e,n,r,A){var s=n-e+1;return(t<0?"-":"")+(dS(Math.abs(t),s,r,function(i){return Ot(Math.floor(i%s)+e)})+A)},di=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return dS(Math.abs(t),r,!1,function(A){return e[Math.floor(A%r)]})+n},Po=1,os=2,as=4,zl=8,yA=function(t,e,n,r,A,s){if(t<-9999||t>9999)return ou(t,4,A.length>0);var i=Math.abs(t),o=A;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&Jt(s,Po)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&Jt(s,os)||c===1&&a===1&&Jt(s,as)&&t>100||c===1&&a>1&&Jt(s,zl)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},DI="",LI="",OI="",sm="",ou=function(t,e,n){var r=n?". ":"",A=n?"":"",s=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Lt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return di(t,"",A);case 6:return To(t,1,3999,NI,3,r).toLowerCase();case 7:return To(t,1,3999,NI,3,r);case 8:return Lt(t,945,969,!1,r);case 9:return Lt(t,97,122,!1,r);case 10:return Lt(t,65,90,!1,r);case 11:return Lt(t,1632,1641,!0,r);case 12:case 49:return To(t,1,9999,PI,3,r);case 35:return To(t,1,9999,PI,3,r).toLowerCase();case 13:return Lt(t,2534,2543,!0,r);case 14:case 30:return Lt(t,6112,6121,!0,r);case 15:return di(t,"",A);case 16:return di(t,"",A);case 17:case 48:return yA(t,"",DI,"",A,os|as|zl);case 47:return yA(t,"",LI,"",A,Po|os|as|zl);case 42:return yA(t,"",DI,"",A,os|as|zl);case 41:return yA(t,"",LI,"",A,Po|os|as|zl);case 26:return yA(t,"","",OI,A,0);case 25:return yA(t,"","",OI,A,Po|os|as);case 31:return yA(t,"","",sm,s,Po|os|as);case 33:return yA(t,"","",sm,s,0);case 32:return yA(t,"","",sm,s,Po|os|as);case 18:return Lt(t,2406,2415,!0,r);case 20:return To(t,1,19999,y8,3,r);case 21:return Lt(t,2790,2799,!0,r);case 22:return Lt(t,2662,2671,!0,r);case 22:return To(t,1,10999,v8,3,r);case 23:return di(t,"");case 24:return di(t,"");case 27:return Lt(t,3302,3311,!0,r);case 28:return di(t,"",A);case 29:return di(t,"",A);case 34:return Lt(t,3792,3801,!0,r);case 37:return Lt(t,6160,6169,!0,r);case 38:return Lt(t,4160,4169,!0,r);case 39:return Lt(t,2918,2927,!0,r);case 40:return Lt(t,1776,1785,!0,r);case 43:return Lt(t,3046,3055,!0,r);case 44:return Lt(t,3174,3183,!0,r);case 45:return Lt(t,3664,3673,!0,r);case 46:return Lt(t,3872,3881,!0,r);case 3:default:return Lt(t,48,57,!0,r)}},hS="data-html2canvas-ignore",MI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new w8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,A=B8(e,n);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=A.contentWindow,a=o.document,c=C8(A).then(function(){return Rn(r,void 0,void 0,function(){var d,h;return En(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(T8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,_8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return A})]:[2,A]}})})});return a.open(),a.write(E8(document.doctype)+"<html></html>"),b8(this.referenceElement.ownerDocument,s,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(sw(e,2))debugger;if(lS(e))return this.createCanvasClone(e);if(SI(e))return this.createVideoClone(e);if(kI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return lw(n)&&(lw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),RI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return im(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=r,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,n,r){(!Xo(n)||!m8(n)&&!n.hasAttribute(hS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Xo(n)||!kI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Xo(s)&&uS(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return A.appendChildNode(n,o,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(oS(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Xo(e)&&(aw(e)||vh(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&aw(A)&&(this.clonedReferenceElement=A),$y(A)&&Q8(A);var a=this.counters.parse(new mI(this.context,s)),c=this.resolvePseudoContent(e,A,i,pc.BEFORE);RI(e)&&(n=!0),SI(e)||this.cloneChildNodes(e,A,n),c&&A.insertBefore(c,A.firstChild);var d=this.resolvePseudoContent(e,A,o,pc.AFTER);return d&&A.appendChild(d),this.counters.pop(a),(s&&(this.options.copyStyles||vh(e))&&!cS(e)||n)&&im(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(yf(e)||Bf(e))&&(yf(A)||Bf(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,A){var s=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new mI(this.context,r));var a=new hG(this.context,r),c=o.createElement("html2canvaspseudoelement");im(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(st);w.length&&c.appendChild(o.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var m=h.values.filter(Pa),x=m[0],C=m[1];if(x&&st(x)){var y=s.counters.getCounterValue(x.value),B=C&&st(C)?Aw.parse(s.context,C.value):3;c.appendChild(o.createTextNode(ou(y,B,!1)))}}else if(h.name==="counters"){var v=h.values.filter(Pa),x=v[0],k=v[1],C=v[2];if(x&&st(x)){var R=s.counters.getCounterValues(x.value),N=C&&st(C)?Aw.parse(s.context,C.value):3,I=k&&k.type===0?k.value:"",_=R.map(function(U){return ou(U,N,!1)}).join(I);c.appendChild(o.createTextNode(_))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(pI(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(pI(a.quotes,--s.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=cw+" "+uw;var d=A===pc.BEFORE?" "+cw:" "+uw;return vh(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),pc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(pc||(pc={}));var B8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(hS,"true"),t.body.appendChild(n),n},x8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},_8=function(t){return Promise.all([].slice.call(t.images,0).map(x8))},C8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var A=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},I8=["all","d","content"],im=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);I8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},E8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},b8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},T8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},F8=":before",U8=":after",cw="___html2canvas___pseudoelement_before",uw="___html2canvas___pseudoelement_after",VI=`{
    content: "" !important;
    display: none !important;
}`,Q8=function(t){S8(t,"."+cw+F8+VI+`
         .`+uw+U8+VI)},S8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},fS=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),k8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(am(e)||D8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Rn(this,void 0,void 0,function(){var n,r,A,s,i=this;return En(this,function(o){switch(o.label){case 0:return n=fS.isSameOrigin(e),r=!om(e)&&this._options.useCORS===!0&&un.SUPPORT_CORS_IMAGES&&!n,A=!om(e)&&!n&&!am(e)&&typeof this._options.proxy=="string"&&un.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!om(e)&&!am(e)&&!A&&!r?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(L8(s)||r)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var o=un.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")s(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+A+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}a.send()})},t}(),R8=/^data:image\/svg\+xml/i,N8=/^data:image\/.*;base64,/i,P8=/^data:image\/.*/i,D8=function(t){return un.SUPPORT_SVG_DRAWING||!O8(t)},om=function(t){return P8.test(t)},L8=function(t){return N8.test(t)},am=function(t){return t.substr(0,4)==="blob"},O8=function(t){return t.substr(-3).toLowerCase()==="svg"||R8.test(t)},he=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Fo=function(t,e,n){return new he(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Vd=function(){function t(e,n,r,A){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=A}return t.prototype.subdivide=function(e,n){var r=Fo(this.start,this.startControl,e),A=Fo(this.startControl,this.endControl,e),s=Fo(this.endControl,this.end,e),i=Fo(r,A,e),o=Fo(A,s,e),a=Fo(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),xr=function(t){return t.type===1},M8=function(){function t(e){var n=e.styles,r=e.bounds,A=Kl(n.borderTopLeftRadius,r.width,r.height),s=A[0],i=A[1],o=Kl(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=Kl(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],w=Kl(n.borderBottomLeftRadius,r.width,r.height),m=w[0],x=w[1],C=[];C.push((s+a)/r.width),C.push((m+h)/r.width),C.push((i+x)/r.height),C.push((c+f)/r.height);var y=Math.max.apply(Math,C);y>1&&(s/=y,i/=y,a/=y,c/=y,h/=y,f/=y,m/=y,x/=y);var B=r.width-a,v=r.height-f,k=r.width-h,R=r.height-x,N=n.borderTopWidth,I=n.borderRightWidth,_=n.borderBottomWidth,b=n.borderLeftWidth,Q=at(n.paddingTop,e.bounds.width),U=at(n.paddingRight,e.bounds.width),D=at(n.paddingBottom,e.bounds.width),T=at(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?pt(r.left+b/3,r.top+N/3,s-b/3,i-N/3,tt.TOP_LEFT):new he(r.left+b/3,r.top+N/3),this.topRightBorderDoubleOuterBox=s>0||i>0?pt(r.left+B,r.top+N/3,a-I/3,c-N/3,tt.TOP_RIGHT):new he(r.left+r.width-I/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?pt(r.left+k,r.top+v,h-I/3,f-_/3,tt.BOTTOM_RIGHT):new he(r.left+r.width-I/3,r.top+r.height-_/3),this.bottomLeftBorderDoubleOuterBox=m>0||x>0?pt(r.left+b/3,r.top+R,m-b/3,x-_/3,tt.BOTTOM_LEFT):new he(r.left+b/3,r.top+r.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?pt(r.left+b*2/3,r.top+N*2/3,s-b*2/3,i-N*2/3,tt.TOP_LEFT):new he(r.left+b*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?pt(r.left+B,r.top+N*2/3,a-I*2/3,c-N*2/3,tt.TOP_RIGHT):new he(r.left+r.width-I*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?pt(r.left+k,r.top+v,h-I*2/3,f-_*2/3,tt.BOTTOM_RIGHT):new he(r.left+r.width-I*2/3,r.top+r.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||x>0?pt(r.left+b*2/3,r.top+R,m-b*2/3,x-_*2/3,tt.BOTTOM_LEFT):new he(r.left+b*2/3,r.top+r.height-_*2/3),this.topLeftBorderStroke=s>0||i>0?pt(r.left+b/2,r.top+N/2,s-b/2,i-N/2,tt.TOP_LEFT):new he(r.left+b/2,r.top+N/2),this.topRightBorderStroke=s>0||i>0?pt(r.left+B,r.top+N/2,a-I/2,c-N/2,tt.TOP_RIGHT):new he(r.left+r.width-I/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?pt(r.left+k,r.top+v,h-I/2,f-_/2,tt.BOTTOM_RIGHT):new he(r.left+r.width-I/2,r.top+r.height-_/2),this.bottomLeftBorderStroke=m>0||x>0?pt(r.left+b/2,r.top+R,m-b/2,x-_/2,tt.BOTTOM_LEFT):new he(r.left+b/2,r.top+r.height-_/2),this.topLeftBorderBox=s>0||i>0?pt(r.left,r.top,s,i,tt.TOP_LEFT):new he(r.left,r.top),this.topRightBorderBox=a>0||c>0?pt(r.left+B,r.top,a,c,tt.TOP_RIGHT):new he(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?pt(r.left+k,r.top+v,h,f,tt.BOTTOM_RIGHT):new he(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=m>0||x>0?pt(r.left,r.top+R,m,x,tt.BOTTOM_LEFT):new he(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?pt(r.left+b,r.top+N,Math.max(0,s-b),Math.max(0,i-N),tt.TOP_LEFT):new he(r.left+b,r.top+N),this.topRightPaddingBox=a>0||c>0?pt(r.left+Math.min(B,r.width-I),r.top+N,B>r.width+I?0:Math.max(0,a-I),Math.max(0,c-N),tt.TOP_RIGHT):new he(r.left+r.width-I,r.top+N),this.bottomRightPaddingBox=h>0||f>0?pt(r.left+Math.min(k,r.width-b),r.top+Math.min(v,r.height-_),Math.max(0,h-I),Math.max(0,f-_),tt.BOTTOM_RIGHT):new he(r.left+r.width-I,r.top+r.height-_),this.bottomLeftPaddingBox=m>0||x>0?pt(r.left+b,r.top+Math.min(R,r.height-_),Math.max(0,m-b),Math.max(0,x-_),tt.BOTTOM_LEFT):new he(r.left+b,r.top+r.height-_),this.topLeftContentBox=s>0||i>0?pt(r.left+b+T,r.top+N+Q,Math.max(0,s-(b+T)),Math.max(0,i-(N+Q)),tt.TOP_LEFT):new he(r.left+b+T,r.top+N+Q),this.topRightContentBox=a>0||c>0?pt(r.left+Math.min(B,r.width+b+T),r.top+N+Q,B>r.width+b+T?0:a-b+T,c-(N+Q),tt.TOP_RIGHT):new he(r.left+r.width-(I+U),r.top+N+Q),this.bottomRightContentBox=h>0||f>0?pt(r.left+Math.min(k,r.width-(b+T)),r.top+Math.min(v,r.height+N+Q),Math.max(0,h-(I+U)),f-(_+D),tt.BOTTOM_RIGHT):new he(r.left+r.width-(I+U),r.top+r.height-(_+D)),this.bottomLeftContentBox=m>0||x>0?pt(r.left+b+T,r.top+R,Math.max(0,m-(b+T)),x-(_+D),tt.BOTTOM_LEFT):new he(r.left+b+T,r.top+r.height-(_+D))}return t}(),tt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(tt||(tt={}));var pt=function(t,e,n,r,A){var s=4*((Math.sqrt(2)-1)/3),i=n*s,o=r*s,a=t+n,c=e+r;switch(A){case tt.TOP_LEFT:return new Vd(new he(t,c),new he(t,c-o),new he(a-i,e),new he(a,e));case tt.TOP_RIGHT:return new Vd(new he(t,e),new he(t+i,e),new he(a,c-o),new he(a,c));case tt.BOTTOM_RIGHT:return new Vd(new he(a,e),new he(a,e+o),new he(t+i,c),new he(t,c));case tt.BOTTOM_LEFT:default:return new Vd(new he(a,c),new he(a-i,c),new he(t,e+o),new he(t,e))}},xf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},V8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},_f=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},H8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Hd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),j8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),K8=function(t){return t.type===0},gS=function(t){return t.type===1},G8=function(t){return t.type===2},HI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},z8=function(t,e,n,r,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+A);case 3:return s.add(e,n+A)}return s})},pS=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),mS=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new M8(this.container),this.container.styles.opacity<1&&this.effects.push(new j8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new H8(r,A,s))}if(this.container.styles.overflowX!==0){var i=xf(this.curves),o=_f(this.curves);HI(i,o)?this.effects.push(new Hd(i,6)):(this.effects.push(new Hd(i,2)),this.effects.push(new Hd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,A=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!gS(a)});if(n||r.container.styles.position!==0||!r.parent){if(A.unshift.apply(A,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=xf(r.curves),o=_f(r.curves);HI(i,o)||A.unshift(new Hd(o,6))}}else A.unshift.apply(A,s);r=r.parent}return A.filter(function(a){return Jt(a.target,e)})},t}(),dw=function(t,e,n,r){t.container.elements.forEach(function(A){var s=Jt(A.flags,4),i=Jt(A.flags,2),o=new mS(A,t);Jt(A.styles.display,2048)&&r.push(o);var a=Jt(A.flags,8)?[]:r;if(s||i){var c=s||A.styles.isPositioned()?n:e,d=new pS(o);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(m,x){return h>m.element.container.styles.zIndex.order?(f=x,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;c.positiveZIndex.some(function(m,x){return h>=m.element.container.styles.zIndex.order?(w=x+1,!1):w>0}),c.positiveZIndex.splice(w,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);dw(o,d,s?d:n,a)}else A.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),dw(o,e,n,a);Jt(A.flags,8)&&wS(A,a)})},wS=function(t,e){for(var n=t instanceof ow?t.start:1,r=t instanceof ow?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof tS&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=ou(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},W8=function(t){var e=new mS(t,null),n=new pS(e),r=[];return dw(e,n,n,r),wS(e.container,r),n},jI=function(t,e){switch(e){case 0:return br(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return br(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return br(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return br(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$8=function(t,e){switch(e){case 0:return br(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return br(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return br(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return br(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},q8=function(t,e){switch(e){case 0:return br(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return br(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return br(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return br(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},J8=function(t,e){switch(e){case 0:return jd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return jd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return jd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return jd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},jd=function(t,e){var n=[];return xr(t)?n.push(t.subdivide(.5,!1)):n.push(t),xr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},br=function(t,e,n,r){var A=[];return xr(t)?A.push(t.subdivide(.5,!1)):A.push(t),xr(n)?A.push(n.subdivide(.5,!0)):A.push(n),xr(r)?A.push(r.subdivide(.5,!0).reverse()):A.push(r),xr(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},vS=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Cf=function(t){var e=t.styles,n=t.bounds,r=at(e.paddingLeft,n.width),A=at(e.paddingRight,n.width),s=at(e.paddingTop,n.width),i=at(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},X8=function(t,e){return t===0?e.bounds:t===2?Cf(e):vS(e)},Y8=function(t,e){return t===0?e.bounds:t===2?Cf(e):vS(e)},lm=function(t,e,n){var r=X8(Do(t.styles.backgroundOrigin,e),t),A=Y8(Do(t.styles.backgroundClip,e),t),s=Z8(Do(t.styles.backgroundSize,e),n,r),i=s[0],o=s[1],a=Kl(Do(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=e9(Do(t.styles.backgroundRepeat,e),a,s,r,A),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},Uo=function(t){return st(t)&&t.value===ca.AUTO},Kd=function(t){return typeof t=="number"},Z8=function(t,e,n){var r=e[0],A=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(zt(i)&&o&&zt(o))return[at(i,n.width),at(o,n.height)];var a=Kd(s);if(st(i)&&(i.value===ca.CONTAIN||i.value===ca.COVER)){if(Kd(s)){var c=n.width/n.height;return c<s!=(i.value===ca.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=Kd(r),h=Kd(A),f=d||h;if(Uo(i)&&(!o||Uo(o))){if(d&&h)return[r,A];if(!a&&!f)return[n.width,n.height];if(f&&a){var w=d?r:A*s,m=h?A:r/s;return[w,m]}var x=d?r:n.width,C=h?A:n.height;return[x,C]}if(a){var y=0,B=0;return zt(i)?y=at(i,n.width):zt(o)&&(B=at(o,n.height)),Uo(i)?y=B*s:(!o||Uo(o))&&(B=y/s),[y,B]}var v=null,k=null;if(zt(i)?v=at(i,n.width):o&&zt(o)&&(k=at(o,n.height)),v!==null&&(!o||Uo(o))&&(k=d&&h?v/r*A:n.height),k!==null&&Uo(i)&&(v=d&&h?k/A*r:n.width),v!==null&&k!==null)return[v,k];throw new Error("Unable to calculate background-size for element")},Do=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},e9=function(t,e,n,r,A){var s=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new he(Math.round(r.left),Math.round(r.top+i)),new he(Math.round(r.left+r.width),Math.round(r.top+i)),new he(Math.round(r.left+r.width),Math.round(a+r.top+i)),new he(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new he(Math.round(r.left+s),Math.round(r.top)),new he(Math.round(r.left+s+o),Math.round(r.top)),new he(Math.round(r.left+s+o),Math.round(r.height+r.top)),new he(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new he(Math.round(r.left+s),Math.round(r.top+i)),new he(Math.round(r.left+s+o),Math.round(r.top+i)),new he(Math.round(r.left+s+o),Math.round(r.top+i+a)),new he(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new he(Math.round(A.left),Math.round(A.top)),new he(Math.round(A.left+A.width),Math.round(A.top)),new he(Math.round(A.left+A.width),Math.round(A.height+A.top)),new he(Math.round(A.left),Math.round(A.height+A.top))]}},t9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",KI="Hidden Text",n9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),A.src=t9,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(KI)),r.appendChild(s),r.appendChild(A);var o=A.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(KI)),r.style.lineHeight="normal",A.style.verticalAlign="super";var a=A.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),yS=function(){function t(e,n){this.context=e,this.options=n}return t}(),r9=1e4,A9=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A._activeEffects=[],A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),r.canvas||(A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px"),A.fontMetrics=new n9(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),A}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(A){return r.applyEffect(A)})},e.prototype.applyEffect=function(n){this.ctx.save(),G8(n)&&(this.ctx.globalAlpha=n.opacity),K8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),gS(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Rn(this,void 0,void 0,function(){var r;return En(this,function(A){switch(A.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Rn(this,void 0,void 0,function(){return En(this,function(r){switch(r.label){case 0:if(Jt(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,A){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+A);else{var i=zy(n.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,n.bounds.top+A),o+s.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=l9(n.fontFamily).join(", "),s=Pu(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(n,r){return Rn(this,void 0,void 0,function(){var A,s,i,o,a,c,d,h,f=this;return En(this,function(w){return A=this.createFontStyle(r),s=A[0],i=A[1],o=A[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(m){h.forEach(function(x){switch(x){case 0:f.ctx.fillStyle=nn(r.color),f.renderTextWithLetterSpacing(m,r.letterSpacing,c);var C=r.textShadow;C.length&&m.text.trim().length&&(C.slice(0).reverse().forEach(function(y){f.ctx.shadowColor=nn(y.color),f.ctx.shadowOffsetX=y.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=y.offsetY.number*f.options.scale,f.ctx.shadowBlur=y.blur.number,f.renderTextWithLetterSpacing(m,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=nn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(y){switch(y){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+c),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=nn(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,A){if(A&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=Cf(n),i=_f(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Rn(this,void 0,void 0,function(){var r,A,s,i,o,a,B,B,c,d,h,f,k,w,m,R,x,C,y,B,v,k,R;return En(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,A=n.curves,s=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof YQ))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return B=N.sent(),this.renderReplacedElement(r,A,B),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof ZQ&&this.renderReplacedElement(r,A,r.canvas),!(r instanceof eS))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return B=N.sent(),this.renderReplacedElement(r,A,B),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof AS&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof Wy&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===wf?r.checked&&(this.ctx.save(),this.path([new he(r.bounds.left+h*.39363,r.bounds.top+h*.79),new he(r.bounds.left+h*.16,r.bounds.top+h*.5549),new he(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new he(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new he(r.bounds.left+h*.72983,r.bounds.top+h*.23),new he(r.bounds.left+h*.84,r.bounds.top+h*.34085),new he(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=nn(QI),this.ctx.fill(),this.ctx.restore()):r.type===vf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=nn(QI),this.ctx.fill(),this.ctx.restore())),s9(r)&&r.value.length){switch(f=this.createFontStyle(s),k=f[0],w=f[1],m=this.fontMetrics.getMetrics(k,w).baseline,this.ctx.font=k,this.ctx.fillStyle=nn(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=o9(r.styles.textAlign),R=Cf(r),x=0,r.styles.textAlign){case 1:x+=R.width/2;break;case 2:x+=R.width;break}C=R.add(x,0,0,-R.height/2+1),this.ctx.save(),this.path([new he(R.left,R.top),new he(R.left+R.width,R.top),new he(R.left+R.width,R.top+R.height),new he(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gc(r.value,C),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Jt(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(y=r.styles.listStyleImage,y.type!==0)return[3,18];B=void 0,v=y.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return B=N.sent(),this.ctx.drawImage(B,r.bounds.left-(B.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(k=this.createFontStyle(s)[0],this.ctx.font=k,this.ctx.fillStyle=nn(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new MA(r.bounds.left,r.bounds.top+at(r.styles.paddingTop,r.bounds.width),r.bounds.width,fI(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gc(n.listValue,R),s.letterSpacing,fI(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Rn(this,void 0,void 0,function(){var r,A,y,s,i,y,o,a,y,c,d,y,h,f,y,w,m,y,x,C,y;return En(this,function(B){switch(B.label){case 0:if(Jt(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:B.sent(),r=0,A=n.negativeZIndex,B.label=2;case 2:return r<A.length?(y=A[r],[4,this.renderStack(y)]):[3,5];case 3:B.sent(),B.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:B.sent(),s=0,i=n.nonInlineLevel,B.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:B.sent(),B.label=9;case 9:return s++,[3,7];case 10:o=0,a=n.nonPositionedFloats,B.label=11;case 11:return o<a.length?(y=a[o],[4,this.renderStack(y)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,B.label=15;case 15:return c<d.length?(y=d[c],[4,this.renderStack(y)]):[3,18];case 16:B.sent(),B.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,B.label=19;case 19:return h<f.length?(y=f[h],[4,this.renderNode(y)]):[3,22];case 20:B.sent(),B.label=21;case 21:return h++,[3,19];case 22:w=0,m=n.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return w<m.length?(y=m[w],[4,this.renderStack(y)]):[3,26];case 24:B.sent(),B.label=25;case 25:return w++,[3,23];case 26:x=0,C=n.positiveZIndex,B.label=27;case 27:return x<C.length?(y=C[x],[4,this.renderStack(y)]):[3,30];case 28:B.sent(),B.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(A,s){var i=xr(A)?A.start:A;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),xr(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(n,r,A,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(n,r,A){var s;if(n.width===r&&n.height===A)return n;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,A);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,A),o},e.prototype.renderBackgroundImage=function(n){return Rn(this,void 0,void 0,function(){var r,A,s,i,o,a;return En(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,A=function(d){var h,f,w,Q,ee,Ie,T,Fe,_,m,Q,ee,Ie,T,Fe,x,C,y,B,v,k,R,N,I,_,b,Q,U,D,T,Fe,et,ee,Ie,G,F,L,H,$,z,fe,pe;return En(this,function(Ee){switch(Ee.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=Ee.sent(),[3,4];case 3:return Ee.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=lm(n,r,[h.width,h.height,h.width/h.height]),Q=w[0],ee=w[1],Ie=w[2],T=w[3],Fe=w[4],_=s.ctx.createPattern(s.resizeImage(h,T,Fe),"repeat"),s.renderRepeat(Q,_,ee,Ie)),[3,6];case 5:K5(d)?(m=lm(n,r,[null,null,null]),Q=m[0],ee=m[1],Ie=m[2],T=m[3],Fe=m[4],x=O5(d.angle,T,Fe),C=x[0],y=x[1],B=x[2],v=x[3],k=x[4],R=document.createElement("canvas"),R.width=T,R.height=Fe,N=R.getContext("2d"),I=N.createLinearGradient(y,v,B,k),dI(d.stops,C).forEach(function(re){return I.addColorStop(re.stop,nn(re.color))}),N.fillStyle=I,N.fillRect(0,0,T,Fe),T>0&&Fe>0&&(_=s.ctx.createPattern(R,"repeat"),s.renderRepeat(Q,_,ee,Ie))):G5(d)&&(b=lm(n,r,[null,null,null]),Q=b[0],U=b[1],D=b[2],T=b[3],Fe=b[4],et=d.position.length===0?[jy]:d.position,ee=at(et[0],T),Ie=at(et[et.length-1],Fe),G=M5(d,ee,Ie,T,Fe),F=G[0],L=G[1],F>0&&L>0&&(H=s.ctx.createRadialGradient(U+ee,D+Ie,0,U+ee,D+Ie,F),dI(d.stops,F*2).forEach(function(re){return H.addColorStop(re.stop,nn(re.color))}),s.path(Q),s.ctx.fillStyle=H,F!==L?($=n.bounds.left+.5*n.bounds.width,z=n.bounds.top+.5*n.bounds.height,fe=L/F,pe=1/fe,s.ctx.save(),s.ctx.translate($,z),s.ctx.transform(1,0,0,fe,0,0),s.ctx.translate(-$,-z),s.ctx.fillRect(U,pe*(D-z)+z,T,Fe*pe),s.ctx.restore()):s.ctx.fill())),Ee.label=6;case 6:return r--,[2]}})},s=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,A(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,A){return Rn(this,void 0,void 0,function(){return En(this,function(s){return this.path(jI(A,r)),this.ctx.fillStyle=nn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,A,s){return Rn(this,void 0,void 0,function(){var i,o;return En(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,A,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=$8(s,A),this.path(i),this.ctx.fillStyle=nn(n),this.ctx.fill(),o=q8(s,A),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Rn(this,void 0,void 0,function(){var r,A,s,i,o,a,c,d,h=this;return En(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,A=!Ps(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=i9(Do(r.backgroundClip,0),n.curves),A||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Ps(r.backgroundColor)||(this.ctx.fillStyle=nn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var m=xf(n.curves),x=w.inset?0:r9,C=z8(m,-x+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(m),h.ctx.clip(),h.mask(C)):(h.mask(m),h.ctx.clip(),h.path(C)),h.ctx.shadowOffsetX=w.offsetX.number+x,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=nn(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?nn(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=s,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!Ps(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,A,s,i){return Rn(this,void 0,void 0,function(){var o,a,c,d,h,f,w,m,x,C,y,B,v,k,R,N,R,N;return En(this,function(I){return this.ctx.save(),o=J8(s,A),a=jI(s,A),i===2&&(this.path(a),this.ctx.clip()),xr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),xr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),A===0||A===2?w=Math.abs(c-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),m=r<3?r*3:r*2,x=r<3?r*2:r,i===3&&(m=r,x=r),C=!0,w<=m*2?C=!1:w<=m*2+x?(y=w/(2*m+x),m*=y,x*=y):(B=Math.floor((w+x)/(m+x)),v=(w-B*m)/(B-1),k=(w-(B+1)*m)/B,x=k<=0||Math.abs(x-v)<Math.abs(x-k)?v:k),C&&(i===3?this.ctx.setLineDash([0,m+x]):this.ctx.setLineDash([m,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=nn(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(xr(a[0])&&(R=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new he(R.end.x,R.end.y),new he(N.start.x,N.start.y)]),this.ctx.stroke()),xr(a[1])&&(R=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new he(R.end.x,R.end.y),new he(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Rn(this,void 0,void 0,function(){var r;return En(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=nn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=W8(n),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yS),s9=function(t){return t instanceof rS||t instanceof nS?!0:t instanceof Wy&&t.type!==vf&&t.type!==wf},i9=function(t,e){switch(t){case 0:return xf(e);case 2:return V8(e);case 1:default:return _f(e)}},o9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},a9=["-apple-system","system-ui"],l9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return a9.indexOf(e)===-1}):t},c9=function(t){Gr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=r,A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),A}return e.prototype.render=function(n){return Rn(this,void 0,void 0,function(){var r,A;return En(this,function(s){switch(s.label){case 0:return r=iw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,u9(r)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=nn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yS),u9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},d9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,xd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,xd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,xd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,xd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),h9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new d9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new k8(this,e)}return t.instanceCount=1,t}(),f9=function(t,e){return e===void 0&&(e={}),g9(t,e)};typeof window<"u"&&fS.setContext(window);var g9=function(t,e){return Rn(void 0,void 0,void 0,function(){var n,r,A,s,i,o,a,c,d,h,f,w,m,x,C,y,B,v,k,R,I,N,I,_,b,Q,U,D,T,Fe,et,ee,Ie,G,F,L,H,$,z,fe;return En(this,function(pe){switch(pe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return A={allowTaint:(_=e.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(b=e.imageTimeout)!==null&&b!==void 0?b:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=G0({logging:(U=e.logging)!==null&&U!==void 0?U:!0,cache:e.cache},A),i={windowWidth:(D=e.windowWidth)!==null&&D!==void 0?D:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(Fe=e.scrollX)!==null&&Fe!==void 0?Fe:r.pageXOffset,scrollY:(et=e.scrollY)!==null&&et!==void 0?et:r.pageYOffset},o=new MA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new h9(s,o),c=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,d={allowTaint:(Ie=e.allowTaint)!==null&&Ie!==void 0?Ie:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new MI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=pe.sent(),m=$y(f)||p8(f)?zK(f.ownerDocument):Fg(a,f),x=m.width,C=m.height,y=m.left,B=m.top,v=p9(a,f,e.backgroundColor),k={canvas:e.canvas,backgroundColor:v,scale:(F=(G=e.scale)!==null&&G!==void 0?G:r.devicePixelRatio)!==null&&F!==void 0?F:1,x:((L=e.x)!==null&&L!==void 0?L:0)+y,y:((H=e.y)!==null&&H!==void 0?H:0)+B,width:($=e.width)!==null&&$!==void 0?$:Math.ceil(x),height:(z=e.height)!==null&&z!==void 0?z:Math.ceil(C)},c?(a.logger.debug("Document cloned, using foreign object rendering"),I=new c9(a,k),[4,I.render(f)]):[3,3];case 2:return R=pe.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+y+","+B+" with size "+x+"x"+C+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=iS(a,f),v===N.styles.backgroundColor&&(N.styles.backgroundColor=QA.TRANSPARENT),a.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),I=new A9(a,k),[4,I.render(N)];case 4:R=pe.sent(),pe.label=5;case 5:return(!((fe=e.removeContainer)!==null&&fe!==void 0)||fe)&&(MI.destroy(w)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,R]}})})},p9=function(t,e,n){var r=e.ownerDocument,A=r.documentElement?hc(t,getComputedStyle(r.documentElement).backgroundColor):QA.TRANSPARENT,s=r.body?hc(t,getComputedStyle(r.body).backgroundColor):QA.TRANSPARENT,i=typeof n=="string"?hc(t,n):n===null?QA.TRANSPARENT:4294967295;return e===r.documentElement?Ps(A)?Ps(s)?i:s:A:i},m9=Object.defineProperty,If=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,GI=(t,e,n)=>e in t?m9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w9=(t,e)=>{for(var n in e||(e={}))BS.call(e,n)&&GI(t,n,e[n]);if(If)for(var n of If(e))xS.call(e,n)&&GI(t,n,e[n]);return t},v9=(t,e)=>{var n={};for(var r in t)BS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&If)for(var r of If(t))e.indexOf(r)<0&&xS.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var no;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let m=0;m<this.size;m++)f.push(!1);for(let m=0;m<this.size;m++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let m=1e9;for(let x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);const C=this.getPenaltyScore();C<m&&(h=x,m=C),this.applyMask(x)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let m,x;for(m=d;;m++){const v=e.getNumDataCodewords(m,c)*8,k=o.getTotalBits(a,m);if(k<=v){x=k;break}if(m>=h)throw new RangeError("Data too long")}for(const v of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&x<=e.getNumDataCodewords(m,v)*8&&(c=v);let C=[];for(const v of a){r(v.mode.modeBits,4,C),r(v.numChars,v.mode.numCharCountBits(m),C);for(const k of v.getData())C.push(k)}s(C.length==x);const y=e.getNumDataCodewords(m,c)*8;s(C.length<=y),r(0,Math.min(4,y-C.length),C),r(0,(8-C.length%8)%8,C),s(C.length%8==0);for(let v=236;C.length<y;v^=253)r(v,8,C);let B=[];for(;B.length*8<C.length;)B.push(0);return C.forEach((v,k)=>B[k>>>3]|=v<<7-(k&7)),new e(m,c,B,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;s(c>>>18==0);for(let d=0;d<18;d++){const h=A(c,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=a+h,m=c+d;0<=w&&w<this.size&&0<=m&&m<this.size&&this.setFunctionModule(w,m,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],w=Math.floor(e.getNumRawDataModules(c)/8),m=h-w%h,x=Math.floor(w/h);let C=[];const y=e.reedSolomonComputeDivisor(f);for(let v=0,k=0;v<h;v++){let R=a.slice(k,k+x-f+(v<m?0:1));k+=R.length;const N=e.reedSolomonComputeRemainder(R,y);v<m&&R.push(0),C.push(R.concat(N))}let B=[];for(let v=0;v<C[0].length;v++)C.forEach((k,R)=>{(v!=x-f||R>=m)&&B.push(k[v])});return s(B.length==w),B}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,x=(d+1&2)==0?this.size-1-h:h;!this.isFunction[x][w]&&c<a.length*8&&(this.modules[x][w]=A(a[c>>>3],7-(c&7)),c++)}}s(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let w=!1,m=0,x=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[f][C]==w?(m++,m==5?a+=e.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,x),w||(a+=this.finderPenaltyCountPatterns(x)*e.PENALTY_N3),w=this.modules[f][C],m=1);a+=this.finderPenaltyTerminateAndCount(w,m,x)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,m=0,x=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][f]==w?(m++,m==5?a+=e.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,x),w||(a+=this.finderPenaltyCountPatterns(x)*e.PENALTY_N3),w=this.modules[C][f],m=1);a+=this.finderPenaltyTerminateAndCount(w,m,x)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const m=this.modules[f][w];m==this.modules[f][w+1]&&m==this.modules[f+1][w]&&m==this.modules[f+1][w+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((w,m)=>w+(m?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),a+=h*e.PENALTY_N4,s(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((w,m)=>d[m]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return s(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];s(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function A(a,c){return(a>>>c&1)!=0}function s(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(no||(no={}));(t=>{(e=>{const n=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(no||(no={}));(t=>{(e=>{const n=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(no||(no={}));var Wl=no;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var y9={L:Wl.QrCode.Ecc.LOW,M:Wl.QrCode.Ecc.MEDIUM,Q:Wl.QrCode.Ecc.QUARTILE,H:Wl.QrCode.Ecc.HIGH},B9=128,x9="L",_9="#FFFFFF",C9="#000000",I9=!1,_S=4,E9=.1;function b9(t,e=0){const n=[];return t.forEach(function(r,A){let s=null;r.forEach(function(i,o){if(!i&&s!==null){n.push(`M${s+e} ${A+e}h${o-s}v1H${s+e}z`),s=null;return}if(o===r.length-1){if(!i)return;s===null?n.push(`M${o+e},${A+e} h1v1H${o+e}z`):n.push(`M${s+e},${A+e} h${o+1-s}v1H${s+e}z`);return}i&&s===null&&(s=o)})}),n.join("")}function T9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function F9(t,e,n,r){if(r==null)return null;const A=n?_S:0,s=t.length+A*2,i=Math.floor(e*E9),o=s/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let w=Math.floor(d),m=Math.floor(h),x=Math.ceil(a+d-w),C=Math.ceil(c+h-m);f={x:w,y:m,w:x,h:C}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function U9(t){const e=t,{value:n,size:r=B9,level:A=x9,bgColor:s=_9,fgColor:i=C9,includeMargin:o=I9,imageSettings:a}=e,c=v9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Wl.QrCode.encodeText(n,y9[A]).getModules();const h=o?_S:0,f=d.length+h*2,w=F9(d,r,o,a);let m=null;a!=null&&w!=null&&(w.excavation!=null&&(d=T9(d,w.excavation)),m=Ci.createElement("image",{xlinkHref:a.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const x=b9(d,h);return Ci.createElement("svg",w9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Ci.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Ci.createElement("path",{fill:i,d:x,shapeRendering:"crispEdges"}),m)}const Q9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,saveStaticData:i}=KA(),{schedule:o,substitutions:a,saveScheduleData:c}=Va(),d=S.useRef(null),h=S.useRef(null),[f,w]=S.useState(new Date().toISOString().split("T")[0]),[m,x]=S.useState(!1),[C,y]=S.useState(!1),[B,v]=S.useState(""),[k,R]=S.useState(""),N=S.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,schedule:o,substitutions:a}),[t,e,n,r,A,s,o,a]),I=ee=>{var F;const Ie=(F=ee.target.files)==null?void 0:F[0];if(!Ie)return;const G=new FileReader;G.onload=async L=>{try{const H=JSON.parse(L.target.result);if(H.teachers&&H.schedule){if(window.confirm("    . ?")){const $={..._r,...H,rooms:H.rooms||_r.rooms,classes:H.classes||[],schedule:H.schedule||[],teachers:H.teachers||[],subjects:H.subjects||[],substitutions:H.substitutions||[],settings:{..._r.settings,...H.settings}};await i($),await c($),alert("  !")}}else alert("  .")}catch{alert("  .")}},G.readAsText(Ie)},_=()=>{let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;bn.forEach(L=>{ee+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${L}</td></tr>`,[ae.First,ae.Second].forEach(H=>{const $=n.filter(z=>z.shift===H);$.length!==0&&(ee+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${H}</td></tr>`,ee+='<tr><th class="header"></th>',eA[H].forEach(z=>ee+=`<th class="header">${z} </th>`),ee+="</tr>",$.forEach(z=>{ee+=`<tr><td class="class-cell">${z.name}</td>`,eA[H].forEach(fe=>{const pe=o.filter(Ee=>Ee.classId===z.id&&Ee.day===L&&Ee.shift===H&&Ee.period===fe);ee+='<td style="height: 60px;">',pe.forEach(Ee=>{const re=t.find(Le=>Le.id===Ee.subjectId),Re=e.find(Le=>Le.id===Ee.teacherId),$e=r.find(Le=>Le.id===Ee.roomId),Qe=$e?$e.name:Ee.roomId;ee+=`<div style="background-color: ${(re==null?void 0:re.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(re==null?void 0:re.name)||""} ${Ee.direction||""}</div>
                                <div class="meta">${(Re==null?void 0:Re.name)||""} ${Qe?`(. ${Qe})`:""}</div>
                            </div>`}),ee+="</td>"}),ee+="</tr>"}))})}),ee+="</table></body></html>";const Ie=new Blob([ee],{type:"application/vnd.ms-excel"}),G=URL.createObjectURL(Ie),F=document.createElement("a");F.href=G,F.download="_22.xls",document.body.appendChild(F),F.click(),document.body.removeChild(F)},b=()=>{let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ae.First,ae.Second].forEach(L=>{const H=eA[L];ee+="<table>",ee+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${bn.length*H.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,ee+="<tr>",bn.forEach($=>{ee+=`<th colspan="${H.length}" class="header" style="border: 2px solid #000;">${$}</th>`}),ee+="</tr>",ee+="<tr>",bn.forEach(()=>{H.forEach($=>ee+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),ee+="</tr>",ee+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${L}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,bn.forEach(()=>{H.forEach($=>ee+=`<th class="header" style="width: 40px;">${$}</th>`)}),ee+="</tr>",t.forEach($=>{const z=e.filter(pe=>pe.subjectIds.includes($.id));if(z.length===0)return;const fe=$.color||"#ffffff";z.forEach((pe,Ee)=>{ee+="<tr>",Ee===0&&(ee+=`<td rowspan="${z.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${fe};">${$.name}</td>`),ee+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${pe.name}</td>`,bn.forEach(re=>{H.forEach(Re=>{const $e=o.find(Qe=>Qe.teacherId===pe.id&&Qe.subjectId===$.id&&Qe.day===re&&Qe.period===Re&&Qe.shift===L);if($e){const Qe=n.find(Pt=>Pt.id===$e.classId),Le=r.find(Pt=>Pt.id===$e.roomId),Xe=Le?Le.name:$e.roomId,Se=Xe?`<sub>${Xe}</sub>`:"",ke=$e.direction?` <span style="font-size:9px">(${$e.direction})</span>`:"",Oe=$.color||"#ffffff";ee+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${Oe};">${Qe?Qe.name:""}${ke}${Se}</td>`}else ee+='<td style="border: 1px solid #000;"></td>'})}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+bn.length*H.length}" style="height: 2px; background-color: #000;"></td></tr>`}),ee+="</table><br/><br/>"}),ee+="</body></html>";const Ie=new Blob([ee],{type:"application/vnd.ms-excel"}),G=URL.createObjectURL(Ie),F=document.createElement("a");F.href=G,F.download="_.xls",document.body.appendChild(F),F.click(),document.body.removeChild(F)},Q=()=>{let ee=`							
`;bn.forEach(Ie=>{[ae.First,ae.Second].forEach(G=>{n.filter(L=>L.shift===G).forEach(L=>{eA[G].forEach(H=>{o.filter(z=>z.classId===L.id&&z.day===Ie&&z.shift===G&&z.period===H).forEach(z=>{const fe=t.find(Re=>Re.id===z.subjectId),pe=e.find(Re=>Re.id===z.teacherId),Ee=r.find(Re=>Re.id===z.roomId),re=Ee?Ee.name:z.roomId||"";ee+=`${Ie}	${G}	${L.name}	${H}	${(fe==null?void 0:fe.name)||""}	${(pe==null?void 0:pe.name)||""}	${re}	${z.direction||""}
`})})})})}),navigator.clipboard.writeText(ee).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},U=async()=>{if(h.current){x(!0);try{const ee=await f9(h.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),Ie=document.createElement("a");Ie.download=`_${f}.png`,Ie.href=ee.toDataURL("image/png"),Ie.click()}catch(ee){console.error(ee),alert("   ")}x(!1)}},D=S.useMemo(()=>a.filter(ee=>ee.date===f),[a,f]),T=ee=>{const Ie=D.filter(G=>{const F=o.find(L=>L.id===G.scheduleItemId);return F&&F.shift===ee}).filter(G=>G.replacementTeacherId!=="conducted");return Ie.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:ee}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Ie.map(G=>{var ke;const F=o.find(Oe=>Oe.id===G.scheduleItemId);if(!F)return null;const L=n.find(Oe=>Oe.id===F.classId),H=t.find(Oe=>Oe.id===F.subjectId),$=e.find(Oe=>Oe.id===G.originalTeacherId),z=G.replacementRoomId,fe=F.roomId?r.find(Oe=>Oe.id===F.roomId):null,pe=fe?fe.name:F.roomId||"",Ee=z?r.find(Oe=>Oe.id===z):null,re=Ee?Ee.name:z||"",Re=G.replacementTeacherId==="cancelled",$e=Re?{name:" "}:e.find(Oe=>Oe.id===G.replacementTeacherId),Qe=(ke=$==null?void 0:$.absenceReasons)==null?void 0:ke[f],Le=G.lessonAbsenceReason,Xe=Le===" "?Le:Qe===" "?Qe:"",Se=G.replacementTeacherId===G.originalTeacherId&&z;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:F.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:L==null?void 0:L.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:H==null?void 0:H.name}),F.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:F.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!Se&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-red-400 line-through text-sm font-medium decoration-red-200",children:$==null?void 0:$.name}),Xe&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:Xe})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Re?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Se?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:$==null?void 0:$.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):$e==null?void 0:$e.name}),l.jsx("td",{className:`py-3 px-2 text-right font-mono ${z?"font-black text-indigo-600":"text-slate-500"}`,children:z&&z!==F.roomId?l.jsxs("span",{children:[l.jsx("span",{className:"text-slate-400 line-through mr-1 decoration-slate-300 decoration-2 opacity-70 text-xs",children:pe}),l.jsxs("span",{className:"text-indigo-600 font-black text-sm",children:[" ",re]})]}):pe})]},G.id)})})]})]})},Fe=async()=>{const ee=Math.random().toString(36).substr(2,9);await ar.setPublicData(ee,N),await i({settings:{...A,publicScheduleId:ee}});const Ie=`${window.location.origin}${window.location.pathname}#/public?id=${ee}`;v(Ie),R(ee),y(!0)},et=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await ar.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),v(""),R(""))};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>ar.exportJson(N),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:d,onChange:I,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var ee;return(ee=d.current)==null?void 0:ee.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(J,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(J,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:f,onChange:ee=>w(ee.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:U,disabled:m,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Download",size:20}),"  PNG"]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-center",children:l.jsxs("div",{ref:h,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:"   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),D.length===0?l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}):l.jsxs(l.Fragment,{children:[T(ae.First),T(ae.Second)]}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:_,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:b,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Clipboard",size:20}),"   Google Sheets"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),l.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(J,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:et,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:Fe,disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(J,{name:"Share2",size:20}),"  "]})]}),l.jsx(UA,{isOpen:C,onClose:()=>y(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),B&&l.jsxs(l.Fragment,{children:[l.jsx(U9,{value:B,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:B}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(B),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"Copy",size:16}),"  "]})]})]})})]})},S9=()=>{var w;const{subjects:t,teachers:e,classes:n}=KA(),{schedule:r,substitutions:A}=Va(),[s,i]=S.useState("load"),[o,a]=S.useState(((w=n[0])==null?void 0:w.id)||""),c=S.useMemo(()=>e.map(x=>{const C=r.filter(I=>I.teacherId===x.id),y=C.length,B=y*4,v=A.filter(I=>I.replacementTeacherId===x.id).length,k=A.filter(I=>I.originalTeacherId===x.id).length,R=B+v-k,N={};return C.forEach(I=>{const _=t.find(b=>b.id===I.subjectId);_&&(N[_.name]=(N[_.name]||0)+1)}),{id:x.id,name:x.name,weeklyHours:y,subsTaken:v,subsMissed:k,actualHours:R,subjectBreakdown:N}}).sort((x,C)=>C.actualHours-x.actualHours),[e,r,A,t]),d=S.useMemo(()=>o?bn.map(m=>{const C=r.filter(y=>y.classId===o&&y.day===m).reduce((y,B)=>{const v=t.find(k=>k.id===B.subjectId);return y+((v==null?void 0:v.difficulty)||5)},0);return{label:m,value:C}}):[],[r,t,o]),h=S.useMemo(()=>{const m=e.map(C=>({name:C.name,count:A.filter(y=>y.replacementTeacherId===C.id).length})).sort((C,y)=>y.count-C.count).slice(0,5),x=e.map(C=>({name:C.name,count:C.unavailableDates.length})).sort((C,y)=>y.count-C.count).slice(0,5);return{heroes:m,absentees:x}},[e,A]),f=()=>{let m="";s==="load"?m=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+c.map(y=>`"${y.name}",${y.weeklyHours},${y.subsTaken},${y.subsMissed},${y.actualHours},"${Object.entries(y.subjectBreakdown).map(([B,v])=>B+": "+v).join(", ")}"`).join(`
`):s==="sanpin"&&(m=`Day,Score
`+d.map(y=>`${y.label},${y.value}`).join(`
`));const x=new Blob([`\uFEFF${m}`],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a");C.href=URL.createObjectURL(x),C.download=`report_${s}.csv`,document.body.appendChild(C),C.click(),document.body.removeChild(C)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(J,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("button",{onClick:f,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2",children:[l.jsx(J,{name:"FileSpreadsheet",size:16}),"  CSV"]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>i("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),s==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:c.map(m=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:m.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:m.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",m.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",m.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:m.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(m.subjectBreakdown).map(([x,C])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[x,": ",C]},x))})})]},m.id))})]})}),s==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:m=>a(m.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(m=>l.jsx("option",{value:m.id,children:m.name},m.id))})]}),l.jsx(Hp,{items:d,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),s==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Hp,{items:h.heroes.map(m=>({label:m.name,value:m.count})),max:Math.max(...h.heroes.map(m=>m.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Hp,{items:h.absentees.map(m=>({label:m.name,value:m.count})),max:Math.max(...h.absentees.map(m=>m.count),1),barClassName:"bg-red-500"})]})]})]})},k9=()=>{const{setGuestRole:t,role:e,loading:n}=Ru(),r=hu(),[A,s]=S.useState("select"),[i,o]=S.useState(""),[a,c]=S.useState(""),[d,h]=S.useState(""),[f,w]=S.useState(!1);S.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const m=async C=>{C.preventDefault(),h(""),w(!0);try{let y=i;A==="teacher"&&(y="teacher@gymnasium22.com"),await gh.signInWithEmailAndPassword(y,a)}catch(y){console.error("Firebase Auth Error:",y);const B=y.code;let v="   .";switch(B){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":v="   .     .";break;case"auth/invalid-email":v="  email .";break;case"auth/too-many-requests":v="   .  .";break;default:v=" .       Firebase."}h(v)}finally{w(!1)}},x=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(J,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),A==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:x,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(J,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(J,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(J,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),A!=="select"&&l.jsxs("form",{onSubmit:m,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(J,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:C=>o(C.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:C=>c(C.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx(J,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},hi=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:A}=Ru();return A?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(Gh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Gh,{to:"/login",replace:!0})},R9=()=>{const{role:t,loading:e}=Ru();return e?null:t==="guest"?l.jsx(Gh,{to:"/schedule",replace:!0}):l.jsx(Gh,{to:"/dashboard",replace:!0})},N9=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState(localStorage.getItem("theme")||"light"),{isLoading:A}=KA(),{logout:s,role:i,user:o}=Ru();if(S.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),A)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const c=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:"",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(d=>d.roles.includes(i||""));return l.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx(J,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:"Gymnasium"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Manager Pro"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0",children:c.map(d=>l.jsxs(_N,{to:d.to,onClick:()=>e(!1),className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(J,{name:d.icon,size:20}),d.label]},d.to))}),l.jsx(NK,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:s,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(J,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx(J,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:l.jsx(aN,{})})]})]})},P9=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(!0),[A]=EN(),s=A.get("id");return S.useEffect(()=>{s?(r(!0),ar.getPublicData(s).then(i=>{const o={..._r,...i,settings:{..._r.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[s]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(mT,{initialData:t,children:l.jsx(yT,{children:l.jsx(BT,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(J,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(mQ,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(J,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function D9(){return l.jsx(SK,{children:l.jsx(mT,{children:l.jsx(yT,{children:l.jsx(BT,{children:l.jsx(vN,{children:l.jsxs(cN,{children:[l.jsx(wr,{path:"/login",element:l.jsx(k9,{})}),l.jsxs(wr,{path:"/",element:l.jsx(hi,{children:l.jsx(N9,{})}),children:[l.jsx(wr,{index:!0,element:l.jsx(R9,{})}),l.jsx(wr,{path:"dashboard",element:l.jsx(hi,{allowedRoles:["admin","teacher"],children:l.jsx(PK,{})})}),l.jsx(wr,{path:"schedule",element:l.jsx(L9,{})}),l.jsx(wr,{path:"substitutions",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(KK,{})})}),l.jsx(wr,{path:"directory",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(jK,{})})}),l.jsx(wr,{path:"admin",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(GK,{})})}),l.jsx(wr,{path:"reports",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(S9,{})})}),l.jsx(wr,{path:"export",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(Q9,{})})})]}),l.jsx(wr,{path:"/public",element:l.jsx(P9,{})})]})})})})})})}const L9=()=>{const{role:t}=Ru();return l.jsx(mQ,{readOnly:t!=="admin"})};cm.createRoot(document.getElementById("root")).render(l.jsx(Ci.StrictMode,{children:l.jsx(D9,{})}));
