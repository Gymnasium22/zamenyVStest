function zS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(r,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function r(s){if(s.ep)return;s.ep=!0;const A=n(s);fetch(s.href,A)}})();function JI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XI={exports:{}},Ef={},YI={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu=Symbol.for("react.element"),WS=Symbol.for("react.portal"),$S=Symbol.for("react.fragment"),qS=Symbol.for("react.strict_mode"),JS=Symbol.for("react.profiler"),XS=Symbol.for("react.provider"),YS=Symbol.for("react.context"),ZS=Symbol.for("react.forward_ref"),eQ=Symbol.for("react.suspense"),tQ=Symbol.for("react.memo"),nQ=Symbol.for("react.lazy"),LB=Symbol.iterator;function rQ(t){return t===null||typeof t!="object"?null:(t=LB&&t[LB]||t["@@iterator"],typeof t=="function"?t:null)}var ZI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eE=Object.assign,tE={};function La(t,e,n){this.props=t,this.context=e,this.refs=tE,this.updater=n||ZI}La.prototype.isReactComponent={};La.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};La.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nE(){}nE.prototype=La.prototype;function gw(t,e,n){this.props=t,this.context=e,this.refs=tE,this.updater=n||ZI}var pw=gw.prototype=new nE;pw.constructor=gw;eE(pw,La.prototype);pw.isPureReactComponent=!0;var OB=Array.isArray,rE=Object.prototype.hasOwnProperty,mw={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,s={},A=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)rE.call(e,r)&&!sE.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:cu,type:t,key:A,ref:i,props:s,_owner:mw.current}}function sQ(t,e){return{$$typeof:cu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ww(t){return typeof t=="object"&&t!==null&&t.$$typeof===cu}function AQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jB=/\/+/g;function Xg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AQ(""+t.key):e.toString(36)}function zd(t,e,n,r,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case cu:case WS:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+Xg(i,0):r,OB(s)?(n="",t!=null&&(n=t.replace(jB,"$&/")+"/"),zd(s,e,n,"",function(c){return c})):s!=null&&(ww(s)&&(s=sQ(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(jB,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",OB(t))for(var o=0;o<t.length;o++){A=t[o];var a=r+Xg(A,o);i+=zd(A,e,n,a,s)}else if(a=rQ(t),typeof a=="function")for(t=a.call(t),o=0;!(A=t.next()).done;)A=A.value,a=r+Xg(A,o++),i+=zd(A,e,n,a,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Yu(t,e,n){if(t==null)return t;var r=[],s=0;return zd(t,r,"","",function(A){return e.call(n,A,s++)}),r}function iQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Wd={transition:null},oQ={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Wd,ReactCurrentOwner:mw};function iE(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!ww(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=La;Ve.Fragment=$S;Ve.Profiler=JS;Ve.PureComponent=gw;Ve.StrictMode=qS;Ve.Suspense=eQ;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oQ;Ve.act=iE;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=eE({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=mw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)rE.call(e,a)&&!sE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:cu,type:t.type,key:s,ref:A,props:r,_owner:i}};Ve.createContext=function(t){return t={$$typeof:YS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XS,_context:t},t.Consumer=t};Ve.createElement=AE;Ve.createFactory=function(t){var e=AE.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:ZS,render:t}};Ve.isValidElement=ww;Ve.lazy=function(t){return{$$typeof:nQ,_payload:{_status:-1,_result:t},_init:iQ}};Ve.memo=function(t,e){return{$$typeof:tQ,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Wd.transition;Wd.transition={};try{t()}finally{Wd.transition=e}};Ve.unstable_act=iE;Ve.useCallback=function(t,e){return zn.current.useCallback(t,e)};Ve.useContext=function(t){return zn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return zn.current.useEffect(t,e)};Ve.useId=function(){return zn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return zn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};Ve.useRef=function(t){return zn.current.useRef(t)};Ve.useState=function(t){return zn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return zn.current.useTransition()};Ve.version="18.3.1";YI.exports=Ve;var S=YI.exports;const Ei=JI(S),aQ=zS({__proto__:null,default:Ei},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lQ=S,cQ=Symbol.for("react.element"),uQ=Symbol.for("react.fragment"),dQ=Object.prototype.hasOwnProperty,hQ=lQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fQ={key:!0,ref:!0,__self:!0,__source:!0};function oE(t,e,n){var r,s={},A=null,i=null;n!==void 0&&(A=""+n),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)dQ.call(e,r)&&!fQ.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cQ,type:t,key:A,ref:i,props:s,_owner:hQ.current}}Ef.Fragment=uQ;Ef.jsx=oE;Ef.jsxs=oE;XI.exports=Ef;var l=XI.exports,dm={},aE={exports:{}},mr={},lE={exports:{}},cE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,F){var L=z.length;z.push(F);e:for(;0<L;){var H=L-1>>>1,$=z[H];if(0<s($,F))z[H]=F,z[L]=$,L=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var F=z[0],L=z.pop();if(L!==F){z[0]=L;e:for(var H=0,$=z.length,q=$>>>1;H<q;){var se=2*(H+1)-1,fe=z[se],Ue=se+1,te=z[Ue];if(0>s(fe,L))Ue<$&&0>s(te,fe)?(z[H]=te,z[Ue]=L,H=Ue):(z[H]=fe,z[se]=L,H=se);else if(Ue<$&&0>s(te,L))z[H]=te,z[Ue]=L,H=Ue;else break e}}return F}function s(z,F){var L=z.sortIndex-F.sortIndex;return L!==0?L:z.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,w=!1,p=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=z)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function R(z){if(C=!1,v(z),!p)if(n(a)!==null)p=!0,Oe(Q);else{var F=n(c);F!==null&&V(R,F.startTime-z)}}function Q(z,F){p=!1,C&&(C=!1,y(x),x=-1),w=!0;var L=f;try{for(v(F),h=n(a);h!==null&&(!(h.expirationTime>F)||z&&!U());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var $=H(h.expirationTime<=F);F=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(a)&&r(a),v(F)}else r(a);h=n(a)}if(h!==null)var q=!0;else{var se=n(c);se!==null&&V(R,se.startTime-F),q=!1}return q}finally{h=null,f=L,w=!1}}var N=!1,I=null,x=-1,b=5,k=-1;function U(){return!(t.unstable_now()-k<b)}function D(){if(I!==null){var z=t.unstable_now();k=z;var F=!0;try{F=I(!0,z)}finally{F?T():(N=!1,I=null)}}else N=!1}var T;if(typeof B=="function")T=function(){B(D)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,$e=Ee.port2;Ee.port1.onmessage=D,T=function(){$e.postMessage(null)}}else T=function(){_(D,0)};function Oe(z){I=z,N||(N=!0,T())}function V(z,F){x=_(function(){z(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||w||(p=!0,Oe(Q))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var L=f;f=F;try{return z()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var L=f;f=z;try{return F()}finally{f=L}},t.unstable_scheduleCallback=function(z,F,L){var H=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=L+$,z={id:d++,callback:F,priorityLevel:z,startTime:L,expirationTime:$,sortIndex:-1},L>H?(z.sortIndex=L,e(c,z),n(a)===null&&z===n(c)&&(C?(y(x),x=-1):C=!0,V(R,L-H))):(z.sortIndex=$,e(a,z),p||w||(p=!0,Oe(Q))),z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(z){var F=f;return function(){var L=f;f=F;try{return z.apply(this,arguments)}finally{f=L}}}})(cE);lE.exports=cE;var gQ=lE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pQ=S,gr=gQ;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uE=new Set,vc={};function Ao(t,e){da(t,e),da(t+"Capture",e)}function da(t,e){for(vc[t]=e,t=0;t<e.length;t++)uE.add(e[t])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hm=Object.prototype.hasOwnProperty,mQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,MB={},VB={};function wQ(t){return hm.call(VB,t)?!0:hm.call(MB,t)?!1:mQ.test(t)?VB[t]=!0:(MB[t]=!0,!1)}function vQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yQ(t,e,n,r){if(e===null||typeof e>"u"||vQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wn(t,e,n,r,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new Wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new Wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new Wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new Wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new Wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new Wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new Wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new Wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new Wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vw=/[\-:]([a-z])/g;function yw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vw,yw);Bn[e]=new Wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vw,yw);Bn[e]=new Wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vw,yw);Bn[e]=new Wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new Wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bw(t,e,n,r){var s=Bn.hasOwnProperty(e)?Bn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yQ(e,n,s,r)&&(n=null),r||s===null?wQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gs=pQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),fm=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Cw=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),_w=Symbol.for("react.memo"),dA=Symbol.for("react.lazy"),fE=Symbol.for("react.offscreen"),HB=Symbol.iterator;function dl(t){return t===null||typeof t!="object"?null:(t=HB&&t[HB]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,Yg;function Sl(t){if(Yg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yg=e&&e[1]||""}return`
`+Yg+t}var Zg=!1;function ep(t,e){if(!t||Zg)return"";Zg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=r.stack.split(`
`),i=s.length-1,o=A.length-1;1<=i&&0<=o&&s[i]!==A[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==A[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==A[o]){var a=`
`+s[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{Zg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sl(t):""}function BQ(t){switch(t.tag){case 5:return Sl(t.type);case 16:return Sl("Lazy");case 13:return Sl("Suspense");case 19:return Sl("SuspenseList");case 0:case 2:case 15:return t=ep(t.type,!1),t;case 11:return t=ep(t.type.render,!1),t;case 1:return t=ep(t.type,!0),t;default:return""}}function mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Oo:return"Portal";case fm:return"Profiler";case xw:return"StrictMode";case gm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case dE:return(t._context.displayName||"Context")+".Provider";case Cw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _w:return e=t.displayName||null,e!==null?e:mm(t.type)||"Memo";case dA:e=t._payload,t=t._init;try{return mm(t(e))}catch{}}return null}function xQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(e);case 8:return e===xw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function MA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CQ(t){var e=gE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,A=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ed(t){t._valueTracker||(t._valueTracker=CQ(t))}function pE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wm(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function KB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=MA(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mE(t,e){e=e.checked,e!=null&&Bw(t,"checked",e,!1)}function vm(t,e){mE(t,e);var n=MA(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,MA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ql=Array.isArray;function Zo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+MA(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Ql(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:MA(n)}}function wE(t,e){var n=MA(e.value),r=MA(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function WB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var td,yE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_Q=["Webkit","ms","Moz","O"];Object.keys(Jl).forEach(function(t){_Q.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jl[e]=Jl[t]})});function BE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jl.hasOwnProperty(t)&&Jl[t]?(""+e).trim():e+"px"}function xE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=BE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var IQ=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cm(t,e){if(e){if(IQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function _m(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Im=null;function Iw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Em=null,ea=null,ta=null;function $B(t){if(t=hu(t)){if(typeof Em!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=kf(e),Em(t.stateNode,t.type,e))}}function CE(t){ea?ta?ta.push(t):ta=[t]:ea=t}function _E(){if(ea){var t=ea,e=ta;if(ta=ea=null,$B(t),e)for(t=0;t<e.length;t++)$B(e[t])}}function IE(t,e){return t(e)}function EE(){}var tp=!1;function bE(t,e,n){if(tp)return t(e,n);tp=!0;try{return IE(t,e,n)}finally{tp=!1,(ea!==null||ta!==null)&&(EE(),_E())}}function Bc(t,e){var n=t.stateNode;if(n===null)return null;var r=kf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var bm=!1;if(Ps)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){bm=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{bm=!1}function EQ(t,e,n,r,s,A,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Xl=!1,Bh=null,xh=!1,Tm=null,bQ={onError:function(t){Xl=!0,Bh=t}};function TQ(t,e,n,r,s,A,i,o,a){Xl=!1,Bh=null,EQ.apply(bQ,arguments)}function FQ(t,e,n,r,s,A,i,o,a){if(TQ.apply(this,arguments),Xl){if(Xl){var c=Bh;Xl=!1,Bh=null}else throw Error(ee(198));xh||(xh=!0,Tm=c)}}function io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qB(t){if(io(t)!==t)throw Error(ee(188))}function UQ(t){var e=t.alternate;if(!e){if(e=io(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var A=s.alternate;if(A===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===n)return qB(s),t;if(A===r)return qB(s),e;A=A.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=A;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i){for(o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function FE(t){return t=UQ(t),t!==null?UE(t):null}function UE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UE(t);if(e!==null)return e;t=t.sibling}return null}var kE=gr.unstable_scheduleCallback,JB=gr.unstable_cancelCallback,kQ=gr.unstable_shouldYield,SQ=gr.unstable_requestPaint,jt=gr.unstable_now,QQ=gr.unstable_getCurrentPriorityLevel,Ew=gr.unstable_ImmediatePriority,SE=gr.unstable_UserBlockingPriority,Ch=gr.unstable_NormalPriority,RQ=gr.unstable_LowPriority,QE=gr.unstable_IdlePriority,bf=null,ls=null;function NQ(t){if(ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:LQ,PQ=Math.log,DQ=Math.LN2;function LQ(t){return t>>>=0,t===0?32:31-(PQ(t)/DQ|0)|0}var nd=64,rd=4194304;function Rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _h(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,A=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~s;o!==0?r=Rl(o):(A&=i,A!==0&&(r=Rl(A)))}else i=n&~s,i!==0?r=Rl(i):A!==0&&(r=Rl(A));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vr(e),s=1<<n,r|=t[n],e&=~s;return r}function OQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jQ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-Vr(A),o=1<<i,a=s[i];a===-1?(!(o&n)||o&r)&&(s[i]=OQ(o,e)):a<=e&&(t.expiredLanes|=o),A&=~o}}function Fm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RE(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function np(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=n}function MQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vr(n),A=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~A}}function bw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ot=0;function NE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PE,Tw,DE,LE,OE,Um=!1,sd=[],TA=null,FA=null,UA=null,xc=new Map,Cc=new Map,gA=[],VQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XB(t,e){switch(t){case"focusin":case"focusout":TA=null;break;case"dragenter":case"dragleave":FA=null;break;case"mouseover":case"mouseout":UA=null;break;case"pointerover":case"pointerout":xc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(e.pointerId)}}function fl(t,e,n,r,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:A,targetContainers:[s]},e!==null&&(e=hu(e),e!==null&&Tw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HQ(t,e,n,r,s){switch(e){case"focusin":return TA=fl(TA,t,e,n,r,s),!0;case"dragenter":return FA=fl(FA,t,e,n,r,s),!0;case"mouseover":return UA=fl(UA,t,e,n,r,s),!0;case"pointerover":var A=s.pointerId;return xc.set(A,fl(xc.get(A)||null,t,e,n,r,s)),!0;case"gotpointercapture":return A=s.pointerId,Cc.set(A,fl(Cc.get(A)||null,t,e,n,r,s)),!0}return!1}function jE(t){var e=bi(t.target);if(e!==null){var n=io(e);if(n!==null){if(e=n.tag,e===13){if(e=TE(n),e!==null){t.blockedOn=e,OE(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=km(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Im=r,n.target.dispatchEvent(r),Im=null}else return e=hu(n),e!==null&&Tw(e),t.blockedOn=n,!1;e.shift()}return!0}function YB(t,e,n){$d(t)&&n.delete(e)}function KQ(){Um=!1,TA!==null&&$d(TA)&&(TA=null),FA!==null&&$d(FA)&&(FA=null),UA!==null&&$d(UA)&&(UA=null),xc.forEach(YB),Cc.forEach(YB)}function gl(t,e){t.blockedOn===e&&(t.blockedOn=null,Um||(Um=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,KQ)))}function _c(t){function e(s){return gl(s,t)}if(0<sd.length){gl(sd[0],t);for(var n=1;n<sd.length;n++){var r=sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(TA!==null&&gl(TA,t),FA!==null&&gl(FA,t),UA!==null&&gl(UA,t),xc.forEach(e),Cc.forEach(e),n=0;n<gA.length;n++)r=gA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gA.length&&(n=gA[0],n.blockedOn===null);)jE(n),n.blockedOn===null&&gA.shift()}var na=Gs.ReactCurrentBatchConfig,Ih=!0;function GQ(t,e,n,r){var s=ot,A=na.transition;na.transition=null;try{ot=1,Fw(t,e,n,r)}finally{ot=s,na.transition=A}}function zQ(t,e,n,r){var s=ot,A=na.transition;na.transition=null;try{ot=4,Fw(t,e,n,r)}finally{ot=s,na.transition=A}}function Fw(t,e,n,r){if(Ih){var s=km(t,e,n,r);if(s===null)dp(t,e,r,Eh,n),XB(t,r);else if(HQ(s,t,e,n,r))r.stopPropagation();else if(XB(t,r),e&4&&-1<VQ.indexOf(t)){for(;s!==null;){var A=hu(s);if(A!==null&&PE(A),A=km(t,e,n,r),A===null&&dp(t,e,r,Eh,n),A===s)break;s=A}s!==null&&r.stopPropagation()}else dp(t,e,r,null,n)}}var Eh=null;function km(t,e,n,r){if(Eh=null,t=Iw(r),t=bi(t),t!==null)if(e=io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eh=t,null}function ME(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QQ()){case Ew:return 1;case SE:return 4;case Ch:case RQ:return 16;case QE:return 536870912;default:return 16}default:return 16}}var vA=null,Uw=null,qd=null;function VE(){if(qd)return qd;var t,e=Uw,n=e.length,r,s="value"in vA?vA.value:vA.textContent,A=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[A-r];r++);return qd=s.slice(t,1<r?1-r:void 0)}function Jd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ad(){return!0}function ZB(){return!1}function wr(t){function e(n,r,s,A,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(A):A[o]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ad:ZB,this.isPropagationStopped=ZB,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),e}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kw=wr(Oa),du=Tt({},Oa,{view:0,detail:0}),WQ=wr(du),rp,sp,pl,Tf=Tt({},du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pl&&(pl&&t.type==="mousemove"?(rp=t.screenX-pl.screenX,sp=t.screenY-pl.screenY):sp=rp=0,pl=t),rp)},movementY:function(t){return"movementY"in t?t.movementY:sp}}),ex=wr(Tf),$Q=Tt({},Tf,{dataTransfer:0}),qQ=wr($Q),JQ=Tt({},du,{relatedTarget:0}),Ap=wr(JQ),XQ=Tt({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),YQ=wr(XQ),ZQ=Tt({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e2=wr(ZQ),t2=Tt({},Oa,{data:0}),tx=wr(t2),n2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s2[t])?!!e[t]:!1}function Sw(){return A2}var i2=Tt({},du,{key:function(t){if(t.key){var e=n2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?r2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sw,charCode:function(t){return t.type==="keypress"?Jd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o2=wr(i2),a2=Tt({},Tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nx=wr(a2),l2=Tt({},du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sw}),c2=wr(l2),u2=Tt({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),d2=wr(u2),h2=Tt({},Tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f2=wr(h2),g2=[9,13,27,32],Qw=Ps&&"CompositionEvent"in window,Yl=null;Ps&&"documentMode"in document&&(Yl=document.documentMode);var p2=Ps&&"TextEvent"in window&&!Yl,HE=Ps&&(!Qw||Yl&&8<Yl&&11>=Yl),rx=" ",sx=!1;function KE(t,e){switch(t){case"keyup":return g2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function m2(t,e){switch(t){case"compositionend":return GE(e);case"keypress":return e.which!==32?null:(sx=!0,rx);case"textInput":return t=e.data,t===rx&&sx?null:t;default:return null}}function w2(t,e){if(Mo)return t==="compositionend"||!Qw&&KE(t,e)?(t=VE(),qd=Uw=vA=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HE&&e.locale!=="ko"?null:e.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ax(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v2[t.type]:e==="textarea"}function zE(t,e,n,r){CE(r),e=bh(e,"onChange"),0<e.length&&(n=new kw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zl=null,Ic=null;function y2(t){rb(t,0)}function Ff(t){var e=Ko(t);if(pE(e))return t}function B2(t,e){if(t==="change")return e}var WE=!1;if(Ps){var ip;if(Ps){var op="oninput"in document;if(!op){var ix=document.createElement("div");ix.setAttribute("oninput","return;"),op=typeof ix.oninput=="function"}ip=op}else ip=!1;WE=ip&&(!document.documentMode||9<document.documentMode)}function ox(){Zl&&(Zl.detachEvent("onpropertychange",$E),Ic=Zl=null)}function $E(t){if(t.propertyName==="value"&&Ff(Ic)){var e=[];zE(e,Ic,t,Iw(t)),bE(y2,e)}}function x2(t,e,n){t==="focusin"?(ox(),Zl=e,Ic=n,Zl.attachEvent("onpropertychange",$E)):t==="focusout"&&ox()}function C2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ff(Ic)}function _2(t,e){if(t==="click")return Ff(e)}function I2(t,e){if(t==="input"||t==="change")return Ff(e)}function E2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zr=typeof Object.is=="function"?Object.is:E2;function Ec(t,e){if(zr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hm.call(e,s)||!zr(t[s],e[s]))return!1}return!0}function ax(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lx(t,e){var n=ax(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ax(n)}}function qE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JE(){for(var t=window,e=yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yh(t.document)}return e}function Rw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b2(t){var e=JE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qE(n.ownerDocument.documentElement,n)){if(r!==null&&Rw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,A=Math.min(r.start,s);r=r.end===void 0?A:Math.min(r.end,s),!t.extend&&A>r&&(s=r,r=A,A=s),s=lx(n,A);var i=lx(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T2=Ps&&"documentMode"in document&&11>=document.documentMode,Vo=null,Sm=null,ec=null,Qm=!1;function cx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qm||Vo==null||Vo!==yh(r)||(r=Vo,"selectionStart"in r&&Rw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ec&&Ec(ec,r)||(ec=r,r=bh(Sm,"onSelect"),0<r.length&&(e=new kw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},ap={},XE={};Ps&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Uf(t){if(ap[t])return ap[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return ap[t]=e[n];return t}var YE=Uf("animationend"),ZE=Uf("animationiteration"),eb=Uf("animationstart"),tb=Uf("transitionend"),nb=new Map,ux="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){nb.set(t,e),Ao(e,[t])}for(var lp=0;lp<ux.length;lp++){var cp=ux[lp],F2=cp.toLowerCase(),U2=cp[0].toUpperCase()+cp.slice(1);ti(F2,"on"+U2)}ti(YE,"onAnimationEnd");ti(ZE,"onAnimationIteration");ti(eb,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(tb,"onTransitionEnd");da("onMouseEnter",["mouseout","mouseover"]);da("onMouseLeave",["mouseout","mouseover"]);da("onPointerEnter",["pointerout","pointerover"]);da("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function dx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FQ(r,e,void 0,t),t.currentTarget=null}function rb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var A=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==A&&s.isPropagationStopped())break e;dx(s,o,c),A=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==A&&s.isPropagationStopped())break e;dx(s,o,c),A=a}}}if(xh)throw t=Tm,xh=!1,Tm=null,t}function gt(t,e){var n=e[Lm];n===void 0&&(n=e[Lm]=new Set);var r=t+"__bubble";n.has(r)||(sb(e,t,2,!1),n.add(r))}function up(t,e,n){var r=0;e&&(r|=4),sb(n,t,r,e)}var od="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[od]){t[od]=!0,uE.forEach(function(n){n!=="selectionchange"&&(k2.has(n)||up(n,!1,t),up(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[od]||(e[od]=!0,up("selectionchange",!1,e))}}function sb(t,e,n,r){switch(ME(e)){case 1:var s=GQ;break;case 4:s=zQ;break;default:s=Fw}n=s.bind(null,e,n,t),s=void 0,!bm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dp(t,e,n,r,s){var A=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;o!==null;){if(i=bi(o),i===null)return;if(a=i.tag,a===5||a===6){r=A=i;continue e}o=o.parentNode}}r=r.return}bE(function(){var c=A,d=Iw(n),h=[];e:{var f=nb.get(t);if(f!==void 0){var w=kw,p=t;switch(t){case"keypress":if(Jd(n)===0)break e;case"keydown":case"keyup":w=o2;break;case"focusin":p="focus",w=Ap;break;case"focusout":p="blur",w=Ap;break;case"beforeblur":case"afterblur":w=Ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=qQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=c2;break;case YE:case ZE:case eb:w=YQ;break;case tb:w=d2;break;case"scroll":w=WQ;break;case"wheel":w=f2;break;case"copy":case"cut":case"paste":w=e2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=nx}var C=(e&4)!==0,_=!C&&t==="scroll",y=C?f!==null?f+"Capture":null:f;C=[];for(var B=c,v;B!==null;){v=B;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,y!==null&&(R=Bc(B,y),R!=null&&C.push(Tc(B,R,v)))),_)break;B=B.return}0<C.length&&(f=new w(f,p,null,n,d),h.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&n!==Im&&(p=n.relatedTarget||n.fromElement)&&(bi(p)||p[Ds]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(p=n.relatedTarget||n.toElement,w=c,p=p?bi(p):null,p!==null&&(_=io(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(w=null,p=c),w!==p)){if(C=ex,R="onMouseLeave",y="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(C=nx,R="onPointerLeave",y="onPointerEnter",B="pointer"),_=w==null?f:Ko(w),v=p==null?f:Ko(p),f=new C(R,B+"leave",w,n,d),f.target=_,f.relatedTarget=v,R=null,bi(d)===c&&(C=new C(y,B+"enter",p,n,d),C.target=v,C.relatedTarget=_,R=C),_=R,w&&p)t:{for(C=w,y=p,B=0,v=C;v;v=yo(v))B++;for(v=0,R=y;R;R=yo(R))v++;for(;0<B-v;)C=yo(C),B--;for(;0<v-B;)y=yo(y),v--;for(;B--;){if(C===y||y!==null&&C===y.alternate)break t;C=yo(C),y=yo(y)}C=null}else C=null;w!==null&&hx(h,f,w,C,!1),p!==null&&_!==null&&hx(h,_,p,C,!0)}}e:{if(f=c?Ko(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var Q=B2;else if(Ax(f))if(WE)Q=I2;else{Q=C2;var N=x2}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(Q=_2);if(Q&&(Q=Q(t,c))){zE(h,Q,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&ym(f,"number",f.value)}switch(N=c?Ko(c):window,t){case"focusin":(Ax(N)||N.contentEditable==="true")&&(Vo=N,Sm=c,ec=null);break;case"focusout":ec=Sm=Vo=null;break;case"mousedown":Qm=!0;break;case"contextmenu":case"mouseup":case"dragend":Qm=!1,cx(h,n,d);break;case"selectionchange":if(T2)break;case"keydown":case"keyup":cx(h,n,d)}var I;if(Qw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Mo?KE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(HE&&n.locale!=="ko"&&(Mo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Mo&&(I=VE()):(vA=d,Uw="value"in vA?vA.value:vA.textContent,Mo=!0)),N=bh(c,x),0<N.length&&(x=new tx(x,t,null,n,d),h.push({event:x,listeners:N}),I?x.data=I:(I=GE(n),I!==null&&(x.data=I)))),(I=p2?m2(t,n):w2(t,n))&&(c=bh(c,"onBeforeInput"),0<c.length&&(d=new tx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}rb(h,e)})}function Tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=Bc(t,n),A!=null&&r.unshift(Tc(t,A,s)),A=Bc(t,e),A!=null&&r.push(Tc(t,A,s))),t=t.return}return r}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hx(t,e,n,r,s){for(var A=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,s?(a=Bc(n,A),a!=null&&i.unshift(Tc(n,a,o))):s||(a=Bc(n,A),a!=null&&i.push(Tc(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var S2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function fx(t){return(typeof t=="string"?t:""+t).replace(S2,`
`).replace(Q2,"")}function ad(t,e,n){if(e=fx(e),fx(t)!==e&&n)throw Error(ee(425))}function Th(){}var Rm=null,Nm=null;function Pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,gx=typeof Promise=="function"?Promise:void 0,N2=typeof queueMicrotask=="function"?queueMicrotask:typeof gx<"u"?function(t){return gx.resolve(null).then(t).catch(P2)}:Dm;function P2(t){setTimeout(function(){throw t})}function hp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_c(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_c(e)}function kA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function px(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Zr="__reactFiber$"+ja,Fc="__reactProps$"+ja,Ds="__reactContainer$"+ja,Lm="__reactEvents$"+ja,D2="__reactListeners$"+ja,L2="__reactHandles$"+ja;function bi(t){var e=t[Zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ds]||n[Zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=px(t);t!==null;){if(n=t[Zr])return n;t=px(t)}return e}t=n,n=t.parentNode}return null}function hu(t){return t=t[Zr]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function kf(t){return t[Fc]||null}var Om=[],Go=-1;function ni(t){return{current:t}}function mt(t){0>Go||(t.current=Om[Go],Om[Go]=null,Go--)}function dt(t,e){Go++,Om[Go]=t.current,t.current=e}var VA={},Qn=ni(VA),nr=ni(!1),Mi=VA;function ha(t,e){var n=t.type.contextTypes;if(!n)return VA;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in n)s[A]=e[A];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rr(t){return t=t.childContextTypes,t!=null}function Fh(){mt(nr),mt(Qn)}function mx(t,e,n){if(Qn.current!==VA)throw Error(ee(168));dt(Qn,e),dt(nr,n)}function Ab(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,xQ(t)||"Unknown",s));return Tt({},n,r)}function Uh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||VA,Mi=Qn.current,dt(Qn,t),dt(nr,nr.current),!0}function wx(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=Ab(t,e,Mi),r.__reactInternalMemoizedMergedChildContext=t,mt(nr),mt(Qn),dt(Qn,t)):mt(nr),dt(nr,n)}var Es=null,Sf=!1,fp=!1;function ib(t){Es===null?Es=[t]:Es.push(t)}function O2(t){Sf=!0,ib(t)}function ri(){if(!fp&&Es!==null){fp=!0;var t=0,e=ot;try{var n=Es;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Es=null,Sf=!1}catch(s){throw Es!==null&&(Es=Es.slice(t+1)),kE(Ew,ri),s}finally{ot=e,fp=!1}}return null}var zo=[],Wo=0,kh=null,Sh=0,yr=[],Br=0,Vi=null,bs=1,Ts="";function pi(t,e){zo[Wo++]=Sh,zo[Wo++]=kh,kh=t,Sh=e}function ob(t,e,n){yr[Br++]=bs,yr[Br++]=Ts,yr[Br++]=Vi,Vi=t;var r=bs;t=Ts;var s=32-Vr(r)-1;r&=~(1<<s),n+=1;var A=32-Vr(e)+s;if(30<A){var i=s-s%5;A=(r&(1<<i)-1).toString(32),r>>=i,s-=i,bs=1<<32-Vr(e)+s|n<<s|r,Ts=A+t}else bs=1<<A|n<<s|r,Ts=t}function Nw(t){t.return!==null&&(pi(t,1),ob(t,1,0))}function Pw(t){for(;t===kh;)kh=zo[--Wo],zo[Wo]=null,Sh=zo[--Wo],zo[Wo]=null;for(;t===Vi;)Vi=yr[--Br],yr[Br]=null,Ts=yr[--Br],yr[Br]=null,bs=yr[--Br],yr[Br]=null}var fr=null,dr=null,yt=!1,Mr=null;function ab(t,e){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fr=t,dr=kA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:bs,overflow:Ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fr=t,dr=null,!0):!1;default:return!1}}function jm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mm(t){if(yt){var e=dr;if(e){var n=e;if(!vx(t,e)){if(jm(t))throw Error(ee(418));e=kA(n.nextSibling);var r=fr;e&&vx(t,e)?ab(r,n):(t.flags=t.flags&-4097|2,yt=!1,fr=t)}}else{if(jm(t))throw Error(ee(418));t.flags=t.flags&-4097|2,yt=!1,fr=t}}}function yx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fr=t}function ld(t){if(t!==fr)return!1;if(!yt)return yx(t),yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pm(t.type,t.memoizedProps)),e&&(e=dr)){if(jm(t))throw lb(),Error(ee(418));for(;e;)ab(t,e),e=kA(e.nextSibling)}if(yx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=kA(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=fr?kA(t.stateNode.nextSibling):null;return!0}function lb(){for(var t=dr;t;)t=kA(t.nextSibling)}function fa(){dr=fr=null,yt=!1}function Dw(t){Mr===null?Mr=[t]:Mr.push(t)}var j2=Gs.ReactCurrentBatchConfig;function ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var o=s.refs;i===null?delete o[A]:o[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function cd(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bx(t){var e=t._init;return e(t._payload)}function cb(t){function e(y,B){if(t){var v=y.deletions;v===null?(y.deletions=[B],y.flags|=16):v.push(B)}}function n(y,B){if(!t)return null;for(;B!==null;)e(y,B),B=B.sibling;return null}function r(y,B){for(y=new Map;B!==null;)B.key!==null?y.set(B.key,B):y.set(B.index,B),B=B.sibling;return y}function s(y,B){return y=NA(y,B),y.index=0,y.sibling=null,y}function A(y,B,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<B?(y.flags|=2,B):v):(y.flags|=2,B)):(y.flags|=1048576,B)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,B,v,R){return B===null||B.tag!==6?(B=Bp(v,y.mode,R),B.return=y,B):(B=s(B,v),B.return=y,B)}function a(y,B,v,R){var Q=v.type;return Q===jo?d(y,B,v.props.children,R,v.key):B!==null&&(B.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===dA&&Bx(Q)===B.type)?(R=s(B,v.props),R.ref=ml(y,B,v),R.return=y,R):(R=rh(v.type,v.key,v.props,null,y.mode,R),R.ref=ml(y,B,v),R.return=y,R)}function c(y,B,v,R){return B===null||B.tag!==4||B.stateNode.containerInfo!==v.containerInfo||B.stateNode.implementation!==v.implementation?(B=xp(v,y.mode,R),B.return=y,B):(B=s(B,v.children||[]),B.return=y,B)}function d(y,B,v,R,Q){return B===null||B.tag!==7?(B=Ni(v,y.mode,R,Q),B.return=y,B):(B=s(B,v),B.return=y,B)}function h(y,B,v){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Bp(""+B,y.mode,v),B.return=y,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Zu:return v=rh(B.type,B.key,B.props,null,y.mode,v),v.ref=ml(y,null,B),v.return=y,v;case Oo:return B=xp(B,y.mode,v),B.return=y,B;case dA:var R=B._init;return h(y,R(B._payload),v)}if(Ql(B)||dl(B))return B=Ni(B,y.mode,v,null),B.return=y,B;cd(y,B)}return null}function f(y,B,v,R){var Q=B!==null?B.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return Q!==null?null:o(y,B,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zu:return v.key===Q?a(y,B,v,R):null;case Oo:return v.key===Q?c(y,B,v,R):null;case dA:return Q=v._init,f(y,B,Q(v._payload),R)}if(Ql(v)||dl(v))return Q!==null?null:d(y,B,v,R,null);cd(y,v)}return null}function w(y,B,v,R,Q){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(v)||null,o(B,y,""+R,Q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Zu:return y=y.get(R.key===null?v:R.key)||null,a(B,y,R,Q);case Oo:return y=y.get(R.key===null?v:R.key)||null,c(B,y,R,Q);case dA:var N=R._init;return w(y,B,v,N(R._payload),Q)}if(Ql(R)||dl(R))return y=y.get(v)||null,d(B,y,R,Q,null);cd(B,R)}return null}function p(y,B,v,R){for(var Q=null,N=null,I=B,x=B=0,b=null;I!==null&&x<v.length;x++){I.index>x?(b=I,I=null):b=I.sibling;var k=f(y,I,v[x],R);if(k===null){I===null&&(I=b);break}t&&I&&k.alternate===null&&e(y,I),B=A(k,B,x),N===null?Q=k:N.sibling=k,N=k,I=b}if(x===v.length)return n(y,I),yt&&pi(y,x),Q;if(I===null){for(;x<v.length;x++)I=h(y,v[x],R),I!==null&&(B=A(I,B,x),N===null?Q=I:N.sibling=I,N=I);return yt&&pi(y,x),Q}for(I=r(y,I);x<v.length;x++)b=w(I,y,x,v[x],R),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?x:b.key),B=A(b,B,x),N===null?Q=b:N.sibling=b,N=b);return t&&I.forEach(function(U){return e(y,U)}),yt&&pi(y,x),Q}function C(y,B,v,R){var Q=dl(v);if(typeof Q!="function")throw Error(ee(150));if(v=Q.call(v),v==null)throw Error(ee(151));for(var N=Q=null,I=B,x=B=0,b=null,k=v.next();I!==null&&!k.done;x++,k=v.next()){I.index>x?(b=I,I=null):b=I.sibling;var U=f(y,I,k.value,R);if(U===null){I===null&&(I=b);break}t&&I&&U.alternate===null&&e(y,I),B=A(U,B,x),N===null?Q=U:N.sibling=U,N=U,I=b}if(k.done)return n(y,I),yt&&pi(y,x),Q;if(I===null){for(;!k.done;x++,k=v.next())k=h(y,k.value,R),k!==null&&(B=A(k,B,x),N===null?Q=k:N.sibling=k,N=k);return yt&&pi(y,x),Q}for(I=r(y,I);!k.done;x++,k=v.next())k=w(I,y,x,k.value,R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?x:k.key),B=A(k,B,x),N===null?Q=k:N.sibling=k,N=k);return t&&I.forEach(function(D){return e(y,D)}),yt&&pi(y,x),Q}function _(y,B,v,R){if(typeof v=="object"&&v!==null&&v.type===jo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Zu:e:{for(var Q=v.key,N=B;N!==null;){if(N.key===Q){if(Q=v.type,Q===jo){if(N.tag===7){n(y,N.sibling),B=s(N,v.props.children),B.return=y,y=B;break e}}else if(N.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===dA&&Bx(Q)===N.type){n(y,N.sibling),B=s(N,v.props),B.ref=ml(y,N,v),B.return=y,y=B;break e}n(y,N);break}else e(y,N);N=N.sibling}v.type===jo?(B=Ni(v.props.children,y.mode,R,v.key),B.return=y,y=B):(R=rh(v.type,v.key,v.props,null,y.mode,R),R.ref=ml(y,B,v),R.return=y,y=R)}return i(y);case Oo:e:{for(N=v.key;B!==null;){if(B.key===N)if(B.tag===4&&B.stateNode.containerInfo===v.containerInfo&&B.stateNode.implementation===v.implementation){n(y,B.sibling),B=s(B,v.children||[]),B.return=y,y=B;break e}else{n(y,B);break}else e(y,B);B=B.sibling}B=xp(v,y.mode,R),B.return=y,y=B}return i(y);case dA:return N=v._init,_(y,B,N(v._payload),R)}if(Ql(v))return p(y,B,v,R);if(dl(v))return C(y,B,v,R);cd(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,B!==null&&B.tag===6?(n(y,B.sibling),B=s(B,v),B.return=y,y=B):(n(y,B),B=Bp(v,y.mode,R),B.return=y,y=B),i(y)):n(y,B)}return _}var ga=cb(!0),ub=cb(!1),Qh=ni(null),Rh=null,$o=null,Lw=null;function Ow(){Lw=$o=Rh=null}function jw(t){var e=Qh.current;mt(Qh),t._currentValue=e}function Vm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ra(t,e){Rh=t,Lw=$o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Fr(t){var e=t._currentValue;if(Lw!==t)if(t={context:t,memoizedValue:e,next:null},$o===null){if(Rh===null)throw Error(ee(308));$o=t,Rh.dependencies={lanes:0,firstContext:t}}else $o=$o.next=t;return e}var Ti=null;function Mw(t){Ti===null?Ti=[t]:Ti.push(t)}function db(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mw(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ls(t,r)}function Ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hA=!1;function Vw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function SA(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ls(t,n)}return s=r.interleaved,s===null?(e.next=e,Mw(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ls(t,n)}function Xd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bw(t,n)}}function xx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,A=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};A===null?s=A=i:A=A.next=i,n=n.next}while(n!==null);A===null?s=A=e:A=A.next=e}else s=A=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nh(t,e,n,r){var s=t.updateQueue;hA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?A=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(A!==null){var h=s.baseState;i=0,d=c=a=null,o=A;do{var f=o.lane,w=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,C=o;switch(f=e,w=n,C.tag){case 1:if(p=C.payload,typeof p=="function"){h=p.call(w,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=C.payload,f=typeof p=="function"?p.call(w,h,f):p,f==null)break e;h=Tt({},h,f);break e;case 2:hA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else w={eventTime:w,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=w,a=h):d=d.next=w,i|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Ki|=i,t.lanes=i,t.memoizedState=h}}function Cx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var fu={},cs=ni(fu),Uc=ni(fu),kc=ni(fu);function Fi(t){if(t===fu)throw Error(ee(174));return t}function Hw(t,e){switch(dt(kc,e),dt(Uc,t),dt(cs,fu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xm(e,t)}mt(cs),dt(cs,e)}function pa(){mt(cs),mt(Uc),mt(kc)}function fb(t){Fi(kc.current);var e=Fi(cs.current),n=xm(e,t.type);e!==n&&(dt(Uc,t),dt(cs,n))}function Kw(t){Uc.current===t&&(mt(cs),mt(Uc))}var _t=ni(0);function Ph(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gp=[];function Gw(){for(var t=0;t<gp.length;t++)gp[t]._workInProgressVersionPrimary=null;gp.length=0}var Yd=Gs.ReactCurrentDispatcher,pp=Gs.ReactCurrentBatchConfig,Hi=0,It=null,Xt=null,an=null,Dh=!1,tc=!1,Sc=0,M2=0;function En(){throw Error(ee(321))}function zw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zr(t[n],e[n]))return!1;return!0}function Ww(t,e,n,r,s,A){if(Hi=A,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yd.current=t===null||t.memoizedState===null?G2:z2,t=n(r,s),tc){A=0;do{if(tc=!1,Sc=0,25<=A)throw Error(ee(301));A+=1,an=Xt=null,e.updateQueue=null,Yd.current=W2,t=n(r,s)}while(tc)}if(Yd.current=Lh,e=Xt!==null&&Xt.next!==null,Hi=0,an=Xt=It=null,Dh=!1,e)throw Error(ee(300));return t}function $w(){var t=Sc!==0;return Sc=0,t}function Yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?It.memoizedState=an=t:an=an.next=t,an}function Ur(){if(Xt===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=an===null?It.memoizedState:an.next;if(e!==null)an=e,Xt=t;else{if(t===null)throw Error(ee(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},an===null?It.memoizedState=an=t:an=an.next=t}return an}function Qc(t,e){return typeof e=="function"?e(t):e}function mp(t){var e=Ur(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Xt,s=r.baseQueue,A=n.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}r.baseQueue=s=A,n.pending=null}if(s!==null){A=s.next,r=r.baseState;var o=i=null,a=null,c=A;do{var d=c.lane;if((Hi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,It.lanes|=d,Ki|=d}c=c.next}while(c!==null&&c!==A);a===null?i=r:a.next=o,zr(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do A=s.lane,It.lanes|=A,Ki|=A,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=Ur(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,A=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);zr(A,e.memoizedState)||(Yn=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),n.lastRenderedState=A}return[A,r]}function gb(){}function pb(t,e){var n=It,r=Ur(),s=e(),A=!zr(r.memoizedState,s);if(A&&(r.memoizedState=s,Yn=!0),r=r.queue,qw(vb.bind(null,n,r,t),[t]),r.getSnapshot!==e||A||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,Rc(9,wb.bind(null,n,r,s,e),void 0,null),cn===null)throw Error(ee(349));Hi&30||mb(n,e,s)}return s}function mb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wb(t,e,n,r){e.value=n,e.getSnapshot=r,yb(e)&&Bb(t)}function vb(t,e,n){return n(function(){yb(e)&&Bb(t)})}function yb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zr(t,n)}catch{return!0}}function Bb(t){var e=Ls(t,1);e!==null&&Hr(e,t,1,-1)}function _x(t){var e=Yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:t},e.queue=t,t=t.dispatch=K2.bind(null,It,t),[e.memoizedState,t]}function Rc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xb(){return Ur().memoizedState}function Zd(t,e,n,r){var s=Yr();It.flags|=t,s.memoizedState=Rc(1|e,n,void 0,r===void 0?null:r)}function Qf(t,e,n,r){var s=Ur();r=r===void 0?null:r;var A=void 0;if(Xt!==null){var i=Xt.memoizedState;if(A=i.destroy,r!==null&&zw(r,i.deps)){s.memoizedState=Rc(e,n,A,r);return}}It.flags|=t,s.memoizedState=Rc(1|e,n,A,r)}function Ix(t,e){return Zd(8390656,8,t,e)}function qw(t,e){return Qf(2048,8,t,e)}function Cb(t,e){return Qf(4,2,t,e)}function _b(t,e){return Qf(4,4,t,e)}function Ib(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Eb(t,e,n){return n=n!=null?n.concat([t]):null,Qf(4,4,Ib.bind(null,e,t),n)}function Jw(){}function bb(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tb(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fb(t,e,n){return Hi&21?(zr(n,e)||(n=RE(),It.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function V2(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=pp.transition;pp.transition={};try{t(!1),e()}finally{ot=n,pp.transition=r}}function Ub(){return Ur().memoizedState}function H2(t,e,n){var r=RA(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kb(t))Sb(e,n);else if(n=db(t,e,n,r),n!==null){var s=Mn();Hr(n,t,r,s),Qb(n,e,r)}}function K2(t,e,n){var r=RA(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kb(t))Sb(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,o=A(i,n);if(s.hasEagerState=!0,s.eagerState=o,zr(o,i)){var a=e.interleaved;a===null?(s.next=s,Mw(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=db(t,e,s,r),n!==null&&(s=Mn(),Hr(n,t,r,s),Qb(n,e,r))}}function kb(t){var e=t.alternate;return t===It||e!==null&&e===It}function Sb(t,e){tc=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bw(t,n)}}var Lh={readContext:Fr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},G2={readContext:Fr,useCallback:function(t,e){return Yr().memoizedState=[t,e===void 0?null:e],t},useContext:Fr,useEffect:Ix,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4194308,4,Ib.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zd(4,2,t,e)},useMemo:function(t,e){var n=Yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H2.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=Yr();return t={current:t},e.memoizedState=t},useState:_x,useDebugValue:Jw,useDeferredValue:function(t){return Yr().memoizedState=t},useTransition:function(){var t=_x(!1),e=t[0];return t=V2.bind(null,t[1]),Yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,s=Yr();if(yt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),cn===null)throw Error(ee(349));Hi&30||mb(r,e,n)}s.memoizedState=n;var A={value:n,getSnapshot:e};return s.queue=A,Ix(vb.bind(null,r,A,t),[t]),r.flags|=2048,Rc(9,wb.bind(null,r,A,n,e),void 0,null),n},useId:function(){var t=Yr(),e=cn.identifierPrefix;if(yt){var n=Ts,r=bs;n=(r&~(1<<32-Vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=M2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z2={readContext:Fr,useCallback:bb,useContext:Fr,useEffect:qw,useImperativeHandle:Eb,useInsertionEffect:Cb,useLayoutEffect:_b,useMemo:Tb,useReducer:mp,useRef:xb,useState:function(){return mp(Qc)},useDebugValue:Jw,useDeferredValue:function(t){var e=Ur();return Fb(e,Xt.memoizedState,t)},useTransition:function(){var t=mp(Qc)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:pb,useId:Ub,unstable_isNewReconciler:!1},W2={readContext:Fr,useCallback:bb,useContext:Fr,useEffect:qw,useImperativeHandle:Eb,useInsertionEffect:Cb,useLayoutEffect:_b,useMemo:Tb,useReducer:wp,useRef:xb,useState:function(){return wp(Qc)},useDebugValue:Jw,useDeferredValue:function(t){var e=Ur();return Xt===null?e.memoizedState=t:Fb(e,Xt.memoizedState,t)},useTransition:function(){var t=wp(Qc)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:pb,useId:Ub,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rf={isMounted:function(t){return(t=t._reactInternals)?io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),s=RA(t),A=Qs(r,s);A.payload=e,n!=null&&(A.callback=n),e=SA(t,A,s),e!==null&&(Hr(e,t,s,r),Xd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),s=RA(t),A=Qs(r,s);A.tag=1,A.payload=e,n!=null&&(A.callback=n),e=SA(t,A,s),e!==null&&(Hr(e,t,s,r),Xd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=RA(t),s=Qs(n,r);s.tag=2,e!=null&&(s.callback=e),e=SA(t,s,r),e!==null&&(Hr(e,t,r,n),Xd(e,t,r))}};function Ex(t,e,n,r,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,A,i):e.prototype&&e.prototype.isPureReactComponent?!Ec(n,r)||!Ec(s,A):!0}function Rb(t,e,n){var r=!1,s=VA,A=e.contextType;return typeof A=="object"&&A!==null?A=Fr(A):(s=rr(e)?Mi:Qn.current,r=e.contextTypes,A=(r=r!=null)?ha(t,s):VA),e=new e(n,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function bx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rf.enqueueReplaceState(e,e.state,null)}function Km(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Vw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Fr(A):(A=rr(e)?Mi:Qn.current,s.context=ha(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(Hm(t,e,A,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Rf.enqueueReplaceState(s,s.state,null),Nh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ma(t,e){try{var n="",r=e;do n+=BQ(r),r=r.return;while(r);var s=n}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function vp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $2=typeof WeakMap=="function"?WeakMap:Map;function Nb(t,e,n){n=Qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jh||(jh=!0,t0=r),Gm(t,e)},n}function Pb(t,e,n){n=Qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Gm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Gm(t,e),typeof r!="function"&&(QA===null?QA=new Set([this]):QA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Tx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aR.bind(null,t,e,n),e.then(t,t))}function Fx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ux(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qs(-1,1),e.tag=2,SA(n,e,1))),n.lanes|=1),t)}var q2=Gs.ReactCurrentOwner,Yn=!1;function Ln(t,e,n,r){e.child=t===null?ub(e,null,n,r):ga(e,t.child,n,r)}function kx(t,e,n,r,s){n=n.render;var A=e.ref;return ra(e,s),r=Ww(t,e,n,r,A,s),n=$w(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(yt&&n&&Nw(e),e.flags|=1,Ln(t,e,r,s),e.child)}function Sx(t,e,n,r,s){if(t===null){var A=n.type;return typeof A=="function"&&!sv(A)&&A.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=A,Db(t,e,A,r,s)):(t=rh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(n=n.compare,n=n!==null?n:Ec,n(i,r)&&t.ref===e.ref)return Os(t,e,s)}return e.flags|=1,t=NA(A,r),t.ref=e.ref,t.return=e,e.child=t}function Db(t,e,n,r,s){if(t!==null){var A=t.memoizedProps;if(Ec(A,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=A,(t.lanes&s)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,Os(t,e,s)}return zm(t,e,n,r,s)}function Lb(t,e,n){var r=e.pendingProps,s=r.children,A=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Jo,lr),lr|=n;else{if(!(n&1073741824))return t=A!==null?A.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(Jo,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=A!==null?A.baseLanes:n,dt(Jo,lr),lr|=r}else A!==null?(r=A.baseLanes|n,e.memoizedState=null):r=n,dt(Jo,lr),lr|=r;return Ln(t,e,s,n),e.child}function Ob(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,n,r,s){var A=rr(n)?Mi:Qn.current;return A=ha(e,A),ra(e,s),n=Ww(t,e,n,r,A,s),r=$w(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(yt&&r&&Nw(e),e.flags|=1,Ln(t,e,n,s),e.child)}function Qx(t,e,n,r,s){if(rr(n)){var A=!0;Uh(e)}else A=!1;if(ra(e,s),e.stateNode===null)eh(t,e),Rb(e,n,r),Km(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fr(c):(c=rr(n)?Mi:Qn.current,c=ha(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&bx(e,i,r,c),hA=!1;var f=e.memoizedState;i.state=f,Nh(e,r,i,s),a=e.memoizedState,o!==r||f!==a||nr.current||hA?(typeof d=="function"&&(Hm(e,n,d,r),a=e.memoizedState),(o=hA||Ex(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,hb(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Or(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Fr(a):(a=rr(n)?Mi:Qn.current,a=ha(e,a));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&bx(e,i,r,a),hA=!1,f=e.memoizedState,i.state=f,Nh(e,r,i,s);var p=e.memoizedState;o!==h||f!==p||nr.current||hA?(typeof w=="function"&&(Hm(e,n,w,r),p=e.memoizedState),(c=hA||Ex(e,n,c,r,f,p,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wm(t,e,n,r,A,s)}function Wm(t,e,n,r,s,A){Ob(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&wx(e,n,!1),Os(t,e,A);r=e.stateNode,q2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ga(e,t.child,null,A),e.child=ga(e,null,o,A)):Ln(t,e,o,A),e.memoizedState=r.state,s&&wx(e,n,!0),e.child}function jb(t){var e=t.stateNode;e.pendingContext?mx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mx(t,e.context,!1),Hw(t,e.containerInfo)}function Rx(t,e,n,r,s){return fa(),Dw(s),e.flags|=256,Ln(t,e,n,r),e.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mb(t,e,n){var r=e.pendingProps,s=_t.current,A=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),dt(_t,s&1),t===null)return Mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,A?(r=e.mode,A=e.child,i={mode:"hidden",children:i},!(r&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Df(i,r,0,null),t=Ni(t,r,n,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=qm(n),e.memoizedState=$m,t):Xw(e,i));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return J2(t,e,i,r,o,s,n);if(A){A=r.fallback,i=e.mode,s=t.child,o=s.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=NA(s,a),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?A=NA(o,A):(A=Ni(A,i,n,null),A.flags|=2),A.return=e,r.return=e,r.sibling=A,e.child=r,r=A,A=e.child,i=t.child.memoizedState,i=i===null?qm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~n,e.memoizedState=$m,r}return A=t.child,t=A.sibling,r=NA(A,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xw(t,e){return e=Df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ud(t,e,n,r){return r!==null&&Dw(r),ga(e,t.child,null,n),t=Xw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J2(t,e,n,r,s,A,i){if(n)return e.flags&256?(e.flags&=-257,r=vp(Error(ee(422))),ud(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=r.fallback,s=e.mode,r=Df({mode:"visible",children:r.children},s,0,null),A=Ni(A,s,i,null),A.flags|=2,r.return=e,A.return=e,r.sibling=A,e.child=r,e.mode&1&&ga(e,t.child,null,i),e.child.memoizedState=qm(i),e.memoizedState=$m,A);if(!(e.mode&1))return ud(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,A=Error(ee(419)),r=vp(A,r,void 0),ud(t,e,i,r)}if(o=(i&t.childLanes)!==0,Yn||o){if(r=cn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Ls(t,s),Hr(r,t,s,-1))}return rv(),r=vp(Error(ee(421))),ud(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lR.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,dr=kA(s.nextSibling),fr=e,yt=!0,Mr=null,t!==null&&(yr[Br++]=bs,yr[Br++]=Ts,yr[Br++]=Vi,bs=t.id,Ts=t.overflow,Vi=e),e=Xw(e,r.children),e.flags|=4096,e)}function Nx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vm(t.return,e,n)}function yp(t,e,n,r,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=r,A.tail=n,A.tailMode=s)}function Vb(t,e,n){var r=e.pendingProps,s=r.revealOrder,A=r.tail;if(Ln(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nx(t,n,e);else if(t.tag===19)Nx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dt(_t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ph(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yp(e,!1,s,n,A);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ph(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yp(e,!0,n,null,A);break;case"together":yp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Os(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=NA(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=NA(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function X2(t,e,n){switch(e.tag){case 3:jb(e),fa();break;case 5:fb(e);break;case 1:rr(e.type)&&Uh(e);break;case 4:Hw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;dt(Qh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dt(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?Mb(t,e,n):(dt(_t,_t.current&1),t=Os(t,e,n),t!==null?t.sibling:null);dt(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),dt(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,Lb(t,e,n)}return Os(t,e,n)}var Hb,Jm,Kb,Gb;Hb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jm=function(){};Kb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fi(cs.current);var A=null;switch(n){case"input":s=wm(t,s),r=wm(t,r),A=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),A=[];break;case"textarea":s=Bm(t,s),r=Bm(t,r),A=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Th)}Cm(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in r){var a=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(A||(A=[]),A.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(A=A||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(A=A||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&gt("scroll",t),A||o===a||(A=[])):(A=A||[]).push(c,a))}n&&(A=A||[]).push("style",n);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};Gb=function(t,e,n,r){n!==r&&(e.flags|=4)};function wl(t,e){if(!yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y2(t,e,n){var r=e.pendingProps;switch(Pw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return rr(e.type)&&Fh(),bn(e),null;case 3:return r=e.stateNode,pa(),mt(nr),mt(Qn),Gw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(s0(Mr),Mr=null))),Jm(t,e),bn(e),null;case 5:Kw(e);var s=Fi(kc.current);if(n=e.type,t!==null&&e.stateNode!=null)Kb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return bn(e),null}if(t=Fi(cs.current),ld(e)){r=e.stateNode,n=e.type;var A=e.memoizedProps;switch(r[Zr]=e,r[Fc]=A,t=(e.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<Nl.length;s++)gt(Nl[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":KB(r,A),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!A.multiple},gt("invalid",r);break;case"textarea":zB(r,A),gt("invalid",r)}Cm(n,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var o=A[i];i==="children"?typeof o=="string"?r.textContent!==o&&(A.suppressHydrationWarning!==!0&&ad(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(A.suppressHydrationWarning!==!0&&ad(r.textContent,o,t),s=["children",""+o]):vc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&gt("scroll",r)}switch(n){case"input":ed(r),GB(r,A,!0);break;case"textarea":ed(r),WB(r);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(r.onclick=Th)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Zr]=e,t[Fc]=r,Hb(t,e,!1,!1),e.stateNode=t;e:{switch(i=_m(n,r),n){case"dialog":gt("cancel",t),gt("close",t),s=r;break;case"iframe":case"object":case"embed":gt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Nl.length;s++)gt(Nl[s],t);s=r;break;case"source":gt("error",t),s=r;break;case"img":case"image":case"link":gt("error",t),gt("load",t),s=r;break;case"details":gt("toggle",t),s=r;break;case"input":KB(t,r),s=wm(t,r),gt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),gt("invalid",t);break;case"textarea":zB(t,r),s=Bm(t,r),gt("invalid",t);break;default:s=r}Cm(n,s),o=s;for(A in o)if(o.hasOwnProperty(A)){var a=o[A];A==="style"?xE(t,a):A==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&yE(t,a)):A==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&yc(t,a):typeof a=="number"&&yc(t,""+a):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(vc.hasOwnProperty(A)?a!=null&&A==="onScroll"&&gt("scroll",t):a!=null&&Bw(t,A,a,i))}switch(n){case"input":ed(t),GB(t,r,!1);break;case"textarea":ed(t),WB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+MA(r.value));break;case"select":t.multiple=!!r.multiple,A=r.value,A!=null?Zo(t,!!r.multiple,A,!1):r.defaultValue!=null&&Zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(t&&e.stateNode!=null)Gb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Fi(kc.current),Fi(cs.current),ld(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zr]=e,(A=r.nodeValue!==n)&&(t=fr,t!==null))switch(t.tag){case 3:ad(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ad(r.nodeValue,n,(t.mode&1)!==0)}A&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zr]=e,e.stateNode=r}return bn(e),null;case 13:if(mt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yt&&dr!==null&&e.mode&1&&!(e.flags&128))lb(),fa(),e.flags|=98560,A=!1;else if(A=ld(e),r!==null&&r.dehydrated!==null){if(t===null){if(!A)throw Error(ee(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(ee(317));A[Zr]=e}else fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),A=!1}else Mr!==null&&(s0(Mr),Mr=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Zt===0&&(Zt=3):rv())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return pa(),Jm(t,e),t===null&&bc(e.stateNode.containerInfo),bn(e),null;case 10:return jw(e.type._context),bn(e),null;case 17:return rr(e.type)&&Fh(),bn(e),null;case 19:if(mt(_t),A=e.memoizedState,A===null)return bn(e),null;if(r=(e.flags&128)!==0,i=A.rendering,i===null)if(r)wl(A,!1);else{if(Zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Ph(t),i!==null){for(e.flags|=128,wl(A,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)A=n,t=r,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(_t,_t.current&1|2),e.child}t=t.sibling}A.tail!==null&&jt()>wa&&(e.flags|=128,r=!0,wl(A,!1),e.lanes=4194304)}else{if(!r)if(t=Ph(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!yt)return bn(e),null}else 2*jt()-A.renderingStartTime>wa&&n!==1073741824&&(e.flags|=128,r=!0,wl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(n=A.last,n!==null?n.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=jt(),e.sibling=null,n=_t.current,dt(_t,r?n&1|2:n&1),e):(bn(e),null);case 22:case 23:return nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function Z2(t,e){switch(Pw(e),e.tag){case 1:return rr(e.type)&&Fh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pa(),mt(nr),mt(Qn),Gw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kw(e),null;case 13:if(mt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));fa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(_t),null;case 4:return pa(),null;case 10:return jw(e.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var dd=!1,Sn=!1,eR=typeof WeakSet=="function"?WeakSet:Set,Be=null;function qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kt(t,e,r)}else n.current=null}function Xm(t,e,n){try{n()}catch(r){kt(t,e,r)}}var Px=!1;function tR(t,e){if(Rm=Ih,t=JE(),Rw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,A=r.focusNode;r=r.focusOffset;try{n.nodeType,A.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==n||s!==0&&h.nodeType!==3||(o=i+s),h!==A||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===n&&++c===s&&(o=i),f===A&&++d===r&&(a=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:t,selectionRange:n},Ih=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var C=p.memoizedProps,_=p.memoizedState,y=e.stateNode,B=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:Or(e.type,C),_);y.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(R){kt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return p=Px,Px=!1,p}function nc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&Xm(e,n,A)}s=s.next}while(s!==r)}}function Nf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zb(t){var e=t.alternate;e!==null&&(t.alternate=null,zb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[Fc],delete e[Lm],delete e[D2],delete e[L2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wb(t){return t.tag===5||t.tag===3||t.tag===4}function Dx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Th));else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}function e0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(e0(t,e,n),t=t.sibling;t!==null;)e0(t,e,n),t=t.sibling}var fn=null,jr=!1;function sA(t,e,n){for(n=n.child;n!==null;)$b(t,e,n),n=n.sibling}function $b(t,e,n){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Sn||qo(n,e);case 6:var r=fn,s=jr;fn=null,sA(t,e,n),fn=r,jr=s,fn!==null&&(jr?(t=fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(jr?(t=fn,n=n.stateNode,t.nodeType===8?hp(t.parentNode,n):t.nodeType===1&&hp(t,n),_c(t)):hp(fn,n.stateNode));break;case 4:r=fn,s=jr,fn=n.stateNode.containerInfo,jr=!0,sA(t,e,n),fn=r,jr=s;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&Xm(n,e,i),s=s.next}while(s!==r)}sA(t,e,n);break;case 1:if(!Sn&&(qo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kt(n,e,o)}sA(t,e,n);break;case 21:sA(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,sA(t,e,n),Sn=r):sA(t,e,n);break;default:sA(t,e,n)}}function Lx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eR),e.forEach(function(r){var s=cR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var A=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:fn=o.stateNode,jr=!1;break e;case 3:fn=o.stateNode.containerInfo,jr=!0;break e;case 4:fn=o.stateNode.containerInfo,jr=!0;break e}o=o.return}if(fn===null)throw Error(ee(160));$b(A,i,s),fn=null,jr=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){kt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qb(e,t),e=e.sibling}function qb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),Jr(t),r&4){try{nc(3,t,t.return),Nf(3,t)}catch(C){kt(t,t.return,C)}try{nc(5,t,t.return)}catch(C){kt(t,t.return,C)}}break;case 1:Dr(e,t),Jr(t),r&512&&n!==null&&qo(n,n.return);break;case 5:if(Dr(e,t),Jr(t),r&512&&n!==null&&qo(n,n.return),t.flags&32){var s=t.stateNode;try{yc(s,"")}catch(C){kt(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=n!==null?n.memoizedProps:A,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&A.type==="radio"&&A.name!=null&&mE(s,A),_m(o,i);var c=_m(o,A);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?xE(s,h):d==="dangerouslySetInnerHTML"?yE(s,h):d==="children"?yc(s,h):Bw(s,d,h,c)}switch(o){case"input":vm(s,A);break;case"textarea":wE(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var w=A.value;w!=null?Zo(s,!!A.multiple,w,!1):f!==!!A.multiple&&(A.defaultValue!=null?Zo(s,!!A.multiple,A.defaultValue,!0):Zo(s,!!A.multiple,A.multiple?[]:"",!1))}s[Fc]=A}catch(C){kt(t,t.return,C)}}break;case 6:if(Dr(e,t),Jr(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(C){kt(t,t.return,C)}}break;case 3:if(Dr(e,t),Jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_c(e.containerInfo)}catch(C){kt(t,t.return,C)}break;case 4:Dr(e,t),Jr(t);break;case 13:Dr(e,t),Jr(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(ev=jt())),r&4&&Lx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(c=Sn)||d,Dr(e,t),Sn=c):Dr(e,t),Jr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Be=t,d=t.child;d!==null;){for(h=Be=d;Be!==null;){switch(f=Be,w=f.child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:qo(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(C){kt(r,n,C)}}break;case 5:qo(f,f.return);break;case 22:if(f.memoizedState!==null){jx(h);continue}}w!==null?(w.return=f,Be=w):jx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=BE("display",i))}catch(C){kt(t,t.return,C)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(C){kt(t,t.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,t),Jr(t),r&4&&Lx(t);break;case 21:break;default:Dr(e,t),Jr(t)}}function Jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wb(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yc(s,""),r.flags&=-33);var A=Dx(t);e0(t,A,s);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Dx(t);Zm(t,o,i);break;default:throw Error(ee(161))}}catch(a){kt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nR(t,e,n){Be=t,Jb(t)}function Jb(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,A=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||dd;if(!i){var o=s.alternate,a=o!==null&&o.memoizedState!==null||Sn;o=dd;var c=Sn;if(dd=i,(Sn=a)&&!c)for(Be=s;Be!==null;)i=Be,a=i.child,i.tag===22&&i.memoizedState!==null?Mx(s):a!==null?(a.return=i,Be=a):Mx(s);for(;A!==null;)Be=A,Jb(A),A=A.sibling;Be=s,dd=o,Sn=c}Ox(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,Be=A):Ox(t)}}function Ox(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||Nf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&Cx(e,A,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_c(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Sn||e.flags&512&&Ym(e)}catch(f){kt(e,e.return,f)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function jx(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Mx(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nf(4,e)}catch(a){kt(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){kt(e,s,a)}}var A=e.return;try{Ym(e)}catch(a){kt(e,A,a)}break;case 5:var i=e.return;try{Ym(e)}catch(a){kt(e,i,a)}}}catch(a){kt(e,e.return,a)}if(e===t){Be=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Be=o;break}Be=e.return}}var rR=Math.ceil,Oh=Gs.ReactCurrentDispatcher,Yw=Gs.ReactCurrentOwner,br=Gs.ReactCurrentBatchConfig,Xe=0,cn=null,$t=null,vn=0,lr=0,Jo=ni(0),Zt=0,Nc=null,Ki=0,Pf=0,Zw=0,rc=null,Xn=null,ev=0,wa=1/0,Is=null,jh=!1,t0=null,QA=null,hd=!1,yA=null,Mh=0,sc=0,n0=null,th=-1,nh=0;function Mn(){return Xe&6?jt():th!==-1?th:th=jt()}function RA(t){return t.mode&1?Xe&2&&vn!==0?vn&-vn:j2.transition!==null?(nh===0&&(nh=RE()),nh):(t=ot,t!==0||(t=window.event,t=t===void 0?16:ME(t.type)),t):1}function Hr(t,e,n,r){if(50<sc)throw sc=0,n0=null,Error(ee(185));uu(t,n,r),(!(Xe&2)||t!==cn)&&(t===cn&&(!(Xe&2)&&(Pf|=n),Zt===4&&pA(t,vn)),sr(t,r),n===1&&Xe===0&&!(e.mode&1)&&(wa=jt()+500,Sf&&ri()))}function sr(t,e){var n=t.callbackNode;jQ(t,e);var r=_h(t,t===cn?vn:0);if(r===0)n!==null&&JB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&JB(n),e===1)t.tag===0?O2(Vx.bind(null,t)):ib(Vx.bind(null,t)),N2(function(){!(Xe&6)&&ri()}),n=null;else{switch(NE(r)){case 1:n=Ew;break;case 4:n=SE;break;case 16:n=Ch;break;case 536870912:n=QE;break;default:n=Ch}n=sT(n,Xb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xb(t,e){if(th=-1,nh=0,Xe&6)throw Error(ee(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=_h(t,t===cn?vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vh(t,r);else{e=r;var s=Xe;Xe|=2;var A=Zb();(cn!==t||vn!==e)&&(Is=null,wa=jt()+500,Ri(t,e));do try{iR();break}catch(o){Yb(t,o)}while(!0);Ow(),Oh.current=A,Xe=s,$t!==null?e=0:(cn=null,vn=0,e=Zt)}if(e!==0){if(e===2&&(s=Fm(t),s!==0&&(r=s,e=r0(t,s))),e===1)throw n=Nc,Ri(t,0),pA(t,r),sr(t,jt()),n;if(e===6)pA(t,r);else{if(s=t.current.alternate,!(r&30)&&!sR(s)&&(e=Vh(t,r),e===2&&(A=Fm(t),A!==0&&(r=A,e=r0(t,A))),e===1))throw n=Nc,Ri(t,0),pA(t,r),sr(t,jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:mi(t,Xn,Is);break;case 3:if(pA(t,r),(r&130023424)===r&&(e=ev+500-jt(),10<e)){if(_h(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dm(mi.bind(null,t,Xn,Is),e);break}mi(t,Xn,Is);break;case 4:if(pA(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-Vr(r);A=1<<i,i=e[i],i>s&&(s=i),r&=~A}if(r=s,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rR(r/1960))-r,10<r){t.timeoutHandle=Dm(mi.bind(null,t,Xn,Is),r);break}mi(t,Xn,Is);break;case 5:mi(t,Xn,Is);break;default:throw Error(ee(329))}}}return sr(t,jt()),t.callbackNode===n?Xb.bind(null,t):null}function r0(t,e){var n=rc;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=Vh(t,e),t!==2&&(e=Xn,Xn=n,e!==null&&s0(e)),t}function s0(t){Xn===null?Xn=t:Xn.push.apply(Xn,t)}function sR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],A=s.getSnapshot;s=s.value;try{if(!zr(A(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pA(t,e){for(e&=~Zw,e&=~Pf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vr(e),r=1<<n;t[n]=-1,e&=~r}}function Vx(t){if(Xe&6)throw Error(ee(327));sa();var e=_h(t,0);if(!(e&1))return sr(t,jt()),null;var n=Vh(t,e);if(t.tag!==0&&n===2){var r=Fm(t);r!==0&&(e=r,n=r0(t,r))}if(n===1)throw n=Nc,Ri(t,0),pA(t,e),sr(t,jt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Xn,Is),sr(t,jt()),null}function tv(t,e){var n=Xe;Xe|=1;try{return t(e)}finally{Xe=n,Xe===0&&(wa=jt()+500,Sf&&ri())}}function Gi(t){yA!==null&&yA.tag===0&&!(Xe&6)&&sa();var e=Xe;Xe|=1;var n=br.transition,r=ot;try{if(br.transition=null,ot=1,t)return t()}finally{ot=r,br.transition=n,Xe=e,!(Xe&6)&&ri()}}function nv(){lr=Jo.current,mt(Jo)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,R2(n)),$t!==null)for(n=$t.return;n!==null;){var r=n;switch(Pw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fh();break;case 3:pa(),mt(nr),mt(Qn),Gw();break;case 5:Kw(r);break;case 4:pa();break;case 13:mt(_t);break;case 19:mt(_t);break;case 10:jw(r.type._context);break;case 22:case 23:nv()}n=n.return}if(cn=t,$t=t=NA(t.current,null),vn=lr=e,Zt=0,Nc=null,Zw=Pf=Ki=0,Xn=rc=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,A=n.pending;if(A!==null){var i=A.next;A.next=s,r.next=i}n.pending=r}Ti=null}return t}function Yb(t,e){do{var n=$t;try{if(Ow(),Yd.current=Lh,Dh){for(var r=It.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dh=!1}if(Hi=0,an=Xt=It=null,tc=!1,Sc=0,Yw.current=null,n===null||n.return===null){Zt=1,Nc=e,$t=null;break}e:{var A=t,i=n.return,o=n,a=e;if(e=vn,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Fx(i);if(w!==null){w.flags&=-257,Ux(w,i,o,A,e),w.mode&1&&Tx(A,c,e),e=w,a=c;var p=e.updateQueue;if(p===null){var C=new Set;C.add(a),e.updateQueue=C}else p.add(a);break e}else{if(!(e&1)){Tx(A,c,e),rv();break e}a=Error(ee(426))}}else if(yt&&o.mode&1){var _=Fx(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Ux(_,i,o,A,e),Dw(ma(a,o));break e}}A=a=ma(a,o),Zt!==4&&(Zt=2),rc===null?rc=[A]:rc.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var y=Nb(A,a,e);xx(A,y);break e;case 1:o=a;var B=A.type,v=A.stateNode;if(!(A.flags&128)&&(typeof B.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(QA===null||!QA.has(v)))){A.flags|=65536,e&=-e,A.lanes|=e;var R=Pb(A,o,e);xx(A,R);break e}}A=A.return}while(A!==null)}tT(n)}catch(Q){e=Q,$t===n&&n!==null&&($t=n=n.return);continue}break}while(!0)}function Zb(){var t=Oh.current;return Oh.current=Lh,t===null?Lh:t}function rv(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),cn===null||!(Ki&268435455)&&!(Pf&268435455)||pA(cn,vn)}function Vh(t,e){var n=Xe;Xe|=2;var r=Zb();(cn!==t||vn!==e)&&(Is=null,Ri(t,e));do try{AR();break}catch(s){Yb(t,s)}while(!0);if(Ow(),Xe=n,Oh.current=r,$t!==null)throw Error(ee(261));return cn=null,vn=0,Zt}function AR(){for(;$t!==null;)eT($t)}function iR(){for(;$t!==null&&!kQ();)eT($t)}function eT(t){var e=rT(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?tT(t):$t=e,Yw.current=null}function tT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Z2(n,e),n!==null){n.flags&=32767,$t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zt=6,$t=null;return}}else if(n=Y2(n,e,lr),n!==null){$t=n;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Zt===0&&(Zt=5)}function mi(t,e,n){var r=ot,s=br.transition;try{br.transition=null,ot=1,oR(t,e,n,r)}finally{br.transition=s,ot=r}return null}function oR(t,e,n,r){do sa();while(yA!==null);if(Xe&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var A=n.lanes|n.childLanes;if(MQ(t,A),t===cn&&($t=cn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hd||(hd=!0,sT(Ch,function(){return sa(),null})),A=(n.flags&15990)!==0,n.subtreeFlags&15990||A){A=br.transition,br.transition=null;var i=ot;ot=1;var o=Xe;Xe|=4,Yw.current=null,tR(t,n),qb(n,t),b2(Nm),Ih=!!Rm,Nm=Rm=null,t.current=n,nR(n),SQ(),Xe=o,ot=i,br.transition=A}else t.current=n;if(hd&&(hd=!1,yA=t,Mh=s),A=t.pendingLanes,A===0&&(QA=null),NQ(n.stateNode),sr(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jh)throw jh=!1,t=t0,t0=null,t;return Mh&1&&t.tag!==0&&sa(),A=t.pendingLanes,A&1?t===n0?sc++:(sc=0,n0=t):sc=0,ri(),null}function sa(){if(yA!==null){var t=NE(Mh),e=br.transition,n=ot;try{if(br.transition=null,ot=16>t?16:t,yA===null)var r=!1;else{if(t=yA,yA=null,Mh=0,Xe&6)throw Error(ee(331));var s=Xe;for(Xe|=4,Be=t.current;Be!==null;){var A=Be,i=A.child;if(Be.flags&16){var o=A.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(Be=c;Be!==null;){var d=Be;switch(d.tag){case 0:case 11:case 15:nc(8,d,A)}var h=d.child;if(h!==null)h.return=d,Be=h;else for(;Be!==null;){d=Be;var f=d.sibling,w=d.return;if(zb(d),d===c){Be=null;break}if(f!==null){f.return=w,Be=f;break}Be=w}}}var p=A.alternate;if(p!==null){var C=p.child;if(C!==null){p.child=null;do{var _=C.sibling;C.sibling=null,C=_}while(C!==null)}}Be=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,Be=i;else e:for(;Be!==null;){if(A=Be,A.flags&2048)switch(A.tag){case 0:case 11:case 15:nc(9,A,A.return)}var y=A.sibling;if(y!==null){y.return=A.return,Be=y;break e}Be=A.return}}var B=t.current;for(Be=B;Be!==null;){i=Be;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Be=v;else e:for(i=B;Be!==null;){if(o=Be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Nf(9,o)}}catch(Q){kt(o,o.return,Q)}if(o===i){Be=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,Be=R;break e}Be=o.return}}if(Xe=s,ri(),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{ot=n,br.transition=e}}return!1}function Hx(t,e,n){e=ma(n,e),e=Nb(t,e,1),t=SA(t,e,1),e=Mn(),t!==null&&(uu(t,1,e),sr(t,e))}function kt(t,e,n){if(t.tag===3)Hx(t,t,n);else for(;e!==null;){if(e.tag===3){Hx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(QA===null||!QA.has(r))){t=ma(n,t),t=Pb(e,t,1),e=SA(e,t,1),t=Mn(),e!==null&&(uu(e,1,t),sr(e,t));break}}e=e.return}}function aR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,cn===t&&(vn&n)===n&&(Zt===4||Zt===3&&(vn&130023424)===vn&&500>jt()-ev?Ri(t,0):Zw|=n),sr(t,e)}function nT(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var n=Mn();t=Ls(t,e),t!==null&&(uu(t,e,n),sr(t,n))}function lR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nT(t,n)}function cR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),nT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,X2(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,yt&&e.flags&1048576&&ob(e,Sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;eh(t,e),t=e.pendingProps;var s=ha(e,Qn.current);ra(e,n),s=Ww(null,e,r,t,s,n);var A=$w();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(A=!0,Uh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Vw(e),s.updater=Rf,e.stateNode=s,s._reactInternals=e,Km(e,r,t,n),e=Wm(null,e,r,!0,A,n)):(e.tag=0,yt&&A&&Nw(e),Ln(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(eh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dR(r),t=Or(r,t),s){case 0:e=zm(null,e,r,t,n);break e;case 1:e=Qx(null,e,r,t,n);break e;case 11:e=kx(null,e,r,t,n);break e;case 14:e=Sx(null,e,r,Or(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),zm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),Qx(t,e,r,s,n);case 3:e:{if(jb(e),t===null)throw Error(ee(387));r=e.pendingProps,A=e.memoizedState,s=A.element,hb(t,e),Nh(e,r,null,n);var i=e.memoizedState;if(r=i.element,A.isDehydrated)if(A={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=ma(Error(ee(423)),e),e=Rx(t,e,r,n,s);break e}else if(r!==s){s=ma(Error(ee(424)),e),e=Rx(t,e,r,n,s);break e}else for(dr=kA(e.stateNode.containerInfo.firstChild),fr=e,yt=!0,Mr=null,n=ub(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fa(),r===s){e=Os(t,e,n);break e}Ln(t,e,r,n)}e=e.child}return e;case 5:return fb(e),t===null&&Mm(e),r=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,Pm(r,s)?i=null:A!==null&&Pm(r,A)&&(e.flags|=32),Ob(t,e),Ln(t,e,i,n),e.child;case 6:return t===null&&Mm(e),null;case 13:return Mb(t,e,n);case 4:return Hw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ga(e,null,r,n):Ln(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),kx(t,e,r,s,n);case 7:return Ln(t,e,e.pendingProps,n),e.child;case 8:return Ln(t,e,e.pendingProps.children,n),e.child;case 12:return Ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,dt(Qh,r._currentValue),r._currentValue=i,A!==null)if(zr(A.value,i)){if(A.children===s.children&&!nr.current){e=Os(t,e,n);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var o=A.dependencies;if(o!==null){i=A.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(A.tag===1){a=Qs(-1,n&-n),a.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}A.lanes|=n,a=A.alternate,a!==null&&(a.lanes|=n),Vm(A.return,n,e),o.lanes|=n;break}a=a.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(ee(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Vm(i,n,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}Ln(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ra(e,n),s=Fr(s),r=r(s),e.flags|=1,Ln(t,e,r,n),e.child;case 14:return r=e.type,s=Or(r,e.pendingProps),s=Or(r.type,s),Sx(t,e,r,s,n);case 15:return Db(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),eh(t,e),e.tag=1,rr(r)?(t=!0,Uh(e)):t=!1,ra(e,n),Rb(e,r,s),Km(e,r,s,n),Wm(null,e,r,!0,t,n);case 19:return Vb(t,e,n);case 22:return Lb(t,e,n)}throw Error(ee(156,e.tag))};function sT(t,e){return kE(t,e)}function uR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,e,n,r){return new uR(t,e,n,r)}function sv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dR(t){if(typeof t=="function")return sv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cw)return 11;if(t===_w)return 14}return 2}function NA(t,e){var n=t.alternate;return n===null?(n=Cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rh(t,e,n,r,s,A){var i=2;if(r=t,typeof t=="function")sv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case jo:return Ni(n.children,s,A,e);case xw:i=8,s|=8;break;case fm:return t=Cr(12,n,e,s|2),t.elementType=fm,t.lanes=A,t;case gm:return t=Cr(13,n,e,s),t.elementType=gm,t.lanes=A,t;case pm:return t=Cr(19,n,e,s),t.elementType=pm,t.lanes=A,t;case fE:return Df(n,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dE:i=10;break e;case hE:i=9;break e;case Cw:i=11;break e;case _w:i=14;break e;case dA:i=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Cr(i,n,e,s),e.elementType=t,e.type=r,e.lanes=A,e}function Ni(t,e,n,r){return t=Cr(7,t,r,e),t.lanes=n,t}function Df(t,e,n,r){return t=Cr(22,t,r,e),t.elementType=fE,t.lanes=n,t.stateNode={isHidden:!1},t}function Bp(t,e,n){return t=Cr(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=Cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=np(0),this.expirationTimes=np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=np(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Av(t,e,n,r,s,A,i,o,a){return t=new hR(t,e,n,o,a),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Cr(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vw(A),t}function fR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AT(t){if(!t)return VA;t=t._reactInternals;e:{if(io(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(rr(n))return Ab(t,n,e)}return e}function iT(t,e,n,r,s,A,i,o,a){return t=Av(n,r,!0,t,s,A,i,o,a),t.context=AT(null),n=t.current,r=Mn(),s=RA(n),A=Qs(r,s),A.callback=e??null,SA(n,A,s),t.current.lanes=s,uu(t,s,r),sr(t,r),t}function Lf(t,e,n,r){var s=e.current,A=Mn(),i=RA(s);return n=AT(n),e.context===null?e.context=n:e.pendingContext=n,e=Qs(A,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=SA(s,e,i),t!==null&&(Hr(t,s,i,A),Xd(t,s,i)),i}function Hh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Kx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function iv(t,e){Kx(t,e),(t=t.alternate)&&Kx(t,e)}function gR(){return null}var oT=typeof reportError=="function"?reportError:function(t){console.error(t)};function ov(t){this._internalRoot=t}Of.prototype.render=ov.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Lf(t,e,null,null)};Of.prototype.unmount=ov.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Lf(null,t,null,null)}),e[Ds]=null}};function Of(t){this._internalRoot=t}Of.prototype.unstable_scheduleHydration=function(t){if(t){var e=LE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gA.length&&e!==0&&e<gA[n].priority;n++);gA.splice(n,0,t),n===0&&jE(t)}};function av(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gx(){}function pR(t,e,n,r,s){if(s){if(typeof r=="function"){var A=r;r=function(){var c=Hh(i);A.call(c)}}var i=iT(e,r,t,0,null,!1,!1,"",Gx);return t._reactRootContainer=i,t[Ds]=i.current,bc(t.nodeType===8?t.parentNode:t),Gi(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=Hh(a);o.call(c)}}var a=Av(t,0,!1,null,null,!1,!1,"",Gx);return t._reactRootContainer=a,t[Ds]=a.current,bc(t.nodeType===8?t.parentNode:t),Gi(function(){Lf(e,a,n,r)}),a}function Mf(t,e,n,r,s){var A=n._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var o=s;s=function(){var a=Hh(i);o.call(a)}}Lf(e,i,t,s)}else i=pR(n,e,t,s,r);return Hh(i)}PE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rl(e.pendingLanes);n!==0&&(bw(e,n|1),sr(e,jt()),!(Xe&6)&&(wa=jt()+500,ri()))}break;case 13:Gi(function(){var r=Ls(t,1);if(r!==null){var s=Mn();Hr(r,t,1,s)}}),iv(t,1)}};Tw=function(t){if(t.tag===13){var e=Ls(t,134217728);if(e!==null){var n=Mn();Hr(e,t,134217728,n)}iv(t,134217728)}};DE=function(t){if(t.tag===13){var e=RA(t),n=Ls(t,e);if(n!==null){var r=Mn();Hr(n,t,e,r)}iv(t,e)}};LE=function(){return ot};OE=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};Em=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=kf(r);if(!s)throw Error(ee(90));pE(r),vm(r,s)}}}break;case"textarea":wE(t,n);break;case"select":e=n.value,e!=null&&Zo(t,!!n.multiple,e,!1)}};IE=tv;EE=Gi;var mR={usingClientEntryPoint:!1,Events:[hu,Ko,kf,CE,_E,tv]},vl={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wR={bundleType:vl.bundleType,version:vl.version,rendererPackageName:vl.rendererPackageName,rendererConfig:vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FE(t),t===null?null:t.stateNode},findFiberByHostInstance:vl.findFiberByHostInstance||gR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{bf=fd.inject(wR),ls=fd}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mR;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!av(e))throw Error(ee(200));return fR(t,e,null,n)};mr.createRoot=function(t,e){if(!av(t))throw Error(ee(299));var n=!1,r="",s=oT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Av(t,1,!1,null,null,n,!1,r,s),t[Ds]=e.current,bc(t.nodeType===8?t.parentNode:t),new ov(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=FE(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return Gi(t)};mr.hydrate=function(t,e,n){if(!jf(e))throw Error(ee(200));return Mf(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!av(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,A="",i=oT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(A=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=iT(e,null,t,1,n??null,s,!1,A,i),t[Ds]=e.current,bc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Of(e)};mr.render=function(t,e,n){if(!jf(e))throw Error(ee(200));return Mf(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!jf(t))throw Error(ee(40));return t._reactRootContainer?(Gi(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};mr.unstable_batchedUpdates=tv;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Mf(t,e,n,!1,r)};mr.version="18.3.1-next-f1338f8080-20240426";function aT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aT)}catch(t){console.error(t)}}aT(),aE.exports=mr;var vR=aE.exports,zx=vR;dm.createRoot=zx.createRoot,dm.hydrateRoot=zx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pc.apply(this,arguments)}var BA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(BA||(BA={}));const Wx="popstate";function yR(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:o="",hash:a=""}=oo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),A0("",{pathname:i,search:o,hash:a},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function n(s,A){let i=s.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=s.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof A=="string"?A:Kh(A))}function r(s,A){Vf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return xR(e,n,r,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BR(){return Math.random().toString(36).substr(2,8)}function $x(t,e){return{usr:t.state,key:t.key,idx:e}}function A0(t,e,n,r){return n===void 0&&(n=null),Pc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oo(e):e,{state:n,key:e&&e.key||r||BR()})}function Kh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:A=!1}=r,i=s.history,o=BA.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Pc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=BA.Pop;let _=d(),y=_==null?null:_-c;c=_,a&&a({action:o,location:C.location,delta:y})}function f(_,y){o=BA.Push;let B=A0(C.location,_,y);n&&n(B,_),c=d()+1;let v=$x(B,c),R=C.createHref(B);try{i.pushState(v,"",R)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(R)}A&&a&&a({action:o,location:C.location,delta:1})}function w(_,y){o=BA.Replace;let B=A0(C.location,_,y);n&&n(B,_),c=d();let v=$x(B,c),R=C.createHref(B);i.replaceState(v,"",R),A&&a&&a({action:o,location:C.location,delta:0})}function p(_){let y=s.location.origin!=="null"?s.location.origin:s.location.href,B=typeof _=="string"?_:Kh(_);return B=B.replace(/ $/,"%20"),Et(y,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,y)}let C={get action(){return o},get location(){return t(s,i)},listen(_){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Wx,h),a=_,()=>{s.removeEventListener(Wx,h),a=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let y=p(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:w,go(_){return i.go(_)}};return C}var qx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qx||(qx={}));function CR(t,e,n){return n===void 0&&(n="/"),_R(t,e,n)}function _R(t,e,n,r){let s=typeof e=="string"?oo(e):e,A=va(s.pathname||"/",n);if(A==null)return null;let i=lT(t);IR(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=PR(A);o=RR(i[a],c)}return o}function lT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(A,i,o)=>{let a={relativePath:o===void 0?A.path||"":o,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};a.relativePath.startsWith("/")&&(Et(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=PA([r,a.relativePath]),d=n.concat(a);A.children&&A.children.length>0&&(Et(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lT(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:SR(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var o;if(A.path===""||!((o=A.path)!=null&&o.includes("?")))s(A,i);else for(let a of cT(A.path))s(A,i,a)}),e}function cT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),A=n.replace(/\?$/,"");if(r.length===0)return s?[A,""]:[A];let i=cT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?A:[A,a].join("/"))),s&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function IR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ER=/^:[\w-]+$/,bR=3,TR=2,FR=1,UR=10,kR=-2,Jx=t=>t==="*";function SR(t,e){let n=t.split("/"),r=n.length;return n.some(Jx)&&(r+=kR),e&&(r+=TR),n.filter(s=>!Jx(s)).reduce((s,A)=>s+(ER.test(A)?bR:A===""?FR:UR),r)}function QR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function RR(t,e,n){let{routesMeta:r}=t,s={},A="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=i0({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:PA([A,h.pathname]),pathnameBase:MR(PA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=PA([A,h.pathnameBase]))}return i}function i0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let C=o[h]||"";i=A.slice(0,A.length-C.length).replace(/(.)\/+$/,"$1")}const p=o[h];return w&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function NR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const DR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LR=t=>DR.test(t);function OR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?oo(t):t,A;if(n)if(LR(n))A=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Vf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?A=Xx(n.substring(1),"/"):A=Xx(n,e)}else A=e;return{pathname:A,search:VR(r),hash:HR(s)}}function Xx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lv(t,e){let n=jR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=oo(t):(s=Pc({},t),Et(!s.pathname||!s.pathname.includes("?"),Cp("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),Cp("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),Cp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=OR(s,o),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const PA=t=>t.join("/").replace(/\/\/+/g,"/"),MR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uT=["post","put","patch","delete"];new Set(uT);const GR=["get",...uT];new Set(GR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dc.apply(this,arguments)}const Hf=S.createContext(null),dT=S.createContext(null),zs=S.createContext(null),Kf=S.createContext(null),Ws=S.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=S.createContext(null);function zR(t,e){let{relative:n}=e===void 0?{}:e;Ma()||Et(!1);let{basename:r,navigator:s}=S.useContext(zs),{hash:A,pathname:i,search:o}=Gf(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:PA([r,i])),s.createHref({pathname:a,search:o,hash:A})}function Ma(){return S.useContext(Kf)!=null}function si(){return Ma()||Et(!1),S.useContext(Kf).location}function fT(t){S.useContext(zs).static||S.useLayoutEffect(t)}function gu(){let{isDataRoute:t}=S.useContext(Ws);return t?oN():WR()}function WR(){Ma()||Et(!1);let t=S.useContext(Hf),{basename:e,future:n,navigator:r}=S.useContext(zs),{matches:s}=S.useContext(Ws),{pathname:A}=si(),i=JSON.stringify(lv(s,n.v7_relativeSplatPath)),o=S.useRef(!1);return fT(()=>{o.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=cv(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:PA([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,A,t])}const $R=S.createContext(null);function qR(t){let e=S.useContext(Ws).outlet;return e&&S.createElement($R.Provider,{value:t},e)}function Gf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(zs),{matches:s}=S.useContext(Ws),{pathname:A}=si(),i=JSON.stringify(lv(s,r.v7_relativeSplatPath));return S.useMemo(()=>cv(t,JSON.parse(i),A,n==="path"),[t,i,A,n])}function JR(t,e){return XR(t,e)}function XR(t,e,n,r){Ma()||Et(!1);let{navigator:s}=S.useContext(zs),{matches:A}=S.useContext(Ws),i=A[A.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=si(),d;if(e){var h;let _=typeof e=="string"?oo(e):e;a==="/"||(h=_.pathname)!=null&&h.startsWith(a)||Et(!1),d=_}else d=c;let f=d.pathname||"/",w=f;if(a!=="/"){let _=a.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=CR(t,{pathname:w}),C=nN(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:PA([a,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:PA([a,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),A,n,r);return e&&C?S.createElement(Kf.Provider,{value:{location:Dc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:BA.Pop}},C):C}function YR(){let t=iN(),e=KR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const ZR=S.createElement(YR,null);class eN extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ws.Provider,{value:this.props.routeContext},S.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tN(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(Hf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ws.Provider,{value:e},r)}function nN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var A;if(!n)return null;if(n.errors)t=n.matches;else if((A=r)!=null&&A.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Et(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:w}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||p){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,p=!1,C=null,_=null;n&&(w=o&&h.route.id?o[h.route.id]:void 0,C=h.route.errorElement||ZR,a&&(c<0&&f===0?(aN("route-fallback"),p=!0,_=null):c===f&&(p=!0,_=h.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,f+1)),B=()=>{let v;return w?v=C:p?v=_:h.route.Component?v=S.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,S.createElement(tN,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(eN,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:B(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):B()},null)}var gT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gT||{}),pT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pT||{});function rN(t){let e=S.useContext(Hf);return e||Et(!1),e}function sN(t){let e=S.useContext(dT);return e||Et(!1),e}function AN(t){let e=S.useContext(Ws);return e||Et(!1),e}function mT(t){let e=AN(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function iN(){var t;let e=S.useContext(hT),n=sN(),r=mT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oN(){let{router:t}=rN(gT.UseNavigateStable),e=mT(pT.UseNavigateStable),n=S.useRef(!1);return fT(()=>{n.current=!0}),S.useCallback(function(s,A){A===void 0&&(A={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dc({fromRouteId:e},A)))},[t,e])}const Yx={};function aN(t,e,n){Yx[t]||(Yx[t]=!0)}function lN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Gh(t){let{to:e,replace:n,state:r,relative:s}=t;Ma()||Et(!1);let{future:A,static:i}=S.useContext(zs),{matches:o}=S.useContext(Ws),{pathname:a}=si(),c=gu(),d=cv(e,lv(o,A.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function cN(t){return qR(t.context)}function ir(t){Et(!1)}function uN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=BA.Pop,navigator:A,static:i=!1,future:o}=t;Ma()&&Et(!1);let a=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:a,navigator:A,static:i,future:Dc({v7_relativeSplatPath:!1},o)}),[a,o,A,i]);typeof r=="string"&&(r=oo(r));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:p="default"}=r,C=S.useMemo(()=>{let _=va(d,a);return _==null?null:{location:{pathname:_,search:h,hash:f,state:w,key:p},navigationType:s}},[a,d,h,f,w,p,s]);return C==null?null:S.createElement(zs.Provider,{value:c},S.createElement(Kf.Provider,{children:n,value:C}))}function dN(t){let{children:e,location:n}=t;return JR(o0(e),n)}new Promise(()=>{});function o0(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let A=[...e,s];if(r.type===S.Fragment){n.push.apply(n,o0(r.props.children,A));return}r.type!==ir&&Et(!1),!r.props.index||!r.props.children||Et(!1);let i={id:r.props.id||A.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=o0(r.props.children,A)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zh(){return zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zh.apply(this,arguments)}function wT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,A;for(A=0;A<r.length;A++)s=r[A],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function hN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fN(t,e){return t.button===0&&(!e||e==="_self")&&!hN(t)}function a0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function gN(t,e){let n=a0(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(A=>{n.append(s,A)})}),n}const pN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wN="6";try{window.__reactRouterVersion=wN}catch{}const vN=S.createContext({isTransitioning:!1}),yN="startTransition",Zx=aQ[yN];function BN(t){let{basename:e,children:n,future:r,window:s}=t,A=S.useRef();A.current==null&&(A.current=yR({window:s,v5Compat:!0}));let i=A.current,[o,a]=S.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=S.useCallback(h=>{c&&Zx?Zx(()=>a(h)):a(h)},[a,c]);return S.useLayoutEffect(()=>i.listen(d),[i,d]),S.useEffect(()=>lN(r),[r]),S.createElement(uN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const xN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_N=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:A,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=wT(e,pN),{basename:w}=S.useContext(zs),p,C=!1;if(typeof c=="string"&&CN.test(c)&&(p=c,xN))try{let v=new URL(window.location.href),R=c.startsWith("//")?new URL(v.protocol+c):new URL(c),Q=va(R.pathname,w);R.origin===v.origin&&Q!=null?c=Q+R.search+R.hash:C=!0}catch{}let _=zR(c,{relative:s}),y=bN(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:s,viewTransition:h});function B(v){r&&r(v),v.defaultPrevented||y(v)}return S.createElement("a",zh({},f,{href:p||_,onClick:C||A?r:B,ref:n,target:a}))}),IN=S.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:A="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=wT(e,mN),f=Gf(a,{relative:h.relative}),w=si(),p=S.useContext(dT),{navigator:C,basename:_}=S.useContext(zs),y=p!=null&&FN(f)&&c===!0,B=C.encodeLocation?C.encodeLocation(f).pathname:f.pathname,v=w.pathname,R=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(v=v.toLowerCase(),R=R?R.toLowerCase():null,B=B.toLowerCase()),R&&_&&(R=va(R,_)||R);const Q=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let N=v===B||!i&&v.startsWith(B)&&v.charAt(Q)==="/",I=R!=null&&(R===B||!i&&R.startsWith(B)&&R.charAt(B.length)==="/"),x={isActive:N,isPending:I,isTransitioning:y},b=N?r:void 0,k;typeof A=="function"?k=A(x):k=[A,N?"active":null,I?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(x):o;return S.createElement(_N,zh({},h,{"aria-current":b,className:k,ref:n,style:U,to:a,viewTransition:c}),typeof d=="function"?d(x):d)});var l0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(l0||(l0={}));var eC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(eC||(eC={}));function EN(t){let e=S.useContext(Hf);return e||Et(!1),e}function bN(t,e){let{target:n,replace:r,state:s,preventScrollReset:A,relative:i,viewTransition:o}=e===void 0?{}:e,a=gu(),c=si(),d=Gf(t,{relative:i});return S.useCallback(h=>{if(fN(h,n)){h.preventDefault();let f=r!==void 0?r:Kh(c)===Kh(d);a(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:o})}},[c,a,d,r,s,n,t,A,i,o])}function TN(t){let e=S.useRef(a0(t)),n=S.useRef(!1),r=si(),s=S.useMemo(()=>gN(r.search,n.current?null:e.current),[r.search]),A=gu(),i=S.useCallback((o,a)=>{const c=a0(typeof o=="function"?o(s):o);n.current=!0,A("?"+c,a)},[A,s]);return[s,i]}function FN(t,e){e===void 0&&(e={});let n=S.useContext(vN);n==null&&Et(!1);let{basename:r}=EN(l0.useViewTransitionState),s=Gf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let A=va(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=va(n.nextLocation.pathname,r)||n.nextLocation.pathname;return i0(s.pathname,i)!=null||i0(s.pathname,A)!=null}var ce=(t=>(t.First="1 ",t.Second="2 ",t))(ce||{}),ur=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ur||{});const Un=["","","","",""],As={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},tC=["","","/","","","",""," "],vT=[{shift:ce.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ce.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ce.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ce.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ce.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ce.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ce.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ce.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ce.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ce.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ce.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ce.Second,period:6,start:"18:50",end:"19:35",day:"default"}],zt={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ce.First,studentsCount:25},{id:"c2",name:"6",shift:ce.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],substitutions:[],bellSchedule:vT,requests:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}};var nC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[n++];e[r++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[n++],i=t[n++],o=t[n++],a=((s&7)<<18|(A&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const A=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},BT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,o=i?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=A>>2,h=(A&3)<<4|o>>4;let f=(o&15)<<2|c>>6,w=c&63;a||(w=64,i||(f=64)),r.push(n[d],n[h],n[f],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const A=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,A==null||o==null||c==null||h==null)throw new kN;const f=A<<2|o>>4;if(r.push(f),c!==64){const w=o<<4&240|c>>2;if(r.push(w),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SN=function(t){const e=yT(t);return BT.encodeByteArray(e,!0)},Wh=function(t){return SN(t).replace(/\./g,"")},xT=function(t){try{return BT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!QN(n)||(t[n]=$h(t[n],e[n]));return t}function QN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=()=>CT().__FIREBASE_DEFAULTS__,NN=()=>{if(typeof process>"u"||typeof nC>"u")return;const t=nC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xT(t[1]);return e&&JSON.parse(e)},uv=()=>{try{return RN()||NN()||PN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_T=()=>{var t;return(t=uv())===null||t===void 0?void 0:t.config},DN=t=>{var e;return(e=uv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wh(JSON.stringify(n)),Wh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function dv(){var t;const e=(t=uv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MN(){return typeof window<"u"||IT()}function IT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function VN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ET(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bT(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TT(){return!dv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lc(){try{return typeof indexedDB=="object"}catch{return!1}}function HN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KN,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?GN(A,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Vn(s,o,r)}}function GN(t,e){return t.replace(zN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function WN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const A=t[s],i=e[s];if(sC(A)&&sC(i)){if(!Oc(A,i))return!1}else if(A!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function sC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,A]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Pl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FT(t,e){const n=new $N(t,e);return n.subscribe.bind(n)}class $N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_p),s.error===void 0&&(s.error=_p),s.complete===void 0&&(s.complete=_p);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YN(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const A=this.getOrInitializeService({instanceIdentifier:s});r.resolve(A)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[A,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(A);r===o&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),A=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XN(t){return t===wi?void 0:t}function YN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=[];var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const kT={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},ZN=Me.INFO,eP={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},tP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=eP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let zf=class{constructor(e){this.name=e,this._logLevel=ZN,this._logHandler=tP,this._userLogHandler=null,fv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}};function nP(t){fv.forEach(e=>{e.setLogLevel(t)})}function rP(t,e){for(const n of fv){let r=null;e&&e.level&&(r=kT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,A,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");A>=(r??s.logLevel)&&t({level:Me[A].toLowerCase(),message:o,args:i,type:s.name})}}}const sP=(t,e)=>e.some(n=>t instanceof n);let AC,iC;function AP(){return AC||(AC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iP(){return iC||(iC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,c0=new WeakMap,QT=new WeakMap,Ip=new WeakMap,gv=new WeakMap;function oP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{n(DA(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&ST.set(n,t)}).catch(()=>{}),gv.set(e,t),e}function aP(t){if(c0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});c0.set(t,e)}let u0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return c0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return DA(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lP(t){u0=t(u0)}function cP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ep(this),e,...n);return QT.set(r,e.sort?e.sort():[e]),DA(r)}:iP().includes(t)?function(...e){return t.apply(Ep(this),e),DA(ST.get(this))}:function(...e){return DA(t.apply(Ep(this),e))}}function uP(t){return typeof t=="function"?cP(t):(t instanceof IDBTransaction&&aP(t),sP(t,AP())?new Proxy(t,u0):t)}function DA(t){if(t instanceof IDBRequest)return oP(t);if(Ip.has(t))return Ip.get(t);const e=uP(t);return e!==t&&(Ip.set(t,e),gv.set(e,t)),e}const Ep=t=>gv.get(t);function dP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),o=DA(i);return r&&i.addEventListener("upgradeneeded",a=>{r(DA(i.result),a.oldVersion,a.newVersion,DA(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{A&&a.addEventListener("close",()=>A()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const hP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],bp=new Map;function oC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hP.includes(n)))return;const A=async function(i,...o){const a=this.transaction(i,s?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&a.done]))[0]};return bp.set(e,A),A}lP(t=>({...t,get:(e,n,r)=>oC(e,n)||t.get(e,n,r),has:(e,n)=>!!oC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",d0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new zf("@firebase/app"),mP="@firebase/app-compat",wP="@firebase/analytics-compat",vP="@firebase/analytics",yP="@firebase/app-check-compat",BP="@firebase/app-check",xP="@firebase/auth",CP="@firebase/auth-compat",_P="@firebase/database",IP="@firebase/data-connect",EP="@firebase/database-compat",bP="@firebase/functions",TP="@firebase/functions-compat",FP="@firebase/installations",UP="@firebase/installations-compat",kP="@firebase/messaging",SP="@firebase/messaging-compat",QP="@firebase/performance",RP="@firebase/performance-compat",NP="@firebase/remote-config",PP="@firebase/remote-config-compat",DP="@firebase/storage",LP="@firebase/storage-compat",OP="@firebase/firestore",jP="@firebase/vertexai-preview",MP="@firebase/firestore-compat",VP="firebase",HP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="[DEFAULT]",KP={[qh]:"fire-core",[mP]:"fire-core-compat",[vP]:"fire-analytics",[wP]:"fire-analytics-compat",[BP]:"fire-app-check",[yP]:"fire-app-check-compat",[xP]:"fire-auth",[CP]:"fire-auth-compat",[_P]:"fire-rtdb",[IP]:"fire-data-connect",[EP]:"fire-rtdb-compat",[bP]:"fire-fn",[TP]:"fire-fn-compat",[FP]:"fire-iid",[UP]:"fire-iid-compat",[kP]:"fire-fcm",[SP]:"fire-fcm-compat",[QP]:"fire-perf",[RP]:"fire-perf-compat",[NP]:"fire-rc",[PP]:"fire-rc-compat",[DP]:"fire-gcs",[LP]:"fire-gcs-compat",[OP]:"fire-fst",[MP]:"fire-fst-compat",[jP]:"fire-vertex","fire-js":"fire-js",[VP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Map,ya=new Map,Ba=new Map;function jc(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function RT(t,e){t.container.addOrOverwriteComponent(e)}function GA(t){const e=t.name;if(Ba.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,t);for(const n of KA.values())jc(n,t);for(const n of ya.values())jc(n,t);return!0}function NT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function GP(t,e,n=HA){NT(t,e).clearInstance(n)}function PT(t){return t.options!==void 0}function St(t){return t.settings!==void 0}function zP(){Ba.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new ao("app","Firebase",WP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P extends DT{constructor(e,n,r,s){const A=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:A};if(e.apiKey!==void 0)super(e,i,s);else{const o=e;super(o.options,i,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:A},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Kr(qh,d0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){mv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Tr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=HP;function pv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:HA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=_T()),!n)throw Tr.create("no-options");const A=KA.get(s);if(A){if(Oc(n,A.options)&&Oc(r,A.config))return A;throw Tr.create("duplicate-app",{appName:s})}const i=new UT(s);for(const a of Ba.values())i.addComponent(a);const o=new DT(n,r,i);return KA.set(s,o),o}function qP(t,e){if(MN()&&!IT())throw Tr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;PT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Tr.create("finalization-registry-not-supported",{});const A=""+s(JSON.stringify(r)),i=ya.get(A);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new UT(A);for(const c of Ba.values())o.addComponent(c);const a=new $P(n,e,A,o);return ya.set(A,a),a}function JP(t=HA){const e=KA.get(t);if(!e&&t===HA&&_T())return pv();if(!e)throw Tr.create("no-app",{appName:t});return e}function XP(){return Array.from(KA.values())}async function mv(t){let e=!1;const n=t.name;KA.has(n)?(e=!0,KA.delete(n)):ya.has(n)&&t.decRefCount()<=0&&(ya.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Kr(t,e,n){var r;let s=(r=KP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const o=[`Unable to register library "${s}" with version "${e}":`];A&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(o.join(" "));return}GA(new hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function LT(t,e){if(t!==null&&typeof t!="function")throw Tr.create("invalid-log-argument");rP(t,e)}function OT(t){nP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebase-heartbeat-database",ZP=1,Mc="firebase-heartbeat-store";let Tp=null;function jT(){return Tp||(Tp=dP(YP,ZP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Tp}async function eD(t){try{const n=(await jT()).transaction(Mc),r=await n.objectStore(Mc).get(MT(t));return await n.done,r}catch(e){if(e instanceof Vn)js.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function aC(t,e){try{const r=(await jT()).transaction(Mc,"readwrite");await r.objectStore(Mc).put(e,MT(t)),await r.done}catch(n){if(n instanceof Vn)js.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(r.message)}}}function MT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1024,nD=30*24*60*60*1e3;class rD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=lC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=nD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lC(),{heartbeatsToSend:r,unsentEntries:s}=sD(this._heartbeatsCache.heartbeats),A=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(n){return js.warn(n),""}}}function lC(){return new Date().toISOString().substring(0,10)}function sD(t,e=tD){const n=[];let r=t.slice();for(const s of t){const A=n.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),cC(n)>e){A.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lc()?HN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cC(t){return Wh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){GA(new hs("platform-logger",e=>new gP(e),"PRIVATE")),GA(new hs("heartbeat",e=>new rD(e),"PRIVATE")),Kr(qh,d0,t),Kr(qh,d0,"esm2017"),Kr("fire-js","")}iD("");const oD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Vn,SDK_VERSION:Ai,_DEFAULT_ENTRY_NAME:HA,_addComponent:jc,_addOrOverwriteComponent:RT,_apps:KA,_clearComponents:zP,_components:Ba,_getProvider:NT,_isFirebaseApp:PT,_isFirebaseServerApp:St,_registerComponent:GA,_removeServiceInstance:GP,_serverApps:ya,deleteApp:mv,getApp:JP,getApps:XP,initializeApp:pv,initializeServerApp:qP,onLog:LT,registerVersion:Kr,setLogLevel:OT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this._delegate=e,this.firebase=n,jc(e,new hs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),mv(this._delegate)))}_getService(e,n=HA){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=HA){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){jc(this._delegate,e)}_addOrOverwriteComponent(e){RT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},uC=new ao("app-compat","Firebase",lD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){const e={},n={__esModule:!0,initializeApp:A,app:s,registerVersion:Kr,setLogLevel:OT,onLog:LT,apps:null,SDK_VERSION:Ai,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:oD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(c){delete e[c]}function s(c){if(c=c||HA,!rC(e,c))throw uC.create("no-app",{appName:c});return e[c]}s.App=t;function A(c,d={}){const h=pv(c,d);if(rC(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(c=>e[c])}function o(c){const d=c.name,h=d.replace("-compat","");if(GA(c)&&c.type==="PUBLIC"){const f=(w=s())=>{if(typeof w[h]!="function")throw uC.create("invalid-app-argument",{appName:d});return w[h]()};c.serviceProps!==void 0&&$h(f,c.serviceProps),n[h]=f,t.prototype[h]=function(...w){return this._getService.bind(this,d).apply(this,c.multipleInstances?w:[])}}return c.type==="PUBLIC"?n[h]:null}function a(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){const t=cD(aD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:VT,extendNamespace:e,createSubscribe:FT,ErrorFactory:ao,deepExtend:$h});function e(n){$h(t,n)}return t}const uD=VT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new zf("@firebase/app-compat"),dD="@firebase/app-compat",hD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){Kr(dD,hD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=CT();if(t.firebase!==void 0){dC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&dC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const es=uD;fD();var gD="firebase",pD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es.registerVersion(gD,pD,"app-compat");var hC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,HT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function b(){}b.prototype=x.prototype,I.D=x.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(k,U,D){for(var T=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)T[Ee-2]=arguments[Ee];return x.prototype[U].apply(k,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,b){b||(b=0);var k=Array(16);if(typeof x=="string")for(var U=0;16>U;++U)k[U]=x.charCodeAt(b++)|x.charCodeAt(b++)<<8|x.charCodeAt(b++)<<16|x.charCodeAt(b++)<<24;else for(U=0;16>U;++U)k[U]=x[b++]|x[b++]<<8|x[b++]<<16|x[b++]<<24;x=I.g[0],b=I.g[1],U=I.g[2];var D=I.g[3],T=x+(D^b&(U^D))+k[0]+3614090360&4294967295;x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[1]+3905402710&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[2]+606105819&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[3]+3250441966&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+k[4]+4118548399&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[5]+1200080426&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[6]+2821735955&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[7]+4249261313&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+k[8]+1770035416&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[9]+2336552879&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[10]+4294925233&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[11]+2304563134&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+k[12]+1804603682&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[13]+4254626195&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[14]+2792965006&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[15]+1236535329&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(U^D&(b^U))+k[1]+4129170786&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[6]+3225465664&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[11]+643717713&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[0]+3921069994&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+k[5]+3593408605&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[10]+38016083&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[15]+3634488961&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[4]+3889429448&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+k[9]+568446438&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[14]+3275163606&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[3]+4107603335&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[8]+1163531501&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+k[13]+2850285829&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[2]+4243563512&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[7]+1735328473&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[12]+2368359562&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(b^U^D)+k[5]+4294588738&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[8]+2272392833&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[11]+1839030562&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[14]+4259657740&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+k[1]+2763975236&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[4]+1272893353&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[7]+4139469664&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[10]+3200236656&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+k[13]+681279174&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[0]+3936430074&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[3]+3572445317&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[6]+76029189&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+k[9]+3654602809&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[12]+3873151461&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[15]+530742520&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[2]+3299628645&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(U^(b|~D))+k[0]+4096336452&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[7]+1126891415&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[14]+2878612391&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[5]+4237533241&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+k[12]+1700485571&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[3]+2399980690&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[10]+4293915773&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[1]+2240044497&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+k[8]+1873313359&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[15]+4264355552&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[6]+2734768916&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[13]+1309151649&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+k[4]+4149444226&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[11]+3174756917&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[2]+718787259&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(U+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var b=x-this.blockSize,k=this.B,U=this.h,D=0;D<x;){if(U==0)for(;D<=b;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<x;)if(k[U++]=I.charCodeAt(D++),U==this.blockSize){s(this,k),U=0;break}}else for(;D<x;)if(k[U++]=I[D++],U==this.blockSize){s(this,k),U=0;break}}this.h=U,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var b=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=b&255,b/=256;for(this.u(I),I=Array(16),x=b=0;4>x;++x)for(var k=0;32>k;k+=8)I[b++]=this.g[x]>>>k&255;return I};function A(I,x){var b=o;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=x(I)}function i(I,x){this.h=x;for(var b=[],k=!0,U=I.length-1;0<=U;U--){var D=I[U]|0;k&&D==x||(b[U]=D,k=!1)}this.g=b}var o={};function a(I){return-128<=I&&128>I?A(I,function(x){return new i([x|0],0>x?-1:0)}):new i([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return _(c(-I));for(var x=[],b=1,k=0;I>=b;k++)x[k]=I/b|0,b*=4294967296;return new i(x,0)}function d(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return _(d(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(x,8)),k=h,U=0;U<I.length;U+=8){var D=Math.min(8,I.length-U),T=parseInt(I.substring(U,U+D),x);8>D?(D=c(Math.pow(x,D)),k=k.j(D).add(c(T))):(k=k.j(b),k=k.add(c(T)))}return k}var h=a(0),f=a(1),w=a(16777216);t=i.prototype,t.m=function(){if(C(this))return-_(this).m();for(var I=0,x=1,b=0;b<this.g.length;b++){var k=this.i(b);I+=(0<=k?k:4294967296+k)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(p(this))return"0";if(C(this))return"-"+_(this).toString(I);for(var x=c(Math.pow(I,6)),b=this,k="";;){var U=R(b,x).g;b=y(b,U.j(x));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=U,p(b))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function p(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=y(this,I),C(I)?-1:p(I)?0:1};function _(I){for(var x=I.g.length,b=[],k=0;k<x;k++)b[k]=~I.g[k];return new i(b,~I.h).add(f)}t.abs=function(){return C(this)?_(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0,U=0;U<=x;U++){var D=k+(this.i(U)&65535)+(I.i(U)&65535),T=(D>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);k=T>>>16,D&=65535,T&=65535,b[U]=T<<16|D}return new i(b,b[b.length-1]&-2147483648?-1:0)};function y(I,x){return I.add(_(x))}t.j=function(I){if(p(this)||p(I))return h;if(C(this))return C(I)?_(this).j(_(I)):_(_(this).j(I));if(C(I))return _(this.j(_(I)));if(0>this.l(w)&&0>I.l(w))return c(this.m()*I.m());for(var x=this.g.length+I.g.length,b=[],k=0;k<2*x;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var U=0;U<I.g.length;U++){var D=this.i(k)>>>16,T=this.i(k)&65535,Ee=I.i(U)>>>16,$e=I.i(U)&65535;b[2*k+2*U]+=T*$e,B(b,2*k+2*U),b[2*k+2*U+1]+=D*$e,B(b,2*k+2*U+1),b[2*k+2*U+1]+=T*Ee,B(b,2*k+2*U+1),b[2*k+2*U+2]+=D*Ee,B(b,2*k+2*U+2)}for(k=0;k<x;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=x;k<2*x;k++)b[k]=0;return new i(b,0)};function B(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function v(I,x){this.g=I,this.h=x}function R(I,x){if(p(x))throw Error("division by zero");if(p(I))return new v(h,h);if(C(I))return x=R(_(I),x),new v(_(x.g),_(x.h));if(C(x))return x=R(I,_(x)),new v(_(x.g),x.h);if(30<I.g.length){if(C(I)||C(x))throw Error("slowDivide_ only works with positive integers.");for(var b=f,k=x;0>=k.l(I);)b=Q(b),k=Q(k);var U=N(b,1),D=N(k,1);for(k=N(k,2),b=N(b,2);!p(k);){var T=D.add(k);0>=T.l(I)&&(U=U.add(b),D=T),k=N(k,1),b=N(b,1)}return x=y(I,U.j(x)),new v(U,x)}for(U=h;0<=I.l(x);){for(b=Math.max(1,Math.floor(I.m()/x.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(b),T=D.j(x);C(T)||0<T.l(I);)b-=k,D=c(b),T=D.j(x);p(D)&&(D=f),U=U.add(D),I=y(I,T)}return new v(U,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0;k<x;k++)b[k]=this.i(k)&I.i(k);return new i(b,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0;k<x;k++)b[k]=this.i(k)|I.i(k);return new i(b,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0;k<x;k++)b[k]=this.i(k)^I.i(k);return new i(b,this.h^I.h)};function Q(I){for(var x=I.g.length+1,b=[],k=0;k<x;k++)b[k]=I.i(k)<<1|I.i(k-1)>>>31;return new i(b,I.h)}function N(I,x){var b=x>>5;x%=32;for(var k=I.g.length-b,U=[],D=0;D<k;D++)U[D]=0<x?I.i(D+b)>>>x|I.i(D+b+1)<<32-x:I.i(D+b);return new i(U,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HT=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Pi=i}).apply(typeof hC<"u"?hC:typeof self<"u"?self:typeof window<"u"?window:{});var gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KT,Dl,GT,sh,h0,zT,WT,$T;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,m){return u==Array.prototype||u==Object.prototype||(u[g]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gd=="object"&&gd];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var m=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var j=u[E];if(!(j in m))break e;m=m[j]}u=u[u.length-1],E=m[u],g=g(E),g!=E&&g!=null&&e(m,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var m=0,E=!1,j={next:function(){if(!E&&m<u.length){var G=m++;return{value:g(G,u[G]),done:!1}}return E=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,m){return u.call.apply(u.bind,arguments)}function h(u,g,m){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,E),u.apply(g,j)}}return function(){return u.apply(g,arguments)}}function f(u,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function p(u,g){function m(){}m.prototype=g.prototype,u.aa=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(E,j,G){for(var oe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)oe[ct-2]=arguments[ct];return g.prototype[j].apply(E,oe)}}function C(u){const g=u.length;if(0<g){const m=Array(g);for(let E=0;E<g;E++)m[E]=u[E];return m}return[]}function _(u,g){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(a(E)){const j=u.length||0,G=E.length||0;u.length=j+G;for(let oe=0;oe<G;oe++)u[j+oe]=E[oe]}else u.push(E)}}class y{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function B(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var Q=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function N(u,g,m){for(const E in u)g.call(m,u[E],E,u)}function I(u,g){for(const m in u)g.call(void 0,u[m],m,u)}function x(u){const g={};for(const m in u)g[m]=u[m];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,g){let m,E;for(let j=1;j<arguments.length;j++){E=arguments[j];for(m in E)u[m]=E[m];for(let G=0;G<b.length;G++)m=b[G],Object.prototype.hasOwnProperty.call(E,m)&&(u[m]=E[m])}}function U(u){var g=1;u=u.split(":");const m=[];for(;0<g&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function D(u){o.setTimeout(()=>{throw u},0)}function T(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ee{constructor(){this.h=this.g=null}add(g,m){const E=$e.get();E.set(g,m),this.h?this.h.next=E:this.g=E,this.h=E}}var $e=new y(()=>new Oe,u=>u.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,z=!1,F=new Ee,L=()=>{const u=o.Promise.resolve(void 0);V=()=>{u.then(H)}};var H=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(m){D(m)}var g=$e;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}z=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};o.addEventListener("test",m,g),o.removeEventListener("test",m,g)}catch{}return u}();function fe(u,g){if(q.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(Q){e:{try{R(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&fe.aa.h.call(this)}}p(fe,q);var Ue={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function ze(u,g,m,E,j){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!E,this.ha=j,this.key=++Ne,this.da=this.fa=!1}function Se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qe(u){this.src=u,this.g={},this.h=0}Qe.prototype.add=function(u,g,m,E,j){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var oe=be(u,g,E,j);return-1<oe?(g=u[oe],m||(g.fa=!1)):(g=new ze(g,this.src,G,!!E,j),g.fa=m,u.push(g)),g};function De(u,g){var m=g.type;if(m in u.g){var E=u.g[m],j=Array.prototype.indexOf.call(E,g,void 0),G;(G=0<=j)&&Array.prototype.splice.call(E,j,1),G&&(Se(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function be(u,g,m,E){for(var j=0;j<u.length;++j){var G=u[j];if(!G.da&&G.listener==g&&G.capture==!!m&&G.ha==E)return j}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),tt={};function qe(u,g,m,E,j){if(Array.isArray(g)){for(var G=0;G<g.length;G++)qe(u,g[G],m,E,j);return null}return m=me(m),u&&u[te]?u.K(g,m,c(E)?!!E.capture:!1,j):nn(u,g,m,!1,E,j)}function nn(u,g,m,E,j,G){if(!g)throw Error("Invalid event type");var oe=c(j)?!!j.capture:!!j,ct=J(u);if(ct||(u[ke]=ct=new Qe(u)),m=ct.add(g,m,E,oe,G),m.proxy)return m;if(E=rt(),m.proxy=E,E.src=u,E.listener=m,u.addEventListener)se||(j=oe),j===void 0&&(j=!1),u.addEventListener(g.toString(),E,j);else if(u.attachEvent)u.attachEvent(rn(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function rt(){function u(m){return g.call(u.src,u.listener,m)}const g=O;return u}function dn(u,g,m,E,j){if(Array.isArray(g))for(var G=0;G<g.length;G++)dn(u,g[G],m,E,j);else E=c(E)?!!E.capture:!!E,m=me(m),u&&u[te]?(u=u.i,g=String(g).toString(),g in u.g&&(G=u.g[g],m=be(G,m,E,j),-1<m&&(Se(G[m]),Array.prototype.splice.call(G,m,1),G.length==0&&(delete u.g[g],u.h--)))):u&&(u=J(u))&&(g=u.g[g.toString()],u=-1,g&&(u=be(g,m,E,j)),(m=-1<u?g[u]:null)&&Nn(m))}function Nn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[te])De(g.i,u);else{var m=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(m,E,u.capture):g.detachEvent?g.detachEvent(rn(m),E):g.addListener&&g.removeListener&&g.removeListener(E),(m=J(g))?(De(m,u),m.h==0&&(m.src=null,g[ke]=null)):Se(u)}}}function rn(u){return u in tt?tt[u]:tt[u]="on"+u}function O(u,g){if(u.da)u=!0;else{g=new fe(g,this);var m=u.listener,E=u.ha||u.src;u.fa&&Nn(u),u=m.call(E,g)}return u}function J(u){return u=u[ke],u instanceof Qe?u:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(u){return typeof u=="function"?u:(u[re]||(u[re]=function(g){return u.handleEvent(g)}),u[re])}function we(){$.call(this),this.i=new Qe(this),this.M=this,this.F=null}p(we,$),we.prototype[te]=!0,we.prototype.removeEventListener=function(u,g,m,E){dn(this,u,g,m,E)};function he(u,g){var m,E=u.F;if(E)for(m=[];E;E=E.F)m.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new q(g,u);else if(g instanceof q)g.target=g.target||u;else{var j=g;g=new q(E,u),k(g,j)}if(j=!0,m)for(var G=m.length-1;0<=G;G--){var oe=g.g=m[G];j=ie(oe,E,!0,g)&&j}if(oe=g.g=u,j=ie(oe,E,!0,g)&&j,j=ie(oe,E,!1,g)&&j,m)for(G=0;G<m.length;G++)oe=g.g=m[G],j=ie(oe,E,!1,g)&&j}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var m=u.g[g],E=0;E<m.length;E++)Se(m[E]);delete u.g[g],u.h--}}this.F=null},we.prototype.K=function(u,g,m,E){return this.i.add(String(u),g,!1,m,E)},we.prototype.L=function(u,g,m,E){return this.i.add(String(u),g,!0,m,E)};function ie(u,g,m,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,G=0;G<g.length;++G){var oe=g[G];if(oe&&!oe.da&&oe.capture==m){var ct=oe.listener,hn=oe.ha||oe.src;oe.fa&&De(u.i,oe),j=ct.call(hn,E)!==!1&&j}}return j&&!E.defaultPrevented}function Te(u,g,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Ce(u){u.g=Te(()=>{u.g=null,u.i&&(u.i=!1,Ce(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class xe extends ${constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(u){$.call(this),this.h=u,this.g={}}p(je,$);var st=[];function Ye(u){N(u.g,function(g,m){this.g.hasOwnProperty(m)&&Nn(g)},u),u.g={}}je.prototype.N=function(){je.aa.N.call(this),Ye(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=o.JSON.stringify,qr=o.JSON.parse,Sr=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Qr(){}Qr.prototype.h=null;function Rr(u){return u.h||(u.h=u.i())}function Dt(){}var Cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pn(){q.call(this,"d")}p(Pn,q);function P(){q.call(this,"c")}p(P,q);var Z={},ye=null;function Ae(){return ye=ye||new we}Z.La="serverreachability";function ae(u){q.call(this,Z.La,u)}p(ae,q);function ge(u){const g=Ae();he(g,new ae(g))}Z.STAT_EVENT="statevent";function At(u,g){q.call(this,Z.STAT_EVENT,u),this.stat=g}p(At,q);function Je(u){const g=Ae();he(g,new At(g,u))}Z.Ma="timingevent";function qt(u,g){q.call(this,Z.Ma,u),this.size=g}p(qt,q);function Nr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function Yy(u,g,m,E,j,G){u.info(function(){if(u.g)if(G)for(var oe="",ct=G.split("&"),hn=0;hn<ct.length;hn++){var Ze=ct[hn].split("=");if(1<Ze.length){var _n=Ze[0];Ze=Ze[1];var In=_n.split("_");oe=2<=In.length&&In[1]=="type"?oe+(_n+"="+Ze+"&"):oe+(_n+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+E+") [attempt "+j+"]: "+g+`
`+m+`
`+oe})}function Lg(u,g,m,E,j,G,oe){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+j+"]: "+g+`
`+m+`
`+G+" "+oe})}function eA(u,g,m,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ES(u,m)+(E?" "+E:"")})}function ys(u,g){u.info(function(){return"TIMEOUT: "+g})}sn.prototype.info=function(){};function ES(u,g){if(!u.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var E=m[u];if(!(2>E.length)){var j=E[1];if(Array.isArray(j)&&!(1>j.length)){var G=j[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<j.length;oe++)j[oe]=""}}}}return Le(m)}catch{return g}}var Lu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Og;function Ou(){}p(Ou,Qr),Ou.prototype.g=function(){return new XMLHttpRequest},Ou.prototype.i=function(){return{}},Og=new Ou;function tA(u,g,m,E){this.j=u,this.i=g,this.l=m,this.R=E||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eB}function eB(){this.i=null,this.g="",this.h=!1}var tB={},jg={};function Mg(u,g,m){u.L=1,u.v=Hu(Bs(g)),u.m=m,u.P=!0,nB(u,null)}function nB(u,g){u.F=Date.now(),ju(u),u.A=Bs(u.v);var m=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),pB(m.i,"t",E),u.C=0,m=u.j.J,u.h=new eB,u.g=RB(u.j,m?g:null,!u.m),0<u.O&&(u.M=new xe(f(u.Y,u,u.g),u.O)),g=u.U,m=u.g,E=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(st[0]=j.toString()),j=st);for(var G=0;G<j.length;G++){var oe=qe(m,j[G],E||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ge(),Yy(u.i,u.u,u.A,u.l,u.R,u.m)}tA.prototype.ca=function(u){u=u.target;const g=this.M;g&&xs(u)==3?g.j():this.Y(u)},tA.prototype.Y=function(u){try{if(u==this.g)e:{const In=xs(this.g);var g=this.g.Ba();const vo=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||CB(this.g)))){this.J||In!=4||g==7||(g==8||0>=vo?ge(3):ge(2)),Vg(this);var m=this.g.Z();this.X=m;t:if(rB(this)){var E=CB(this.g);u="";var j=E.length,G=xs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),sl(this);var oe="";break t}this.h.i=new o.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(G&&g==j-1)});E.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=m==200,Lg(this.i,this.u,this.A,this.l,this.R,In,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,hn=this.g;if((ct=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ct)){var Ze=ct;break t}}Ze=null}if(m=Ze)eA(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hg(this,m);else{this.o=!1,this.s=3,Je(12),ui(this),sl(this);break e}}if(this.P){m=!0;let Pr;for(;!this.J&&this.C<oe.length;)if(Pr=bS(this,oe),Pr==jg){In==4&&(this.s=4,Je(14),m=!1),eA(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==tB){this.s=4,Je(15),eA(this.i,this.l,oe,"[Invalid Chunk]"),m=!1;break}else eA(this.i,this.l,Pr,null),Hg(this,Pr);if(rB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||oe.length!=0||this.h.h||(this.s=1,Je(16),m=!1),this.o=this.o&&m,!m)eA(this.i,this.l,oe,"[Invalid Chunked Response]"),ui(this),sl(this);else if(0<oe.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),qg(_n),_n.M=!0,Je(11))}}else eA(this.i,this.l,oe,null),Hg(this,oe);In==4&&ui(this),this.o&&!this.J&&(In==4?UB(this.j,this):(this.o=!1,ju(this)))}else KS(this.g),m==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),ui(this),sl(this)}}}catch{}finally{}};function rB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function bS(u,g){var m=u.C,E=g.indexOf(`
`,m);return E==-1?jg:(m=Number(g.substring(m,E)),isNaN(m)?tB:(E+=1,E+m>g.length?jg:(g=g.slice(E,E+m),u.C=E+m,g)))}tA.prototype.cancel=function(){this.J=!0,ui(this)};function ju(u){u.S=Date.now()+u.I,sB(u,u.I)}function sB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Nr(f(u.ba,u),g)}function Vg(u){u.B&&(o.clearTimeout(u.B),u.B=null)}tA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ys(this.i,this.A),this.L!=2&&(ge(),Je(17)),ui(this),this.s=2,sl(this)):sB(this,this.S-u)};function sl(u){u.j.G==0||u.J||UB(u.j,u)}function ui(u){Vg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Ye(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Hg(u,g){try{var m=u.j;if(m.G!=0&&(m.g==u||Kg(m.h,u))){if(!u.K&&Kg(m.h,u)&&m.G==3){try{var E=m.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var j=E;if(j[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)qu(m),Wu(m);else break e;$g(m),Je(18)}}else m.za=j[1],0<m.za-m.T&&37500>j[2]&&m.F&&m.v==0&&!m.C&&(m.C=Nr(f(m.Za,m),6e3));if(1>=oB(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else hi(m,11)}else if((u.K||m.g==u)&&qu(m),!B(g))for(j=m.Da.g.parse(g),g=0;g<j.length;g++){let Ze=j[g];if(m.T=Ze[0],Ze=Ze[1],m.G==2)if(Ze[0]=="c"){m.K=Ze[1],m.ia=Ze[2];const _n=Ze[3];_n!=null&&(m.la=_n,m.j.info("VER="+m.la));const In=Ze[4];In!=null&&(m.Aa=In,m.j.info("SVER="+m.Aa));const vo=Ze[5];vo!=null&&typeof vo=="number"&&0<vo&&(E=1.5*vo,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Pr=u.g;if(Pr){const Xu=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var G=E.h;G.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Gg(G,G.h),G.h=null))}if(E.D){const Jg=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jg&&(E.ya=Jg,ft(E.I,E.D,Jg))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var oe=u;if(E.qa=QB(E,E.J?E.ia:null,E.W),oe.K){aB(E.h,oe);var ct=oe,hn=E.L;hn&&(ct.I=hn),ct.B&&(Vg(ct),ju(ct)),E.g=oe}else TB(E);0<m.i.length&&$u(m)}else Ze[0]!="stop"&&Ze[0]!="close"||hi(m,7);else m.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?hi(m,7):Wg(m):Ze[0]!="noop"&&m.l&&m.l.ta(Ze),m.v=0)}}ge(4)}catch{}}var TS=class{constructor(u,g){this.g=u,this.map=g}};function AB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function oB(u){return u.h?1:u.g?u.g.size:0}function Kg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Gg(u,g){u.g?u.g.add(g):u.h=g}function aB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}AB.prototype.cancel=function(){if(this.i=lB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function lB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const m of u.g.values())g=g.concat(m.D);return g}return C(u.i)}function FS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],m=u.length,E=0;E<m;E++)g.push(u[E]);return g}g=[],m=0;for(E in u)g[m++]=u[E];return g}function US(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var m=0;m<u;m++)g.push(m);return g}g=[],m=0;for(const E in u)g[m++]=E;return g}}}function cB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var m=US(u),E=FS(u),j=E.length,G=0;G<j;G++)g.call(void 0,E[G],m&&m[G],u)}var uB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kS(u,g){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var E=u[m].indexOf("="),j=null;if(0<=E){var G=u[m].substring(0,E);j=u[m].substring(E+1)}else G=u[m];g(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function di(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof di){this.h=u.h,Mu(this,u.j),this.o=u.o,this.g=u.g,Vu(this,u.s),this.l=u.l;var g=u.i,m=new ol;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),dB(this,m),this.m=u.m}else u&&(g=String(u).match(uB))?(this.h=!1,Mu(this,g[1]||"",!0),this.o=Al(g[2]||""),this.g=Al(g[3]||"",!0),Vu(this,g[4]),this.l=Al(g[5]||"",!0),dB(this,g[6]||"",!0),this.m=Al(g[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}di.prototype.toString=function(){var u=[],g=this.j;g&&u.push(il(g,hB,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(il(g,hB,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(il(m,m.charAt(0)=="/"?RS:QS,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",il(m,PS)),u.join("")};function Bs(u){return new di(u)}function Mu(u,g,m){u.j=m?Al(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Vu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function dB(u,g,m){g instanceof ol?(u.i=g,DS(u.i,u.h)):(m||(g=il(g,NS)),u.i=new ol(g,u.h))}function ft(u,g,m){u.i.set(g,m)}function Hu(u){return ft(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Al(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function il(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,SS),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function SS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var hB=/[#\/\?@]/g,QS=/[#\?:]/g,RS=/[#\?]/g,NS=/[#\?@]/g,PS=/#/g;function ol(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function nA(u){u.g||(u.g=new Map,u.h=0,u.i&&kS(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}t=ol.prototype,t.add=function(u,g){nA(this),this.i=null,u=mo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function fB(u,g){nA(u),g=mo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function gB(u,g){return nA(u),g=mo(u,g),u.g.has(g)}t.forEach=function(u,g){nA(this),this.g.forEach(function(m,E){m.forEach(function(j){u.call(g,j,E,this)},this)},this)},t.na=function(){nA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let E=0;E<g.length;E++){const j=u[E];for(let G=0;G<j.length;G++)m.push(g[E])}return m},t.V=function(u){nA(this);let g=[];if(typeof u=="string")gB(this,u)&&(g=g.concat(this.g.get(mo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)g=g.concat(u[m])}return g},t.set=function(u,g){return nA(this),this.i=null,u=mo(this,u),gB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function pB(u,g,m){fB(u,g),0<m.length&&(u.i=null,u.g.set(mo(u,g),C(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var E=g[m];const G=encodeURIComponent(String(E)),oe=this.V(E);for(E=0;E<oe.length;E++){var j=G;oe[E]!==""&&(j+="="+encodeURIComponent(String(oe[E]))),u.push(j)}}return this.i=u.join("&")};function mo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function DS(u,g){g&&!u.j&&(nA(u),u.i=null,u.g.forEach(function(m,E){var j=E.toLowerCase();E!=j&&(fB(this,E),pB(this,j,m))},u)),u.j=g}function LS(u,g){const m=new sn;if(o.Image){const E=new Image;E.onload=w(rA,m,"TestLoadImage: loaded",!0,g,E),E.onerror=w(rA,m,"TestLoadImage: error",!1,g,E),E.onabort=w(rA,m,"TestLoadImage: abort",!1,g,E),E.ontimeout=w(rA,m,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function OS(u,g){const m=new sn,E=new AbortController,j=setTimeout(()=>{E.abort(),rA(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(G=>{clearTimeout(j),G.ok?rA(m,"TestPingServer: ok",!0,g):rA(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),rA(m,"TestPingServer: error",!1,g)})}function rA(u,g,m,E,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),E(m)}catch{}}function jS(){this.g=new Sr}function MS(u,g,m){const E=m||"";try{cB(u,function(j,G){let oe=j;c(j)&&(oe=Le(j)),g.push(E+G+"="+encodeURIComponent(oe))})}catch(j){throw g.push(E+"type="+encodeURIComponent("_badmap")),j}}function Ku(u){this.l=u.Ub||null,this.j=u.eb||!1}p(Ku,Qr),Ku.prototype.g=function(){return new Gu(this.l,this.j)},Ku.prototype.i=function(u){return function(){return u}}({});function Gu(u,g){we.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Gu,we),t=Gu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,ll(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,al(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ll(this)),this.g&&(this.readyState=3,ll(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function mB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?al(this):ll(this),this.readyState==3&&mB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,al(this))},t.Qa=function(u){this.g&&(this.response=u,al(this))},t.ga=function(){this.g&&al(this)};function al(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ll(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function ll(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function wB(u){let g="";return N(u,function(m,E){g+=E,g+=":",g+=m,g+=`\r
`}),g}function zg(u,g,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=wB(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ft(u,g,m))}function Ut(u){we.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ut,we);var VS=/^https?$/i,HS=["POST","PUT"];t=Ut.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Og.g(),this.v=this.o?Rr(this.o):Rr(Og),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(G){vB(this,G);return}if(u=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var j in E)m.set(j,E[j]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const G of E.keys())m.set(G,E.get(G));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(G=>G.toLowerCase()=="content-type"),j=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(HS,g,void 0))||E||j||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of m)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xB(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){vB(this,G)}};function vB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,yB(u),zu(u)}function yB(u){u.A||(u.A=!0,he(u,"complete"),he(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,he(this,"complete"),he(this,"abort"),zu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zu(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?BB(this):this.bb())},t.bb=function(){BB(this)};function BB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||xs(u)!=4||u.Z()!=2)){if(u.u&&xs(u)==4)Te(u.Ea,0,u);else if(he(u,"readystatechange"),xs(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var E;if(E=oe===0){var j=String(u.D).match(uB)[1]||null;!j&&o.self&&o.self.location&&(j=o.self.location.protocol.slice(0,-1)),E=!VS.test(j?j.toLowerCase():"")}m=E}if(m)he(u,"complete"),he(u,"success");else{u.m=6;try{var G=2<xs(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",yB(u)}}finally{zu(u)}}}}function zu(u,g){if(u.g){xB(u);const m=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||he(u,"ready");try{m.onreadystatechange=E}catch{}}}function xB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xs(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),qr(g)}};function CB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function KS(u){const g={};u=(u.g&&2<=xs(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(B(u[E]))continue;var m=U(u[E]);const j=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const G=g[j]||[];g[j]=G,G.push(m)}I(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function _B(u){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cl("baseRetryDelayMs",5e3,u),this.cb=cl("retryDelaySeedMs",1e4,u),this.Wa=cl("forwardChannelMaxRetries",2,u),this.wa=cl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new AB(u&&u.concurrentRequestLimit),this.Da=new jS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_B.prototype,t.la=8,t.G=1,t.connect=function(u,g,m,E){Je(0),this.W=u,this.H=g||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=QB(this,null,this.W),$u(this)};function Wg(u){if(IB(u),u.G==3){var g=u.U++,m=Bs(u.I);if(ft(m,"SID",u.K),ft(m,"RID",g),ft(m,"TYPE","terminate"),ul(u,m),g=new tA(u,u.j,g),g.L=2,g.v=Hu(Bs(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&o.Image&&(new Image().src=g.v,m=!0),m||(g.g=RB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ju(g)}SB(u)}function Wu(u){u.g&&(qg(u),u.g.cancel(),u.g=null)}function IB(u){Wu(u),u.u&&(o.clearTimeout(u.u),u.u=null),qu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function $u(u){if(!iB(u.h)&&!u.s){u.s=!0;var g=u.Ga;V||L(),z||(V(),z=!0),F.add(g,u),u.B=0}}function GS(u,g){return oB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Nr(f(u.Ga,u,g),kB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new tA(this,this.j,u);let G=this.o;if(this.S&&(G?(G=x(G),k(G,this.S)):G=this.S),this.m!==null||this.O||(j.H=G,G=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=bB(this,j,g),m=Bs(this.I),ft(m,"RID",u),ft(m,"CVER",22),this.D&&ft(m,"X-HTTP-Session-Id",this.D),ul(this,m),G&&(this.O?g="headers="+encodeURIComponent(String(wB(G)))+"&"+g:this.m&&zg(m,this.m,G)),Gg(this.h,j),this.Ua&&ft(m,"TYPE","init"),this.P?(ft(m,"$req",g),ft(m,"SID","null"),j.T=!0,Mg(j,m,null)):Mg(j,m,g),this.G=2}}else this.G==3&&(u?EB(this,u):this.i.length==0||iB(this.h)||EB(this))};function EB(u,g){var m;g?m=g.l:m=u.U++;const E=Bs(u.I);ft(E,"SID",u.K),ft(E,"RID",m),ft(E,"AID",u.T),ul(u,E),u.m&&u.o&&zg(E,u.m,u.o),m=new tA(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),g&&(u.i=g.D.concat(u.i)),g=bB(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Gg(u.h,m),Mg(m,E,g)}function ul(u,g){u.H&&N(u.H,function(m,E){ft(g,E,m)}),u.l&&cB({},function(m,E){ft(g,E,m)})}function bB(u,g,m){m=Math.min(u.i.length,m);var E=u.l?f(u.l.Na,u.l,u):null;e:{var j=u.i;let G=-1;for(;;){const oe=["count="+m];G==-1?0<m?(G=j[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let ct=!0;for(let hn=0;hn<m;hn++){let Ze=j[hn].g;const _n=j[hn].map;if(Ze-=G,0>Ze)G=Math.max(0,j[hn].g-100),ct=!1;else try{MS(_n,oe,"req"+Ze+"_")}catch{E&&E(_n)}}if(ct){E=oe.join("&");break e}}}return u=u.i.splice(0,m),g.D=u,E}function TB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;V||L(),z||(V(),z=!0),F.add(g,u),u.v=0}}function $g(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Nr(f(u.Fa,u),kB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,FB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Nr(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Wu(this),FB(this))};function qg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function FB(u){u.g=new tA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Bs(u.qa);ft(g,"RID","rpc"),ft(g,"SID",u.K),ft(g,"AID",u.T),ft(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&ft(g,"TO",u.ja),ft(g,"TYPE","xmlhttp"),ul(u,g),u.m&&u.o&&zg(g,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Hu(Bs(g)),m.m=null,m.P=!0,nB(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Wu(this),$g(this),Je(19))};function qu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function UB(u,g){var m=null;if(u.g==g){qu(u),qg(u),u.g=null;var E=2}else if(Kg(u.h,g))m=g.D,aB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var j=u.B;E=Ae(),he(E,new qt(E,m)),$u(u)}else TB(u);else if(j=g.s,j==3||j==0&&0<g.X||!(E==1&&GS(u,g)||E==2&&$g(u)))switch(m&&0<m.length&&(g=u.h,g.i=g.i.concat(m)),j){case 1:hi(u,5);break;case 4:hi(u,10);break;case 3:hi(u,6);break;default:hi(u,2)}}}function kB(u,g){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*g}function hi(u,g){if(u.j.info("Error code "+g),g==2){var m=f(u.fb,u),E=u.Xa;const j=!E;E=new di(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Mu(E,"https"),Hu(E),j?LS(E.toString(),m):OS(E.toString(),m)}else Je(2);u.G=0,u.l&&u.l.sa(g),SB(u),IB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function SB(u){if(u.G=0,u.ka=[],u.l){const g=lB(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function QB(u,g,m){var E=m instanceof di?Bs(m):new di(m);if(E.g!="")g&&(E.g=g+"."+E.g),Vu(E,E.s);else{var j=o.location;E=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var G=new di(null);E&&Mu(G,E),g&&(G.g=g),j&&Vu(G,j),m&&(G.l=m),E=G}return m=u.D,g=u.ya,m&&g&&ft(E,m,g),ft(E,"VER",u.la),ul(u,E),E}function RB(u,g,m){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ut(new Ku({eb:m})):new Ut(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function NB(){}t=NB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ju(){}Ju.prototype.g=function(u,g){return new Ar(u,g)};function Ar(u,g){we.call(this),this.g=new _B(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!B(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!B(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new wo(this)}p(Ar,we),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){Wg(this.g)},Ar.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Le(u),u=m);g.i.push(new TS(g.Ya++,u)),g.G==3&&$u(g)},Ar.prototype.N=function(){this.g.l=null,delete this.j,Wg(this.g),delete this.g,Ar.aa.N.call(this)};function PB(u){Pn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const m in g){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}p(PB,Pn);function DB(){P.call(this),this.status=1}p(DB,P);function wo(u){this.g=u}p(wo,NB),wo.prototype.ua=function(){he(this.g,"a")},wo.prototype.ta=function(u){he(this.g,new PB(u))},wo.prototype.sa=function(u){he(this.g,new DB)},wo.prototype.ra=function(){he(this.g,"b")},Ju.prototype.createWebChannel=Ju.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,$T=function(){return new Ju},WT=function(){return Ae()},zT=Z,h0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lu.NO_ERROR=0,Lu.TIMEOUT=8,Lu.HTTP_ERROR=6,sh=Lu,Zy.COMPLETE="complete",GT=Zy,Dt.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",we.prototype.listen=we.prototype.K,Dl=Dt,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,KT=Ut}).apply(typeof gd<"u"?gd:typeof self<"u"?self:typeof window<"u"?window:{});const fC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new zf("@firebase/firestore");function So(){return zA.logLevel}function mD(t){zA.setLogLevel(t)}function Y(t,...e){if(zA.logLevel<=Me.DEBUG){const n=e.map(wv);zA.debug(`Firestore (${Ha}): ${t}`,...n)}}function Mt(t,...e){if(zA.logLevel<=Me.ERROR){const n=e.map(wv);zA.error(`Firestore (${Ha}): ${t}`,...n)}}function fs(t,...e){if(zA.logLevel<=Me.WARN){const n=e.map(wv);zA.warn(`Firestore (${Ha}): ${t}`,...n)}}function wv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: `+t;throw Mt(e),new Error(e)}function _e(t,e){t||ve()}function wD(t,e){t||ve()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class yD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BD{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let A=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new yn,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const a=A;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},o=a=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new yn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new qT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new ln(e)}}class xD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _D{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ID{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=A=>{A.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,Y("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>r(A))};const s=A=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new _D(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ED(40);for(let A=0;A<s.length;++A)r.length<20&&s[A]<n&&(r+=e.charAt(s[A]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function xa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function XT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ct(0,0))}static max(){return new Ie(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const A=e.get(s),i=n.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ke extends Vc{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const bD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Vc{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return bD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const A=()=>{if(r.length===0)throw new X(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new X(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new X(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(A(),s++)}if(A(),i)throw new X(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ke.fromString(e))}static fromName(e){return new le(Ke.fromString(e).popFirst(5))}static empty(){return new le(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function f0(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}Jh.UNKNOWN_ID=-1;class Ah{constructor(e,n){this.fieldPath=e,this.kind=n}}class Hc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hc(0,pr.min())}}function YT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new pr(s,le.empty(),e)}function ZT(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(Ie.min(),le.empty(),-1)}static max(){return new pr(Ie.max(),le.empty(),-1)}}function vv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==e1)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(r,s)},this.catchCallback=A=>{this.wrapFailure(n,A).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,A=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++A,i&&A===s&&n()},a=>r(a))}),i=!0,A===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,A)=>{r.push(n.call(this,s,A))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const A=e.length,i=new Array(A);let o=0;for(let a=0;a<A;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===A&&r(i)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const A=()=>{e()===!0?n().next(()=>{A()},s):r()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ac(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=yv(r.target.error);this.V.reject(new Ac(e,s))}}static open(e,n,r,s){try{return new Wf(n,e.transaction(s,r))}catch(A){throw new Ac(n,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Y("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new FD(n)}}class us{constructor(e,n,r){this.name=e,this.version=n,this.p=r,us.S(Ft())===12.2&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Y("SimpleDb","Removing database:",e),yi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lc())return!1;if(us.v())return!0;const e=Ft(),n=us.S(e),r=0<n&&n<10,s=n1(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Y("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;n(i)},s.onblocked=()=>{r(new Ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?r(new X(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new X(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new Ac(e,i))},s.onupgradeneeded=A=>{Y("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{Y("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const A=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=Wf.open(this.db,e,A?"readonly":"readwrite",r),a=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(Y("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function n1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class TD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yi(this.B.delete())}}class Ac extends X{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function oi(t){return t.name==="IndexedDbTransactionError"}class FD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yi(r)}add(e){return Y("SimpleDb","ADD",this.store.name,e,e),yi(this.store.add(e))}get(e){return yi(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Y("SimpleDb","DELETE",this.store.name,e),yi(this.store.delete(e))}count(){return Y("SimpleDb","COUNT",this.store.name),yi(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(r.range);return new M((i,o)=>{A.onerror=a=>{o(a.target.error)},A.onsuccess=a=>{i(a.target.result)}})}{const A=this.cursor(r),i=[];return this.W(A,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,A)=>{r.onerror=i=>{A(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}j(e,n){Y("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(A,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=A=>{const i=yv(A.target.error);s(i)},n.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new M((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void s();const a=new TD(o),c=n(o.primaryKey,o.value,a);if(c instanceof M){const d=c.catch(h=>(a.done(),M.reject(h)));r.push(d)}a.isDone?s():a.K===null?o.continue():o.continue(a.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function yi(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=yv(r.target.error);n(s)}})}let gC=!1;function yv(t){const e=us.S(Ft());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gC||(gC=!0,setTimeout(()=>{throw r},0)),r}}return t}class UD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Y("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Y("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){oi(n)?Y("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ii(n)}await this.X(6e4)})}}class kD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,A=!0;return M.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return Y("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(o=>{s-=o,r.add(i)});A=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(o=>(Y("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((s,A)=>{const i=ZT(A);vv(i,r)>0&&(r=i)}),new pr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zn.oe=-1;function pu(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function r1(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pC(e)),e=SD(t.get(n),e);return pC(e)}function SD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const A=t.charAt(s);switch(A){case"\0":n+="";break;case"":n+="";break;default:n+=A}}return n}function pC(t){return t+""}function is(t){const e=t.length;if(_e(e>=2),e===2)return _e(t.charAt(0)===""&&t.charAt(1)===""),Ke.emptyPath();const n=e-2,r=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>n)&&ve(),t.charAt(i+1)){case"":const o=t.substring(A,i);let a;s.length===0?a=o:(s+=o,a=s,s=""),r.push(a);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:ve()}A=i+2}return new Ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t,e){return[t,Hn(e)]}function s1(t,e,n){return[t,Hn(e),n]}const QD={},RD=["prefixPath","collectionGroup","readTime","documentId"],ND=["prefixPath","collectionGroup","documentId"],PD=["collectionGroup","readTime","prefixPath","documentId"],DD=["canonicalId","targetId"],LD=["targetId","path"],OD=["path","targetId"],jD=["collectionId","parent"],MD=["indexId","uid"],VD=["uid","sequenceNumber"],HD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KD=["indexId","uid","orderedDocumentKey"],GD=["userId","collectionPath","documentId"],zD=["userId","collectionPath","largestBatchId"],WD=["userId","collectionGroup","largestBatchId"],A1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$D=[...A1,"documentOverlays"],i1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],o1=i1,Bv=[...o1,"indexConfiguration","indexState","indexEntries"],qD=Bv,JD=[...Bv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends t1{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function tn(t,e){const n=ue(t);return us.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=n?r(e.key,n):1,n&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,r,s,A){this.key=e,this.value=n,this.color=r??pn.RED,this.left=s??pn.EMPTY,this.right=A??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,A){return new pn(e??this.key,n??this.value,r??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const A=r(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,n,r),null):A===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,s,A){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vC(this.data.getIterator())}getIteratorFrom(e){return new vC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class vC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new er([])}unionWith(e){let n=new lt(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new l1("Invalid base64 string: "+A):A}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const YD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(t){if(_e(!!t),typeof t=="string"){let e=0;const n=YD.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function WA(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xv(t){const e=t.mapValue.fields.__previous_value__;return $f(e)?xv(e):e}function Gc(t){const e=Ms(t.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,s,A,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class $A{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $A("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $A&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oh={nullValue:"NULL_VALUE"};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$f(t)?4:c1(t)?9007199254740991:qf(t)?10:11:ve()}function gs(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gc(t).isEqual(Gc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Ms(s.timestampValue),o=Ms(A.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return WA(s.bytesValue).isEqual(WA(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return vt(s.geoPointValue.latitude)===vt(A.geoPointValue.latitude)&&vt(s.geoPointValue.longitude)===vt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return vt(s.integerValue)===vt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=vt(s.doubleValue),o=vt(A.doubleValue);return i===o?Kc(i)===Kc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},o=A.mapValue.fields||{};if(wC(i)!==wC(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!gs(i[a],o[a])))return!1;return!0}(t,e);default:return ve()}}function zc(t,e){return(t.values||[]).find(n=>gs(n,e))!==void 0}function qA(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(A,i){const o=vt(A.integerValue||A.doubleValue),a=vt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return yC(t.timestampValue,e.timestampValue);case 4:return yC(Gc(t),Gc(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(A,i){const o=WA(A),a=WA(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const o=A.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=Re(o[c],a[c]);if(d!==0)return d}return Re(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const o=Re(vt(A.latitude),vt(i.latitude));return o!==0?o:Re(vt(A.longitude),vt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return BC(t.arrayValue,e.arrayValue);case 10:return function(A,i){var o,a,c,d;const h=A.fields||{},f=i.fields||{},w=(o=h.value)===null||o===void 0?void 0:o.arrayValue,p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,C=Re(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=p==null?void 0:p.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:BC(w,p)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===xA.mapValue&&i===xA.mapValue)return 0;if(A===xA.mapValue)return 1;if(i===xA.mapValue)return-1;const o=A.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Re(a[h],d[h]);if(f!==0)return f;const w=qA(o[a[h]],c[d[h]]);if(w!==0)return w}return Re(a.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function yC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Ms(t),r=Ms(e),s=Re(n.seconds,r.seconds);return s!==0?s:Re(n.nanos,r.nanos)}function BC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const A=qA(n[s],r[s]);if(A)return A}return Re(n.length,r.length)}function Ca(t){return p0(t)}function p0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ms(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return WA(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const A of n.values||[])s?s=!1:r+=",",r+=p0(A);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",A=!0;for(const i of r)A?A=!1:s+=",",s+=`${i}:${p0(n.fields[i])}`;return s+"}"}(t.mapValue):ve()}function Wi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function m0(t){return!!t&&"integerValue"in t}function Wc(t){return!!t&&"arrayValue"in t}function xC(t){return!!t&&"nullValue"in t}function CC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function qf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const u1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function e4(t){return"nullValue"in t?oh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wi($A.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?qf(t)?u1:{mapValue:{}}:ve()}function t4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wi($A.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?u1:"mapValue"in t?qf(t)?{mapValue:{}}:xA:ve()}function _C(t,e){const n=qA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function IC(t,e){const n=qA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=Bt.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=ic(i):s.push(o.lastSegment())});const A=this.getFieldsMap(n);this.applyChanges(A,r,s)}delete(e){const n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ah(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(s,A)=>e[s]=A);for(const s of r)delete e[s]}clone(){return new mn(ic(this.value))}}function d1(t){const e=[];return lo(t.fields,(n,r)=>{const s=new Bt([n]);if(ah(r)){const A=d1(r.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,A,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=A,this.data=i,this.documentState=o}static newInvalidDocument(e){return new pt(e,0,Ie.min(),Ie.min(),Ie.min(),mn.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,Ie.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,Ie.min(),Ie.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,Ie.min(),Ie.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.position=e,this.inclusive=n}}function EC(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?r=le.comparator(le.fromName(i.referenceValue),n.key):r=qA(i,n.data.field(A.field)),A.dir==="desc"&&(r*=-1),r!==0)break}return r}function bC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n="asc"){this.field=e,this.dir=n}}function n4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{}class Ge extends h1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r4(e,n,r):n==="array-contains"?new i4(e,r):n==="in"?new v1(e,r):n==="not-in"?new o4(e,r):n==="array-contains-any"?new a4(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s4(e,r):new A4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qA(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(qA(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends h1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new it(e,n)}matches(e){return _a(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _a(t){return t.op==="and"}function w0(t){return t.op==="or"}function Cv(t){return f1(t)&&_a(t)}function f1(t){for(const e of t.filters)if(e instanceof it)return!1;return!0}function v0(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(Cv(t))return t.filters.map(e=>v0(e)).join(",");{const e=t.filters.map(n=>v0(n)).join(",");return`${t.op}(${e})`}}function g1(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&gs(r.value,s.value)}(t,e):t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((A,i,o)=>A&&g1(i,s.filters[o]),!0):!1}(t,e):void ve()}function p1(t,e){const n=t.filters.concat(e);return it.create(n,t.op)}function m1(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Ca(n.value)}`}(t):t instanceof it?function(n){return n.op.toString()+" {"+n.getFilters().map(m1).join(" ,")+"}"}(t):"Filter"}class r4 extends Ge{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class s4 extends Ge{constructor(e,n){super(e,"in",n),this.keys=w1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A4 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=w1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function w1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class i4 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wc(n)&&zc(n.arrayValue,this.value)}}class v1 extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zc(this.value.arrayValue,n)}}class o4 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!zc(this.value.arrayValue,n)}}class a4 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n=null,r=[],s=[],A=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=A,this.startAt=i,this.endAt=o,this.ue=null}}function y0(t,e=null,n=[],r=[],s=null,A=null,i=null){return new l4(t,e,n,r,s,A,i)}function $i(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>v0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(A){return A.field.canonicalString()+A.dir}(r)).join(","),pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ca(r)).join(",")),e.ue=n}return e.ue}function mu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bC(t.startAt,e.startAt)&&bC(t.endAt,e.endAt)}function Xh(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Yh(t,e){return t.filters.filter(n=>n instanceof Ge&&n.field.isEqual(e))}function TC(t,e,n){let r=oh,s=!0;for(const A of Yh(t,e)){let i=oh,o=!0;switch(A.op){case"<":case"<=":i=e4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,o=!1;break;case"!=":case"not-in":i=oh}_C({value:r,inclusive:s},{value:i,inclusive:o})<0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];_C({value:r,inclusive:s},{value:i,inclusive:n.inclusive})<0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}function FC(t,e,n){let r=xA,s=!0;for(const A of Yh(t,e)){let i=xA,o=!0;switch(A.op){case">=":case">":i=t4(A.value),o=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,o=!1;break;case"!=":case"not-in":i=xA}IC({value:r,inclusive:s},{value:i,inclusive:o})>0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];IC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})>0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,r=[],s=[],A=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=A,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function y1(t,e,n,r,s,A,i,o){return new $s(t,e,n,r,s,A,i,o)}function Ka(t){return new $s(t)}function UC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _v(t){return t.collectionGroup!==null}function Aa(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),n.add(A.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new lt(Bt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(A=>{n.has(A.canonicalString())||A.isKeyField()||e.ce.push(new $c(A,r))}),n.has(Bt.keyField().canonicalString())||e.ce.push(new $c(Bt.keyField(),r))}return e.ce}function Kn(t){const e=ue(t);return e.le||(e.le=c4(e,Aa(t))),e.le}function c4(t,e){if(t.limitType==="F")return y0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new $c(s.field,A)});const n=t.endAt?new JA(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new JA(t.startAt.position,t.startAt.inclusive):null;return y0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function B0(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zh(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wu(t,e){return mu(Kn(t),Kn(e))&&t.limitType===e.limitType}function B1(t){return`${$i(Kn(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>m1(s)).join(", ")}]`),pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ca(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ca(s)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function vu(t,e){return e.isFoundDocument()&&function(r,s){const A=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(A):le.isDocumentKey(r.path)?r.path.isEqual(A):r.path.isImmediateParentOf(A)}(t,e)&&function(r,s){for(const A of Aa(r))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const A of r.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,a){const c=EC(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,Aa(r),s)||r.endAt&&!function(i,o,a){const c=EC(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,Aa(r),s))}(t,e)}function x1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function C1(t){return(e,n)=>{let r=!1;for(const s of Aa(t)){const A=u4(s,e,n);if(A!==0)return A;r=r||s.field.isKeyField()}return 0}}function u4(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(A,i,o){const a=i.data.field(A),c=o.data.field(A);return a!==null&&c!==null?qA(a,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,A]of r)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[s,A]of r)e(s,A)})}isEmpty(){return a1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new ht(le.comparator);function tr(){return d4}const _1=new ht(le.comparator);function Ll(...t){let e=_1;for(const n of t)e=e.insert(n.key,n);return e}function I1(t){let e=_1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return oc()}function E1(){return oc()}function oc(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const h4=new ht(le.comparator),f4=new lt(le.comparator);function Pe(...t){let e=f4;for(const n of t)e=e.add(n);return e}const g4=new lt(Re);function Iv(){return g4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function b1(t){return{integerValue:""+t}}function T1(t,e){return r1(e)?b1(e):Ev(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function p4(t,e,n){return t instanceof Ia?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&$f(A)&&(A=xv(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(n,e):t instanceof qi?U1(t,e):t instanceof Ji?k1(t,e):function(s,A){const i=F1(s,A),o=kC(i)+kC(s.Pe);return m0(i)&&m0(s.Pe)?b1(o):Ev(s.serializer,o)}(t,e)}function m4(t,e,n){return t instanceof qi?U1(t,e):t instanceof Ji?k1(t,e):n}function F1(t,e){return t instanceof Ea?function(r){return m0(r)||function(A){return!!A&&"doubleValue"in A}(r)}(e)?e:{integerValue:0}:null}class Ia extends Jf{}class qi extends Jf{constructor(e){super(),this.elements=e}}function U1(t,e){const n=S1(e);for(const r of t.elements)n.some(s=>gs(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ji extends Jf{constructor(e){super(),this.elements=e}}function k1(t,e){let n=S1(e);for(const r of t.elements)n=n.filter(s=>!gs(s,r));return{arrayValue:{values:n}}}class Ea extends Jf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function kC(t){return vt(t.integerValue||t.doubleValue)}function S1(t){return Wc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.field=e,this.transform=n}}function w4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qi&&s instanceof qi||r instanceof Ji&&s instanceof Ji?xa(r.elements,s.elements,gs):r instanceof Ea&&s instanceof Ea?gs(r.Pe,s.Pe):r instanceof Ia&&s instanceof Ia}(t.transform,e.transform)}class v4{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xf{}function Q1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new za(t.key,xt.none()):new Ga(t.key,t.data,xt.none());{const n=t.data,r=mn.empty();let s=new lt(Bt.comparator);for(let A of e.fields)if(!s.has(A)){let i=n.field(A);i===null&&A.length>1&&(A=A.popLast(),i=n.field(A)),i===null?r.delete(A):r.set(A,i),s=s.add(A)}return new qs(t.key,r,new er(s.toArray()),xt.none())}}function y4(t,e,n){t instanceof Ga?function(s,A,i){const o=s.value.clone(),a=QC(s.fieldTransforms,A,i.transformResults);o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof qs?function(s,A,i){if(!lh(s.precondition,A))return void A.convertToUnknownDocument(i.version);const o=QC(s.fieldTransforms,A,i.transformResults),a=A.data;a.setAll(R1(s)),a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ac(t,e,n,r){return t instanceof Ga?function(A,i,o,a){if(!lh(A.precondition,i))return o;const c=A.value.clone(),d=RC(A.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof qs?function(A,i,o,a){if(!lh(A.precondition,i))return o;const c=RC(A.fieldTransforms,a,i),d=i.data;return d.setAll(R1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(A,i,o){return lh(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function B4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),A=F1(r.transform,s||null);A!=null&&(n===null&&(n=mn.empty()),n.set(r.field,A))}return n||null}function SC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xa(r,s,(A,i)=>w4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ga extends Xf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qs extends Xf{constructor(e,n,r,s,A=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function R1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function QC(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const A=t[s],i=A.transform,o=e.data.field(A.field);r.set(A.field,m4(i,o,n[s]))}return r}function RC(t,e,n){const r=new Map;for(const s of t){const A=s.transform,i=n.data.field(s.field);r.set(s.field,p4(A,i,e))}return r}class za extends Xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bv extends Xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&y4(A,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let o=this.applyToLocalView(i,A.mutatedFields);o=n.has(s.key)?null:o;const a=Q1(i,o);a!==null&&r.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(n,r)=>SC(n,r))&&xa(this.baseMutations,e.baseMutations,(n,r)=>SC(n,r))}}class Fv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return h4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,r[i].version);return new Fv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,We;function N1(t){switch(t){default:return ve();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function P1(t){if(t===void 0)return Mt("GRPC error has no .code"),K.UNKNOWN;switch(t){case Kt.OK:return K.OK;case Kt.CANCELLED:return K.CANCELLED;case Kt.UNKNOWN:return K.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return K.INTERNAL;case Kt.UNAVAILABLE:return K.UNAVAILABLE;case Kt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Kt.NOT_FOUND:return K.NOT_FOUND;case Kt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Kt.ABORTED:return K.ABORTED;case Kt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Kt.DATA_LOSS:return K.DATA_LOSS;default:return ve()}}(We=Kt||(Kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new Pi([4294967295,4294967295],0);function NC(t){const e=D1().encode(t),n=new HT;return n.update(e),new Uint8Array(n.digest())}function PC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([s,A],0)]}class kv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ol(`Invalid padding: ${n}`);if(r<0)throw new Ol(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Pi.fromNumber(r)));return s.compare(C4)===1&&(s=new Pi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=NC(e),[r,s]=PC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);if(!this.de(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new kv(A,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=NC(e),[r,s]=PC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,s,A){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bu(Ie.min(),s,new ht(Re),tr(),Pe())}}class xu{constructor(e,n,r,s,A){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class L1{constructor(e,n){this.targetId=e,this.me=n}}class O1{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class DC{constructor(){this.fe=0,this.ge=OC(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new xu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=OC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _4{constructor(e){this.Le=e,this.Be=new Map,this.ke=tr(),this.qe=LC(),this.Qe=new ht(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const A=s.target;if(Xh(A))if(r===0){const i=new le(A.path);this.Ue(n,i,pt.newNoDocument(i,Ie.min()))}else _e(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:A=0}=n;let i,o;try{i=WA(r).toUint8Array()}catch(a){if(a instanceof l1)return fs("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new kv(i,s,A)}catch(a){return fs(a instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(A=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,A,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((A,i)=>{const o=this.Je(i);if(o){if(A.current&&Xh(o.target)){const a=new le(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,pt.newNoDocument(a,e))}A.be&&(n.set(i,A.ve()),A.Ce())}});let r=Pe();this.qe.forEach((A,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new Bu(e,n,this.Qe,this.ke,r);return this.ke=tr(),this.qe=LC(),this.Qe=new ht(Re),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new DC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new DC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function LC(){return new ht(le.comparator)}function OC(){return new ht(le.comparator)}const I4={asc:"ASCENDING",desc:"DESCENDING"},E4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b4={and:"AND",or:"OR"};class T4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function x0(t,e){return t.useProto3Json||pu(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F4(t,e){return ba(t,e.toTimestamp())}function Vt(t){return _e(!!t),Ie.fromTimestamp(function(n){const r=Ms(n);return new Ct(r.seconds,r.nanos)}(t))}function Sv(t,e){return C0(t,e).canonicalString()}function C0(t,e){const n=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function M1(t){const e=Ke.fromString(t);return _e(X1(e)),e}function qc(t,e){return Sv(t.databaseId,e.path)}function ds(t,e){const n=M1(e);if(n.get(1)!==t.databaseId.projectId)throw new X(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(K1(n))}function V1(t,e){return Sv(t.databaseId,e)}function H1(t){const e=M1(t);return e.length===4?Ke.emptyPath():K1(e)}function _0(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K1(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jC(t,e,n){return{name:qc(t,e),fields:n.value.mapValue.fields}}function G1(t,e,n){const r=ds(t,e.name),s=Vt(e.updateTime),A=e.createTime?Vt(e.createTime):Ie.min(),i=new mn({mapValue:{fields:e.fields}}),o=pt.newFoundDocument(r,s,A,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function U4(t,e){return"found"in e?function(r,s){_e(!!s.found),s.found.name,s.found.updateTime;const A=ds(r,s.found.name),i=Vt(s.found.updateTime),o=s.found.createTime?Vt(s.found.createTime):Ie.min(),a=new mn({mapValue:{fields:s.found.fields}});return pt.newFoundDocument(A,i,o,a)}(t,e):"missing"in e?function(r,s){_e(!!s.missing),_e(!!s.readTime);const A=ds(r,s.missing),i=Vt(s.readTime);return pt.newNoDocument(A,i)}(t,e):ve()}function k4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(_e(d===void 0||typeof d=="string"),Qt.fromBase64String(d||"")):(_e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?K.UNKNOWN:P1(c.code);return new X(d,c.message||"")}(i);n=new O1(r,s,A,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ds(t,r.document.name),A=Vt(r.document.updateTime),i=r.document.createTime?Vt(r.document.createTime):Ie.min(),o=new mn({mapValue:{fields:r.document.fields}}),a=pt.newFoundDocument(s,A,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ch(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ds(t,r.document),A=r.readTime?Vt(r.readTime):Ie.min(),i=pt.newNoDocument(s,A),o=r.removedTargetIds||[];n=new ch([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ds(t,r.document),A=r.removedTargetIds||[];n=new ch([],A,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:A}=r,i=new x4(s,A),o=r.targetId;n=new L1(o,i)}}return n}function Jc(t,e){let n;if(e instanceof Ga)n={update:jC(t,e.key,e.value)};else if(e instanceof za)n={delete:qc(t,e.key)};else if(e instanceof qs)n={update:jC(t,e.key,e.data),updateMask:D4(e.fieldMask)};else{if(!(e instanceof bv))return ve();n={verify:qc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(A,i){const o=i.transform;if(o instanceof Ia)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ji)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ea)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:F4(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:ve()}(t,e.precondition)),n}function I0(t,e){const n=e.currentDocument?function(A){return A.updateTime!==void 0?xt.updateTime(Vt(A.updateTime)):A.exists!==void 0?xt.exists(A.exists):xt.none()}(e.currentDocument):xt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)_e(o.setToServerValue==="REQUEST_TIME"),a=new Ia;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new qi(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Ji(d)}else"increment"in o?a=new Ea(i,o.increment):ve();const c=Bt.fromServerFormat(o.fieldPath);return new yu(c,a)}(t,s)):[];if(e.update){e.update.name;const s=ds(t,e.update.name),A=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new er(c.map(d=>Bt.fromServerFormat(d)))}(e.updateMask);return new qs(s,A,i,n,r)}return new Ga(s,A,n,r)}if(e.delete){const s=ds(t,e.delete);return new za(s,n)}if(e.verify){const s=ds(t,e.verify);return new bv(s,n)}return ve()}function S4(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(s,A){let i=s.updateTime?Vt(s.updateTime):Vt(A);return i.isEqual(Ie.min())&&(i=Vt(A)),new v4(i,s.transformResults||[])}(n,e))):[]}function z1(t,e){return{documents:[V1(t,e.path)]}}function W1(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=V1(t,s);const A=function(c){if(c.length!==0)return J1(it.create(c,"and"))}(e.filters);A&&(n.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ro(f.field),direction:R4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=x0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function $1(t){let e=H1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];n.where&&(A=function(h){const f=q1(h);return f instanceof it&&Cv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(p){return new $c(No(p.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,pu(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,w=h.values||[];return new JA(w,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,w=h.values||[];return new JA(w,f)}(n.endAt)),y1(e,s,i,A,o,"F",a,c)}function Q4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function q1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=No(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=No(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=No(n.unaryFilter.field);return Ge.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=No(n.unaryFilter.field);return Ge.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(No(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return it.create(n.compositeFilter.filters.map(r=>q1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function R4(t){return I4[t]}function N4(t){return E4[t]}function P4(t){return b4[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function No(t){return Bt.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof Ge?function(n){if(n.op==="=="){if(CC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(xC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(xC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:N4(n.op),value:n.value}}}(t):t instanceof it?function(n){const r=n.getFilters().map(s=>J1(s));return r.length===1?r[0]:{compositeFilter:{op:P4(n.op),filters:r}}}(t):ve()}function D4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,s,A=Ie.min(),i=Ie.min(),o=Qt.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.ct=e}}function L4(t,e){let n;if(e.document)n=G1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),s=Yi(e.noDocument.readTime);n=pt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{const r=le.fromSegments(e.unknownDocument.path),s=Yi(e.unknownDocument.version);n=pt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const A=new Ct(s[0],s[1]);return Ie.fromTimestamp(A)}(e.readTime)),n}function MC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(A,i){return{name:qc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:ba(A,i.version.toTimestamp()),createTime:ba(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xi(e.version)};else{if(!e.isUnknownDocument())return ve();r.unknownDocument={path:n.path.toArray(),version:Xi(e.version)}}return r}function ef(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yi(t){const e=new Ct(t.seconds,t.nanoseconds);return Ie.fromTimestamp(e)}function Bi(t,e){const n=(e.baseMutations||[]).map(A=>I0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const o=e.mutations[A+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const r=e.mutations.map(A=>I0(t.ct,A)),s=Ct.fromMillis(e.localWriteTimeMs);return new Tv(e.batchId,s,n,r)}function jl(t){const e=Yi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Yi(t.lastLimboFreeSnapshotVersion):Ie.min();let r;return r=function(A){return A.documents!==void 0}(t.query)?function(A){return _e(A.documents.length===1),Kn(Ka(H1(A.documents[0])))}(t.query):function(A){return Kn($1(A))}(t.query),new Fs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Qt.fromBase64String(t.resumeToken))}function Z1(t,e){const n=Xi(e.snapshotVersion),r=Xi(e.lastLimboFreeSnapshotVersion);let s;s=Xh(e.target)?z1(t.ct,e.target):W1(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$i(e.target),readTime:n,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Qv(t){const e=$1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zh(e,e.limit,"L"):e}function Fp(t,e){return new Uv(e.largestBatchId,I0(t.ct,e.overlayMutation))}function VC(t,e){const n=e.path.lastSegment();return[t,Hn(e.path.popLast()),n]}function HC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Xi(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{getBundleMetadata(e,n){return KC(e).get(n).next(r=>{if(r)return function(A){return{id:A.bundleId,createTime:Yi(A.createTime),version:A.version}}(r)})}saveBundleMetadata(e,n){return KC(e).put(function(s){return{bundleId:s.id,createTime:Xi(Vt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return GC(e).get(n).next(r=>{if(r)return function(A){return{name:A.name,query:Qv(A.bundledQuery),readTime:Yi(A.readTime)}}(r)})}saveNamedQuery(e,n){return GC(e).put(function(s){return{name:s.name,readTime:Xi(Vt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function KC(t){return tn(t,"bundles")}function GC(t){return tn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Yf(e,r)}getOverlay(e,n){return yl(e).get(VC(this.userId,n)).next(r=>r?Fp(this.serializer,r):null)}getOverlays(e,n){const r=os();return M.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((A,i)=>{const o=new Uv(n,i);s.push(this.ht(e,o))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(i=>s.add(Hn(i.getCollectionPath())));const A=[];return s.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);A.push(yl(e).j("collectionPathOverlayIndex",o))}),M.waitFor(A)}getOverlaysForCollection(e,n,r){const s=os(),A=Hn(n),i=IDBKeyRange.bound([this.userId,A,r],[this.userId,A,Number.POSITIVE_INFINITY],!0);return yl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=Fp(this.serializer,a);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const A=os();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return yl(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=Fp(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,n){return yl(e).put(function(s,A,i){const[o,a,c]=VC(A,i.mutation.key);return{userId:A,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Jc(s.ct,i.mutation)}}(this.serializer,this.userId,n))}}function yl(t){return tn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{Pt(e){return tn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Qt.fromUint8Array(r):Qt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(vt(e.integerValue));else if("doubleValue"in e){const r=vt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Kc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ms(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(WA(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?c1(e)?this.dt(n,Number.MAX_SAFE_INTEGER):qf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ve()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const A=e.fields||{};this.dt(n,53);const i="value",o=((s=(r=A[i].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(vt(o)),this.Vt(i,n),this.Tt(A[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),le.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}xi.vt=new xi;function M4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function zC(t){const e=64-function(r){let s=0;for(let A=0;A<8;++A){const i=M4(255&r[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class V4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=zC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=zC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class H4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class K4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Bl{constructor(){this.jt=new V4,this.Ht=new H4(this.jt),this.Jt=new K4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ci(this.indexId,this.documentKey,this.arrayValue,r)}}function AA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=WC(t.arrayValue,e.arrayValue),n!==0?n:(n=WC(t.directionalValue,e.directionalValue),n!==0?n:le.comparator(t.documentKey,e.documentKey)))}function WC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.Xt=new lt((n,r)=>Bt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(_e(e.collectionGroup===this.collectionId),this.nn)return!1;const n=f0(e);if(n!==void 0&&!this.sn(n))return!1;const r=vi(e);let s=new Set,A=0,i=0;for(;A<r.length&&this.sn(r[A]);++A)s=s.add(r[A].fieldPath.canonicalString());if(A===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const a=r[A];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++A}for(;A<r.length;++A){const o=r[A];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new lt(Bt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ah(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ah(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ah(r.field,r.dir==="asc"?0:1)));return new Jh(Jh.UNKNOWN_ID,this.collectionId,n,Hc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){var e,n;if(_e(t instanceof Ge||t instanceof it),t instanceof Ge){if(t instanceof v1){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(A=>Ge.create(t.field,"==",A)))||[];return it.create(s,"or")}return t}const r=t.filters.map(s=>eF(s));return it.create(r,t.op)}function G4(t){if(t.getFilters().length===0)return[];const e=T0(eF(t));return _e(tF(e)),E0(e)||b0(e)?[e]:e.getFilters()}function E0(t){return t instanceof Ge}function b0(t){return t instanceof it&&Cv(t)}function tF(t){return E0(t)||b0(t)||function(n){if(n instanceof it&&w0(n)){for(const r of n.getFilters())if(!E0(r)&&!b0(r))return!1;return!0}return!1}(t)}function T0(t){if(_e(t instanceof Ge||t instanceof it),t instanceof Ge)return t;if(t.filters.length===1)return T0(t.filters[0]);const e=t.filters.map(r=>T0(r));let n=it.create(e,t.op);return n=tf(n),tF(n)?n:(_e(n instanceof it),_e(_a(n)),_e(n.filters.length>1),n.filters.reduce((r,s)=>Rv(r,s)))}function Rv(t,e){let n;return _e(t instanceof Ge||t instanceof it),_e(e instanceof Ge||e instanceof it),n=t instanceof Ge?e instanceof Ge?function(s,A){return it.create([s,A],"and")}(t,e):qC(t,e):e instanceof Ge?qC(e,t):function(s,A){if(_e(s.filters.length>0&&A.filters.length>0),_a(s)&&_a(A))return p1(s,A.getFilters());const i=w0(s)?s:A,o=w0(s)?A:s,a=i.filters.map(c=>Rv(c,o));return it.create(a,"or")}(t,e),tf(n)}function qC(t,e){if(_a(e))return p1(e,t.getFilters());{const n=e.filters.map(r=>Rv(t,r));return it.create(n,"or")}}function tf(t){if(_e(t instanceof Ge||t instanceof it),t instanceof Ge)return t;const e=t.getFilters();if(e.length===1)return tf(e[0]);if(f1(t))return t;const n=e.map(s=>tf(s)),r=[];return n.forEach(s=>{s instanceof Ge?r.push(s):s instanceof it&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:it.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.un=new Nv}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(pr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Nv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(Ke.comparator),A=!s.has(r);return this.index[n]=s.add(r),A}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Uint8Array(0);class W4{constructor(e,n){this.databaseId=n,this.cn=new Nv,this.ln=new ai(r=>$i(r),(r,s)=>mu(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const A={collectionId:r,parent:Hn(s)};return JC(e).put(A)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[XT(n),""],!1,!0);return JC(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==n)break;r.push(is(i.parent))}return r})}addFieldIndex(e,n){const r=xl(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const A=r.add(s);if(n.indexState){const i=Co(e);return A.next(o=>{i.put(HC(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return A.next()}deleteFieldIndex(e,n){const r=xl(e),s=Co(e),A=xo(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xl(e),r=xo(e),s=Co(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const A=new $C(r).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,n){const r=xo(e);let s=!0;const A=new Map;return M.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{s&&(s=!!o),A.set(i,o)})).next(()=>{if(s){let i=Pe();const o=[];return M.forEach(A,(a,c)=>{Y("IndexedDbIndexManager",`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(a)} to execute ${$i(n)}`);const d=function(v,R){const Q=f0(R);if(Q===void 0)return null;for(const N of Yh(v,Q.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(v,R){const Q=new Map;for(const N of vi(R))for(const I of Yh(v,N.fieldPath))switch(I.op){case"==":case"in":Q.set(N.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Q.set(N.fieldPath.canonicalString(),I.value),Array.from(Q.values())}return null}(c,a),f=function(v,R){const Q=[];let N=!0;for(const I of vi(R)){const x=I.kind===0?TC(v,I.fieldPath,v.startAt):FC(v,I.fieldPath,v.startAt);Q.push(x.value),N&&(N=x.inclusive)}return new JA(Q,N)}(c,a),w=function(v,R){const Q=[];let N=!0;for(const I of vi(R)){const x=I.kind===0?FC(v,I.fieldPath,v.endAt):TC(v,I.fieldPath,v.endAt);Q.push(x.value),N&&(N=x.inclusive)}return new JA(Q,N)}(c,a),p=this.In(a,c,f),C=this.In(a,c,w),_=this.Tn(a,c,h),y=this.En(a.indexId,d,p,f.inclusive,C,w.inclusive,_);return M.forEach(y,B=>r.G(B,n.limit).next(v=>{v.forEach(R=>{const Q=le.fromSegments(R.documentKey);i.has(Q)||(i=i.add(Q),o.push(Q))})}))}).next(()=>o)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=G4(it.create(e.filters,"and")).map(r=>y0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,A,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,A.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):md,w=this.An(e,f,r[h%c],s),p=this.Rn(e,f,A[h%c],i),C=o.map(_=>this.An(e,f,_,!0));d.push(...this.createRange(w,p,C))}return d}An(e,n,r,s){const A=new Ci(e,le.empty(),n,r);return s?A:A.Zt()}Rn(e,n,r,s){const A=new Ci(e,le.empty(),n,r);return s?A.Zt():A}Pn(e,n){const r=new $C(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const o of A)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const s=this.hn(n);return M.forEach(s,A=>this.Pn(e,A).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new lt(Bt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Bl;for(const s of vi(e)){const A=n.data.field(s.fieldPath);if(A==null)return null;const i=r.Yt(s.kind);xi.vt.It(A,i)}return r.zt()}dn(e){const n=new Bl;return xi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Bl;return xi.vt.It(Wi(this.databaseId,n),r.Yt(function(A){const i=vi(A);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Bl);let A=0;for(const i of vi(e)){const o=r[A++];for(const a of s)if(this.fn(n,i.fieldPath)&&Wc(o))s=this.gn(s,i,o);else{const c=a.Yt(i.kind);xi.vt.It(o,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],A=[];for(const i of r.arrayValue.values||[])for(const o of s){const a=new Bl;a.seed(o.zt()),xi.vt.It(i,a.Yt(n.kind)),A.push(a)}return A}fn(e,n){return!!e.filters.find(r=>r instanceof Ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xl(e),s=Co(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(A=>{const i=[];return M.forEach(A,o=>s.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new Hc(h.sequenceNumber,new pr(Yi(h.readTime),new le(is(h.documentKey)),h.largestBatchId)):Hc.empty(),w=d.fields.map(([p,C])=>new Ah(Bt.fromServerFormat(p),C));return new Jh(d.indexId,d.collectionGroup,w,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const A=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:Re(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=xl(e),A=Co(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,a=>A.put(HC(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,A)=>{const i=r.get(s.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(r.set(s.collectionGroup,o),M.forEach(o,a=>this.wn(e,s,a).next(c=>{const d=this.Sn(A,a);return c.isEqual(d)?M.resolve():this.bn(e,A,a,c,d)}))))})}Dn(e,n,r,s){return xo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return xo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=xo(e);let A=new lt(AA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{A=A.add(new Ci(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>A)}Sn(e,n){let r=new lt(AA);const s=this.Vn(n,e);if(s==null)return r;const A=f0(n);if(A!=null){const i=e.data.field(A.fieldPath);if(Wc(i))for(const o of i.arrayValue.values||[])r=r.add(new Ci(n.indexId,e.key,this.dn(o),s))}else r=r.add(new Ci(n.indexId,e.key,md,s));return r}bn(e,n,r,s,A){Y("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const w=a.getIterator(),p=c.getIterator();let C=Bo(w),_=Bo(p);for(;C||_;){let y=!1,B=!1;if(C&&_){const v=d(C,_);v<0?B=!0:v>0&&(y=!0)}else C!=null?B=!0:y=!0;y?(h(_),_=Bo(p)):B?(f(C),C=Bo(w)):(C=Bo(w),_=Bo(p))}}(s,A,AA,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),M.waitFor(i)}yn(e){let n=1;return Co(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,A)=>{A.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>AA(i,o)).filter((i,o,a)=>!o||AA(i,a[o-1])!==0);const s=[];s.push(e);for(const i of r){const o=AA(i,e),a=AA(i,n);if(o===0)s[0]=e.Zt();else if(o>0&&a<0)s.push(i),s.push(i.Zt());else if(a>0)break}s.push(n);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const o=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,md,[]],a=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,md,[]];A.push(IDBKeyRange.bound(o,a))}return A}Cn(e,n){return AA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(XC)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ve())).next(XC)}}function JC(t){return tn(t,"collectionParents")}function xo(t){return tn(t,"indexEntries")}function xl(t){return tn(t,"indexConfiguration")}function Co(t){return tn(t,"indexState")}function XC(t){_e(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;vv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new pr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $n{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));A.push(a.next(()=>{_e(o===1)}));const c=[];for(const d of n.mutations){const h=s1(e,d.key.path,n.batchId);A.push(s.delete(h)),c.push(d.key)}return M.waitFor(A).next(()=>c)}function nf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ve();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(41943040,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class Zf{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){_e(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new Zf(A,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iA(e).J({index:"userMutationsIndex",range:r},(s,A,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const A=Po(e),i=iA(e);return i.add({}).next(o=>{_e(typeof o=="number");const a=new Tv(o,n,r,s),c=function(w,p,C){const _=C.baseMutations.map(B=>Jc(w.ct,B)),y=C.mutations.map(B=>Jc(w.ct,B));return{userId:p,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:_,mutations:y}}(this.serializer,this.userId,a),d=[];let h=new lt((f,w)=>Re(f.canonicalString(),w.canonicalString()));for(const f of s){const w=s1(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(w,QD))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),M.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return iA(e).get(n).next(r=>r?(_e(r.userId===this.userId),Bi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let A=null;return iA(e).J({index:"userMutationsIndex",range:s},(i,o,a)=>{o.userId===this.userId&&(_e(o.batchId>=r),A=Bi(this.serializer,o)),a.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return iA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,A,i)=>{r=A.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iA(e).U("userMutationsIndex",n).next(r=>r.map(s=>Bi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ih(this.userId,n.path),s=IDBKeyRange.lowerBound(r),A=[];return Po(e).J({range:s},(i,o,a)=>{const[c,d,h]=i,f=is(d);if(c===this.userId&&n.path.isEqual(f))return iA(e).get(h).next(w=>{if(!w)throw ve();_e(w.userId===this.userId),A.push(Bi(this.serializer,w))});a.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Re);const s=[];return n.forEach(A=>{const i=ih(this.userId,A.path),o=IDBKeyRange.lowerBound(i),a=Po(e).J({range:o},(c,d,h)=>{const[f,w,p]=c,C=is(w);f===this.userId&&A.path.isEqual(C)?r=r.add(p):h.done()});s.push(a)}),M.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,A=ih(this.userId,r),i=IDBKeyRange.lowerBound(A);let o=new lt(Re);return Po(e).J({range:i},(a,c,d)=>{const[h,f,w]=a,p=is(f);h===this.userId&&r.isPrefixOf(p)?p.length===s&&(o=o.add(w)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],s=[];return n.forEach(A=>{s.push(iA(e).get(A).next(i=>{if(i===null)throw ve();_e(i.userId===this.userId),r.push(Bi(this.serializer,i))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return nF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Po(e).J({range:r},(A,i,o)=>{if(A[0]===this.userId){const a=is(A[1]);s.push(a)}else o.done()}).next(()=>{_e(s.length===0)})})}containsKey(e,n){return rF(e,this.userId,n)}Nn(e){return sF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rF(t,e,n){const r=ih(e,n.path),s=r[1],A=IDBKeyRange.lowerBound(r);let i=!1;return Po(t).J({range:A,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function iA(t){return tn(t,"mutations")}function Po(t){return tn(t,"documentMutations")}function sF(t){return tn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zi(0)}static kn(){return new Zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Zi(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ie.fromTimestamp(new Ct(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>_o(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(_e(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const A=[];return _o(e).J((i,o)=>{const a=jl(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(s++,A.push(this.removeTargetData(e,a)))}).next(()=>M.waitFor(A)).next(()=>s)}forEachTarget(e,n){return _o(e).J((r,s)=>{const A=jl(s);n(A)})}qn(e){return ZC(e).get("targetGlobalKey").next(n=>(_e(n!==null),n))}Qn(e,n){return ZC(e).put("targetGlobalKey",n)}Kn(e,n){return _o(e).put(Z1(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$i(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let A=null;return _o(e).J({range:s,index:"queryTargetsIndex"},(i,o,a)=>{const c=jl(o);mu(n,c.target)&&(A=c,a.done())}).next(()=>A)}addMatchingKeys(e,n,r){const s=[],A=mA(e);return n.forEach(i=>{const o=Hn(i.path);s.push(A.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,i))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=mA(e);return M.forEach(n,A=>{const i=Hn(A.path);return M.waitFor([s.delete([r,i]),this.referenceDelegate.removeReference(e,r,A)])})}removeMatchingKeysForTargetId(e,n){const r=mA(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=mA(e);let A=Pe();return s.J({range:r,H:!0},(i,o,a)=>{const c=is(i[1]),d=new le(c);A=A.add(d)}).next(()=>A)}containsKey(e,n){const r=Hn(n.path),s=IDBKeyRange.bound([r],[XT(r)],!1,!0);let A=0;return mA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,o],a,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,n){return _o(e).get(n).next(r=>r?jl(r):null)}}function _o(t){return tn(t,"targets")}function ZC(t){return tn(t,"targetGlobal")}function mA(t){return tn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_([t,e],[n,r]){const s=Re(t,n);return s===0?Re(e,r):s}class q4{constructor(e){this.Un=e,this.buffer=new lt(e_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();e_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class J4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Y("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oi(n)?Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ii(n)}await this.Hn(3e5)})}}class X4{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Zn.oe);const r=new q4(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(YC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,A,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(A=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),So()<=Me.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${A} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function Y4(t,e){return new X4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.db=e,this.garbageCollector=Y4(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return wd(e,r)}removeReference(e,n,r){return wd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wd(e,n)}nr(e,n){return function(s,A){let i=!1;return sF(s).Y(o=>rF(s,o,A).next(a=>(a&&(i=!0),M.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return A++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Ie.min()),mA(e).delete(function(h){return[0,Hn(h.path)]}(i))))});s.push(a)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>A)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wd(e,n)}tr(e,n){const r=mA(e);let s,A=Zn.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(A!==Zn.oe&&n(new le(is(s)),A),A=c,s=a):A=Zn.oe}).next(()=>{A!==Zn.oe&&n(new le(is(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wd(t,e){return mA(t).put(function(r,s){return{targetId:0,path:Hn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.changes=new ai(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fi(e).put(r)}removeEntry(e,n,r){return fi(e).delete(function(A,i){const o=A.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],ef(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=pt.newInvalidDocument(n);return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cl(n))},(s,A)=>{r=this.ir(n,A)}).next(()=>r)}sr(e,n){let r={size:0,document:pt.newInvalidDocument(n)};return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cl(n))},(s,A)=>{r={document:this.ir(n,A),size:nf(A)}}).next(()=>r)}getEntries(e,n){let r=tr();return this._r(e,n,(s,A)=>{const i=this.ir(s,A);r=r.insert(s,i)}).next(()=>r)}ar(e,n){let r=tr(),s=new ht(le.comparator);return this._r(e,n,(A,i)=>{const o=this.ir(A,i);r=r.insert(A,o),s=s.insert(A,nf(i))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let s=new lt(r_);n.forEach(a=>s=s.add(a));const A=IDBKeyRange.bound(Cl(s.first()),Cl(s.last())),i=s.getIterator();let o=i.getNext();return fi(e).J({index:"documentKeyIndex",range:A},(a,c,d)=>{const h=le.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&r_(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(Cl(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,A){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),ef(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=tr();for(const h of c){const f=this.ir(le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(vu(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let A=tr();const i=n_(n,r),o=n_(n,pr.max());return fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(le.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new tL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return t_(e).get("remoteDocumentGlobalKey").next(n=>(_e(!!n),n))}rr(e,n){return t_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=L4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ie.min())))return r}return pt.newInvalidDocument(e)}}function iF(t){return new eL(t)}class tL extends AF{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ai(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new lt((A,i)=>Re(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const o=this.lr.get(A);if(n.push(this.cr.removeEntry(e,A,o.readTime)),i.isValidDocument()){const a=MC(this.cr.serializer,i);s=s.add(A.path.popLast());const c=nf(a);r+=c-o.size,n.push(this.cr.addEntry(e,A,a))}else if(r-=o.size,this.trackRemovals){const a=MC(this.cr.serializer,i.convertToNoDocument(Ie.min()));n.push(this.cr.addEntry(e,A,a))}}),s.forEach(A=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:r.get(A).readTime})}),r))}}function t_(t){return tn(t,"remoteDocumentGlobal")}function fi(t){return tn(t,"remoteDocumentsV14")}function Cl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function n_(t,e){const n=e.documentKey.path.toArray();return[t,ef(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function r_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let A=0;A<n.length-2&&A<r.length-2;++A)if(s=Re(n[A],r[A]),s)return s;return s=Re(n.length,r.length),s||(s=Re(n[n.length-2],r[r.length-2]),s||Re(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ac(r.mutation,s,er.empty(),Ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const s=os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(A=>{let i=Ll();return A.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(A=>{n.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let A=tr();const i=oc(),o=function(){return oc()}();return n.forEach((a,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof qs)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),ac(d.mutation,c,d.mutation.getFieldMask(),Ct.now())):i.set(c.key,er.empty())}),this.recalculateAndSaveOverlays(e,A).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new nL(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=oc();let s=new ht((i,o)=>i-o),A=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||er.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(s.get(o.batchId)||Pe()).add(a);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=E1();d.forEach(f=>{if(!A.has(f)){const w=Q1(n.get(f),r.get(f));w!==null&&h.set(f,w),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_v(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-A.size):M.resolve(os());let o=-1,a=A;return i.next(c=>M.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),A.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,a,c,Pe())).next(d=>({batchId:o,changes:I1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let s=Ll();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const A=n.collectionGroup;let i=Ll();return this.indexManager.getCollectionParents(e,A).next(o=>M.forEach(o,a=>{const c=function(h,f){return new $s(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,A,s))).next(i=>{A.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,pt.newInvalidDocument(d)))});let o=Ll();return i.forEach((a,c)=>{const d=A.get(a);d!==void 0&&ac(d.mutation,c,er.empty(),Ct.now()),vu(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Vt(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Qv(s.bundledQuery),readTime:Vt(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.overlays=new ht(le.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return M.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,A)=>{this.ht(e,n,A)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=os(),A=n.length+1,i=new le(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===A&&a.largestBatchId>r&&s.set(a.getKey(),a)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let A=new ht((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=A.get(c.largestBatchId);d===null&&(d=os(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=os(),a=A.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return M.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Uv(n,r));let A=this.Ir.get(n);A===void 0&&(A=Pe(),this.Ir.set(n,A)),this.Ir.set(n,A.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Tr=new lt(on.Er),this.dr=new lt(on.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new on(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Ke([])),r=new on(n,e),s=new on(n,e+1),A=[];return this.dr.forEachInRange([r,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Ke([])),r=new on(n,e),s=new on(n,e+1);let A=Pe();return this.dr.forEachInRange([r,s],i=>{A=A.add(i.key)}),A}containsKey(e){const n=new on(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(on.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Tv(A,n,r,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new on(o.key,A)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),A=s<0?0:s;return M.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),s=new on(n,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([r,s],i=>{const o=this.Dr(i.wr);A.push(o)}),M.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Re);return n.forEach(s=>{const A=new on(s,0),i=new on(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],o=>{r=r.add(o.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let A=r;le.isDocumentKey(A)||(A=A.child(""));const i=new on(new le(A),0);let o=new lt(Re);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(a.wr)),!0)},i),M.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const A=new on(s.key,n.batchId);return r=r.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new on(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.Mr=e,this.docs=function(){return new ht(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),A=s?s.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(s=>{const A=this.docs.get(s);r=r.insert(s,A?A.document.mutableCopy():pt.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let A=tr();const i=n.path,o=new le(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||vv(ZT(d),r)<=0||(s.has(d.key)||vu(n,d))&&(A=A.insert(d.key,d.mutableCopy()))}return M.resolve(A)}getAllFromCollectionGroup(e,n,r,s){ve()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aL(this)}getSize(e){return M.resolve(this.size)}}class aL extends AF{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.persistence=e,this.Nr=new ai(n=>$i(n),mu),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pv,this.targetCount=0,this.kr=Zi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const A=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),M.waitFor(A).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,A=[];return s&&n.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),M.waitFor(A)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zn(0),this.Kr=!1,this.Kr=!0,this.$r=new AL,this.referenceDelegate=e(this),this.Ur=new lL(this),this.indexManager=new z4,this.remoteDocumentCache=function(s){return new oL(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Y1(n),this.Gr=new rL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new iL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new cL(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class cL extends t1{constructor(e){super(),this.currentSequenceNumber=e}}class eg{constructor(e){this.persistence=e,this.Jr=new Pv,this.Yr=null}static Zr(e){return new eg(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=le.fromPath(r);return this.ei(e,s).next(A=>{A||n.removeEntry(s,Ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.serializer=e}O(e,n,r,s){const A=new Wf("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mC,{unique:!0}),a.createObjectStore("documentMutations")}(e),s_(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),s_(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),r<4&&s>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mC,{unique:!0});const h=c.store("mutations"),f=d.map(w=>h.put(w));return M.waitFor(f)})}(e,A))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(i=i.next(()=>this.ni(A))),r<6&&s>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),r<7&&s>=7&&(i=i.next(()=>this.ii(A))),r<8&&s>=8&&(i=i.next(()=>this.si(e,A))),r<9&&s>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(i=i.next(()=>this.oi(A))),r<11&&s>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:GD});c.createIndex("collectionPathOverlayIndex",zD,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",WD,{unique:!1})})(e)})),r<13&&s>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:RD});c.createIndex("documentKeyIndex",ND),c.createIndex("collectionGroupIndex",PD)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),r<15&&s>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:MD}).createIndex("sequenceNumberIndex",VD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:HD}).createIndex("documentKeyIndex",KD,{unique:!1})}(e))),r<16&&s>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=nf(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>M.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>M.forEach(o,a=>{_e(a.userId===A.userId);const c=Bi(this.serializer,a);return nF(e,A.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return r.J((i,o)=>{const a=new Ke(i),c=function(h){return[0,Hn(h)]}(a);A.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Hn(h),sequenceNumber:s.highestListenSequenceNumber}))(a)))}).next(()=>M.waitFor(A))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:jD});const r=n.store("collectionParents"),s=new Nv,A=i=>{if(s.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Hn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new Ke(i);return A(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=is(o);return A(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const A=jl(s),i=Z1(this.serializer,A);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((A,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new le(Ke.fromString(h.document.name).popFirst(5)):h.noDocument?le.fromSegments(h.noDocument.path):h.unknownDocument?le.fromSegments(h.unknownDocument.path):ve()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(o.put(c))}).next(()=>M.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=iF(this.serializer),A=new aF(eg.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:Pe();Bi(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),M.forEach(o,(a,c)=>{const d=new ln(c),h=Yf.lt(this.serializer,d),f=A.getIndexManager(d),w=Zf.lt(d,this.serializer,f,A.referenceDelegate);return new oF(s,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new g0(n,Zn.oe),a).next()})})}}function s_(t){t.createObjectStore("targetDocuments",{keyPath:LD}).createIndex("documentTargetsIndex",OD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DD,{unique:!0}),t.createObjectStore("targetGlobal")}const Up="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dv{constructor(e,n,r,s,A,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=A,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Dv.D())throw new X(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Z4(this,s),this.Ai=n+"main",this.serializer=new Y1(a),this.Ri=new us(this.Ai,this.hi,new uL(this.serializer)),this.$r=new j4,this.Ur=new $4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iF(this.serializer),this.Gr=new O4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(K.FAILED_PRECONDITION,Up);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Zn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(oi(e))return Y("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return _l(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return vd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=tn(n,"clientMetadata");return r.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(o=>A.indexOf(o)===-1);return M.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):_l(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new X(K.FAILED_PRECONDITION,Up);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(A||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new g0(e,Zn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Zf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new W4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",A=function(a){return a===17?JD:a===16?qD:a===15?Bv:a===14?o1:a===13?i1:a===12?$D:a===11?A1:void ve()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,o=>(i=new g0(o,this.Qr?this.Qr.next():Zn.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new X(K.FAILED_PRECONDITION,e1);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return _l(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(K.FAILED_PRECONDITION,Up)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _l(e).put("owner",n)}static D(){return us.D()}bi(e){const n=_l(e);return n.get("owner").next(r=>this.vi(r)?(Y("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;TT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Y("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _l(t){return tn(t,"owner")}function vd(t){return tn(t,"clientMetadata")}function Lv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Pe(),s=Pe();for(const A of n.docChanges)switch(A.type){case 0:r=r.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new Ov(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TT()?8:n1(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const A={result:null};return this.Yi(e,n).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,n,s,r).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new dL;return this.Xi(e,n,i).next(o=>{if(A.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>A.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(So()<=Me.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(So()<=Me.DEBUG&&Y("QueryEngine","Query:",Qo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(So()<=Me.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):M.resolve())}Yi(e,n){if(UC(n))return M.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zh(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(A=>{const i=Pe(...A);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,Zh(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,s){return UC(n)||s.isEqual(Ie.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(A=>{const i=this.ts(n,A);return this.ns(n,i,r,s)?M.resolve(null):(So()<=Me.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qo(n)),this.rs(e,i,n,YT(s,-1)).next(o=>o))})}ts(e,n){let r=new lt(C1(e));return n.forEach((s,A)=>{vu(e,A)&&(r=r.add(A))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const A=e.limitType==="F"?n.last():n.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,n,r){return So()<=Me.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.Ji.getDocumentsMatchingQuery(e,n,pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(A=>(n.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ht(Re),this._s=new ai(A=>$i(A),mu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cF(t,e,n,r){return new hL(t,e,n,r)}async function uF(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(A=>(s=A,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(A=>{const i=[],o=[];let a=Pe();for(const c of s){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of A){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function fL(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),A=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let w=M.resolve();return f.forEach(p=>{w=w.next(()=>d.getEntry(a,p)).next(C=>{const _=c.docVersions.get(p);_e(_!==null),C.version.compareTo(_)<0&&(h.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),d.addEntry(C)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,A).next(()=>A.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Pe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function dF(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gL(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(A,d.addedDocuments,h)));let w=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(Qt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),s=s.insert(h,w),function(C,_,y){return C.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,w,d)&&o.push(n.Ur.updateTargetData(A,w))});let a=tr(),c=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(A,d))}),o.push(hF(A,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(Ie.min())){const d=n.Ur.getLastRemoteSnapshotVersion(A).next(h=>n.Ur.setTargetsMetadata(A,A.currentSequenceNumber,r));o.push(d)}return M.waitFor(o).next(()=>i.apply(A)).next(()=>n.localDocuments.getLocalViewOfDocuments(A,a,c)).next(()=>a)}).then(A=>(n.os=s,A))}function hF(t,e,n){let r=Pe(),s=Pe();return n.forEach(A=>r=r.add(A)),e.getEntries(t,r).next(A=>{let i=tr();return n.forEach((o,a)=>{const c=A.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),a.isNoDocument()&&a.version.isEqual(Ie.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):Y("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:s}})}function pL(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ta(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(A=>A?(s=A,M.resolve(s)):n.Ur.allocateTargetId(r).next(i=>(s=new Fs(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fa(t,e,n){const r=ue(t),s=r.os.get(e),A=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",A,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!oi(i))throw i;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function rf(t,e,n){const r=ue(t);let s=Ie.min(),A=Pe();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=ue(a),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,Kn(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{A=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?s:Ie.min(),n?A:Pe())).next(o=>(pF(r,x1(e),o),{documents:o,Ts:A})))}function fF(t,e){const n=ue(t),r=ue(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",A=>r.ot(A,e).next(i=>i?i.target:null))}function gF(t,e){const n=ue(t),r=n.us.get(e)||Ie.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,YT(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(pF(n,e,s),s))}function pF(t,e,n){let r=t.us.get(e)||Ie.min();n.forEach((s,A)=>{A.readTime.compareTo(r)>0&&(r=A.readTime)}),t.us.set(e,r)}async function mL(t,e,n,r){const s=ue(t);let A=Pe(),i=tr();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),a=await Ta(s,function(d){return Kn(Ka(Ke.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>hF(c,o,i).next(d=>(o.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>s.Ur.addMatchingKeys(c,A,a.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function wL(t,e,n=Pe()){const r=await Ta(t,Kn(Qv(e.bundledQuery))),s=ue(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=Vt(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const o=r.withResumeToken(Qt.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(A,o).next(()=>s.Ur.removeMatchingKeysForTargetId(A,r.targetId)).next(()=>s.Ur.addMatchingKeys(A,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function A_(t,e){return`firestore_clients_${t}_${e}`}function i_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kp(t,e){return`firestore_targets_${t}_${e}`}class sf{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new X(s.error.code,s.error.message))),i?new sf(e,n,s.state,A):(Mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,A=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return A&&r.error&&(A=typeof r.error.message=="string"&&typeof r.error.code=="string",A&&(s=new X(r.error.code,r.error.message))),A?new lc(e,r.state,s):(Mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Af{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,A=Iv();for(let i=0;s&&i<r.activeTargetIds.length;++i)s=r1(r.activeTargetIds[i]),A=A.add(r.activeTargetIds[i]);return s?new Af(e,A):(Mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class jv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jv(n.clientId,n.onlineState):(Mt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class F0{constructor(){this.activeTargetIds=Iv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sp{constructor(e,n,r,s,A){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ht(Re),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=A_(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new F0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(A_(this.persistenceKey,r));if(s){const A=Af.Rs(r,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(kp(this.persistenceKey,e));if(s){const A=lc.Rs(e,s);A&&(r=A.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y("SharedClientState","READ",e,n),n}setItem(e,n){Y("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Y("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(A){let i=Zn.oe;if(A!=null)try{const o=JSON.parse(A);_e(typeof o=="number"),i=o}catch(o){Mt("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Zn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new sf(this.currentUser,e,n,r),A=i_(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const n=i_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=kp(this.persistenceKey,e),A=new lc(e,n,r);this.setItem(s,A.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Af.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),A=r[2]!==void 0?r[2]:null;return sf.Rs(new ln(A),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return lc.Rs(s,n)}Ls(e){return jv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Y("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(r),i=[],o=[];return A.forEach(a=>{s.has(a)||i.push(a)}),s.forEach(a=>{A.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Iv();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class mF{constructor(){this.so=new F0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new F0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function Qp(){return yd===null?yd=function(){return 268435456+Math.round(2147483648*Math.random())}():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class xL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(n,r,s,A,i){const o=Qp(),a=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(n,a,c,s).then(d=>(Y("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw fs("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Lo(n,r,s,A,i,o){return this.Mo(n,r,s,A,i)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((A,i)=>n[i]=A),s&&s.headers.forEach((A,i)=>n[i]=A)}xo(n,r){const s=yL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const A=Qp();return new Promise((i,o)=>{const a=new KT;a.setWithCredentials(!0),a.listenOnce(GT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case sh.NO_ERROR:const d=a.getResponseJson();Y(Tn,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case sh.TIMEOUT:Y(Tn,`RPC '${e}' ${A} timed out`),o(new X(K.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const h=a.getStatus();if(Y(Tn,`RPC '${e}' ${A} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const p=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(y)>=0?y:K.UNKNOWN}(w.status);o(new X(p,w.message))}else o(new X(K.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new X(K.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{Y(Tn,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);Y(Tn,`RPC '${e}' ${A} sending request:`,s),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Qp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=$T(),o=WT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=A.join("");Y(Tn,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,w=!1;const p=new BL({Io:_=>{w?Y(Tn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(f||(Y(Tn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Y(Tn,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),C=(_,y,B)=>{_.listen(y,v=>{try{B(v)}catch(R){setTimeout(()=>{throw R},0)}})};return C(h,Dl.EventType.OPEN,()=>{w||(Y(Tn,`RPC '${e}' stream ${s} transport opened.`),p.yo())}),C(h,Dl.EventType.CLOSE,()=>{w||(w=!0,Y(Tn,`RPC '${e}' stream ${s} transport closed`),p.So())}),C(h,Dl.EventType.ERROR,_=>{w||(w=!0,fs(Tn,`RPC '${e}' stream ${s} transport errored:`,_),p.So(new X(K.UNAVAILABLE,"The operation could not be completed")))}),C(h,Dl.EventType.MESSAGE,_=>{var y;if(!w){const B=_.data[0];_e(!!B);const v=B,R=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(R){Y(Tn,`RPC '${e}' stream ${s} received error:`,R);const Q=R.status;let N=function(b){const k=Kt[b];if(k!==void 0)return P1(k)}(Q),I=R.message;N===void 0&&(N=K.INTERNAL,I="Unknown error status: "+Q+" with message "+R.message),w=!0,p.So(new X(N,I)),h.close()}else Y(Tn,`RPC '${e}' stream ${s} received:`,B),p.bo(B)}}),C(o,zT.STAT_EVENT,_=>{_.stat===h0.PROXY?Y(Tn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===h0.NOPROXY&&Y(Tn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(){return typeof window<"u"?window:null}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){return new T4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,r=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,n,r,s,A,i,o,a){this.ui=e,this.Ho=r,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Mt(n.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new X(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CL extends vF{constructor(e,n,r,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=k4(this.serializer,e),r=function(A){if(!("targetChange"in A))return Ie.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Ie.min():i.readTime?Vt(i.readTime):Ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_0(this.serializer),n.addTarget=function(A,i){let o;const a=i.target;if(o=Xh(a)?{documents:z1(A,a)}:{query:W1(A,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=j1(A,i.resumeToken);const c=x0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ie.min())>0){o.readTime=ba(A,i.snapshotVersion.toTimestamp());const c=x0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=Q4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_0(this.serializer),n.removeTarget=e,this.a_(n)}}class _L extends vF{constructor(e,n,r,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=S4(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Jc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new X(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,C0(n,r),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new X(K.UNKNOWN,A.toString())})}Lo(e,n,r,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,C0(n,r),s,i,o,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(K.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class EL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mt(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,s,A){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{r.enqueueAndForget(async()=>{li(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=ue(a);c.L_.add(4),await Wa(c),c.q_.set("Unknown"),c.L_.delete(4),await _u(c)}(this))})}),this.q_=new EL(r,s)}}async function _u(t){if(li(t))for(const e of t.B_)await e(!0)}async function Wa(t){for(const e of t.B_)await e(!1)}function tg(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Kv(n)?Hv(n):qa(n).r_()&&Vv(n,e))}function Ua(t,e){const n=ue(t),r=qa(n);n.N_.delete(e),r.r_()&&yF(n,e),n.N_.size===0&&(r.r_()?r.o_():li(n)&&n.q_.set("Unknown"))}function Vv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).A_(e)}function yF(t,e){t.Q_.xe(e),qa(t).R_(e)}function Hv(t){t.Q_=new _4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.q_.v_()}function Kv(t){return li(t)&&!qa(t).n_()&&t.N_.size>0}function li(t){return ue(t).L_.size===0}function BF(t){t.Q_=void 0}async function TL(t){t.q_.set("Online")}async function FL(t){t.N_.forEach((e,n)=>{Vv(t,e)})}async function UL(t,e){BF(t),Kv(t)?(t.q_.M_(e),Hv(t)):t.q_.set("Unknown")}async function kL(t,e,n){if(t.q_.set("Online"),e instanceof O1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const o of A.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await of(t,r)}else if(e instanceof ch?t.Q_.Ke(e):e instanceof L1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ie.min()))try{const r=await dF(t.localStore);n.compareTo(r)>=0&&await function(A,i){const o=A.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=A.N_.get(a);if(!d)return;A.N_.set(a,d.withResumeToken(Qt.EMPTY_BYTE_STRING,d.snapshotVersion)),yF(A,a);const h=new Fs(d.target,a,c,d.sequenceNumber);Vv(A,h)}),A.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await of(t,r)}}async function of(t,e,n){if(!oi(e))throw e;t.L_.add(1),await Wa(t),t.q_.set("Offline"),n||(n=()=>dF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await _u(t)})}function xF(t,e){return e().catch(n=>of(t,n,e))}async function $a(t){const e=ue(t),n=XA(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SL(e);)try{const s=await pL(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,QL(e,s)}catch(s){await of(e,s)}CF(e)&&_F(e)}function SL(t){return li(t)&&t.O_.length<10}function QL(t,e){t.O_.push(e);const n=XA(t);n.r_()&&n.V_&&n.m_(e.mutations)}function CF(t){return li(t)&&!XA(t).n_()&&t.O_.length>0}function _F(t){XA(t).start()}async function RL(t){XA(t).p_()}async function NL(t){const e=XA(t);for(const n of t.O_)e.m_(n.mutations)}async function PL(t,e,n){const r=t.O_.shift(),s=Fv.from(r,e,n);await xF(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $a(t)}async function DL(t,e){e&&XA(t).V_&&await async function(r,s){if(function(i){return N1(i)&&i!==K.ABORTED}(s.code)){const A=r.O_.shift();XA(r).s_(),await xF(r,()=>r.remoteSyncer.rejectFailedWrite(A.batchId,s)),await $a(r)}}(t,e),CF(t)&&_F(t)}async function a_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=li(n);n.L_.add(3),await Wa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await _u(n)}async function U0(t,e){const n=ue(t);e?(n.L_.delete(2),await _u(n)):e||(n.L_.add(2),await Wa(n),n.q_.set("Unknown"))}function qa(t){return t.K_||(t.K_=function(n,r,s){const A=ue(n);return A.w_(),new CL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:TL.bind(null,t),Ro:FL.bind(null,t),mo:UL.bind(null,t),d_:kL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Kv(t)?Hv(t):t.q_.set("Unknown")):(await t.K_.stop(),BF(t))})),t.K_}function XA(t){return t.U_||(t.U_=function(n,r,s){const A=ue(n);return A.w_(),new _L(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RL.bind(null,t),mo:DL.bind(null,t),f_:NL.bind(null,t),g_:PL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $a(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,r,s,A){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=A,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,A){const i=Date.now()+r,o=new Gv(e,n,i,s,A);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ja(t,e){if(Mt("AsyncQueue",`${e}: ${t}`),oi(t))return new X(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Ll(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new ia(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.W_=new ht(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ka{constructor(e,n,r,s,A,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,A){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new ka(e,n,ia.emptySet(n),i,r,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OL{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),A=s.queries;s.queries=c_(),A.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new X(K.ABORTED,"Firestore shutting down"))}}function c_(){return new ai(t=>B1(t),wu)}async function zv(t,e){const n=ue(t);let r=3;const s=e.query;let A=n.queries.get(s);A?!A.H_()&&e.J_()&&(r=2):(A=new LL,r=e.J_()?0:1);try{switch(r){case 0:A.z_=await n.onListen(s,!0);break;case 1:A.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=Ja(i,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,A),A.j_.push(e),e.Z_(n.onlineState),A.z_&&e.X_(A.z_)&&$v(n)}async function Wv(t,e){const n=ue(t),r=e.query;let s=3;const A=n.queries.get(r);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jL(t,e){const n=ue(t);let r=!1;for(const s of e){const A=s.query,i=n.queries.get(A);if(i){for(const o of i.j_)o.X_(s)&&(r=!0);i.z_=s}}r&&$v(n)}function ML(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const A of s.j_)A.onError(n);r.queries.delete(e)}function $v(t){t.Y_.forEach(e=>{e.next()})}var k0,u_;(u_=k0||(k0={})).ea="default",u_.Cache="cache";class qv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==k0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.serializer=e}Es(e){return ds(this.serializer,e)}ds(e){return e.metadata.exists?G1(this.serializer,e.document,!1):pt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Vt(e)}}class HL{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IF(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ke.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new d_(this.serializer);for(const s of e)if(s.metadata.queries){const A=r.Es(s.metadata.name);for(const i of s.metadata.queries){const o=(n.get(i)||Pe()).add(A);n.set(i,o)}}return n}async complete(){const e=await mL(this.localStore,new d_(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await wL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function IF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.key=e}}class bF{constructor(e){this.key=e}}class TF{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=C1(e),this.Ra=new ia(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new l_,s=n?n.Ra:this.Ra;let A=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),w=vu(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;f&&w?f.data.isEqual(w.data)?p!==C&&(r.track({type:3,doc:w}),_=!0):this.ga(f,w)||(r.track({type:2,doc:w}),_=!0,(a&&this.Aa(w,a)>0||c&&this.Aa(w,c)<0)&&(o=!0)):!f&&w?(r.track({type:0,doc:w}),_=!0):f&&!w&&(r.track({type:1,doc:f}),_=!0,(a||c)&&(o=!0)),_&&(w?(i=i.add(w),A=C?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:A}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,p){const C=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return C(w)-C(p)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],a=this.da.size===0&&this.current&&!s?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new ka(this.query,e.Ra,A,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new l_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new bF(r))}),this.da.forEach(r=>{e.has(r)||n.push(new EF(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GL{constructor(e){this.key=e,this.va=!1}}class zL{constructor(e,n,r,s,A,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new ai(o=>B1(o),wu),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(le.comparator),this.Na=new Map,this.La=new Pv,this.Ba={},this.ka=new Map,this.qa=Zi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WL(t,e,n=!0){const r=ng(t);let s;const A=r.Fa.get(e);return A?(r.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await FF(r,e,n,!0),s}async function $L(t,e){const n=ng(t);await FF(n,e,!0,!1)}async function FF(t,e,n,r){const s=await Ta(t.localStore,Kn(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,n);let o;return r&&(o=await Jv(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&tg(t.remoteStore,s),o}async function Jv(t,e,n,r,s){t.Ka=(h,f,w)=>async function(C,_,y,B){let v=_.view.ma(y);v.ns&&(v=await rf(C.localStore,_.query,!1).then(({documents:I})=>_.view.ma(I,v)));const R=B&&B.targetChanges.get(_.targetId),Q=B&&B.targetMismatches.get(_.targetId)!=null,N=_.view.applyChanges(v,C.isPrimaryClient,R,Q);return S0(C,_.targetId,N.wa),N.snapshot}(t,h,f,w);const A=await rf(t.localStore,e,!0),i=new TF(e,A.Ts),o=i.ma(A.documents),a=xu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,a);S0(t,n,c.wa);const d=new KL(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function qL(t,e,n){const r=ue(t),s=r.Fa.get(e),A=r.Ma.get(s.targetId);if(A.length>1)return r.Ma.set(s.targetId,A.filter(i=>!wu(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fa(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ua(r.remoteStore,s.targetId),Sa(r,s.targetId)}).catch(ii)):(Sa(r,s.targetId),await Fa(r.localStore,s.targetId,!0))}async function JL(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ua(n.remoteStore,r.targetId))}async function XL(t,e,n){const r=ey(t);try{const s=await function(i,o){const a=ue(i),c=Ct.now(),d=o.reduce((w,p)=>w.add(p.key),Pe());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let p=tr(),C=Pe();return a.cs.getEntries(w,d).next(_=>{p=_,p.forEach((y,B)=>{B.isValidDocument()||(C=C.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,p)).next(_=>{h=_;const y=[];for(const B of o){const v=B4(B,h.get(B.key).overlayedDocument);v!=null&&y.push(new qs(B.key,v,d1(v.value.mapValue),xt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,c,y,o)}).next(_=>{f=_;const y=_.applyToLocalDocumentSet(h,C);return a.documentOverlayCache.saveOverlays(w,_.batchId,y)})}).then(()=>({batchId:f.batchId,changes:I1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new ht(Re)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,s.batchId,n),await Js(r,s.changes),await $a(r.remoteStore)}catch(s){const A=Ja(s,"Failed to persist write");n.reject(A)}}async function UF(t,e){const n=ue(t);try{const r=await gL(n.localStore,e);e.targetChanges.forEach((s,A)=>{const i=n.Na.get(A);i&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?_e(i.va):s.removedDocuments.size>0&&(_e(i.va),i.va=!1))}),await Js(n,r,e)}catch(r){await ii(r)}}function h_(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((A,i)=>{const o=i.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const a=ue(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&$v(a)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YL(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),A=s&&s.key;if(A){let i=new ht(le.comparator);i=i.insert(A,pt.newNoDocument(A,Ie.min()));const o=Pe().add(A),a=new Bu(Ie.min(),new Map,new ht(Re),i,o);await UF(r,a),r.Oa=r.Oa.remove(A),r.Na.delete(e),Zv(r)}else await Fa(r.localStore,e,!1).then(()=>Sa(r,e,n)).catch(ii)}async function ZL(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await fL(n.localStore,e);Yv(n,r,null),Xv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Js(n,s)}catch(s){await ii(s)}}async function eO(t,e,n){const r=ue(t);try{const s=await function(i,o){const a=ue(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(_e(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);Yv(r,e,n),Xv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Js(r,s)}catch(s){await ii(s)}}async function tO(t,e){const n=ue(t);li(n.remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=ue(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=Ja(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Xv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Yv(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const A=s.get(e);A&&(n?A.reject(n):A.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Sa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||kF(t,r)})}function kF(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ua(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Zv(t))}function S0(t,e,n){for(const r of n)r instanceof EF?(t.La.addReference(r.key,e),nO(t,r)):r instanceof bF?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||kF(t,r.key)):ve()}function nO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),Zv(t))}function Zv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Ke.fromString(e)),r=t.qa.next();t.Na.set(r,new GL(n)),t.Oa=t.Oa.insert(n,r),tg(t.remoteStore,new Fs(Kn(Ka(n.path)),r,"TargetPurposeLimboResolution",Zn.oe))}}async function Js(t,e,n){const r=ue(t),s=[],A=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Ov.Wi(a.targetId,c);A.push(h)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(a,c){const d=ue(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>M.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!oi(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),p=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(p);d.os=d.os.insert(f,C)}}}(r.localStore,A))}async function rO(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await uF(n.localStore,e);n.currentUser=e,function(A,i){A.ka.forEach(o=>{o.forEach(a=>{a.reject(new X(K.CANCELLED,i))})}),A.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Js(n,r.hs)}}function sO(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return Pe().add(r.key);{let s=Pe();const A=n.Ma.get(e);if(!A)return s;for(const i of A){const o=n.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}async function AO(t,e){const n=ue(t),r=await rf(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&S0(n,e.targetId,s.wa),s}async function iO(t,e){const n=ue(t);return gF(n.localStore,e).then(r=>Js(n,r))}async function oO(t,e,n,r){const s=ue(t),A=await function(o,a){const c=ue(o),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);A!==null?(n==="pending"?await $a(s.remoteStore):n==="acknowledged"||n==="rejected"?(Yv(s,e,r||null),Xv(s,e),function(o,a){ue(ue(o).mutationQueue).On(a)}(s.localStore,e)):ve(),await Js(s,A)):Y("SyncEngine","Cannot apply mutation batch with id: "+e)}async function aO(t,e){const n=ue(t);if(ng(n),ey(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await f_(n,r.toArray());n.Qa=!0,await U0(n.remoteStore,!0);for(const A of s)tg(n.remoteStore,A)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((A,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):s=s.then(()=>(Sa(n,i),Fa(n.localStore,i,!0))),Ua(n.remoteStore,i)}),await s,await f_(n,r),function(i){const o=ue(i);o.Na.forEach((a,c)=>{Ua(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new ht(le.comparator)}(n),n.Qa=!1,await U0(n.remoteStore,!1)}}async function f_(t,e,n){const r=ue(t),s=[],A=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await Ta(r.localStore,Kn(a[0]));for(const c of a){const d=r.Fa.get(c),h=await AO(r,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await fF(r.localStore,i);o=await Ta(r.localStore,c),await Jv(r,SF(c),i,!1,o.resumeToken)}s.push(o)}return r.Ca.d_(A),s}function SF(t){return y1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lO(t){return function(n){return ue(ue(n).persistence).Qi()}(ue(t).localStore)}async function cO(t,e,n,r){const s=ue(t);if(s.Qa)return void Y("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(n){case"current":case"not-current":{const i=await gF(s.localStore,x1(A[0])),o=Bu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Qt.EMPTY_BYTE_STRING);await Js(s,i,o);break}case"rejected":await Fa(s.localStore,e,!0),Sa(s,e,r);break;default:ve()}}async function uO(t,e,n){const r=ng(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Y("SyncEngine","Adding an already active target "+s);continue}const A=await fF(r.localStore,s),i=await Ta(r.localStore,A);await Jv(r,SF(A),i.targetId,!1,i.resumeToken),tg(r.remoteStore,i)}for(const s of n)r.Ma.has(s)&&await Fa(r.localStore,s,!1).then(()=>{Ua(r.remoteStore,s),Sa(r,s)}).catch(ii)}}function ng(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YL.bind(null,e),e.Ca.d_=jL.bind(null,e.eventManager),e.Ca.$a=ML.bind(null,e.eventManager),e}function ey(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eO.bind(null,e),e}function dO(t,e,n){const r=ue(t);(async function(A,i,o){try{const a=await i.getMetadata();if(await function(w,p){const C=ue(w),_=Vt(p.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",y=>C.Gr.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(_)>=0)}(A.localStore,a))return await i.close(),o._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(IF(a));const c=new HL(a,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await Js(A,h.Ia,void 0),await function(w,p){const C=ue(w);return C.persistence.runTransaction("Save bundle","readwrite",_=>C.Gr.saveBundleMetadata(_,p))}(A.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return fs("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cF(this.persistence,new lF,e.initialUser,this.serializer)}Ga(e){return new aF(eg.Zr,this.serializer)}Wa(e){return new mF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class QF extends Xc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await ey(this.Ja.syncEngine),await $a(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return cF(this.persistence,new lF,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new J4(r,e.asyncQueue,n)}Ha(e,n){const r=new kD(n,this.persistence);return new UD(e.asyncQueue,r)}Ga(e){const n=Lv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new Dv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,wF(),uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new mF}}class hO extends QF{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Sp&&(this.sharedClientState.syncEngine={no:oO.bind(null,n),ro:cO.bind(null,n),io:uO.bind(null,n),Qi:lO.bind(null,n),eo:iO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await aO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=wF();if(!Sp.D(n))throw new X(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Lv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Yc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rO.bind(null,this.syncEngine),await U0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OL}()}createDatastore(e){const n=Cu(e.databaseInfo.databaseId),r=function(A){return new xL(A)}(e.databaseInfo);return function(A,i,o,a){return new IL(A,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,A,i,o){return new bL(r,s,A,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>h_(this.syncEngine,n,0),function(){return o_.D()?new o_:new vL}())}createSyncEngine(e,n){return function(s,A,i,o,a,c,d){const h=new zL(s,A,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const A=ue(s);Y("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Wa(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yc.provider={build:()=>new Yc};function g_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new yn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new VL(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new X(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,A){const i=ue(s),o={documents:A.map(h=>qc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Ke.emptyPath(),o,A.length),c=new Map;a.forEach(h=>{const f=U4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());_e(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new za(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=le.fromPath(r);this.mutations.push(new bv(s,this.precondition(s)))}),await async function(r,s){const A=ue(r),i={writes:s.map(o=>Jc(A.serializer,o))};await A.Mo("Commit",A.serializer.databaseId,Ke.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ve();n=Ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ie.min())?xt.exists(!1):xt.updateTime(n):xt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ie.min()))throw new X(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xt.updateTime(n)}return xt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,s,A){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=A,this._u=r.maxAttempts,this.t_=new Mv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new gO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!pu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!N1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,r,s,A){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=JT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(r,async i=>{Y("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Y("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ja(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rp(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await uF(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function p_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ty(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>a_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>a_(e.remoteStore,s)),t._onlineComponents=e}async function ty(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await Rp(t,new Xc)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Rp(t,new Xc);return t._offlineComponents}async function sg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await p_(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await p_(t,new Yc))),t._onlineComponents}function RF(t){return ty(t).then(e=>e.persistence)}function ny(t){return ty(t).then(e=>e.localStore)}function NF(t){return sg(t).then(e=>e.remoteStore)}function ry(t){return sg(t).then(e=>e.syncEngine)}function wO(t){return sg(t).then(e=>e.datastore)}async function Qa(t){const e=await sg(t),n=e.eventManager;return n.onListen=WL.bind(null,e.syncEngine),n.onUnlisten=qL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$L.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JL.bind(null,e.syncEngine),n}function vO(t){return t.asyncQueue.enqueue(async()=>{const e=await RF(t),n=await NF(t);return e.setNetworkEnabled(!0),function(s){const A=ue(s);return A.L_.delete(0),_u(A)}(n)})}function yO(t){return t.asyncQueue.enqueue(async()=>{const e=await RF(t),n=await NF(t);return e.setNetworkEnabled(!1),async function(s){const A=ue(s);A.L_.add(0),await Wa(A),A.q_.set("Offline")}(n)})}function BO(t,e){const n=new yn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await function(c,d){const h=ue(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new X(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ja(o,`Failed to get document '${A} from cache`);i.reject(a)}}(await ny(t),e,n)),n.promise}function PF(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new rg({next:f=>{d.Za(),i.enqueueAndForget(()=>Wv(A,h));const w=f.docs.has(o);!w&&f.fromCache?c.reject(new X(K.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&a&&a.source==="server"?c.reject(new X(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new qv(Ka(o.path),d,{includeMetadataChanges:!0,_a:!0});return zv(A,h)}(await Qa(t),t.asyncQueue,e,n,r)),r.promise}function xO(t,e){const n=new yn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await rf(s,A,!0),a=new TF(A,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=Ja(o,`Failed to execute query '${A} against cache`);i.reject(a)}}(await ny(t),e,n)),n.promise}function DF(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new rg({next:f=>{d.Za(),i.enqueueAndForget(()=>Wv(A,h)),f.fromCache&&a.source==="server"?c.reject(new X(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new qv(o,d,{includeMetadataChanges:!0,_a:!0});return zv(A,h)}(await Qa(t),t.asyncQueue,e,n,r)),r.promise}function CO(t,e){const n=new rg(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){ue(s).Y_.add(A),A.next()}(await Qa(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){ue(s).Y_.delete(A)}(await Qa(t),n))}}function _O(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?D1().encode(i):i,function(d,h){return new fO(d,h)}(function(d,h){if(d instanceof Uint8Array)return g_(d,h);if(d instanceof ArrayBuffer)return g_(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Cu(e));t.asyncQueue.enqueueAndForget(async()=>{dO(await ry(t),s,r)})}function IO(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const A=ue(r);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await ny(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,n){if(!n)throw new X(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OF(t,e,n,r){if(e===!0&&r===!0)throw new X(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w_(t){if(!le.isDocumentKey(t))throw new X(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function v_(t){if(le.isDocumentKey(t))throw new X(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ag(t);throw new X(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jF(t,e){if(e<=0)throw new X(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vD;switch(r.type){case"firstParty":return new CD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=m_.get(n);r&&(Y("ComponentProvider","Removing Datastore"),m_.delete(n),r.terminate())}(this),Promise.resolve()}}function EO(t,e,n,r={}){var s;const A=(t=et(t,Iu))._getSettings(),i=`${e}:${n}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=ln.MOCK_USER;else{o=ON(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ln(c)}t._authCredentials=new yD(new qT(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gn=class MF{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new MF(this.firestore,e,this._query)}},bt=class VF{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new LA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new VF(this.firestore,e,this._key)}},LA=class HF extends Gn{constructor(e,n,r){super(e,n,Ka(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new le(e))}withConverter(e){return new HF(this.firestore,e,this._path)}};function KF(t,e,...n){if(t=Fe(t),sy("collection","path",e),t instanceof Iu){const r=Ke.fromString(e,...n);return v_(r),new LA(t,null,r)}{if(!(t instanceof bt||t instanceof LA))throw new X(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return v_(r),new LA(t.firestore,null,r)}}function bO(t,e){if(t=et(t,Iu),sy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gn(t,null,function(r){return new $s(Ke.emptyPath(),r)}(e))}function af(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=JT.newId()),sy("doc","path",e),t instanceof Iu){const r=Ke.fromString(e,...n);return w_(r),new bt(t,null,new le(r))}{if(!(t instanceof bt||t instanceof LA))throw new X(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return w_(r),new bt(t.firestore,t instanceof LA?t.converter:null,new le(r))}}function GF(t,e){return t=Fe(t),e=Fe(e),(t instanceof bt||t instanceof LA)&&(e instanceof bt||e instanceof LA)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function zF(t,e){return t=Fe(t),e=Fe(e),t instanceof Gn&&e instanceof Gn&&t.firestore===e.firestore&&wu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mv(this,"async_queue_retry"),this.Vu=()=>{const r=uh();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oi(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Mt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Gv.createAndSchedule(this,e,n,r,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Q0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const A of r)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class TO{constructor(){this._progressObserver={},this._taskCompletionResolver=new yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=-1;let Ht=class extends Iu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new B_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B_(e),this._firestoreClient=void 0,await e}}};function Rn(t){if(t._terminated)throw new X(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WF(t),t._firestoreClient}function WF(t){var e,n,r;const s=t._freezeSettings(),A=function(o,a,c,d){return new ZD(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,LF(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new mO(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function UO(t,e){fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return $F(t,Yc.provider,{build:r=>new QF(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function kO(t){fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();$F(t,Yc.provider,{build:n=>new hO(n,e.cacheSizeBytes)})}function $F(t,e,n){if((t=et(t,Ht))._firestoreClient||t._terminated)throw new X(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new X(K.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},WF(t)}function SO(t){if(t._initialized&&!t._terminated)throw new X(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!us.D())return Promise.resolve();const s=r+"main";await us.delete(s)}(Lv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function QO(t){return function(n){const r=new yn;return n.asyncQueue.enqueueAndForget(async()=>tO(await ry(n),r)),r.promise}(Rn(t=et(t,Ht)))}function RO(t){return vO(Rn(t=et(t,Ht)))}function NO(t){return yO(Rn(t=et(t,Ht)))}function PO(t,e){const n=Rn(t=et(t,Ht)),r=new TO;return _O(n,t._databaseId,e,r),r}function DO(t,e){return IO(Rn(t=et(t,Ht)),e).then(n=>n?new Gn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(Qt.fromBase64String(e))}catch(n){throw new X(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YA=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let A=0;A<r.length;++A)if(r[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=/^__.*__$/;class OO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ga(e,this.data,n,this.fieldTransforms)}}class qF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class og{constructor(e,n,r,s,A,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(JF(this.Cu)&&LO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cu(e)}Qu(e,n,r,s=!1){return new og({Cu:e,methodName:n,qu:r,path:Bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uo(t){const e=t._freezeSettings(),n=Cu(t._databaseId);return new jO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ag(t,e,n,r,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,n,s);dy("Data must be an object, but it was:",i,r);const o=ZF(r,i);let a,c;if(A.merge)a=new er(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=R0(e,h,n);if(!i.contains(f))throw new X(K.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);tU(d,f)||d.push(f)}a=new er(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new OO(new mn(o),a,c)}class Eu extends co{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eu}}function XF(t,e,n){return new og({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iy extends co{_toFieldTransform(e){return new yu(e.path,new Ia)}isEqual(e){return e instanceof iy}}class oy extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=XF(this,e,!0),r=this.Ku.map(A=>ho(A,n)),s=new qi(r);return new yu(e.path,s)}isEqual(e){return e instanceof oy&&Oc(this.Ku,e.Ku)}}class ay extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=XF(this,e,!0),r=this.Ku.map(A=>ho(A,n)),s=new Ji(r);return new yu(e.path,s)}isEqual(e){return e instanceof ay&&Oc(this.Ku,e.Ku)}}class ly extends co{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ea(e.serializer,T1(e.serializer,this.$u));return new yu(e.path,n)}isEqual(e){return e instanceof ly&&this.$u===e.$u}}function cy(t,e,n,r){const s=t.Qu(1,e,n);dy("Data must be an object, but it was:",s,r);const A=[],i=mn.empty();lo(r,(a,c)=>{const d=hy(e,a,n);c=Fe(c);const h=s.Nu(d);if(c instanceof Eu)A.push(d);else{const f=ho(c,h);f!=null&&(A.push(d),i.set(d,f))}});const o=new er(A);return new qF(i,o,s.fieldTransforms)}function uy(t,e,n,r,s,A){const i=t.Qu(1,e,n),o=[R0(e,r,n)],a=[s];if(A.length%2!=0)throw new X(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)o.push(R0(e,A[f])),a.push(A[f+1]);const c=[],d=mn.empty();for(let f=o.length-1;f>=0;--f)if(!tU(c,o[f])){const w=o[f];let p=a[f];p=Fe(p);const C=i.Nu(w);if(p instanceof Eu)c.push(w);else{const _=ho(p,C);_!=null&&(c.push(w),d.set(w,_))}}const h=new er(c);return new qF(d,h,i.fieldTransforms)}function YF(t,e,n,r=!1){return ho(n,t.Qu(r?4:3,e))}function ho(t,e){if(eU(t=Fe(t)))return dy("Unsupported field value:",e,t),ZF(t,e);if(t instanceof co)return function(r,s){if(!JF(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const A=r._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const A=[];let i=0;for(const o of r){let a=ho(o,s.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),A.push(a),i++}return{arrayValue:{values:A}}}(t,e)}return function(r,s){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const A=Ct.fromDate(r);return{timestampValue:ba(s.serializer,A)}}if(r instanceof Ct){const A=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ba(s.serializer,A)}}if(r instanceof ig)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ps)return{bytesValue:j1(s.serializer,r._byteString)};if(r instanceof bt){const A=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Sv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ay)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return Ev(o.serializer,a)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ag(r)}`)}(t,e)}function ZF(t,e){const n={};return a1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,s)=>{const A=ho(s,e.Mu(r));A!=null&&(n[r]=A)}),{mapValue:{fields:n}}}function eU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof ig||t instanceof ps||t instanceof bt||t instanceof co||t instanceof Ay)}function dy(t,e,n){if(!eU(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ag(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function R0(t,e,n){if((e=Fe(e))instanceof YA)return e._internalPath;if(typeof e=="string")return hy(t,e);throw lf("Field path arguments must be of type string or ",t,!1,void 0,n)}const MO=new RegExp("[~\\*/\\[\\]]");function hy(t,e,n){if(e.search(MO)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new YA(...e.split("."))._internalPath}catch{throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lf(t,e,n,r,s){const A=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(A||i)&&(a+=" (found",A&&(a+=` in field ${r}`),i&&(a+=` in document ${s}`),a+=")"),new X(K.INVALID_ARGUMENT,o+t+a)}function tU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s,A){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VO extends Zc{data(){return super.data()}}function lg(t,e){return typeof e=="string"?hy(t,e):e instanceof YA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class bu extends fy{}function oA(t,e,...n){let r=[];e instanceof fy&&r.push(e),r=r.concat(n),function(A){const i=A.filter(a=>a instanceof gy).length,o=A.filter(a=>a instanceof cg).length;if(i>1||i>0&&o>0)throw new X(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class cg extends bu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new cg(e,n,r)}_apply(e){const n=this._parse(e);return sU(e._query,n),new Gn(e.firestore,e.converter,B0(e._query,n))}_parse(e){const n=uo(e.firestore);return function(A,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){C_(h,d);const w=[];for(const p of h)w.push(x_(a,A,p));f={arrayValue:{values:w}}}else f=x_(a,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||C_(h,d),f=YF(o,i,h,d==="in"||d==="not-in");return Ge.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function HO(t,e,n){const r=e,s=lg("where",t);return cg._create(s,r,n)}class gy extends fy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:it.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,A){let i=s;const o=A.getFlattenedFilters();for(const a of o)sU(i,a),i=B0(i,a)}(e._query,n),new Gn(e.firestore,e.converter,B0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends bu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new py(e,n)}_apply(e){const n=function(s,A,i){if(s.startAt!==null)throw new X(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $c(A,i)}(e._query,this._field,this._direction);return new Gn(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new $s(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function KO(t,e="asc"){const n=e,r=lg("orderBy",t);return py._create(r,n)}class ug extends bu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ug(e,n,r)}_apply(e){return new Gn(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function GO(t){return jF("limit",t),ug._create("limit",t,"F")}function zO(t){return jF("limitToLast",t),ug._create("limitToLast",t,"L")}class dg extends bu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new dg(e,n,r)}_apply(e){const n=rU(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,function(s,A){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,n))}}function WO(...t){return dg._create("startAt",t,!0)}function $O(...t){return dg._create("startAfter",t,!1)}class hg extends bu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new hg(e,n,r)}_apply(e){const n=rU(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,function(s,A){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,n))}}function qO(...t){return hg._create("endBefore",t,!1)}function JO(...t){return hg._create("endAt",t,!0)}function rU(t,e,n,r){if(n[0]=Fe(n[0]),n[0]instanceof Zc)return function(A,i,o,a,c){if(!a)throw new X(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of Aa(A))if(h.field.isKeyField())d.push(Wi(i,a.key));else{const f=a.data.field(h.field);if($f(f))throw new X(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new X(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new JA(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=uo(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new X(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let p=0;p<d.length;p++){const C=d[p];if(f[p].field.isKeyField()){if(typeof C!="string")throw new X(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof C}`);if(!_v(i)&&C.indexOf("/")!==-1)throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${C}' contains a slash.`);const _=i.path.child(Ke.fromString(C));if(!le.isDocumentKey(_))throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const y=new le(_);w.push(Wi(o,y))}else{const _=YF(a,c,C);w.push(_)}}return new JA(w,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function x_(t,e,n){if(typeof(n=Fe(n))=="string"){if(n==="")throw new X(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_v(e)&&n.indexOf("/")!==-1)throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!le.isDocumentKey(r))throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wi(t,new le(r))}if(n instanceof bt)return Wi(t,n._key);throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ag(n)}.`)}function C_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sU(t,e){const n=function(s,A){for(const i of s)for(const o of i.getFlattenedFilters())if(A.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class my{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(WA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(s,A)=>{r[s]=this.convertValue(A,n)}),r}convertVectorValue(e){var n,r,s;const A=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(i=>vt(i.doubleValue));return new Ay(A)}convertGeoPoint(e){return new ig(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const n=Ms(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);_e(X1(r));const s=new $A(r.get(1),r.get(3)),A=new le(r.popFirst(5));return s.isEqual(n)||Mt(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class XO extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Vs=class extends Zc{constructor(e,n,r,s,A,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},cc=class extends Vs{data(e={}){return super.data(e)}},ZA=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ui(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cc(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new cc(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ui(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>A||o.type!==3).map(o=>{const a=new cc(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ui(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:YO(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function YO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function AU(t,e){return t instanceof Vs&&e instanceof Vs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ZA&&e instanceof ZA&&t._firestore===e._firestore&&zF(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){t=et(t,bt);const e=et(t.firestore,Ht);return PF(Rn(e),t._key).then(n=>wy(e,t,n))}class fo extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function ej(t){t=et(t,bt);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return BO(n,t._key).then(s=>new Vs(e,r,t._key,s,new Ui(s!==null&&s.hasLocalMutations,!0),t.converter))}function tj(t){t=et(t,bt);const e=et(t.firestore,Ht);return PF(Rn(e),t._key,{source:"server"}).then(n=>wy(e,t,n))}function nj(t){t=et(t,Gn);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return nU(t._query),DF(n,t._query).then(s=>new ZA(e,r,t,s))}function rj(t){t=et(t,Gn);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return xO(n,t._query).then(s=>new ZA(e,r,t,s))}function sj(t){t=et(t,Gn);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return DF(n,t._query,{source:"server"}).then(s=>new ZA(e,r,t,s))}function __(t,e,n){t=et(t,bt);const r=et(t.firestore,Ht),s=fg(t.converter,e,n);return Tu(r,[ag(uo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xt.none())])}function I_(t,e,n,...r){t=et(t,bt);const s=et(t.firestore,Ht),A=uo(s);let i;return i=typeof(e=Fe(e))=="string"||e instanceof YA?uy(A,"updateDoc",t._key,e,n,r):cy(A,"updateDoc",t._key,e),Tu(s,[i.toMutation(t._key,xt.exists(!0))])}function Aj(t){return Tu(et(t.firestore,Ht),[new za(t._key,xt.none())])}function ij(t,e){const n=et(t.firestore,Ht),r=af(t),s=fg(t.converter,e);return Tu(n,[ag(uo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xt.exists(!1))]).then(()=>r)}function iU(t,...e){var n,r,s;t=Fe(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Q0(e[i])||(A=e[i],i++);const o={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(Q0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let a,c,d;if(t instanceof bt)c=et(t.firestore,Ht),d=Ka(t._key.path),a={next:h=>{e[i]&&e[i](wy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=et(t,Gn);c=et(h.firestore,Ht),d=h._query;const f=new fo(c);a={next:w=>{e[i]&&e[i](new ZA(c,f,h,w))},error:e[i+1],complete:e[i+2]},nU(t._query)}return function(f,w,p,C){const _=new rg(C),y=new qv(w,_,p);return f.asyncQueue.enqueueAndForget(async()=>zv(await Qa(f),y)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>Wv(await Qa(f),y))}}(Rn(c),d,o,a)}function oj(t,e){return CO(Rn(t=et(t,Ht)),Q0(e)?e:{next:e})}function Tu(t,e){return function(r,s){const A=new yn;return r.asyncQueue.enqueueAndForget(async()=>XL(await ry(r),s,A)),A.promise}(Rn(t),e)}function wy(t,e,n){const r=n.docs.get(e._key),s=new fo(t);return new Vs(t,s,e._key,r,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lj=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uo(e)}set(e,n,r){this._verifyNotCommitted();const s=wA(e,this._firestore),A=fg(s.converter,n,r),i=ag(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,xt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const A=wA(e,this._firestore);let i;return i=typeof(n=Fe(n))=="string"||n instanceof YA?uy(this._dataReader,"WriteBatch.update",A._key,n,r,s):cy(this._dataReader,"WriteBatch.update",A._key,n),this._mutations.push(i.toMutation(A._key,xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wA(e,this._firestore);return this._mutations=this._mutations.concat(new za(n._key,xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function wA(t,e){if((t=Fe(t)).firestore!==e)throw new X(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cj=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=uo(n)}get(n){const r=wA(n,this._firestore),s=new XO(this._firestore);return this._transaction.lookup([r._key]).then(A=>{if(!A||A.length!==1)return ve();const i=A[0];if(i.isFoundDocument())return new Zc(this._firestore,s,i.key,i,r.converter);if(i.isNoDocument())return new Zc(this._firestore,s,r._key,null,r.converter);throw ve()})}set(n,r,s){const A=wA(n,this._firestore),i=fg(A.converter,r,s),o=ag(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,o),this}update(n,r,s,...A){const i=wA(n,this._firestore);let o;return o=typeof(r=Fe(r))=="string"||r instanceof YA?uy(this._dataReader,"Transaction.update",i._key,r,s,A):cy(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=wA(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wA(e,this._firestore),r=new fo(this._firestore);return super.get(e).then(s=>new Vs(this._firestore,r,n._key,s._document,new Ui(!1,!1),n.converter))}};function uj(t,e,n){t=et(t,Ht);const r=Object.assign(Object.assign({},aj),n);return function(A){if(A.maxAttempts<1)throw new X(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(A,i,o){const a=new yn;return A.asyncQueue.enqueueAndForget(async()=>{const c=await wO(A);new pO(A.asyncQueue,c,o,i,a).au()}),a.promise}(Rn(t),s=>e(new cj(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(){return new Eu("deleteField")}function hj(){return new iy("serverTimestamp")}function fj(...t){return new oy("arrayUnion",t)}function gj(...t){return new ay("arrayRemove",t)}function pj(t){return new ly("increment",t)}(function(e,n=!0){(function(s){Ha=s})(Ai),GA(new hs("firestore",(r,{instanceIdentifier:s,options:A})=>{const i=r.getProvider("app").getImmediate(),o=new Ht(new BD(r.getProvider("auth-internal")),new ID(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $A(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:n},A),o._setSettings(A),o},"PUBLIC").setMultipleInstances(!0)),Kr(fC,"4.7.3",e),Kr(fC,"4.7.3","esm2017")})();const mj="@firebase/firestore-compat",wj="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function b_(){if(!XD())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}let oU=class N0{constructor(e){this._delegate=e}static fromBase64String(e){return b_(),new N0(ps.fromBase64String(e))}static fromUint8Array(e){return E_(),new N0(ps.fromUint8Array(e))}toBase64(){return b_(),this._delegate.toBase64()}toUint8Array(){return E_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){return vj(t,["next","error","complete"])}function vj(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{enableIndexedDbPersistence(e,n){return UO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return kO(e._delegate)}clearIndexedDbPersistence(e){return SO(e._delegate)}}class aU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $A||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){EO(this._delegate,e,n,r)}enableNetwork(){return RO(this._delegate)}disableNetwork(){return NO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,OF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return QO(this._delegate)}onSnapshotsInSync(e){return oj(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ra(this,KF(this._delegate,e))}catch(n){throw jn(n,"collection()","Firestore.collection()")}}doc(e){try{return new _r(this,af(this._delegate,e))}catch(n){throw jn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new On(this,bO(this._delegate,e))}catch(n){throw jn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return uj(this._delegate,n=>e(new lU(this,n)))}batch(){return Rn(this._delegate),new cU(new lj(this._delegate,e=>Tu(this._delegate,e)))}loadBundle(e){return PO(this._delegate,e)}namedQuery(e){return DO(this._delegate,e).then(n=>n?new On(this,n):null)}}class gg extends my{constructor(e){super(),this.firestore=e}convertBytes(e){return new oU(new ps(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return _r.forKey(n,this.firestore,null)}}function Bj(t){mD(t)}class lU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new gg(e)}get(e){const n=ki(e);return this._delegate.get(n).then(r=>new eu(this._firestore,new Vs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=ki(e);return r?(vy("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=ki(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=ki(e);return this._delegate.delete(n),this}}class cU{constructor(e){this._delegate=e}set(e,n,r){const s=ki(e);return r?(vy("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=ki(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=ki(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class eo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new cc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tu(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=eo.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let A=s.get(n);return A||(A=new eo(e,new gg(e),n),s.set(n,A)),A}}eo.INSTANCES=new WeakMap;class _r{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new gg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _r(n,new bt(n._delegate,r,new le(e)))}static forKey(e,n,r){return new _r(n,new bt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ra(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ra(this.firestore,KF(this._delegate,e))}catch(n){throw jn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof bt?GF(this._delegate,e):!1}set(e,n){n=vy("DocumentReference.set",n);try{return n?__(this._delegate,e,n):__(this._delegate,e)}catch(r){throw jn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?I_(this._delegate,e):I_(this._delegate,e,n,...r)}catch(s){throw jn(s,"updateDoc()","DocumentReference.update()")}}delete(){return Aj(this._delegate)}onSnapshot(...e){const n=uU(e),r=dU(e,s=>new eu(this.firestore,new Vs(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return iU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=ej(this._delegate):(e==null?void 0:e.source)==="server"?n=tj(this._delegate):n=ZO(this._delegate),n.then(r=>new eu(this.firestore,new Vs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _r(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jn(t,e,n){return t.message=t.message.replace(e,n),t}function uU(t){for(const e of t)if(typeof e=="object"&&!P0(e))return e;return{}}function dU(t,e){var n,r;let s;return P0(t[0])?s=t[0]:P0(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:A=>{s.next&&s.next(e(A))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class eu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new _r(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return AU(this._delegate,e._delegate)}}class tu extends eu{data(e){const n=this._delegate.data(e);return this._delegate._converter||wD(n!==void 0),n}}class On{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new gg(e)}where(e,n,r){try{return new On(this.firestore,oA(this._delegate,HO(e,n,r)))}catch(s){throw jn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new On(this.firestore,oA(this._delegate,KO(e,n)))}catch(r){throw jn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new On(this.firestore,oA(this._delegate,GO(e)))}catch(n){throw jn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new On(this.firestore,oA(this._delegate,zO(e)))}catch(n){throw jn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new On(this.firestore,oA(this._delegate,WO(...e)))}catch(n){throw jn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new On(this.firestore,oA(this._delegate,$O(...e)))}catch(n){throw jn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new On(this.firestore,oA(this._delegate,qO(...e)))}catch(n){throw jn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new On(this.firestore,oA(this._delegate,JO(...e)))}catch(n){throw jn(n,"endAt()","Query.endAt()")}}isEqual(e){return zF(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=rj(this._delegate):(e==null?void 0:e.source)==="server"?n=sj(this._delegate):n=nj(this._delegate),n.then(r=>new D0(this.firestore,new ZA(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=uU(e),r=dU(e,s=>new D0(this.firestore,new ZA(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return iU(this._delegate,n,r)}withConverter(e){return new On(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class xj{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new tu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class D0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new On(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new tu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new xj(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new tu(this._firestore,r))})}isEqual(e){return AU(this._delegate,e._delegate)}}class Ra extends On{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _r(this.firestore,e):null}doc(e){try{return e===void 0?new _r(this.firestore,af(this._delegate)):new _r(this.firestore,af(this._delegate,e))}catch(n){throw jn(n,"doc()","CollectionReference.doc()")}}add(e){return ij(this._delegate,e).then(n=>new _r(this.firestore,n))}isEqual(e){return GF(this._delegate,e._delegate)}withConverter(e){return new Ra(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ki(t){return et(t,bt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(...e){this._delegate=new YA(...e)}static documentId(){return new yy(Bt.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof YA?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._delegate=e}static serverTimestamp(){const e=hj();return e._methodName="FieldValue.serverTimestamp",new _i(e)}static delete(){const e=dj();return e._methodName="FieldValue.delete",new _i(e)}static arrayUnion(...e){const n=fj(...e);return n._methodName="FieldValue.arrayUnion",new _i(n)}static arrayRemove(...e){const n=gj(...e);return n._methodName="FieldValue.arrayRemove",new _i(n)}static increment(e){const n=pj(e);return n._methodName="FieldValue.increment",new _i(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj={Firestore:aU,GeoPoint:ig,Timestamp:Ct,Blob:oU,Transaction:lU,WriteBatch:cU,DocumentReference:_r,DocumentSnapshot:eu,Query:On,QueryDocumentSnapshot:tu,QuerySnapshot:D0,CollectionReference:Ra,FieldPath:yy,FieldValue:_i,setLogLevel:Bj,CACHE_SIZE_UNLIMITED:FO};function _j(t,e){t.INTERNAL.registerComponent(new hs("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},Cj)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){_j(t,(e,n)=>new aU(e,n,new yj)),t.registerVersion(mj,wj)}Ij(es);function By(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const Il={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Io={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function hU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bj=Ej,Tj=hU,fU=new ao("auth","Firebase",hU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new zf("@firebase/auth");function Fj(t,...e){cf.logLevel<=Me.WARN&&cf.warn(`Auth (${Ai}): ${t}`,...e)}function dh(t,...e){cf.logLevel<=Me.ERROR&&cf.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Cy(t,...e)}function en(t,...e){return Cy(t,...e)}function xy(t,e,n){const r=Object.assign(Object.assign({},Tj()),{[e]:n});return new ao("auth","Firebase",r).create(e,{appName:t.name})}function un(t){return xy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xa(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xn(t,"argument-error"),xy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fU.create(t,...e)}function ne(t,e,...n){if(!t)throw Cy(e,...n)}function as(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function Wr(t,e){t||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _y(){return T_()==="http:"||T_()==="https:"}function T_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_y()||ET()||"connection"in navigator)?navigator.onLine:!0}function kj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=jN()||hv()}get(){return Uj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new Fu(3e4,6e4);function Nt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pt(t,e,n,r,s={}){return pU(t,s,async()=>{let A={},i={};r&&(e==="GET"?i=r:A={body:JSON.stringify(r)});const o=Va(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},A);return VN()||(c.referrerPolicy="no-referrer"),gU.fetch()(mU(t,t.config.apiHost,n,o),c)})}async function pU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Sj),e);try{const s=new Nj(t),A=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw Ml(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const o=A.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Ml(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xy(t,d,c);xn(t,d)}}catch(s){if(s instanceof Vn)throw s;xn(t,"network-request-failed",{message:String(s)})}}async function Xs(t,e,n,r,s={}){const A=await Pt(t,e,n,r,s);return"mfaPendingCredential"in A&&xn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function mU(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Iy(t.config,s):`${t.config.apiScheme}://${s}`}function Rj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Nj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),Qj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=en(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){return t!==void 0&&t.getResponse!==void 0}function U_(t){return t!==void 0&&t.enterprise!==void 0}class Pj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Rj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t){return(await Pt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Lj(t,e){return Pt(t,"GET","/v2/recaptchaConfig",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){return Pt(t,"POST","/v1/accounts:delete",e)}async function jj(t,e){return Pt(t,"POST","/v1/accounts:update",e)}async function wU(t,e){return Pt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mj(t,e=!1){const n=Fe(t),r=await n.getIdToken(e),s=pg(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:r,authTime:uc(Np(s.auth_time)),issuedAtTime:uc(Np(s.iat)),expirationTime:uc(Np(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function Np(t){return Number(t)*1e3}function pg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const s=xT(n);return s?JSON.parse(s):(dh("Failed to decode base64 JWT payload"),null)}catch(s){return dh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function k_(t){const e=pg(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&Vj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Vj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Hs(t,wU(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?vU(A.providerUserInfo):[],o=Gj(t.providerData,i),a=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:o,metadata:new L0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Kj(t){const e=Fe(t);await ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vU(t){return t.map(e=>{var{providerId:n}=e,r=By(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e){const n=await pU(t,{},async()=>{const r=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=mU(t,s,"/v1/token",`key=${A}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",gU.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Wj(t,e){return Pt(t,"POST","/v2/accounts:revokeToken",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=k_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:A}=await zj(e,n);this.updateTokensAndExpiration(r,s,Number(A))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:A}=n,i=new oa;return r&&(ne(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(ne(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,A=By(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new L0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const n=await Hs(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mj(this,e)}reload(){return Kj(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ru(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(St(this.auth.app))return Promise.reject(un(this.auth));const e=await this.getIdToken();return await Hs(this,Oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,A,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,w=(A=n.phoneNumber)!==null&&A!==void 0?A:void 0,p=(i=n.photoURL)!==null&&i!==void 0?i:void 0,C=(o=n.tenantId)!==null&&o!==void 0?o:void 0,_=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,B=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:R,isAnonymous:Q,providerData:N,stsTokenManager:I}=n;ne(v&&I,e,"internal-error");const x=oa.fromJSON(this.name,I);ne(typeof v=="string",e,"internal-error"),aA(h,e.name),aA(f,e.name),ne(typeof R=="boolean",e,"internal-error"),ne(typeof Q=="boolean",e,"internal-error"),aA(w,e.name),aA(p,e.name),aA(C,e.name),aA(_,e.name),aA(y,e.name),aA(B,e.name);const b=new Us({uid:v,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:Q,photoURL:p,phoneNumber:w,tenantId:C,stsTokenManager:x,createdAt:y,lastLoginAt:B});return N&&Array.isArray(N)&&(b.providerData=N.map(k=>Object.assign({},k))),_&&(b._redirectEventId=_),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new oa;s.updateFromServerResponse(n);const A=new Us({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ru(A),A}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?vU(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),o=new oa;o.updateFromIdToken(r);const a=new Us({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;function hr(t){Wr(t instanceof Function,"Expected a class definition");let e=S_.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yU.type="NONE";const Na=yU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e,n){return`firebase:${t}:${e}:${n}`}class aa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:A}=this.auth;this.fullUserKey=Di(this.userKey,s.apiKey,A),this.fullPersistenceKey=Di("persistence",s.apiKey,A),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new aa(hr(Na),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||hr(Na);const i=Di(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=Us._fromJSON(e,d);c!==A&&(o=h),A=c;break}}catch{}const a=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!a.length?new aa(A,e,r):(A=a[0],o&&await A._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new aa(A,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_U(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IU(e))return"Blackberry";if(EU(e))return"Webos";if(xU(e))return"Safari";if((e.includes("chrome/")||CU(e))&&!e.includes("edge/"))return"Chrome";if(Uu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BU(t=Ft()){return/firefox\//i.test(t)}function xU(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CU(t=Ft()){return/crios\//i.test(t)}function _U(t=Ft()){return/iemobile/i.test(t)}function Uu(t=Ft()){return/android/i.test(t)}function IU(t=Ft()){return/blackberry/i.test(t)}function EU(t=Ft()){return/webos/i.test(t)}function ku(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $j(t=Ft()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function qj(t=Ft()){var e;return ku(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Jj(){return bT()&&document.documentMode===10}function bU(t=Ft()){return ku(t)||Uu(t)||EU(t)||IU(t)||/windows phone/i.test(t)||_U(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t,e=[]){let n;switch(t){case"Browser":n=Q_(Ft());break;case"Worker":n=`${Q_(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=A=>new Promise((i,o)=>{try{const a=e(A);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e={}){return Pt(t,"GET","/v2/passwordPolicy",Nt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=6;class eM{constructor(e){var n,r,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:Zj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,A,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(A=a.containsUppercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new Xj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await aa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wU(this,{idToken:e}),r=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(St(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(s=a.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(St(this.app))return Promise.reject(un(this));const n=e?Fe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return St(this.app)?Promise.reject(un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return St(this.app)?Promise.reject(un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yj(this),n=new eM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Wj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const A=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(o,this,"internal-error"),o.then(()=>{i||A(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Fj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rt(t){return Fe(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=FT(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nM(t){Su=t}function Ey(t){return Su.loadJS(t)}function rM(){return Su.recaptchaV2Script}function sM(){return Su.recaptchaEnterpriseScript}function AM(){return Su.gapiScript}function FU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const iM="recaptcha-enterprise",oM="NO_RECAPTCHA";class aM{constructor(e){this.type=iM,this.auth=Rt(e)}async verify(e="verify",n=!1){async function r(A){if(!n){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,o)=>{Lj(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new Pj(a);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function s(A,i,o){const a=window.grecaptcha;U_(a)?a.enterprise.ready(()=>{a.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(oM)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{r(this.auth).then(o=>{if(!n&&U_(window.grecaptcha))s(o,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=sM();a.length!==0&&(a+=o),Ey(a).then(()=>{s(o,A,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function N_(t,e,n,r=!1){const s=new aM(t);let A;try{A=await s.verify(n)}catch{A=await s.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function su(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await N_(t,e,n,n==="getOobCode");return r(t,A)}else return r(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await N_(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(A)})}function lM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cM(t,e,n){const r=Rt(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),A=UU(e),{host:i,port:o}=uM(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${A}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||dM()}function UU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uM(t){const e=UU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const A=s[1];return{host:A,port:P_(r.substr(A.length+1))}}else{const[A,i]=r.split(":");return{host:A,port:P_(i)}}}function P_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,n){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e){return Pt(t,"POST","/v1/accounts:resetPassword",Nt(t,e))}async function hM(t,e){return Pt(t,"POST","/v1/accounts:update",e)}async function fM(t,e){return Pt(t,"POST","/v1/accounts:signUp",e)}async function gM(t,e){return Pt(t,"POST","/v1/accounts:update",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(t,e){return Xs(t,"POST","/v1/accounts:signInWithPassword",Nt(t,e))}async function mg(t,e){return Pt(t,"POST","/v1/accounts:sendOobCode",Nt(t,e))}async function mM(t,e){return mg(t,e)}async function wM(t,e){return mg(t,e)}async function vM(t,e){return mg(t,e)}async function yM(t,e){return mg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(t,e){return Xs(t,"POST","/v1/accounts:signInWithEmailLink",Nt(t,e))}async function xM(t,e){return Xs(t,"POST","/v1/accounts:signInWithEmailLink",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Ya{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Au(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Au(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,n,"signInWithPassword",pM);case"emailLink":return BM(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,r,"signUpPassword",fM);case"emailLink":return xM(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return Xs(t,"POST","/v1/accounts:signInWithIdp",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="http://localhost";class ms extends Ya{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,A=By(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new ms(r,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:CM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e){return Pt(t,"POST","/v1/accounts:sendVerificationCode",Nt(t,e))}async function IM(t,e){return Xs(t,"POST","/v1/accounts:signInWithPhoneNumber",Nt(t,e))}async function EM(t,e){const n=await Xs(t,"POST","/v1/accounts:signInWithPhoneNumber",Nt(t,e));if(n.temporaryProof)throw Ml(t,"account-exists-with-different-credential",n);return n}const bM={USER_NOT_FOUND:"user-not-found"};async function TM(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Xs(t,"POST","/v1/accounts:signInWithPhoneNumber",Nt(t,n),bM)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ya{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Li({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Li({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return IM(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return EM(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return TM(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A}=e;return!r&&!n&&!s&&!A?null:new Li({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UM(t){const e=Xo(Pl(t)).link,n=e?Xo(Pl(e)).deep_link_id:null,r=Xo(Pl(t)).deep_link_id;return(r?Xo(Pl(r)).link:null)||r||n||e||t}class wg{constructor(e){var n,r,s,A,i,o;const a=Xo(Pl(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=FM((s=a.mode)!==null&&s!==void 0?s:null);ne(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=a.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=UM(e);try{return new wg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.providerId=ci.PROVIDER_ID}static credential(e,n){return Au._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wg.parseLink(n);return ne(r,"argument-error"),Au._fromEmailAndCode(e,r.code,r.tenantId)}}ci.PROVIDER_ID="password";ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends Ys{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends Za{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ne("providerId"in n&&"signInMethod"in n,"argument-error"),ms._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ne(e.idToken||e.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return la.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return la.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:A,nonce:i,providerId:o}=e;if(!r&&!s&&!n&&!A||!o)return null;try{return new la(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:A})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Za{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Za{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="http://localhost";class Pa extends Ya{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:A}=n;return!r||!s||!A||r!==s?null:new Pa(r,A)}static _create(e,n){return new Pa(e,n)}buildRequest(){return{requestUri:kM,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="saml.";class uf extends Ys{constructor(e){ne(e.startsWith(SM),"argument-error"),super(e)}static credentialFromResult(e){return uf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return uf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Pa.fromJSON(e);return ne(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Pa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Za{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e){return Xs(t,"POST","/v1/accounts:signUp",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const A=await Us._fromIdTokenResponse(e,r,s),i=D_(r);return new kr({user:A,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=D_(r);return new kr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function D_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(t){var e;if(St(t.app))return Promise.reject(un(t));const n=Rt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SU(n,{returnSecureToken:!0}),s=await kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends Vn{constructor(e,n,r,s){var A;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new df(e,n,r,s)}}function QU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(t,A,e,r):A})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e){const n=Fe(t);await vg(!0,n,e);const{providerUserInfo:r}=await jj(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=RU(r||[]);return n.providerData=n.providerData.filter(A=>s.has(A.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function by(t,e,n=!1){const r=await Hs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",r)}async function vg(t,e,n){await ru(e);const r=RU(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";ne(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e,n=!1){const{auth:r}=t;if(St(r.app))return Promise.reject(un(r));const s="reauthenticate";try{const A=await Hs(t,QU(r,s,e,t),n);ne(A.idToken,r,"internal-error");const i=pg(A.idToken);ne(i,r,"internal-error");const{sub:o}=i;return ne(t.uid===o,r,"user-mismatch"),kr._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(t,e,n=!1){if(St(t.app))return Promise.reject(un(t));const r="signIn",s=await QU(t,r,e),A=await kr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(A.user),A}async function yg(t,e){return PU(Rt(t),e)}async function DU(t,e){const n=Fe(t);return await vg(!1,n,e.providerId),by(n,e)}async function LU(t,e){return NU(Fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e){return Xs(t,"POST","/v1/accounts:signInWithCustomToken",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t,e){if(St(t.app))return Promise.reject(un(t));const n=Rt(t),r=await NM(n,{token:e,returnSecureToken:!0}),s=await kr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ty._fromServerResponse(e,n):"totpInfo"in n?Fy._fromServerResponse(e,n):xn(e,"internal-error")}}class Ty extends Qu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ty(n)}}class Fy extends Qu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Fy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e,n){var r;ne(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ne(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ne(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ne(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uy(t){const e=Rt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DM(t,e,n){const r=Rt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Bg(r,s,n),await su(r,s,"getOobCode",wM)}async function LM(t,e,n){await kU(Fe(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uy(t),r})}async function OM(t,e){await gM(Fe(t),{oobCode:e})}async function OU(t,e){const n=Fe(t),r=await kU(n,{oobCode:e}),s=r.requestType;switch(ne(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(r.mfaInfo,n,"internal-error");default:ne(r.email,n,"internal-error")}let A=null;return r.mfaInfo&&(A=Qu._fromServerResponse(Rt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:A},operation:s}}async function jM(t,e){const{data:n}=await OU(Fe(t),e);return n.email}async function MM(t,e,n){if(St(t.app))return Promise.reject(un(t));const r=Rt(t),i=await su(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SU).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Uy(t),a}),o=await kr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function VM(t,e,n){return St(t.app)?Promise.reject(un(t)):yg(Fe(t),ci.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e,n){const r=Rt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function A(i,o){ne(o.handleCodeInApp,r,"argument-error"),o&&Bg(r,i,o)}A(s,n),await su(r,s,"getOobCode",vM)}function KM(t,e){const n=wg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GM(t,e,n){if(St(t.app))return Promise.reject(un(t));const r=Fe(t),s=ci.credentialWithLink(e,n||nu());return ne(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),yg(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){return Pt(t,"POST","/v1/accounts:createAuthUri",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t,e){const n=_y()?nu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await zM(Fe(t),r);return s||[]}async function $M(t,e){const n=Fe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Bg(n.auth,s,e);const{email:A}=await mM(n.auth,s);A!==t.email&&await t.reload()}async function qM(t,e,n){const r=Fe(t),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Bg(r.auth,A,n);const{email:i}=await yM(r.auth,A);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){return Pt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Fe(t),A={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await Hs(r,JM(r.auth,A));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function YM(t,e){const n=Fe(t);return St(n.auth.app)?Promise.reject(un(n.auth)):jU(n,e,null)}function ZM(t,e){return jU(Fe(t),null,e)}async function jU(t,e,n){const{auth:r}=t,A={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(A.email=e),n&&(A.password=n);const i=await Hs(t,hM(r,A));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},A=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=pg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new ca(A,o)}}if(!r)return null;switch(r){case"facebook.com":return new tV(A,s);case"github.com":return new nV(A,s);case"google.com":return new rV(A,s);case"twitter.com":return new sV(A,s,t.screenName||null);case"custom":case"anonymous":return new ca(A,null);default:return new ca(A,r,s)}}class ca{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class MU extends ca{constructor(e,n,r,s){super(e,n,r),this.username=s}}class tV extends ca{constructor(e,n){super(e,"facebook.com",n)}}class nV extends MU{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class rV extends ca{constructor(e,n){super(e,"google.com",n)}}class sV extends MU{constructor(e,n,r){super(e,"twitter.com",n,r)}}function AV(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:eV(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Si("enroll",e,n)}static _fromMfaPendingCredential(e){return new Si("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Si._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Si._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Rt(e),s=n.customData._serverResponse,A=(s.mfaInfo||[]).map(o=>Qu._fromServerResponse(r,o));ne(s.mfaPendingCredential,r,"internal-error");const i=Si._fromMfaPendingCredential(s.mfaPendingCredential);return new ky(i,A,async o=>{const a=await o._process(r,i);delete s.mfaInfo,delete s.mfaPendingCredential;const c=Object.assign(Object.assign({},s),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await kr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return ne(n.user,r,"internal-error"),kr._forOperation(n.user,n.operationType,c);default:xn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function iV(t,e){var n;const r=Fe(t),s=e;return ne(e.customData.operationType,r,"argument-error"),ne((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),ky._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:start",Nt(t,e))}function aV(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(t,e))}function lV(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(t,e))}class Sy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Qu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Sy(e)}async getSession(){return Si._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),A=await Hs(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(A),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Hs(this.user,lV(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:A})=>A!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Pp=new WeakMap;function cV(t){const e=Fe(t);return Pp.has(e)||Pp.set(e,Sy._fromUser(e)),Pp.get(e)}const hf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hf,"1"),this.storage.removeItem(hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=1e3,dV=10;class HU extends VU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},A=this.storage.getItem(r);Jj()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HU.type="LOCAL";const Qy=HU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU extends VU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KU.type="SESSION";const to=KU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:A}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async c=>c(n.origin,A)),a=await hV(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((o,a)=>{const c=Ru("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),o(f.data.response);break;default:clearTimeout(d),clearTimeout(A),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function gV(t){Gt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function pV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wV(){return Ry()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="firebaseLocalStorageDb",vV=1,ff="firebaseLocalStorage",zU="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cg(t,e){return t.transaction([ff],e?"readwrite":"readonly").objectStore(ff)}function yV(){const t=indexedDB.deleteDatabase(GU);return new Nu(t).toPromise()}function O0(){const t=indexedDB.open(GU,vV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ff,{keyPath:zU})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ff)?e(r):(r.close(),await yV(),e(await O0()))})})}async function L_(t,e,n){const r=Cg(t,!0).put({[zU]:e,value:n});return new Nu(r).toPromise()}async function BV(t,e){const n=Cg(t,!1).get(e),r=await new Nu(n).toPromise();return r===void 0?null:r.value}function O_(t,e){const n=Cg(t,!0).delete(e);return new Nu(n).toPromise()}const xV=800,CV=3;class WU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ry()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xg._getInstance(wV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pV(),!this.activeServiceWorker)return;this.sender=new fV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O0();return await L_(e,hf,"1"),await O_(e,hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>L_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=Cg(s,!1).getAll();return new Nu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WU.type="LOCAL";const iu=WU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t,e){return Pt(t,"POST","/v2/accounts/mfaSignIn:start",Nt(t,e))}function IV(t,e){return Pt(t,"POST","/v2/accounts/mfaSignIn:finalize",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=500,bV=6e4,Bd=1e12;class TV{constructor(e){this.auth=e,this.counter=Bd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new FV(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Bd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Bd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Bd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class FV{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ne(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=UV(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},bV)},EV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function UV(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=FU("rcb"),kV=new Fu(3e4,6e4);class SV{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Gt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ne(QV(n),e,"argument-error"),this.shouldResolveImmediately(n)&&F_(Gt().grecaptcha)?Promise.resolve(Gt().grecaptcha):new Promise((r,s)=>{const A=Gt().setTimeout(()=>{s(en(e,"network-request-failed"))},kV.get());Gt()[Dp]=()=>{Gt().clearTimeout(A),delete Gt()[Dp];const o=Gt().grecaptcha;if(!o||!F_(o)){s(en(e,"internal-error"));return}const a=o.render;o.render=(c,d)=>{const h=a(c,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${rM()}?${Va({onload:Dp,render:"explicit",hl:n})}`;Ey(i).catch(()=>{clearTimeout(A),s(en(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Gt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function QV(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class RV{async load(e){return new TV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="recaptcha",NV={theme:"light",type:"image"};let PV=class{constructor(e,n,r=Object.assign({},NV)){this.parameters=r,this.type=$U,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(e),this.isInvisible=this.parameters.size==="invisible",ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ne(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new RV:new SV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const A=i=>{i&&(this.tokenChangeListeners.delete(A),s(i))};this.tokenChangeListeners.add(A),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Gt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ne(_y()&&!Ry(),this.auth,"internal-error"),await DV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Dj(this.auth);ne(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function DV(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Li._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function LV(t,e,n){if(St(t.app))return Promise.reject(un(t));const r=Rt(t),s=await _g(r,e,Fe(n));return new Ny(s,A=>yg(r,A))}async function OV(t,e,n){const r=Fe(t);await vg(!1,r,"phone");const s=await _g(r.auth,e,Fe(n));return new Ny(s,A=>DU(r,A))}async function jV(t,e,n){const r=Fe(t);if(St(r.auth.app))return Promise.reject(un(r.auth));const s=await _g(r.auth,e,Fe(n));return new Ny(s,A=>LU(r,A))}async function _g(t,e,n){var r;const s=await n.verify();try{ne(typeof s=="string",t,"argument-error"),ne(n.type===$U,t,"argument-error");let A;if(typeof e=="string"?A={phoneNumber:e}:A=e,"session"in A){const i=A.session;if("phoneNumber"in A)return ne(i.type==="enroll",t,"internal-error"),(await oV(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{ne(i.type==="signin",t,"internal-error");const o=((r=A.multiFactorHint)===null||r===void 0?void 0:r.uid)||A.multiFactorUid;return ne(o,t,"missing-multi-factor-info"),(await _V(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await _M(t,{phoneNumber:A.phoneNumber,recaptchaToken:s});return i}}finally{n._reset()}}async function MV(t,e){const n=Fe(t);if(St(n.auth.app))return Promise.reject(un(n.auth));await by(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=class hh{constructor(e){this.providerId=hh.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,n){return _g(this.auth,e,Fe(n))}static credential(e,n){return Li._fromVerification(e,n)}static credentialFromResult(e){const n=e;return hh.credentialFromTaggedObject(n)}static credentialFromError(e){return hh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Li._fromTokenResponse(n,r):null}};no.PROVIDER_ID="phone";no.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e){return e?hr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends Ya{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VV(t){return PU(t.auth,new Py(t),t.bypassAuthState)}function HV(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),NU(n,new Py(t),t.bypassAuthState)}async function KV(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),by(n,new Py(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n,r,s,A=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:A,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VV;case"linkViaPopup":case"linkViaRedirect":return KV;case"reauthViaPopup":case"reauthViaRedirect":return HV;default:xn(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=new Fu(2e3,1e4);async function zV(t,e,n){if(St(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));const r=Rt(t);Xa(t,e,Ys);const s=go(r,n);return new ks(r,"signInViaPopup",e,s).executeNotNull()}async function WV(t,e,n){const r=Fe(t);if(St(r.auth.app))return Promise.reject(en(r.auth,"operation-not-supported-in-this-environment"));Xa(r.auth,e,Ys);const s=go(r.auth,n);return new ks(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function $V(t,e,n){const r=Fe(t);Xa(r.auth,e,Ys);const s=go(r.auth,n);return new ks(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class ks extends qU{constructor(e,n,r,s,A){super(e,n,s,A),this.provider=r,this.authWindow=null,this.pollId=null,ks.currentPopupAction&&ks.currentPopupAction.cancel(),ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Ru();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GV.get())};e()}}ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="pendingRedirect",dc=new Map;class JV extends qU{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const r=await XV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XV(t,e){const n=XU(e),r=JU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Dy(t,e){return JU(t)._set(XU(e),"true")}function YV(){dc.clear()}function Ly(t,e){dc.set(t._key(),e)}function JU(t){return hr(t._redirectPersistence)}function XU(t){return Di(qV,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t,e,n){return eH(t,e,n)}async function eH(t,e,n){if(St(t.app))return Promise.reject(un(t));const r=Rt(t);Xa(t,e,Ys),await r._initializationPromise;const s=go(r,n);return await Dy(s,r),s._openRedirect(r,e,"signInViaRedirect")}function tH(t,e,n){return nH(t,e,n)}async function nH(t,e,n){const r=Fe(t);if(Xa(r.auth,e,Ys),St(r.auth.app))return Promise.reject(un(r.auth));await r.auth._initializationPromise;const s=go(r.auth,n);await Dy(s,r.auth);const A=await YU(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",A)}function rH(t,e,n){return sH(t,e,n)}async function sH(t,e,n){const r=Fe(t);Xa(r.auth,e,Ys),await r.auth._initializationPromise;const s=go(r.auth,n);await vg(!1,r,e.providerId),await Dy(s,r.auth);const A=await YU(r);return s._openRedirect(r.auth,e,"linkViaRedirect",A)}async function AH(t,e){return await Rt(t)._initializationPromise,Ig(t,e,!1)}async function Ig(t,e,n=!1){if(St(t.app))return Promise.reject(un(t));const r=Rt(t),s=go(r,e),i=await new JV(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function YU(t){const e=Ru(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=10*60*1e3;class ZU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ek(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iH&&this.cachedEventUids.clear(),this.cachedEventUids.has(j_(e))}saveEventToCache(e){this.cachedEventUids.add(j_(e)),this.lastProcessedEventTime=Date.now()}}function j_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ek({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ek(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e={}){return Pt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lH=/^https?/;async function cH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tk(t);for(const n of e)try{if(uH(n))return}catch{}xn(t,"unauthorized-domain")}function uH(t){const e=nu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!lH.test(n))return!1;if(aH.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH=new Fu(3e4,6e4);function M_(){const t=Gt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hH(t){return new Promise((e,n)=>{var r,s,A;function i(){M_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M_(),n(en(t,"network-request-failed"))},timeout:dH.get()})}if(!((s=(r=Gt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=Gt().gapi)===null||A===void 0)&&A.load)i();else{const o=FU("iframefcb");return Gt()[o]=()=>{gapi.load?i():n(en(t,"network-request-failed"))},Ey(`${AM()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw fh=null,e})}let fh=null;function fH(t){return fh=fh||hH(t),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=new Fu(5e3,15e3),pH="__/auth/iframe",mH="emulator/auth/iframe",wH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yH(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Iy(e,mH):`https://${t.config.authDomain}/${pH}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},s=vH.get(t.config.apiHost);s&&(r.eid=s);const A=t._getFrameworks();return A.length&&(r.fw=A.join(",")),`${n}?${Va(r).slice(1)}`}async function BH(t){const e=await fH(t),n=Gt().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:yH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wH,dontclear:!0},r=>new Promise(async(s,A)=>{await r.restyle({setHideOnLeave:!1});const i=en(t,"network-request-failed"),o=Gt().setTimeout(()=>{A(i)},gH.get());function a(){Gt().clearTimeout(o),s(r)}r.ping(a).then(a,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CH=500,_H=600,IH="_blank",EH="http://localhost";class V_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bH(t,e,n,r=CH,s=_H){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},xH),{width:r.toString(),height:s.toString(),top:A,left:i}),c=Ft().toLowerCase();n&&(o=CU(c)?IH:n),BU(c)&&(e=e||EH,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[w,p])=>`${f}${w}=${p},`,"");if(qj(c)&&o!=="_self")return TH(e||"",o),new V_(null);const h=window.open(e||"",o,d);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new V_(h)}function TH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH="__/auth/handler",UH="emulator/auth/handler",kH=encodeURIComponent("fac");async function j0(t,e,n,r,s,A){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:s};if(e instanceof Ys){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",WN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(A||{}))i[d]=h}if(e instanceof Za){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${kH}=${encodeURIComponent(a)}`:"";return`${SH(t)}?${Va(o).slice(1)}${c}`}function SH({config:t}){return t.emulator?Iy(t,UH):`https://${t.authDomain}/${FH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="webStorageSupport";class QH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=Ig,this._overrideRedirectResult=Ly}async _openPopup(e,n,r,s){var A;Wr((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await j0(e,n,r,nu(),s);return bH(e,i,Ru())}async _openRedirect(e,n,r,s){await this._originValidation(e);const A=await j0(e,n,r,nu(),s);return gV(A),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:A}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(A,"If manager is not set, promise should be"),A)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BH(e),r=new ZU(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lp,{type:Lp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[Lp];i!==void 0&&n(!!i),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bU()||xU()||ku()}}const RH=QH;class NH{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return as("unexpected MultiFactorSessionType")}}}class Oy extends NH{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Oy(e)}_finalizeEnroll(e,n,r){return aV(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return IV(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nk{constructor(){}static assertion(e){return Oy._fromCredential(e)}}nk.FACTOR_ID="phone";var H_="@firebase/auth",K_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LH(t){GA(new hs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;ne(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TU(t)},c=new tM(r,s,A,a);return lM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),GA(new hs("auth-internal",e=>{const n=Rt(e.getProvider("auth").getImmediate());return(r=>new PH(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(H_,K_,DH(t)),Kr(H_,K_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=5*60;DN("authIdTokenMaxAge");function jH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}nM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const A=en("internal-error");A.customData=s,n(A)},r.type="text/javascript",r.charset="UTF-8",jH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LH("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=2e3;async function VH(t,e,n){var r;const{BuildInfo:s}=ro();Wr(e.sessionId,"AuthEvent did not contain a session ID");const A=await WH(e.sessionId),i={};return ku()?i.ibi=s.packageName:Uu()?i.apn=s.packageName:xn(t,"operation-not-supported-in-this-environment"),s.displayName&&(i.appDisplayName=s.displayName),i.sessionId=A,j0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function HH(t){const{BuildInfo:e}=ro(),n={};ku()?n.iosBundleId=e.packageName:Uu()?n.androidPackageName=e.packageName:xn(t,"operation-not-supported-in-this-environment"),await tk(t,n)}function KH(t){const{cordova:e}=ro();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,$j()?"_blank":"_system","location=yes"),n(s)})})}async function GH(t,e,n){const{cordova:r}=ro();let s=()=>{};try{await new Promise((A,i)=>{let o=null;function a(){var h;A();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{i(en(t,"redirect-cancelled-by-user"))},MH))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(a),document.addEventListener("resume",c,!1),Uu()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(a),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{s()}}function zH(t){var e,n,r,s,A,i,o,a,c,d;const h=ro();ne(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne(typeof((A=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||A===void 0?void 0:A.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function WH(t){const e=$H(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function $H(t){if(Wr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH=20;class JH extends ZU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function XH(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:eK(),postBody:null,tenantId:t.tenantId,error:en(t,"no-auth-event")}}function YH(t,e){return M0()._set(V0(t),e)}async function G_(t){const e=await M0()._get(V0(t));return e&&await M0()._remove(V0(t)),e}function ZH(t,e){var n,r;const s=nK(e);if(s.includes("/__/auth/callback")){const A=gh(s),i=A.firebaseError?tK(decodeURIComponent(A.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?en(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function eK(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<qH;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function M0(){return hr(Qy)}function V0(t){return Di("authEvent",t.config.apiKey,t.name)}function tK(t){try{return JSON.parse(t)}catch{return null}}function nK(t){const e=gh(t),n=e.link?decodeURIComponent(e.link):void 0,r=gh(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return gh(s).link||s||r||n||t}function gh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Xo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=500;class sK{constructor(){this._redirectPersistence=to,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ig,this._overrideRedirectResult=Ly}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new JH(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){xn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){zH(e);const A=await this._initialize(e);await A.initialized(),A.resetRedirect(),YV(),await this._originValidation(e);const i=XH(e,r,s);await YH(e,i);const o=await VH(e,i,n),a=await KH(o);return GH(e,A,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HH(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:A}=ro(),i=setTimeout(async()=>{await G_(e),n.onEvent(z_())},rK),o=async d=>{clearTimeout(i);const h=await G_(e);let f=null;h&&(d!=null&&d.url)&&(f=ZH(h,d.url)),n.onEvent(f||z_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=s,c=`${A.packageName.toLowerCase()}://`;ro().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const AK=sK;function z_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(t,e){Rt(t)._logFramework(e)}var oK="@firebase/auth-compat",aK="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=1e3;function hc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function cK(){return hc()==="http:"||hc()==="https:"}function rk(t=Ft()){return!!((hc()==="file:"||hc()==="ionic:"||hc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function uK(){return hv()||dv()}function dK(){return bT()&&(document==null?void 0:document.documentMode)===11}function hK(t=Ft()){return/Edge\/\d+/.test(t)}function fK(t=Ft()){return dK()||hK(t)}function sk(){try{const t=self.localStorage,e=Ru();if(t)return t.setItem(e,"1"),t.removeItem(e),fK()?Lc():!0}catch{return jy()&&Lc()}return!1}function jy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Op(){return(cK()||ET()||rk())&&!uK()&&sk()&&!jy()}function Ak(){return rk()&&typeof document<"u"}async function gK(){return Ak()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},lK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function pK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr={LOCAL:"local",NONE:"none",SESSION:"session"},El=ne,ik="persistence";function mK(t,e){if(El(Object.values(cr).includes(e),t,"invalid-persistence-type"),hv()){El(e!==cr.SESSION,t,"unsupported-persistence-type");return}if(dv()){El(e===cr.NONE,t,"unsupported-persistence-type");return}if(jy()){El(e===cr.NONE||e===cr.LOCAL&&Lc(),t,"unsupported-persistence-type");return}El(e===cr.NONE||sk(),t,"unsupported-persistence-type")}async function H0(t){await t._initializationPromise;const e=ok(),n=Di(ik,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function wK(t,e){const n=ok();if(!n)return[];const r=Di(ik,t,e);switch(n.getItem(r)){case cr.NONE:return[Na];case cr.LOCAL:return[iu,to];case cr.SESSION:return[to];default:return[]}}function ok(){var t;try{return((t=pK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=ne;class CA{constructor(){this.browserResolver=hr(RH),this.cordovaResolver=hr(AK),this.underlyingResolver=null,this._redirectPersistence=to,this._completeRedirectFn=Ig,this._overrideRedirectResult=Ly}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ak()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await gK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){return t.unwrap()}function yK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BK(t){return lk(t)}function xK(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new CK(t,iV(t,e))}else if(r){const s=lk(e),A=e;s&&(A.credential=s,A.tenantId=r.tenantId||void 0,A.email=r.email||void 0,A.phoneNumber=r.phoneNumber||void 0)}}function lk(t){const{_tokenResponse:e}=t instanceof Vn?t.customData:t;if(!e)return null;if(!(t instanceof Vn)&&"temporaryProof"in e&&"phoneNumber"in e)return no.credentialFromResult(t);const n=e.providerId;if(!n||n===Il.PASSWORD)return null;let r;switch(n){case Il.GOOGLE:r=ns;break;case Il.FACEBOOK:r=ts;break;case Il.GITHUB:r=rs;break;case Il.TWITTER:r=ss;break;default:const{oauthIdToken:s,oauthAccessToken:A,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!A&&!i&&!s&&!o?null:o?n.startsWith("saml.")?Pa._create(n,o):ms._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:s,accessToken:A}):new la(n).credential({idToken:s,accessToken:A,rawNonce:a})}return t instanceof Vn?r.credentialFromError(t):r.credentialFromResult(t)}function qn(t,e){return e.catch(n=>{throw n instanceof Vn&&xK(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:BK(n),additionalUserInfo:AV(n),user:Ss.getOrCreate(s)}})}async function K0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>qn(t,n.confirm(r))}}class CK{constructor(e,n){this.resolver=n,this.auth=yK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return qn(ak(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._delegate=e,this.multiFactor=cV(e)}static getOrCreate(e){return Ss.USER_MAP.has(e)||Ss.USER_MAP.set(e,new Ss(e)),Ss.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return qn(this.auth,DU(this._delegate,e))}async linkWithPhoneNumber(e,n){return K0(this.auth,OV(this._delegate,e,n))}async linkWithPopup(e){return qn(this.auth,$V(this._delegate,e,CA))}async linkWithRedirect(e){return await H0(Rt(this.auth)),rH(this._delegate,e,CA)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return qn(this.auth,LU(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return K0(this.auth,jV(this._delegate,e,n))}reauthenticateWithPopup(e){return qn(this.auth,WV(this._delegate,e,CA))}async reauthenticateWithRedirect(e){return await H0(Rt(this.auth)),tH(this._delegate,e,CA)}sendEmailVerification(e){return $M(this._delegate,e)}async unlink(e){return await RM(this._delegate,e),this}updateEmail(e){return YM(this._delegate,e)}updatePassword(e){return ZM(this._delegate,e)}updatePhoneNumber(e){return MV(this._delegate,e)}updateProfile(e){return XM(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return qM(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ss.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=ne;class G0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;bl(r,"invalid-api-key",{appName:e.name}),bl(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?CA:void 0;this._delegate=n.initialize({options:{persistence:_K(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(bj),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ss.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){cM(this._delegate,e,n)}applyActionCode(e){return OM(this._delegate,e)}checkActionCode(e){return OU(this._delegate,e)}confirmPasswordReset(e,n){return LM(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return qn(this._delegate,MM(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return WM(this._delegate,e)}isSignInWithEmailLink(e){return KM(this._delegate,e)}async getRedirectResult(){bl(Op(),this._delegate,"operation-not-supported-in-this-environment");const e=await AH(this._delegate,CA);return e?qn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){iK(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:A,complete:i}=W_(e,n,r);return this._delegate.onAuthStateChanged(s,A,i)}onIdTokenChanged(e,n,r){const{next:s,error:A,complete:i}=W_(e,n,r);return this._delegate.onIdTokenChanged(s,A,i)}sendSignInLinkToEmail(e,n){return HM(this._delegate,e,n)}sendPasswordResetEmail(e,n){return DM(this._delegate,e,n||void 0)}async setPersistence(e){mK(this._delegate,e);let n;switch(e){case cr.SESSION:n=to;break;case cr.LOCAL:n=await hr(iu)._isAvailable()?iu:Qy;break;case cr.NONE:n=Na;break;default:return xn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return qn(this._delegate,QM(this._delegate))}signInWithCredential(e){return qn(this._delegate,yg(this._delegate,e))}signInWithCustomToken(e){return qn(this._delegate,PM(this._delegate,e))}signInWithEmailAndPassword(e,n){return qn(this._delegate,VM(this._delegate,e,n))}signInWithEmailLink(e,n){return qn(this._delegate,GM(this._delegate,e,n))}signInWithPhoneNumber(e,n){return K0(this._delegate,LV(this._delegate,e,n))}async signInWithPopup(e){return bl(Op(),this._delegate,"operation-not-supported-in-this-environment"),qn(this._delegate,zV(this._delegate,e,CA))}async signInWithRedirect(e){return bl(Op(),this._delegate,"operation-not-supported-in-this-environment"),await H0(this._delegate),ZV(this._delegate,e,CA)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return jM(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}G0.Persistence=cr;function W_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:i=>s(i&&Ss.getOrCreate(i)),error:e,complete:n}}function _K(t,e){const n=wK(t,e);if(typeof self<"u"&&!n.includes(iu)&&n.push(iu),typeof window<"u")for(const r of[Qy,to])n.includes(r)||n.push(r);return n.includes(Na)||n.push(Na),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.providerId="phone",this._delegate=new no(ak(es.auth()))}static credential(e,n){return no.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}My.PHONE_SIGN_IN_METHOD=no.PHONE_SIGN_IN_METHOD;My.PROVIDER_ID=no.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK=ne;class EK{constructor(e,n,r=es.app()){var s;IK((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new PV(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK="auth-compat";function TK(t){t.INTERNAL.registerComponent(new hs(bK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new G0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Io.EMAIL_SIGNIN,PASSWORD_RESET:Io.PASSWORD_RESET,RECOVER_EMAIL:Io.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Io.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Io.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Io.VERIFY_EMAIL}},EmailAuthProvider:ci,FacebookAuthProvider:ts,GithubAuthProvider:rs,GoogleAuthProvider:ns,OAuthProvider:la,SAMLAuthProvider:uf,PhoneAuthProvider:My,PhoneMultiFactorGenerator:nk,RecaptchaVerifier:EK,TwitterAuthProvider:ss,Auth:G0,AuthCredential:Ya,Error:Vn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(oK,aK)}TK(es);const el={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""},tl=(t,e)=>{const n=import.meta;return n&&n.env&&n.env[t]?n.env[t]:e},FK=tl("VITE_FIREBASE_API_KEY",el.apiKey),UK=tl("VITE_FIREBASE_AUTH_DOMAIN",el.authDomain),kK=tl("VITE_FIREBASE_PROJECT_ID",el.projectId),SK=tl("VITE_FIREBASE_STORAGE_BUCKET",el.storageBucket),QK=tl("VITE_FIREBASE_MESSAGING_SENDER_ID",el.messagingSenderId),RK=tl("VITE_FIREBASE_APP_ID",el.appId),$_={apiKey:FK,authDomain:UK,projectId:kK,storageBucket:SK,messagingSenderId:QK,appId:RK};let q_,or,Jt;if(!$_.apiKey)console.error("CRITICAL ERROR: Firebase API Key is missing. Create a .env file with VITE_FIREBASE_API_KEY and restart.");else try{es.apps.length?q_=es.app():q_=es.initializeApp($_),or=es.firestore(),Jt=es.auth(),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const jp="schoolData",Mp="main",Vp="publicSchedules",_A={open:async()=>(console.log("Firestore connected"),{}),save:async t=>{if(!or){console.error("Database not initialized (missing API key)");return}const e=Jt==null?void 0:Jt.currentUser,n=["admin@gymnasium22.com","teacher@gymnasium22.com"];if(!e||!e.email||!n.includes(e.email)){console.warn(" :       .");return}try{const r=JSON.parse(JSON.stringify(t));await or.collection(jp).doc(Mp).set(r)}catch(r){throw console.error("   Firebase:",r),r.code==="permission-denied"&&alert(` :   .

:     (Firestore Rules)   Firebase,     .`),r}},load:async()=>{if(!or)return console.warn("Database not initialized. Returning initial data."),zt;try{const t=await or.collection(jp).doc(Mp).get();if(t.exists){const e=t.data(),n={...zt,...e};return e.settings&&(n.settings={...zt.settings,...e.settings}),n}else return zt}catch(t){return console.error("   Firebase:",t),t.code==="permission-denied"&&console.error("   .   (allow read: if true)."),zt}},subscribe:(t,e)=>or?or.collection(jp).doc(Mp).onSnapshot(n=>{if(n.exists){const r=n.data(),s={...zt,...r};r.settings&&(s.settings={...zt.settings,...r.settings}),t(s)}else t(zt)},n=>{console.error("Firestore subscription error:",n),n.code==="permission-denied"&&console.error("    (subscribe)."),e(n)}):(console.warn("Database not initialized. Cannot subscribe."),()=>{}),exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{if(!or)throw new Error("Database not initialized");const n=Jt==null?void 0:Jt.currentUser;if(!n||n.email!=="admin@gymnasium22.com")throw new Error("    .");try{const r={subjects:e.subjects,teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},s=JSON.parse(JSON.stringify(r));await or.collection(Vp).doc(t).set(s)}catch(r){throw console.error("  :",r),r}},getPublicData:async t=>{if(!or)return null;try{const e=await or.collection(Vp).doc(t).get();return e.exists?e.data():null}catch(e){return console.error("   :",e),null}},deletePublicData:async t=>{if(!or)throw new Error("Database not initialized");const e=Jt==null?void 0:Jt.currentUser;if(!e||e.email!=="admin@gymnasium22.com")throw new Error("     .");try{await or.collection(Vp).doc(t).delete()}catch(n){throw console.error("   :",n),n}}},ck=S.createContext(void 0),NK="admin@gymnasium22.com",PK="teacher@gymnasium22.com",DK=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(null),[A,i]=S.useState(!0);S.useEffect(()=>{if(!Jt){console.warn("Firebase Auth is not initialized. Authentication is disabled."),i(!1);return}const c=Jt.onAuthStateChanged(d=>{n(d),d?d.email===NK?s("admin"):d.email===PK?s("teacher"):(s(null),Jt==null||Jt.signOut()):s(null),i(!1)});return()=>c()},[]);const o=async()=>{Jt&&await Jt.signOut(),s(null)},a=()=>{s("guest"),i(!1)};return l.jsx(ck.Provider,{value:{user:e,role:r,loading:A,logout:o,setGuestRole:a},children:t})},po=()=>{const t=S.useContext(ck);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Vy=S.createContext(void 0),uk=({children:t,initialData:e})=>{const[n,r]=S.useState(zt),[s,A]=S.useState(!0),[i,o]=S.useState([]),[a,c]=S.useState(-1),{user:d,role:h,loading:f}=po();S.useEffect(()=>{if(e){r(e),o([e]),c(0),A(!1);return}if(f)return;if(!(d||h==="guest")){r(zt),A(!1);return}A(!0);const v=_A.subscribe(R=>{const Q={...zt,...R};Q.teachers||(Q.teachers=[]),Q.teachers=Q.teachers.map(N=>({shifts:[ce.First,ce.Second],telegramChatId:"",...N})),Q.schedule||(Q.schedule=[]),Q.substitutions||(Q.substitutions=[]),Q.bellSchedule||(Q.bellSchedule=vT),Q.requests||(Q.requests=[]),Q.settings?Q.settings={...zt.settings,...Q.settings}:Q.settings=zt.settings,r(Q),o(N=>N.length===0?[Q]:N),c(N=>N===-1?0:N),A(!1)},R=>{console.error("Failed to subscribe to data:",R),r(zt),A(!1)});return()=>{v&&v()}},[e,d,h,f]);const w=S.useCallback(async(B,v=!0)=>{const R=!d&&h==="guest",Q={...n,...B};if(r(Q),!e&&d&&!R)try{await _A.save(Q)}catch(N){console.error("Save failed silently in background",N)}else R&&console.warn("       .");if(v){const N=i.slice(0,a+1);N.push(Q),N.length>50&&N.shift(),o(N),c(N.length-1)}},[n,i,a,d,h,e]),p=S.useCallback(async()=>{if(a>0){const B=i[a-1];c(a-1),r(B),!e&&d&&await _A.save(B)}},[i,a,d,e]),C=S.useCallback(async()=>{if(a<i.length-1){const B=i[a+1];c(a+1),r(B),!e&&d&&await _A.save(B)}},[i,a,d,e]),_=S.useCallback(async()=>{await w(zt)},[w]),y=S.useMemo(()=>({data:n,isLoading:s,saveData:w,resetData:_,undo:p,redo:C,canUndo:a>0,canRedo:a<i.length-1}),[n,s,w,_,p,C,a]);return l.jsx(Vy.Provider,{value:y,children:t})},Eg=()=>{const t=S.useContext(Vy);if(!t)throw new Error("useFullData must be used within DataProvider");return t},dk=S.createContext(void 0),hk=S.createContext(void 0),fk=({children:t})=>{const{data:e,saveData:n}=Eg(),r=S.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,requests:e.requests}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.requests]),s=S.useCallback(async(i,o)=>{await n(i,o)},[n]),A=S.useMemo(()=>({...r,saveStaticData:s}),[r,s]);return l.jsx(dk.Provider,{value:A,children:t})},gk=({children:t})=>{const{data:e,saveData:n}=Eg(),r=S.useMemo(()=>({schedule:e.schedule,substitutions:e.substitutions}),[e.schedule,e.substitutions]),s=S.useCallback(async(i,o)=>{await n(i,o)},[n]),A=S.useMemo(()=>({...r,saveScheduleData:s}),[r,s]);return l.jsx(hk.Provider,{value:A,children:t})},Zs=()=>{const t=S.useContext(dk);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Eg();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},nl=()=>{const t=S.useContext(hk);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Eg();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},LK=()=>{const t=S.useContext(Vy);if(!t)throw new Error("useData must be used within DataProvider");return t},OK={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),MessageSquare:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Inbox:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),l.jsx("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Info:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),MapPin:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),l.jsx("circle",{cx:"12",cy:"10",r:"3"})]})},W=({name:t,size:e=24,className:n="",...r})=>{const s=OK[t];return s?l.jsx(s,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},Gr=({isOpen:t,onClose:e,title:n,children:r,maxWidth:s="max-w-lg"})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(W,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,jK=({x:t,y:e,onClose:n,actions:r})=>{if(S.useEffect(()=>{const A=()=>n();return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[n]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:r.map((A,i)=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),A.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${A.color||"text-slate-700 dark:text-slate-200"}`,children:[A.icon&&l.jsx(W,{name:A.icon,size:16}),A.label]},i))})},MK=()=>{const{bellSchedule:t}=Zs(),[e,n]=S.useState("..."),[r,s]=S.useState(""),[A,i]=S.useState(0),[o,a]=S.useState("bg-slate-500"),[c,d]=S.useState("");return S.useEffect(()=>{const h=()=>{const w=new Date,p=w.getDay(),_=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][p];if(d(_||""),!_){n(" "),s(" "),a("bg-slate-400"),i(0);return}const y=w.getHours()*60+w.getMinutes();let B=t.filter(Q=>Q.day===_);B.length===0&&(B=t.filter(Q=>Q.day==="default"));let v=null;const R=Q=>{const[N,I]=Q.split(":").map(Number);return N*60+I};for(const Q of B){const N=R(Q.start),I=R(Q.end);if(y>=N&&y<I){v={...Q,duration:I-N,passed:y-N};break}}if(v)n(`${v.period} `),s(`${v.shift===ce.First?"1 ":"2 "}  . ${v.duration-v.passed} `),i(v.passed/v.duration*100),a("bg-indigo-600");else{let Q=1/0,N=null;for(const I of B){const x=R(I.start);x>y&&x-y<Q&&(Q=x-y,N=I)}N&&Q<30?(n(""),s(` ${Q}  ${N.period} `),a("bg-amber-500"),i(100-Q/20*100)):(n(" "),s(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:l.jsx(W,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),A>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${A}%`}})})]})},Hp=({options:t,value:e,onChange:n,placeholder:r,groupBy:s})=>{var w;const[A,i]=S.useState(!1),[o,a]=S.useState(""),c=S.useRef(null);S.useEffect(()=>{const p=C=>{c.current&&!c.current.contains(C.target)&&i(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=((w=(s?t.flatMap(p=>p.options):t).find(p=>p.value===e))==null?void 0:w.label)||r,f=s?t.map(p=>({...p,options:p.options.filter(C=>C.label.toLowerCase().includes(o.toLowerCase()))})).filter(p=>p.options.length>0):t.filter(p=>p.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(W,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:p=>a(p.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s?f.map((p,C)=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:p.label}),p.options.map(_=>l.jsx("div",{onClick:()=>{n(_.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===_.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:_.label},_.value))]},C)):f.map(p=>l.jsx("div",{onClick:()=>{n(p.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===p.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:p.label},p.value))]})]})},xd=({children:t,className:e=""})=>{const n=Ei.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,s)=>l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:r},s))})},Kp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>l.jsx("div",{className:"space-y-3",children:t.map((r,s)=>l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},s))}),VK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,settings:A}=Zs(),{schedule:i,substitutions:o}=nl(),a=gu(),[c,d]=S.useState(localStorage.getItem("gym_notes")||""),[h]=S.useState(new Date),[f,w]=S.useState(""),[p,C]=S.useState(null),[_,y]=S.useState(!1),[B,v]=S.useState(""),[R,Q]=S.useState(!1),[N,I]=S.useState(""),[x,b]=S.useState(!1);S.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){v("");const F=setTimeout(()=>v(""),2e3);return()=>clearTimeout(F)}},[c]);const k=F=>new Date(F.getTime()-F.getTimezoneOffset()*6e4).toISOString().split("T")[0],U=S.useMemo(()=>k(h),[h]),D=S.useMemo(()=>{const F=h.getDay();return F===0||F===6?null:Un[F-1]},[h]),T=S.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),e.filter(L=>L.birthDate).map(L=>{const H=new Date(L.birthDate);let $=new Date(F.getFullYear(),H.getMonth(),H.getDate());$<F&&$.setFullYear(F.getFullYear()+1);const q=Math.ceil(($.getTime()-F.getTime())/(1e3*60*60*24));return{...L,diff:q,age:F.getFullYear()-H.getFullYear()}}).filter(L=>L.diff<=30).sort((L,H)=>L.diff-H.diff)},[e]),Ee=S.useMemo(()=>{const F=e.length,L=new Map;e.filter(te=>te.unavailableDates.includes(U)).forEach(te=>{var Se;const ze=((Se=te.absenceReasons)==null?void 0:Se[U])===" "?" ":"";L.set(te.id,{id:te.id,name:te.name,displayReason:ze})});const H=o.filter(te=>te.date===U&&te.replacementTeacherId!=="conducted"&&te.replacementTeacherId!==te.originalTeacherId),$=new Map;H.forEach(te=>{if(L.has(te.originalTeacherId))return;const Ne=e.find(Qe=>Qe.id===te.originalTeacherId);if(!Ne)return;const ze=i.find(Qe=>Qe.id===te.scheduleItemId);if(!ze)return;$.has(te.originalTeacherId)||$.set(te.originalTeacherId,{teacher:Ne,lessons:[]}),$.get(te.originalTeacherId).lessons.push({period:ze.period,reason:te.lessonAbsenceReason})});const q=Array.from(L.values());$.forEach((te,Ne)=>{const ze=te.lessons.sort((be,ke)=>be.period-ke.period),Se=ze.map(be=>be.period).join(", "),De=ze.some(be=>be.reason===" ")?" ":"";q.push({id:Ne,name:te.teacher.name,displayReason:`${Se} : ${De}`})}),q.sort((te,Ne)=>te.name.localeCompare(Ne.name));const se=q.length,fe=F-se;return{presentPercent:F>0?Math.round(fe/F*100):0,absentCount:se,totalTeachers:F,absentTeachersList:q}},[e,U,o,i]),$e=S.useMemo(()=>{const F=new Date(h);for(F.setDate(h.getDate()+1);F.getDay()===0||F.getDay()===6;)F.setDate(F.getDate()+1);const H=[null,"","","","","",null][F.getDay()];if(!H)return[];const $=[];return n.forEach(q=>{const se=i.filter(fe=>fe.classId===q.id&&fe.day===H);se.length===0?$.push({class:q.name,issue:`   ${H}`}):se.length<4&&$.push({class:q.name,issue:`  (${se.length})`}),se.forEach(fe=>{if(i.some(te=>te.id!==fe.id&&te.day===H&&te.period===fe.period&&te.shift===fe.shift&&te.teacherId===fe.teacherId)&&$.push({class:q.name,issue:`  (${fe.period} )`}),fe.roomId){const te=r.find(Ne=>Ne.id===fe.roomId);te&&te.capacity<q.studentsCount&&$.push({class:q.name,issue:`: ${te.name} (${fe.period} )`})}})}),$.filter((q,se,fe)=>fe.findIndex(Ue=>Ue.class===q.class&&Ue.issue===q.issue)===se).slice(0,10)},[i,n,e,r,h]),Oe=S.useMemo(()=>{if(!D)return 0;let F=0;const L=i.filter(H=>H.day===D);for(const H of L){const $=e.find(q=>q.id===H.teacherId);if($&&$.unavailableDates.includes(U)){const q=o.find(se=>se.scheduleItemId===H.id&&se.date===U);(!q||q.replacementTeacherId==="cancelled"||q.replacementTeacherId==="conducted")&&F++}}return F},[i,e,o,U,D]),V=()=>{var ze;if(!f){C(null);return}const F=new Date,H=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][F.getDay()];if(!H){C({status:"",detail:"  ",color:"text-slate-500"});return}const $=Se=>{const[Qe,De]=Se.split(":").map(Number);return Qe*60+De},q=F.getHours()*60+F.getMinutes();let se=s.filter(Se=>Se.day===H);se.length===0&&(se=s.filter(Se=>Se.day==="default"));const fe=se.find(Se=>{const Qe=$(Se.start),De=$(Se.end);return q>=Qe&&q<=De}),Ue=f.toLowerCase(),te=e.find(Se=>Se.name.toLowerCase().includes(Ue)),Ne=n.find(Se=>Se.name.toLowerCase().includes(Ue));if(!te&&!Ne){C({status:" ",detail:" ",color:"text-red-500"});return}if(te){if(te.unavailableDates.includes(U)){const ke=((ze=te.absenceReasons)==null?void 0:ze[U])===" "?" ":"";C({status:"",detail:ke,color:"text-red-500",icon:"UserX",items:[]});return}if(!fe){C({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Se=i.filter(be=>be.teacherId===te.id&&be.day===H&&be.period===fe.period&&be.shift===fe.shift),Qe=o.filter(be=>be.date===U&&be.replacementTeacherId===te.id).map(be=>i.find(ke=>ke.id===be.scheduleItemId)).filter(be=>!!be&&be.day===H&&be.period===fe.period&&be.shift===fe.shift);let De=[];Se.forEach(be=>{var tt,qe,nn;const ke=o.find(rt=>rt.date===U&&rt.scheduleItemId===be.id);if(!ke||ke.replacementTeacherId===te.id){const rt=((tt=r.find(rn=>rn.id===((ke==null?void 0:ke.replacementRoomId)||be.roomId)))==null?void 0:tt.name)||(ke==null?void 0:ke.replacementRoomId)||be.roomId||" .",dn=(qe=t.find(rn=>rn.id===be.subjectId))==null?void 0:qe.name,Nn=(nn=n.find(rn=>rn.id===be.classId))==null?void 0:nn.name;De.push({room:rt,subject:dn,entityName:Nn,direction:be.direction,isSubstitution:!!(ke&&ke.replacementTeacherId===te.id),originalTeacherName:null})}}),Qe.forEach(be=>{var dn,Nn,rn;const ke=o.find(O=>O.date===U&&O.scheduleItemId===be.id&&O.replacementTeacherId===te.id);if(!ke)return;const tt=((dn=r.find(O=>O.id===(ke.replacementRoomId||be.roomId)))==null?void 0:dn.name)||ke.replacementRoomId||be.roomId||" .",qe=(Nn=t.find(O=>O.id===be.subjectId))==null?void 0:Nn.name,nn=(rn=n.find(O=>O.id===be.classId))==null?void 0:rn.name,rt=e.find(O=>O.id===ke.originalTeacherId);De.push({room:tt,subject:qe,entityName:nn,direction:be.direction,isSubstitution:!0,originalTeacherName:rt==null?void 0:rt.name})}),De.length>0?C({status:` ${fe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:De}):C({status:"",detail:` ( ${fe.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(Ne){if(!fe){C({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Se=i.filter(Qe=>Qe.classId===Ne.id&&Qe.day===H&&Qe.period===fe.period&&Qe.shift===fe.shift);if(Se.length>0){const Qe=Se.map(ke=>{var J,re,me,we,he;const tt=o.find(ie=>ie.scheduleItemId===ke.id&&ie.date===U);if(tt&&tt.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(J=t.find(ie=>ie.id===ke.subjectId))==null?void 0:J.name};const qe=!!(tt&&tt.replacementTeacherId!=="conducted"&&tt.replacementTeacherId!=="cancelled"),nn=qe?tt.replacementTeacherId:ke.teacherId,rt=(tt==null?void 0:tt.replacementRoomId)||ke.roomId,dn=(re=e.find(ie=>ie.id===nn))==null?void 0:re.name,Nn=((me=r.find(ie=>ie.id===rt))==null?void 0:me.name)||rt||" .",rn=(we=t.find(ie=>ie.id===ke.subjectId))==null?void 0:we.name,O=qe?(he=e.find(ie=>ie.id===tt.originalTeacherId))==null?void 0:he.name:null;return{room:Nn,subject:rn,entityName:dn,direction:ke.direction,isSubstitution:qe,originalTeacherName:O}}),De=Qe.filter(ke=>!ke.cancelled),be=Qe.filter(ke=>!!ke.cancelled);De.length>0?C({status:` ${fe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:De}):be.length>0?C({status:" ",detail:be.map(ke=>ke.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):C({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else C({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},z=async()=>{if(!N.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}b(!0);const F=` *   :*

${N}`;try{const H=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:F,parse_mode:"Markdown"})})).json();if(H.ok)alert("!   ."),Q(!1),I("");else throw new Error(H.description)}catch(L){console.error("   Telegram:",L),alert(`   . : ${L}`)}finally{b(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(W,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(W,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:F=>w(F.target.value),onKeyDown:F=>F.key==="Enter"&&V(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:V,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(W,{name:"Search",size:20})})]}),p&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${p.color}`,children:[l.jsx(W,{name:p.icon||"Info",size:14})," ",p.status]}),p.items&&p.items.length>0?l.jsx("div",{className:"space-y-2",children:p.items.map((F,L)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[F.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:F.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.subject}),F.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:F.originalTeacherName?` ( ${F.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:F.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:F.room})]})]},L))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:p.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(W,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:Oe>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:Oe}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(W,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>y(!_),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:_?" ":" ",children:l.jsx(W,{name:_?"PieChart":"List",size:20})})]}),_?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Ee.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Ee.absentTeachersList.map(F=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:F.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:F.displayReason})]},F.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(W,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Ee.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Ee.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Ee.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(W,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(F=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.name}),l.jsx("span",{className:"font-bold text-slate-400",children:F.diff===0?"!":`${F.diff} .`})]},F.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(W,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:$e.length?$e.map((F,L)=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:F.issue})]},L)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(W,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:F=>d(F.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),B&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(W,{name:"Save",size:12})," ",B]})]})]})]}),l.jsx(Gr,{isOpen:R,onClose:()=>Q(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:N,onChange:F=>I(F.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:z,disabled:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[x?l.jsx(W,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(W,{name:"Send",size:16}),x?"...":""]})})]})})]})};var pk={},mk={},wk={},bg={};Object.defineProperty(bg,"__esModule",{value:!0});function HK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}bg.default=HK;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});var KK=bg,GK=" and ";function zK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],s=KK.default(n),A=r;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(GK)}Hy.default=zK;var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});function WK(){}Ky.default=WK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=bg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=Hy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=Ky;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(wk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=S,n=wk;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(s){return!0}};var r=function(s){return function(A,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&c(!!f.matches)};return f.addListener(w),c(f.matches),function(){h=!1,f.removeListener(w)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(mk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=mk;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(pk);const $K=JI(pk),vk=({readOnly:t=!1})=>{const{subjects:e,teachers:n,classes:r,rooms:s}=Zs(),{schedule:A,saveScheduleData:i,canUndo:o,canRedo:a,undo:c,redo:d}=nl(),[h,f]=S.useState(ce.First),[w,p]=S.useState(ur.Monday),[C,_]=S.useState(!1),[y,B]=S.useState({}),[v,R]=S.useState("class"),[Q,N]=S.useState(""),[I,x]=S.useState(""),[b,k]=S.useState(""),[U,D]=S.useState(!1),[T,Ee]=S.useState({visible:!1,x:0,y:0,item:null,cell:null}),[$e,Oe]=S.useState(null),[V,z]=S.useState([]),[F,L]=S.useState(null),[H,$]=S.useState(null),q=$K({maxWidth:767}),[se,fe]=S.useState(!0),[Ue,te]=S.useState(!1),[Ne,ze]=S.useState({isOpen:!1,type:"",day:"",classId:""}),[Se,Qe]=S.useState(ur.Monday),[De,be]=S.useState(""),ke=As[h],tt=()=>v==="week"?As[h].map(P=>({id:P.toString(),name:`${P} `})):v==="class"?Q?r.filter(P=>P.id===Q&&P.shift===h):r.filter(P=>P.shift===h):v==="teacher"?Q?n.filter(P=>P.id===Q):n:v==="subject"?Q?e.filter(P=>P.id===Q):e:[],qe=(P,Z)=>{let ye=[];if(v==="week"){const Ae=parseInt(P),ae=Z;ye=A.filter(ge=>ge.shift===h&&ge.period===Ae&&ge.day===ae),Q&&(ye=ye.filter(ge=>ge.classId===Q))}else{const Ae=Z;v==="class"&&(ye=A.filter(ae=>ae.classId===P&&ae.period===Ae&&ae.day===w&&ae.shift===h)),v==="teacher"&&(ye=A.filter(ae=>ae.teacherId===P&&ae.period===Ae&&ae.day===w&&ae.shift===h)),v==="subject"&&(ye=A.filter(ae=>ae.subjectId===P&&ae.period===Ae&&ae.day===w&&ae.shift===h))}return I&&(ye=ye.filter(Ae=>{if(!Ae.roomId)return!1;const ae=s.find(At=>At.id===Ae.roomId);return(ae?ae.name:Ae.roomId).toLowerCase().includes(I.toLowerCase())})),b&&(ye=ye.filter(Ae=>{var ae;return(ae=Ae.direction)==null?void 0:ae.toLowerCase().includes(b.toLowerCase())})),ye},nn=P=>{const Z=[],ye=A.filter(ge=>ge.id!==P.id&&ge.day===P.day&&ge.period===P.period&&ge.shift===P.shift);return ye.find(ge=>ge.teacherId===P.teacherId)&&Z.push("teacher"),ye.find(ge=>!(ge.classId!==P.classId||ge.direction&&P.direction&&ge.direction!==P.direction))&&Z.push("class"),P.roomId&&ye.find(At=>At.roomId===P.roomId)&&Z.push("room"),Z},rt=(P,Z,ye)=>{const Ae=[],ae=r.find(Je=>Je.id===P),ge=e.find(Je=>Je.id===Z),At=s.find(Je=>Je.id===ye);return At&&(ae&&At.capacity<ae.studentsCount&&Ae.push(`  !   ${ae.studentsCount} .,     ${At.capacity}.`),ge&&ge.requiredRoomType&&ge.requiredRoomType!==""&&At.type!==ge.requiredRoomType&&Ae.push(`   !   "${ge.requiredRoomType}",   "${At.type}".`)),Ae},dn=P=>{const Z=rt(P.classId,P.subjectId,P.roomId);z(Z)},Nn=P=>{t||(B(P),dn(P),_(!0))},rn=(P,Z,ye=w)=>{if(t)return;const Ae={period:Z,day:ye,shift:h,id:Math.random().toString(36).substr(2,9)};v==="class"&&(Ae.classId=P),v==="teacher"&&(Ae.teacherId=P),v==="subject"&&(Ae.subjectId=P),v==="week"&&(Ae.period=parseInt(P),Ae.day=ye,Q&&r.find(ae=>ae.id===Q)&&(Ae.classId=Q)),B(Ae),z([]),_(!0)},O=async()=>{if(!y.subjectId||!y.teacherId||!y.classId)return;let P=[...A];const Z=P.findIndex(ye=>ye.id===y.id);Z>=0?P[Z]=y:P.push(y),await i({schedule:P}),_(!1)},J=async P=>{const Z=A.filter(ye=>ye.id!==(P||y.id));await i({schedule:Z}),_(!1)},re=(P,Z,ye)=>{t||(P.preventDefault(),P.stopPropagation(),Ee({visible:!0,x:P.clientX,y:P.clientY,item:Z,cell:ye}))},me=(P,Z)=>{if(t)return;L(Z),P.dataTransfer.effectAllowed="move";const ye=P.target;setTimeout(()=>ye.classList.add("dragging"),0)},we=P=>{P.target.classList.remove("dragging"),L(null),$(null)},he=(P,Z)=>{P.preventDefault(),!t&&$(`${Z.rowId}-${Z.colKey}`)},ie=async(P,Z)=>{if(P.preventDefault(),!F||t)return;const ye={...F};v==="week"?(ye.period=parseInt(Z.rowId),ye.day=Z.colKey):(ye.period=Z.colKey,ye.day=w,v==="class"&&(ye.classId=Z.rowId),v==="teacher"&&(ye.teacherId=Z.rowId),v==="subject"&&(ye.subjectId=Z.rowId));let Ae=A.map(ae=>ae.id===ye.id?ye:ae);await i({schedule:Ae}),L(null),$(null)},Te=[];T.item?Te.push({label:"",icon:"Copy",onClick:()=>Oe(T.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>J(T.item.id)}):T.cell&&($e&&Te.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...$e,id:Math.random().toString(36).substr(2,9),day:w,shift:h,period:T.cell.colKey};v==="week"&&(P.day=T.cell.colKey,P.period=parseInt(T.cell.rowId)),v==="class"?P.classId=T.cell.rowId:v==="teacher"?P.teacherId=T.cell.rowId:v==="subject"&&(P.subjectId=T.cell.rowId);let Z=[...A,P];await i({schedule:Z}),Oe(null)}}),Te.push({label:" ",icon:"Plus",onClick:()=>rn(T.cell.rowId,T.cell.colKey,v==="week"?T.cell.colKey:w)}));const Ce=y.subjectId?n.filter(P=>P.subjectIds.includes(y.subjectId)):[],xe=y.subjectId?n.filter(P=>!P.subjectIds.includes(y.subjectId)):n,je=S.useMemo(()=>{var P,Z,ye,Ae;if(Q){if(v==="teacher")return(P=n.find(ae=>ae.id===Q))==null?void 0:P.name;if(v==="class")return(Z=r.find(ae=>ae.id===Q))==null?void 0:Z.name;if(v==="subject")return(ye=e.find(ae=>ae.id===Q))==null?void 0:ye.name;if(v==="week")return(Ae=r.find(ae=>ae.id===Q))==null?void 0:Ae.name}return`  ${w}`},[Q,v,n,r,e,w]),st=!!Q,Ye=S.useMemo(()=>st?Un:ke,[st,ke]),Le=S.useMemo(()=>st?As[h].map(P=>({id:P.toString(),name:`${P} `})):tt(),[st,h,tt]),qr=(P,Z)=>{if(st){const ye=parseInt(P),Ae=Z;let ae=A.filter(ge=>ge.shift===h&&ge.period===ye&&ge.day===Ae);return v==="class"||v==="week"?ae=ae.filter(ge=>ge.classId===Q):v==="teacher"?ae=ae.filter(ge=>ge.teacherId===Q):v==="subject"&&(ae=ae.filter(ge=>ge.subjectId===Q)),ae}else return qe(P,Z)},Sr=tt(),Qr=v==="week"?Un:ke,Rr=(P,Z,ye)=>{ze({isOpen:!0,type:P,day:Z||"",classId:ye||""})},Dt=async()=>{let P=[...A];Ne.type==="clearAll"?P=[]:Ne.type==="clearDay"&&Ne.day?P=P.filter(Z=>Z.day!==Ne.day):Ne.type==="clearClass"&&Ne.classId&&(P=P.filter(Z=>Z.classId!==Ne.classId)),await i({schedule:P}),ze({isOpen:!1,type:"",day:"",classId:""}),te(!1)},Cn=(P,Z,ye)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(Ae=>{const ae=e.find(sn=>sn.id===Ae.subjectId),ge=n.find(sn=>sn.id===Ae.teacherId),At=r.find(sn=>sn.id===Ae.classId),Je=nn(Ae),qt=s.find(sn=>sn.id===Ae.roomId),Nr=qt?qt.name:Ae.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:sn=>me(sn,Ae),onDragEnd:t?void 0:we,onClick:t?void 0:()=>Nn(Ae),onContextMenu:t?void 0:sn=>re(sn,Ae,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Je.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Je.length===0&&(ae!=null&&ae.color)?{backgroundColor:`${ae.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?At==null?void 0:At.name:ae==null?void 0:ae.name}),Ae.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Ae.direction})]}),v==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:ae==null?void 0:ae.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:ge==null?void 0:ge.name,children:[l.jsx(W,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:v==="teacher"?At==null?void 0:At.name:ge==null?void 0:ge.name})]}),Nr&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:qt?`: ${qt.capacity}, : ${qt.type}`:"",children:Nr})]}),Je.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${Je.join(", ")}`,children:"!"})]},Ae.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>rn(ye,Z,v==="week"?Z:w),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(W,{name:"Plus",size:16})})]}),Pn=()=>{if(!Q)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=A.filter(Z=>Z.day===w&&Z.shift===h&&(v==="class"&&Z.classId===Q||v==="teacher"&&Z.teacherId===Q||v==="subject"&&Z.subjectId===Q)).sort((Z,ye)=>Z.period-ye.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",w,"  ",h,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(Z=>{const ye=e.find(qt=>qt.id===Z.subjectId),Ae=n.find(qt=>qt.id===Z.teacherId),ae=r.find(qt=>qt.id===Z.classId),ge=s.find(qt=>qt.id===Z.roomId),At=ge?ge.name:Z.roomId,Je=nn(Z);return l.jsxs("div",{onClick:t?void 0:()=>Nn(Z),className:`rounded-xl p-4 shadow-sm border ${Je.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[Z.period," "]}),Je.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${Je.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ye==null?void 0:ye.name," ",Z.direction&&`(${Z.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ae==null?void 0:ae.name,"  ",Ae==null?void 0:Ae.name]}),At&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",At]})]},Z.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[T.visible&&l.jsx(jK,{x:T.x,y:T.y,onClose:()=>Ee({...T,visible:!1}),actions:Te}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ce.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ce.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Un.map(P=>l.jsx("button",{onClick:()=>p(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${w===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:c,disabled:!o,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(W,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:d,disabled:!a,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(W,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{R("class"),N("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(W,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{R("teacher"),N("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(W,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{R("subject"),N("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(W,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;R("week"),N(((P=r[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(W,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(W,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:Q,onChange:P=>N(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&r.filter(P=>P.shift===h).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="teacher"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="subject"&&e.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:I,onChange:P=>x(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:P=>k(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(W,{name:"List",size:16})," . ."]}),(Q||v==="week")&&l.jsx("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(W,{name:"Printer",size:16})})]})]}),q&&!t&&Q&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>fe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${se?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(W,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>fe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${se?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(W,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:q&&se&&!t&&Q?Pn():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),Qr.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Sr.length>0?Sr.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),Qr.map(Z=>{const ye=qe(P.id,Z),Ae=`${P.id}-${Z}`;return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${H===Ae?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:ae=>re(ae,null,{rowId:P.id,colKey:Z}),onDragOver:t?void 0:ae=>he(ae,{rowId:P.id,colKey:Z}),onDrop:t?void 0:ae=>ie(ae,{rowId:P.id,colKey:Z}),children:Cn(ye,Z,P.id)},Z)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Gr,{isOpen:C,onClose:()=>_(!1),title:y.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",y.day]}),l.jsxs("span",{children:[": ",y.period]}),l.jsxs("span",{children:[": ",y.shift===ce.First?"1 ":"2 "]})]}),V.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:V.map((P,Z)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(W,{name:"AlertTriangle",size:14}),P]},Z))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Hp,{options:r.filter(P=>P.shift===h).map(P=>({value:P.id,label:P.name})),value:y.classId,onChange:P=>{B({...y,classId:P}),dn({...y,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Hp,{options:e.map(P=>({value:P.id,label:P.name})),value:y.subjectId,onChange:P=>{B({...y,subjectId:P}),dn({...y,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Hp,{options:[{value:"recommend",label:"",options:Ce.map(P=>({value:P.id,label:P.name}))},{value:"others",label:"",options:xe.map(P=>({value:P.id,label:P.name}))}],value:y.teacherId,onChange:P=>B({...y,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:y.direction||"",onChange:P=>B({...y,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:y.roomId||"",onChange:P=>{B({...y,roomId:P.target.value}),dn({...y,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),s.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[y.id&&l.jsx("button",{onClick:()=>J(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:O,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(Gr,{isOpen:Ue,onClose:()=>te(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>Rr("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:Se,onChange:P=>Qe(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Un.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>Rr("clearDay",Se),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Se]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:De,onChange:P=>be(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{De&&Rr("clearClass",void 0,De)},disabled:!De,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Gr,{isOpen:Ne.isOpen,onClose:()=>ze({...Ne,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>ze({...Ne,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Dt,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),U&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(W,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:je}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:st||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),Ye.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:st||v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:Le.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),Ye.map(Z=>{const ye=qr(P.id,Z);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ye.map(Ae=>{const ae=e.find(ys=>ys.id===Ae.subjectId),ge=n.find(ys=>ys.id===Ae.teacherId),At=r.find(ys=>ys.id===Ae.classId),Je=s.find(ys=>ys.id===Ae.roomId),qt=Je?Je.name:Ae.roomId,Nr=v==="teacher",Lg=v==="subject"||v==="week"||st&&Nr?At==null?void 0:At.name:ae==null?void 0:ae.name,eA=Nr?At==null?void 0:At.name:ge==null?void 0:ge.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Lg,Ae.direction&&` (${Ae.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:eA}),qt&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:qt})]})]},Ae.id)})},Z)})]},P.id))})]})]})})]})]})},qK=()=>{var V,z;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,saveStaticData:A}=Zs(),[i,o]=S.useState("teachers"),[a,c]=S.useState(!1),[d,h]=S.useState(null),[f,w]=S.useState({}),[p,C]=S.useState({}),[_,y]=S.useState({}),[B,v]=S.useState({}),[R,Q]=S.useState("default"),[N,I]=S.useState(null),x=F=>{h(F||null),i==="teachers"?w(F?e.find(L=>L.id===F):{subjectIds:[],unavailableDates:[],shifts:[ce.First,ce.Second],telegramChatId:""}):i==="subjects"?C(F?t.find(L=>L.id===F):{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?y(F?n.find(L=>L.id===F):{shift:ce.First,studentsCount:25}):i==="rooms"&&v(F?r.find(L=>L.id===F):{capacity:30,type:""}),c(!0)},b=async()=>{const F=()=>Math.random().toString(36).substr(2,9);let L=[];if(i==="teachers"){if(!f.name)return;L=[...e],d?L=L.map(H=>H.id===d?{...H,...f}:H):L.push({...f,id:F(),unavailableDates:[]}),await A({teachers:L})}else if(i==="subjects"){if(!p.name)return;L=[...t],d?L=L.map(H=>H.id===d?{...H,...p}:H):L.push({...p,id:F()}),await A({subjects:L})}else if(i==="classes"){if(!_.name)return;L=[...n],d?L=L.map(H=>H.id===d?{...H,..._}:H):L.push({..._,id:F()}),await A({classes:L})}else if(i==="rooms"){if(!B.name)return;L=[...r],d?L=L.map(H=>H.id===d?{...H,...B}:H):L.push({...B,id:F()}),await A({rooms:L})}c(!1)},k=async F=>{window.confirm(" ?")&&(i==="teachers"&&await A({teachers:e.filter(L=>L.id!==F)}),i==="subjects"&&await A({subjects:t.filter(L=>L.id!==F)}),i==="classes"&&await A({classes:n.filter(L=>L.id!==F)}),i==="rooms"&&await A({rooms:r.filter(L=>L.id!==F)}))},U=(F,L)=>{I(L),F.dataTransfer.effectAllowed="move"},D=F=>{F.preventDefault()},T=async(F,L)=>{if(N===null||N===L)return;let H=[];i==="teachers"?H=[...e]:i==="subjects"?H=[...t]:i==="classes"?H=[...n]:H=[...r];const $=H.splice(N,1)[0];H.splice(L,0,$),i==="teachers"?await A({teachers:H}):i==="subjects"?await A({subjects:H}):i==="classes"?await A({classes:H}):await A({rooms:H}),I(null)},Ee=(F,L)=>{const H=R;let $=s.find(q=>q.shift===F&&q.period===L&&q.day===H);if(!$&&H!=="default"){const q=s.find(se=>se.shift===F&&se.period===L&&se.day==="default");return q?{...q,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return $||{start:"",end:""}},$e=async(F,L,H,$)=>{let q=[...s];const se=R,fe=q.findIndex(Ue=>Ue.shift===F&&Ue.period===L&&Ue.day===se);fe>=0?q[fe]={...q[fe],[H]:$}:q.push({shift:F,period:L,[H]:$,start:"00:00",end:"00:00",day:se}),await A({bellSchedule:q})},Oe=F=>{const L=f.shifts||[];L.includes(F)?w({...f,shifts:L.filter(H=>H!==F)}):w({...f,shifts:[...L,F]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(F=>l.jsxs("button",{onClick:()=>o(F.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===F.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:F.icon,size:18})," ",F.label]},F.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(W,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(xd,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((F,L)=>{var H,$;return l.jsxs("div",{draggable:!0,onDragStart:q=>U(q,L),onDragOver:D,onDrop:q=>T(q,L),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(W,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:F.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(W,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(W,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:F.birthDate?`: ${new Date(F.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[((H=F.shifts)==null?void 0:H.includes(ce.First))&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),(($=F.shifts)==null?void 0:$.includes(ce.Second))&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:F.subjectIds.map(q=>{const se=t.find(fe=>fe.id===q);return se?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:se.color,color:"#334155"},children:se.name},q):null})})]},F.id)})}),i==="subjects"&&l.jsx(xd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:F.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(W,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.difficulty,"  ",F.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(W,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(W,{name:"Trash2",size:16})})]})]},F.id))}),i==="classes"&&l.jsx(xd,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(W,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[F.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${F.shift===ce.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[F.shift===ce.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(W,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(W,{name:"Trash2",size:14})})]})]},F.id))}),i==="rooms"&&l.jsx(xd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(W,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(W,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.capacity,"  ",F.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(W,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(W,{name:"Trash2",size:16})})]})]},F.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(F=>l.jsx("button",{onClick:()=>Q(F),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${R===F?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:F==="default"?"":F===""?"":""},F))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ce.First,ce.Second].map(F=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${F===ce.First?"bg-indigo-600":"bg-purple-600"}`,children:F}),l.jsx("div",{className:"p-6 space-y-3",children:As[F].map(L=>{const H=Ee(F,L);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${H.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:L}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.start,onChange:$=>$e(F,L,"start",$.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.end,onChange:$=>$e(F,L,"end",$.target.value)})]})]},L)})})]},F))})]})]}),l.jsx(Gr,{isOpen:a,onClose:()=>c(!1),title:"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:F=>w({...f,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:F=>w({...f,birthDate:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:F=>w({...f,telegramChatId:F.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(V=f.shifts)==null?void 0:V.includes(ce.First),onChange:()=>Oe(ce.First)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(z=f.shifts)==null?void 0:z.includes(ce.Second),onChange:()=>Oe(ce.Second)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(F=>{var L;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(L=f.subjectIds)==null?void 0:L.includes(F.id),onChange:H=>{const $=f.subjectIds||[];w({...f,subjectIds:H.target.checked?[...$,F.id]:$.filter(q=>q!==F.id)})}}),l.jsx("span",{className:"text-sm dark:text-slate-300",children:F.name})]},F.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:p.name||"",onChange:F=>C({...p,name:F.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:p.color||"#ffffff",onChange:F=>C({...p,color:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.difficulty||5,onChange:F=>C({...p,difficulty:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.requiredRoomType,onChange:F=>C({...p,requiredRoomType:F.target.value}),children:tC.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:_.name||"",onChange:F=>y({..._,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:_.studentsCount||25,onChange:F=>y({..._,studentsCount:parseInt(F.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>y({..._,shift:ce.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ce.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>y({..._,shift:ce.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ce.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:B.name||"",onChange:F=>v({...B,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.capacity||30,onChange:F=>v({...B,capacity:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.type,onChange:F=>v({...B,type:F.target.value}),children:tC.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},JK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,saveStaticData:A}=Zs(),{schedule:i,substitutions:o,saveScheduleData:a}=nl(),c=si(),[d,h]=S.useState(new Date().toISOString().split("T")[0]),[f,w]=S.useState(!1),[p,C]=S.useState(null),[_,y]=S.useState(!1),[B,v]=S.useState(!1),[R,Q]=S.useState(null),[N,I]=S.useState(""),[x,b]=S.useState(!1),[k,U]=S.useState(""),[D,T]=S.useState(""),[Ee,$e]=S.useState("all"),[Oe,V]=S.useState(""),[z,F]=S.useState(""),[L,H]=S.useState(""),[$,q]=S.useState("");S.useEffect(()=>{var O;(O=c.state)!=null&&O.subParams&&(C(c.state.subParams),H(""),q(""),w(!0),window.history.replaceState({},document.title))},[c.state]);const se=S.useMemo(()=>{const O=new Date(d).getDay();return O===0||O===6?null:Un[O-1]},[d]),fe=S.useMemo(()=>e.filter(O=>{const J=O.name.toLowerCase().includes(D.toLowerCase()),re=Ee==="all"?!0:O.shifts.includes(Ee);return J&&re}),[e,D,Ee]),Ue=S.useMemo(()=>e.filter(O=>O.unavailableDates.includes(d)),[e,d]),te=S.useMemo(()=>{if(!se)return[];const O=Ue.map(ie=>ie.id),J=i.filter(ie=>ie.day===se&&O.includes(ie.teacherId)),me=o.filter(ie=>ie.date===d).map(ie=>ie.scheduleItemId),we=i.filter(ie=>me.includes(ie.id)),he=[...J];return we.forEach(ie=>{he.find(Te=>Te.id===ie.id)||he.push(ie)}),he.sort((ie,Te)=>ie.period-Te.period)},[i,se,Ue,o,d]),Ne=O=>{var re;const J=e.find(me=>me.id===O);Q(O),I(((re=J==null?void 0:J.absenceReasons)==null?void 0:re[d])||""),y(!0)},ze=S.useCallback(async()=>{let O=[...e];const J=O.findIndex(me=>me.id===R);if(J===-1)return;const re={...O[J]};re.unavailableDates.includes(d)||(re.unavailableDates=[...re.unavailableDates,d]),re.absenceReasons||(re.absenceReasons={}),re.absenceReasons[d]=N,O[J]=re,await A({teachers:O}),y(!1)},[e,R,d,N,A]),Se=S.useCallback(async O=>{let J=[...e];const re=J.findIndex(we=>we.id===O);if(re===-1)return;const me={...J[re]};me.unavailableDates=me.unavailableDates.filter(we=>we!==d),me.absenceReasons&&delete me.absenceReasons[d],J[re]=me,await A({teachers:J})},[e,d,A]),Qe=S.useCallback(async(O,J=!1)=>{if(!p){alert(":   .    . ,   ."),console.error("assignSubstitution: currentSubParams is null, returning.");return}const re=[...o],me=i.find(ie=>ie.id===p.scheduleItemId);if(!me){alert(":     . ,   ."),console.error("assignSubstitution: Schedule item not found for ID:",p.scheduleItemId);return}const we=re.findIndex(ie=>ie.scheduleItemId===p.scheduleItemId&&ie.date===d),he={id:we>=0?re[we].id:Math.random().toString(36).substr(2,9),date:d,scheduleItemId:p.scheduleItemId,originalTeacherId:me.teacherId,replacementTeacherId:O,replacementRoomId:L||void 0,isMerger:J,lessonAbsenceReason:O!=="conducted"&&O!=="cancelled"&&$?$:void 0};we>=0?re[we]=he:re.push(he),await a({substitutions:re}),w(!1),V(""),H(""),q(""),C(null)},[p,d,L,i,o,e,$,a]),De=S.useCallback(async O=>{const J=o.filter(re=>!(re.scheduleItemId===O&&re.date===d));await a({substitutions:J})},[o,d,a]),be=S.useCallback(()=>{let O=`*  ${new Date(d).toLocaleDateString("ru-RU")}*
`;const J=o.some(me=>me.date===d&&me.replacementTeacherId!=="conducted"),re=(me,we)=>{const ie=te.filter(Te=>Te.shift===we).filter(Te=>{const Ce=o.find(xe=>xe.scheduleItemId===Te.id&&xe.date===d);return Ce&&Ce.replacementTeacherId!=="conducted"});ie.length>0&&(O+=`
 *${me.toUpperCase()}*
`,ie.forEach(Te=>{var P,Z,ye;const Ce=o.find(Ae=>Ae.scheduleItemId===Te.id&&Ae.date===d),xe=n.find(Ae=>Ae.id===Te.classId),je=t.find(Ae=>Ae.id===Te.subjectId),st=Ce?e.find(Ae=>Ae.id===Ce.replacementTeacherId):null,Ye=e.find(Ae=>Ae.id===Te.teacherId),Le=((P=r.find(Ae=>Ae.id===Te.roomId))==null?void 0:P.name)||Te.roomId||"?",qr=(Z=Ye==null?void 0:Ye.absenceReasons)==null?void 0:Z[d],Sr=Ce==null?void 0:Ce.lessonAbsenceReason,Dt=(Sr===" "?Sr:null)||(qr===" "?qr:null),Cn=(Ye==null?void 0:Ye.name)+(Dt?` (${Dt})`:""),Pn=Ce!=null&&Ce.replacementRoomId?((ye=r.find(Ae=>Ae.id===Ce.replacementRoomId))==null?void 0:ye.name)||Ce.replacementRoomId:null;if(Ce)if(Ce.replacementTeacherId==="cancelled")O+=` ${xe==null?void 0:xe.name} (${Te.period} ): ${je==null?void 0:je.name} (${Cn}) ->  
`;else if(Ce.replacementTeacherId===Ce.originalTeacherId&&Pn)O+=` ${xe==null?void 0:xe.name} (${Te.period} ): ${je==null?void 0:je.name} (${Ye==null?void 0:Ye.name}) ->  ${Le}  ${Pn}
`;else{let Ae=` ${xe==null?void 0:xe.name} (${Te.period} ): ${je==null?void 0:je.name} -> ${st==null?void 0:st.name} ${Ce.isMerger?"() ":""}( ${Cn})`;Pn&&(Ae+=`  . ${Pn}`),O+=Ae+`
`}}))};J?(re(ce.First,ce.First),re(ce.Second,ce.Second)):O+=`
 .`,navigator.clipboard.writeText(O),alert("     !")},[d,o,te,n,t,e,r]),ke=S.useCallback(()=>{let O=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(he=>he.date===d).forEach(he=>{var Rr;const ie=i.find(Dt=>Dt.id===he.scheduleItemId);if(!ie)return;let Te="Unknown";if(he.replacementTeacherId==="cancelled")Te=" ";else if(he.replacementTeacherId==="conducted")Te=" ";else{const Dt=e.find(Cn=>Cn.id===he.replacementTeacherId);Dt&&(Te=Dt.name)}const Ce=t.find(Dt=>Dt.id===ie.subjectId),xe=n.find(Dt=>Dt.id===ie.classId),je=he.date.replace(/-/g,""),st=e.find(Dt=>Dt.id===he.originalTeacherId),Ye=(Rr=st==null?void 0:st.absenceReasons)==null?void 0:Rr[d],Le=he.lessonAbsenceReason,Qr=(Le===" "?Le:null)||(Ye===" "?Ye:null);O+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${je}
SUMMARY:: ${xe==null?void 0:xe.name} - ${Ce==null?void 0:Ce.name}
DESCRIPTION:: ${Te}${he.isMerger?" ()":""}${Qr?` (: ${Qr})`:""}
END:VEVENT
`}),O+="END:VCALENDAR";const re=new Blob([O],{type:"text/calendar"}),me=URL.createObjectURL(re),we=document.createElement("a");we.href=me,we.download="substitutions.ics",document.body.appendChild(we),we.click(),document.body.removeChild(we)},[d,o,i,e,t,n]),tt=S.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let O=`*  ${new Date(d).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,J=!1;const re=new Set,me=[ce.First,ce.Second];for(const he of me){const Te=te.filter(Ce=>Ce.shift===he).filter(Ce=>o.some(xe=>xe.scheduleItemId===Ce.id&&xe.date===d&&xe.replacementTeacherId!=="conducted"));Te.length>0&&(J=!0,O+=` *${he.toUpperCase()}*
`,Te.forEach(Ce=>{var ye,Ae,ae;const xe=o.find(ge=>ge.scheduleItemId===Ce.id&&ge.date===d);if(!xe)return;const je=n.find(ge=>ge.id===Ce.classId),st=t.find(ge=>ge.id===Ce.subjectId),Ye=e.find(ge=>ge.id===xe.originalTeacherId),Le=e.find(ge=>ge.id===xe.replacementTeacherId),qr=(ye=Ye==null?void 0:Ye.absenceReasons)==null?void 0:ye[d],Sr=xe.lessonAbsenceReason,Dt=(Sr===" "?Sr:null)||(qr===" "?qr:null),Cn=(Ye==null?void 0:Ye.name)+(Dt?` (${Dt})`:""),Pn=((Ae=r.find(ge=>ge.id===Ce.roomId))==null?void 0:Ae.name)||Ce.roomId||"",P=xe.replacementRoomId?((ae=r.find(ge=>ge.id===xe.replacementRoomId))==null?void 0:ae.name)||xe.replacementRoomId:Pn;let Z=`${Ce.period}  (${je==null?void 0:je.name} ${st==null?void 0:st.name}${Ce.direction?` ${Ce.direction}`:""}): `;xe.replacementTeacherId==="cancelled"?Z+=`* * ( ${Cn})`:xe.replacementTeacherId===xe.originalTeacherId?Z+=`: ${Cn}.  : ${Pn}  ${P}`:(Z+=`*${Le==null?void 0:Le.name}* ${xe.isMerger?"() ":""}( *${Cn}*)`,Pn!==P?Z+=`. : ${Pn}  ${P}`:P!==""&&(Z+=`. : ${P}`)),O+=`${Z}
`,Ye!=null&&Ye.telegramChatId&&re.add(Ye.telegramChatId),Le!=null&&Le.telegramChatId&&re.add(Le.telegramChatId)}),O+=`
`)}if(J||(O+=` .
`),Ue.forEach(he=>{var xe;const ie=o.some(je=>je.date===d&&je.originalTeacherId===he.id&&je.replacementTeacherId!=="cancelled"&&je.replacementTeacherId!=="conducted"),Te=(xe=he.absenceReasons)==null?void 0:xe[d],Ce=Te===" "?Te:"";he.telegramChatId&&!ie&&he.unavailableDates.includes(d)&&(re.add(he.telegramChatId),J?O+=`_:  ${he.name} ${Ce},        /._
`:O+=`_:  ${he.name} ${Ce},      ._
`)}),re.size===0){alert("    Telegram Chat ID   .");return}const we=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const he=Array.from(re).map(ie=>fetch(we,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ie,text:O,parse_mode:"Markdown"})}));await Promise.all(he),alert(`   ${re.size} !`)}catch(he){console.error("    Telegram:",he),alert("     Telegram.     .")}},[d,te,o,n,t,e,r,Ue,s==null?void 0:s.telegramToken]),qe=S.useMemo(()=>p?new Set(o.filter(O=>O.date===d&&O.replacementTeacherId!=="conducted"&&O.replacementTeacherId!=="cancelled").map(O=>{const J=i.find(re=>re.id===O.scheduleItemId);return J&&J.period===p.period&&J.shift===p.shift?O.replacementTeacherId:null}).filter(O=>!!O)):new Set,[o,i,d,p]),nn=S.useMemo(()=>{if(!p||!se)return[];const O=d.substring(0,7);return e.filter(J=>J.name.toLowerCase().includes(Oe.toLowerCase())).map(J=>{const re=J.unavailableDates.includes(d),me=i.some(xe=>xe.teacherId===J.id&&xe.day===se&&xe.period===p.period&&xe.shift===p.shift),we=qe.has(J.id),he=me||we,ie=J.subjectIds.includes(p.subjectId),Te=o.filter(xe=>xe.replacementTeacherId===J.id&&xe.date.startsWith(O)).length;let Ce=0;return re&&(Ce-=1e3),he&&(Ce-=100),ie&&(Ce+=50),{teacher:J,isAbsent:re,isBusy:he,isSpecialist:ie,score:Ce,subsCount:Te}}).sort((J,re)=>re.score-J.score)},[e,p,d,Oe,se,i,o,qe]),rt=S.useMemo(()=>{var he;if(!p)return null;const O=i.find(ie=>ie.id===p.scheduleItemId);if(!O)return null;const J=n.find(ie=>ie.id===O.classId),re=t.find(ie=>ie.id===O.subjectId),me=e.find(ie=>ie.id===O.teacherId),we=((he=me==null?void 0:me.unavailableDates)==null?void 0:he.includes(d))||!1;return{className:J==null?void 0:J.name,subjectName:re==null?void 0:re.name,teacherName:me==null?void 0:me.name,teacherId:me==null?void 0:me.id,period:O.period,roomId:O.roomId,isTeacherAbsent:we}},[p,i,n,t,e,d]),dn=S.useMemo(()=>{if(!se||z.length<2)return[];const O=z.toLowerCase(),J=e.filter(we=>we.name.toLowerCase().includes(O)),re=n.filter(we=>we.name.toLowerCase().includes(O)),me=[];return J.forEach(we=>{i.filter(ie=>ie.teacherId===we.id&&ie.day===se).forEach(ie=>{const Te=n.find(xe=>xe.id===ie.classId),Ce=t.find(xe=>xe.id===ie.subjectId);me.push({...ie,entityName:we.name,subInfo:Te==null?void 0:Te.name,subjectName:Ce==null?void 0:Ce.name})})}),re.forEach(we=>{i.filter(ie=>ie.classId===we.id&&ie.day===se).forEach(ie=>{if(me.find(xe=>xe.id===ie.id))return;const Te=e.find(xe=>xe.id===ie.teacherId),Ce=t.find(xe=>xe.id===ie.subjectId);me.push({...ie,entityName:we.name,subInfo:Te==null?void 0:Te.name,subjectName:Ce==null?void 0:Ce.name})})}),me.sort((we,he)=>we.period-he.period)},[z,se,e,n,i,t]),Nn=S.useCallback(async(O,J,re,me,we,he)=>{const Te=new Date(he).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Ce=J.shift===ce.First?"1 ":"2 ",xe=` *  *
${O.name}

 : ${Te}
 : ${Ce}
 : ${re==null?void 0:re.name}
1 : ${J.period}
 : ${me==null?void 0:me.name}
 : ${we||" "}`;if(s!=null&&s.telegramToken&&O.telegramChatId)try{const st=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:O.telegramChatId,text:xe,parse_mode:"Markdown"})})).json();st.ok?alert(`   Telegram  ${O.name}!`):st.description.includes("chat not found")?alert(` Telegram:   .

  ${O.name}       "" (/start).`):alert(` Telegram: ${st.description}`)}catch(je){alert("   Telegram (/)."),console.error(je)}else navigator.share?navigator.share({title:"",text:xe}).catch(()=>{}):(navigator.clipboard.writeText(xe),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),rn=(O,J)=>{let re=!1;if(J){if(!window.confirm("     .     ?"))return;re=!0}Qe(O,re)};return l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:h-full",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 shrink-0",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(W,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:d,onChange:O=>h(O.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>b(!x),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${x?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(W,{name:"History",size:16})," ",x?" ":" "]})]}),x?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-1 md:overflow-hidden h-96 md:h-auto",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2 shrink-0",children:""}),l.jsx("input",{placeholder:"  /...",value:k,onChange:O=>U(O.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs shrink-0"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(O=>{var J;return O.date.includes(k)||((J=e.find(re=>re.id===O.replacementTeacherId))==null?void 0:J.name.toLowerCase().includes(k.toLowerCase()))}).map(O=>{const J=e.find(me=>me.id===O.replacementTeacherId),re=r.find(me=>me.id===O.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:O.date}),l.jsxs("div",{children:[(J==null?void 0:J.name)||(O.replacementTeacherId==="cancelled"?"":""),O.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),re&&l.jsxs("div",{className:"text-indigo-500",children:[". ",re.name]})]},O.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-1 md:overflow-hidden h-96 md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2 shrink-0",children:[l.jsx(W,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2 shrink-0",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>$e("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ee==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>$e(ce.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ee===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>$e(ce.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ee===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(W,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:D,onChange:O=>T(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[fe.map(O=>{const J=O.unavailableDates.includes(d),re=O.absenceReasons?O.absenceReasons[d]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${J?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${J?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:O.name}),l.jsx("button",{onClick:()=>J?Se(O.id):Ne(O.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${J?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:J?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:O.shifts.map(me=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:me===ce.First?"1":"2"},me))}),J&&l.jsxs("div",{className:"flex items-center gap-1",children:[re&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:re}),l.jsx("button",{onClick:()=>Ne(O.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(W,{name:"Edit2",size:14})})]})]})]},O.id)}),fe.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:overflow-hidden min-h-[500px]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",te.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(W,{name:"Calendar",size:16})," iCal"]}),te.length>0&&l.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(W,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:tt,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{F(""),v(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(W,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:te.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(W,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):te.map(O=>{var Ye;const J=o.find(Le=>Le.scheduleItemId===O.id&&Le.date===d),re=J&&J.replacementTeacherId!=="cancelled"&&J.replacementTeacherId!=="conducted"?e.find(Le=>Le.id===J.replacementTeacherId):null,me=e.find(Le=>Le.id===O.teacherId),we=t.find(Le=>Le.id===O.subjectId),he=n.find(Le=>Le.id===O.classId),ie=r.find(Le=>Le.id===O.roomId),Te=ie?ie.name:O.roomId,Ce=J==null?void 0:J.replacementRoomId,xe=Ce?((Ye=r.find(Le=>Le.id===Ce))==null?void 0:Ye.name)||Ce:null;let je=null;if((J==null?void 0:J.replacementTeacherId)==="conducted")je=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>De(O.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(W,{name:"X",size:16})})]});else if((J==null?void 0:J.replacementTeacherId)==="cancelled")je=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>De(O.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(W,{name:"X",size:16})})]});else if(re||Ce){const Le=(J==null?void 0:J.replacementTeacherId)===(J==null?void 0:J.originalTeacherId)&&Ce;je=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Le?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:Le?"  ":re==null?void 0:re.name}),J.isMerger&&l.jsx("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:""}),J.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",J.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>Nn(re||me,O,he,we,xe||Te,d),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(W,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>De(O.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(W,{name:"UserX",size:18})})]})]})}else je=l.jsxs("button",{onClick:()=>{C({scheduleItemId:O.id,subjectId:O.subjectId,period:O.period,shift:O.shift,classId:O.classId,teacherId:O.teacherId,roomId:O.roomId,day:O.day}),w(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(W,{name:"ArrowRight",size:16})]});const st=!Ue.find(Le=>Le.id===O.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:O.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:he==null?void 0:he.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:O.shift===ce.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:we==null?void 0:we.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:st?"font-semibold":"line-through decoration-red-400 decoration-2",children:me==null?void 0:me.name}),Te&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Te," ",xe&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",xe]})]}),(J==null?void 0:J.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",J.lessonAbsenceReason,")"]})]})]})]}),je]},O.id)})})]}),l.jsxs(Gr,{isOpen:f,onClose:()=>w(!1),title:" ",children:[rt&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[rt.className,"  ",rt.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:rt.subjectName}),l.jsx("span",{className:rt.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:rt.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:L,onChange:O=>H(O.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(O=>l.jsxs("option",{value:O.id,children:[O.name," (",O.capacity," )"]},O.id))]})]}),rt&&!rt.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:$,onChange:O=>q(O.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Qe("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Qe("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(rt==null?void 0:rt.teacherId)&&!rt.isTeacherAbsent&&l.jsx("button",{onClick:()=>Qe(rt.teacherId),className:"w-full p-3 mb-4 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(W,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Oe,onChange:O=>V(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[nn.map(({teacher:O,isAbsent:J,isBusy:re,isSpecialist:me,subsCount:we})=>l.jsxs("button",{disabled:J,onClick:()=>rn(O.id,re),title:J?" ":re?" ":"",className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${J?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":re?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md cursor-pointer":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${me?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:me?l.jsx(W,{name:"Star",size:14,fill:"currentColor"}):O.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:O.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[me&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),re&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),J&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${we>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",we]})]})]})]}),!J&&!re&&l.jsx("div",{className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),re&&!J&&l.jsx("div",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]},O.id)),nn.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Gr,{isOpen:B,onClose:()=>v(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(W,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:z,onChange:O=>F(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[dn.map(O=>{var J;return l.jsxs("button",{onClick:()=>{v(!1),C({scheduleItemId:O.id,subjectId:O.subjectId,period:O.period,shift:O.shift,classId:O.classId,teacherId:O.teacherId,roomId:O.roomId,day:O.day}),w(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[O.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",O.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[O.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:O.subjectName}),O.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((J=r.find(re=>re.id===O.roomId))==null?void 0:J.name)||O.roomId]})]})]},O.id)}),z.length>1&&dn.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",d,")"]})]})]}),l.jsx(Gr,{isOpen:_,onClose:()=>y(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:N,onChange:O=>I(O.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:ze,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},XK=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:s}=Zs(),{schedule:A}=nl(),[i,o]=S.useState("teachers"),[a,c]=S.useState(new Date().toISOString().split("T")[0]),[d,h]=S.useState(ce.First),[f,w]=S.useState(1),[p,C]=S.useState(ce.First),[_,y]=S.useState(1),[B,v]=S.useState(""),[R,Q]=S.useState("");S.useEffect(()=>{r&&(v(r.telegramToken||""),Q(r.feedbackChatId||""))},[r]),S.useEffect(()=>{w(d===ce.First?1:0)},[d]),S.useEffect(()=>{y(p===ce.First?1:0)},[p]);const N=S.useMemo(()=>{const U=new Date(a).getDay();return U===0||U===6?null:Un[U-1]},[a]),I=As[d],x=S.useMemo(()=>N?e.filter(U=>U.shifts&&!U.shifts.includes(d)||U.unavailableDates.includes(a)?!1:!A.some(T=>T.teacherId===U.id&&T.day===N&&T.period>f&&T.shift===d)).sort((U,D)=>U.name.localeCompare(D.name)):[],[e,a,N,f,d,A]),b=S.useMemo(()=>{if(!N)return[];const U=new Set;return A.forEach(T=>{T.day===N&&T.period===_&&T.shift===p&&T.roomId&&U.add(T.roomId)}),n.filter(T=>!U.has(T.id)).map(T=>T.name)},[A,n,N,_,p]),k=async()=>{await s({settings:{...r,telegramToken:B,feedbackChatId:R}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(W,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),i!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:a,onChange:U=>c(U.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),i==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>h(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>h(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:I.map(U=>l.jsx("button",{onClick:()=>w(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${f===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>C(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${p===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>C(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${p===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:As[p].map(U=>l.jsx("button",{onClick:()=>y(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${_===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:B,onChange:U=>v(U.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:R,onChange:U=>Q(U.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:k,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Save",size:20}),"  "]})]})]}),i==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[x.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(W,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:U.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:U.subjectIds.slice(0,2).map(D=>{const T=t.find(Ee=>Ee.id===D);return T?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:T.name},D):null})})]})]},U.id)),x.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",f,"   ",d]})]}),i==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[b.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(W,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:U}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},U)),b.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(W,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z0=function(t,e){return z0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},z0(t,e)};function $r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");z0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var W0=function(){return W0=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(e[A]=n[A])}return e},W0.apply(this,arguments)};function Dn(t,e,n,r){function s(A){return A instanceof n?A:new n(function(i){i(A)})}return new(n||(n=Promise))(function(A,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function Fn(t,e){var n={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},r,s,A,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(A=n.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){n.label=c[1];break}if(c[0]===6&&n.label<A[1]){n.label=A[1],A=c;break}if(A&&n.label<A[2]){n.label=A[2],n.ops.push(c);break}A[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Cd(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,A;r<s;r++)(A||!(r in e))&&(A||(A=Array.prototype.slice.call(e,0,r)),A[r]=e[r]);return t.concat(A||e)}var Ks=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Tg=function(t,e){return Ks.fromClientRect(t,e.getBoundingClientRect())},YK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Ks(0,0,r,s)},Fg=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},J_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ZK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _d=0;_d<J_.length;_d++)ZK[J_.charCodeAt(_d)]=_d;var X_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Id=0;Id<X_.length;Id++)Vl[X_.charCodeAt(Id)]=Id;var e3=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=Vl[t.charCodeAt(r)],i=Vl[t.charCodeAt(r+1)],o=Vl[t.charCodeAt(r+2)],a=Vl[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},t3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},n3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Oi=5,Gy=11,Gp=2,r3=Gy-Oi,yk=65536>>Oi,s3=1<<Oi,zp=s3-1,A3=1024>>Oi,i3=yk+A3,o3=i3,a3=32,l3=o3+a3,c3=65536>>Gy,u3=1<<r3,d3=u3-1,Y_=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},h3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},f3=function(t,e){var n=e3(t),r=Array.isArray(n)?n3(n):new Uint32Array(n),s=Array.isArray(n)?t3(n):new Uint16Array(n),A=24,i=Y_(s,A/2,r[4]/2),o=r[5]===2?Y_(s,(A+r[4])/2):h3(r,Math.ceil((A+r[4])/4));return new g3(r[0],r[1],r[2],r[3],i,o)},g3=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Oi],n=(n<<Gp)+(e&zp),this.data[n];if(e<=65535)return n=this.index[yk+(e-55296>>Oi)],n=(n<<Gp)+(e&zp),this.data[n];if(e<this.highStart)return n=l3-c3+(e>>Gy),n=this.index[n],n+=e>>Oi&d3,n=this.index[n],n=(n<<Gp)+(e&zp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Z_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ed=0;Ed<Z_.length;Ed++)p3[Z_.charCodeAt(Ed)]=Ed;var m3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",eI=50,w3=1,Bk=2,xk=3,v3=4,y3=5,tI=7,Ck=8,nI=9,IA=10,$0=11,rI=12,q0=13,B3=14,Hl=15,J0=16,bd=17,Tl=18,x3=19,sI=20,X0=21,Fl=22,Wp=23,Eo=24,ar=25,Kl=26,Gl=27,bo=28,C3=29,Ii=30,_3=31,Td=32,Fd=33,Y0=34,Z0=35,ew=36,ou=37,tw=38,ph=39,mh=40,$p=41,_k=42,I3=43,E3=[9001,65288],Ik="!",He="",Ud="",nw=f3(m3),Cs=[Ii,ew],rw=[w3,Bk,xk,y3],Ek=[IA,Ck],AI=[Gl,Kl],b3=rw.concat(Ek),iI=[tw,ph,mh,Y0,Z0],T3=[Hl,q0],F3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(A,i){var o=nw.get(A);if(o>eI?(s.push(!0),o-=eI):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return r.push(i),n.push(J0);if(o===v3||o===$0){if(i===0)return r.push(i),n.push(Ii);var a=n[i-1];return b3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(Ii))}if(r.push(i),o===_3)return n.push(e==="strict"?X0:ou);if(o===_k||o===C3)return n.push(Ii);if(o===I3)return A>=131072&&A<=196605||A>=196608&&A<=262141?n.push(ou):n.push(Ii);n.push(o)}),[r,n,s]},qp=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=n;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==IA)break}if(s===IA)for(var A=n;A>0;){A--;var o=r[A];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==IA)break}if(o!==IA)break}return!1},oI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===IA)n--;else return r}return 0},U3=function(t,e,n,r,s){if(n[r]===0)return He;var A=r-1;if(Array.isArray(s)&&s[A]===!0)return He;var i=A-1,o=A+1,a=e[A],c=i>=0?e[i]:0,d=e[o];if(a===Bk&&d===xk)return He;if(rw.indexOf(a)!==-1)return Ik;if(rw.indexOf(d)!==-1||Ek.indexOf(d)!==-1)return He;if(oI(A,e)===Ck)return Ud;if(nw.get(t[A])===$0||(a===Td||a===Fd)&&nw.get(t[o])===$0||a===tI||d===tI||a===nI||[IA,q0,Hl].indexOf(a)===-1&&d===nI||[bd,Tl,x3,Eo,bo].indexOf(d)!==-1||oI(A,e)===Fl||qp(Wp,Fl,A,e)||qp([bd,Tl],X0,A,e)||qp(rI,rI,A,e))return He;if(a===IA)return Ud;if(a===Wp||d===Wp)return He;if(d===J0||a===J0)return Ud;if([q0,Hl,X0].indexOf(d)!==-1||a===B3||c===ew&&T3.indexOf(a)!==-1||a===bo&&d===ew||d===sI||Cs.indexOf(d)!==-1&&a===ar||Cs.indexOf(a)!==-1&&d===ar||a===Gl&&[ou,Td,Fd].indexOf(d)!==-1||[ou,Td,Fd].indexOf(a)!==-1&&d===Kl||Cs.indexOf(a)!==-1&&AI.indexOf(d)!==-1||AI.indexOf(a)!==-1&&Cs.indexOf(d)!==-1||[Gl,Kl].indexOf(a)!==-1&&(d===ar||[Fl,Hl].indexOf(d)!==-1&&e[o+1]===ar)||[Fl,Hl].indexOf(a)!==-1&&d===ar||a===ar&&[ar,bo,Eo].indexOf(d)!==-1)return He;if([ar,bo,Eo,bd,Tl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===ar)return He;if([bo,Eo].indexOf(f)!==-1)h--;else break}if([Gl,Kl].indexOf(d)!==-1)for(var h=[bd,Tl].indexOf(a)!==-1?i:A;h>=0;){var f=e[h];if(f===ar)return He;if([bo,Eo].indexOf(f)!==-1)h--;else break}if(tw===a&&[tw,ph,Y0,Z0].indexOf(d)!==-1||[ph,Y0].indexOf(a)!==-1&&[ph,mh].indexOf(d)!==-1||[mh,Z0].indexOf(a)!==-1&&d===mh||iI.indexOf(a)!==-1&&[sI,Kl].indexOf(d)!==-1||iI.indexOf(d)!==-1&&a===Gl||Cs.indexOf(a)!==-1&&Cs.indexOf(d)!==-1||a===Eo&&Cs.indexOf(d)!==-1||Cs.concat(ar).indexOf(a)!==-1&&d===Fl&&E3.indexOf(t[o])===-1||Cs.concat(ar).indexOf(d)!==-1&&a===Tl)return He;if(a===$p&&d===$p){for(var w=n[A],p=1;w>0&&(w--,e[w]===$p);)p++;if(p%2!==0)return He}return a===Td&&d===Fd?He:Ud},k3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=F3(t,e.lineBreak),r=n[0],s=n[1],A=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ar,Ii,_k].indexOf(o)!==-1?ou:o}));var i=e.wordBreak==="keep-all"?A.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,s,i]},S3=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===Ik,this.start=r,this.end=s}return t.prototype.slice=function(){return Ot.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Q3=function(t,e){var n=Fg(t),r=k3(n,e),s=r[0],A=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=He;c<o&&(d=U3(n,A,s,++c,i))===He;);if(d!==He||c===o){var h=new S3(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},R3=1,N3=2,Pu=4,aI=8,gf=10,lI=47,fc=92,P3=9,D3=32,kd=34,Ul=61,L3=35,O3=36,j3=37,Sd=39,Qd=40,kl=41,M3=95,Jn=45,V3=33,H3=60,K3=62,G3=64,z3=91,W3=93,$3=61,q3=123,Rd=63,J3=125,cI=124,X3=126,Y3=128,uI=65533,Jp=42,Qi=43,Z3=44,e5=58,t5=59,au=46,n5=0,r5=8,s5=11,A5=14,i5=31,o5=127,Xr=-1,bk=48,Tk=97,Fk=101,a5=102,l5=117,c5=122,Uk=65,kk=69,Sk=70,u5=85,d5=90,kn=function(t){return t>=bk&&t<=57},h5=function(t){return t>=55296&&t<=57343},To=function(t){return kn(t)||t>=Uk&&t<=Sk||t>=Tk&&t<=a5},f5=function(t){return t>=Tk&&t<=c5},g5=function(t){return t>=Uk&&t<=d5},p5=function(t){return f5(t)||g5(t)},m5=function(t){return t>=Y3},Nd=function(t){return t===gf||t===P3||t===D3},pf=function(t){return p5(t)||m5(t)||t===M3},dI=function(t){return pf(t)||kn(t)||t===Jn},w5=function(t){return t>=n5&&t<=r5||t===s5||t>=A5&&t<=i5||t===o5},fA=function(t,e){return t!==fc?!1:e!==gf},Pd=function(t,e,n){return t===Jn?pf(e)||fA(e,n):pf(t)?!0:!!(t===fc&&fA(t,e))},Xp=function(t,e,n){return t===Qi||t===Jn?kn(e)?!0:e===au&&kn(n):kn(t===au?e:t)},v5=function(t){var e=0,n=1;(t[e]===Qi||t[e]===Jn)&&(t[e]===Jn&&(n=-1),e++);for(var r=[];kn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Ot.apply(void 0,r),10):0;t[e]===au&&e++;for(var A=[];kn(t[e]);)A.push(t[e++]);var i=A.length,o=i?parseInt(Ot.apply(void 0,A),10):0;(t[e]===kk||t[e]===Fk)&&e++;var a=1;(t[e]===Qi||t[e]===Jn)&&(t[e]===Jn&&(a=-1),e++);for(var c=[];kn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Ot.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,a*d)},y5={type:2},B5={type:3},x5={type:4},C5={type:13},_5={type:8},I5={type:21},E5={type:9},b5={type:10},T5={type:11},F5={type:12},U5={type:14},Dd={type:23},k5={type:1},S5={type:25},Q5={type:24},R5={type:26},N5={type:27},P5={type:28},D5={type:29},L5={type:31},sw={type:32},Qk=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Fg(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==sw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case kd:return this.consumeStringToken(kd);case L3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(dI(n)||fA(r,s)){var A=Pd(n,r,s)?N3:R3,i=this.consumeName();return{type:5,value:i,flags:A}}break;case O3:if(this.peekCodePoint(0)===Ul)return this.consumeCodePoint(),C5;break;case Sd:return this.consumeStringToken(Sd);case Qd:return y5;case kl:return B5;case Jp:if(this.peekCodePoint(0)===Ul)return this.consumeCodePoint(),U5;break;case Qi:if(Xp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Z3:return x5;case Jn:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Xp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Pd(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===Jn&&c===K3)return this.consumeCodePoint(),this.consumeCodePoint(),Q5;break;case au:if(Xp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case lI:if(this.peekCodePoint(0)===Jp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Jp&&(d=this.consumeCodePoint(),d===lI))return this.consumeToken();if(d===Xr)return this.consumeToken()}break;case e5:return R5;case t5:return N5;case H3:if(this.peekCodePoint(0)===V3&&this.peekCodePoint(1)===Jn&&this.peekCodePoint(2)===Jn)return this.consumeCodePoint(),this.consumeCodePoint(),S5;break;case G3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(Pd(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case z3:return P5;case fc:if(fA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case W3:return D5;case $3:if(this.peekCodePoint(0)===Ul)return this.consumeCodePoint(),_5;break;case q3:return T5;case J3:return F5;case l5:case u5:var p=this.peekCodePoint(0),C=this.peekCodePoint(1);return p===Qi&&(To(C)||C===Rd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case cI:if(this.peekCodePoint(0)===Ul)return this.consumeCodePoint(),E5;if(this.peekCodePoint(0)===cI)return this.consumeCodePoint(),I5;break;case X3:if(this.peekCodePoint(0)===Ul)return this.consumeCodePoint(),b5;break;case Xr:return sw}return Nd(e)?(this.consumeWhiteSpace(),L5):kn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):pf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ot(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();To(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Rd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Ot.apply(void 0,e.map(function(a){return a===Rd?bk:a})),16),A=parseInt(Ot.apply(void 0,e.map(function(a){return a===Rd?Sk:a})),16);return{type:30,start:s,end:A}}var i=parseInt(Ot.apply(void 0,e),16);if(this.peekCodePoint(0)===Jn&&To(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];To(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var A=parseInt(Ot.apply(void 0,o),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Qd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Qd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Xr)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Sd||n===kd){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Xr||this.peekCodePoint(0)===kl)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Dd)}for(;;){var s=this.consumeCodePoint();if(s===Xr||s===kl)return{type:22,value:Ot.apply(void 0,e)};if(Nd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Xr||this.peekCodePoint(0)===kl?(this.consumeCodePoint(),{type:22,value:Ot.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Dd);if(s===kd||s===Sd||s===Qd||w5(s))return this.consumeBadUrlRemnants(),Dd;if(s===fc)if(fA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Dd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Nd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===kl||e===Xr)return;fA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Ot.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Xr||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===gf)return this._value.splice(0,r),k5;if(s===fc){var A=this._value[r+1];A!==Xr&&A!==void 0&&(A===gf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):fA(s,A)&&(n+=this.consumeStringSlice(r),n+=Ot(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Pu,r=this.peekCodePoint(0);for((r===Qi||r===Jn)&&e.push(this.consumeCodePoint());kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===au&&kn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=aI;kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((r===kk||r===Fk)&&((s===Qi||s===Jn)&&kn(A)||kn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=aI;kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[v5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Pd(s,A,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===j3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(To(e)){for(var n=Ot(e);To(this.peekCodePoint(0))&&n.length<6;)n+=Ot(this.consumeCodePoint());Nd(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||h5(r)||r>1114111?uI:r}return e===Xr?uI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(dI(n))e+=Ot(n);else if(fA(n,this.peekCodePoint(0)))e+=Ot(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),Rk=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new Qk;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||j5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?sw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Du=function(t){return t.type===15},rl=function(t){return t.type===17},at=function(t){return t.type===20},O5=function(t){return t.type===0},Aw=function(t,e){return at(t)&&t.value===e},Nk=function(t){return t.type!==31},Da=function(t){return t.type!==31&&t.type!==4},ws=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},j5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ei=function(t){return t.type===17||t.type===15},Wt=function(t){return t.type===16||ei(t)},Pk=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},wn={type:17,number:0,flags:Pu},zy={type:16,number:50,flags:Pu},EA={type:16,number:100,flags:Pu},zl=function(t,e,n){var r=t[0],s=t[1];return[ut(r,e),ut(typeof s<"u"?s:r,n)]},ut=function(t,e){if(t.type===16)return t.number/100*e;if(Du(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Dk="deg",Lk="grad",Ok="rad",jk="turn",Ug={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Dk:return Math.PI*e.number/180;case Lk:return Math.PI/200*e.number;case Ok:return e.number;case jk:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Mk=function(t){return t.type===15&&(t.unit===Dk||t.unit===Lk||t.unit===Ok||t.unit===jk)},Vk=function(t){var e=t.filter(at).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wn,wn];case"to top":case"bottom":return Ir(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wn,EA];case"to right":case"left":return Ir(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[EA,EA];case"to bottom":case"top":return Ir(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[EA,wn];case"to left":case"right":return Ir(270)}return 0},Ir=function(t){return Math.PI*t/180},OA={name:"color",parse:function(t,e){if(e.type===18){var n=M5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return bA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return bA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return bA(parseInt(r,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return bA(parseInt(r,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var o=Ns[e.value.toUpperCase()];if(typeof o<"u")return o}return Ns.TRANSPARENT}},jA=function(t){return(255&t)===0},An=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},bA=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},hI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},fI=function(t,e){var n=e.filter(Da);if(n.length===3){var r=n.map(hI),s=r[0],A=r[1],i=r[2];return bA(s,A,i,1)}if(n.length===4){var o=n.map(hI),s=o[0],A=o[1],i=o[2],a=o[3];return bA(s,A,i,a)}return 0};function Yp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var gI=function(t,e){var n=e.filter(Da),r=n[0],s=n[1],A=n[2],i=n[3],o=(r.type===17?Ir(r.number):Ug.parse(t,r))/(Math.PI*2),a=Wt(s)?s.number/100:0,c=Wt(A)?A.number/100:0,d=typeof i<"u"&&Wt(i)?ut(i,1):1;if(a===0)return bA(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,w=Yp(f,h,o+1/3),p=Yp(f,h,o),C=Yp(f,h,o-1/3);return bA(w*255,p*255,C*255,d)},M5={hsl:gI,hsla:gI,rgb:fI,rgba:fI},gc=function(t,e){return OA.parse(t,Rk.create(e).parseComponentValue())},Ns={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},V5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(at(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},H5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},kg=function(t,e){var n=OA.parse(t,e[0]),r=e[1];return r&&Wt(r)?{color:n,stop:r}:{color:n,stop:null}},pI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=wn),r.stop===null&&(r.stop=EA);for(var s=[],A=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=ut(o,e);a>A?s.push(a):s.push(A),A=a}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],w=(d-f)/(h+1),p=1;p<=h;p++)s[c+p-1]=w*p;c=null}}return t.map(function(C,_){var y=C.color;return{color:y,stop:Math.max(Math.min(1,s[_]/e),0)}})},K5=function(t,e,n){var r=e/2,s=n/2,A=ut(t[0],e)-r,i=s-ut(t[1],n);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},G5=function(t,e,n){var r=typeof t=="number"?t:K5(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),A=e/2,i=n/2,o=s/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,A-c,A+c,i-a,i+a]},Lr=function(t,e){return Math.sqrt(t*t+e*e)},mI=function(t,e,n,r,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,o){var a=o[0],c=o[1],d=Lr(n-a,r-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},z5=function(t,e,n,r,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)A=i=Math.min(Lr(e,n),Lr(e,n-s),Lr(e-r,n),Lr(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),a=mI(r,s,e,n,!0),c=a[0],d=a[1];A=Lr(c-e,(d-n)/o),i=o*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)A=i=Math.max(Lr(e,n),Lr(e,n-s),Lr(e-r,n),Lr(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=mI(r,s,e,n,!1),c=h[0],d=h[1];A=Lr(c-e,(d-n)/o),i=o*A}break}return Array.isArray(t.size)&&(A=ut(t.size[0],r),i=t.size.length===2?ut(t.size[1],s):A),[A,i]},W5=function(t,e){var n=Ir(180),r=[];return ws(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){n=Vk(s);return}else if(Mk(i)){n=Ug.parse(t,i);return}}var o=kg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Ld=function(t,e){var n=Ir(180),r=[];return ws(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=Vk(s);return}else if(Mk(i)){n=(Ug.parse(t,i)+Ir(270))%Ir(360);return}}var o=kg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},$5=function(t,e){var n=Ir(180),r=[],s=1,A=0,i=3,o=[];return ws(e).forEach(function(a,c){var d=a[0];if(c===0){if(at(d)&&d.value==="linear"){s=1;return}else if(at(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=OA.parse(t,d.values[0]);r.push({stop:wn,color:h})}else if(d.name==="to"){var h=OA.parse(t,d.values[0]);r.push({stop:EA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Da);if(f.length===2){var h=OA.parse(t,f[1]),w=f[0];rl(w)&&r.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),s===1?{angle:(n+Ir(180))%Ir(360),stops:r,type:s}:{size:i,shape:A,stops:r,position:o,type:s}},Hk="closest-side",Kk="farthest-side",Gk="closest-corner",zk="farthest-corner",Wk="circle",$k="ellipse",qk="cover",Jk="contain",q5=function(t,e){var n=0,r=3,s=[],A=[];return ws(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(at(f))switch(f.value){case"center":return A.push(zy),h;case"top":case"left":return A.push(wn),h;case"right":case"bottom":return A.push(EA),h}else(Wt(f)||ei(f))&&A.push(f);else if(at(f))switch(f.value){case Wk:return n=0,!1;case $k:return n=1,!1;case"at":return c=!0,!1;case Hk:return r=0,!1;case qk:case Kk:return r=1,!1;case Jk:case Gk:return r=2,!1;case zk:return r=3,!1}else if(ei(f)||Wt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=kg(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:A,type:2}},Od=function(t,e){var n=0,r=3,s=[],A=[];return ws(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(at(h))switch(h.value){case"center":return A.push(zy),!1;case"top":case"left":return A.push(wn),!1;case"right":case"bottom":return A.push(EA),!1}else if(Wt(h)||ei(h))return A.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(at(h))switch(h.value){case Wk:return n=0,!1;case $k:return n=1,!1;case Jk:case Hk:return r=0,!1;case Kk:return r=1,!1;case Gk:return r=2,!1;case qk:case zk:return r=3,!1}else if(ei(h)||Wt(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=kg(t,i);s.push(c)}}),{size:r,shape:n,stops:s,position:A,type:2}},J5=function(t){return t.type===1},X5=function(t){return t.type===2},Wy={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=Xk[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Y5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Xk[t.name])}var Xk={"linear-gradient":W5,"-moz-linear-gradient":Ld,"-ms-linear-gradient":Ld,"-o-linear-gradient":Ld,"-webkit-linear-gradient":Ld,"radial-gradient":q5,"-moz-radial-gradient":Od,"-ms-radial-gradient":Od,"-o-radial-gradient":Od,"-webkit-radial-gradient":Od,"-webkit-gradient":$5},Z5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Da(r)&&Y5(r)}).map(function(r){return Wy.parse(t,r)})}},e6={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(at(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},t6={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ws(e).map(function(n){return n.filter(Wt)}).map(Pk)}},n6={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ws(e).map(function(n){return n.filter(at).map(function(r){return r.value}).join(" ")}).map(r6)}},r6=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ua;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ua||(ua={}));var s6={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ws(e).map(function(n){return n.filter(A6)})}},A6=function(t){return at(t)||Wt(t)},Sg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},i6=Sg("top"),o6=Sg("right"),a6=Sg("bottom"),l6=Sg("left"),Qg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return Pk(n.filter(Wt))}}},c6=Qg("top-left"),u6=Qg("top-right"),d6=Qg("bottom-right"),h6=Qg("bottom-left"),Rg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},f6=Rg("top"),g6=Rg("right"),p6=Rg("bottom"),m6=Rg("left"),Ng=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Du(n)?n.number:0}}},w6=Ng("top"),v6=Ng("right"),y6=Ng("bottom"),B6=Ng("left"),x6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},C6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},_6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(at).reduce(function(n,r){return n|I6(r.value)},0)}},I6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},E6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},b6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},mf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(mf||(mf={}));var T6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return mf.STRICT;case"normal":default:return mf.NORMAL}}},F6={name:"line-height",initialValue:"normal",prefix:!1,type:4},wI=function(t,e){return at(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Wt(t)?ut(t,e):e},U6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Wy.parse(t,e)}},k6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},iw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Pg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},S6=Pg("top"),Q6=Pg("right"),R6=Pg("bottom"),N6=Pg("left"),P6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},D6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Dg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},L6=Dg("top"),O6=Dg("right"),j6=Dg("bottom"),M6=Dg("left"),V6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},H6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},K6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Aw(e[0],"none")?[]:ws(e).map(function(n){for(var r={color:Ns.TRANSPARENT,offsetX:wn,offsetY:wn,blur:wn},s=0,A=0;A<n.length;A++){var i=n[A];ei(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=OA.parse(t,i)}return r})}},G6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},z6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=q6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},W6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},$6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,A,i,o]:null},q6={matrix:W6,matrix3d:$6},vI={type:16,number:50,flags:Pu},J6=[vI,vI],X6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Wt);return n.length!==2?J6:[n[0],n[1]]}},Y6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},pc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(pc||(pc={}));var Z6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return pc.BREAK_ALL;case"keep-all":return pc.KEEP_ALL;case"normal":default:return pc.NORMAL}}},eG={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(rl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Yk={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},tG={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return rl(e)?e.number:1}},nG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},sG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},AG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},iG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(rl(e))return e.number;if(at(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},oG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(at).map(function(n){return n.value})}},aG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Yt=function(t,e){return(t&e)!==0},lG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},cG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(Nk),A=0;A<s.length;A++){var i=s[A],o=s[A+1];if(i.type===20){var a=o&&rl(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},uG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(Nk),s=0;s<r.length;s++){var A=r[s],i=r[s+1];if(at(A)&&A.value!=="none"){var o=i&&rl(i)?i.number:0;n.push({counter:A.value,reset:o})}}return n}},dG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Du).map(function(n){return Yk.parse(t,n)})}},hG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(O5);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,o=s[A+1].value;r.push({open:i,close:o})}return r}},yI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},fG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Aw(e[0],"none")?[]:ws(e).map(function(n){for(var r={color:255,offsetX:wn,offsetY:wn,blur:wn,spread:wn,inset:!1},s=0,A=0;A<n.length;A++){var i=n[A];Aw(i,"inset")?r.inset=!0:ei(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=OA.parse(t,i)}return r})}},gG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(at).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},pG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},mG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Du(e)?e.number:0}},wG=function(){function t(e,n){var r,s;this.animationDuration=pe(e,dG,n.animationDuration),this.backgroundClip=pe(e,V5,n.backgroundClip),this.backgroundColor=pe(e,H5,n.backgroundColor),this.backgroundImage=pe(e,Z5,n.backgroundImage),this.backgroundOrigin=pe(e,e6,n.backgroundOrigin),this.backgroundPosition=pe(e,t6,n.backgroundPosition),this.backgroundRepeat=pe(e,n6,n.backgroundRepeat),this.backgroundSize=pe(e,s6,n.backgroundSize),this.borderTopColor=pe(e,i6,n.borderTopColor),this.borderRightColor=pe(e,o6,n.borderRightColor),this.borderBottomColor=pe(e,a6,n.borderBottomColor),this.borderLeftColor=pe(e,l6,n.borderLeftColor),this.borderTopLeftRadius=pe(e,c6,n.borderTopLeftRadius),this.borderTopRightRadius=pe(e,u6,n.borderTopRightRadius),this.borderBottomRightRadius=pe(e,d6,n.borderBottomRightRadius),this.borderBottomLeftRadius=pe(e,h6,n.borderBottomLeftRadius),this.borderTopStyle=pe(e,f6,n.borderTopStyle),this.borderRightStyle=pe(e,g6,n.borderRightStyle),this.borderBottomStyle=pe(e,p6,n.borderBottomStyle),this.borderLeftStyle=pe(e,m6,n.borderLeftStyle),this.borderTopWidth=pe(e,w6,n.borderTopWidth),this.borderRightWidth=pe(e,v6,n.borderRightWidth),this.borderBottomWidth=pe(e,y6,n.borderBottomWidth),this.borderLeftWidth=pe(e,B6,n.borderLeftWidth),this.boxShadow=pe(e,fG,n.boxShadow),this.color=pe(e,x6,n.color),this.direction=pe(e,C6,n.direction),this.display=pe(e,_6,n.display),this.float=pe(e,E6,n.cssFloat),this.fontFamily=pe(e,sG,n.fontFamily),this.fontSize=pe(e,AG,n.fontSize),this.fontStyle=pe(e,aG,n.fontStyle),this.fontVariant=pe(e,oG,n.fontVariant),this.fontWeight=pe(e,iG,n.fontWeight),this.letterSpacing=pe(e,b6,n.letterSpacing),this.lineBreak=pe(e,T6,n.lineBreak),this.lineHeight=pe(e,F6,n.lineHeight),this.listStyleImage=pe(e,U6,n.listStyleImage),this.listStylePosition=pe(e,k6,n.listStylePosition),this.listStyleType=pe(e,iw,n.listStyleType),this.marginTop=pe(e,S6,n.marginTop),this.marginRight=pe(e,Q6,n.marginRight),this.marginBottom=pe(e,R6,n.marginBottom),this.marginLeft=pe(e,N6,n.marginLeft),this.opacity=pe(e,tG,n.opacity);var A=pe(e,P6,n.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=pe(e,D6,n.overflowWrap),this.paddingTop=pe(e,L6,n.paddingTop),this.paddingRight=pe(e,O6,n.paddingRight),this.paddingBottom=pe(e,j6,n.paddingBottom),this.paddingLeft=pe(e,M6,n.paddingLeft),this.paintOrder=pe(e,gG,n.paintOrder),this.position=pe(e,H6,n.position),this.textAlign=pe(e,V6,n.textAlign),this.textDecorationColor=pe(e,nG,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=pe(e,rG,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=pe(e,K6,n.textShadow),this.textTransform=pe(e,G6,n.textTransform),this.transform=pe(e,z6,n.transform),this.transformOrigin=pe(e,X6,n.transformOrigin),this.visibility=pe(e,Y6,n.visibility),this.webkitTextStrokeColor=pe(e,pG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=pe(e,mG,n.webkitTextStrokeWidth),this.wordBreak=pe(e,Z6,n.wordBreak),this.zIndex=pe(e,eG,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return jA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Yt(this.display,4)||Yt(this.display,33554432)||Yt(this.display,268435456)||Yt(this.display,536870912)||Yt(this.display,67108864)||Yt(this.display,134217728)},t}(),vG=function(){function t(e,n){this.content=pe(e,lG,n.content),this.quotes=pe(e,hG,n.quotes)}return t}(),BI=function(){function t(e,n){this.counterIncrement=pe(e,cG,n.counterIncrement),this.counterReset=pe(e,uG,n.counterReset)}return t}(),pe=function(t,e,n){var r=new Qk,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var A=new Rk(r.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,at(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return Ug.parse(t,A.parseComponentValue());case"color":return OA.parse(t,A.parseComponentValue());case"image":return Wy.parse(t,A.parseComponentValue());case"length":var o=A.parseComponentValue();return ei(o)?o:wn;case"length-percentage":var a=A.parseComponentValue();return Wt(a)?a:wn;case"time":return Yk.parse(t,A.parseComponentValue())}break}},yG="data-html2canvas-debug",BG=function(t){var e=t.getAttribute(yG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ow=function(t,e){var n=BG(t);return n===1||e===n},vs=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ow(n,3))debugger;this.styles=new wG(e,window.getComputedStyle(n,null)),cw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Tg(this.context,n),ow(n,4)&&(this.flags|=16)}return t}(),xG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",xI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jd=0;jd<xI.length;jd++)Wl[xI.charCodeAt(jd)]=jd;var CG=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=Wl[t.charCodeAt(r)],i=Wl[t.charCodeAt(r+1)],o=Wl[t.charCodeAt(r+2)],a=Wl[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},_G=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},IG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},ji=5,$y=11,Zp=2,EG=$y-ji,Zk=65536>>ji,bG=1<<ji,em=bG-1,TG=1024>>ji,FG=Zk+TG,UG=FG,kG=32,SG=UG+kG,QG=65536>>$y,RG=1<<EG,NG=RG-1,CI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},PG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},DG=function(t,e){var n=CG(t),r=Array.isArray(n)?IG(n):new Uint32Array(n),s=Array.isArray(n)?_G(n):new Uint16Array(n),A=24,i=CI(s,A/2,r[4]/2),o=r[5]===2?CI(s,(A+r[4])/2):PG(r,Math.ceil((A+r[4])/4));return new LG(r[0],r[1],r[2],r[3],i,o)},LG=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>ji],n=(n<<Zp)+(e&em),this.data[n];if(e<=65535)return n=this.index[Zk+(e-55296>>ji)],n=(n<<Zp)+(e&em),this.data[n];if(e<this.highStart)return n=SG-QG+(e>>$y),n=this.index[n],n+=e>>ji&NG,n=this.index[n],n=(n<<Zp)+(e&em),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),_I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Md=0;Md<_I.length;Md++)OG[_I.charCodeAt(Md)]=Md;var jG=1,tm=2,nm=3,II=4,EI=5,MG=7,bI=8,rm=9,sm=10,TI=11,FI=12,UI=13,kI=14,Am=15,VG=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},HG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},KG=DG(xG),vr="",im="",GG=function(t){return KG.get(t)},zG=function(t,e,n){var r=n-2,s=e[r],A=e[n-1],i=e[n];if(A===tm&&i===nm)return vr;if(A===tm||A===nm||A===II||i===tm||i===nm||i===II)return im;if(A===bI&&[bI,rm,TI,FI].indexOf(i)!==-1||(A===TI||A===rm)&&(i===rm||i===sm)||(A===FI||A===sm)&&i===sm||i===UI||i===EI||i===MG||A===jG)return vr;if(A===UI&&i===kI){for(;s===EI;)s=e[--r];if(s===kI)return vr}if(A===Am&&i===Am){for(var o=0;s===Am;)o++,s=e[--r];if(o%2===0)return vr}return im},WG=function(t){var e=VG(t),n=e.length,r=0,s=0,A=e.map(GG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=vr;r<n&&(i=zG(e,A,++r))===vr;);if(i!==vr||r===n){var o=HG.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},$G=function(t){for(var e=WG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},qG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(r),A===e)return!0}}return!1},JG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=Fg(r.data).map(function(a){return Ot(a)}),A=0,i={},o=s.every(function(a,c){n.setStart(r,A),n.setEnd(r,A+a.length);var d=n.getBoundingClientRect();A+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},XG=function(){return typeof new Image().crossOrigin<"u"},YG=function(){return typeof new XMLHttpRequest().responseType=="string"},ZG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},SI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},e8=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,A=e.toDataURL();s.src=A;var i=aw(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),QI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=n+"px",SI(a)?QI(aw(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),SI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},aw=function(t,e,n,r,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),o=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},QI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},gn={get SUPPORT_RANGE_BOUNDS(){var t=qG(document);return Object.defineProperty(gn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=gn.SUPPORT_RANGE_BOUNDS&&JG(document);return Object.defineProperty(gn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=ZG(document);return Object.defineProperty(gn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?e8(document):Promise.resolve(!1);return Object.defineProperty(gn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=XG();return Object.defineProperty(gn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=YG();return Object.defineProperty(gn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(gn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(gn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},mc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),t8=function(t,e,n,r){var s=s8(e,n),A=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(gn.SUPPORT_RANGE_BOUNDS){var a=RI(r,i,o.length).getClientRects();if(a.length>1){var c=qy(o),d=0;c.forEach(function(f){A.push(new mc(f,Ks.fromDOMRectList(t,RI(r,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new mc(o,Ks.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);A.push(new mc(o,n8(t,r))),r=h}else gn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),A},n8=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var A=Tg(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),A}}return Ks.EMPTY},RI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},qy=function(t){if(gn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return $G(t)},r8=function(t,e){if(gn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return i8(t,e)},s8=function(t,e){return e.letterSpacing!==0?qy(t):r8(t,e)},A8=[32,160,4961,65792,65793,4153,4241],i8=function(t,e){for(var n=Q3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,A=function(){if(s.value){var i=s.value.slice(),o=Fg(i),a="";o.forEach(function(c){A8.indexOf(c)===-1?a+=Ot(c):(a.length&&r.push(a),r.push(Ot(c)),a="")}),a.length&&r.push(a)}};!(s=n.next()).done;)A();return r},o8=function(){function t(e,n,r){this.text=a8(n.data,r.textTransform),this.textBounds=t8(e,this.text,r,n)}return t}(),a8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(l8,c8);case 2:return t.toUpperCase();default:return t}},l8=/(^|\s|:|-|\(|\))([a-z])/g,c8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},eS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(vs),tS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(vs),nS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=new XMLSerializer,i=Tg(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(vs),rS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(vs),lw=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(vs),u8=[{type:15,flags:0,unit:"px",number:3}],d8=[{type:16,flags:0,number:50}],h8=function(t){return t.width>t.height?new Ks(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ks(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},f8=function(t){var e=t.type===g8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},wf="checkbox",vf="radio",g8="password",NI=707406591,Jy=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=f8(r),(s.type===wf||s.type===vf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=h8(s.bounds)),s.type){case wf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=u8;break;case vf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=d8;break}return s}return e}(vs),sS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=r.options[r.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(vs),AS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(vs),iS=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=aS(n,r.contentWindow.document.documentElement);var A=r.contentWindow.document.documentElement?gc(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Ns.TRANSPARENT,i=r.contentWindow.document.body?gc(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Ns.TRANSPARENT;s.backgroundColor=jA(A)?jA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(vs),p8=["OL","UL","MENU"],wh=function(t,e,n,r){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,lS(s)&&s.data.trim().length>0)n.textNodes.push(new o8(t,s,n.styles));else if(Yo(s))if(hS(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return wh(t,o,n,r)});else{var i=oS(t,s);i.styles.isVisible()&&(m8(s,i,r)?i.flags|=4:w8(i.styles)&&(i.flags|=2),p8.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?wh(t,s.shadowRoot,i,r):!yf(s)&&!cS(s)&&!Bf(s)&&wh(t,s,i,r))}},oS=function(t,e){return uw(e)?new eS(t,e):uS(e)?new tS(t,e):cS(e)?new nS(t,e):v8(e)?new rS(t,e):y8(e)?new lw(t,e):B8(e)?new Jy(t,e):Bf(e)?new sS(t,e):yf(e)?new AS(t,e):dS(e)?new iS(t,e):new vs(t,e)},aS=function(t,e){var n=oS(t,e);return n.flags|=4,wh(t,e,n,n),n},m8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Xy(t)&&n.styles.isTransparent()},w8=function(t){return t.isPositioned()||t.isFloating()},lS=function(t){return t.nodeType===Node.TEXT_NODE},Yo=function(t){return t.nodeType===Node.ELEMENT_NODE},cw=function(t){return Yo(t)&&typeof t.style<"u"&&!vh(t)},vh=function(t){return typeof t.className=="object"},v8=function(t){return t.tagName==="LI"},y8=function(t){return t.tagName==="OL"},B8=function(t){return t.tagName==="INPUT"},x8=function(t){return t.tagName==="HTML"},cS=function(t){return t.tagName==="svg"},Xy=function(t){return t.tagName==="BODY"},uS=function(t){return t.tagName==="CANVAS"},PI=function(t){return t.tagName==="VIDEO"},uw=function(t){return t.tagName==="IMG"},dS=function(t){return t.tagName==="IFRAME"},DI=function(t){return t.tagName==="STYLE"},C8=function(t){return t.tagName==="SCRIPT"},yf=function(t){return t.tagName==="TEXTAREA"},Bf=function(t){return t.tagName==="SELECT"},hS=function(t){return t.tagName==="SLOT"},LI=function(t){return t.tagName.indexOf("-")>0},_8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,A=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(A=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return A&&s.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),OI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},jI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},I8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},E8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Fo=function(t,e,n,r,s,A){return t<e||t>n?lu(t,s,A.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+A},fS=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Lt=function(t,e,n,r,s){var A=n-e+1;return(t<0?"-":"")+(fS(Math.abs(t),A,r,function(i){return Ot(Math.floor(i%A)+e)})+s)},gi=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return fS(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Do=1,cA=2,uA=4,$l=8,_s=function(t,e,n,r,s,A){if(t<-9999||t>9999)return lu(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&Yt(A,Do)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&Yt(A,cA)||c===1&&a===1&&Yt(A,uA)&&t>100||c===1&&a>1&&Yt(A,$l)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},MI="",VI="",HI="",om="",lu=function(t,e,n){var r=n?". ":"",s=n?"":"",A=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Lt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return gi(t,"",s);case 6:return Fo(t,1,3999,OI,3,r).toLowerCase();case 7:return Fo(t,1,3999,OI,3,r);case 8:return Lt(t,945,969,!1,r);case 9:return Lt(t,97,122,!1,r);case 10:return Lt(t,65,90,!1,r);case 11:return Lt(t,1632,1641,!0,r);case 12:case 49:return Fo(t,1,9999,jI,3,r);case 35:return Fo(t,1,9999,jI,3,r).toLowerCase();case 13:return Lt(t,2534,2543,!0,r);case 14:case 30:return Lt(t,6112,6121,!0,r);case 15:return gi(t,"",s);case 16:return gi(t,"",s);case 17:case 48:return _s(t,"",MI,"",s,cA|uA|$l);case 47:return _s(t,"",VI,"",s,Do|cA|uA|$l);case 42:return _s(t,"",MI,"",s,cA|uA|$l);case 41:return _s(t,"",VI,"",s,Do|cA|uA|$l);case 26:return _s(t,"","",HI,s,0);case 25:return _s(t,"","",HI,s,Do|cA|uA);case 31:return _s(t,"","",om,A,Do|cA|uA);case 33:return _s(t,"","",om,A,0);case 32:return _s(t,"","",om,A,Do|cA|uA);case 18:return Lt(t,2406,2415,!0,r);case 20:return Fo(t,1,19999,E8,3,r);case 21:return Lt(t,2790,2799,!0,r);case 22:return Lt(t,2662,2671,!0,r);case 22:return Fo(t,1,10999,I8,3,r);case 23:return gi(t,"");case 24:return gi(t,"");case 27:return Lt(t,3302,3311,!0,r);case 28:return gi(t,"",s);case 29:return gi(t,"",s);case 34:return Lt(t,3792,3801,!0,r);case 37:return Lt(t,6160,6169,!0,r);case 38:return Lt(t,4160,4169,!0,r);case 39:return Lt(t,2918,2927,!0,r);case 40:return Lt(t,1776,1785,!0,r);case 43:return Lt(t,3046,3055,!0,r);case 44:return Lt(t,3174,3183,!0,r);case 45:return Lt(t,3664,3673,!0,r);case 46:return Lt(t,3872,3881,!0,r);case 3:default:return Lt(t,48,57,!0,r)}},gS="data-html2canvas-ignore",KI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new _8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=b8(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,a=o.document,c=U8(s).then(function(){return Dn(r,void 0,void 0,function(){var d,h;return Fn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(R8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,F8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return s})]:[2,s]}})})});return a.open(),a.write(S8(document.doctype)+"<html></html>"),Q8(this.referenceElement.ownerDocument,A,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(ow(e,2))debugger;if(uS(e))return this.createCanvasClone(e);if(PI(e))return this.createVideoClone(e);if(DI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return uw(n)&&(uw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),LI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return am(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Yo(n)||!C8(n)&&!n.hasAttribute(gS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Yo(n)||!DI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(Yo(A)&&hS(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,A,r)},t.prototype.cloneNode=function(e,n){if(lS(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Yo(e)&&(cw(e)||vh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&cw(s)&&(this.clonedReferenceElement=s),Xy(s)&&D8(s);var a=this.counters.parse(new BI(this.context,A)),c=this.resolvePseudoContent(e,s,i,wc.BEFORE);LI(e)&&(n=!0),PI(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,wc.AFTER);return d&&s.appendChild(d),this.counters.pop(a),(A&&(this.options.copyStyles||vh(e))&&!dS(e)||n)&&am(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(yf(e)||Bf(e))&&(yf(s)||Bf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var A=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new BI(this.context,r));var a=new vG(this.context,r),c=o.createElement("html2canvaspseudoelement");am(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(at);w.length&&c.appendChild(o.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var p=h.values.filter(Da),C=p[0],_=p[1];if(C&&at(C)){var y=A.counters.getCounterValue(C.value),B=_&&at(_)?iw.parse(A.context,_.value):3;c.appendChild(o.createTextNode(lu(y,B,!1)))}}else if(h.name==="counters"){var v=h.values.filter(Da),C=v[0],R=v[1],_=v[2];if(C&&at(C)){var Q=A.counters.getCounterValues(C.value),N=_&&at(_)?iw.parse(A.context,_.value):3,I=R&&R.type===0?R.value:"",x=Q.map(function(U){return lu(U,N,!1)}).join(I);c.appendChild(o.createTextNode(x))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(yI(a.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(yI(a.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=dw+" "+hw;var d=s===wc.BEFORE?" "+dw:" "+hw;return vh(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),wc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(wc||(wc={}));var b8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(gS,"true"),t.body.appendChild(n),n},T8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},F8=function(t){return Promise.all([].slice.call(t.images,0).map(T8))},U8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},k8=["all","d","content"],am=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);k8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},S8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Q8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},R8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},N8=":before",P8=":after",dw="___html2canvas___pseudoelement_before",hw="___html2canvas___pseudoelement_after",GI=`{
    content: "" !important;
    display: none !important;
}`,D8=function(t){L8(t,"."+dw+N8+GI+`
         .`+hw+P8+GI)},L8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},pS=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),O8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(cm(e)||H8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Dn(this,void 0,void 0,function(){var n,r,s,A,i=this;return Fn(this,function(o){switch(o.label){case 0:return n=pS.isSameOrigin(e),r=!lm(e)&&this._options.useCORS===!0&&gn.SUPPORT_CORS_IMAGES&&!n,s=!lm(e)&&!n&&!cm(e)&&typeof this._options.proxy=="string"&&gn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!lm(e)&&!cm(e)&&!s&&!r?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(K8(A)||r)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var o=gn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")A(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+s+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}a.send()})},t}(),j8=/^data:image\/svg\+xml/i,M8=/^data:image\/.*;base64,/i,V8=/^data:image\/.*/i,H8=function(t){return gn.SUPPORT_SVG_DRAWING||!G8(t)},lm=function(t){return V8.test(t)},K8=function(t){return M8.test(t)},cm=function(t){return t.substr(0,4)==="blob"},G8=function(t){return t.substr(-3).toLowerCase()==="svg"||j8.test(t)},de=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Uo=function(t,e,n){return new de(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Vd=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=Uo(this.start,this.startControl,e),s=Uo(this.startControl,this.endControl,e),A=Uo(this.endControl,this.end,e),i=Uo(r,s,e),o=Uo(s,A,e),a=Uo(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,A,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),xr=function(t){return t.type===1},z8=function(){function t(e){var n=e.styles,r=e.bounds,s=zl(n.borderTopLeftRadius,r.width,r.height),A=s[0],i=s[1],o=zl(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=zl(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],w=zl(n.borderBottomLeftRadius,r.width,r.height),p=w[0],C=w[1],_=[];_.push((A+a)/r.width),_.push((p+h)/r.width),_.push((i+C)/r.height),_.push((c+f)/r.height);var y=Math.max.apply(Math,_);y>1&&(A/=y,i/=y,a/=y,c/=y,h/=y,f/=y,p/=y,C/=y);var B=r.width-a,v=r.height-f,R=r.width-h,Q=r.height-C,N=n.borderTopWidth,I=n.borderRightWidth,x=n.borderBottomWidth,b=n.borderLeftWidth,k=ut(n.paddingTop,e.bounds.width),U=ut(n.paddingRight,e.bounds.width),D=ut(n.paddingBottom,e.bounds.width),T=ut(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?wt(r.left+b/3,r.top+N/3,A-b/3,i-N/3,nt.TOP_LEFT):new de(r.left+b/3,r.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?wt(r.left+B,r.top+N/3,a-I/3,c-N/3,nt.TOP_RIGHT):new de(r.left+r.width-I/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?wt(r.left+R,r.top+v,h-I/3,f-x/3,nt.BOTTOM_RIGHT):new de(r.left+r.width-I/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=p>0||C>0?wt(r.left+b/3,r.top+Q,p-b/3,C-x/3,nt.BOTTOM_LEFT):new de(r.left+b/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?wt(r.left+b*2/3,r.top+N*2/3,A-b*2/3,i-N*2/3,nt.TOP_LEFT):new de(r.left+b*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?wt(r.left+B,r.top+N*2/3,a-I*2/3,c-N*2/3,nt.TOP_RIGHT):new de(r.left+r.width-I*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?wt(r.left+R,r.top+v,h-I*2/3,f-x*2/3,nt.BOTTOM_RIGHT):new de(r.left+r.width-I*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||C>0?wt(r.left+b*2/3,r.top+Q,p-b*2/3,C-x*2/3,nt.BOTTOM_LEFT):new de(r.left+b*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=A>0||i>0?wt(r.left+b/2,r.top+N/2,A-b/2,i-N/2,nt.TOP_LEFT):new de(r.left+b/2,r.top+N/2),this.topRightBorderStroke=A>0||i>0?wt(r.left+B,r.top+N/2,a-I/2,c-N/2,nt.TOP_RIGHT):new de(r.left+r.width-I/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?wt(r.left+R,r.top+v,h-I/2,f-x/2,nt.BOTTOM_RIGHT):new de(r.left+r.width-I/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=p>0||C>0?wt(r.left+b/2,r.top+Q,p-b/2,C-x/2,nt.BOTTOM_LEFT):new de(r.left+b/2,r.top+r.height-x/2),this.topLeftBorderBox=A>0||i>0?wt(r.left,r.top,A,i,nt.TOP_LEFT):new de(r.left,r.top),this.topRightBorderBox=a>0||c>0?wt(r.left+B,r.top,a,c,nt.TOP_RIGHT):new de(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?wt(r.left+R,r.top+v,h,f,nt.BOTTOM_RIGHT):new de(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=p>0||C>0?wt(r.left,r.top+Q,p,C,nt.BOTTOM_LEFT):new de(r.left,r.top+r.height),this.topLeftPaddingBox=A>0||i>0?wt(r.left+b,r.top+N,Math.max(0,A-b),Math.max(0,i-N),nt.TOP_LEFT):new de(r.left+b,r.top+N),this.topRightPaddingBox=a>0||c>0?wt(r.left+Math.min(B,r.width-I),r.top+N,B>r.width+I?0:Math.max(0,a-I),Math.max(0,c-N),nt.TOP_RIGHT):new de(r.left+r.width-I,r.top+N),this.bottomRightPaddingBox=h>0||f>0?wt(r.left+Math.min(R,r.width-b),r.top+Math.min(v,r.height-x),Math.max(0,h-I),Math.max(0,f-x),nt.BOTTOM_RIGHT):new de(r.left+r.width-I,r.top+r.height-x),this.bottomLeftPaddingBox=p>0||C>0?wt(r.left+b,r.top+Math.min(Q,r.height-x),Math.max(0,p-b),Math.max(0,C-x),nt.BOTTOM_LEFT):new de(r.left+b,r.top+r.height-x),this.topLeftContentBox=A>0||i>0?wt(r.left+b+T,r.top+N+k,Math.max(0,A-(b+T)),Math.max(0,i-(N+k)),nt.TOP_LEFT):new de(r.left+b+T,r.top+N+k),this.topRightContentBox=a>0||c>0?wt(r.left+Math.min(B,r.width+b+T),r.top+N+k,B>r.width+b+T?0:a-b+T,c-(N+k),nt.TOP_RIGHT):new de(r.left+r.width-(I+U),r.top+N+k),this.bottomRightContentBox=h>0||f>0?wt(r.left+Math.min(R,r.width-(b+T)),r.top+Math.min(v,r.height+N+k),Math.max(0,h-(I+U)),f-(x+D),nt.BOTTOM_RIGHT):new de(r.left+r.width-(I+U),r.top+r.height-(x+D)),this.bottomLeftContentBox=p>0||C>0?wt(r.left+b+T,r.top+Q,Math.max(0,p-(b+T)),C-(x+D),nt.BOTTOM_LEFT):new de(r.left+b+T,r.top+r.height-(x+D))}return t}(),nt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(nt||(nt={}));var wt=function(t,e,n,r,s){var A=4*((Math.sqrt(2)-1)/3),i=n*A,o=r*A,a=t+n,c=e+r;switch(s){case nt.TOP_LEFT:return new Vd(new de(t,c),new de(t,c-o),new de(a-i,e),new de(a,e));case nt.TOP_RIGHT:return new Vd(new de(t,e),new de(t+i,e),new de(a,c-o),new de(a,c));case nt.BOTTOM_RIGHT:return new Vd(new de(a,e),new de(a,e+o),new de(t+i,c),new de(t,c));case nt.BOTTOM_LEFT:default:return new Vd(new de(a,c),new de(a-i,c),new de(t,e+o),new de(t,e))}},xf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},W8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Cf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},$8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Hd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),q8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),J8=function(t){return t.type===0},mS=function(t){return t.type===1},X8=function(t){return t.type===2},zI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},Y8=function(t,e,n,r,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,n);case 1:return A.add(e+r,n);case 2:return A.add(e+r,n+s);case 3:return A.add(e,n+s)}return A})},wS=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),vS=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new z8(this.container),this.container.styles.opacity<1&&this.effects.push(new q8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new $8(r,s,A))}if(this.container.styles.overflowX!==0){var i=xf(this.curves),o=Cf(this.curves);zI(i,o)?this.effects.push(new Hd(i,6)):(this.effects.push(new Hd(i,2)),this.effects.push(new Hd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var A=r.effects.filter(function(a){return!mS(a)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,A),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=xf(r.curves),o=Cf(r.curves);zI(i,o)||s.unshift(new Hd(o,6))}}else s.unshift.apply(s,A);r=r.parent}return s.filter(function(a){return Yt(a.target,e)})},t}(),fw=function(t,e,n,r){t.container.elements.forEach(function(s){var A=Yt(s.flags,4),i=Yt(s.flags,2),o=new vS(s,t);Yt(s.styles.display,2048)&&r.push(o);var a=Yt(s.flags,8)?[]:r;if(A||i){var c=A||s.styles.isPositioned()?n:e,d=new wS(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(p,C){return h>p.element.container.styles.zIndex.order?(f=C,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;c.positiveZIndex.some(function(p,C){return h>=p.element.container.styles.zIndex.order?(w=C+1,!1):w>0}),c.positiveZIndex.splice(w,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);fw(o,d,A?d:n,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),fw(o,e,n,a);Yt(s.flags,8)&&yS(s,a)})},yS=function(t,e){for(var n=t instanceof lw?t.start:1,r=t instanceof lw?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof rS&&typeof A.container.value=="number"&&A.container.value!==0&&(n=A.container.value),A.listValue=lu(n,A.container.styles.listStyleType,!0),n+=r?-1:1}},Z8=function(t){var e=new vS(t,null),n=new wS(e),r=[];return fw(e,n,n,r),yS(e.container,r),n},WI=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},e9=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Er(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},t9=function(t,e){switch(e){case 0:return Er(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},n9=function(t,e){switch(e){case 0:return Kd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Kd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Kd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Kd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Kd=function(t,e){var n=[];return xr(t)?n.push(t.subdivide(.5,!1)):n.push(t),xr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Er=function(t,e,n,r){var s=[];return xr(t)?s.push(t.subdivide(.5,!1)):s.push(t),xr(n)?s.push(n.subdivide(.5,!0)):s.push(n),xr(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),xr(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},BS=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},_f=function(t){var e=t.styles,n=t.bounds,r=ut(e.paddingLeft,n.width),s=ut(e.paddingRight,n.width),A=ut(e.paddingTop,n.width),i=ut(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},r9=function(t,e){return t===0?e.bounds:t===2?_f(e):BS(e)},s9=function(t,e){return t===0?e.bounds:t===2?_f(e):BS(e)},um=function(t,e,n){var r=r9(Lo(t.styles.backgroundOrigin,e),t),s=s9(Lo(t.styles.backgroundClip,e),t),A=A9(Lo(t.styles.backgroundSize,e),n,r),i=A[0],o=A[1],a=zl(Lo(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=i9(Lo(t.styles.backgroundRepeat,e),a,A,r,s),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},ko=function(t){return at(t)&&t.value===ua.AUTO},Gd=function(t){return typeof t=="number"},A9=function(t,e,n){var r=e[0],s=e[1],A=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Wt(i)&&o&&Wt(o))return[ut(i,n.width),ut(o,n.height)];var a=Gd(A);if(at(i)&&(i.value===ua.CONTAIN||i.value===ua.COVER)){if(Gd(A)){var c=n.width/n.height;return c<A!=(i.value===ua.COVER)?[n.width,n.width/A]:[n.height*A,n.height]}return[n.width,n.height]}var d=Gd(r),h=Gd(s),f=d||h;if(ko(i)&&(!o||ko(o))){if(d&&h)return[r,s];if(!a&&!f)return[n.width,n.height];if(f&&a){var w=d?r:s*A,p=h?s:r/A;return[w,p]}var C=d?r:n.width,_=h?s:n.height;return[C,_]}if(a){var y=0,B=0;return Wt(i)?y=ut(i,n.width):Wt(o)&&(B=ut(o,n.height)),ko(i)?y=B*A:(!o||ko(o))&&(B=y/A),[y,B]}var v=null,R=null;if(Wt(i)?v=ut(i,n.width):o&&Wt(o)&&(R=ut(o,n.height)),v!==null&&(!o||ko(o))&&(R=d&&h?v/r*s:n.height),R!==null&&ko(i)&&(v=d&&h?R/s*r:n.width),v!==null&&R!==null)return[v,R];throw new Error("Unable to calculate background-size for element")},Lo=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},i9=function(t,e,n,r,s){var A=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new de(Math.round(r.left),Math.round(r.top+i)),new de(Math.round(r.left+r.width),Math.round(r.top+i)),new de(Math.round(r.left+r.width),Math.round(a+r.top+i)),new de(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new de(Math.round(r.left+A),Math.round(r.top)),new de(Math.round(r.left+A+o),Math.round(r.top)),new de(Math.round(r.left+A+o),Math.round(r.height+r.top)),new de(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new de(Math.round(r.left+A),Math.round(r.top+i)),new de(Math.round(r.left+A+o),Math.round(r.top+i)),new de(Math.round(r.left+A+o),Math.round(r.top+i+a)),new de(Math.round(r.left+A),Math.round(r.top+i+a))];default:return[new de(Math.round(s.left),Math.round(s.top)),new de(Math.round(s.left+s.width),Math.round(s.top)),new de(Math.round(s.left+s.width),Math.round(s.height+s.top)),new de(Math.round(s.left),Math.round(s.height+s.top))]}},o9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$I="Hidden Text",a9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=o9,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=n,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode($I)),r.appendChild(A),r.appendChild(s);var o=s.offsetTop-A.offsetTop+2;r.removeChild(A),r.appendChild(this._document.createTextNode($I)),r.style.lineHeight="normal",s.style.verticalAlign="super";var a=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),xS=function(){function t(e,n){this.context=e,this.options=n}return t}(),l9=1e4,c9=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new a9(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),X8(n)&&(this.ctx.globalAlpha=n.opacity),J8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),mS(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Dn(this,void 0,void 0,function(){var r;return Fn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Dn(this,void 0,void 0,function(){return Fn(this,function(r){switch(r.label){case 0:if(Yt(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var A=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=qy(n.text);i.reduce(function(o,a){return A.ctx.fillText(a,o,n.bounds.top+s),o+A.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=g9(n.fontFamily).join(", "),A=Du(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(n,r){return Dn(this,void 0,void 0,function(){var s,A,i,o,a,c,d,h,f=this;return Fn(this,function(w){return s=this.createFontStyle(r),A=s[0],i=s[1],o=s[2],this.ctx.font=A,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(p){h.forEach(function(C){switch(C){case 0:f.ctx.fillStyle=An(r.color),f.renderTextWithLetterSpacing(p,r.letterSpacing,c);var _=r.textShadow;_.length&&p.text.trim().length&&(_.slice(0).reverse().forEach(function(y){f.ctx.shadowColor=An(y.color),f.ctx.shadowOffsetX=y.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=y.offsetY.number*f.options.scale,f.ctx.shadowBlur=y.blur.number,f.renderTextWithLetterSpacing(p,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=An(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(y){switch(y){case 1:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+c),p.bounds.width,1);break;case 2:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:f.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+d),p.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&p.text.trim().length&&(f.ctx.strokeStyle=An(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var A=_f(n),i=Cf(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Dn(this,void 0,void 0,function(){var r,s,A,i,o,a,B,B,c,d,h,f,R,w,p,Q,C,_,y,B,v,R,Q;return Fn(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,A=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof eS))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return B=N.sent(),this.renderReplacedElement(r,s,B),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof tS&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof nS))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return B=N.sent(),this.renderReplacedElement(r,s,B),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof iS&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof Jy&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===wf?r.checked&&(this.ctx.save(),this.path([new de(r.bounds.left+h*.39363,r.bounds.top+h*.79),new de(r.bounds.left+h*.16,r.bounds.top+h*.5549),new de(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new de(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new de(r.bounds.left+h*.72983,r.bounds.top+h*.23),new de(r.bounds.left+h*.84,r.bounds.top+h*.34085),new de(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=An(NI),this.ctx.fill(),this.ctx.restore()):r.type===vf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=An(NI),this.ctx.fill(),this.ctx.restore())),u9(r)&&r.value.length){switch(f=this.createFontStyle(A),R=f[0],w=f[1],p=this.fontMetrics.getMetrics(R,w).baseline,this.ctx.font=R,this.ctx.fillStyle=An(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=h9(r.styles.textAlign),Q=_f(r),C=0,r.styles.textAlign){case 1:C+=Q.width/2;break;case 2:C+=Q.width;break}_=Q.add(C,0,0,-Q.height/2+1),this.ctx.save(),this.path([new de(Q.left,Q.top),new de(Q.left+Q.width,Q.top),new de(Q.left+Q.width,Q.top+Q.height),new de(Q.left,Q.top+Q.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new mc(r.value,_),A.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Yt(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(y=r.styles.listStyleImage,y.type!==0)return[3,18];B=void 0,v=y.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return B=N.sent(),this.ctx.drawImage(B,r.bounds.left-(B.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(R=this.createFontStyle(A)[0],this.ctx.font=R,this.ctx.fillStyle=An(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Q=new Ks(r.bounds.left,r.bounds.top+ut(r.styles.paddingTop,r.bounds.width),r.bounds.width,wI(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new mc(n.listValue,Q),A.letterSpacing,wI(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Dn(this,void 0,void 0,function(){var r,s,y,A,i,y,o,a,y,c,d,y,h,f,y,w,p,y,C,_,y;return Fn(this,function(B){switch(B.label){case 0:if(Yt(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:B.sent(),r=0,s=n.negativeZIndex,B.label=2;case 2:return r<s.length?(y=s[r],[4,this.renderStack(y)]):[3,5];case 3:B.sent(),B.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:B.sent(),A=0,i=n.nonInlineLevel,B.label=7;case 7:return A<i.length?(y=i[A],[4,this.renderNode(y)]):[3,10];case 8:B.sent(),B.label=9;case 9:return A++,[3,7];case 10:o=0,a=n.nonPositionedFloats,B.label=11;case 11:return o<a.length?(y=a[o],[4,this.renderStack(y)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,B.label=15;case 15:return c<d.length?(y=d[c],[4,this.renderStack(y)]):[3,18];case 16:B.sent(),B.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,B.label=19;case 19:return h<f.length?(y=f[h],[4,this.renderNode(y)]):[3,22];case 20:B.sent(),B.label=21;case 21:return h++,[3,19];case 22:w=0,p=n.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return w<p.length?(y=p[w],[4,this.renderStack(y)]):[3,26];case 24:B.sent(),B.label=25;case 25:return w++,[3,23];case 26:C=0,_=n.positiveZIndex,B.label=27;case 27:return C<_.length?(y=_[C],[4,this.renderStack(y)]):[3,30];case 28:B.sent(),B.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,A){var i=xr(s)?s.start:s;A===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),xr(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,A){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(n,r,s){var A;if(n.width===r&&n.height===s)return n;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Dn(this,void 0,void 0,function(){var r,s,A,i,o,a;return Fn(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,f,w,k,Oe,V,T,Ee,x,p,k,Oe,V,T,Ee,C,_,y,B,v,R,Q,N,I,x,b,k,U,D,T,Ee,$e,Oe,V,z,F,L,H,$,q,se,fe;return Fn(this,function(Ue){switch(Ue.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ue.label=1;case 1:return Ue.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=Ue.sent(),[3,4];case 3:return Ue.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=um(n,r,[h.width,h.height,h.width/h.height]),k=w[0],Oe=w[1],V=w[2],T=w[3],Ee=w[4],x=A.ctx.createPattern(A.resizeImage(h,T,Ee),"repeat"),A.renderRepeat(k,x,Oe,V)),[3,6];case 5:J5(d)?(p=um(n,r,[null,null,null]),k=p[0],Oe=p[1],V=p[2],T=p[3],Ee=p[4],C=G5(d.angle,T,Ee),_=C[0],y=C[1],B=C[2],v=C[3],R=C[4],Q=document.createElement("canvas"),Q.width=T,Q.height=Ee,N=Q.getContext("2d"),I=N.createLinearGradient(y,v,B,R),pI(d.stops,_).forEach(function(te){return I.addColorStop(te.stop,An(te.color))}),N.fillStyle=I,N.fillRect(0,0,T,Ee),T>0&&Ee>0&&(x=A.ctx.createPattern(Q,"repeat"),A.renderRepeat(k,x,Oe,V))):X5(d)&&(b=um(n,r,[null,null,null]),k=b[0],U=b[1],D=b[2],T=b[3],Ee=b[4],$e=d.position.length===0?[zy]:d.position,Oe=ut($e[0],T),V=ut($e[$e.length-1],Ee),z=z5(d,Oe,V,T,Ee),F=z[0],L=z[1],F>0&&L>0&&(H=A.ctx.createRadialGradient(U+Oe,D+V,0,U+Oe,D+V,F),pI(d.stops,F*2).forEach(function(te){return H.addColorStop(te.stop,An(te.color))}),A.path(k),A.ctx.fillStyle=H,F!==L?($=n.bounds.left+.5*n.bounds.width,q=n.bounds.top+.5*n.bounds.height,se=L/F,fe=1/se,A.ctx.save(),A.ctx.translate($,q),A.ctx.transform(1,0,0,se,0,0),A.ctx.translate(-$,-q),A.ctx.fillRect(U,fe*(D-q)+q,T,Ee*fe),A.ctx.restore()):A.ctx.fill())),Ue.label=6;case 6:return r--,[2]}})},A=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,s(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Dn(this,void 0,void 0,function(){return Fn(this,function(A){return this.path(WI(s,r)),this.ctx.fillStyle=An(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,A){return Dn(this,void 0,void 0,function(){var i,o;return Fn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,A)]:[3,2];case 1:return a.sent(),[2];case 2:return i=e9(A,s),this.path(i),this.ctx.fillStyle=An(n),this.ctx.fill(),o=t9(A,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Dn(this,void 0,void 0,function(){var r,s,A,i,o,a,c,d,h=this;return Fn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!jA(r.backgroundColor)||r.backgroundImage.length,A=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=d9(Lo(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),jA(r.backgroundColor)||(this.ctx.fillStyle=An(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var p=xf(n.curves),C=w.inset?0:l9,_=Y8(p,-C+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(p),h.ctx.clip(),h.mask(_)):(h.mask(p),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=w.offsetX.number+C,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=An(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?An(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=A,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!jA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,A,i){return Dn(this,void 0,void 0,function(){var o,a,c,d,h,f,w,p,C,_,y,B,v,R,Q,N,Q,N;return Fn(this,function(I){return this.ctx.save(),o=n9(A,s),a=WI(A,s),i===2&&(this.path(a),this.ctx.clip()),xr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),xr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),s===0||s===2?w=Math.abs(c-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),p=r<3?r*3:r*2,C=r<3?r*2:r,i===3&&(p=r,C=r),_=!0,w<=p*2?_=!1:w<=p*2+C?(y=w/(2*p+C),p*=y,C*=y):(B=Math.floor((w+C)/(p+C)),v=(w-B*p)/(B-1),R=(w-(B+1)*p)/B,C=R<=0||Math.abs(C-v)<Math.abs(C-R)?v:R),_&&(i===3?this.ctx.setLineDash([0,p+C]):this.ctx.setLineDash([p,C])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=An(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(xr(a[0])&&(Q=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new de(Q.end.x,Q.end.y),new de(N.start.x,N.start.y)]),this.ctx.stroke()),xr(a[1])&&(Q=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new de(Q.end.x,Q.end.y),new de(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Dn(this,void 0,void 0,function(){var r;return Fn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=An(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Z8(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(xS),u9=function(t){return t instanceof AS||t instanceof sS?!0:t instanceof Jy&&t.type!==vf&&t.type!==wf},d9=function(t,e){switch(t){case 0:return xf(e);case 2:return W8(e);case 1:default:return Cf(e)}},h9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},f9=["-apple-system","system-ui"],g9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return f9.indexOf(e)===-1}):t},p9=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Dn(this,void 0,void 0,function(){var r,s;return Fn(this,function(A){switch(A.label){case 0:return r=aw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,m9(r)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=An(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(xS),m9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},w9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Cd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Cd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Cd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Cd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),v9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new w9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new O8(this,e)}return t.instanceCount=1,t}(),y9=function(t,e){return e===void 0&&(e={}),B9(t,e)};typeof window<"u"&&pS.setContext(window);var B9=function(t,e){return Dn(void 0,void 0,void 0,function(){var n,r,s,A,i,o,a,c,d,h,f,w,p,C,_,y,B,v,R,Q,I,N,I,x,b,k,U,D,T,Ee,$e,Oe,V,z,F,L,H,$,q,se;return Fn(this,function(fe){switch(fe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(x=e.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(b=e.imageTimeout)!==null&&b!==void 0?b:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},A=W0({logging:(U=e.logging)!==null&&U!==void 0?U:!0,cache:e.cache},s),i={windowWidth:(D=e.windowWidth)!==null&&D!==void 0?D:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(Ee=e.scrollX)!==null&&Ee!==void 0?Ee:r.pageXOffset,scrollY:($e=e.scrollY)!==null&&$e!==void 0?$e:r.pageYOffset},o=new Ks(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new v9(A,o),c=(Oe=e.foreignObjectRendering)!==null&&Oe!==void 0?Oe:!1,d={allowTaint:(V=e.allowTaint)!==null&&V!==void 0?V:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new KI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=fe.sent(),p=Xy(f)||x8(f)?YK(f.ownerDocument):Tg(a,f),C=p.width,_=p.height,y=p.left,B=p.top,v=x9(a,f,e.backgroundColor),R={canvas:e.canvas,backgroundColor:v,scale:(F=(z=e.scale)!==null&&z!==void 0?z:r.devicePixelRatio)!==null&&F!==void 0?F:1,x:((L=e.x)!==null&&L!==void 0?L:0)+y,y:((H=e.y)!==null&&H!==void 0?H:0)+B,width:($=e.width)!==null&&$!==void 0?$:Math.ceil(C),height:(q=e.height)!==null&&q!==void 0?q:Math.ceil(_)},c?(a.logger.debug("Document cloned, using foreign object rendering"),I=new p9(a,R),[4,I.render(f)]):[3,3];case 2:return Q=fe.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+y+","+B+" with size "+C+"x"+_+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=aS(a,f),v===N.styles.backgroundColor&&(N.styles.backgroundColor=Ns.TRANSPARENT),a.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),I=new c9(a,R),[4,I.render(N)];case 4:Q=fe.sent(),fe.label=5;case 5:return(!((se=e.removeContainer)!==null&&se!==void 0)||se)&&(KI.destroy(w)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,Q]}})})},x9=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?gc(t,getComputedStyle(r.documentElement).backgroundColor):Ns.TRANSPARENT,A=r.body?gc(t,getComputedStyle(r.body).backgroundColor):Ns.TRANSPARENT,i=typeof n=="string"?gc(t,n):n===null?Ns.TRANSPARENT:4294967295;return e===r.documentElement?jA(s)?jA(A)?i:A:s:i},C9=Object.defineProperty,If=Object.getOwnPropertySymbols,CS=Object.prototype.hasOwnProperty,_S=Object.prototype.propertyIsEnumerable,qI=(t,e,n)=>e in t?C9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_9=(t,e)=>{for(var n in e||(e={}))CS.call(e,n)&&qI(t,n,e[n]);if(If)for(var n of If(e))_S.call(e,n)&&qI(t,n,e[n]);return t},I9=(t,e)=>{var n={};for(var r in t)CS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&If)for(var r of If(t))e.indexOf(r)<0&&_S.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var so;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let p=0;p<this.size;p++)f.push(!1);for(let p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let p=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const _=this.getPenaltyScore();_<p&&(h=C,p=_),this.applyMask(C)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let p,C;for(p=d;;p++){const v=e.getNumDataCodewords(p,c)*8,R=o.getTotalBits(a,p);if(R<=v){C=R;break}if(p>=h)throw new RangeError("Data too long")}for(const v of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&C<=e.getNumDataCodewords(p,v)*8&&(c=v);let _=[];for(const v of a){r(v.mode.modeBits,4,_),r(v.numChars,v.mode.numCharCountBits(p),_);for(const R of v.getData())_.push(R)}A(_.length==C);const y=e.getNumDataCodewords(p,c)*8;A(_.length<=y),r(0,Math.min(4,y-_.length),_),r(0,(8-_.length%8)%8,_),A(_.length%8==0);for(let v=236;_.length<y;v^=253)r(v,8,_);let B=[];for(;B.length*8<_.length;)B.push(0);return _.forEach((v,R)=>B[R>>>3]|=v<<7-(R&7)),new e(p,c,B,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=a+h,p=c+d;0<=w&&w<this.size&&0<=p&&p<this.size&&this.setFunctionModule(w,p,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],w=Math.floor(e.getNumRawDataModules(c)/8),p=h-w%h,C=Math.floor(w/h);let _=[];const y=e.reedSolomonComputeDivisor(f);for(let v=0,R=0;v<h;v++){let Q=a.slice(R,R+C-f+(v<p?0:1));R+=Q.length;const N=e.reedSolomonComputeRemainder(Q,y);v<p&&Q.push(0),_.push(Q.concat(N))}let B=[];for(let v=0;v<_[0].length;v++)_.forEach((R,Q)=>{(v!=C-f||Q>=p)&&B.push(R[v])});return A(B.length==w),B}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,C=(d+1&2)==0?this.size-1-h:h;!this.isFunction[C][w]&&c<a.length*8&&(this.modules[C][w]=s(a[c>>>3],7-(c&7)),c++)}}A(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let w=!1,p=0,C=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==w?(p++,p==5?a+=e.PENALTY_N1:p>5&&a++):(this.finderPenaltyAddHistory(p,C),w||(a+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),w=this.modules[f][_],p=1);a+=this.finderPenaltyTerminateAndCount(w,p,C)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,p=0,C=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==w?(p++,p==5?a+=e.PENALTY_N1:p>5&&a++):(this.finderPenaltyAddHistory(p,C),w||(a+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),w=this.modules[_][f],p=1);a+=this.finderPenaltyTerminateAndCount(w,p,C)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const p=this.modules[f][w];p==this.modules[f][w+1]&&p==this.modules[f+1][w]&&p==this.modules[f+1][w+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((w,p)=>w+(p?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),a+=h*e.PENALTY_N4,A(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((w,p)=>d[p]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return A(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];A(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function s(a,c){return(a>>>c&1)!=0}function A(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(so||(so={}));(t=>{(e=>{const n=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(so||(so={}));(t=>{(e=>{const n=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(so||(so={}));var ql=so;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var E9={L:ql.QrCode.Ecc.LOW,M:ql.QrCode.Ecc.MEDIUM,Q:ql.QrCode.Ecc.QUARTILE,H:ql.QrCode.Ecc.HIGH},b9=128,T9="L",F9="#FFFFFF",U9="#000000",k9=!1,IS=4,S9=.1;function Q9(t,e=0){const n=[];return t.forEach(function(r,s){let A=null;r.forEach(function(i,o){if(!i&&A!==null){n.push(`M${A+e} ${s+e}h${o-A}v1H${A+e}z`),A=null;return}if(o===r.length-1){if(!i)return;A===null?n.push(`M${o+e},${s+e} h1v1H${o+e}z`):n.push(`M${A+e},${s+e} h${o+1-A}v1H${A+e}z`);return}i&&A===null&&(A=o)})}),n.join("")}function R9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function N9(t,e,n,r){if(r==null)return null;const s=n?IS:0,A=t.length+s*2,i=Math.floor(e*S9),o=A/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let w=Math.floor(d),p=Math.floor(h),C=Math.ceil(a+d-w),_=Math.ceil(c+h-p);f={x:w,y:p,w:C,h:_}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function P9(t){const e=t,{value:n,size:r=b9,level:s=T9,bgColor:A=F9,fgColor:i=U9,includeMargin:o=k9,imageSettings:a}=e,c=I9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=ql.QrCode.encodeText(n,E9[s]).getModules();const h=o?IS:0,f=d.length+h*2,w=N9(d,r,o,a);let p=null;a!=null&&w!=null&&(w.excavation!=null&&(d=R9(d,w.excavation)),p=Ei.createElement("image",{xlinkHref:a.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const C=Q9(d,h);return Ei.createElement("svg",_9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Ei.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Ei.createElement("path",{fill:i,d:C,shapeRendering:"crispEdges"}),p)}const D9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,requests:i,saveStaticData:o}=Zs(),{schedule:a,substitutions:c,saveScheduleData:d}=nl(),h=S.useRef(null),f=S.useRef(null),[w,p]=S.useState(new Date().toISOString().split("T")[0]),[C,_]=S.useState(!1),[y,B]=S.useState(!1),[v,R]=S.useState(""),[Q,N]=S.useState(""),I=S.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,requests:i,schedule:a,substitutions:c}),[t,e,n,r,s,A,i,a,c]),x=V=>{var L;const z=(L=V.target.files)==null?void 0:L[0];if(!z)return;const F=new FileReader;F.onload=async H=>{try{const $=JSON.parse(H.target.result);if($.teachers&&$.schedule){if(window.confirm("    . ?")){const q={...zt,...$,rooms:$.rooms||zt.rooms,classes:$.classes||[],schedule:$.schedule||[],teachers:$.teachers||[],subjects:$.subjects||[],substitutions:$.substitutions||[],requests:$.requests||[],settings:{...zt.settings,...$.settings}};await o(q),await d(q),alert("  !")}}else alert("  .")}catch{alert("  .")}},F.readAsText(z)},b=()=>{let V=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Un.forEach(H=>{V+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${H}</td></tr>`,[ce.First,ce.Second].forEach($=>{const q=n.filter(se=>se.shift===$);q.length!==0&&(V+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${$}</td></tr>`,V+='<tr><th class="header"></th>',As[$].forEach(se=>V+=`<th class="header">${se} </th>`),V+="</tr>",q.forEach(se=>{V+=`<tr><td class="class-cell">${se.name}</td>`,As[$].forEach(fe=>{const Ue=a.filter(te=>te.classId===se.id&&te.day===H&&te.shift===$&&te.period===fe);V+='<td style="height: 60px;">',Ue.forEach(te=>{const Ne=t.find(De=>De.id===te.subjectId),ze=e.find(De=>De.id===te.teacherId),Se=r.find(De=>De.id===te.roomId),Qe=Se?Se.name:te.roomId;V+=`<div style="background-color: ${(Ne==null?void 0:Ne.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(Ne==null?void 0:Ne.name)||""} ${te.direction||""}</div>
                                <div class="meta">${(ze==null?void 0:ze.name)||""} ${Qe?`(. ${Qe})`:""}</div>
                            </div>`}),V+="</td>"}),V+="</tr>"}))})}),V+="</table></body></html>";const z=new Blob([V],{type:"application/vnd.ms-excel"}),F=URL.createObjectURL(z),L=document.createElement("a");L.href=F,L.download="_22.xls",document.body.appendChild(L),L.click(),document.body.removeChild(L)},k=()=>{let V=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ce.First,ce.Second].forEach(H=>{const $=As[H];V+="<table>",V+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Un.length*$.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,V+="<tr>",Un.forEach(q=>{V+=`<th colspan="${$.length}" class="header" style="border: 2px solid #000;">${q}</th>`}),V+="</tr>",V+="<tr>",Un.forEach(()=>{$.forEach(q=>V+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),V+="</tr>",V+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${H}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Un.forEach(()=>{$.forEach(q=>V+=`<th class="header" style="width: 40px;">${q}</th>`)}),V+="</tr>",t.forEach(q=>{const se=e.filter(Ue=>Ue.subjectIds.includes(q.id));if(se.length===0)return;const fe=q.color||"#ffffff";se.forEach((Ue,te)=>{V+="<tr>",te===0&&(V+=`<td rowspan="${se.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${fe};">${q.name}</td>`),V+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${Ue.name}</td>`,Un.forEach(Ne=>{$.forEach(ze=>{const Se=a.find(Qe=>Qe.teacherId===Ue.id&&Qe.subjectId===q.id&&Qe.day===Ne&&Qe.period===ze&&Qe.shift===H);if(Se){const Qe=n.find(nn=>nn.id===Se.classId),De=r.find(nn=>nn.id===Se.roomId),be=De?De.name:Se.roomId,ke=be?`<sub>${be}</sub>`:"",tt=Se.direction?` <span style="font-size:9px">(${Se.direction})</span>`:"",qe=q.color||"#ffffff";V+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${qe};">${Qe?Qe.name:""}${tt}${ke}</td>`}else V+='<td style="border: 1px solid #000;"></td>'})}),V+="</tr>"}),V+=`<tr><td colspan="${2+Un.length*$.length}" style="height: 2px; background-color: #000;"></td></tr>`}),V+="</table><br/><br/>"}),V+="</body></html>";const z=new Blob([V],{type:"application/vnd.ms-excel"}),F=URL.createObjectURL(z),L=document.createElement("a");L.href=F,L.download="_.xls",document.body.appendChild(L),L.click(),document.body.removeChild(L)},U=()=>{let V=`							
`;Un.forEach(z=>{[ce.First,ce.Second].forEach(F=>{n.filter(H=>H.shift===F).forEach(H=>{As[F].forEach($=>{a.filter(se=>se.classId===H.id&&se.day===z&&se.shift===F&&se.period===$).forEach(se=>{const fe=t.find(ze=>ze.id===se.subjectId),Ue=e.find(ze=>ze.id===se.teacherId),te=r.find(ze=>ze.id===se.roomId),Ne=te?te.name:se.roomId||"";V+=`${z}	${F}	${H.name}	${$}	${(fe==null?void 0:fe.name)||""}	${(Ue==null?void 0:Ue.name)||""}	${Ne}	${se.direction||""}
`})})})})}),navigator.clipboard.writeText(V).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},D=async()=>{if(f.current){_(!0);try{const V=await y9(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),z=document.createElement("a");z.download=`_${w}.png`,z.href=V.toDataURL("image/png"),z.click()}catch(V){console.error(V),alert("   ")}_(!1)}},T=S.useMemo(()=>c.filter(V=>V.date===w),[c,w]),Ee=V=>{const z=T.filter(F=>{const L=a.find(H=>H.id===F.scheduleItemId);return L&&L.shift===V}).filter(F=>F.replacementTeacherId!=="conducted");return z.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:V}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:z.map(F=>{var tt;const L=a.find(qe=>qe.id===F.scheduleItemId);if(!L)return null;const H=n.find(qe=>qe.id===L.classId),$=t.find(qe=>qe.id===L.subjectId),q=e.find(qe=>qe.id===F.originalTeacherId),se=F.replacementRoomId,fe=L.roomId?r.find(qe=>qe.id===L.roomId):null,Ue=fe?fe.name:L.roomId||"",te=se?r.find(qe=>qe.id===se):null,Ne=te?te.name:se||"",ze=F.replacementTeacherId==="cancelled",Se=ze?{name:" "}:e.find(qe=>qe.id===F.replacementTeacherId),Qe=(tt=q==null?void 0:q.absenceReasons)==null?void 0:tt[w],De=F.lessonAbsenceReason,be=De===" "?De:Qe===" "?Qe:"",ke=F.replacementTeacherId===F.originalTeacherId&&se;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:L.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:H==null?void 0:H.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:$==null?void 0:$.name}),L.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:L.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!ke&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-red-400 line-through text-sm font-medium decoration-red-200",children:q==null?void 0:q.name}),be&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:be})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${ze?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:ke?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:q==null?void 0:q.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:Se==null?void 0:Se.name}),F.isMerger&&l.jsx("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:""})]})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono ${se?"font-black text-indigo-600":"text-slate-500"}`,children:se&&se!==L.roomId?l.jsxs("span",{children:[l.jsx("span",{className:"text-slate-400 line-through mr-1 decoration-slate-300 decoration-2 opacity-70 text-xs",children:Ue}),l.jsxs("span",{className:"text-indigo-600 font-black text-sm",children:[" ",Ne]})]}):Ue})]},F.id)})})]})]})},$e=async()=>{const V=Math.random().toString(36).substr(2,9);await _A.setPublicData(V,I),await o({settings:{...s,publicScheduleId:V}});const z=`${window.location.origin}${window.location.pathname}#/public?id=${V}`;R(z),N(V),B(!0)},Oe=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await _A.deletePublicData(s.publicScheduleId),await o({settings:{...s,publicScheduleId:null}}),alert("  ."),R(""),N(""))};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>_A.exportJson(I),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:x,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var V;return(V=h.current)==null?void 0:V.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(W,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(W,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:w,onChange:V=>p(V.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:D,disabled:C,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:C?l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Download",size:20}),"  PNG"]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-center",children:l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:"   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(w).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),T.length===0?l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}):l.jsxs(l.Fragment,{children:[Ee(ce.First),Ee(ce.Second)]}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:b,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:k,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:U,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Clipboard",size:20}),"   Google Sheets"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(W,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Oe,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:$e,disabled:C,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(W,{name:"Share2",size:20}),"  "]})]}),l.jsx(Gr,{isOpen:y,onClose:()=>B(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),v&&l.jsxs(l.Fragment,{children:[l.jsx(P9,{value:v,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:v}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(v),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Copy",size:16}),"  "]})]})]})})]})},L9=()=>{var w;const{subjects:t,teachers:e,classes:n}=Zs(),{schedule:r,substitutions:s}=nl(),[A,i]=S.useState("load"),[o,a]=S.useState(((w=n[0])==null?void 0:w.id)||""),c=S.useMemo(()=>e.map(C=>{const _=r.filter(I=>I.teacherId===C.id),y=_.length,B=y*4,v=s.filter(I=>I.replacementTeacherId===C.id).length,R=s.filter(I=>I.originalTeacherId===C.id).length,Q=B+v-R,N={};return _.forEach(I=>{const x=t.find(b=>b.id===I.subjectId);x&&(N[x.name]=(N[x.name]||0)+1)}),{id:C.id,name:C.name,weeklyHours:y,subsTaken:v,subsMissed:R,actualHours:Q,subjectBreakdown:N}}).sort((C,_)=>_.actualHours-C.actualHours),[e,r,s,t]),d=S.useMemo(()=>o?Un.map(p=>{const _=r.filter(y=>y.classId===o&&y.day===p).reduce((y,B)=>{const v=t.find(R=>R.id===B.subjectId);return y+((v==null?void 0:v.difficulty)||5)},0);return{label:p,value:_}}):[],[r,t,o]),h=S.useMemo(()=>{const p=e.map(_=>({name:_.name,count:s.filter(y=>y.replacementTeacherId===_.id).length})).sort((_,y)=>y.count-_.count).slice(0,5),C=e.map(_=>({name:_.name,count:_.unavailableDates.length})).sort((_,y)=>y.count-_.count).slice(0,5);return{heroes:p,absentees:C}},[e,s]),f=()=>{let p="";A==="load"?p=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+c.map(y=>`"${y.name}",${y.weeklyHours},${y.subsTaken},${y.subsMissed},${y.actualHours},"${Object.entries(y.subjectBreakdown).map(([B,v])=>B+": "+v).join(", ")}"`).join(`
`):A==="sanpin"&&(p=`Day,Score
`+d.map(y=>`${y.label},${y.value}`).join(`
`));const C=new Blob([`\uFEFF${p}`],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(C),_.download=`report_${A}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(W,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("button",{onClick:f,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2",children:[l.jsx(W,{name:"FileSpreadsheet",size:16}),"  CSV"]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>i("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${A==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${A==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${A==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),A==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:c.map(p=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:p.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:p.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",p.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",p.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:p.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(p.subjectBreakdown).map(([C,_])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[C,": ",_]},C))})})]},p.id))})]})}),A==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:p=>a(p.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(p=>l.jsx("option",{value:p.id,children:p.name},p.id))})]}),l.jsx(Kp,{items:d,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),A==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Kp,{items:h.heroes.map(p=>({label:p.name,value:p.count})),max:Math.max(...h.heroes.map(p=>p.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Kp,{items:h.absentees.map(p=>({label:p.name,value:p.count})),max:Math.max(...h.absentees.map(p=>p.count),1),barClassName:"bg-red-500"})]})]})]})},O9=()=>{const{data:t,saveData:e}=LK(),{user:n,role:r}=po(),s=t.requests||[],[A,i]=S.useState("my"),[o,a]=S.useState("all"),[c,d]=S.useState("general"),[h,f]=S.useState(""),[w,p]=S.useState(""),[C,_]=S.useState(""),[y,B]=S.useState(null),[v,R]=S.useState(""),[Q,N]=S.useState("new"),[I,x]=S.useState(!1),b=S.useMemo(()=>{let V=s;return r==="admin"?(o!=="all"&&(V=V.filter(z=>z.status===o)),V.sort((z,F)=>new Date(F.date).getTime()-new Date(z.date).getTime())):n?V.filter(z=>z.authorId===n.uid).sort((z,F)=>new Date(F.date).getTime()-new Date(z.date).getTime()):[]},[s,n,r,o]),k=async()=>{if(!h.trim()||!w.trim())return alert("   ");const V=C.trim(),z=r==="admin",L=[{id:Math.random().toString(36).substr(2,9),authorId:(n==null?void 0:n.uid)||"unknown",authorName:V||(z?"":""),date:new Date().toISOString(),type:c,title:h,message:w,status:"new",isAnonymous:!V&&!z,createdByAdmin:z},...s];await e({requests:L}),f(""),p(""),_(""),d("general"),i("my"),alert("  !")},U=async()=>{if(!y)return;const V=s.map(z=>z.id===y.id?{...z,status:Q,adminComment:v}:z);await e({requests:V}),x(!1),B(null)},D=async()=>{if(!y||!window.confirm("     ?    ."))return;const V=s.filter(z=>z.id!==y.id);await e({requests:V}),x(!1),B(null)},T=V=>{B(V),N(V.status),R(V.adminComment||""),x(!0)},Ee=V=>{switch(V){case"new":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"in_progress":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"resolved":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"rejected":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-slate-100 text-slate-700"}},$e=V=>{switch(V){case"new":return"";case"in_progress":return" ";case"resolved":return"";case"rejected":return"";default:return V}},Oe=V=>{switch(V){case"schedule":return"Calendar";case"room":return"DoorOpen";default:return"MessageSquare"}};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsx("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(W,{name:"Inbox",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>i("my"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="my"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:r==="admin"?" ":" "}),l.jsx("button",{onClick:()=>i("create"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="create"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]})}),A==="create"&&l.jsxs("div",{className:"max-w-2xl mx-auto bg-white dark:bg-dark-800 p-8 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:" "}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:" "}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("button",{onClick:()=>d("general"),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${c==="general"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:"MessageSquare",size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]}),l.jsxs("button",{onClick:()=>d("schedule"),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${c==="schedule"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:"Calendar",size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]}),l.jsxs("button",{onClick:()=>d("room"),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${c==="room"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:"DoorOpen",size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:"  ()"}),l.jsx("input",{value:C,onChange:V=>_(V.target.value),placeholder:r==="admin"?"":" ,   ",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:""}),l.jsx("input",{value:h,onChange:V=>f(V.target.value),placeholder:"  ",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:""}),l.jsx("textarea",{value:w,onChange:V=>p(V.target.value),placeholder:" ...",rows:5,className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white resize-y"})]}),l.jsxs("button",{onClick:k,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2",children:[l.jsx(W,{name:"Send",size:20})," "]})]})]}),A==="my"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[r==="admin"&&l.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 no-scrollbar",children:[l.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="all"?"bg-slate-800 text-white dark:bg-white dark:text-slate-900":"bg-white dark:bg-slate-700 text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>a("new"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="new"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 border border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>a("in_progress"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="in_progress"?"bg-amber-500 text-white shadow-md shadow-amber-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-amber-600 dark:text-amber-400 border border-slate-200 dark:border-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>a("resolved"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="resolved"?"bg-emerald-600 text-white shadow-md shadow-emerald-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-emerald-600 dark:text-emerald-400 border border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>a("rejected"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="rejected"?"bg-red-600 text-white shadow-md shadow-red-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-red-600 dark:text-red-400 border border-slate-200 dark:border-slate-600"}`,children:""})]}),b.length===0?l.jsxs("div",{className:"text-center py-12 text-slate-400",children:[l.jsx(W,{name:"Inbox",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:r==="admin"?"    ":"     "})]}):b.map(V=>{var z;return l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-sm ${V.createdByAdmin?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:V.createdByAdmin?l.jsx(W,{name:"Settings",size:20}):V.isAnonymous?"?":(z=V.authorName)==null?void 0:z[0]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:V.authorName||""}),V.createdByAdmin&&l.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-wider border border-purple-200 dark:border-purple-800",children:""})]}),l.jsx("div",{className:"text-xs text-slate-400",children:new Date(V.date).toLocaleString("ru-RU")})]})]}),l.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wider border ${Ee(V.status).replace("bg-","border-").replace("text-","text-").split(" ")[0]+"-200"} ${Ee(V.status)}`,children:$e(V.status)})]}),l.jsxs("div",{className:"mb-4 pl-12 md:pl-14",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsxs("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide flex items-center gap-1 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg",children:[l.jsx(W,{name:Oe(V.type),size:12})," ",V.type==="schedule"?"":V.type==="room"?"":""]})}),l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:V.title}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/30 p-3 rounded-xl border border-slate-100 dark:border-slate-700/50",children:V.message})]}),V.adminComment&&l.jsxs("div",{className:"mb-4 ml-12 md:ml-14 bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-xl border border-indigo-100 dark:border-indigo-900",children:[l.jsxs("div",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 mb-1 flex items-center gap-1",children:[l.jsx(W,{name:"User",size:12})," ",r==="admin"?" :":" :"]}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:V.adminComment})]}),r==="admin"&&l.jsx("div",{className:"flex justify-end pt-2 border-t border-slate-50 dark:border-slate-700 mt-4",children:l.jsxs("button",{onClick:()=>T(V),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(W,{name:"Edit2",size:16})," "]})})]},V.id)})]}),l.jsx(Gr,{isOpen:I,onClose:()=>x(!1),title:" ",children:y&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs font-bold uppercase text-slate-400",children:y.authorName||""}),y.createdByAdmin&&l.jsx("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-[10px] font-bold",children:""})]}),l.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:y.title}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:y.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:" "}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>N("new"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${Q==="new"?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>N("in_progress"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${Q==="in_progress"?"bg-amber-50 border-amber-500 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"border-slate-200 dark:border-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>N("resolved"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${Q==="resolved"?"bg-emerald-50 border-emerald-500 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>N("rejected"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${Q==="rejected"?"bg-red-50 border-red-500 text-red-700 dark:bg-red-900/30 dark:text-red-400":"border-slate-200 dark:border-slate-600"}`,children:""})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:" "}),l.jsx("textarea",{value:v,onChange:V=>R(V.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",rows:3,placeholder:"   ..."})]}),l.jsxs("div",{className:"flex justify-between items-center pt-2",children:[l.jsxs("button",{onClick:D,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Trash2",size:18})," "]}),l.jsxs("button",{onClick:U,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Save",size:18})," "]})]})]})})]})},j9=()=>{const{setGuestRole:t,role:e,loading:n}=po(),r=gu(),[s,A]=S.useState("select"),[i,o]=S.useState(""),[a,c]=S.useState(""),[d,h]=S.useState(""),[f,w]=S.useState(!1);S.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const p=async _=>{if(_.preventDefault(),h(""),w(!0),!Jt){h("Firebase .  ."),w(!1);return}try{let y=i;s==="teacher"&&(y="teacher@gymnasium22.com"),await Jt.signInWithEmailAndPassword(y,a)}catch(y){console.error("Firebase Auth Error:",y);const B=y.code;let v="   .";switch(B){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":v="   .     .";break;case"auth/invalid-email":v="  email .";break;case"auth/too-many-requests":v="   .  .";break;default:v=" .       Firebase."}h(v)}finally{w(!1)}},C=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(W,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:C,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(W,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(W,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(W,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:p,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(W,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:_=>o(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:_=>c(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx(W,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},lA=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:s}=po();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(W,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(Gh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Gh,{to:"/login",replace:!0})},M9=()=>{const{role:t,loading:e}=po();return e?null:t==="guest"?l.jsx(Gh,{to:"/schedule",replace:!0}):l.jsx(Gh,{to:"/dashboard",replace:!0})},V9=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState(localStorage.getItem("theme")||"light"),{isLoading:s}=Zs(),{logout:A,role:i,user:o}=po(),[a,c]=S.useState(null),[d,h]=S.useState(!1),[f,w]=S.useState(!1);S.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),S.useEffect(()=>{const y=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;h(y);const B=v=>{v.preventDefault(),c(v)};return window.addEventListener("beforeinstallprompt",B),()=>window.removeEventListener("beforeinstallprompt",B)},[]);const p=async()=>{if(d)w(!0);else if(a){a.prompt();const{outcome:y}=await a.userChoice;y==="accepted"&&c(null)}};if(s)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(W,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const _=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/requests",label:"",icon:"MessageSquare",roles:["admin","teacher"]},{to:"/schedule",label:"",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(y=>y.roles.includes(i||""));return l.jsxs("div",{className:"flex h-[100dvh] bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx(W,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0 custom-scrollbar overflow-y-auto",children:_.map(y=>l.jsxs(IN,{to:y.to,onClick:()=>e(!1),className:({isActive:B})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${B?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:y.icon,size:20}),y.label]},y.to))}),l.jsx(MK,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2 safe-pb",children:[(a||d)&&l.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-xs font-bold text-indigo-600 dark:text-indigo-400 w-full hover:bg-indigo-50 dark:hover:bg-indigo-900/20 p-2 rounded-lg transition-colors mb-2",children:[l.jsx(W,{name:"Download",size:16}),"  "]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:A,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(W,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors p-1.5",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx(W,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 custom-scrollbar",children:l.jsx(cN,{})})]}),l.jsx(Gr,{isOpen:f,onClose:()=>w(!1),title:"  iPhone",children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"    iPhone:"}),l.jsxs("div",{className:"space-y-2 text-sm font-medium text-slate-800 dark:text-white bg-slate-100 dark:bg-slate-700 p-4 rounded-xl",children:[l.jsxs("p",{className:"flex items-center justify-center gap-2",children:['1.   "" ',l.jsx(W,{name:"Share2",size:16})]}),l.jsx("p",{children:'2.     "  "'}),l.jsx("p",{children:'3.  ""   '})]}),l.jsx("button",{onClick:()=>w(!1),className:"w-full py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})]})})]})},H9=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(!0),[s]=TN(),A=s.get("id");return S.useEffect(()=>{A?(r(!0),_A.getPublicData(A).then(i=>{const o={...zt,...i,settings:{...zt.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[A]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(W,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(uk,{initialData:t,children:l.jsx(fk,{children:l.jsx(gk,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(W,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(vk,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(W,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function K9(){return l.jsx(DK,{children:l.jsx(uk,{children:l.jsx(fk,{children:l.jsx(gk,{children:l.jsx(BN,{children:l.jsxs(dN,{children:[l.jsx(ir,{path:"/login",element:l.jsx(j9,{})}),l.jsxs(ir,{path:"/",element:l.jsx(lA,{children:l.jsx(V9,{})}),children:[l.jsx(ir,{index:!0,element:l.jsx(M9,{})}),l.jsx(ir,{path:"dashboard",element:l.jsx(lA,{allowedRoles:["admin","teacher"],children:l.jsx(VK,{})})}),l.jsx(ir,{path:"requests",element:l.jsx(lA,{allowedRoles:["admin","teacher"],children:l.jsx(O9,{})})}),l.jsx(ir,{path:"schedule",element:l.jsx(G9,{})}),l.jsx(ir,{path:"substitutions",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(JK,{})})}),l.jsx(ir,{path:"directory",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(qK,{})})}),l.jsx(ir,{path:"admin",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(XK,{})})}),l.jsx(ir,{path:"reports",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(L9,{})})}),l.jsx(ir,{path:"export",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(D9,{})})})]}),l.jsx(ir,{path:"/public",element:l.jsx(H9,{})})]})})})})})})}const G9=()=>{const{role:t}=po();return l.jsx(vk,{readOnly:t!=="admin"})};dm.createRoot(document.getElementById("root")).render(l.jsx(Ei.StrictMode,{children:l.jsx(K9,{})}));
