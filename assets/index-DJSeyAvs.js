function KQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(r,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function r(s){if(s.ep)return;s.ep=!0;const A=n(s);fetch(s.href,A)}})();function $I(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qI={exports:{}},_f={},JI={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),GQ=Symbol.for("react.portal"),zQ=Symbol.for("react.fragment"),WQ=Symbol.for("react.strict_mode"),$Q=Symbol.for("react.profiler"),qQ=Symbol.for("react.provider"),JQ=Symbol.for("react.context"),XQ=Symbol.for("react.forward_ref"),YQ=Symbol.for("react.suspense"),ZQ=Symbol.for("react.memo"),eS=Symbol.for("react.lazy"),PB=Symbol.iterator;function tS(t){return t===null||typeof t!="object"?null:(t=PB&&t[PB]||t["@@iterator"],typeof t=="function"?t:null)}var XI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YI=Object.assign,ZI={};function La(t,e,n){this.props=t,this.context=e,this.refs=ZI,this.updater=n||XI}La.prototype.isReactComponent={};La.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};La.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eE(){}eE.prototype=La.prototype;function hw(t,e,n){this.props=t,this.context=e,this.refs=ZI,this.updater=n||XI}var fw=hw.prototype=new eE;fw.constructor=hw;YI(fw,La.prototype);fw.isPureReactComponent=!0;var DB=Array.isArray,tE=Object.prototype.hasOwnProperty,gw={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,s={},A=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)tE.call(e,r)&&!nE.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:au,type:t,key:A,ref:i,props:s,_owner:gw.current}}function nS(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pw(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function rS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LB=/\/+/g;function qg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rS(""+t.key):e.toString(36)}function Kd(t,e,n,r,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case au:case GQ:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+qg(i,0):r,DB(s)?(n="",t!=null&&(n=t.replace(LB,"$&/")+"/"),Kd(s,e,n,"",function(c){return c})):s!=null&&(pw(s)&&(s=nS(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(LB,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",DB(t))for(var o=0;o<t.length;o++){A=t[o];var a=r+qg(A,o);i+=Kd(A,e,n,a,s)}else if(a=tS(t),typeof a=="function")for(t=a.call(t),o=0;!(A=t.next()).done;)A=A.value,a=r+qg(A,o++),i+=Kd(A,e,n,a,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Ju(t,e,n){if(t==null)return t;var r=[],s=0;return Kd(t,r,"","",function(A){return e.call(n,A,s++)}),r}function sS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Gd={transition:null},AS={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Gd,ReactCurrentOwner:gw};function sE(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Ju,forEach:function(t,e,n){Ju(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!pw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=La;Ve.Fragment=zQ;Ve.Profiler=$Q;Ve.PureComponent=hw;Ve.StrictMode=WQ;Ve.Suspense=YQ;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AS;Ve.act=sE;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=YI({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=gw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)tE.call(e,a)&&!nE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:au,type:t.type,key:s,ref:A,props:r,_owner:i}};Ve.createContext=function(t){return t={$$typeof:JQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qQ,_context:t},t.Consumer=t};Ve.createElement=rE;Ve.createFactory=function(t){var e=rE.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:XQ,render:t}};Ve.isValidElement=pw;Ve.lazy=function(t){return{$$typeof:eS,_payload:{_status:-1,_result:t},_init:sS}};Ve.memo=function(t,e){return{$$typeof:ZQ,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Gd.transition;Gd.transition={};try{t()}finally{Gd.transition=e}};Ve.unstable_act=sE;Ve.useCallback=function(t,e){return zn.current.useCallback(t,e)};Ve.useContext=function(t){return zn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return zn.current.useEffect(t,e)};Ve.useId=function(){return zn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return zn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};Ve.useRef=function(t){return zn.current.useRef(t)};Ve.useState=function(t){return zn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return zn.current.useTransition()};Ve.version="18.3.1";JI.exports=Ve;var Q=JI.exports;const Ei=$I(Q),iS=KQ({__proto__:null,default:Ei},[Q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS=Q,aS=Symbol.for("react.element"),lS=Symbol.for("react.fragment"),cS=Object.prototype.hasOwnProperty,uS=oS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dS={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,s={},A=null,i=null;n!==void 0&&(A=""+n),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)cS.call(e,r)&&!dS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aS,type:t,key:A,ref:i,props:s,_owner:uS.current}}_f.Fragment=lS;_f.jsx=AE;_f.jsxs=AE;qI.exports=_f;var l=qI.exports,cm={},iE={exports:{}},mr={},oE={exports:{}},aE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,F){var L=z.length;z.push(F);e:for(;0<L;){var H=L-1>>>1,$=z[H];if(0<s($,F))z[H]=F,z[L]=$,L=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var F=z[0],L=z.pop();if(L!==F){z[0]=L;e:for(var H=0,$=z.length,q=$>>>1;H<q;){var se=2*(H+1)-1,fe=z[se],Ue=se+1,te=z[Ue];if(0>s(fe,L))Ue<$&&0>s(te,fe)?(z[H]=te,z[Ue]=L,H=Ue):(z[H]=fe,z[se]=L,H=se);else if(Ue<$&&0>s(te,L))z[H]=te,z[Ue]=L,H=Ue;else break e}}return F}function s(z,F){var L=z.sortIndex-F.sortIndex;return L!==0?L:z.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,w=!1,p=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=z)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function R(z){if(C=!1,v(z),!p)if(n(a)!==null)p=!0,Oe(S);else{var F=n(c);F!==null&&V(R,F.startTime-z)}}function S(z,F){p=!1,C&&(C=!1,y(x),x=-1),w=!0;var L=f;try{for(v(F),h=n(a);h!==null&&(!(h.expirationTime>F)||z&&!U());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var $=H(h.expirationTime<=F);F=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(a)&&r(a),v(F)}else r(a);h=n(a)}if(h!==null)var q=!0;else{var se=n(c);se!==null&&V(R,se.startTime-F),q=!1}return q}finally{h=null,f=L,w=!1}}var N=!1,I=null,x=-1,b=5,k=-1;function U(){return!(t.unstable_now()-k<b)}function D(){if(I!==null){var z=t.unstable_now();k=z;var F=!0;try{F=I(!0,z)}finally{F?T():(N=!1,I=null)}}else N=!1}var T;if(typeof B=="function")T=function(){B(D)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,$e=Ee.port2;Ee.port1.onmessage=D,T=function(){$e.postMessage(null)}}else T=function(){_(D,0)};function Oe(z){I=z,N||(N=!0,T())}function V(z,F){x=_(function(){z(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||w||(p=!0,Oe(S))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var L=f;f=F;try{return z()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,F){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var L=f;f=z;try{return F()}finally{f=L}},t.unstable_scheduleCallback=function(z,F,L){var H=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=L+$,z={id:d++,callback:F,priorityLevel:z,startTime:L,expirationTime:$,sortIndex:-1},L>H?(z.sortIndex=L,e(c,z),n(a)===null&&z===n(c)&&(C?(y(x),x=-1):C=!0,V(R,L-H))):(z.sortIndex=$,e(a,z),p||w||(p=!0,Oe(S))),z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(z){var F=f;return function(){var L=f;f=F;try{return z.apply(this,arguments)}finally{f=L}}}})(aE);oE.exports=aE;var hS=oE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=Q,gr=hS;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lE=new Set,mc={};function Ao(t,e){da(t,e),da(t+"Capture",e)}function da(t,e){for(mc[t]=e,t=0;t<e.length;t++)lE.add(e[t])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,gS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OB={},MB={};function pS(t){return um.call(MB,t)?!0:um.call(OB,t)?!1:gS.test(t)?MB[t]=!0:(OB[t]=!0,!1)}function mS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wS(t,e,n,r){if(e===null||typeof e>"u"||mS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wn(t,e,n,r,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new Wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new Wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new Wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new Wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new Wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new Wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new Wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new Wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new Wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var mw=/[\-:]([a-z])/g;function ww(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mw,ww);Bn[e]=new Wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mw,ww);Bn[e]=new Wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mw,ww);Bn[e]=new Wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new Wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function vw(t,e,n,r){var s=Bn.hasOwnProperty(e)?Bn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wS(e,n,s,r)&&(n=null),r||s===null?pS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gs=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),cE=Symbol.for("react.provider"),uE=Symbol.for("react.context"),Bw=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),dA=Symbol.for("react.lazy"),dE=Symbol.for("react.offscreen"),jB=Symbol.iterator;function cl(t){return t===null||typeof t!="object"?null:(t=jB&&t[jB]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,Jg;function Ul(t){if(Jg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jg=e&&e[1]||""}return`
`+Jg+t}var Xg=!1;function Yg(t,e){if(!t||Xg)return"";Xg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=r.stack.split(`
`),i=s.length-1,o=A.length-1;1<=i&&0<=o&&s[i]!==A[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==A[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==A[o]){var a=`
`+s[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{Xg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function vS(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=Yg(t.type,!1),t;case 11:return t=Yg(t.type.render,!1),t;case 1:return t=Yg(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Oo:return"Portal";case dm:return"Profiler";case yw:return"StrictMode";case hm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uE:return(t.displayName||"Context")+".Consumer";case cE:return(t._context.displayName||"Context")+".Provider";case Bw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xw:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case dA:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function yS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===yw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BS(t){var e=hE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,A=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yu(t){t._valueTracker||(t._valueTracker=BS(t))}function fE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pm(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jA(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&vw(t,"checked",e,!1)}function mm(t,e){gE(t,e);var n=jA(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wm(t,e.type,n):e.hasOwnProperty("defaultValue")&&wm(t,e.type,jA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wm(t,e,n){(e!=="number"||wh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kl=Array.isArray;function Zo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jA(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(kl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jA(n)}}function pE(t,e){var n=jA(e.value),r=jA(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,wE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xS=["Webkit","ms","Moz","O"];Object.keys($l).forEach(function(t){xS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$l[e]=$l[t]})});function vE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$l.hasOwnProperty(t)&&$l[t]?(""+e).trim():e+"px"}function yE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CS=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bm(t,e){if(e){if(CS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function xm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cm=null;function Cw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _m=null,ea=null,ta=null;function zB(t){if(t=uu(t)){if(typeof _m!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Ff(e),_m(t.stateNode,t.type,e))}}function BE(t){ea?ta?ta.push(t):ta=[t]:ea=t}function xE(){if(ea){var t=ea,e=ta;if(ta=ea=null,zB(t),e)for(t=0;t<e.length;t++)zB(e[t])}}function CE(t,e){return t(e)}function _E(){}var Zg=!1;function IE(t,e,n){if(Zg)return t(e,n);Zg=!0;try{return CE(t,e,n)}finally{Zg=!1,(ea!==null||ta!==null)&&(_E(),xE())}}function vc(t,e){var n=t.stateNode;if(n===null)return null;var r=Ff(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Im=!1;if(Ps)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Im=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Im=!1}function _S(t,e,n,r,s,A,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ql=!1,vh=null,yh=!1,Em=null,IS={onError:function(t){ql=!0,vh=t}};function ES(t,e,n,r,s,A,i,o,a){ql=!1,vh=null,_S.apply(IS,arguments)}function bS(t,e,n,r,s,A,i,o,a){if(ES.apply(this,arguments),ql){if(ql){var c=vh;ql=!1,vh=null}else throw Error(ee(198));yh||(yh=!0,Em=c)}}function io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function EE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WB(t){if(io(t)!==t)throw Error(ee(188))}function TS(t){var e=t.alternate;if(!e){if(e=io(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var A=s.alternate;if(A===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===n)return WB(s),t;if(A===r)return WB(s),e;A=A.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=A;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i){for(o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function bE(t){return t=TS(t),t!==null?TE(t):null}function TE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TE(t);if(e!==null)return e;t=t.sibling}return null}var FE=gr.unstable_scheduleCallback,$B=gr.unstable_cancelCallback,FS=gr.unstable_shouldYield,US=gr.unstable_requestPaint,Mt=gr.unstable_now,kS=gr.unstable_getCurrentPriorityLevel,_w=gr.unstable_ImmediatePriority,UE=gr.unstable_UserBlockingPriority,Bh=gr.unstable_NormalPriority,QS=gr.unstable_LowPriority,kE=gr.unstable_IdlePriority,If=null,ls=null;function SS(t){if(ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(If,t,void 0,(t.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:PS,RS=Math.log,NS=Math.LN2;function PS(t){return t>>>=0,t===0?32:31-(RS(t)/NS|0)|0}var ed=64,td=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,A=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~s;o!==0?r=Ql(o):(A&=i,A!==0&&(r=Ql(A)))}else i=n&~s,i!==0?r=Ql(i):A!==0&&(r=Ql(A));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vr(e),s=1<<n,r|=t[n],e&=~s;return r}function DS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-Vr(A),o=1<<i,a=s[i];a===-1?(!(o&n)||o&r)&&(s[i]=DS(o,e)):a<=e&&(t.expiredLanes|=o),A&=~o}}function bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QE(){var t=ed;return ed<<=1,!(ed&4194240)&&(ed=64),t}function ep(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vr(e),t[e]=n}function OS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vr(n),A=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~A}}function Iw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ot=0;function SE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var RE,Ew,NE,PE,DE,Tm=!1,nd=[],TA=null,FA=null,UA=null,yc=new Map,Bc=new Map,gA=[],MS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qB(t,e){switch(t){case"focusin":case"focusout":TA=null;break;case"dragenter":case"dragleave":FA=null;break;case"mouseover":case"mouseout":UA=null;break;case"pointerover":case"pointerout":yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(e.pointerId)}}function dl(t,e,n,r,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:A,targetContainers:[s]},e!==null&&(e=uu(e),e!==null&&Ew(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function jS(t,e,n,r,s){switch(e){case"focusin":return TA=dl(TA,t,e,n,r,s),!0;case"dragenter":return FA=dl(FA,t,e,n,r,s),!0;case"mouseover":return UA=dl(UA,t,e,n,r,s),!0;case"pointerover":var A=s.pointerId;return yc.set(A,dl(yc.get(A)||null,t,e,n,r,s)),!0;case"gotpointercapture":return A=s.pointerId,Bc.set(A,dl(Bc.get(A)||null,t,e,n,r,s)),!0}return!1}function LE(t){var e=bi(t.target);if(e!==null){var n=io(e);if(n!==null){if(e=n.tag,e===13){if(e=EE(n),e!==null){t.blockedOn=e,DE(t.priority,function(){NE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cm=r,n.target.dispatchEvent(r),Cm=null}else return e=uu(n),e!==null&&Ew(e),t.blockedOn=n,!1;e.shift()}return!0}function JB(t,e,n){zd(t)&&n.delete(e)}function VS(){Tm=!1,TA!==null&&zd(TA)&&(TA=null),FA!==null&&zd(FA)&&(FA=null),UA!==null&&zd(UA)&&(UA=null),yc.forEach(JB),Bc.forEach(JB)}function hl(t,e){t.blockedOn===e&&(t.blockedOn=null,Tm||(Tm=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,VS)))}function xc(t){function e(s){return hl(s,t)}if(0<nd.length){hl(nd[0],t);for(var n=1;n<nd.length;n++){var r=nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(TA!==null&&hl(TA,t),FA!==null&&hl(FA,t),UA!==null&&hl(UA,t),yc.forEach(e),Bc.forEach(e),n=0;n<gA.length;n++)r=gA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gA.length&&(n=gA[0],n.blockedOn===null);)LE(n),n.blockedOn===null&&gA.shift()}var na=Gs.ReactCurrentBatchConfig,Ch=!0;function HS(t,e,n,r){var s=ot,A=na.transition;na.transition=null;try{ot=1,bw(t,e,n,r)}finally{ot=s,na.transition=A}}function KS(t,e,n,r){var s=ot,A=na.transition;na.transition=null;try{ot=4,bw(t,e,n,r)}finally{ot=s,na.transition=A}}function bw(t,e,n,r){if(Ch){var s=Fm(t,e,n,r);if(s===null)cp(t,e,r,_h,n),qB(t,r);else if(jS(s,t,e,n,r))r.stopPropagation();else if(qB(t,r),e&4&&-1<MS.indexOf(t)){for(;s!==null;){var A=uu(s);if(A!==null&&RE(A),A=Fm(t,e,n,r),A===null&&cp(t,e,r,_h,n),A===s)break;s=A}s!==null&&r.stopPropagation()}else cp(t,e,r,null,n)}}var _h=null;function Fm(t,e,n,r){if(_h=null,t=Cw(r),t=bi(t),t!==null)if(e=io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=EE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _h=t,null}function OE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kS()){case _w:return 1;case UE:return 4;case Bh:case QS:return 16;case kE:return 536870912;default:return 16}default:return 16}}var vA=null,Tw=null,Wd=null;function ME(){if(Wd)return Wd;var t,e=Tw,n=e.length,r,s="value"in vA?vA.value:vA.textContent,A=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[A-r];r++);return Wd=s.slice(t,1<r?1-r:void 0)}function $d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function XB(){return!1}function wr(t){function e(n,r,s,A,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(A):A[o]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?rd:XB,this.isPropagationStopped=XB,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fw=wr(Oa),cu=Tt({},Oa,{view:0,detail:0}),GS=wr(cu),tp,np,fl,Ef=Tt({},cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fl&&(fl&&t.type==="mousemove"?(tp=t.screenX-fl.screenX,np=t.screenY-fl.screenY):np=tp=0,fl=t),tp)},movementY:function(t){return"movementY"in t?t.movementY:np}}),YB=wr(Ef),zS=Tt({},Ef,{dataTransfer:0}),WS=wr(zS),$S=Tt({},cu,{relatedTarget:0}),rp=wr($S),qS=Tt({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),JS=wr(qS),XS=Tt({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YS=wr(XS),ZS=Tt({},Oa,{data:0}),ZB=wr(ZS),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n2[t])?!!e[t]:!1}function Uw(){return r2}var s2=Tt({},cu,{key:function(t){if(t.key){var e=e2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uw,charCode:function(t){return t.type==="keypress"?$d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A2=wr(s2),i2=Tt({},Ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=wr(i2),o2=Tt({},cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uw}),a2=wr(o2),l2=Tt({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=wr(l2),u2=Tt({},Ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=wr(u2),h2=[9,13,27,32],kw=Ps&&"CompositionEvent"in window,Jl=null;Ps&&"documentMode"in document&&(Jl=document.documentMode);var f2=Ps&&"TextEvent"in window&&!Jl,jE=Ps&&(!kw||Jl&&8<Jl&&11>=Jl),tx=" ",nx=!1;function VE(t,e){switch(t){case"keyup":return h2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jo=!1;function g2(t,e){switch(t){case"compositionend":return HE(e);case"keypress":return e.which!==32?null:(nx=!0,tx);case"textInput":return t=e.data,t===tx&&nx?null:t;default:return null}}function p2(t,e){if(jo)return t==="compositionend"||!kw&&VE(t,e)?(t=ME(),Wd=Tw=vA=null,jo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jE&&e.locale!=="ko"?null:e.data;default:return null}}var m2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!m2[t.type]:e==="textarea"}function KE(t,e,n,r){BE(r),e=Ih(e,"onChange"),0<e.length&&(n=new Fw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xl=null,Cc=null;function w2(t){tb(t,0)}function bf(t){var e=Ko(t);if(fE(e))return t}function v2(t,e){if(t==="change")return e}var GE=!1;if(Ps){var sp;if(Ps){var Ap="oninput"in document;if(!Ap){var sx=document.createElement("div");sx.setAttribute("oninput","return;"),Ap=typeof sx.oninput=="function"}sp=Ap}else sp=!1;GE=sp&&(!document.documentMode||9<document.documentMode)}function Ax(){Xl&&(Xl.detachEvent("onpropertychange",zE),Cc=Xl=null)}function zE(t){if(t.propertyName==="value"&&bf(Cc)){var e=[];KE(e,Cc,t,Cw(t)),IE(w2,e)}}function y2(t,e,n){t==="focusin"?(Ax(),Xl=e,Cc=n,Xl.attachEvent("onpropertychange",zE)):t==="focusout"&&Ax()}function B2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bf(Cc)}function x2(t,e){if(t==="click")return bf(e)}function C2(t,e){if(t==="input"||t==="change")return bf(e)}function _2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zr=typeof Object.is=="function"?Object.is:_2;function _c(t,e){if(zr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!um.call(e,s)||!zr(t[s],e[s]))return!1}return!0}function ix(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ox(t,e){var n=ix(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ix(n)}}function WE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $E(){for(var t=window,e=wh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wh(t.document)}return e}function Qw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I2(t){var e=$E(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WE(n.ownerDocument.documentElement,n)){if(r!==null&&Qw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,A=Math.min(r.start,s);r=r.end===void 0?A:Math.min(r.end,s),!t.extend&&A>r&&(s=r,r=A,A=s),s=ox(n,A);var i=ox(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E2=Ps&&"documentMode"in document&&11>=document.documentMode,Vo=null,Um=null,Yl=null,km=!1;function ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;km||Vo==null||Vo!==wh(r)||(r=Vo,"selectionStart"in r&&Qw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&_c(Yl,r)||(Yl=r,r=Ih(Um,"onSelect"),0<r.length&&(e=new Fw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},ip={},qE={};Ps&&(qE=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Tf(t){if(ip[t])return ip[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qE)return ip[t]=e[n];return t}var JE=Tf("animationend"),XE=Tf("animationiteration"),YE=Tf("animationstart"),ZE=Tf("transitionend"),eb=new Map,lx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){eb.set(t,e),Ao(e,[t])}for(var op=0;op<lx.length;op++){var ap=lx[op],b2=ap.toLowerCase(),T2=ap[0].toUpperCase()+ap.slice(1);ti(b2,"on"+T2)}ti(JE,"onAnimationEnd");ti(XE,"onAnimationIteration");ti(YE,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(ZE,"onTransitionEnd");da("onMouseEnter",["mouseout","mouseover"]);da("onMouseLeave",["mouseout","mouseover"]);da("onPointerEnter",["pointerout","pointerover"]);da("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bS(r,e,void 0,t),t.currentTarget=null}function tb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var A=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==A&&s.isPropagationStopped())break e;cx(s,o,c),A=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==A&&s.isPropagationStopped())break e;cx(s,o,c),A=a}}}if(yh)throw t=Em,yh=!1,Em=null,t}function gt(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(nb(e,t,2,!1),n.add(r))}function lp(t,e,n){var r=0;e&&(r|=4),nb(n,t,r,e)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[Ad]){t[Ad]=!0,lE.forEach(function(n){n!=="selectionchange"&&(F2.has(n)||lp(n,!1,t),lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ad]||(e[Ad]=!0,lp("selectionchange",!1,e))}}function nb(t,e,n,r){switch(OE(e)){case 1:var s=HS;break;case 4:s=KS;break;default:s=bw}n=s.bind(null,e,n,t),s=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cp(t,e,n,r,s){var A=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;o!==null;){if(i=bi(o),i===null)return;if(a=i.tag,a===5||a===6){r=A=i;continue e}o=o.parentNode}}r=r.return}IE(function(){var c=A,d=Cw(n),h=[];e:{var f=eb.get(t);if(f!==void 0){var w=Fw,p=t;switch(t){case"keypress":if($d(n)===0)break e;case"keydown":case"keyup":w=A2;break;case"focusin":p="focus",w=rp;break;case"focusout":p="blur",w=rp;break;case"beforeblur":case"afterblur":w=rp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=YB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=WS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=a2;break;case JE:case XE:case YE:w=JS;break;case ZE:w=c2;break;case"scroll":w=GS;break;case"wheel":w=d2;break;case"copy":case"cut":case"paste":w=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ex}var C=(e&4)!==0,_=!C&&t==="scroll",y=C?f!==null?f+"Capture":null:f;C=[];for(var B=c,v;B!==null;){v=B;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,y!==null&&(R=vc(B,y),R!=null&&C.push(Ec(B,R,v)))),_)break;B=B.return}0<C.length&&(f=new w(f,p,null,n,d),h.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&n!==Cm&&(p=n.relatedTarget||n.fromElement)&&(bi(p)||p[Ds]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(p=n.relatedTarget||n.toElement,w=c,p=p?bi(p):null,p!==null&&(_=io(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(w=null,p=c),w!==p)){if(C=YB,R="onMouseLeave",y="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(C=ex,R="onPointerLeave",y="onPointerEnter",B="pointer"),_=w==null?f:Ko(w),v=p==null?f:Ko(p),f=new C(R,B+"leave",w,n,d),f.target=_,f.relatedTarget=v,R=null,bi(d)===c&&(C=new C(y,B+"enter",p,n,d),C.target=v,C.relatedTarget=_,R=C),_=R,w&&p)t:{for(C=w,y=p,B=0,v=C;v;v=yo(v))B++;for(v=0,R=y;R;R=yo(R))v++;for(;0<B-v;)C=yo(C),B--;for(;0<v-B;)y=yo(y),v--;for(;B--;){if(C===y||y!==null&&C===y.alternate)break t;C=yo(C),y=yo(y)}C=null}else C=null;w!==null&&ux(h,f,w,C,!1),p!==null&&_!==null&&ux(h,_,p,C,!0)}}e:{if(f=c?Ko(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var S=v2;else if(rx(f))if(GE)S=C2;else{S=B2;var N=y2}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=x2);if(S&&(S=S(t,c))){KE(h,S,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&wm(f,"number",f.value)}switch(N=c?Ko(c):window,t){case"focusin":(rx(N)||N.contentEditable==="true")&&(Vo=N,Um=c,Yl=null);break;case"focusout":Yl=Um=Vo=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,ax(h,n,d);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":ax(h,n,d)}var I;if(kw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else jo?VE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(jE&&n.locale!=="ko"&&(jo||x!=="onCompositionStart"?x==="onCompositionEnd"&&jo&&(I=ME()):(vA=d,Tw="value"in vA?vA.value:vA.textContent,jo=!0)),N=Ih(c,x),0<N.length&&(x=new ZB(x,t,null,n,d),h.push({event:x,listeners:N}),I?x.data=I:(I=HE(n),I!==null&&(x.data=I)))),(I=f2?g2(t,n):p2(t,n))&&(c=Ih(c,"onBeforeInput"),0<c.length&&(d=new ZB("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}tb(h,e)})}function Ec(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=vc(t,n),A!=null&&r.unshift(Ec(t,A,s)),A=vc(t,e),A!=null&&r.push(Ec(t,A,s))),t=t.return}return r}function yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ux(t,e,n,r,s){for(var A=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,s?(a=vc(n,A),a!=null&&i.unshift(Ec(n,a,o))):s||(a=vc(n,A),a!=null&&i.push(Ec(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var U2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function dx(t){return(typeof t=="string"?t:""+t).replace(U2,`
`).replace(k2,"")}function id(t,e,n){if(e=dx(e),dx(t)!==e&&n)throw Error(ee(425))}function Eh(){}var Qm=null,Sm=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,Q2=typeof clearTimeout=="function"?clearTimeout:void 0,hx=typeof Promise=="function"?Promise:void 0,S2=typeof queueMicrotask=="function"?queueMicrotask:typeof hx<"u"?function(t){return hx.resolve(null).then(t).catch(R2)}:Nm;function R2(t){setTimeout(function(){throw t})}function up(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xc(e)}function kA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Ma,bc="__reactProps$"+Ma,Ds="__reactContainer$"+Ma,Pm="__reactEvents$"+Ma,N2="__reactListeners$"+Ma,P2="__reactHandles$"+Ma;function bi(t){var e=t[Zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ds]||n[Zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fx(t);t!==null;){if(n=t[Zr])return n;t=fx(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[Zr]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Ff(t){return t[bc]||null}var Dm=[],Go=-1;function ni(t){return{current:t}}function mt(t){0>Go||(t.current=Dm[Go],Dm[Go]=null,Go--)}function dt(t,e){Go++,Dm[Go]=t.current,t.current=e}var VA={},Sn=ni(VA),nr=ni(!1),ji=VA;function ha(t,e){var n=t.type.contextTypes;if(!n)return VA;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in n)s[A]=e[A];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rr(t){return t=t.childContextTypes,t!=null}function bh(){mt(nr),mt(Sn)}function gx(t,e,n){if(Sn.current!==VA)throw Error(ee(168));dt(Sn,e),dt(nr,n)}function rb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,yS(t)||"Unknown",s));return Tt({},n,r)}function Th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||VA,ji=Sn.current,dt(Sn,t),dt(nr,nr.current),!0}function px(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=rb(t,e,ji),r.__reactInternalMemoizedMergedChildContext=t,mt(nr),mt(Sn),dt(Sn,t)):mt(nr),dt(nr,n)}var Es=null,Uf=!1,dp=!1;function sb(t){Es===null?Es=[t]:Es.push(t)}function D2(t){Uf=!0,sb(t)}function ri(){if(!dp&&Es!==null){dp=!0;var t=0,e=ot;try{var n=Es;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Es=null,Uf=!1}catch(s){throw Es!==null&&(Es=Es.slice(t+1)),FE(_w,ri),s}finally{ot=e,dp=!1}}return null}var zo=[],Wo=0,Fh=null,Uh=0,yr=[],Br=0,Vi=null,bs=1,Ts="";function pi(t,e){zo[Wo++]=Uh,zo[Wo++]=Fh,Fh=t,Uh=e}function Ab(t,e,n){yr[Br++]=bs,yr[Br++]=Ts,yr[Br++]=Vi,Vi=t;var r=bs;t=Ts;var s=32-Vr(r)-1;r&=~(1<<s),n+=1;var A=32-Vr(e)+s;if(30<A){var i=s-s%5;A=(r&(1<<i)-1).toString(32),r>>=i,s-=i,bs=1<<32-Vr(e)+s|n<<s|r,Ts=A+t}else bs=1<<A|n<<s|r,Ts=t}function Sw(t){t.return!==null&&(pi(t,1),Ab(t,1,0))}function Rw(t){for(;t===Fh;)Fh=zo[--Wo],zo[Wo]=null,Uh=zo[--Wo],zo[Wo]=null;for(;t===Vi;)Vi=yr[--Br],yr[Br]=null,Ts=yr[--Br],yr[Br]=null,bs=yr[--Br],yr[Br]=null}var fr=null,dr=null,yt=!1,jr=null;function ib(t,e){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fr=t,dr=kA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:bs,overflow:Ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fr=t,dr=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Om(t){if(yt){var e=dr;if(e){var n=e;if(!mx(t,e)){if(Lm(t))throw Error(ee(418));e=kA(n.nextSibling);var r=fr;e&&mx(t,e)?ib(r,n):(t.flags=t.flags&-4097|2,yt=!1,fr=t)}}else{if(Lm(t))throw Error(ee(418));t.flags=t.flags&-4097|2,yt=!1,fr=t}}}function wx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fr=t}function od(t){if(t!==fr)return!1;if(!yt)return wx(t),yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=dr)){if(Lm(t))throw ob(),Error(ee(418));for(;e;)ib(t,e),e=kA(e.nextSibling)}if(wx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=kA(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=fr?kA(t.stateNode.nextSibling):null;return!0}function ob(){for(var t=dr;t;)t=kA(t.nextSibling)}function fa(){dr=fr=null,yt=!1}function Nw(t){jr===null?jr=[t]:jr.push(t)}var L2=Gs.ReactCurrentBatchConfig;function gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var o=s.refs;i===null?delete o[A]:o[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function ad(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vx(t){var e=t._init;return e(t._payload)}function ab(t){function e(y,B){if(t){var v=y.deletions;v===null?(y.deletions=[B],y.flags|=16):v.push(B)}}function n(y,B){if(!t)return null;for(;B!==null;)e(y,B),B=B.sibling;return null}function r(y,B){for(y=new Map;B!==null;)B.key!==null?y.set(B.key,B):y.set(B.index,B),B=B.sibling;return y}function s(y,B){return y=NA(y,B),y.index=0,y.sibling=null,y}function A(y,B,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<B?(y.flags|=2,B):v):(y.flags|=2,B)):(y.flags|=1048576,B)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function o(y,B,v,R){return B===null||B.tag!==6?(B=vp(v,y.mode,R),B.return=y,B):(B=s(B,v),B.return=y,B)}function a(y,B,v,R){var S=v.type;return S===Mo?d(y,B,v.props.children,R,v.key):B!==null&&(B.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===dA&&vx(S)===B.type)?(R=s(B,v.props),R.ref=gl(y,B,v),R.return=y,R):(R=th(v.type,v.key,v.props,null,y.mode,R),R.ref=gl(y,B,v),R.return=y,R)}function c(y,B,v,R){return B===null||B.tag!==4||B.stateNode.containerInfo!==v.containerInfo||B.stateNode.implementation!==v.implementation?(B=yp(v,y.mode,R),B.return=y,B):(B=s(B,v.children||[]),B.return=y,B)}function d(y,B,v,R,S){return B===null||B.tag!==7?(B=Ni(v,y.mode,R,S),B.return=y,B):(B=s(B,v),B.return=y,B)}function h(y,B,v){if(typeof B=="string"&&B!==""||typeof B=="number")return B=vp(""+B,y.mode,v),B.return=y,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Xu:return v=th(B.type,B.key,B.props,null,y.mode,v),v.ref=gl(y,null,B),v.return=y,v;case Oo:return B=yp(B,y.mode,v),B.return=y,B;case dA:var R=B._init;return h(y,R(B._payload),v)}if(kl(B)||cl(B))return B=Ni(B,y.mode,v,null),B.return=y,B;ad(y,B)}return null}function f(y,B,v,R){var S=B!==null?B.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:o(y,B,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:return v.key===S?a(y,B,v,R):null;case Oo:return v.key===S?c(y,B,v,R):null;case dA:return S=v._init,f(y,B,S(v._payload),R)}if(kl(v)||cl(v))return S!==null?null:d(y,B,v,R,null);ad(y,v)}return null}function w(y,B,v,R,S){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(v)||null,o(B,y,""+R,S);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Xu:return y=y.get(R.key===null?v:R.key)||null,a(B,y,R,S);case Oo:return y=y.get(R.key===null?v:R.key)||null,c(B,y,R,S);case dA:var N=R._init;return w(y,B,v,N(R._payload),S)}if(kl(R)||cl(R))return y=y.get(v)||null,d(B,y,R,S,null);ad(B,R)}return null}function p(y,B,v,R){for(var S=null,N=null,I=B,x=B=0,b=null;I!==null&&x<v.length;x++){I.index>x?(b=I,I=null):b=I.sibling;var k=f(y,I,v[x],R);if(k===null){I===null&&(I=b);break}t&&I&&k.alternate===null&&e(y,I),B=A(k,B,x),N===null?S=k:N.sibling=k,N=k,I=b}if(x===v.length)return n(y,I),yt&&pi(y,x),S;if(I===null){for(;x<v.length;x++)I=h(y,v[x],R),I!==null&&(B=A(I,B,x),N===null?S=I:N.sibling=I,N=I);return yt&&pi(y,x),S}for(I=r(y,I);x<v.length;x++)b=w(I,y,x,v[x],R),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?x:b.key),B=A(b,B,x),N===null?S=b:N.sibling=b,N=b);return t&&I.forEach(function(U){return e(y,U)}),yt&&pi(y,x),S}function C(y,B,v,R){var S=cl(v);if(typeof S!="function")throw Error(ee(150));if(v=S.call(v),v==null)throw Error(ee(151));for(var N=S=null,I=B,x=B=0,b=null,k=v.next();I!==null&&!k.done;x++,k=v.next()){I.index>x?(b=I,I=null):b=I.sibling;var U=f(y,I,k.value,R);if(U===null){I===null&&(I=b);break}t&&I&&U.alternate===null&&e(y,I),B=A(U,B,x),N===null?S=U:N.sibling=U,N=U,I=b}if(k.done)return n(y,I),yt&&pi(y,x),S;if(I===null){for(;!k.done;x++,k=v.next())k=h(y,k.value,R),k!==null&&(B=A(k,B,x),N===null?S=k:N.sibling=k,N=k);return yt&&pi(y,x),S}for(I=r(y,I);!k.done;x++,k=v.next())k=w(I,y,x,k.value,R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?x:k.key),B=A(k,B,x),N===null?S=k:N.sibling=k,N=k);return t&&I.forEach(function(D){return e(y,D)}),yt&&pi(y,x),S}function _(y,B,v,R){if(typeof v=="object"&&v!==null&&v.type===Mo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:e:{for(var S=v.key,N=B;N!==null;){if(N.key===S){if(S=v.type,S===Mo){if(N.tag===7){n(y,N.sibling),B=s(N,v.props.children),B.return=y,y=B;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===dA&&vx(S)===N.type){n(y,N.sibling),B=s(N,v.props),B.ref=gl(y,N,v),B.return=y,y=B;break e}n(y,N);break}else e(y,N);N=N.sibling}v.type===Mo?(B=Ni(v.props.children,y.mode,R,v.key),B.return=y,y=B):(R=th(v.type,v.key,v.props,null,y.mode,R),R.ref=gl(y,B,v),R.return=y,y=R)}return i(y);case Oo:e:{for(N=v.key;B!==null;){if(B.key===N)if(B.tag===4&&B.stateNode.containerInfo===v.containerInfo&&B.stateNode.implementation===v.implementation){n(y,B.sibling),B=s(B,v.children||[]),B.return=y,y=B;break e}else{n(y,B);break}else e(y,B);B=B.sibling}B=yp(v,y.mode,R),B.return=y,y=B}return i(y);case dA:return N=v._init,_(y,B,N(v._payload),R)}if(kl(v))return p(y,B,v,R);if(cl(v))return C(y,B,v,R);ad(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,B!==null&&B.tag===6?(n(y,B.sibling),B=s(B,v),B.return=y,y=B):(n(y,B),B=vp(v,y.mode,R),B.return=y,y=B),i(y)):n(y,B)}return _}var ga=ab(!0),lb=ab(!1),kh=ni(null),Qh=null,$o=null,Pw=null;function Dw(){Pw=$o=Qh=null}function Lw(t){var e=kh.current;mt(kh),t._currentValue=e}function Mm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ra(t,e){Qh=t,Pw=$o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Fr(t){var e=t._currentValue;if(Pw!==t)if(t={context:t,memoizedValue:e,next:null},$o===null){if(Qh===null)throw Error(ee(308));$o=t,Qh.dependencies={lanes:0,firstContext:t}}else $o=$o.next=t;return e}var Ti=null;function Ow(t){Ti===null?Ti=[t]:Ti.push(t)}function cb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ow(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ls(t,r)}function Ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hA=!1;function Mw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ub(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function QA(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ls(t,n)}return s=r.interleaved,s===null?(e.next=e,Ow(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ls(t,n)}function qd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iw(t,n)}}function yx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,A=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};A===null?s=A=i:A=A.next=i,n=n.next}while(n!==null);A===null?s=A=e:A=A.next=e}else s=A=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sh(t,e,n,r){var s=t.updateQueue;hA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?A=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(A!==null){var h=s.baseState;i=0,d=c=a=null,o=A;do{var f=o.lane,w=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,C=o;switch(f=e,w=n,C.tag){case 1:if(p=C.payload,typeof p=="function"){h=p.call(w,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=C.payload,f=typeof p=="function"?p.call(w,h,f):p,f==null)break e;h=Tt({},h,f);break e;case 2:hA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else w={eventTime:w,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=w,a=h):d=d.next=w,i|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Ki|=i,t.lanes=i,t.memoizedState=h}}function Bx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var du={},cs=ni(du),Tc=ni(du),Fc=ni(du);function Fi(t){if(t===du)throw Error(ee(174));return t}function jw(t,e){switch(dt(Fc,e),dt(Tc,t),dt(cs,du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ym(e,t)}mt(cs),dt(cs,e)}function pa(){mt(cs),mt(Tc),mt(Fc)}function db(t){Fi(Fc.current);var e=Fi(cs.current),n=ym(e,t.type);e!==n&&(dt(Tc,t),dt(cs,n))}function Vw(t){Tc.current===t&&(mt(cs),mt(Tc))}var _t=ni(0);function Rh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hp=[];function Hw(){for(var t=0;t<hp.length;t++)hp[t]._workInProgressVersionPrimary=null;hp.length=0}var Jd=Gs.ReactCurrentDispatcher,fp=Gs.ReactCurrentBatchConfig,Hi=0,It=null,Xt=null,an=null,Nh=!1,Zl=!1,Uc=0,O2=0;function En(){throw Error(ee(321))}function Kw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zr(t[n],e[n]))return!1;return!0}function Gw(t,e,n,r,s,A){if(Hi=A,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jd.current=t===null||t.memoizedState===null?H2:K2,t=n(r,s),Zl){A=0;do{if(Zl=!1,Uc=0,25<=A)throw Error(ee(301));A+=1,an=Xt=null,e.updateQueue=null,Jd.current=G2,t=n(r,s)}while(Zl)}if(Jd.current=Ph,e=Xt!==null&&Xt.next!==null,Hi=0,an=Xt=It=null,Nh=!1,e)throw Error(ee(300));return t}function zw(){var t=Uc!==0;return Uc=0,t}function Yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?It.memoizedState=an=t:an=an.next=t,an}function Ur(){if(Xt===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=an===null?It.memoizedState:an.next;if(e!==null)an=e,Xt=t;else{if(t===null)throw Error(ee(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},an===null?It.memoizedState=an=t:an=an.next=t}return an}function kc(t,e){return typeof e=="function"?e(t):e}function gp(t){var e=Ur(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Xt,s=r.baseQueue,A=n.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}r.baseQueue=s=A,n.pending=null}if(s!==null){A=s.next,r=r.baseState;var o=i=null,a=null,c=A;do{var d=c.lane;if((Hi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,It.lanes|=d,Ki|=d}c=c.next}while(c!==null&&c!==A);a===null?i=r:a.next=o,zr(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do A=s.lane,It.lanes|=A,Ki|=A,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pp(t){var e=Ur(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,A=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);zr(A,e.memoizedState)||(Yn=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),n.lastRenderedState=A}return[A,r]}function hb(){}function fb(t,e){var n=It,r=Ur(),s=e(),A=!zr(r.memoizedState,s);if(A&&(r.memoizedState=s,Yn=!0),r=r.queue,Ww(mb.bind(null,n,r,t),[t]),r.getSnapshot!==e||A||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,Qc(9,pb.bind(null,n,r,s,e),void 0,null),cn===null)throw Error(ee(349));Hi&30||gb(n,e,s)}return s}function gb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pb(t,e,n,r){e.value=n,e.getSnapshot=r,wb(e)&&vb(t)}function mb(t,e,n){return n(function(){wb(e)&&vb(t)})}function wb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zr(t,n)}catch{return!0}}function vb(t){var e=Ls(t,1);e!==null&&Hr(e,t,1,-1)}function xx(t){var e=Yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:t},e.queue=t,t=t.dispatch=V2.bind(null,It,t),[e.memoizedState,t]}function Qc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yb(){return Ur().memoizedState}function Xd(t,e,n,r){var s=Yr();It.flags|=t,s.memoizedState=Qc(1|e,n,void 0,r===void 0?null:r)}function kf(t,e,n,r){var s=Ur();r=r===void 0?null:r;var A=void 0;if(Xt!==null){var i=Xt.memoizedState;if(A=i.destroy,r!==null&&Kw(r,i.deps)){s.memoizedState=Qc(e,n,A,r);return}}It.flags|=t,s.memoizedState=Qc(1|e,n,A,r)}function Cx(t,e){return Xd(8390656,8,t,e)}function Ww(t,e){return kf(2048,8,t,e)}function Bb(t,e){return kf(4,2,t,e)}function xb(t,e){return kf(4,4,t,e)}function Cb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _b(t,e,n){return n=n!=null?n.concat([t]):null,kf(4,4,Cb.bind(null,e,t),n)}function $w(){}function Ib(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Eb(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bb(t,e,n){return Hi&21?(zr(n,e)||(n=QE(),It.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function M2(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=fp.transition;fp.transition={};try{t(!1),e()}finally{ot=n,fp.transition=r}}function Tb(){return Ur().memoizedState}function j2(t,e,n){var r=RA(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fb(t))Ub(e,n);else if(n=cb(t,e,n,r),n!==null){var s=jn();Hr(n,t,r,s),kb(n,e,r)}}function V2(t,e,n){var r=RA(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fb(t))Ub(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,o=A(i,n);if(s.hasEagerState=!0,s.eagerState=o,zr(o,i)){var a=e.interleaved;a===null?(s.next=s,Ow(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=cb(t,e,s,r),n!==null&&(s=jn(),Hr(n,t,r,s),kb(n,e,r))}}function Fb(t){var e=t.alternate;return t===It||e!==null&&e===It}function Ub(t,e){Zl=Nh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iw(t,n)}}var Ph={readContext:Fr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},H2={readContext:Fr,useCallback:function(t,e){return Yr().memoizedState=[t,e===void 0?null:e],t},useContext:Fr,useEffect:Cx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xd(4194308,4,Cb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xd(4,2,t,e)},useMemo:function(t,e){var n=Yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j2.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=Yr();return t={current:t},e.memoizedState=t},useState:xx,useDebugValue:$w,useDeferredValue:function(t){return Yr().memoizedState=t},useTransition:function(){var t=xx(!1),e=t[0];return t=M2.bind(null,t[1]),Yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,s=Yr();if(yt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),cn===null)throw Error(ee(349));Hi&30||gb(r,e,n)}s.memoizedState=n;var A={value:n,getSnapshot:e};return s.queue=A,Cx(mb.bind(null,r,A,t),[t]),r.flags|=2048,Qc(9,pb.bind(null,r,A,n,e),void 0,null),n},useId:function(){var t=Yr(),e=cn.identifierPrefix;if(yt){var n=Ts,r=bs;n=(r&~(1<<32-Vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=O2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K2={readContext:Fr,useCallback:Ib,useContext:Fr,useEffect:Ww,useImperativeHandle:_b,useInsertionEffect:Bb,useLayoutEffect:xb,useMemo:Eb,useReducer:gp,useRef:yb,useState:function(){return gp(kc)},useDebugValue:$w,useDeferredValue:function(t){var e=Ur();return bb(e,Xt.memoizedState,t)},useTransition:function(){var t=gp(kc)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:hb,useSyncExternalStore:fb,useId:Tb,unstable_isNewReconciler:!1},G2={readContext:Fr,useCallback:Ib,useContext:Fr,useEffect:Ww,useImperativeHandle:_b,useInsertionEffect:Bb,useLayoutEffect:xb,useMemo:Eb,useReducer:pp,useRef:yb,useState:function(){return pp(kc)},useDebugValue:$w,useDeferredValue:function(t){var e=Ur();return Xt===null?e.memoizedState=t:bb(e,Xt.memoizedState,t)},useTransition:function(){var t=pp(kc)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:hb,useSyncExternalStore:fb,useId:Tb,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qf={isMounted:function(t){return(t=t._reactInternals)?io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jn(),s=RA(t),A=Ss(r,s);A.payload=e,n!=null&&(A.callback=n),e=QA(t,A,s),e!==null&&(Hr(e,t,s,r),qd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jn(),s=RA(t),A=Ss(r,s);A.tag=1,A.payload=e,n!=null&&(A.callback=n),e=QA(t,A,s),e!==null&&(Hr(e,t,s,r),qd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),r=RA(t),s=Ss(n,r);s.tag=2,e!=null&&(s.callback=e),e=QA(t,s,r),e!==null&&(Hr(e,t,r,n),qd(e,t,r))}};function _x(t,e,n,r,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,A,i):e.prototype&&e.prototype.isPureReactComponent?!_c(n,r)||!_c(s,A):!0}function Qb(t,e,n){var r=!1,s=VA,A=e.contextType;return typeof A=="object"&&A!==null?A=Fr(A):(s=rr(e)?ji:Sn.current,r=e.contextTypes,A=(r=r!=null)?ha(t,s):VA),e=new e(n,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function Ix(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qf.enqueueReplaceState(e,e.state,null)}function Vm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Mw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Fr(A):(A=rr(e)?ji:Sn.current,s.context=ha(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(jm(t,e,A,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qf.enqueueReplaceState(s,s.state,null),Sh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ma(t,e){try{var n="",r=e;do n+=vS(r),r=r.return;while(r);var s=n}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function mp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z2=typeof WeakMap=="function"?WeakMap:Map;function Sb(t,e,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Lh||(Lh=!0,Zm=r),Hm(t,e)},n}function Rb(t,e,n){n=Ss(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Hm(t,e),typeof r!="function"&&(SA===null?SA=new Set([this]):SA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ex(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iR.bind(null,t,e,n),e.then(t,t))}function bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ss(-1,1),e.tag=2,QA(n,e,1))),n.lanes|=1),t)}var W2=Gs.ReactCurrentOwner,Yn=!1;function Ln(t,e,n,r){e.child=t===null?lb(e,null,n,r):ga(e,t.child,n,r)}function Fx(t,e,n,r,s){n=n.render;var A=e.ref;return ra(e,s),r=Gw(t,e,n,r,A,s),n=zw(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(yt&&n&&Sw(e),e.flags|=1,Ln(t,e,r,s),e.child)}function Ux(t,e,n,r,s){if(t===null){var A=n.type;return typeof A=="function"&&!nv(A)&&A.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=A,Nb(t,e,A,r,s)):(t=th(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(n=n.compare,n=n!==null?n:_c,n(i,r)&&t.ref===e.ref)return Os(t,e,s)}return e.flags|=1,t=NA(A,r),t.ref=e.ref,t.return=e,e.child=t}function Nb(t,e,n,r,s){if(t!==null){var A=t.memoizedProps;if(_c(A,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=A,(t.lanes&s)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,Os(t,e,s)}return Km(t,e,n,r,s)}function Pb(t,e,n){var r=e.pendingProps,s=r.children,A=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Jo,lr),lr|=n;else{if(!(n&1073741824))return t=A!==null?A.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dt(Jo,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=A!==null?A.baseLanes:n,dt(Jo,lr),lr|=r}else A!==null?(r=A.baseLanes|n,e.memoizedState=null):r=n,dt(Jo,lr),lr|=r;return Ln(t,e,s,n),e.child}function Db(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Km(t,e,n,r,s){var A=rr(n)?ji:Sn.current;return A=ha(e,A),ra(e,s),n=Gw(t,e,n,r,A,s),r=zw(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(yt&&r&&Sw(e),e.flags|=1,Ln(t,e,n,s),e.child)}function kx(t,e,n,r,s){if(rr(n)){var A=!0;Th(e)}else A=!1;if(ra(e,s),e.stateNode===null)Yd(t,e),Qb(e,n,r),Vm(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fr(c):(c=rr(n)?ji:Sn.current,c=ha(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&Ix(e,i,r,c),hA=!1;var f=e.memoizedState;i.state=f,Sh(e,r,i,s),a=e.memoizedState,o!==r||f!==a||nr.current||hA?(typeof d=="function"&&(jm(e,n,d,r),a=e.memoizedState),(o=hA||_x(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,ub(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Or(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Fr(a):(a=rr(n)?ji:Sn.current,a=ha(e,a));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Ix(e,i,r,a),hA=!1,f=e.memoizedState,i.state=f,Sh(e,r,i,s);var p=e.memoizedState;o!==h||f!==p||nr.current||hA?(typeof w=="function"&&(jm(e,n,w,r),p=e.memoizedState),(c=hA||_x(e,n,c,r,f,p,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Gm(t,e,n,r,A,s)}function Gm(t,e,n,r,s,A){Db(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&px(e,n,!1),Os(t,e,A);r=e.stateNode,W2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ga(e,t.child,null,A),e.child=ga(e,null,o,A)):Ln(t,e,o,A),e.memoizedState=r.state,s&&px(e,n,!0),e.child}function Lb(t){var e=t.stateNode;e.pendingContext?gx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gx(t,e.context,!1),jw(t,e.containerInfo)}function Qx(t,e,n,r,s){return fa(),Nw(s),e.flags|=256,Ln(t,e,n,r),e.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ob(t,e,n){var r=e.pendingProps,s=_t.current,A=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),dt(_t,s&1),t===null)return Om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,A?(r=e.mode,A=e.child,i={mode:"hidden",children:i},!(r&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Nf(i,r,0,null),t=Ni(t,r,n,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=Wm(n),e.memoizedState=zm,t):qw(e,i));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return $2(t,e,i,r,o,s,n);if(A){A=r.fallback,i=e.mode,s=t.child,o=s.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=NA(s,a),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?A=NA(o,A):(A=Ni(A,i,n,null),A.flags|=2),A.return=e,r.return=e,r.sibling=A,e.child=r,r=A,A=e.child,i=t.child.memoizedState,i=i===null?Wm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~n,e.memoizedState=zm,r}return A=t.child,t=A.sibling,r=NA(A,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qw(t,e){return e=Nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ld(t,e,n,r){return r!==null&&Nw(r),ga(e,t.child,null,n),t=qw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $2(t,e,n,r,s,A,i){if(n)return e.flags&256?(e.flags&=-257,r=mp(Error(ee(422))),ld(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=r.fallback,s=e.mode,r=Nf({mode:"visible",children:r.children},s,0,null),A=Ni(A,s,i,null),A.flags|=2,r.return=e,A.return=e,r.sibling=A,e.child=r,e.mode&1&&ga(e,t.child,null,i),e.child.memoizedState=Wm(i),e.memoizedState=zm,A);if(!(e.mode&1))return ld(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,A=Error(ee(419)),r=mp(A,r,void 0),ld(t,e,i,r)}if(o=(i&t.childLanes)!==0,Yn||o){if(r=cn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Ls(t,s),Hr(r,t,s,-1))}return tv(),r=mp(Error(ee(421))),ld(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oR.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,dr=kA(s.nextSibling),fr=e,yt=!0,jr=null,t!==null&&(yr[Br++]=bs,yr[Br++]=Ts,yr[Br++]=Vi,bs=t.id,Ts=t.overflow,Vi=e),e=qw(e,r.children),e.flags|=4096,e)}function Sx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mm(t.return,e,n)}function wp(t,e,n,r,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=r,A.tail=n,A.tailMode=s)}function Mb(t,e,n){var r=e.pendingProps,s=r.revealOrder,A=r.tail;if(Ln(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sx(t,n,e);else if(t.tag===19)Sx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dt(_t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Rh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wp(e,!1,s,n,A);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Rh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wp(e,!0,n,null,A);break;case"together":wp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Os(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=NA(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=NA(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function q2(t,e,n){switch(e.tag){case 3:Lb(e),fa();break;case 5:db(e);break;case 1:rr(e.type)&&Th(e);break;case 4:jw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;dt(kh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dt(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?Ob(t,e,n):(dt(_t,_t.current&1),t=Os(t,e,n),t!==null?t.sibling:null);dt(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),dt(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,Pb(t,e,n)}return Os(t,e,n)}var jb,$m,Vb,Hb;jb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};Vb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fi(cs.current);var A=null;switch(n){case"input":s=pm(t,s),r=pm(t,r),A=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),A=[];break;case"textarea":s=vm(t,s),r=vm(t,r),A=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eh)}Bm(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in r){var a=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(A||(A=[]),A.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(A=A||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(A=A||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&gt("scroll",t),A||o===a||(A=[])):(A=A||[]).push(c,a))}n&&(A=A||[]).push("style",n);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};Hb=function(t,e,n,r){n!==r&&(e.flags|=4)};function pl(t,e){if(!yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J2(t,e,n){var r=e.pendingProps;switch(Rw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return rr(e.type)&&bh(),bn(e),null;case 3:return r=e.stateNode,pa(),mt(nr),mt(Sn),Hw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(od(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jr!==null&&(n0(jr),jr=null))),$m(t,e),bn(e),null;case 5:Vw(e);var s=Fi(Fc.current);if(n=e.type,t!==null&&e.stateNode!=null)Vb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return bn(e),null}if(t=Fi(cs.current),od(e)){r=e.stateNode,n=e.type;var A=e.memoizedProps;switch(r[Zr]=e,r[bc]=A,t=(e.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<Sl.length;s++)gt(Sl[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":VB(r,A),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!A.multiple},gt("invalid",r);break;case"textarea":KB(r,A),gt("invalid",r)}Bm(n,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var o=A[i];i==="children"?typeof o=="string"?r.textContent!==o&&(A.suppressHydrationWarning!==!0&&id(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(A.suppressHydrationWarning!==!0&&id(r.textContent,o,t),s=["children",""+o]):mc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&gt("scroll",r)}switch(n){case"input":Yu(r),HB(r,A,!0);break;case"textarea":Yu(r),GB(r);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(r.onclick=Eh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Zr]=e,t[bc]=r,jb(t,e,!1,!1),e.stateNode=t;e:{switch(i=xm(n,r),n){case"dialog":gt("cancel",t),gt("close",t),s=r;break;case"iframe":case"object":case"embed":gt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sl.length;s++)gt(Sl[s],t);s=r;break;case"source":gt("error",t),s=r;break;case"img":case"image":case"link":gt("error",t),gt("load",t),s=r;break;case"details":gt("toggle",t),s=r;break;case"input":VB(t,r),s=pm(t,r),gt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),gt("invalid",t);break;case"textarea":KB(t,r),s=vm(t,r),gt("invalid",t);break;default:s=r}Bm(n,s),o=s;for(A in o)if(o.hasOwnProperty(A)){var a=o[A];A==="style"?yE(t,a):A==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&wE(t,a)):A==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&wc(t,a):typeof a=="number"&&wc(t,""+a):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(mc.hasOwnProperty(A)?a!=null&&A==="onScroll"&&gt("scroll",t):a!=null&&vw(t,A,a,i))}switch(n){case"input":Yu(t),HB(t,r,!1);break;case"textarea":Yu(t),GB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jA(r.value));break;case"select":t.multiple=!!r.multiple,A=r.value,A!=null?Zo(t,!!r.multiple,A,!1):r.defaultValue!=null&&Zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(t&&e.stateNode!=null)Hb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Fi(Fc.current),Fi(cs.current),od(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zr]=e,(A=r.nodeValue!==n)&&(t=fr,t!==null))switch(t.tag){case 3:id(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&id(r.nodeValue,n,(t.mode&1)!==0)}A&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zr]=e,e.stateNode=r}return bn(e),null;case 13:if(mt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yt&&dr!==null&&e.mode&1&&!(e.flags&128))ob(),fa(),e.flags|=98560,A=!1;else if(A=od(e),r!==null&&r.dehydrated!==null){if(t===null){if(!A)throw Error(ee(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(ee(317));A[Zr]=e}else fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),A=!1}else jr!==null&&(n0(jr),jr=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Zt===0&&(Zt=3):tv())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return pa(),$m(t,e),t===null&&Ic(e.stateNode.containerInfo),bn(e),null;case 10:return Lw(e.type._context),bn(e),null;case 17:return rr(e.type)&&bh(),bn(e),null;case 19:if(mt(_t),A=e.memoizedState,A===null)return bn(e),null;if(r=(e.flags&128)!==0,i=A.rendering,i===null)if(r)pl(A,!1);else{if(Zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Rh(t),i!==null){for(e.flags|=128,pl(A,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)A=n,t=r,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dt(_t,_t.current&1|2),e.child}t=t.sibling}A.tail!==null&&Mt()>wa&&(e.flags|=128,r=!0,pl(A,!1),e.lanes=4194304)}else{if(!r)if(t=Rh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!yt)return bn(e),null}else 2*Mt()-A.renderingStartTime>wa&&n!==1073741824&&(e.flags|=128,r=!0,pl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(n=A.last,n!==null?n.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=Mt(),e.sibling=null,n=_t.current,dt(_t,r?n&1|2:n&1),e):(bn(e),null);case 22:case 23:return ev(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function X2(t,e){switch(Rw(e),e.tag){case 1:return rr(e.type)&&bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pa(),mt(nr),mt(Sn),Hw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vw(e),null;case 13:if(mt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));fa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(_t),null;case 4:return pa(),null;case 10:return Lw(e.type._context),null;case 22:case 23:return ev(),null;case 24:return null;default:return null}}var cd=!1,Qn=!1,Y2=typeof WeakSet=="function"?WeakSet:Set,Be=null;function qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kt(t,e,r)}else n.current=null}function qm(t,e,n){try{n()}catch(r){kt(t,e,r)}}var Rx=!1;function Z2(t,e){if(Qm=Ch,t=$E(),Qw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,A=r.focusNode;r=r.focusOffset;try{n.nodeType,A.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==n||s!==0&&h.nodeType!==3||(o=i+s),h!==A||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===n&&++c===s&&(o=i),f===A&&++d===r&&(a=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sm={focusedElem:t,selectionRange:n},Ch=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var C=p.memoizedProps,_=p.memoizedState,y=e.stateNode,B=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:Or(e.type,C),_);y.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(R){kt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return p=Rx,Rx=!1,p}function ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&qm(e,n,A)}s=s.next}while(s!==r)}}function Sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kb(t){var e=t.alternate;e!==null&&(t.alternate=null,Kb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[bc],delete e[Pm],delete e[N2],delete e[P2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gb(t){return t.tag===5||t.tag===3||t.tag===4}function Nx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eh));else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}var fn=null,Mr=!1;function sA(t,e,n){for(n=n.child;n!==null;)zb(t,e,n),n=n.sibling}function zb(t,e,n){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(If,n)}catch{}switch(n.tag){case 5:Qn||qo(n,e);case 6:var r=fn,s=Mr;fn=null,sA(t,e,n),fn=r,Mr=s,fn!==null&&(Mr?(t=fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(Mr?(t=fn,n=n.stateNode,t.nodeType===8?up(t.parentNode,n):t.nodeType===1&&up(t,n),xc(t)):up(fn,n.stateNode));break;case 4:r=fn,s=Mr,fn=n.stateNode.containerInfo,Mr=!0,sA(t,e,n),fn=r,Mr=s;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&qm(n,e,i),s=s.next}while(s!==r)}sA(t,e,n);break;case 1:if(!Qn&&(qo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kt(n,e,o)}sA(t,e,n);break;case 21:sA(t,e,n);break;case 22:n.mode&1?(Qn=(r=Qn)||n.memoizedState!==null,sA(t,e,n),Qn=r):sA(t,e,n);break;default:sA(t,e,n)}}function Px(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Y2),e.forEach(function(r){var s=aR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var A=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:fn=o.stateNode,Mr=!1;break e;case 3:fn=o.stateNode.containerInfo,Mr=!0;break e;case 4:fn=o.stateNode.containerInfo,Mr=!0;break e}o=o.return}if(fn===null)throw Error(ee(160));zb(A,i,s),fn=null,Mr=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){kt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wb(e,t),e=e.sibling}function Wb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),Jr(t),r&4){try{ec(3,t,t.return),Sf(3,t)}catch(C){kt(t,t.return,C)}try{ec(5,t,t.return)}catch(C){kt(t,t.return,C)}}break;case 1:Dr(e,t),Jr(t),r&512&&n!==null&&qo(n,n.return);break;case 5:if(Dr(e,t),Jr(t),r&512&&n!==null&&qo(n,n.return),t.flags&32){var s=t.stateNode;try{wc(s,"")}catch(C){kt(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=n!==null?n.memoizedProps:A,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&A.type==="radio"&&A.name!=null&&gE(s,A),xm(o,i);var c=xm(o,A);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?yE(s,h):d==="dangerouslySetInnerHTML"?wE(s,h):d==="children"?wc(s,h):vw(s,d,h,c)}switch(o){case"input":mm(s,A);break;case"textarea":pE(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var w=A.value;w!=null?Zo(s,!!A.multiple,w,!1):f!==!!A.multiple&&(A.defaultValue!=null?Zo(s,!!A.multiple,A.defaultValue,!0):Zo(s,!!A.multiple,A.multiple?[]:"",!1))}s[bc]=A}catch(C){kt(t,t.return,C)}}break;case 6:if(Dr(e,t),Jr(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(C){kt(t,t.return,C)}}break;case 3:if(Dr(e,t),Jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(C){kt(t,t.return,C)}break;case 4:Dr(e,t),Jr(t);break;case 13:Dr(e,t),Jr(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(Yw=Mt())),r&4&&Px(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qn=(c=Qn)||d,Dr(e,t),Qn=c):Dr(e,t),Jr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Be=t,d=t.child;d!==null;){for(h=Be=d;Be!==null;){switch(f=Be,w=f.child,f.tag){case 0:case 11:case 14:case 15:ec(4,f,f.return);break;case 1:qo(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(C){kt(r,n,C)}}break;case 5:qo(f,f.return);break;case 22:if(f.memoizedState!==null){Lx(h);continue}}w!==null?(w.return=f,Be=w):Lx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=vE("display",i))}catch(C){kt(t,t.return,C)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(C){kt(t,t.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,t),Jr(t),r&4&&Px(t);break;case 21:break;default:Dr(e,t),Jr(t)}}function Jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gb(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wc(s,""),r.flags&=-33);var A=Nx(t);Ym(t,A,s);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Nx(t);Xm(t,o,i);break;default:throw Error(ee(161))}}catch(a){kt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eR(t,e,n){Be=t,$b(t)}function $b(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var s=Be,A=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||cd;if(!i){var o=s.alternate,a=o!==null&&o.memoizedState!==null||Qn;o=cd;var c=Qn;if(cd=i,(Qn=a)&&!c)for(Be=s;Be!==null;)i=Be,a=i.child,i.tag===22&&i.memoizedState!==null?Ox(s):a!==null?(a.return=i,Be=a):Ox(s);for(;A!==null;)Be=A,$b(A),A=A.sibling;Be=s,cd=o,Qn=c}Dx(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,Be=A):Dx(t)}}function Dx(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||Sf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&Bx(e,A,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Qn||e.flags&512&&Jm(e)}catch(f){kt(e,e.return,f)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Lx(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function Ox(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sf(4,e)}catch(a){kt(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){kt(e,s,a)}}var A=e.return;try{Jm(e)}catch(a){kt(e,A,a)}break;case 5:var i=e.return;try{Jm(e)}catch(a){kt(e,i,a)}}}catch(a){kt(e,e.return,a)}if(e===t){Be=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Be=o;break}Be=e.return}}var tR=Math.ceil,Dh=Gs.ReactCurrentDispatcher,Jw=Gs.ReactCurrentOwner,br=Gs.ReactCurrentBatchConfig,Xe=0,cn=null,$t=null,vn=0,lr=0,Jo=ni(0),Zt=0,Sc=null,Ki=0,Rf=0,Xw=0,tc=null,Xn=null,Yw=0,wa=1/0,Is=null,Lh=!1,Zm=null,SA=null,ud=!1,yA=null,Oh=0,nc=0,e0=null,Zd=-1,eh=0;function jn(){return Xe&6?Mt():Zd!==-1?Zd:Zd=Mt()}function RA(t){return t.mode&1?Xe&2&&vn!==0?vn&-vn:L2.transition!==null?(eh===0&&(eh=QE()),eh):(t=ot,t!==0||(t=window.event,t=t===void 0?16:OE(t.type)),t):1}function Hr(t,e,n,r){if(50<nc)throw nc=0,e0=null,Error(ee(185));lu(t,n,r),(!(Xe&2)||t!==cn)&&(t===cn&&(!(Xe&2)&&(Rf|=n),Zt===4&&pA(t,vn)),sr(t,r),n===1&&Xe===0&&!(e.mode&1)&&(wa=Mt()+500,Uf&&ri()))}function sr(t,e){var n=t.callbackNode;LS(t,e);var r=xh(t,t===cn?vn:0);if(r===0)n!==null&&$B(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$B(n),e===1)t.tag===0?D2(Mx.bind(null,t)):sb(Mx.bind(null,t)),S2(function(){!(Xe&6)&&ri()}),n=null;else{switch(SE(r)){case 1:n=_w;break;case 4:n=UE;break;case 16:n=Bh;break;case 536870912:n=kE;break;default:n=Bh}n=nT(n,qb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qb(t,e){if(Zd=-1,eh=0,Xe&6)throw Error(ee(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=xh(t,t===cn?vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mh(t,r);else{e=r;var s=Xe;Xe|=2;var A=Xb();(cn!==t||vn!==e)&&(Is=null,wa=Mt()+500,Ri(t,e));do try{sR();break}catch(o){Jb(t,o)}while(!0);Dw(),Dh.current=A,Xe=s,$t!==null?e=0:(cn=null,vn=0,e=Zt)}if(e!==0){if(e===2&&(s=bm(t),s!==0&&(r=s,e=t0(t,s))),e===1)throw n=Sc,Ri(t,0),pA(t,r),sr(t,Mt()),n;if(e===6)pA(t,r);else{if(s=t.current.alternate,!(r&30)&&!nR(s)&&(e=Mh(t,r),e===2&&(A=bm(t),A!==0&&(r=A,e=t0(t,A))),e===1))throw n=Sc,Ri(t,0),pA(t,r),sr(t,Mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:mi(t,Xn,Is);break;case 3:if(pA(t,r),(r&130023424)===r&&(e=Yw+500-Mt(),10<e)){if(xh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nm(mi.bind(null,t,Xn,Is),e);break}mi(t,Xn,Is);break;case 4:if(pA(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-Vr(r);A=1<<i,i=e[i],i>s&&(s=i),r&=~A}if(r=s,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tR(r/1960))-r,10<r){t.timeoutHandle=Nm(mi.bind(null,t,Xn,Is),r);break}mi(t,Xn,Is);break;case 5:mi(t,Xn,Is);break;default:throw Error(ee(329))}}}return sr(t,Mt()),t.callbackNode===n?qb.bind(null,t):null}function t0(t,e){var n=tc;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=Mh(t,e),t!==2&&(e=Xn,Xn=n,e!==null&&n0(e)),t}function n0(t){Xn===null?Xn=t:Xn.push.apply(Xn,t)}function nR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],A=s.getSnapshot;s=s.value;try{if(!zr(A(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pA(t,e){for(e&=~Xw,e&=~Rf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vr(e),r=1<<n;t[n]=-1,e&=~r}}function Mx(t){if(Xe&6)throw Error(ee(327));sa();var e=xh(t,0);if(!(e&1))return sr(t,Mt()),null;var n=Mh(t,e);if(t.tag!==0&&n===2){var r=bm(t);r!==0&&(e=r,n=t0(t,r))}if(n===1)throw n=Sc,Ri(t,0),pA(t,e),sr(t,Mt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Xn,Is),sr(t,Mt()),null}function Zw(t,e){var n=Xe;Xe|=1;try{return t(e)}finally{Xe=n,Xe===0&&(wa=Mt()+500,Uf&&ri())}}function Gi(t){yA!==null&&yA.tag===0&&!(Xe&6)&&sa();var e=Xe;Xe|=1;var n=br.transition,r=ot;try{if(br.transition=null,ot=1,t)return t()}finally{ot=r,br.transition=n,Xe=e,!(Xe&6)&&ri()}}function ev(){lr=Jo.current,mt(Jo)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Q2(n)),$t!==null)for(n=$t.return;n!==null;){var r=n;switch(Rw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:pa(),mt(nr),mt(Sn),Hw();break;case 5:Vw(r);break;case 4:pa();break;case 13:mt(_t);break;case 19:mt(_t);break;case 10:Lw(r.type._context);break;case 22:case 23:ev()}n=n.return}if(cn=t,$t=t=NA(t.current,null),vn=lr=e,Zt=0,Sc=null,Xw=Rf=Ki=0,Xn=tc=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,A=n.pending;if(A!==null){var i=A.next;A.next=s,r.next=i}n.pending=r}Ti=null}return t}function Jb(t,e){do{var n=$t;try{if(Dw(),Jd.current=Ph,Nh){for(var r=It.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nh=!1}if(Hi=0,an=Xt=It=null,Zl=!1,Uc=0,Jw.current=null,n===null||n.return===null){Zt=1,Sc=e,$t=null;break}e:{var A=t,i=n.return,o=n,a=e;if(e=vn,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=bx(i);if(w!==null){w.flags&=-257,Tx(w,i,o,A,e),w.mode&1&&Ex(A,c,e),e=w,a=c;var p=e.updateQueue;if(p===null){var C=new Set;C.add(a),e.updateQueue=C}else p.add(a);break e}else{if(!(e&1)){Ex(A,c,e),tv();break e}a=Error(ee(426))}}else if(yt&&o.mode&1){var _=bx(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Tx(_,i,o,A,e),Nw(ma(a,o));break e}}A=a=ma(a,o),Zt!==4&&(Zt=2),tc===null?tc=[A]:tc.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var y=Sb(A,a,e);yx(A,y);break e;case 1:o=a;var B=A.type,v=A.stateNode;if(!(A.flags&128)&&(typeof B.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(SA===null||!SA.has(v)))){A.flags|=65536,e&=-e,A.lanes|=e;var R=Rb(A,o,e);yx(A,R);break e}}A=A.return}while(A!==null)}Zb(n)}catch(S){e=S,$t===n&&n!==null&&($t=n=n.return);continue}break}while(!0)}function Xb(){var t=Dh.current;return Dh.current=Ph,t===null?Ph:t}function tv(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),cn===null||!(Ki&268435455)&&!(Rf&268435455)||pA(cn,vn)}function Mh(t,e){var n=Xe;Xe|=2;var r=Xb();(cn!==t||vn!==e)&&(Is=null,Ri(t,e));do try{rR();break}catch(s){Jb(t,s)}while(!0);if(Dw(),Xe=n,Dh.current=r,$t!==null)throw Error(ee(261));return cn=null,vn=0,Zt}function rR(){for(;$t!==null;)Yb($t)}function sR(){for(;$t!==null&&!FS();)Yb($t)}function Yb(t){var e=tT(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?Zb(t):$t=e,Jw.current=null}function Zb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=X2(n,e),n!==null){n.flags&=32767,$t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zt=6,$t=null;return}}else if(n=J2(n,e,lr),n!==null){$t=n;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Zt===0&&(Zt=5)}function mi(t,e,n){var r=ot,s=br.transition;try{br.transition=null,ot=1,AR(t,e,n,r)}finally{br.transition=s,ot=r}return null}function AR(t,e,n,r){do sa();while(yA!==null);if(Xe&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var A=n.lanes|n.childLanes;if(OS(t,A),t===cn&&($t=cn=null,vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ud||(ud=!0,nT(Bh,function(){return sa(),null})),A=(n.flags&15990)!==0,n.subtreeFlags&15990||A){A=br.transition,br.transition=null;var i=ot;ot=1;var o=Xe;Xe|=4,Jw.current=null,Z2(t,n),Wb(n,t),I2(Sm),Ch=!!Qm,Sm=Qm=null,t.current=n,eR(n),US(),Xe=o,ot=i,br.transition=A}else t.current=n;if(ud&&(ud=!1,yA=t,Oh=s),A=t.pendingLanes,A===0&&(SA=null),SS(n.stateNode),sr(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lh)throw Lh=!1,t=Zm,Zm=null,t;return Oh&1&&t.tag!==0&&sa(),A=t.pendingLanes,A&1?t===e0?nc++:(nc=0,e0=t):nc=0,ri(),null}function sa(){if(yA!==null){var t=SE(Oh),e=br.transition,n=ot;try{if(br.transition=null,ot=16>t?16:t,yA===null)var r=!1;else{if(t=yA,yA=null,Oh=0,Xe&6)throw Error(ee(331));var s=Xe;for(Xe|=4,Be=t.current;Be!==null;){var A=Be,i=A.child;if(Be.flags&16){var o=A.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(Be=c;Be!==null;){var d=Be;switch(d.tag){case 0:case 11:case 15:ec(8,d,A)}var h=d.child;if(h!==null)h.return=d,Be=h;else for(;Be!==null;){d=Be;var f=d.sibling,w=d.return;if(Kb(d),d===c){Be=null;break}if(f!==null){f.return=w,Be=f;break}Be=w}}}var p=A.alternate;if(p!==null){var C=p.child;if(C!==null){p.child=null;do{var _=C.sibling;C.sibling=null,C=_}while(C!==null)}}Be=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,Be=i;else e:for(;Be!==null;){if(A=Be,A.flags&2048)switch(A.tag){case 0:case 11:case 15:ec(9,A,A.return)}var y=A.sibling;if(y!==null){y.return=A.return,Be=y;break e}Be=A.return}}var B=t.current;for(Be=B;Be!==null;){i=Be;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Be=v;else e:for(i=B;Be!==null;){if(o=Be,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Sf(9,o)}}catch(S){kt(o,o.return,S)}if(o===i){Be=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,Be=R;break e}Be=o.return}}if(Xe=s,ri(),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(If,t)}catch{}r=!0}return r}finally{ot=n,br.transition=e}}return!1}function jx(t,e,n){e=ma(n,e),e=Sb(t,e,1),t=QA(t,e,1),e=jn(),t!==null&&(lu(t,1,e),sr(t,e))}function kt(t,e,n){if(t.tag===3)jx(t,t,n);else for(;e!==null;){if(e.tag===3){jx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(SA===null||!SA.has(r))){t=ma(n,t),t=Rb(e,t,1),e=QA(e,t,1),t=jn(),e!==null&&(lu(e,1,t),sr(e,t));break}}e=e.return}}function iR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,cn===t&&(vn&n)===n&&(Zt===4||Zt===3&&(vn&130023424)===vn&&500>Mt()-Yw?Ri(t,0):Xw|=n),sr(t,e)}function eT(t,e){e===0&&(t.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var n=jn();t=Ls(t,e),t!==null&&(lu(t,e,n),sr(t,n))}function oR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eT(t,n)}function aR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),eT(t,n)}var tT;tT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,q2(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,yt&&e.flags&1048576&&Ab(e,Uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yd(t,e),t=e.pendingProps;var s=ha(e,Sn.current);ra(e,n),s=Gw(null,e,r,t,s,n);var A=zw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(A=!0,Th(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mw(e),s.updater=Qf,e.stateNode=s,s._reactInternals=e,Vm(e,r,t,n),e=Gm(null,e,r,!0,A,n)):(e.tag=0,yt&&A&&Sw(e),Ln(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cR(r),t=Or(r,t),s){case 0:e=Km(null,e,r,t,n);break e;case 1:e=kx(null,e,r,t,n);break e;case 11:e=Fx(null,e,r,t,n);break e;case 14:e=Ux(null,e,r,Or(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),Km(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),kx(t,e,r,s,n);case 3:e:{if(Lb(e),t===null)throw Error(ee(387));r=e.pendingProps,A=e.memoizedState,s=A.element,ub(t,e),Sh(e,r,null,n);var i=e.memoizedState;if(r=i.element,A.isDehydrated)if(A={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=ma(Error(ee(423)),e),e=Qx(t,e,r,n,s);break e}else if(r!==s){s=ma(Error(ee(424)),e),e=Qx(t,e,r,n,s);break e}else for(dr=kA(e.stateNode.containerInfo.firstChild),fr=e,yt=!0,jr=null,n=lb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fa(),r===s){e=Os(t,e,n);break e}Ln(t,e,r,n)}e=e.child}return e;case 5:return db(e),t===null&&Om(e),r=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,Rm(r,s)?i=null:A!==null&&Rm(r,A)&&(e.flags|=32),Db(t,e),Ln(t,e,i,n),e.child;case 6:return t===null&&Om(e),null;case 13:return Ob(t,e,n);case 4:return jw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ga(e,null,r,n):Ln(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),Fx(t,e,r,s,n);case 7:return Ln(t,e,e.pendingProps,n),e.child;case 8:return Ln(t,e,e.pendingProps.children,n),e.child;case 12:return Ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,dt(kh,r._currentValue),r._currentValue=i,A!==null)if(zr(A.value,i)){if(A.children===s.children&&!nr.current){e=Os(t,e,n);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var o=A.dependencies;if(o!==null){i=A.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(A.tag===1){a=Ss(-1,n&-n),a.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}A.lanes|=n,a=A.alternate,a!==null&&(a.lanes|=n),Mm(A.return,n,e),o.lanes|=n;break}a=a.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(ee(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Mm(i,n,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}Ln(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ra(e,n),s=Fr(s),r=r(s),e.flags|=1,Ln(t,e,r,n),e.child;case 14:return r=e.type,s=Or(r,e.pendingProps),s=Or(r.type,s),Ux(t,e,r,s,n);case 15:return Nb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),Yd(t,e),e.tag=1,rr(r)?(t=!0,Th(e)):t=!1,ra(e,n),Qb(e,r,s),Vm(e,r,s,n),Gm(null,e,r,!0,t,n);case 19:return Mb(t,e,n);case 22:return Pb(t,e,n)}throw Error(ee(156,e.tag))};function nT(t,e){return FE(t,e)}function lR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,e,n,r){return new lR(t,e,n,r)}function nv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cR(t){if(typeof t=="function")return nv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bw)return 11;if(t===xw)return 14}return 2}function NA(t,e){var n=t.alternate;return n===null?(n=Cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function th(t,e,n,r,s,A){var i=2;if(r=t,typeof t=="function")nv(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Mo:return Ni(n.children,s,A,e);case yw:i=8,s|=8;break;case dm:return t=Cr(12,n,e,s|2),t.elementType=dm,t.lanes=A,t;case hm:return t=Cr(13,n,e,s),t.elementType=hm,t.lanes=A,t;case fm:return t=Cr(19,n,e,s),t.elementType=fm,t.lanes=A,t;case dE:return Nf(n,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cE:i=10;break e;case uE:i=9;break e;case Bw:i=11;break e;case xw:i=14;break e;case dA:i=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Cr(i,n,e,s),e.elementType=t,e.type=r,e.lanes=A,e}function Ni(t,e,n,r){return t=Cr(7,t,r,e),t.lanes=n,t}function Nf(t,e,n,r){return t=Cr(22,t,r,e),t.elementType=dE,t.lanes=n,t.stateNode={isHidden:!1},t}function vp(t,e,n){return t=Cr(6,t,null,e),t.lanes=n,t}function yp(t,e,n){return e=Cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ep(0),this.expirationTimes=ep(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ep(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rv(t,e,n,r,s,A,i,o,a){return t=new uR(t,e,n,o,a),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Cr(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mw(A),t}function dR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rT(t){if(!t)return VA;t=t._reactInternals;e:{if(io(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(rr(n))return rb(t,n,e)}return e}function sT(t,e,n,r,s,A,i,o,a){return t=rv(n,r,!0,t,s,A,i,o,a),t.context=rT(null),n=t.current,r=jn(),s=RA(n),A=Ss(r,s),A.callback=e??null,QA(n,A,s),t.current.lanes=s,lu(t,s,r),sr(t,r),t}function Pf(t,e,n,r){var s=e.current,A=jn(),i=RA(s);return n=rT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ss(A,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=QA(s,e,i),t!==null&&(Hr(t,s,i,A),qd(t,s,i)),i}function jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sv(t,e){Vx(t,e),(t=t.alternate)&&Vx(t,e)}function hR(){return null}var AT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Av(t){this._internalRoot=t}Df.prototype.render=Av.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Pf(t,e,null,null)};Df.prototype.unmount=Av.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Pf(null,t,null,null)}),e[Ds]=null}};function Df(t){this._internalRoot=t}Df.prototype.unstable_scheduleHydration=function(t){if(t){var e=PE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gA.length&&e!==0&&e<gA[n].priority;n++);gA.splice(n,0,t),n===0&&LE(t)}};function iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function fR(t,e,n,r,s){if(s){if(typeof r=="function"){var A=r;r=function(){var c=jh(i);A.call(c)}}var i=sT(e,r,t,0,null,!1,!1,"",Hx);return t._reactRootContainer=i,t[Ds]=i.current,Ic(t.nodeType===8?t.parentNode:t),Gi(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=jh(a);o.call(c)}}var a=rv(t,0,!1,null,null,!1,!1,"",Hx);return t._reactRootContainer=a,t[Ds]=a.current,Ic(t.nodeType===8?t.parentNode:t),Gi(function(){Pf(e,a,n,r)}),a}function Of(t,e,n,r,s){var A=n._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var o=s;s=function(){var a=jh(i);o.call(a)}}Pf(e,i,t,s)}else i=fR(n,e,t,s,r);return jh(i)}RE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(Iw(e,n|1),sr(e,Mt()),!(Xe&6)&&(wa=Mt()+500,ri()))}break;case 13:Gi(function(){var r=Ls(t,1);if(r!==null){var s=jn();Hr(r,t,1,s)}}),sv(t,1)}};Ew=function(t){if(t.tag===13){var e=Ls(t,134217728);if(e!==null){var n=jn();Hr(e,t,134217728,n)}sv(t,134217728)}};NE=function(t){if(t.tag===13){var e=RA(t),n=Ls(t,e);if(n!==null){var r=jn();Hr(n,t,e,r)}sv(t,e)}};PE=function(){return ot};DE=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};_m=function(t,e,n){switch(e){case"input":if(mm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ff(r);if(!s)throw Error(ee(90));fE(r),mm(r,s)}}}break;case"textarea":pE(t,n);break;case"select":e=n.value,e!=null&&Zo(t,!!n.multiple,e,!1)}};CE=Zw;_E=Gi;var gR={usingClientEntryPoint:!1,Events:[uu,Ko,Ff,BE,xE,Zw]},ml={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pR={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bE(t),t===null?null:t.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||hR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{If=dd.inject(pR),ls=dd}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(e))throw Error(ee(200));return dR(t,e,null,n)};mr.createRoot=function(t,e){if(!iv(t))throw Error(ee(299));var n=!1,r="",s=AT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=rv(t,1,!1,null,null,n,!1,r,s),t[Ds]=e.current,Ic(t.nodeType===8?t.parentNode:t),new Av(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=bE(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return Gi(t)};mr.hydrate=function(t,e,n){if(!Lf(e))throw Error(ee(200));return Of(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!iv(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,A="",i=AT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(A=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=sT(e,null,t,1,n??null,s,!1,A,i),t[Ds]=e.current,Ic(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Df(e)};mr.render=function(t,e,n){if(!Lf(e))throw Error(ee(200));return Of(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!Lf(t))throw Error(ee(40));return t._reactRootContainer?(Gi(function(){Of(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};mr.unstable_batchedUpdates=Zw;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Of(t,e,n,!1,r)};mr.version="18.3.1-next-f1338f8080-20240426";function iT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iT)}catch(t){console.error(t)}}iT(),iE.exports=mr;var mR=iE.exports,Kx=mR;cm.createRoot=Kx.createRoot,cm.hydrateRoot=Kx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(this,arguments)}var BA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(BA||(BA={}));const Gx="popstate";function wR(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:o="",hash:a=""}=oo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),r0("",{pathname:i,search:o,hash:a},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function n(s,A){let i=s.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=s.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof A=="string"?A:Vh(A))}function r(s,A){Mf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return yR(e,n,r,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vR(){return Math.random().toString(36).substr(2,8)}function zx(t,e){return{usr:t.state,key:t.key,idx:e}}function r0(t,e,n,r){return n===void 0&&(n=null),Rc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oo(e):e,{state:n,key:e&&e.key||r||vR()})}function Vh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:A=!1}=r,i=s.history,o=BA.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Rc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=BA.Pop;let _=d(),y=_==null?null:_-c;c=_,a&&a({action:o,location:C.location,delta:y})}function f(_,y){o=BA.Push;let B=r0(C.location,_,y);n&&n(B,_),c=d()+1;let v=zx(B,c),R=C.createHref(B);try{i.pushState(v,"",R)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(R)}A&&a&&a({action:o,location:C.location,delta:1})}function w(_,y){o=BA.Replace;let B=r0(C.location,_,y);n&&n(B,_),c=d();let v=zx(B,c),R=C.createHref(B);i.replaceState(v,"",R),A&&a&&a({action:o,location:C.location,delta:0})}function p(_){let y=s.location.origin!=="null"?s.location.origin:s.location.href,B=typeof _=="string"?_:Vh(_);return B=B.replace(/ $/,"%20"),Et(y,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,y)}let C={get action(){return o},get location(){return t(s,i)},listen(_){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Gx,h),a=_,()=>{s.removeEventListener(Gx,h),a=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let y=p(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:w,go(_){return i.go(_)}};return C}var Wx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wx||(Wx={}));function BR(t,e,n){return n===void 0&&(n="/"),xR(t,e,n)}function xR(t,e,n,r){let s=typeof e=="string"?oo(e):e,A=va(s.pathname||"/",n);if(A==null)return null;let i=oT(t);CR(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=RR(A);o=QR(i[a],c)}return o}function oT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(A,i,o)=>{let a={relativePath:o===void 0?A.path||"":o,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};a.relativePath.startsWith("/")&&(Et(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=PA([r,a.relativePath]),d=n.concat(a);A.children&&A.children.length>0&&(Et(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),oT(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:UR(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var o;if(A.path===""||!((o=A.path)!=null&&o.includes("?")))s(A,i);else for(let a of aT(A.path))s(A,i,a)}),e}function aT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),A=n.replace(/\?$/,"");if(r.length===0)return s?[A,""]:[A];let i=aT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?A:[A,a].join("/"))),s&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function CR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _R=/^:[\w-]+$/,IR=3,ER=2,bR=1,TR=10,FR=-2,$x=t=>t==="*";function UR(t,e){let n=t.split("/"),r=n.length;return n.some($x)&&(r+=FR),e&&(r+=ER),n.filter(s=>!$x(s)).reduce((s,A)=>s+(_R.test(A)?IR:A===""?bR:TR),r)}function kR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function QR(t,e,n){let{routesMeta:r}=t,s={},A="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=s0({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:PA([A,h.pathname]),pathnameBase:OR(PA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=PA([A,h.pathnameBase]))}return i}function s0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let C=o[h]||"";i=A.slice(0,A.length-C.length).replace(/(.)\/+$/,"$1")}const p=o[h];return w&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function SR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function RR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const NR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PR=t=>NR.test(t);function DR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?oo(t):t,A;if(n)if(PR(n))A=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Mf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?A=qx(n.substring(1),"/"):A=qx(n,e)}else A=e;return{pathname:A,search:MR(r),hash:jR(s)}}function qx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Bp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ov(t,e){let n=LR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function av(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=oo(t):(s=Rc({},t),Et(!s.pathname||!s.pathname.includes("?"),Bp("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),Bp("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),Bp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=DR(s,o),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const PA=t=>t.join("/").replace(/\/\/+/g,"/"),OR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lT=["post","put","patch","delete"];new Set(lT);const HR=["get",...lT];new Set(HR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const jf=Q.createContext(null),cT=Q.createContext(null),zs=Q.createContext(null),Vf=Q.createContext(null),Ws=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),uT=Q.createContext(null);function KR(t,e){let{relative:n}=e===void 0?{}:e;ja()||Et(!1);let{basename:r,navigator:s}=Q.useContext(zs),{hash:A,pathname:i,search:o}=Hf(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:PA([r,i])),s.createHref({pathname:a,search:o,hash:A})}function ja(){return Q.useContext(Vf)!=null}function si(){return ja()||Et(!1),Q.useContext(Vf).location}function dT(t){Q.useContext(zs).static||Q.useLayoutEffect(t)}function hu(){let{isDataRoute:t}=Q.useContext(Ws);return t?AN():GR()}function GR(){ja()||Et(!1);let t=Q.useContext(jf),{basename:e,future:n,navigator:r}=Q.useContext(zs),{matches:s}=Q.useContext(Ws),{pathname:A}=si(),i=JSON.stringify(ov(s,n.v7_relativeSplatPath)),o=Q.useRef(!1);return dT(()=>{o.current=!0}),Q.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=av(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:PA([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,A,t])}const zR=Q.createContext(null);function WR(t){let e=Q.useContext(Ws).outlet;return e&&Q.createElement(zR.Provider,{value:t},e)}function Hf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Q.useContext(zs),{matches:s}=Q.useContext(Ws),{pathname:A}=si(),i=JSON.stringify(ov(s,r.v7_relativeSplatPath));return Q.useMemo(()=>av(t,JSON.parse(i),A,n==="path"),[t,i,A,n])}function $R(t,e){return qR(t,e)}function qR(t,e,n,r){ja()||Et(!1);let{navigator:s}=Q.useContext(zs),{matches:A}=Q.useContext(Ws),i=A[A.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=si(),d;if(e){var h;let _=typeof e=="string"?oo(e):e;a==="/"||(h=_.pathname)!=null&&h.startsWith(a)||Et(!1),d=_}else d=c;let f=d.pathname||"/",w=f;if(a!=="/"){let _=a.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=BR(t,{pathname:w}),C=eN(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:PA([a,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:PA([a,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),A,n,r);return e&&C?Q.createElement(Vf.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:BA.Pop}},C):C}function JR(){let t=sN(),e=VR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),n?Q.createElement("pre",{style:s},n):null,null)}const XR=Q.createElement(JR,null);class YR extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Q.createElement(Ws.Provider,{value:this.props.routeContext},Q.createElement(uT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZR(t){let{routeContext:e,match:n,children:r}=t,s=Q.useContext(jf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),Q.createElement(Ws.Provider,{value:e},r)}function eN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var A;if(!n)return null;if(n.errors)t=n.matches;else if((A=r)!=null&&A.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Et(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:w}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||p){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,p=!1,C=null,_=null;n&&(w=o&&h.route.id?o[h.route.id]:void 0,C=h.route.errorElement||XR,a&&(c<0&&f===0?(iN("route-fallback"),p=!0,_=null):c===f&&(p=!0,_=h.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,f+1)),B=()=>{let v;return w?v=C:p?v=_:h.route.Component?v=Q.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,Q.createElement(ZR,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?Q.createElement(YR,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:B(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):B()},null)}var hT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hT||{}),fT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fT||{});function tN(t){let e=Q.useContext(jf);return e||Et(!1),e}function nN(t){let e=Q.useContext(cT);return e||Et(!1),e}function rN(t){let e=Q.useContext(Ws);return e||Et(!1),e}function gT(t){let e=rN(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function sN(){var t;let e=Q.useContext(uT),n=nN(),r=gT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function AN(){let{router:t}=tN(hT.UseNavigateStable),e=gT(fT.UseNavigateStable),n=Q.useRef(!1);return dT(()=>{n.current=!0}),Q.useCallback(function(s,A){A===void 0&&(A={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Nc({fromRouteId:e},A)))},[t,e])}const Jx={};function iN(t,e,n){Jx[t]||(Jx[t]=!0)}function oN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Hh(t){let{to:e,replace:n,state:r,relative:s}=t;ja()||Et(!1);let{future:A,static:i}=Q.useContext(zs),{matches:o}=Q.useContext(Ws),{pathname:a}=si(),c=hu(),d=av(e,ov(o,A.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(d);return Q.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function aN(t){return WR(t.context)}function ir(t){Et(!1)}function lN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=BA.Pop,navigator:A,static:i=!1,future:o}=t;ja()&&Et(!1);let a=e.replace(/^\/*/,"/"),c=Q.useMemo(()=>({basename:a,navigator:A,static:i,future:Nc({v7_relativeSplatPath:!1},o)}),[a,o,A,i]);typeof r=="string"&&(r=oo(r));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:p="default"}=r,C=Q.useMemo(()=>{let _=va(d,a);return _==null?null:{location:{pathname:_,search:h,hash:f,state:w,key:p},navigationType:s}},[a,d,h,f,w,p,s]);return C==null?null:Q.createElement(zs.Provider,{value:c},Q.createElement(Vf.Provider,{children:n,value:C}))}function cN(t){let{children:e,location:n}=t;return $R(A0(e),n)}new Promise(()=>{});function A0(t,e){e===void 0&&(e=[]);let n=[];return Q.Children.forEach(t,(r,s)=>{if(!Q.isValidElement(r))return;let A=[...e,s];if(r.type===Q.Fragment){n.push.apply(n,A0(r.props.children,A));return}r.type!==ir&&Et(!1),!r.props.index||!r.props.children||Et(!1);let i={id:r.props.id||A.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=A0(r.props.children,A)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(this,arguments)}function pT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,A;for(A=0;A<r.length;A++)s=r[A],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dN(t,e){return t.button===0&&(!e||e==="_self")&&!uN(t)}function i0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function hN(t,e){let n=i0(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(A=>{n.append(s,A)})}),n}const fN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pN="6";try{window.__reactRouterVersion=pN}catch{}const mN=Q.createContext({isTransitioning:!1}),wN="startTransition",Xx=iS[wN];function vN(t){let{basename:e,children:n,future:r,window:s}=t,A=Q.useRef();A.current==null&&(A.current=wR({window:s,v5Compat:!0}));let i=A.current,[o,a]=Q.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=Q.useCallback(h=>{c&&Xx?Xx(()=>a(h)):a(h)},[a,c]);return Q.useLayoutEffect(()=>i.listen(d),[i,d]),Q.useEffect(()=>oN(r),[r]),Q.createElement(lN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const yN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xN=Q.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:A,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=pT(e,fN),{basename:w}=Q.useContext(zs),p,C=!1;if(typeof c=="string"&&BN.test(c)&&(p=c,yN))try{let v=new URL(window.location.href),R=c.startsWith("//")?new URL(v.protocol+c):new URL(c),S=va(R.pathname,w);R.origin===v.origin&&S!=null?c=S+R.search+R.hash:C=!0}catch{}let _=KR(c,{relative:s}),y=IN(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:s,viewTransition:h});function B(v){r&&r(v),v.defaultPrevented||y(v)}return Q.createElement("a",Kh({},f,{href:p||_,onClick:C||A?r:B,ref:n,target:a}))}),CN=Q.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:A="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=pT(e,gN),f=Hf(a,{relative:h.relative}),w=si(),p=Q.useContext(cT),{navigator:C,basename:_}=Q.useContext(zs),y=p!=null&&bN(f)&&c===!0,B=C.encodeLocation?C.encodeLocation(f).pathname:f.pathname,v=w.pathname,R=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(v=v.toLowerCase(),R=R?R.toLowerCase():null,B=B.toLowerCase()),R&&_&&(R=va(R,_)||R);const S=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let N=v===B||!i&&v.startsWith(B)&&v.charAt(S)==="/",I=R!=null&&(R===B||!i&&R.startsWith(B)&&R.charAt(B.length)==="/"),x={isActive:N,isPending:I,isTransitioning:y},b=N?r:void 0,k;typeof A=="function"?k=A(x):k=[A,N?"active":null,I?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(x):o;return Q.createElement(xN,Kh({},h,{"aria-current":b,className:k,ref:n,style:U,to:a,viewTransition:c}),typeof d=="function"?d(x):d)});var o0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(o0||(o0={}));var Yx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yx||(Yx={}));function _N(t){let e=Q.useContext(jf);return e||Et(!1),e}function IN(t,e){let{target:n,replace:r,state:s,preventScrollReset:A,relative:i,viewTransition:o}=e===void 0?{}:e,a=hu(),c=si(),d=Hf(t,{relative:i});return Q.useCallback(h=>{if(dN(h,n)){h.preventDefault();let f=r!==void 0?r:Vh(c)===Vh(d);a(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:o})}},[c,a,d,r,s,n,t,A,i,o])}function EN(t){let e=Q.useRef(i0(t)),n=Q.useRef(!1),r=si(),s=Q.useMemo(()=>hN(r.search,n.current?null:e.current),[r.search]),A=hu(),i=Q.useCallback((o,a)=>{const c=i0(typeof o=="function"?o(s):o);n.current=!0,A("?"+c,a)},[A,s]);return[s,i]}function bN(t,e){e===void 0&&(e={});let n=Q.useContext(mN);n==null&&Et(!1);let{basename:r}=_N(o0.useViewTransitionState),s=Hf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let A=va(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=va(n.nextLocation.pathname,r)||n.nextLocation.pathname;return s0(s.pathname,i)!=null||s0(s.pathname,A)!=null}var ce=(t=>(t.First="1 ",t.Second="2 ",t))(ce||{}),ur=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ur||{});const Un=["","","","",""],As={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Zx=["","","/","","","",""," "],mT=[{shift:ce.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ce.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ce.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ce.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ce.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ce.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ce.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ce.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ce.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ce.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ce.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ce.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ce.Second,period:6,start:"18:50",end:"19:35",day:"default"}],zt={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ce.First,studentsCount:25},{id:"c2",name:"6",shift:ce.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],substitutions:[],bellSchedule:mT,requests:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}};var eC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[n++];e[r++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[n++],i=t[n++],o=t[n++],a=((s&7)<<18|(A&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const A=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},vT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,o=i?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=A>>2,h=(A&3)<<4|o>>4;let f=(o&15)<<2|c>>6,w=c&63;a||(w=64,i||(f=64)),r.push(n[d],n[h],n[f],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const A=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,A==null||o==null||c==null||h==null)throw new FN;const f=A<<2|o>>4;if(r.push(f),c!==64){const w=o<<4&240|c>>2;if(r.push(w),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UN=function(t){const e=wT(t);return vT.encodeByteArray(e,!0)},Gh=function(t){return UN(t).replace(/\./g,"")},yT=function(t){try{return vT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!kN(n)||(t[n]=zh(t[n],e[n]));return t}function kN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=()=>BT().__FIREBASE_DEFAULTS__,SN=()=>{if(typeof process>"u"||typeof eC>"u")return;const t=eC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yT(t[1]);return e&&JSON.parse(e)},lv=()=>{try{return QN()||SN()||RN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xT=()=>{var t;return(t=lv())===null||t===void 0?void 0:t.config},NN=t=>{var e;return(e=lv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gh(JSON.stringify(n)),Gh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function cv(){var t;const e=(t=lv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ON(){return typeof window<"u"||CT()}function CT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function MN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _T(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IT(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ET(){return!cv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pc(){try{return typeof indexedDB=="object"}catch{return!1}}function jN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VN,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?HN(A,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Vn(s,o,r)}}function HN(t,e){return t.replace(KN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const KN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function GN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const A=t[s],i=e[s];if(nC(A)&&nC(i)){if(!Dc(A,i))return!1}else if(A!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,A]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Rl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bT(t,e){const n=new zN(t,e);return n.subscribe.bind(n)}class zN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xp),s.error===void 0&&(s.error=xp),s.complete===void 0&&(s.complete=xp);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JN(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const A=this.getOrInitializeService({instanceIdentifier:s});r.resolve(A)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[A,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(A);r===o&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),A=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qN(t){return t===wi?void 0:t}function JN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $N(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=[];var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const FT={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},XN=je.INFO,YN={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ZN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Kf=class{constructor(e){this.name=e,this._logLevel=XN,this._logHandler=ZN,this._userLogHandler=null,dv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}};function eP(t){dv.forEach(e=>{e.setLogLevel(t)})}function tP(t,e){for(const n of dv){let r=null;e&&e.level&&(r=FT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,A,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");A>=(r??s.logLevel)&&t({level:je[A].toLowerCase(),message:o,args:i,type:s.name})}}}const nP=(t,e)=>e.some(n=>t instanceof n);let rC,sC;function rP(){return rC||(rC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sP(){return sC||(sC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UT=new WeakMap,a0=new WeakMap,kT=new WeakMap,Cp=new WeakMap,hv=new WeakMap;function AP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{n(DA(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&UT.set(n,t)}).catch(()=>{}),hv.set(e,t),e}function iP(t){if(a0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});a0.set(t,e)}let l0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return a0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return DA(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oP(t){l0=t(l0)}function aP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_p(this),e,...n);return kT.set(r,e.sort?e.sort():[e]),DA(r)}:sP().includes(t)?function(...e){return t.apply(_p(this),e),DA(UT.get(this))}:function(...e){return DA(t.apply(_p(this),e))}}function lP(t){return typeof t=="function"?aP(t):(t instanceof IDBTransaction&&iP(t),nP(t,rP())?new Proxy(t,l0):t)}function DA(t){if(t instanceof IDBRequest)return AP(t);if(Cp.has(t))return Cp.get(t);const e=lP(t);return e!==t&&(Cp.set(t,e),hv.set(e,t)),e}const _p=t=>hv.get(t);function cP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),o=DA(i);return r&&i.addEventListener("upgradeneeded",a=>{r(DA(i.result),a.oldVersion,a.newVersion,DA(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{A&&a.addEventListener("close",()=>A()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const uP=["get","getKey","getAll","getAllKeys","count"],dP=["put","add","delete","clear"],Ip=new Map;function AC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=dP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uP.includes(n)))return;const A=async function(i,...o){const a=this.transaction(i,s?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&a.done]))[0]};return Ip.set(e,A),A}oP(t=>({...t,get:(e,n,r)=>AC(e,n)||t.get(e,n,r),has:(e,n)=>!!AC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",c0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Kf("@firebase/app"),gP="@firebase/app-compat",pP="@firebase/analytics-compat",mP="@firebase/analytics",wP="@firebase/app-check-compat",vP="@firebase/app-check",yP="@firebase/auth",BP="@firebase/auth-compat",xP="@firebase/database",CP="@firebase/data-connect",_P="@firebase/database-compat",IP="@firebase/functions",EP="@firebase/functions-compat",bP="@firebase/installations",TP="@firebase/installations-compat",FP="@firebase/messaging",UP="@firebase/messaging-compat",kP="@firebase/performance",QP="@firebase/performance-compat",SP="@firebase/remote-config",RP="@firebase/remote-config-compat",NP="@firebase/storage",PP="@firebase/storage-compat",DP="@firebase/firestore",LP="@firebase/vertexai-preview",OP="@firebase/firestore-compat",MP="firebase",jP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="[DEFAULT]",VP={[Wh]:"fire-core",[gP]:"fire-core-compat",[mP]:"fire-analytics",[pP]:"fire-analytics-compat",[vP]:"fire-app-check",[wP]:"fire-app-check-compat",[yP]:"fire-auth",[BP]:"fire-auth-compat",[xP]:"fire-rtdb",[CP]:"fire-data-connect",[_P]:"fire-rtdb-compat",[IP]:"fire-fn",[EP]:"fire-fn-compat",[bP]:"fire-iid",[TP]:"fire-iid-compat",[FP]:"fire-fcm",[UP]:"fire-fcm-compat",[kP]:"fire-perf",[QP]:"fire-perf-compat",[SP]:"fire-rc",[RP]:"fire-rc-compat",[NP]:"fire-gcs",[PP]:"fire-gcs-compat",[DP]:"fire-fst",[OP]:"fire-fst-compat",[LP]:"fire-vertex","fire-js":"fire-js",[MP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Map,ya=new Map,Ba=new Map;function Lc(t,e){try{t.container.addComponent(e)}catch(n){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function QT(t,e){t.container.addOrOverwriteComponent(e)}function GA(t){const e=t.name;if(Ba.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,t);for(const n of KA.values())Lc(n,t);for(const n of ya.values())Lc(n,t);return!0}function ST(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function HP(t,e,n=HA){ST(t,e).clearInstance(n)}function RT(t){return t.options!==void 0}function Qt(t){return t.settings!==void 0}function KP(){Ba.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new ao("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP extends NT{constructor(e,n,r,s){const A=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:A};if(e.apiKey!==void 0)super(e,i,s);else{const o=e;super(o.options,i,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:A},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Kr(Wh,c0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){gv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Tr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=jP;function fv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:HA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Tr.create("bad-app-name",{appName:String(s)});if(n||(n=xT()),!n)throw Tr.create("no-options");const A=KA.get(s);if(A){if(Dc(n,A.options)&&Dc(r,A.config))return A;throw Tr.create("duplicate-app",{appName:s})}const i=new TT(s);for(const a of Ba.values())i.addComponent(a);const o=new NT(n,r,i);return KA.set(s,o),o}function WP(t,e){if(ON()&&!CT())throw Tr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;RT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Tr.create("finalization-registry-not-supported",{});const A=""+s(JSON.stringify(r)),i=ya.get(A);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new TT(A);for(const c of Ba.values())o.addComponent(c);const a=new zP(n,e,A,o);return ya.set(A,a),a}function $P(t=HA){const e=KA.get(t);if(!e&&t===HA&&xT())return fv();if(!e)throw Tr.create("no-app",{appName:t});return e}function qP(){return Array.from(KA.values())}async function gv(t){let e=!1;const n=t.name;KA.has(n)?(e=!0,KA.delete(n)):ya.has(n)&&t.decRefCount()<=0&&(ya.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Kr(t,e,n){var r;let s=(r=VP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const o=[`Unable to register library "${s}" with version "${e}":`];A&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(o.join(" "));return}GA(new hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function PT(t,e){if(t!==null&&typeof t!="function")throw Tr.create("invalid-log-argument");tP(t,e)}function DT(t){eP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="firebase-heartbeat-database",XP=1,Oc="firebase-heartbeat-store";let Ep=null;function LT(){return Ep||(Ep=cP(JP,XP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Ep}async function YP(t){try{const n=(await LT()).transaction(Oc),r=await n.objectStore(Oc).get(OT(t));return await n.done,r}catch(e){if(e instanceof Vn)Ms.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(n.message)}}}async function iC(t,e){try{const r=(await LT()).transaction(Oc,"readwrite");await r.objectStore(Oc).put(e,OT(t)),await r.done}catch(n){if(n instanceof Vn)Ms.warn(n.message);else{const r=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ms.warn(r.message)}}}function OT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=1024,eD=30*24*60*60*1e3;class tD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=oC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=eD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oC(),{heartbeatsToSend:r,unsentEntries:s}=nD(this._heartbeatsCache.heartbeats),A=Gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(n){return Ms.warn(n),""}}}function oC(){return new Date().toISOString().substring(0,10)}function nD(t,e=ZP){const n=[];let r=t.slice();for(const s of t){const A=n.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),aC(n)>e){A.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),aC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pc()?jN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function aC(t){return Gh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){GA(new hs("platform-logger",e=>new hP(e),"PRIVATE")),GA(new hs("heartbeat",e=>new tD(e),"PRIVATE")),Kr(Wh,c0,t),Kr(Wh,c0,"esm2017"),Kr("fire-js","")}sD("");const AD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Vn,SDK_VERSION:Ai,_DEFAULT_ENTRY_NAME:HA,_addComponent:Lc,_addOrOverwriteComponent:QT,_apps:KA,_clearComponents:KP,_components:Ba,_getProvider:ST,_isFirebaseApp:RT,_isFirebaseServerApp:Qt,_registerComponent:GA,_removeServiceInstance:HP,_serverApps:ya,deleteApp:gv,getApp:$P,getApps:qP,initializeApp:fv,initializeServerApp:WP,onLog:PT,registerVersion:Kr,setLogLevel:DT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this._delegate=e,this.firebase=n,Lc(e,new hs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),gv(this._delegate)))}_getService(e,n=HA){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=HA){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Lc(this._delegate,e)}_addOrOverwriteComponent(e){QT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},lC=new ao("app-compat","Firebase",oD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){const e={},n={__esModule:!0,initializeApp:A,app:s,registerVersion:Kr,setLogLevel:DT,onLog:PT,apps:null,SDK_VERSION:Ai,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:AD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(c){delete e[c]}function s(c){if(c=c||HA,!tC(e,c))throw lC.create("no-app",{appName:c});return e[c]}s.App=t;function A(c,d={}){const h=fv(c,d);if(tC(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(c=>e[c])}function o(c){const d=c.name,h=d.replace("-compat","");if(GA(c)&&c.type==="PUBLIC"){const f=(w=s())=>{if(typeof w[h]!="function")throw lC.create("invalid-app-argument",{appName:d});return w[h]()};c.serviceProps!==void 0&&zh(f,c.serviceProps),n[h]=f,t.prototype[h]=function(...w){return this._getService.bind(this,d).apply(this,c.multipleInstances?w:[])}}return c.type==="PUBLIC"?n[h]:null}function a(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){const t=aD(iD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:MT,extendNamespace:e,createSubscribe:bT,ErrorFactory:ao,deepExtend:zh});function e(n){zh(t,n)}return t}const lD=MT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Kf("@firebase/app-compat"),cD="@firebase/app-compat",uD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){Kr(cD,uD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=BT();if(t.firebase!==void 0){cC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&cC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const es=lD;dD();var hD="firebase",fD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es.registerVersion(hD,fD,"app-compat");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pi,jT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function b(){}b.prototype=x.prototype,I.D=x.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(k,U,D){for(var T=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)T[Ee-2]=arguments[Ee];return x.prototype[U].apply(k,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,b){b||(b=0);var k=Array(16);if(typeof x=="string")for(var U=0;16>U;++U)k[U]=x.charCodeAt(b++)|x.charCodeAt(b++)<<8|x.charCodeAt(b++)<<16|x.charCodeAt(b++)<<24;else for(U=0;16>U;++U)k[U]=x[b++]|x[b++]<<8|x[b++]<<16|x[b++]<<24;x=I.g[0],b=I.g[1],U=I.g[2];var D=I.g[3],T=x+(D^b&(U^D))+k[0]+3614090360&4294967295;x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[1]+3905402710&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[2]+606105819&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[3]+3250441966&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+k[4]+4118548399&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[5]+1200080426&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[6]+2821735955&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[7]+4249261313&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+k[8]+1770035416&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[9]+2336552879&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[10]+4294925233&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[11]+2304563134&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(D^b&(U^D))+k[12]+1804603682&4294967295,x=b+(T<<7&4294967295|T>>>25),T=D+(U^x&(b^U))+k[13]+4254626195&4294967295,D=x+(T<<12&4294967295|T>>>20),T=U+(b^D&(x^b))+k[14]+2792965006&4294967295,U=D+(T<<17&4294967295|T>>>15),T=b+(x^U&(D^x))+k[15]+1236535329&4294967295,b=U+(T<<22&4294967295|T>>>10),T=x+(U^D&(b^U))+k[1]+4129170786&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[6]+3225465664&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[11]+643717713&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[0]+3921069994&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+k[5]+3593408605&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[10]+38016083&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[15]+3634488961&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[4]+3889429448&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+k[9]+568446438&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[14]+3275163606&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[3]+4107603335&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[8]+1163531501&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(U^D&(b^U))+k[13]+2850285829&4294967295,x=b+(T<<5&4294967295|T>>>27),T=D+(b^U&(x^b))+k[2]+4243563512&4294967295,D=x+(T<<9&4294967295|T>>>23),T=U+(x^b&(D^x))+k[7]+1735328473&4294967295,U=D+(T<<14&4294967295|T>>>18),T=b+(D^x&(U^D))+k[12]+2368359562&4294967295,b=U+(T<<20&4294967295|T>>>12),T=x+(b^U^D)+k[5]+4294588738&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[8]+2272392833&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[11]+1839030562&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[14]+4259657740&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+k[1]+2763975236&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[4]+1272893353&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[7]+4139469664&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[10]+3200236656&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+k[13]+681279174&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[0]+3936430074&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[3]+3572445317&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[6]+76029189&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(b^U^D)+k[9]+3654602809&4294967295,x=b+(T<<4&4294967295|T>>>28),T=D+(x^b^U)+k[12]+3873151461&4294967295,D=x+(T<<11&4294967295|T>>>21),T=U+(D^x^b)+k[15]+530742520&4294967295,U=D+(T<<16&4294967295|T>>>16),T=b+(U^D^x)+k[2]+3299628645&4294967295,b=U+(T<<23&4294967295|T>>>9),T=x+(U^(b|~D))+k[0]+4096336452&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[7]+1126891415&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[14]+2878612391&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[5]+4237533241&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+k[12]+1700485571&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[3]+2399980690&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[10]+4293915773&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[1]+2240044497&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+k[8]+1873313359&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[15]+4264355552&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[6]+2734768916&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[13]+1309151649&4294967295,b=U+(T<<21&4294967295|T>>>11),T=x+(U^(b|~D))+k[4]+4149444226&4294967295,x=b+(T<<6&4294967295|T>>>26),T=D+(b^(x|~U))+k[11]+3174756917&4294967295,D=x+(T<<10&4294967295|T>>>22),T=U+(x^(D|~b))+k[2]+718787259&4294967295,U=D+(T<<15&4294967295|T>>>17),T=b+(D^(U|~x))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(U+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var b=x-this.blockSize,k=this.B,U=this.h,D=0;D<x;){if(U==0)for(;D<=b;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<x;)if(k[U++]=I.charCodeAt(D++),U==this.blockSize){s(this,k),U=0;break}}else for(;D<x;)if(k[U++]=I[D++],U==this.blockSize){s(this,k),U=0;break}}this.h=U,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var b=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=b&255,b/=256;for(this.u(I),I=Array(16),x=b=0;4>x;++x)for(var k=0;32>k;k+=8)I[b++]=this.g[x]>>>k&255;return I};function A(I,x){var b=o;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=x(I)}function i(I,x){this.h=x;for(var b=[],k=!0,U=I.length-1;0<=U;U--){var D=I[U]|0;k&&D==x||(b[U]=D,k=!1)}this.g=b}var o={};function a(I){return-128<=I&&128>I?A(I,function(x){return new i([x|0],0>x?-1:0)}):new i([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return _(c(-I));for(var x=[],b=1,k=0;I>=b;k++)x[k]=I/b|0,b*=4294967296;return new i(x,0)}function d(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return _(d(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(x,8)),k=h,U=0;U<I.length;U+=8){var D=Math.min(8,I.length-U),T=parseInt(I.substring(U,U+D),x);8>D?(D=c(Math.pow(x,D)),k=k.j(D).add(c(T))):(k=k.j(b),k=k.add(c(T)))}return k}var h=a(0),f=a(1),w=a(16777216);t=i.prototype,t.m=function(){if(C(this))return-_(this).m();for(var I=0,x=1,b=0;b<this.g.length;b++){var k=this.i(b);I+=(0<=k?k:4294967296+k)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(p(this))return"0";if(C(this))return"-"+_(this).toString(I);for(var x=c(Math.pow(I,6)),b=this,k="";;){var U=R(b,x).g;b=y(b,U.j(x));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=U,p(b))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function p(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=y(this,I),C(I)?-1:p(I)?0:1};function _(I){for(var x=I.g.length,b=[],k=0;k<x;k++)b[k]=~I.g[k];return new i(b,~I.h).add(f)}t.abs=function(){return C(this)?_(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0,U=0;U<=x;U++){var D=k+(this.i(U)&65535)+(I.i(U)&65535),T=(D>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);k=T>>>16,D&=65535,T&=65535,b[U]=T<<16|D}return new i(b,b[b.length-1]&-2147483648?-1:0)};function y(I,x){return I.add(_(x))}t.j=function(I){if(p(this)||p(I))return h;if(C(this))return C(I)?_(this).j(_(I)):_(_(this).j(I));if(C(I))return _(this.j(_(I)));if(0>this.l(w)&&0>I.l(w))return c(this.m()*I.m());for(var x=this.g.length+I.g.length,b=[],k=0;k<2*x;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var U=0;U<I.g.length;U++){var D=this.i(k)>>>16,T=this.i(k)&65535,Ee=I.i(U)>>>16,$e=I.i(U)&65535;b[2*k+2*U]+=T*$e,B(b,2*k+2*U),b[2*k+2*U+1]+=D*$e,B(b,2*k+2*U+1),b[2*k+2*U+1]+=T*Ee,B(b,2*k+2*U+1),b[2*k+2*U+2]+=D*Ee,B(b,2*k+2*U+2)}for(k=0;k<x;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=x;k<2*x;k++)b[k]=0;return new i(b,0)};function B(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function v(I,x){this.g=I,this.h=x}function R(I,x){if(p(x))throw Error("division by zero");if(p(I))return new v(h,h);if(C(I))return x=R(_(I),x),new v(_(x.g),_(x.h));if(C(x))return x=R(I,_(x)),new v(_(x.g),x.h);if(30<I.g.length){if(C(I)||C(x))throw Error("slowDivide_ only works with positive integers.");for(var b=f,k=x;0>=k.l(I);)b=S(b),k=S(k);var U=N(b,1),D=N(k,1);for(k=N(k,2),b=N(b,2);!p(k);){var T=D.add(k);0>=T.l(I)&&(U=U.add(b),D=T),k=N(k,1),b=N(b,1)}return x=y(I,U.j(x)),new v(U,x)}for(U=h;0<=I.l(x);){for(b=Math.max(1,Math.floor(I.m()/x.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(b),T=D.j(x);C(T)||0<T.l(I);)b-=k,D=c(b),T=D.j(x);p(D)&&(D=f),U=U.add(D),I=y(I,T)}return new v(U,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0;k<x;k++)b[k]=this.i(k)&I.i(k);return new i(b,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0;k<x;k++)b[k]=this.i(k)|I.i(k);return new i(b,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),b=[],k=0;k<x;k++)b[k]=this.i(k)^I.i(k);return new i(b,this.h^I.h)};function S(I){for(var x=I.g.length+1,b=[],k=0;k<x;k++)b[k]=I.i(k)<<1|I.i(k-1)>>>31;return new i(b,I.h)}function N(I,x){var b=x>>5;x%=32;for(var k=I.g.length-b,U=[],D=0;D<k;D++)U[D]=0<x?I.i(D+b)>>>x|I.i(D+b+1)<<32-x:I.i(D+b);return new i(U,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jT=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Pi=i}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VT,Nl,HT,nh,u0,KT,GT,zT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,m){return u==Array.prototype||u==Object.prototype||(u[g]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var m=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var M=u[E];if(!(M in m))break e;m=m[M]}u=u[u.length-1],E=m[u],g=g(E),g!=E&&g!=null&&e(m,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var m=0,E=!1,M={next:function(){if(!E&&m<u.length){var G=m++;return{value:g(G,u[G]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,m){return u.call.apply(u.bind,arguments)}function h(u,g,m){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function p(u,g){function m(){}m.prototype=g.prototype,u.aa=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(E,M,G){for(var oe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)oe[ct-2]=arguments[ct];return g.prototype[M].apply(E,oe)}}function C(u){const g=u.length;if(0<g){const m=Array(g);for(let E=0;E<g;E++)m[E]=u[E];return m}return[]}function _(u,g){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(a(E)){const M=u.length||0,G=E.length||0;u.length=M+G;for(let oe=0;oe<G;oe++)u[M+oe]=E[oe]}else u.push(E)}}class y{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function B(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function N(u,g,m){for(const E in u)g.call(m,u[E],E,u)}function I(u,g){for(const m in u)g.call(void 0,u[m],m,u)}function x(u){const g={};for(const m in u)g[m]=u[m];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,g){let m,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(m in E)u[m]=E[m];for(let G=0;G<b.length;G++)m=b[G],Object.prototype.hasOwnProperty.call(E,m)&&(u[m]=E[m])}}function U(u){var g=1;u=u.split(":");const m=[];for(;0<g&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function D(u){o.setTimeout(()=>{throw u},0)}function T(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ee{constructor(){this.h=this.g=null}add(g,m){const E=$e.get();E.set(g,m),this.h?this.h.next=E:this.g=E,this.h=E}}var $e=new y(()=>new Oe,u=>u.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,z=!1,F=new Ee,L=()=>{const u=o.Promise.resolve(void 0);V=()=>{u.then(H)}};var H=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(m){D(m)}var g=$e;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}z=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};o.addEventListener("test",m,g),o.removeEventListener("test",m,g)}catch{}return u}();function fe(u,g){if(q.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(S){e:{try{R(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ue[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&fe.aa.h.call(this)}}p(fe,q);var Ue={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function ze(u,g,m,E,M){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!E,this.ha=M,this.key=++Ne,this.da=this.fa=!1}function Qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,g,m,E,M){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var oe=be(u,g,E,M);return-1<oe?(g=u[oe],m||(g.fa=!1)):(g=new ze(g,this.src,G,!!E,M),g.fa=m,u.push(g)),g};function De(u,g){var m=g.type;if(m in u.g){var E=u.g[m],M=Array.prototype.indexOf.call(E,g,void 0),G;(G=0<=M)&&Array.prototype.splice.call(E,M,1),G&&(Qe(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function be(u,g,m,E){for(var M=0;M<u.length;++M){var G=u[M];if(!G.da&&G.listener==g&&G.capture==!!m&&G.ha==E)return M}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),tt={};function qe(u,g,m,E,M){if(Array.isArray(g)){for(var G=0;G<g.length;G++)qe(u,g[G],m,E,M);return null}return m=me(m),u&&u[te]?u.K(g,m,c(E)?!!E.capture:!1,M):nn(u,g,m,!1,E,M)}function nn(u,g,m,E,M,G){if(!g)throw Error("Invalid event type");var oe=c(M)?!!M.capture:!!M,ct=J(u);if(ct||(u[ke]=ct=new Se(u)),m=ct.add(g,m,E,oe,G),m.proxy)return m;if(E=rt(),m.proxy=E,E.src=u,E.listener=m,u.addEventListener)se||(M=oe),M===void 0&&(M=!1),u.addEventListener(g.toString(),E,M);else if(u.attachEvent)u.attachEvent(rn(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function rt(){function u(m){return g.call(u.src,u.listener,m)}const g=O;return u}function dn(u,g,m,E,M){if(Array.isArray(g))for(var G=0;G<g.length;G++)dn(u,g[G],m,E,M);else E=c(E)?!!E.capture:!!E,m=me(m),u&&u[te]?(u=u.i,g=String(g).toString(),g in u.g&&(G=u.g[g],m=be(G,m,E,M),-1<m&&(Qe(G[m]),Array.prototype.splice.call(G,m,1),G.length==0&&(delete u.g[g],u.h--)))):u&&(u=J(u))&&(g=u.g[g.toString()],u=-1,g&&(u=be(g,m,E,M)),(m=-1<u?g[u]:null)&&Nn(m))}function Nn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[te])De(g.i,u);else{var m=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(m,E,u.capture):g.detachEvent?g.detachEvent(rn(m),E):g.addListener&&g.removeListener&&g.removeListener(E),(m=J(g))?(De(m,u),m.h==0&&(m.src=null,g[ke]=null)):Qe(u)}}}function rn(u){return u in tt?tt[u]:tt[u]="on"+u}function O(u,g){if(u.da)u=!0;else{g=new fe(g,this);var m=u.listener,E=u.ha||u.src;u.fa&&Nn(u),u=m.call(E,g)}return u}function J(u){return u=u[ke],u instanceof Se?u:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(u){return typeof u=="function"?u:(u[re]||(u[re]=function(g){return u.handleEvent(g)}),u[re])}function we(){$.call(this),this.i=new Se(this),this.M=this,this.F=null}p(we,$),we.prototype[te]=!0,we.prototype.removeEventListener=function(u,g,m,E){dn(this,u,g,m,E)};function he(u,g){var m,E=u.F;if(E)for(m=[];E;E=E.F)m.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new q(g,u);else if(g instanceof q)g.target=g.target||u;else{var M=g;g=new q(E,u),k(g,M)}if(M=!0,m)for(var G=m.length-1;0<=G;G--){var oe=g.g=m[G];M=ie(oe,E,!0,g)&&M}if(oe=g.g=u,M=ie(oe,E,!0,g)&&M,M=ie(oe,E,!1,g)&&M,m)for(G=0;G<m.length;G++)oe=g.g=m[G],M=ie(oe,E,!1,g)&&M}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var m=u.g[g],E=0;E<m.length;E++)Qe(m[E]);delete u.g[g],u.h--}}this.F=null},we.prototype.K=function(u,g,m,E){return this.i.add(String(u),g,!1,m,E)},we.prototype.L=function(u,g,m,E){return this.i.add(String(u),g,!0,m,E)};function ie(u,g,m,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,G=0;G<g.length;++G){var oe=g[G];if(oe&&!oe.da&&oe.capture==m){var ct=oe.listener,hn=oe.ha||oe.src;oe.fa&&De(u.i,oe),M=ct.call(hn,E)!==!1&&M}}return M&&!E.defaultPrevented}function Te(u,g,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Ce(u){u.g=Te(()=>{u.g=null,u.i&&(u.i=!1,Ce(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class xe extends ${constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(u){$.call(this),this.h=u,this.g={}}p(Me,$);var st=[];function Ye(u){N(u.g,function(g,m){this.g.hasOwnProperty(m)&&Nn(g)},u),u.g={}}Me.prototype.N=function(){Me.aa.N.call(this),Ye(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=o.JSON.stringify,qr=o.JSON.parse,Qr=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Sr(){}Sr.prototype.h=null;function Rr(u){return u.h||(u.h=u.i())}function Dt(){}var Cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pn(){q.call(this,"d")}p(Pn,q);function P(){q.call(this,"c")}p(P,q);var Z={},ye=null;function Ae(){return ye=ye||new we}Z.La="serverreachability";function ae(u){q.call(this,Z.La,u)}p(ae,q);function ge(u){const g=Ae();he(g,new ae(g))}Z.STAT_EVENT="statevent";function At(u,g){q.call(this,Z.STAT_EVENT,u),this.stat=g}p(At,q);function Je(u){const g=Ae();he(g,new At(g,u))}Z.Ma="timingevent";function qt(u,g){q.call(this,Z.Ma,u),this.size=g}p(qt,q);function Nr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function Jy(u,g,m,E,M,G){u.info(function(){if(u.g)if(G)for(var oe="",ct=G.split("&"),hn=0;hn<ct.length;hn++){var Ze=ct[hn].split("=");if(1<Ze.length){var _n=Ze[0];Ze=Ze[1];var In=_n.split("_");oe=2<=In.length&&In[1]=="type"?oe+(_n+"="+Ze+"&"):oe+(_n+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+g+`
`+m+`
`+oe})}function Pg(u,g,m,E,M,G,oe){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+g+`
`+m+`
`+G+" "+oe})}function eA(u,g,m,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+_Q(u,m)+(E?" "+E:"")})}function ys(u,g){u.info(function(){return"TIMEOUT: "+g})}sn.prototype.info=function(){};function _Q(u,g){if(!u.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var E=m[u];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var G=M[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<M.length;oe++)M[oe]=""}}}}return Le(m)}catch{return g}}var Pu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dg;function Du(){}p(Du,Sr),Du.prototype.g=function(){return new XMLHttpRequest},Du.prototype.i=function(){return{}},Dg=new Du;function tA(u,g,m,E){this.j=u,this.i=g,this.l=m,this.R=E||1,this.U=new Me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yy}function Yy(){this.i=null,this.g="",this.h=!1}var Zy={},Lg={};function Og(u,g,m){u.L=1,u.v=ju(Bs(g)),u.m=m,u.P=!0,eB(u,null)}function eB(u,g){u.F=Date.now(),Lu(u),u.A=Bs(u.v);var m=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),fB(m.i,"t",E),u.C=0,m=u.j.J,u.h=new Yy,u.g=QB(u.j,m?g:null,!u.m),0<u.O&&(u.M=new xe(f(u.Y,u,u.g),u.O)),g=u.U,m=u.g,E=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(st[0]=M.toString()),M=st);for(var G=0;G<M.length;G++){var oe=qe(m,M[G],E||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ge(),Jy(u.i,u.u,u.A,u.l,u.R,u.m)}tA.prototype.ca=function(u){u=u.target;const g=this.M;g&&xs(u)==3?g.j():this.Y(u)},tA.prototype.Y=function(u){try{if(u==this.g)e:{const In=xs(this.g);var g=this.g.Ba();const vo=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||BB(this.g)))){this.J||In!=4||g==7||(g==8||0>=vo?ge(3):ge(2)),Mg(this);var m=this.g.Z();this.X=m;t:if(tB(this)){var E=BB(this.g);u="";var M=E.length,G=xs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),nl(this);var oe="";break t}this.h.i=new o.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(G&&g==M-1)});E.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=m==200,Pg(this.i,this.u,this.A,this.l,this.R,In,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,hn=this.g;if((ct=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ct)){var Ze=ct;break t}}Ze=null}if(m=Ze)eA(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jg(this,m);else{this.o=!1,this.s=3,Je(12),ui(this),nl(this);break e}}if(this.P){m=!0;let Pr;for(;!this.J&&this.C<oe.length;)if(Pr=IQ(this,oe),Pr==Lg){In==4&&(this.s=4,Je(14),m=!1),eA(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==Zy){this.s=4,Je(15),eA(this.i,this.l,oe,"[Invalid Chunk]"),m=!1;break}else eA(this.i,this.l,Pr,null),jg(this,Pr);if(tB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||oe.length!=0||this.h.h||(this.s=1,Je(16),m=!1),this.o=this.o&&m,!m)eA(this.i,this.l,oe,"[Invalid Chunked Response]"),ui(this),nl(this);else if(0<oe.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Wg(_n),_n.M=!0,Je(11))}}else eA(this.i,this.l,oe,null),jg(this,oe);In==4&&ui(this),this.o&&!this.J&&(In==4?TB(this.j,this):(this.o=!1,Lu(this)))}else VQ(this.g),m==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),ui(this),nl(this)}}}catch{}finally{}};function tB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function IQ(u,g){var m=u.C,E=g.indexOf(`
`,m);return E==-1?Lg:(m=Number(g.substring(m,E)),isNaN(m)?Zy:(E+=1,E+m>g.length?Lg:(g=g.slice(E,E+m),u.C=E+m,g)))}tA.prototype.cancel=function(){this.J=!0,ui(this)};function Lu(u){u.S=Date.now()+u.I,nB(u,u.I)}function nB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Nr(f(u.ba,u),g)}function Mg(u){u.B&&(o.clearTimeout(u.B),u.B=null)}tA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ys(this.i,this.A),this.L!=2&&(ge(),Je(17)),ui(this),this.s=2,nl(this)):nB(this,this.S-u)};function nl(u){u.j.G==0||u.J||TB(u.j,u)}function ui(u){Mg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Ye(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function jg(u,g){try{var m=u.j;if(m.G!=0&&(m.g==u||Vg(m.h,u))){if(!u.K&&Vg(m.h,u)&&m.G==3){try{var E=m.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Wu(m),Gu(m);else break e;zg(m),Je(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=Nr(f(m.Za,m),6e3));if(1>=AB(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else hi(m,11)}else if((u.K||m.g==u)&&Wu(m),!B(g))for(M=m.Da.g.parse(g),g=0;g<M.length;g++){let Ze=M[g];if(m.T=Ze[0],Ze=Ze[1],m.G==2)if(Ze[0]=="c"){m.K=Ze[1],m.ia=Ze[2];const _n=Ze[3];_n!=null&&(m.la=_n,m.j.info("VER="+m.la));const In=Ze[4];In!=null&&(m.Aa=In,m.j.info("SVER="+m.Aa));const vo=Ze[5];vo!=null&&typeof vo=="number"&&0<vo&&(E=1.5*vo,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Pr=u.g;if(Pr){const qu=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var G=E.h;G.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Hg(G,G.h),G.h=null))}if(E.D){const $g=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;$g&&(E.ya=$g,ft(E.I,E.D,$g))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var oe=u;if(E.qa=kB(E,E.J?E.ia:null,E.W),oe.K){iB(E.h,oe);var ct=oe,hn=E.L;hn&&(ct.I=hn),ct.B&&(Mg(ct),Lu(ct)),E.g=oe}else EB(E);0<m.i.length&&zu(m)}else Ze[0]!="stop"&&Ze[0]!="close"||hi(m,7);else m.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?hi(m,7):Gg(m):Ze[0]!="noop"&&m.l&&m.l.ta(Ze),m.v=0)}}ge(4)}catch{}}var EQ=class{constructor(u,g){this.g=u,this.map=g}};function rB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AB(u){return u.h?1:u.g?u.g.size:0}function Vg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Hg(u,g){u.g?u.g.add(g):u.h=g}function iB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}rB.prototype.cancel=function(){if(this.i=oB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function oB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const m of u.g.values())g=g.concat(m.D);return g}return C(u.i)}function bQ(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],m=u.length,E=0;E<m;E++)g.push(u[E]);return g}g=[],m=0;for(E in u)g[m++]=u[E];return g}function TQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var m=0;m<u;m++)g.push(m);return g}g=[],m=0;for(const E in u)g[m++]=E;return g}}}function aB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var m=TQ(u),E=bQ(u),M=E.length,G=0;G<M;G++)g.call(void 0,E[G],m&&m[G],u)}var lB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FQ(u,g){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var E=u[m].indexOf("="),M=null;if(0<=E){var G=u[m].substring(0,E);M=u[m].substring(E+1)}else G=u[m];g(G,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function di(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof di){this.h=u.h,Ou(this,u.j),this.o=u.o,this.g=u.g,Mu(this,u.s),this.l=u.l;var g=u.i,m=new Al;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),cB(this,m),this.m=u.m}else u&&(g=String(u).match(lB))?(this.h=!1,Ou(this,g[1]||"",!0),this.o=rl(g[2]||""),this.g=rl(g[3]||"",!0),Mu(this,g[4]),this.l=rl(g[5]||"",!0),cB(this,g[6]||"",!0),this.m=rl(g[7]||"")):(this.h=!1,this.i=new Al(null,this.h))}di.prototype.toString=function(){var u=[],g=this.j;g&&u.push(sl(g,uB,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(sl(g,uB,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(sl(m,m.charAt(0)=="/"?QQ:kQ,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",sl(m,RQ)),u.join("")};function Bs(u){return new di(u)}function Ou(u,g,m){u.j=m?rl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Mu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function cB(u,g,m){g instanceof Al?(u.i=g,NQ(u.i,u.h)):(m||(g=sl(g,SQ)),u.i=new Al(g,u.h))}function ft(u,g,m){u.i.set(g,m)}function ju(u){return ft(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function rl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function sl(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,UQ),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function UQ(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var uB=/[#\/\?@]/g,kQ=/[#\?:]/g,QQ=/[#\?]/g,SQ=/[#\?@]/g,RQ=/#/g;function Al(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function nA(u){u.g||(u.g=new Map,u.h=0,u.i&&FQ(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}t=Al.prototype,t.add=function(u,g){nA(this),this.i=null,u=mo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function dB(u,g){nA(u),g=mo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function hB(u,g){return nA(u),g=mo(u,g),u.g.has(g)}t.forEach=function(u,g){nA(this),this.g.forEach(function(m,E){m.forEach(function(M){u.call(g,M,E,this)},this)},this)},t.na=function(){nA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let E=0;E<g.length;E++){const M=u[E];for(let G=0;G<M.length;G++)m.push(g[E])}return m},t.V=function(u){nA(this);let g=[];if(typeof u=="string")hB(this,u)&&(g=g.concat(this.g.get(mo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)g=g.concat(u[m])}return g},t.set=function(u,g){return nA(this),this.i=null,u=mo(this,u),hB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function fB(u,g,m){dB(u,g),0<m.length&&(u.i=null,u.g.set(mo(u,g),C(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var E=g[m];const G=encodeURIComponent(String(E)),oe=this.V(E);for(E=0;E<oe.length;E++){var M=G;oe[E]!==""&&(M+="="+encodeURIComponent(String(oe[E]))),u.push(M)}}return this.i=u.join("&")};function mo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function NQ(u,g){g&&!u.j&&(nA(u),u.i=null,u.g.forEach(function(m,E){var M=E.toLowerCase();E!=M&&(dB(this,E),fB(this,M,m))},u)),u.j=g}function PQ(u,g){const m=new sn;if(o.Image){const E=new Image;E.onload=w(rA,m,"TestLoadImage: loaded",!0,g,E),E.onerror=w(rA,m,"TestLoadImage: error",!1,g,E),E.onabort=w(rA,m,"TestLoadImage: abort",!1,g,E),E.ontimeout=w(rA,m,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function DQ(u,g){const m=new sn,E=new AbortController,M=setTimeout(()=>{E.abort(),rA(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(G=>{clearTimeout(M),G.ok?rA(m,"TestPingServer: ok",!0,g):rA(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),rA(m,"TestPingServer: error",!1,g)})}function rA(u,g,m,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(m)}catch{}}function LQ(){this.g=new Qr}function OQ(u,g,m){const E=m||"";try{aB(u,function(M,G){let oe=M;c(M)&&(oe=Le(M)),g.push(E+G+"="+encodeURIComponent(oe))})}catch(M){throw g.push(E+"type="+encodeURIComponent("_badmap")),M}}function Vu(u){this.l=u.Ub||null,this.j=u.eb||!1}p(Vu,Sr),Vu.prototype.g=function(){return new Hu(this.l,this.j)},Vu.prototype.i=function(u){return function(){return u}}({});function Hu(u,g){we.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Hu,we),t=Hu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,ol(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,il(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function gB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?il(this):ol(this),this.readyState==3&&gB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,il(this))},t.Qa=function(u){this.g&&(this.response=u,il(this))},t.ga=function(){this.g&&il(this)};function il(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ol(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function ol(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function pB(u){let g="";return N(u,function(m,E){g+=E,g+=":",g+=m,g+=`\r
`}),g}function Kg(u,g,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=pB(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ft(u,g,m))}function Ut(u){we.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ut,we);var MQ=/^https?$/i,jQ=["POST","PUT"];t=Ut.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dg.g(),this.v=this.o?Rr(this.o):Rr(Dg),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(G){mB(this,G);return}if(u=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)m.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const G of E.keys())m.set(G,E.get(G));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(G=>G.toLowerCase()=="content-type"),M=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(jQ,g,void 0))||E||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of m)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yB(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){mB(this,G)}};function mB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,wB(u),Ku(u)}function wB(u){u.A||(u.A=!0,he(u,"complete"),he(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,he(this,"complete"),he(this,"abort"),Ku(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ku(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vB(this):this.bb())},t.bb=function(){vB(this)};function vB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||xs(u)!=4||u.Z()!=2)){if(u.u&&xs(u)==4)Te(u.Ea,0,u);else if(he(u,"readystatechange"),xs(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var E;if(E=oe===0){var M=String(u.D).match(lB)[1]||null;!M&&o.self&&o.self.location&&(M=o.self.location.protocol.slice(0,-1)),E=!MQ.test(M?M.toLowerCase():"")}m=E}if(m)he(u,"complete"),he(u,"success");else{u.m=6;try{var G=2<xs(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",wB(u)}}finally{Ku(u)}}}}function Ku(u,g){if(u.g){yB(u);const m=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||he(u,"ready");try{m.onreadystatechange=E}catch{}}}function yB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xs(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),qr(g)}};function BB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function VQ(u){const g={};u=(u.g&&2<=xs(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(B(u[E]))continue;var m=U(u[E]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const G=g[M]||[];g[M]=G,G.push(m)}I(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function xB(u){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=al("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=al("baseRetryDelayMs",5e3,u),this.cb=al("retryDelaySeedMs",1e4,u),this.Wa=al("forwardChannelMaxRetries",2,u),this.wa=al("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rB(u&&u.concurrentRequestLimit),this.Da=new LQ,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xB.prototype,t.la=8,t.G=1,t.connect=function(u,g,m,E){Je(0),this.W=u,this.H=g||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=kB(this,null,this.W),zu(this)};function Gg(u){if(CB(u),u.G==3){var g=u.U++,m=Bs(u.I);if(ft(m,"SID",u.K),ft(m,"RID",g),ft(m,"TYPE","terminate"),ll(u,m),g=new tA(u,u.j,g),g.L=2,g.v=ju(Bs(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&o.Image&&(new Image().src=g.v,m=!0),m||(g.g=QB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Lu(g)}UB(u)}function Gu(u){u.g&&(Wg(u),u.g.cancel(),u.g=null)}function CB(u){Gu(u),u.u&&(o.clearTimeout(u.u),u.u=null),Wu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function zu(u){if(!sB(u.h)&&!u.s){u.s=!0;var g=u.Ga;V||L(),z||(V(),z=!0),F.add(g,u),u.B=0}}function HQ(u,g){return AB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Nr(f(u.Ga,u,g),FB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new tA(this,this.j,u);let G=this.o;if(this.S&&(G?(G=x(G),k(G,this.S)):G=this.S),this.m!==null||this.O||(M.H=G,G=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=IB(this,M,g),m=Bs(this.I),ft(m,"RID",u),ft(m,"CVER",22),this.D&&ft(m,"X-HTTP-Session-Id",this.D),ll(this,m),G&&(this.O?g="headers="+encodeURIComponent(String(pB(G)))+"&"+g:this.m&&Kg(m,this.m,G)),Hg(this.h,M),this.Ua&&ft(m,"TYPE","init"),this.P?(ft(m,"$req",g),ft(m,"SID","null"),M.T=!0,Og(M,m,null)):Og(M,m,g),this.G=2}}else this.G==3&&(u?_B(this,u):this.i.length==0||sB(this.h)||_B(this))};function _B(u,g){var m;g?m=g.l:m=u.U++;const E=Bs(u.I);ft(E,"SID",u.K),ft(E,"RID",m),ft(E,"AID",u.T),ll(u,E),u.m&&u.o&&Kg(E,u.m,u.o),m=new tA(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),g&&(u.i=g.D.concat(u.i)),g=IB(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Hg(u.h,m),Og(m,E,g)}function ll(u,g){u.H&&N(u.H,function(m,E){ft(g,E,m)}),u.l&&aB({},function(m,E){ft(g,E,m)})}function IB(u,g,m){m=Math.min(u.i.length,m);var E=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let G=-1;for(;;){const oe=["count="+m];G==-1?0<m?(G=M[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let ct=!0;for(let hn=0;hn<m;hn++){let Ze=M[hn].g;const _n=M[hn].map;if(Ze-=G,0>Ze)G=Math.max(0,M[hn].g-100),ct=!1;else try{OQ(_n,oe,"req"+Ze+"_")}catch{E&&E(_n)}}if(ct){E=oe.join("&");break e}}}return u=u.i.splice(0,m),g.D=u,E}function EB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;V||L(),z||(V(),z=!0),F.add(g,u),u.v=0}}function zg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Nr(f(u.Fa,u),FB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,bB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Nr(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Gu(this),bB(this))};function Wg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function bB(u){u.g=new tA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Bs(u.qa);ft(g,"RID","rpc"),ft(g,"SID",u.K),ft(g,"AID",u.T),ft(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&ft(g,"TO",u.ja),ft(g,"TYPE","xmlhttp"),ll(u,g),u.m&&u.o&&Kg(g,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=ju(Bs(g)),m.m=null,m.P=!0,eB(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Gu(this),zg(this),Je(19))};function Wu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function TB(u,g){var m=null;if(u.g==g){Wu(u),Wg(u),u.g=null;var E=2}else if(Vg(u.h,g))m=g.D,iB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;E=Ae(),he(E,new qt(E,m)),zu(u)}else EB(u);else if(M=g.s,M==3||M==0&&0<g.X||!(E==1&&HQ(u,g)||E==2&&zg(u)))switch(m&&0<m.length&&(g=u.h,g.i=g.i.concat(m)),M){case 1:hi(u,5);break;case 4:hi(u,10);break;case 3:hi(u,6);break;default:hi(u,2)}}}function FB(u,g){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*g}function hi(u,g){if(u.j.info("Error code "+g),g==2){var m=f(u.fb,u),E=u.Xa;const M=!E;E=new di(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ou(E,"https"),ju(E),M?PQ(E.toString(),m):DQ(E.toString(),m)}else Je(2);u.G=0,u.l&&u.l.sa(g),UB(u),CB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function UB(u){if(u.G=0,u.ka=[],u.l){const g=oB(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function kB(u,g,m){var E=m instanceof di?Bs(m):new di(m);if(E.g!="")g&&(E.g=g+"."+E.g),Mu(E,E.s);else{var M=o.location;E=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var G=new di(null);E&&Ou(G,E),g&&(G.g=g),M&&Mu(G,M),m&&(G.l=m),E=G}return m=u.D,g=u.ya,m&&g&&ft(E,m,g),ft(E,"VER",u.la),ll(u,E),E}function QB(u,g,m){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ut(new Vu({eb:m})):new Ut(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SB(){}t=SB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $u(){}$u.prototype.g=function(u,g){return new Ar(u,g)};function Ar(u,g){we.call(this),this.g=new xB(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!B(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!B(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new wo(this)}p(Ar,we),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){Gg(this.g)},Ar.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Le(u),u=m);g.i.push(new EQ(g.Ya++,u)),g.G==3&&zu(g)},Ar.prototype.N=function(){this.g.l=null,delete this.j,Gg(this.g),delete this.g,Ar.aa.N.call(this)};function RB(u){Pn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const m in g){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}p(RB,Pn);function NB(){P.call(this),this.status=1}p(NB,P);function wo(u){this.g=u}p(wo,SB),wo.prototype.ua=function(){he(this.g,"a")},wo.prototype.ta=function(u){he(this.g,new RB(u))},wo.prototype.sa=function(u){he(this.g,new NB)},wo.prototype.ra=function(){he(this.g,"b")},$u.prototype.createWebChannel=$u.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,zT=function(){return new $u},GT=function(){return Ae()},KT=Z,u0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pu.NO_ERROR=0,Pu.TIMEOUT=8,Pu.HTTP_ERROR=6,nh=Pu,Xy.COMPLETE="complete",HT=Xy,Dt.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",we.prototype.listen=we.prototype.K,Nl=Dt,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,VT=Ut}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});const dC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Kf("@firebase/firestore");function Qo(){return zA.logLevel}function gD(t){zA.setLogLevel(t)}function Y(t,...e){if(zA.logLevel<=je.DEBUG){const n=e.map(pv);zA.debug(`Firestore (${Ha}): ${t}`,...n)}}function jt(t,...e){if(zA.logLevel<=je.ERROR){const n=e.map(pv);zA.error(`Firestore (${Ha}): ${t}`,...n)}}function fs(t,...e){if(zA.logLevel<=je.WARN){const n=e.map(pv);zA.warn(`Firestore (${Ha}): ${t}`,...n)}}function pv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: `+t;throw jt(e),new Error(e)}function _e(t,e){t||ve()}function pD(t,e){t||ve()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class wD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vD{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let A=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new yn,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const a=A;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},o=a=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new yn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new WT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new ln(e)}}class yD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=A=>{A.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,Y("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>r(A))};const s=A=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new xD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_D(40);for(let A=0;A<s.length;++A)r.length<20&&s[A]<n&&(r+=e.charAt(s[A]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function xa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function qT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ct(0,0))}static max(){return new Ie(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const A=e.get(s),i=n.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ke extends Mc{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const ID=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Mc{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return ID.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const A=()=>{if(r.length===0)throw new X(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new X(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new X(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(A(),s++)}if(A(),i)throw new X(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ke.fromString(e))}static fromName(e){return new le(Ke.fromString(e).popFirst(5))}static empty(){return new le(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function d0(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}$h.UNKNOWN_ID=-1;class rh{constructor(e,n){this.fieldPath=e,this.kind=n}}class jc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new jc(0,pr.min())}}function JT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ie.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new pr(s,le.empty(),e)}function XT(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(Ie.min(),le.empty(),-1)}static max(){return new pr(Ie.max(),le.empty(),-1)}}function mv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==YT)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(r,s)},this.catchCallback=A=>{this.wrapFailure(n,A).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,A=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++A,i&&A===s&&n()},a=>r(a))}),i=!0,A===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,A)=>{r.push(n.call(this,s,A))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const A=e.length,i=new Array(A);let o=0;for(let a=0;a<A;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===A&&r(i)},d=>s(d))}})}static doWhile(e,n){return new j((r,s)=>{const A=()=>{e()===!0?n().next(()=>{A()},s):r()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new rc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=wv(r.target.error);this.V.reject(new rc(e,s))}}static open(e,n,r,s){try{return new Gf(n,e.transaction(s,r))}catch(A){throw new rc(n,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Y("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new bD(n)}}class us{constructor(e,n,r){this.name=e,this.version=n,this.p=r,us.S(Ft())===12.2&&jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Y("SimpleDb","Removing database:",e),yi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pc())return!1;if(us.v())return!0;const e=Ft(),n=us.S(e),r=0<n&&n<10,s=e1(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Y("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;n(i)},s.onblocked=()=>{r(new rc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?r(new X(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new X(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new rc(e,i))},s.onupgradeneeded=A=>{Y("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{Y("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const A=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=Gf.open(this.db,e,A?"readonly":"readwrite",r),a=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),j.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(Y("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function e1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ED{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return yi(this.B.delete())}}class rc extends X{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function oi(t){return t.name==="IndexedDbTransactionError"}class bD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yi(r)}add(e){return Y("SimpleDb","ADD",this.store.name,e,e),yi(this.store.add(e))}get(e){return yi(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Y("SimpleDb","DELETE",this.store.name,e),yi(this.store.delete(e))}count(){return Y("SimpleDb","COUNT",this.store.name),yi(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(r.range);return new j((i,o)=>{A.onerror=a=>{o(a.target.error)},A.onsuccess=a=>{i(a.target.result)}})}{const A=this.cursor(r),i=[];return this.W(A,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new j((s,A)=>{r.onerror=i=>{A(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}j(e,n){Y("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(A,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new j((r,s)=>{n.onerror=A=>{const i=wv(A.target.error);s(i)},n.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new j((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void s();const a=new ED(o),c=n(o.primaryKey,o.value,a);if(c instanceof j){const d=c.catch(h=>(a.done(),j.reject(h)));r.push(d)}a.isDone?s():a.K===null?o.continue():o.continue(a.K)}}).next(()=>j.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function yi(t){return new j((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=wv(r.target.error);n(s)}})}let hC=!1;function wv(t){const e=us.S(Ft());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hC||(hC=!0,setTimeout(()=>{throw r},0)),r}}return t}class TD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Y("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Y("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){oi(n)?Y("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ii(n)}await this.X(6e4)})}}class FD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,A=!0;return j.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return Y("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(o=>{s-=o,r.add(i)});A=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(o=>(Y("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((s,A)=>{const i=XT(A);mv(i,r)>0&&(r=i)}),new pr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zn.oe=-1;function fu(t){return t==null}function Vc(t){return t===0&&1/t==-1/0}function t1(t){return typeof t=="number"&&Number.isInteger(t)&&!Vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fC(e)),e=UD(t.get(n),e);return fC(e)}function UD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const A=t.charAt(s);switch(A){case"\0":n+="";break;case"":n+="";break;default:n+=A}}return n}function fC(t){return t+""}function is(t){const e=t.length;if(_e(e>=2),e===2)return _e(t.charAt(0)===""&&t.charAt(1)===""),Ke.emptyPath();const n=e-2,r=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>n)&&ve(),t.charAt(i+1)){case"":const o=t.substring(A,i);let a;s.length===0?a=o:(s+=o,a=s,s=""),r.push(a);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:ve()}A=i+2}return new Ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t,e){return[t,Hn(e)]}function n1(t,e,n){return[t,Hn(e),n]}const kD={},QD=["prefixPath","collectionGroup","readTime","documentId"],SD=["prefixPath","collectionGroup","documentId"],RD=["collectionGroup","readTime","prefixPath","documentId"],ND=["canonicalId","targetId"],PD=["targetId","path"],DD=["path","targetId"],LD=["collectionId","parent"],OD=["indexId","uid"],MD=["uid","sequenceNumber"],jD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VD=["indexId","uid","orderedDocumentKey"],HD=["userId","collectionPath","documentId"],KD=["userId","collectionPath","largestBatchId"],GD=["userId","collectionGroup","largestBatchId"],r1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zD=[...r1,"documentOverlays"],s1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],A1=s1,vv=[...A1,"indexConfiguration","indexState","indexEntries"],WD=vv,$D=[...vv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends ZT{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function tn(t,e){const n=ue(t);return us.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function i1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=n?r(e.key,n):1,n&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,r,s,A){this.key=e,this.value=n,this.color=r??pn.RED,this.left=s??pn.EMPTY,this.right=A??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,A){return new pn(e??this.key,n??this.value,r??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const A=r(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,n,r),null):A===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,s,A){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new er([])}unionWith(e){let n=new lt(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new er(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new o1("Invalid base64 string: "+A):A}}(e);return new St(n)}static fromUint8Array(e){const n=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const JD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function js(t){if(_e(!!t),typeof t=="string"){let e=0;const n=JD.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function WA(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yv(t){const e=t.mapValue.fields.__previous_value__;return zf(e)?yv(e):e}function Hc(t){const e=js(t.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,s,A,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class $A{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $A("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $A&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ah={nullValue:"NULL_VALUE"};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zf(t)?4:a1(t)?9007199254740991:Wf(t)?10:11:ve()}function gs(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hc(t).isEqual(Hc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=js(s.timestampValue),o=js(A.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return WA(s.bytesValue).isEqual(WA(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return vt(s.geoPointValue.latitude)===vt(A.geoPointValue.latitude)&&vt(s.geoPointValue.longitude)===vt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return vt(s.integerValue)===vt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=vt(s.doubleValue),o=vt(A.doubleValue);return i===o?Vc(i)===Vc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},o=A.mapValue.fields||{};if(pC(i)!==pC(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!gs(i[a],o[a])))return!1;return!0}(t,e);default:return ve()}}function Kc(t,e){return(t.values||[]).find(n=>gs(n,e))!==void 0}function qA(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(A,i){const o=vt(A.integerValue||A.doubleValue),a=vt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return wC(t.timestampValue,e.timestampValue);case 4:return wC(Hc(t),Hc(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(A,i){const o=WA(A),a=WA(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const o=A.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=Re(o[c],a[c]);if(d!==0)return d}return Re(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const o=Re(vt(A.latitude),vt(i.latitude));return o!==0?o:Re(vt(A.longitude),vt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vC(t.arrayValue,e.arrayValue);case 10:return function(A,i){var o,a,c,d;const h=A.fields||{},f=i.fields||{},w=(o=h.value)===null||o===void 0?void 0:o.arrayValue,p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,C=Re(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=p==null?void 0:p.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:vC(w,p)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===xA.mapValue&&i===xA.mapValue)return 0;if(A===xA.mapValue)return 1;if(i===xA.mapValue)return-1;const o=A.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Re(a[h],d[h]);if(f!==0)return f;const w=qA(o[a[h]],c[d[h]]);if(w!==0)return w}return Re(a.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function wC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=js(t),r=js(e),s=Re(n.seconds,r.seconds);return s!==0?s:Re(n.nanos,r.nanos)}function vC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const A=qA(n[s],r[s]);if(A)return A}return Re(n.length,r.length)}function Ca(t){return f0(t)}function f0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=js(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return WA(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const A of n.values||[])s?s=!1:r+=",",r+=f0(A);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",A=!0;for(const i of r)A?A=!1:s+=",",s+=`${i}:${f0(n.fields[i])}`;return s+"}"}(t.mapValue):ve()}function Wi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g0(t){return!!t&&"integerValue"in t}function Gc(t){return!!t&&"arrayValue"in t}function yC(t){return!!t&&"nullValue"in t}function BC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ih(t){return!!t&&"mapValue"in t}function Wf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function a1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const l1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function YD(t){return"nullValue"in t?Ah:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wi($A.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Wf(t)?l1:{mapValue:{}}:ve()}function ZD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wi($A.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?l1:"mapValue"in t?Wf(t)?{mapValue:{}}:xA:ve()}function xC(t,e){const n=qA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CC(t,e){const n=qA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=Bt.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=sc(i):s.push(o.lastSegment())});const A=this.getFieldsMap(n);this.applyChanges(A,r,s)}delete(e){const n=this.field(e.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ih(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(s,A)=>e[s]=A);for(const s of r)delete e[s]}clone(){return new mn(sc(this.value))}}function c1(t){const e=[];return lo(t.fields,(n,r)=>{const s=new Bt([n]);if(ih(r)){const A=c1(r.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,A,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=A,this.data=i,this.documentState=o}static newInvalidDocument(e){return new pt(e,0,Ie.min(),Ie.min(),Ie.min(),mn.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,Ie.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,Ie.min(),Ie.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,Ie.min(),Ie.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.position=e,this.inclusive=n}}function _C(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?r=le.comparator(le.fromName(i.referenceValue),n.key):r=qA(i,n.data.field(A.field)),A.dir==="desc"&&(r*=-1),r!==0)break}return r}function IC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function e4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class Ge extends u1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new t4(e,n,r):n==="array-contains"?new s4(e,r):n==="in"?new m1(e,r):n==="not-in"?new A4(e,r):n==="array-contains-any"?new i4(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new n4(e,r):new r4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qA(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(qA(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends u1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new it(e,n)}matches(e){return _a(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _a(t){return t.op==="and"}function p0(t){return t.op==="or"}function Bv(t){return d1(t)&&_a(t)}function d1(t){for(const e of t.filters)if(e instanceof it)return!1;return!0}function m0(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(Bv(t))return t.filters.map(e=>m0(e)).join(",");{const e=t.filters.map(n=>m0(n)).join(",");return`${t.op}(${e})`}}function h1(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&gs(r.value,s.value)}(t,e):t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((A,i,o)=>A&&h1(i,s.filters[o]),!0):!1}(t,e):void ve()}function f1(t,e){const n=t.filters.concat(e);return it.create(n,t.op)}function g1(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Ca(n.value)}`}(t):t instanceof it?function(n){return n.op.toString()+" {"+n.getFilters().map(g1).join(" ,")+"}"}(t):"Filter"}class t4 extends Ge{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class n4 extends Ge{constructor(e,n){super(e,"in",n),this.keys=p1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class r4 extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=p1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class s4 extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gc(n)&&Kc(n.arrayValue,this.value)}}class m1 extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kc(this.value.arrayValue,n)}}class A4 extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Kc(this.value.arrayValue,n)}}class i4 extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n=null,r=[],s=[],A=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=A,this.startAt=i,this.endAt=o,this.ue=null}}function w0(t,e=null,n=[],r=[],s=null,A=null,i=null){return new o4(t,e,n,r,s,A,i)}function $i(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>m0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(A){return A.field.canonicalString()+A.dir}(r)).join(","),fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ca(r)).join(",")),e.ue=n}return e.ue}function gu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IC(t.startAt,e.startAt)&&IC(t.endAt,e.endAt)}function qh(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Jh(t,e){return t.filters.filter(n=>n instanceof Ge&&n.field.isEqual(e))}function EC(t,e,n){let r=Ah,s=!0;for(const A of Jh(t,e)){let i=Ah,o=!0;switch(A.op){case"<":case"<=":i=YD(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,o=!1;break;case"!=":case"not-in":i=Ah}xC({value:r,inclusive:s},{value:i,inclusive:o})<0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];xC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})<0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}function bC(t,e,n){let r=xA,s=!0;for(const A of Jh(t,e)){let i=xA,o=!0;switch(A.op){case">=":case">":i=ZD(A.value),o=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,o=!1;break;case"!=":case"not-in":i=xA}CC({value:r,inclusive:s},{value:i,inclusive:o})>0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];CC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})>0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n=null,r=[],s=[],A=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=A,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function w1(t,e,n,r,s,A,i,o){return new $s(t,e,n,r,s,A,i,o)}function Ka(t){return new $s(t)}function TC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xv(t){return t.collectionGroup!==null}function Aa(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),n.add(A.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new lt(Bt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(A=>{n.has(A.canonicalString())||A.isKeyField()||e.ce.push(new zc(A,r))}),n.has(Bt.keyField().canonicalString())||e.ce.push(new zc(Bt.keyField(),r))}return e.ce}function Kn(t){const e=ue(t);return e.le||(e.le=a4(e,Aa(t))),e.le}function a4(t,e){if(t.limitType==="F")return w0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new zc(s.field,A)});const n=t.endAt?new JA(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new JA(t.startAt.position,t.startAt.inclusive):null;return w0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function v0(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xh(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pu(t,e){return gu(Kn(t),Kn(e))&&t.limitType===e.limitType}function v1(t){return`${$i(Kn(t))}|lt:${t.limitType}`}function So(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>g1(s)).join(", ")}]`),fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ca(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ca(s)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function mu(t,e){return e.isFoundDocument()&&function(r,s){const A=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(A):le.isDocumentKey(r.path)?r.path.isEqual(A):r.path.isImmediateParentOf(A)}(t,e)&&function(r,s){for(const A of Aa(r))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const A of r.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,a){const c=_C(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,Aa(r),s)||r.endAt&&!function(i,o,a){const c=_C(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,Aa(r),s))}(t,e)}function y1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function B1(t){return(e,n)=>{let r=!1;for(const s of Aa(t)){const A=l4(s,e,n);if(A!==0)return A;r=r||s.field.isKeyField()}return 0}}function l4(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(A,i,o){const a=i.data.field(A),c=o.data.field(A);return a!==null&&c!==null?qA(a,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,A]of r)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[s,A]of r)e(s,A)})}isEmpty(){return i1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new ht(le.comparator);function tr(){return c4}const x1=new ht(le.comparator);function Pl(...t){let e=x1;for(const n of t)e=e.insert(n.key,n);return e}function C1(t){let e=x1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return Ac()}function _1(){return Ac()}function Ac(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const u4=new ht(le.comparator),d4=new lt(le.comparator);function Pe(...t){let e=d4;for(const n of t)e=e.add(n);return e}const h4=new lt(Re);function Cv(){return h4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function I1(t){return{integerValue:""+t}}function E1(t,e){return t1(e)?I1(e):_v(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function f4(t,e,n){return t instanceof Ia?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&zf(A)&&(A=yv(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(n,e):t instanceof qi?T1(t,e):t instanceof Ji?F1(t,e):function(s,A){const i=b1(s,A),o=FC(i)+FC(s.Pe);return g0(i)&&g0(s.Pe)?I1(o):_v(s.serializer,o)}(t,e)}function g4(t,e,n){return t instanceof qi?T1(t,e):t instanceof Ji?F1(t,e):n}function b1(t,e){return t instanceof Ea?function(r){return g0(r)||function(A){return!!A&&"doubleValue"in A}(r)}(e)?e:{integerValue:0}:null}class Ia extends $f{}class qi extends $f{constructor(e){super(),this.elements=e}}function T1(t,e){const n=U1(e);for(const r of t.elements)n.some(s=>gs(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ji extends $f{constructor(e){super(),this.elements=e}}function F1(t,e){let n=U1(e);for(const r of t.elements)n=n.filter(s=>!gs(s,r));return{arrayValue:{values:n}}}class Ea extends $f{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function FC(t){return vt(t.integerValue||t.doubleValue)}function U1(t){return Gc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.field=e,this.transform=n}}function p4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qi&&s instanceof qi||r instanceof Ji&&s instanceof Ji?xa(r.elements,s.elements,gs):r instanceof Ea&&s instanceof Ea?gs(r.Pe,s.Pe):r instanceof Ia&&s instanceof Ia}(t.transform,e.transform)}class m4{constructor(e,n){this.version=e,this.transformResults=n}}class xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xt}static exists(e){return new xt(void 0,e)}static updateTime(e){return new xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function k1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new za(t.key,xt.none()):new Ga(t.key,t.data,xt.none());{const n=t.data,r=mn.empty();let s=new lt(Bt.comparator);for(let A of e.fields)if(!s.has(A)){let i=n.field(A);i===null&&A.length>1&&(A=A.popLast(),i=n.field(A)),i===null?r.delete(A):r.set(A,i),s=s.add(A)}return new qs(t.key,r,new er(s.toArray()),xt.none())}}function w4(t,e,n){t instanceof Ga?function(s,A,i){const o=s.value.clone(),a=kC(s.fieldTransforms,A,i.transformResults);o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof qs?function(s,A,i){if(!oh(s.precondition,A))return void A.convertToUnknownDocument(i.version);const o=kC(s.fieldTransforms,A,i.transformResults),a=A.data;a.setAll(Q1(s)),a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ic(t,e,n,r){return t instanceof Ga?function(A,i,o,a){if(!oh(A.precondition,i))return o;const c=A.value.clone(),d=QC(A.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof qs?function(A,i,o,a){if(!oh(A.precondition,i))return o;const c=QC(A.fieldTransforms,a,i),d=i.data;return d.setAll(Q1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(A,i,o){return oh(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function v4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),A=b1(r.transform,s||null);A!=null&&(n===null&&(n=mn.empty()),n.set(r.field,A))}return n||null}function UC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xa(r,s,(A,i)=>p4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ga extends qf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qs extends qf{constructor(e,n,r,s,A=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function Q1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kC(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const A=t[s],i=A.transform,o=e.data.field(A.field);r.set(A.field,g4(i,o,n[s]))}return r}function QC(t,e,n){const r=new Map;for(const s of t){const A=s.transform,i=n.data.field(s.field);r.set(s.field,f4(A,i,e))}return r}class za extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Iv extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&w4(A,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let o=this.applyToLocalView(i,A.mutatedFields);o=n.has(s.key)?null:o;const a=k1(i,o);a!==null&&r.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(n,r)=>UC(n,r))&&xa(this.baseMutations,e.baseMutations,(n,r)=>UC(n,r))}}class bv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return u4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,r[i].version);return new bv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,We;function S1(t){switch(t){default:return ve();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function R1(t){if(t===void 0)return jt("GRPC error has no .code"),K.UNKNOWN;switch(t){case Kt.OK:return K.OK;case Kt.CANCELLED:return K.CANCELLED;case Kt.UNKNOWN:return K.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return K.INTERNAL;case Kt.UNAVAILABLE:return K.UNAVAILABLE;case Kt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Kt.NOT_FOUND:return K.NOT_FOUND;case Kt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Kt.ABORTED:return K.ABORTED;case Kt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Kt.DATA_LOSS:return K.DATA_LOSS;default:return ve()}}(We=Kt||(Kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new Pi([4294967295,4294967295],0);function SC(t){const e=N1().encode(t),n=new jT;return n.update(e),new Uint8Array(n.digest())}function RC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([s,A],0)]}class Fv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Pi.fromNumber(r)));return s.compare(B4)===1&&(s=new Pi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=SC(e),[r,s]=RC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);if(!this.de(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new Fv(A,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=SC(e),[r,s]=RC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s,A){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vu(Ie.min(),s,new ht(Re),tr(),Pe())}}class yu{constructor(e,n,r,s,A){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class P1{constructor(e,n){this.targetId=e,this.me=n}}class D1{constructor(e,n,r=St.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class NC{constructor(){this.fe=0,this.ge=DC(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new yu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=DC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x4{constructor(e){this.Le=e,this.Be=new Map,this.ke=tr(),this.qe=PC(),this.Qe=new ht(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const A=s.target;if(qh(A))if(r===0){const i=new le(A.path);this.Ue(n,i,pt.newNoDocument(i,Ie.min()))}else _e(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:A=0}=n;let i,o;try{i=WA(r).toUint8Array()}catch(a){if(a instanceof o1)return fs("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Fv(i,s,A)}catch(a){return fs(a instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(A=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,A,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((A,i)=>{const o=this.Je(i);if(o){if(A.current&&qh(o.target)){const a=new le(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,pt.newNoDocument(a,e))}A.be&&(n.set(i,A.ve()),A.Ce())}});let r=Pe();this.qe.forEach((A,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new vu(e,n,this.Qe,this.ke,r);return this.ke=tr(),this.qe=PC(),this.Qe=new ht(Re),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new NC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new NC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function PC(){return new ht(le.comparator)}function DC(){return new ht(le.comparator)}const C4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I4={and:"AND",or:"OR"};class E4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function y0(t,e){return t.useProto3Json||fu(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b4(t,e){return ba(t,e.toTimestamp())}function Vt(t){return _e(!!t),Ie.fromTimestamp(function(n){const r=js(n);return new Ct(r.seconds,r.nanos)}(t))}function Uv(t,e){return B0(t,e).canonicalString()}function B0(t,e){const n=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function O1(t){const e=Ke.fromString(t);return _e(q1(e)),e}function Wc(t,e){return Uv(t.databaseId,e.path)}function ds(t,e){const n=O1(e);if(n.get(1)!==t.databaseId.projectId)throw new X(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(V1(n))}function M1(t,e){return Uv(t.databaseId,e)}function j1(t){const e=O1(t);return e.length===4?Ke.emptyPath():V1(e)}function x0(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function V1(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LC(t,e,n){return{name:Wc(t,e),fields:n.value.mapValue.fields}}function H1(t,e,n){const r=ds(t,e.name),s=Vt(e.updateTime),A=e.createTime?Vt(e.createTime):Ie.min(),i=new mn({mapValue:{fields:e.fields}}),o=pt.newFoundDocument(r,s,A,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function T4(t,e){return"found"in e?function(r,s){_e(!!s.found),s.found.name,s.found.updateTime;const A=ds(r,s.found.name),i=Vt(s.found.updateTime),o=s.found.createTime?Vt(s.found.createTime):Ie.min(),a=new mn({mapValue:{fields:s.found.fields}});return pt.newFoundDocument(A,i,o,a)}(t,e):"missing"in e?function(r,s){_e(!!s.missing),_e(!!s.readTime);const A=ds(r,s.missing),i=Vt(s.readTime);return pt.newNoDocument(A,i)}(t,e):ve()}function F4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(_e(d===void 0||typeof d=="string"),St.fromBase64String(d||"")):(_e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),St.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?K.UNKNOWN:R1(c.code);return new X(d,c.message||"")}(i);n=new D1(r,s,A,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ds(t,r.document.name),A=Vt(r.document.updateTime),i=r.document.createTime?Vt(r.document.createTime):Ie.min(),o=new mn({mapValue:{fields:r.document.fields}}),a=pt.newFoundDocument(s,A,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ah(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ds(t,r.document),A=r.readTime?Vt(r.readTime):Ie.min(),i=pt.newNoDocument(s,A),o=r.removedTargetIds||[];n=new ah([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ds(t,r.document),A=r.removedTargetIds||[];n=new ah([],A,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:A}=r,i=new y4(s,A),o=r.targetId;n=new P1(o,i)}}return n}function $c(t,e){let n;if(e instanceof Ga)n={update:LC(t,e.key,e.value)};else if(e instanceof za)n={delete:Wc(t,e.key)};else if(e instanceof qs)n={update:LC(t,e.key,e.data),updateMask:N4(e.fieldMask)};else{if(!(e instanceof Iv))return ve();n={verify:Wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(A,i){const o=i.transform;if(o instanceof Ia)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ji)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ea)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:b4(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:ve()}(t,e.precondition)),n}function C0(t,e){const n=e.currentDocument?function(A){return A.updateTime!==void 0?xt.updateTime(Vt(A.updateTime)):A.exists!==void 0?xt.exists(A.exists):xt.none()}(e.currentDocument):xt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)_e(o.setToServerValue==="REQUEST_TIME"),a=new Ia;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new qi(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Ji(d)}else"increment"in o?a=new Ea(i,o.increment):ve();const c=Bt.fromServerFormat(o.fieldPath);return new wu(c,a)}(t,s)):[];if(e.update){e.update.name;const s=ds(t,e.update.name),A=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new er(c.map(d=>Bt.fromServerFormat(d)))}(e.updateMask);return new qs(s,A,i,n,r)}return new Ga(s,A,n,r)}if(e.delete){const s=ds(t,e.delete);return new za(s,n)}if(e.verify){const s=ds(t,e.verify);return new Iv(s,n)}return ve()}function U4(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(s,A){let i=s.updateTime?Vt(s.updateTime):Vt(A);return i.isEqual(Ie.min())&&(i=Vt(A)),new m4(i,s.transformResults||[])}(n,e))):[]}function K1(t,e){return{documents:[M1(t,e.path)]}}function G1(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M1(t,s);const A=function(c){if(c.length!==0)return $1(it.create(c,"and"))}(e.filters);A&&(n.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ro(f.field),direction:Q4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=y0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function z1(t){let e=j1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];n.where&&(A=function(h){const f=W1(h);return f instanceof it&&Bv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(p){return new zc(No(p.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,fu(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,w=h.values||[];return new JA(w,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,w=h.values||[];return new JA(w,f)}(n.endAt)),w1(e,s,i,A,o,"F",a,c)}function k4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=No(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=No(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=No(n.unaryFilter.field);return Ge.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=No(n.unaryFilter.field);return Ge.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(No(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return it.create(n.compositeFilter.filters.map(r=>W1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function Q4(t){return C4[t]}function S4(t){return _4[t]}function R4(t){return I4[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function No(t){return Bt.fromServerFormat(t.fieldPath)}function $1(t){return t instanceof Ge?function(n){if(n.op==="=="){if(BC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(yC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(yC(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:S4(n.op),value:n.value}}}(t):t instanceof it?function(n){const r=n.getFilters().map(s=>$1(s));return r.length===1?r[0]:{compositeFilter:{op:R4(n.op),filters:r}}}(t):ve()}function N4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,s,A=Ie.min(),i=Ie.min(),o=St.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.ct=e}}function P4(t,e){let n;if(e.document)n=H1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),s=Yi(e.noDocument.readTime);n=pt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ve();{const r=le.fromSegments(e.unknownDocument.path),s=Yi(e.unknownDocument.version);n=pt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const A=new Ct(s[0],s[1]);return Ie.fromTimestamp(A)}(e.readTime)),n}function OC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(A,i){return{name:Wc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:ba(A,i.version.toTimestamp()),createTime:ba(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xi(e.version)};else{if(!e.isUnknownDocument())return ve();r.unknownDocument={path:n.path.toArray(),version:Xi(e.version)}}return r}function Yh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yi(t){const e=new Ct(t.seconds,t.nanoseconds);return Ie.fromTimestamp(e)}function Bi(t,e){const n=(e.baseMutations||[]).map(A=>C0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const o=e.mutations[A+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const r=e.mutations.map(A=>C0(t.ct,A)),s=Ct.fromMillis(e.localWriteTimeMs);return new Ev(e.batchId,s,n,r)}function Ll(t){const e=Yi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Yi(t.lastLimboFreeSnapshotVersion):Ie.min();let r;return r=function(A){return A.documents!==void 0}(t.query)?function(A){return _e(A.documents.length===1),Kn(Ka(j1(A.documents[0])))}(t.query):function(A){return Kn(z1(A))}(t.query),new Fs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,St.fromBase64String(t.resumeToken))}function X1(t,e){const n=Xi(e.snapshotVersion),r=Xi(e.lastLimboFreeSnapshotVersion);let s;s=qh(e.target)?K1(t.ct,e.target):G1(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$i(e.target),readTime:n,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function kv(t){const e=z1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xh(e,e.limit,"L"):e}function bp(t,e){return new Tv(e.largestBatchId,C0(t.ct,e.overlayMutation))}function MC(t,e){const n=e.path.lastSegment();return[t,Hn(e.path.popLast()),n]}function jC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Xi(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{getBundleMetadata(e,n){return VC(e).get(n).next(r=>{if(r)return function(A){return{id:A.bundleId,createTime:Yi(A.createTime),version:A.version}}(r)})}saveBundleMetadata(e,n){return VC(e).put(function(s){return{bundleId:s.id,createTime:Xi(Vt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return HC(e).get(n).next(r=>{if(r)return function(A){return{name:A.name,query:kv(A.bundledQuery),readTime:Yi(A.readTime)}}(r)})}saveNamedQuery(e,n){return HC(e).put(function(s){return{name:s.name,readTime:Xi(Vt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function VC(t){return tn(t,"bundles")}function HC(t){return tn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Jf(e,r)}getOverlay(e,n){return wl(e).get(MC(this.userId,n)).next(r=>r?bp(this.serializer,r):null)}getOverlays(e,n){const r=os();return j.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((A,i)=>{const o=new Tv(n,i);s.push(this.ht(e,o))}),j.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(i=>s.add(Hn(i.getCollectionPath())));const A=[];return s.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);A.push(wl(e).j("collectionPathOverlayIndex",o))}),j.waitFor(A)}getOverlaysForCollection(e,n,r){const s=os(),A=Hn(n),i=IDBKeyRange.bound([this.userId,A,r],[this.userId,A,Number.POSITIVE_INFINITY],!0);return wl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=bp(this.serializer,a);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const A=os();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wl(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=bp(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,n){return wl(e).put(function(s,A,i){const[o,a,c]=MC(A,i.mutation.key);return{userId:A,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:$c(s.ct,i.mutation)}}(this.serializer,this.userId,n))}}function wl(t){return tn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{Pt(e){return tn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(vt(e.integerValue));else if("doubleValue"in e){const r=vt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Vc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=js(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(WA(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?a1(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Wf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ve()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const A=e.fields||{};this.dt(n,53);const i="value",o=((s=(r=A[i].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(vt(o)),this.Vt(i,n),this.Tt(A[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),le.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}xi.vt=new xi;function O4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function KC(t){const e=64-function(r){let s=0;for(let A=0;A<8;++A){const i=O4(255&r[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class M4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=KC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=KC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class j4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class V4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class vl{constructor(){this.jt=new M4,this.Ht=new j4(this.jt),this.Jt=new V4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ci(this.indexId,this.documentKey,this.arrayValue,r)}}function AA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=GC(t.arrayValue,e.arrayValue),n!==0?n:(n=GC(t.directionalValue,e.directionalValue),n!==0?n:le.comparator(t.documentKey,e.documentKey)))}function GC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.Xt=new lt((n,r)=>Bt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(_e(e.collectionGroup===this.collectionId),this.nn)return!1;const n=d0(e);if(n!==void 0&&!this.sn(n))return!1;const r=vi(e);let s=new Set,A=0,i=0;for(;A<r.length&&this.sn(r[A]);++A)s=s.add(r[A].fieldPath.canonicalString());if(A===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const a=r[A];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++A}for(;A<r.length;++A){const o=r[A];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new lt(Bt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new rh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new rh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new rh(r.field,r.dir==="asc"?0:1)));return new $h($h.UNKNOWN_ID,this.collectionId,n,jc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){var e,n;if(_e(t instanceof Ge||t instanceof it),t instanceof Ge){if(t instanceof m1){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(A=>Ge.create(t.field,"==",A)))||[];return it.create(s,"or")}return t}const r=t.filters.map(s=>Y1(s));return it.create(r,t.op)}function H4(t){if(t.getFilters().length===0)return[];const e=E0(Y1(t));return _e(Z1(e)),_0(e)||I0(e)?[e]:e.getFilters()}function _0(t){return t instanceof Ge}function I0(t){return t instanceof it&&Bv(t)}function Z1(t){return _0(t)||I0(t)||function(n){if(n instanceof it&&p0(n)){for(const r of n.getFilters())if(!_0(r)&&!I0(r))return!1;return!0}return!1}(t)}function E0(t){if(_e(t instanceof Ge||t instanceof it),t instanceof Ge)return t;if(t.filters.length===1)return E0(t.filters[0]);const e=t.filters.map(r=>E0(r));let n=it.create(e,t.op);return n=Zh(n),Z1(n)?n:(_e(n instanceof it),_e(_a(n)),_e(n.filters.length>1),n.filters.reduce((r,s)=>Qv(r,s)))}function Qv(t,e){let n;return _e(t instanceof Ge||t instanceof it),_e(e instanceof Ge||e instanceof it),n=t instanceof Ge?e instanceof Ge?function(s,A){return it.create([s,A],"and")}(t,e):WC(t,e):e instanceof Ge?WC(e,t):function(s,A){if(_e(s.filters.length>0&&A.filters.length>0),_a(s)&&_a(A))return f1(s,A.getFilters());const i=p0(s)?s:A,o=p0(s)?A:s,a=i.filters.map(c=>Qv(c,o));return it.create(a,"or")}(t,e),Zh(n)}function WC(t,e){if(_a(e))return f1(e,t.getFilters());{const n=e.filters.map(r=>Qv(t,r));return it.create(n,"or")}}function Zh(t){if(_e(t instanceof Ge||t instanceof it),t instanceof Ge)return t;const e=t.getFilters();if(e.length===1)return Zh(e[0]);if(d1(t))return t;const n=e.map(s=>Zh(s)),r=[];return n.forEach(s=>{s instanceof Ge?r.push(s):s instanceof it&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:it.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.un=new Sv}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(pr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class Sv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(Ke.comparator),A=!s.has(r);return this.index[n]=s.add(r),A}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Uint8Array(0);class G4{constructor(e,n){this.databaseId=n,this.cn=new Sv,this.ln=new ai(r=>$i(r),(r,s)=>gu(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const A={collectionId:r,parent:Hn(s)};return $C(e).put(A)}return j.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[qT(n),""],!1,!0);return $C(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==n)break;r.push(is(i.parent))}return r})}addFieldIndex(e,n){const r=yl(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const A=r.add(s);if(n.indexState){const i=Co(e);return A.next(o=>{i.put(jC(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return A.next()}deleteFieldIndex(e,n){const r=yl(e),s=Co(e),A=xo(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=yl(e),r=xo(e),s=Co(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return j.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const A=new zC(r).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,n){const r=xo(e);let s=!0;const A=new Map;return j.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{s&&(s=!!o),A.set(i,o)})).next(()=>{if(s){let i=Pe();const o=[];return j.forEach(A,(a,c)=>{Y("IndexedDbIndexManager",`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(a)} to execute ${$i(n)}`);const d=function(v,R){const S=d0(R);if(S===void 0)return null;for(const N of Jh(v,S.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(v,R){const S=new Map;for(const N of vi(R))for(const I of Jh(v,N.fieldPath))switch(I.op){case"==":case"in":S.set(N.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return S.set(N.fieldPath.canonicalString(),I.value),Array.from(S.values())}return null}(c,a),f=function(v,R){const S=[];let N=!0;for(const I of vi(R)){const x=I.kind===0?EC(v,I.fieldPath,v.startAt):bC(v,I.fieldPath,v.startAt);S.push(x.value),N&&(N=x.inclusive)}return new JA(S,N)}(c,a),w=function(v,R){const S=[];let N=!0;for(const I of vi(R)){const x=I.kind===0?bC(v,I.fieldPath,v.endAt):EC(v,I.fieldPath,v.endAt);S.push(x.value),N&&(N=x.inclusive)}return new JA(S,N)}(c,a),p=this.In(a,c,f),C=this.In(a,c,w),_=this.Tn(a,c,h),y=this.En(a.indexId,d,p,f.inclusive,C,w.inclusive,_);return j.forEach(y,B=>r.G(B,n.limit).next(v=>{v.forEach(R=>{const S=le.fromSegments(R.documentKey);i.has(S)||(i=i.add(S),o.push(S))})}))}).next(()=>o)}return j.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=H4(it.create(e.filters,"and")).map(r=>w0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,A,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,A.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):gd,w=this.An(e,f,r[h%c],s),p=this.Rn(e,f,A[h%c],i),C=o.map(_=>this.An(e,f,_,!0));d.push(...this.createRange(w,p,C))}return d}An(e,n,r,s){const A=new Ci(e,le.empty(),n,r);return s?A:A.Zt()}Rn(e,n,r,s){const A=new Ci(e,le.empty(),n,r);return s?A.Zt():A}Pn(e,n){const r=new zC(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const o of A)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const s=this.hn(n);return j.forEach(s,A=>this.Pn(e,A).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new lt(Bt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new vl;for(const s of vi(e)){const A=n.data.field(s.fieldPath);if(A==null)return null;const i=r.Yt(s.kind);xi.vt.It(A,i)}return r.zt()}dn(e){const n=new vl;return xi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new vl;return xi.vt.It(Wi(this.databaseId,n),r.Yt(function(A){const i=vi(A);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new vl);let A=0;for(const i of vi(e)){const o=r[A++];for(const a of s)if(this.fn(n,i.fieldPath)&&Gc(o))s=this.gn(s,i,o);else{const c=a.Yt(i.kind);xi.vt.It(o,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],A=[];for(const i of r.arrayValue.values||[])for(const o of s){const a=new vl;a.seed(o.zt()),xi.vt.It(i,a.Yt(n.kind)),A.push(a)}return A}fn(e,n){return!!e.filters.find(r=>r instanceof Ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=yl(e),s=Co(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(A=>{const i=[];return j.forEach(A,o=>s.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new jc(h.sequenceNumber,new pr(Yi(h.readTime),new le(is(h.documentKey)),h.largestBatchId)):jc.empty(),w=d.fields.map(([p,C])=>new rh(Bt.fromServerFormat(p),C));return new $h(d.indexId,d.collectionGroup,w,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const A=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:Re(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=yl(e),A=Co(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>j.forEach(o,a=>A.put(jC(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return j.forEach(n,(s,A)=>{const i=r.get(s.collectionGroup);return(i?j.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(r.set(s.collectionGroup,o),j.forEach(o,a=>this.wn(e,s,a).next(c=>{const d=this.Sn(A,a);return c.isEqual(d)?j.resolve():this.bn(e,A,a,c,d)}))))})}Dn(e,n,r,s){return xo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return xo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=xo(e);let A=new lt(AA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{A=A.add(new Ci(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>A)}Sn(e,n){let r=new lt(AA);const s=this.Vn(n,e);if(s==null)return r;const A=d0(n);if(A!=null){const i=e.data.field(A.fieldPath);if(Gc(i))for(const o of i.arrayValue.values||[])r=r.add(new Ci(n.indexId,e.key,this.dn(o),s))}else r=r.add(new Ci(n.indexId,e.key,gd,s));return r}bn(e,n,r,s,A){Y("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const w=a.getIterator(),p=c.getIterator();let C=Bo(w),_=Bo(p);for(;C||_;){let y=!1,B=!1;if(C&&_){const v=d(C,_);v<0?B=!0:v>0&&(y=!0)}else C!=null?B=!0:y=!0;y?(h(_),_=Bo(p)):B?(f(C),C=Bo(w)):(C=Bo(w),_=Bo(p))}}(s,A,AA,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),j.waitFor(i)}yn(e){let n=1;return Co(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,A)=>{A.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>AA(i,o)).filter((i,o,a)=>!o||AA(i,a[o-1])!==0);const s=[];s.push(e);for(const i of r){const o=AA(i,e),a=AA(i,n);if(o===0)s[0]=e.Zt();else if(o>0&&a<0)s.push(i),s.push(i.Zt());else if(a>0)break}s.push(n);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const o=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,gd,[]],a=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,gd,[]];A.push(IDBKeyRange.bound(o,a))}return A}Cn(e,n){return AA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qC)}getMinOffset(e,n){return j.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ve())).next(qC)}}function $C(t){return tn(t,"collectionParents")}function xo(t){return tn(t,"indexEntries")}function yl(t){return tn(t,"indexConfiguration")}function Co(t){return tn(t,"indexState")}function qC(t){_e(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;mv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new pr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $n{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));A.push(a.next(()=>{_e(o===1)}));const c=[];for(const d of n.mutations){const h=n1(e,d.key.path,n.batchId);A.push(s.delete(h)),c.push(d.key)}return j.waitFor(A).next(()=>c)}function ef(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ve();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(41943040,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class Xf{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){_e(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new Xf(A,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iA(e).J({index:"userMutationsIndex",range:r},(s,A,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const A=Po(e),i=iA(e);return i.add({}).next(o=>{_e(typeof o=="number");const a=new Ev(o,n,r,s),c=function(w,p,C){const _=C.baseMutations.map(B=>$c(w.ct,B)),y=C.mutations.map(B=>$c(w.ct,B));return{userId:p,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:_,mutations:y}}(this.serializer,this.userId,a),d=[];let h=new lt((f,w)=>Re(f.canonicalString(),w.canonicalString()));for(const f of s){const w=n1(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(w,kD))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),j.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return iA(e).get(n).next(r=>r?(_e(r.userId===this.userId),Bi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?j.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let A=null;return iA(e).J({index:"userMutationsIndex",range:s},(i,o,a)=>{o.userId===this.userId&&(_e(o.batchId>=r),A=Bi(this.serializer,o)),a.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return iA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,A,i)=>{r=A.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iA(e).U("userMutationsIndex",n).next(r=>r.map(s=>Bi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),A=[];return Po(e).J({range:s},(i,o,a)=>{const[c,d,h]=i,f=is(d);if(c===this.userId&&n.path.isEqual(f))return iA(e).get(h).next(w=>{if(!w)throw ve();_e(w.userId===this.userId),A.push(Bi(this.serializer,w))});a.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Re);const s=[];return n.forEach(A=>{const i=sh(this.userId,A.path),o=IDBKeyRange.lowerBound(i),a=Po(e).J({range:o},(c,d,h)=>{const[f,w,p]=c,C=is(w);f===this.userId&&A.path.isEqual(C)?r=r.add(p):h.done()});s.push(a)}),j.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,A=sh(this.userId,r),i=IDBKeyRange.lowerBound(A);let o=new lt(Re);return Po(e).J({range:i},(a,c,d)=>{const[h,f,w]=a,p=is(f);h===this.userId&&r.isPrefixOf(p)?p.length===s&&(o=o.add(w)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],s=[];return n.forEach(A=>{s.push(iA(e).get(A).next(i=>{if(i===null)throw ve();_e(i.userId===this.userId),r.push(Bi(this.serializer,i))}))}),j.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return eF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),j.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return j.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Po(e).J({range:r},(A,i,o)=>{if(A[0]===this.userId){const a=is(A[1]);s.push(a)}else o.done()}).next(()=>{_e(s.length===0)})})}containsKey(e,n){return tF(e,this.userId,n)}Nn(e){return nF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tF(t,e,n){const r=sh(e,n.path),s=r[1],A=IDBKeyRange.lowerBound(r);let i=!1;return Po(t).J({range:A,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function iA(t){return tn(t,"mutations")}function Po(t){return tn(t,"documentMutations")}function nF(t){return tn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zi(0)}static kn(){return new Zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Zi(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ie.fromTimestamp(new Ct(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>_o(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(_e(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const A=[];return _o(e).J((i,o)=>{const a=Ll(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(s++,A.push(this.removeTargetData(e,a)))}).next(()=>j.waitFor(A)).next(()=>s)}forEachTarget(e,n){return _o(e).J((r,s)=>{const A=Ll(s);n(A)})}qn(e){return XC(e).get("targetGlobalKey").next(n=>(_e(n!==null),n))}Qn(e,n){return XC(e).put("targetGlobalKey",n)}Kn(e,n){return _o(e).put(X1(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$i(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let A=null;return _o(e).J({range:s,index:"queryTargetsIndex"},(i,o,a)=>{const c=Ll(o);gu(n,c.target)&&(A=c,a.done())}).next(()=>A)}addMatchingKeys(e,n,r){const s=[],A=mA(e);return n.forEach(i=>{const o=Hn(i.path);s.push(A.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,i))}),j.waitFor(s)}removeMatchingKeys(e,n,r){const s=mA(e);return j.forEach(n,A=>{const i=Hn(A.path);return j.waitFor([s.delete([r,i]),this.referenceDelegate.removeReference(e,r,A)])})}removeMatchingKeysForTargetId(e,n){const r=mA(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=mA(e);let A=Pe();return s.J({range:r,H:!0},(i,o,a)=>{const c=is(i[1]),d=new le(c);A=A.add(d)}).next(()=>A)}containsKey(e,n){const r=Hn(n.path),s=IDBKeyRange.bound([r],[qT(r)],!1,!0);let A=0;return mA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,o],a,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,n){return _o(e).get(n).next(r=>r?Ll(r):null)}}function _o(t){return tn(t,"targets")}function XC(t){return tn(t,"targetGlobal")}function mA(t){return tn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC([t,e],[n,r]){const s=Re(t,n);return s===0?Re(e,r):s}class W4{constructor(e){this.Un=e,this.buffer=new lt(YC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Y("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oi(n)?Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ii(n)}await this.Hn(3e5)})}}class q4{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(Zn.oe);const r=new W4(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(JC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,A,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(A=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Qo()<=je.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${A} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function J4(t,e){return new q4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n){this.db=e,this.garbageCollector=J4(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return pd(e,r)}removeReference(e,n,r){return pd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pd(e,n)}nr(e,n){return function(s,A){let i=!1;return nF(s).Y(o=>tF(s,o,A).next(a=>(a&&(i=!0),j.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return A++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Ie.min()),mA(e).delete(function(h){return[0,Hn(h.path)]}(i))))});s.push(a)}}).next(()=>j.waitFor(s)).next(()=>r.apply(e)).next(()=>A)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pd(e,n)}tr(e,n){const r=mA(e);let s,A=Zn.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(A!==Zn.oe&&n(new le(is(s)),A),A=c,s=a):A=Zn.oe}).next(()=>{A!==Zn.oe&&n(new le(is(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pd(t,e){return mA(t).put(function(r,s){return{targetId:0,path:Hn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(){this.changes=new ai(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fi(e).put(r)}removeEntry(e,n,r){return fi(e).delete(function(A,i){const o=A.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Yh(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=pt.newInvalidDocument(n);return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bl(n))},(s,A)=>{r=this.ir(n,A)}).next(()=>r)}sr(e,n){let r={size:0,document:pt.newInvalidDocument(n)};return fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bl(n))},(s,A)=>{r={document:this.ir(n,A),size:ef(A)}}).next(()=>r)}getEntries(e,n){let r=tr();return this._r(e,n,(s,A)=>{const i=this.ir(s,A);r=r.insert(s,i)}).next(()=>r)}ar(e,n){let r=tr(),s=new ht(le.comparator);return this._r(e,n,(A,i)=>{const o=this.ir(A,i);r=r.insert(A,o),s=s.insert(A,ef(i))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return j.resolve();let s=new lt(t_);n.forEach(a=>s=s.add(a));const A=IDBKeyRange.bound(Bl(s.first()),Bl(s.last())),i=s.getIterator();let o=i.getNext();return fi(e).J({index:"documentKeyIndex",range:A},(a,c,d)=>{const h=le.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&t_(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(Bl(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,A){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),Yh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=tr();for(const h of c){const f=this.ir(le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(mu(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let A=tr();const i=e_(n,r),o=e_(n,pr.max());return fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(le.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new Z4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ZC(e).get("remoteDocumentGlobalKey").next(n=>(_e(!!n),n))}rr(e,n){return ZC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=P4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ie.min())))return r}return pt.newInvalidDocument(e)}}function sF(t){return new Y4(t)}class Z4 extends rF{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ai(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new lt((A,i)=>Re(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const o=this.lr.get(A);if(n.push(this.cr.removeEntry(e,A,o.readTime)),i.isValidDocument()){const a=OC(this.cr.serializer,i);s=s.add(A.path.popLast());const c=ef(a);r+=c-o.size,n.push(this.cr.addEntry(e,A,a))}else if(r-=o.size,this.trackRemovals){const a=OC(this.cr.serializer,i.convertToNoDocument(Ie.min()));n.push(this.cr.addEntry(e,A,a))}}),s.forEach(A=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),n.push(this.cr.updateMetadata(e,r)),j.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:r.get(A).readTime})}),r))}}function ZC(t){return tn(t,"remoteDocumentGlobal")}function fi(t){return tn(t,"remoteDocumentsV14")}function Bl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function e_(t,e){const n=e.documentKey.path.toArray();return[t,Yh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function t_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let A=0;A<n.length-2&&A<r.length-2;++A)if(s=Re(n[A],r[A]),s)return s;return s=Re(n.length,r.length),s||(s=Re(n[n.length-2],r[r.length-2]),s||Re(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ic(r.mutation,s,er.empty(),Ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const s=os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(A=>{let i=Pl();return A.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(A=>{n.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let A=tr();const i=Ac(),o=function(){return Ac()}();return n.forEach((a,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof qs)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),ic(d.mutation,c,d.mutation.getFieldMask(),Ct.now())):i.set(c.key,er.empty())}),this.recalculateAndSaveOverlays(e,A).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new eL(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Ac();let s=new ht((i,o)=>i-o),A=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||er.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(s.get(o.batchId)||Pe()).add(a);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=_1();d.forEach(f=>{if(!A.has(f)){const w=k1(n.get(f),r.get(f));w!==null&&h.set(f,w),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return j.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-A.size):j.resolve(os());let o=-1,a=A;return i.next(c=>j.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),A.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,a,c,Pe())).next(d=>({batchId:o,changes:C1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let s=Pl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const A=n.collectionGroup;let i=Pl();return this.indexManager.getCollectionParents(e,A).next(o=>j.forEach(o,a=>{const c=function(h,f){return new $s(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,A,s))).next(i=>{A.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,pt.newInvalidDocument(d)))});let o=Pl();return i.forEach((a,c)=>{const d=A.get(a);d!==void 0&&ic(d.mutation,c,er.empty(),Ct.now()),mu(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Vt(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:kv(s.bundledQuery),readTime:Vt(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.overlays=new ht(le.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return j.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,A)=>{this.ht(e,n,A)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=os(),A=n.length+1,i=new le(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===A&&a.largestBatchId>r&&s.set(a.getKey(),a)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let A=new ht((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=A.get(c.largestBatchId);d===null&&(d=os(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=os(),a=A.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return j.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Tv(n,r));let A=this.Ir.get(n);A===void 0&&(A=Pe(),this.Ir.set(n,A)),this.Ir.set(n,A.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.Tr=new lt(on.Er),this.dr=new lt(on.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new on(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Ke([])),r=new on(n,e),s=new on(n,e+1),A=[];return this.dr.forEachInRange([r,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Ke([])),r=new on(n,e),s=new on(n,e+1);let A=Pe();return this.dr.forEachInRange([r,s],i=>{A=A.add(i.key)}),A}containsKey(e){const n=new on(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(on.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ev(A,n,r,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new on(o.key,A)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return j.resolve(i)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),A=s<0?0:s;return j.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),s=new on(n,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([r,s],i=>{const o=this.Dr(i.wr);A.push(o)}),j.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(Re);return n.forEach(s=>{const A=new on(s,0),i=new on(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],o=>{r=r.add(o.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let A=r;le.isDocumentKey(A)||(A=A.child(""));const i=new on(new le(A),0);let o=new lt(Re);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(a.wr)),!0)},i),j.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,s=>{const A=new on(s.key,n.batchId);return r=r.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new on(n,0),s=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.Mr=e,this.docs=function(){return new ht(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),A=s?s.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=tr();return n.forEach(s=>{const A=this.docs.get(s);r=r.insert(s,A?A.document.mutableCopy():pt.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let A=tr();const i=n.path,o=new le(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||mv(XT(d),r)<=0||(s.has(d.key)||mu(n,d))&&(A=A.insert(d.key,d.mutableCopy()))}return j.resolve(A)}getAllFromCollectionGroup(e,n,r,s){ve()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iL(this)}getSize(e){return j.resolve(this.size)}}class iL extends rF{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.persistence=e,this.Nr=new ai(n=>$i(n),gu),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rv,this.targetCount=0,this.kr=Zi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const A=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),j.waitFor(A).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,A=[];return s&&n.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),j.waitFor(A)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zn(0),this.Kr=!1,this.Kr=!0,this.$r=new rL,this.referenceDelegate=e(this),this.Ur=new oL(this),this.indexManager=new K4,this.remoteDocumentCache=function(s){return new AL(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new J1(n),this.Gr=new tL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new aL(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class aL extends ZT{constructor(e){super(),this.currentSequenceNumber=e}}class Yf{constructor(e){this.persistence=e,this.Jr=new Rv,this.Yr=null}static Zr(e){return new Yf(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const s=le.fromPath(r);return this.ei(e,s).next(A=>{A||n.removeEntry(s,Ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.serializer=e}O(e,n,r,s){const A=new Gf("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0}),a.createObjectStore("documentMutations")}(e),n_(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=j.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),n_(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),r<4&&s>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0});const h=c.store("mutations"),f=d.map(w=>h.put(w));return j.waitFor(f)})}(e,A))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(i=i.next(()=>this.ni(A))),r<6&&s>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),r<7&&s>=7&&(i=i.next(()=>this.ii(A))),r<8&&s>=8&&(i=i.next(()=>this.si(e,A))),r<9&&s>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(i=i.next(()=>this.oi(A))),r<11&&s>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:HD});c.createIndex("collectionPathOverlayIndex",KD,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",GD,{unique:!1})})(e)})),r<13&&s>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:QD});c.createIndex("documentKeyIndex",SD),c.createIndex("collectionGroupIndex",RD)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),r<15&&s>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:OD}).createIndex("sequenceNumberIndex",MD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:jD}).createIndex("documentKeyIndex",VD,{unique:!1})}(e))),r<16&&s>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=ef(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>j.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>j.forEach(o,a=>{_e(a.userId===A.userId);const c=Bi(this.serializer,a);return eF(e,A.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return r.J((i,o)=>{const a=new Ke(i),c=function(h){return[0,Hn(h)]}(a);A.push(n.get(c).next(d=>d?j.resolve():(h=>n.put({targetId:0,path:Hn(h),sequenceNumber:s.highestListenSequenceNumber}))(a)))}).next(()=>j.waitFor(A))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:LD});const r=n.store("collectionParents"),s=new Sv,A=i=>{if(s.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Hn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new Ke(i);return A(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=is(o);return A(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const A=Ll(s),i=X1(this.serializer,A);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((A,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new le(Ke.fromString(h.document.name).popFirst(5)):h.noDocument?le.fromSegments(h.noDocument.path):h.unknownDocument?le.fromSegments(h.unknownDocument.path):ve()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(o.put(c))}).next(()=>j.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=sF(this.serializer),A=new iF(Yf.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:Pe();Bi(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),j.forEach(o,(a,c)=>{const d=new ln(c),h=Jf.lt(this.serializer,d),f=A.getIndexManager(d),w=Xf.lt(d,this.serializer,f,A.referenceDelegate);return new AF(s,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new h0(n,Zn.oe),a).next()})})}}function n_(t){t.createObjectStore("targetDocuments",{keyPath:PD}).createIndex("documentTargetsIndex",DD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ND,{unique:!0}),t.createObjectStore("targetGlobal")}const Tp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Nv{constructor(e,n,r,s,A,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=A,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Nv.D())throw new X(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new X4(this,s),this.Ai=n+"main",this.serializer=new J1(a),this.Ri=new us(this.Ai,this.hi,new lL(this.serializer)),this.$r=new L4,this.Ur=new z4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sF(this.serializer),this.Gr=new D4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&jt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(K.FAILED_PRECONDITION,Tp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Zn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(oi(e))return Y("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return xl(e).get("owner").next(n=>j.resolve(this.vi(n)))}Ci(e){return md(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=tn(n,"clientMetadata");return r.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(o=>A.indexOf(o)===-1);return j.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?j.resolve(!0):xl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new X(K.FAILED_PRECONDITION,Tp);return!1}}return!(!this.networkEnabled||!this.inForeground)||md(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(A||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new h0(e,Zn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>md(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Xf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new G4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Jf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",A=function(a){return a===17?$D:a===16?WD:a===15?vv:a===14?A1:a===13?s1:a===12?zD:a===11?r1:void ve()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,o=>(i=new h0(o,this.Qr?this.Qr.next():Zn.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new X(K.FAILED_PRECONDITION,YT);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return xl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(K.FAILED_PRECONDITION,Tp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xl(e).put("owner",n)}static D(){return us.D()}bi(e){const n=xl(e);return n.get("owner").next(r=>this.vi(r)?(Y("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):j.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(jt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;ET()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Y("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){jt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xl(t){return tn(t,"owner")}function md(t){return tn(t,"clientMetadata")}function Pv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Pe(),s=Pe();for(const A of n.docChanges)switch(A.type){case 0:r=r.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new Dv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ET()?8:e1(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const A={result:null};return this.Yi(e,n).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,n,s,r).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new cL;return this.Xi(e,n,i).next(o=>{if(A.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>A.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Qo()<=je.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Qo()<=je.DEBUG&&Y("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Qo()<=je.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):j.resolve())}Yi(e,n){if(TC(n))return j.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xh(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(A=>{const i=Pe(...A);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,Xh(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,s){return TC(n)||s.isEqual(Ie.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(A=>{const i=this.ts(n,A);return this.ns(n,i,r,s)?j.resolve(null):(Qo()<=je.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),So(n)),this.rs(e,i,n,JT(s,-1)).next(o=>o))})}ts(e,n){let r=new lt(B1(e));return n.forEach((s,A)=>{mu(e,A)&&(r=r.add(A))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const A=e.limitType==="F"?n.last():n.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,n,r){return Qo()<=je.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",So(n)),this.Ji.getDocumentsMatchingQuery(e,n,pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(A=>(n.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ht(Re),this._s=new ai(A=>$i(A),gu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function aF(t,e,n,r){return new uL(t,e,n,r)}async function lF(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(A=>(s=A,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(A=>{const i=[],o=[];let a=Pe();for(const c of s){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of A){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function dL(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),A=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let w=j.resolve();return f.forEach(p=>{w=w.next(()=>d.getEntry(a,p)).next(C=>{const _=c.docVersions.get(p);_e(_!==null),C.version.compareTo(_)<0&&(h.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),d.addEntry(C)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,A).next(()=>A.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Pe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function cF(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hL(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(A,d.addedDocuments,h)));let w=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(St.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),s=s.insert(h,w),function(C,_,y){return C.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,w,d)&&o.push(n.Ur.updateTargetData(A,w))});let a=tr(),c=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(A,d))}),o.push(uF(A,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(Ie.min())){const d=n.Ur.getLastRemoteSnapshotVersion(A).next(h=>n.Ur.setTargetsMetadata(A,A.currentSequenceNumber,r));o.push(d)}return j.waitFor(o).next(()=>i.apply(A)).next(()=>n.localDocuments.getLocalViewOfDocuments(A,a,c)).next(()=>a)}).then(A=>(n.os=s,A))}function uF(t,e,n){let r=Pe(),s=Pe();return n.forEach(A=>r=r.add(A)),e.getEntries(t,r).next(A=>{let i=tr();return n.forEach((o,a)=>{const c=A.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),a.isNoDocument()&&a.version.isEqual(Ie.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):Y("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:s}})}function fL(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ta(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(A=>A?(s=A,j.resolve(s)):n.Ur.allocateTargetId(r).next(i=>(s=new Fs(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fa(t,e,n){const r=ue(t),s=r.os.get(e),A=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",A,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!oi(i))throw i;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function tf(t,e,n){const r=ue(t);let s=Ie.min(),A=Pe();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=ue(a),f=h._s.get(d);return f!==void 0?j.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,Kn(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{A=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?s:Ie.min(),n?A:Pe())).next(o=>(fF(r,y1(e),o),{documents:o,Ts:A})))}function dF(t,e){const n=ue(t),r=ue(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",A=>r.ot(A,e).next(i=>i?i.target:null))}function hF(t,e){const n=ue(t),r=n.us.get(e)||Ie.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,JT(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(fF(n,e,s),s))}function fF(t,e,n){let r=t.us.get(e)||Ie.min();n.forEach((s,A)=>{A.readTime.compareTo(r)>0&&(r=A.readTime)}),t.us.set(e,r)}async function gL(t,e,n,r){const s=ue(t);let A=Pe(),i=tr();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),a=await Ta(s,function(d){return Kn(Ka(Ke.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>uF(c,o,i).next(d=>(o.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>s.Ur.addMatchingKeys(c,A,a.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function pL(t,e,n=Pe()){const r=await Ta(t,Kn(kv(e.bundledQuery))),s=ue(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=Vt(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const o=r.withResumeToken(St.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(A,o).next(()=>s.Ur.removeMatchingKeysForTargetId(A,r.targetId)).next(()=>s.Ur.addMatchingKeys(A,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function r_(t,e){return`firestore_clients_${t}_${e}`}function s_(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fp(t,e){return`firestore_targets_${t}_${e}`}class nf{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new X(s.error.code,s.error.message))),i?new nf(e,n,s.state,A):(jt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,A=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return A&&r.error&&(A=typeof r.error.message=="string"&&typeof r.error.code=="string",A&&(s=new X(r.error.code,r.error.message))),A?new oc(e,r.state,s):(jt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,A=Cv();for(let i=0;s&&i<r.activeTargetIds.length;++i)s=t1(r.activeTargetIds[i]),A=A.add(r.activeTargetIds[i]);return s?new rf(e,A):(jt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Lv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Lv(n.clientId,n.onlineState):(jt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class b0{constructor(){this.activeTargetIds=Cv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Up{constructor(e,n,r,s,A){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ht(Re),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=r_(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new b0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(r_(this.persistenceKey,r));if(s){const A=rf.Rs(r,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Fp(this.persistenceKey,e));if(s){const A=oc.Rs(e,s);A&&(r=A.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y("SharedClientState","READ",e,n),n}setItem(e,n){Y("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Y("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(A){let i=Zn.oe;if(A!=null)try{const o=JSON.parse(A);_e(typeof o=="number"),i=o}catch(o){jt("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Zn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new nf(this.currentUser,e,n,r),A=s_(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const n=s_(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Fp(this.persistenceKey,e),A=new oc(e,n,r);this.setItem(s,A.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return rf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),A=r[2]!==void 0?r[2]:null;return nf.Rs(new ln(A),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return oc.Rs(s,n)}Ls(e){return Lv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Y("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(r),i=[],o=[];return A.forEach(a=>{s.has(a)||i.push(a)}),s.forEach(a=>{A.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Cv();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class gF{constructor(){this.so=new b0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new b0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function kp(){return wd===null?wd=function(){return 268435456+Math.round(2147483648*Math.random())}():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class yL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(n,r,s,A,i){const o=kp(),a=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(n,a,c,s).then(d=>(Y("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw fs("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Lo(n,r,s,A,i,o){return this.Mo(n,r,s,A,i)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((A,i)=>n[i]=A),s&&s.headers.forEach((A,i)=>n[i]=A)}xo(n,r){const s=wL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const A=kp();return new Promise((i,o)=>{const a=new VT;a.setWithCredentials(!0),a.listenOnce(HT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case nh.NO_ERROR:const d=a.getResponseJson();Y(Tn,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case nh.TIMEOUT:Y(Tn,`RPC '${e}' ${A} timed out`),o(new X(K.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const h=a.getStatus();if(Y(Tn,`RPC '${e}' ${A} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const p=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(y)>=0?y:K.UNKNOWN}(w.status);o(new X(p,w.message))}else o(new X(K.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new X(K.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{Y(Tn,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);Y(Tn,`RPC '${e}' ${A} sending request:`,s),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=kp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=zT(),o=GT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=A.join("");Y(Tn,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,w=!1;const p=new vL({Io:_=>{w?Y(Tn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(f||(Y(Tn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Y(Tn,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),C=(_,y,B)=>{_.listen(y,v=>{try{B(v)}catch(R){setTimeout(()=>{throw R},0)}})};return C(h,Nl.EventType.OPEN,()=>{w||(Y(Tn,`RPC '${e}' stream ${s} transport opened.`),p.yo())}),C(h,Nl.EventType.CLOSE,()=>{w||(w=!0,Y(Tn,`RPC '${e}' stream ${s} transport closed`),p.So())}),C(h,Nl.EventType.ERROR,_=>{w||(w=!0,fs(Tn,`RPC '${e}' stream ${s} transport errored:`,_),p.So(new X(K.UNAVAILABLE,"The operation could not be completed")))}),C(h,Nl.EventType.MESSAGE,_=>{var y;if(!w){const B=_.data[0];_e(!!B);const v=B,R=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(R){Y(Tn,`RPC '${e}' stream ${s} received error:`,R);const S=R.status;let N=function(b){const k=Kt[b];if(k!==void 0)return R1(k)}(S),I=R.message;N===void 0&&(N=K.INTERNAL,I="Unknown error status: "+S+" with message "+R.message),w=!0,p.So(new X(N,I)),h.close()}else Y(Tn,`RPC '${e}' stream ${s} received:`,B),p.bo(B)}}),C(o,KT.STAT_EVENT,_=>{_.stat===u0.PROXY?Y(Tn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===u0.NOPROXY&&Y(Tn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(){return typeof window<"u"?window:null}function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return new E4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,n,r,s,A,i,o,a){this.ui=e,this.Ho=r,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ov(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(jt(n.toString()),jt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new X(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BL extends mF{constructor(e,n,r,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=F4(this.serializer,e),r=function(A){if(!("targetChange"in A))return Ie.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Ie.min():i.readTime?Vt(i.readTime):Ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=x0(this.serializer),n.addTarget=function(A,i){let o;const a=i.target;if(o=qh(a)?{documents:K1(A,a)}:{query:G1(A,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=L1(A,i.resumeToken);const c=y0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ie.min())>0){o.readTime=ba(A,i.snapshotVersion.toTimestamp());const c=y0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=k4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=x0(this.serializer),n.removeTarget=e,this.a_(n)}}class xL extends mF{constructor(e,n,r,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=U4(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=x0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$c(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new X(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,B0(n,r),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new X(K.UNKNOWN,A.toString())})}Lo(e,n,r,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,B0(n,r),s,i,o,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(K.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _L{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jt(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,r,s,A){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{r.enqueueAndForget(async()=>{li(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=ue(a);c.L_.add(4),await Wa(c),c.q_.set("Unknown"),c.L_.delete(4),await xu(c)}(this))})}),this.q_=new _L(r,s)}}async function xu(t){if(li(t))for(const e of t.B_)await e(!0)}async function Wa(t){for(const e of t.B_)await e(!1)}function Zf(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vv(n)?jv(n):qa(n).r_()&&Mv(n,e))}function Ua(t,e){const n=ue(t),r=qa(n);n.N_.delete(e),r.r_()&&wF(n,e),n.N_.size===0&&(r.r_()?r.o_():li(n)&&n.q_.set("Unknown"))}function Mv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).A_(e)}function wF(t,e){t.Q_.xe(e),qa(t).R_(e)}function jv(t){t.Q_=new x4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.q_.v_()}function Vv(t){return li(t)&&!qa(t).n_()&&t.N_.size>0}function li(t){return ue(t).L_.size===0}function vF(t){t.Q_=void 0}async function EL(t){t.q_.set("Online")}async function bL(t){t.N_.forEach((e,n)=>{Mv(t,e)})}async function TL(t,e){vF(t),Vv(t)?(t.q_.M_(e),jv(t)):t.q_.set("Unknown")}async function FL(t,e,n){if(t.q_.set("Online"),e instanceof D1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const o of A.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sf(t,r)}else if(e instanceof ah?t.Q_.Ke(e):e instanceof P1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ie.min()))try{const r=await cF(t.localStore);n.compareTo(r)>=0&&await function(A,i){const o=A.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=A.N_.get(a);if(!d)return;A.N_.set(a,d.withResumeToken(St.EMPTY_BYTE_STRING,d.snapshotVersion)),wF(A,a);const h=new Fs(d.target,a,c,d.sequenceNumber);Mv(A,h)}),A.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await sf(t,r)}}async function sf(t,e,n){if(!oi(e))throw e;t.L_.add(1),await Wa(t),t.q_.set("Offline"),n||(n=()=>cF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xu(t)})}function yF(t,e){return e().catch(n=>sf(t,n,e))}async function $a(t){const e=ue(t),n=XA(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UL(e);)try{const s=await fL(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,kL(e,s)}catch(s){await sf(e,s)}BF(e)&&xF(e)}function UL(t){return li(t)&&t.O_.length<10}function kL(t,e){t.O_.push(e);const n=XA(t);n.r_()&&n.V_&&n.m_(e.mutations)}function BF(t){return li(t)&&!XA(t).n_()&&t.O_.length>0}function xF(t){XA(t).start()}async function QL(t){XA(t).p_()}async function SL(t){const e=XA(t);for(const n of t.O_)e.m_(n.mutations)}async function RL(t,e,n){const r=t.O_.shift(),s=bv.from(r,e,n);await yF(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $a(t)}async function NL(t,e){e&&XA(t).V_&&await async function(r,s){if(function(i){return S1(i)&&i!==K.ABORTED}(s.code)){const A=r.O_.shift();XA(r).s_(),await yF(r,()=>r.remoteSyncer.rejectFailedWrite(A.batchId,s)),await $a(r)}}(t,e),BF(t)&&xF(t)}async function i_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=li(n);n.L_.add(3),await Wa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xu(n)}async function T0(t,e){const n=ue(t);e?(n.L_.delete(2),await xu(n)):e||(n.L_.add(2),await Wa(n),n.q_.set("Unknown"))}function qa(t){return t.K_||(t.K_=function(n,r,s){const A=ue(n);return A.w_(),new BL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:EL.bind(null,t),Ro:bL.bind(null,t),mo:TL.bind(null,t),d_:FL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Vv(t)?jv(t):t.q_.set("Unknown")):(await t.K_.stop(),vF(t))})),t.K_}function XA(t){return t.U_||(t.U_=function(n,r,s){const A=ue(n);return A.w_(),new xL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QL.bind(null,t),mo:NL.bind(null,t),f_:SL.bind(null,t),g_:RL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $a(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r,s,A){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=A,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,A){const i=Date.now()+r,o=new Hv(e,n,i,s,A);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ja(t,e){if(jt("AsyncQueue",`${e}: ${t}`),oi(t))return new X(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new ia(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.W_=new ht(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ka{constructor(e,n,r,s,A,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,A){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new ka(e,n,ia.emptySet(n),i,r,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DL{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),A=s.queries;s.queries=a_(),A.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new X(K.ABORTED,"Firestore shutting down"))}}function a_(){return new ai(t=>v1(t),pu)}async function Kv(t,e){const n=ue(t);let r=3;const s=e.query;let A=n.queries.get(s);A?!A.H_()&&e.J_()&&(r=2):(A=new PL,r=e.J_()?0:1);try{switch(r){case 0:A.z_=await n.onListen(s,!0);break;case 1:A.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=Ja(i,`Initialization of query '${So(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,A),A.j_.push(e),e.Z_(n.onlineState),A.z_&&e.X_(A.z_)&&zv(n)}async function Gv(t,e){const n=ue(t),r=e.query;let s=3;const A=n.queries.get(r);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LL(t,e){const n=ue(t);let r=!1;for(const s of e){const A=s.query,i=n.queries.get(A);if(i){for(const o of i.j_)o.X_(s)&&(r=!0);i.z_=s}}r&&zv(n)}function OL(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const A of s.j_)A.onError(n);r.queries.delete(e)}function zv(t){t.Y_.forEach(e=>{e.next()})}var F0,l_;(l_=F0||(F0={})).ea="default",l_.Cache="cache";class Wv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==F0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this.serializer=e}Es(e){return ds(this.serializer,e)}ds(e){return e.metadata.exists?H1(this.serializer,e.document,!1):pt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Vt(e)}}class jL{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CF(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ke.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new c_(this.serializer);for(const s of e)if(s.metadata.queries){const A=r.Es(s.metadata.name);for(const i of s.metadata.queries){const o=(n.get(i)||Pe()).add(A);n.set(i,o)}}return n}async complete(){const e=await gL(this.localStore,new c_(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await pL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function CF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.key=e}}class IF{constructor(e){this.key=e}}class EF{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=B1(e),this.Ra=new ia(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new o_,s=n?n.Ra:this.Ra;let A=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),w=mu(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;f&&w?f.data.isEqual(w.data)?p!==C&&(r.track({type:3,doc:w}),_=!0):this.ga(f,w)||(r.track({type:2,doc:w}),_=!0,(a&&this.Aa(w,a)>0||c&&this.Aa(w,c)<0)&&(o=!0)):!f&&w?(r.track({type:0,doc:w}),_=!0):f&&!w&&(r.track({type:1,doc:f}),_=!0,(a||c)&&(o=!0)),_&&(w?(i=i.add(w),A=C?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:A}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,p){const C=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return C(w)-C(p)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],a=this.da.size===0&&this.current&&!s?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new ka(this.query,e.Ra,A,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new o_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new IF(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _F(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class VL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HL{constructor(e){this.key=e,this.va=!1}}class KL{constructor(e,n,r,s,A,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new ai(o=>v1(o),pu),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(le.comparator),this.Na=new Map,this.La=new Rv,this.Ba={},this.ka=new Map,this.qa=Zi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function GL(t,e,n=!0){const r=eg(t);let s;const A=r.Fa.get(e);return A?(r.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await bF(r,e,n,!0),s}async function zL(t,e){const n=eg(t);await bF(n,e,!0,!1)}async function bF(t,e,n,r){const s=await Ta(t.localStore,Kn(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,n);let o;return r&&(o=await $v(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&Zf(t.remoteStore,s),o}async function $v(t,e,n,r,s){t.Ka=(h,f,w)=>async function(C,_,y,B){let v=_.view.ma(y);v.ns&&(v=await tf(C.localStore,_.query,!1).then(({documents:I})=>_.view.ma(I,v)));const R=B&&B.targetChanges.get(_.targetId),S=B&&B.targetMismatches.get(_.targetId)!=null,N=_.view.applyChanges(v,C.isPrimaryClient,R,S);return U0(C,_.targetId,N.wa),N.snapshot}(t,h,f,w);const A=await tf(t.localStore,e,!0),i=new EF(e,A.Ts),o=i.ma(A.documents),a=yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,a);U0(t,n,c.wa);const d=new VL(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function WL(t,e,n){const r=ue(t),s=r.Fa.get(e),A=r.Ma.get(s.targetId);if(A.length>1)return r.Ma.set(s.targetId,A.filter(i=>!pu(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fa(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ua(r.remoteStore,s.targetId),Qa(r,s.targetId)}).catch(ii)):(Qa(r,s.targetId),await Fa(r.localStore,s.targetId,!0))}async function $L(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ua(n.remoteStore,r.targetId))}async function qL(t,e,n){const r=Yv(t);try{const s=await function(i,o){const a=ue(i),c=Ct.now(),d=o.reduce((w,p)=>w.add(p.key),Pe());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let p=tr(),C=Pe();return a.cs.getEntries(w,d).next(_=>{p=_,p.forEach((y,B)=>{B.isValidDocument()||(C=C.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,p)).next(_=>{h=_;const y=[];for(const B of o){const v=v4(B,h.get(B.key).overlayedDocument);v!=null&&y.push(new qs(B.key,v,c1(v.value.mapValue),xt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,c,y,o)}).next(_=>{f=_;const y=_.applyToLocalDocumentSet(h,C);return a.documentOverlayCache.saveOverlays(w,_.batchId,y)})}).then(()=>({batchId:f.batchId,changes:C1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new ht(Re)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,s.batchId,n),await Js(r,s.changes),await $a(r.remoteStore)}catch(s){const A=Ja(s,"Failed to persist write");n.reject(A)}}async function TF(t,e){const n=ue(t);try{const r=await hL(n.localStore,e);e.targetChanges.forEach((s,A)=>{const i=n.Na.get(A);i&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?_e(i.va):s.removedDocuments.size>0&&(_e(i.va),i.va=!1))}),await Js(n,r,e)}catch(r){await ii(r)}}function u_(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((A,i)=>{const o=i.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const a=ue(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&zv(a)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JL(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),A=s&&s.key;if(A){let i=new ht(le.comparator);i=i.insert(A,pt.newNoDocument(A,Ie.min()));const o=Pe().add(A),a=new vu(Ie.min(),new Map,new ht(Re),i,o);await TF(r,a),r.Oa=r.Oa.remove(A),r.Na.delete(e),Xv(r)}else await Fa(r.localStore,e,!1).then(()=>Qa(r,e,n)).catch(ii)}async function XL(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await dL(n.localStore,e);Jv(n,r,null),qv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Js(n,s)}catch(s){await ii(s)}}async function YL(t,e,n){const r=ue(t);try{const s=await function(i,o){const a=ue(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(_e(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);Jv(r,e,n),qv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Js(r,s)}catch(s){await ii(s)}}async function ZL(t,e){const n=ue(t);li(n.remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=ue(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=Ja(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function qv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Jv(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const A=s.get(e);A&&(n?A.reject(n):A.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Qa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||FF(t,r)})}function FF(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ua(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Xv(t))}function U0(t,e,n){for(const r of n)r instanceof _F?(t.La.addReference(r.key,e),eO(t,r)):r instanceof IF?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||FF(t,r.key)):ve()}function eO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),Xv(t))}function Xv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Ke.fromString(e)),r=t.qa.next();t.Na.set(r,new HL(n)),t.Oa=t.Oa.insert(n,r),Zf(t.remoteStore,new Fs(Kn(Ka(n.path)),r,"TargetPurposeLimboResolution",Zn.oe))}}async function Js(t,e,n){const r=ue(t),s=[],A=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Dv.Wi(a.targetId,c);A.push(h)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(a,c){const d=ue(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(c,f=>j.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>j.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!oi(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),p=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(p);d.os=d.os.insert(f,C)}}}(r.localStore,A))}async function tO(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await lF(n.localStore,e);n.currentUser=e,function(A,i){A.ka.forEach(o=>{o.forEach(a=>{a.reject(new X(K.CANCELLED,i))})}),A.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Js(n,r.hs)}}function nO(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return Pe().add(r.key);{let s=Pe();const A=n.Ma.get(e);if(!A)return s;for(const i of A){const o=n.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}async function rO(t,e){const n=ue(t),r=await tf(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&U0(n,e.targetId,s.wa),s}async function sO(t,e){const n=ue(t);return hF(n.localStore,e).then(r=>Js(n,r))}async function AO(t,e,n,r){const s=ue(t),A=await function(o,a){const c=ue(o),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):j.resolve(null)))}(s.localStore,e);A!==null?(n==="pending"?await $a(s.remoteStore):n==="acknowledged"||n==="rejected"?(Jv(s,e,r||null),qv(s,e),function(o,a){ue(ue(o).mutationQueue).On(a)}(s.localStore,e)):ve(),await Js(s,A)):Y("SyncEngine","Cannot apply mutation batch with id: "+e)}async function iO(t,e){const n=ue(t);if(eg(n),Yv(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await d_(n,r.toArray());n.Qa=!0,await T0(n.remoteStore,!0);for(const A of s)Zf(n.remoteStore,A)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((A,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):s=s.then(()=>(Qa(n,i),Fa(n.localStore,i,!0))),Ua(n.remoteStore,i)}),await s,await d_(n,r),function(i){const o=ue(i);o.Na.forEach((a,c)=>{Ua(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new ht(le.comparator)}(n),n.Qa=!1,await T0(n.remoteStore,!1)}}async function d_(t,e,n){const r=ue(t),s=[],A=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await Ta(r.localStore,Kn(a[0]));for(const c of a){const d=r.Fa.get(c),h=await rO(r,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await dF(r.localStore,i);o=await Ta(r.localStore,c),await $v(r,UF(c),i,!1,o.resumeToken)}s.push(o)}return r.Ca.d_(A),s}function UF(t){return w1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oO(t){return function(n){return ue(ue(n).persistence).Qi()}(ue(t).localStore)}async function aO(t,e,n,r){const s=ue(t);if(s.Qa)return void Y("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(n){case"current":case"not-current":{const i=await hF(s.localStore,y1(A[0])),o=vu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",St.EMPTY_BYTE_STRING);await Js(s,i,o);break}case"rejected":await Fa(s.localStore,e,!0),Qa(s,e,r);break;default:ve()}}async function lO(t,e,n){const r=eg(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Y("SyncEngine","Adding an already active target "+s);continue}const A=await dF(r.localStore,s),i=await Ta(r.localStore,A);await $v(r,UF(A),i.targetId,!1,i.resumeToken),Zf(r.remoteStore,i)}for(const s of n)r.Ma.has(s)&&await Fa(r.localStore,s,!1).then(()=>{Ua(r.remoteStore,s),Qa(r,s)}).catch(ii)}}function eg(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JL.bind(null,e),e.Ca.d_=LL.bind(null,e.eventManager),e.Ca.$a=OL.bind(null,e.eventManager),e}function Yv(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}function cO(t,e,n){const r=ue(t);(async function(A,i,o){try{const a=await i.getMetadata();if(await function(w,p){const C=ue(w),_=Vt(p.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",y=>C.Gr.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(_)>=0)}(A.localStore,a))return await i.close(),o._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(CF(a));const c=new jL(a,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await Js(A,h.Ia,void 0),await function(w,p){const C=ue(w);return C.persistence.runTransaction("Save bundle","readwrite",_=>C.Gr.saveBundleMetadata(_,p))}(A.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return fs("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return aF(this.persistence,new oF,e.initialUser,this.serializer)}Ga(e){return new iF(Yf.Zr,this.serializer)}Wa(e){return new gF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class kF extends qc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Yv(this.Ja.syncEngine),await $a(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return aF(this.persistence,new oF,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new $4(r,e.asyncQueue,n)}Ha(e,n){const r=new FD(n,this.persistence);return new TD(e.asyncQueue,r)}Ga(e){const n=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new Nv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,pF(),lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new gF}}class uO extends kF{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Up&&(this.sharedClientState.syncEngine={no:AO.bind(null,n),ro:aO.bind(null,n),io:lO.bind(null,n),Qi:oO.bind(null,n),eo:sO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await iO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=pF();if(!Up.D(n))throw new X(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Up(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tO.bind(null,this.syncEngine),await T0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DL}()}createDatastore(e){const n=Bu(e.databaseInfo.databaseId),r=function(A){return new yL(A)}(e.databaseInfo);return function(A,i,o,a){return new CL(A,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,A,i,o){return new IL(r,s,A,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>u_(this.syncEngine,n,0),function(){return A_.D()?new A_:new mL}())}createSyncEngine(e,n){return function(s,A,i,o,a,c,d){const h=new KL(s,A,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const A=ue(s);Y("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Wa(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jc.provider={build:()=>new Jc};function h_(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new yn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new ML(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new X(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,A){const i=ue(s),o={documents:A.map(h=>Wc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Ke.emptyPath(),o,A.length),c=new Map;a.forEach(h=>{const f=T4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());_e(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new za(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=le.fromPath(r);this.mutations.push(new Iv(s,this.precondition(s)))}),await async function(r,s){const A=ue(r),i={writes:s.map(o=>$c(A.serializer,o))};await A.Mo("Commit",A.serializer.databaseId,Ke.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ve();n=Ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ie.min())?xt.exists(!1):xt.updateTime(n):xt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ie.min()))throw new X(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xt.updateTime(n)}return xt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,s,A){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=A,this._u=r.maxAttempts,this.t_=new Ov(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new hO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!fu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!S1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,s,A){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=$T.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(r,async i=>{Y("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Y("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ja(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qp(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lF(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function f_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Zv(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>i_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>i_(e.remoteStore,s)),t._onlineComponents=e}async function Zv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await Qp(t,new qc)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Qp(t,new qc);return t._offlineComponents}async function ng(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await f_(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await f_(t,new Jc))),t._onlineComponents}function QF(t){return Zv(t).then(e=>e.persistence)}function ey(t){return Zv(t).then(e=>e.localStore)}function SF(t){return ng(t).then(e=>e.remoteStore)}function ty(t){return ng(t).then(e=>e.syncEngine)}function pO(t){return ng(t).then(e=>e.datastore)}async function Sa(t){const e=await ng(t),n=e.eventManager;return n.onListen=GL.bind(null,e.syncEngine),n.onUnlisten=WL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$L.bind(null,e.syncEngine),n}function mO(t){return t.asyncQueue.enqueue(async()=>{const e=await QF(t),n=await SF(t);return e.setNetworkEnabled(!0),function(s){const A=ue(s);return A.L_.delete(0),xu(A)}(n)})}function wO(t){return t.asyncQueue.enqueue(async()=>{const e=await QF(t),n=await SF(t);return e.setNetworkEnabled(!1),async function(s){const A=ue(s);A.L_.add(0),await Wa(A),A.q_.set("Offline")}(n)})}function vO(t,e){const n=new yn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await function(c,d){const h=ue(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new X(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ja(o,`Failed to get document '${A} from cache`);i.reject(a)}}(await ey(t),e,n)),n.promise}function RF(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new tg({next:f=>{d.Za(),i.enqueueAndForget(()=>Gv(A,h));const w=f.docs.has(o);!w&&f.fromCache?c.reject(new X(K.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&a&&a.source==="server"?c.reject(new X(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Wv(Ka(o.path),d,{includeMetadataChanges:!0,_a:!0});return Kv(A,h)}(await Sa(t),t.asyncQueue,e,n,r)),r.promise}function yO(t,e){const n=new yn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await tf(s,A,!0),a=new EF(A,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=Ja(o,`Failed to execute query '${A} against cache`);i.reject(a)}}(await ey(t),e,n)),n.promise}function NF(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new tg({next:f=>{d.Za(),i.enqueueAndForget(()=>Gv(A,h)),f.fromCache&&a.source==="server"?c.reject(new X(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Wv(o,d,{includeMetadataChanges:!0,_a:!0});return Kv(A,h)}(await Sa(t),t.asyncQueue,e,n,r)),r.promise}function BO(t,e){const n=new tg(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){ue(s).Y_.add(A),A.next()}(await Sa(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){ue(s).Y_.delete(A)}(await Sa(t),n))}}function xO(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?N1().encode(i):i,function(d,h){return new dO(d,h)}(function(d,h){if(d instanceof Uint8Array)return h_(d,h);if(d instanceof ArrayBuffer)return h_(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Bu(e));t.asyncQueue.enqueueAndForget(async()=>{cO(await ty(t),s,r)})}function CO(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const A=ue(r);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await ey(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e,n){if(!n)throw new X(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DF(t,e,n,r){if(e===!0&&r===!0)throw new X(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p_(t){if(!le.isDocumentKey(t))throw new X(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m_(t){if(le.isDocumentKey(t))throw new X(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rg(t);throw new X(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LF(t,e){if(e<=0)throw new X(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new X(K.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mD;switch(r.type){case"firstParty":return new BD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=g_.get(n);r&&(Y("ComponentProvider","Removing Datastore"),g_.delete(n),r.terminate())}(this),Promise.resolve()}}function _O(t,e,n,r={}){var s;const A=(t=et(t,Cu))._getSettings(),i=`${e}:${n}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=ln.MOCK_USER;else{o=DN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ln(c)}t._authCredentials=new wD(new WT(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gn=class OF{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new OF(this.firestore,e,this._query)}},bt=class MF{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new LA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new MF(this.firestore,e,this._key)}},LA=class jF extends Gn{constructor(e,n,r){super(e,n,Ka(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new le(e))}withConverter(e){return new jF(this.firestore,e,this._path)}};function VF(t,e,...n){if(t=Fe(t),ny("collection","path",e),t instanceof Cu){const r=Ke.fromString(e,...n);return m_(r),new LA(t,null,r)}{if(!(t instanceof bt||t instanceof LA))throw new X(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return m_(r),new LA(t.firestore,null,r)}}function IO(t,e){if(t=et(t,Cu),ny("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gn(t,null,function(r){return new $s(Ke.emptyPath(),r)}(e))}function Af(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=$T.newId()),ny("doc","path",e),t instanceof Cu){const r=Ke.fromString(e,...n);return p_(r),new bt(t,null,new le(r))}{if(!(t instanceof bt||t instanceof LA))throw new X(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return p_(r),new bt(t.firestore,t instanceof LA?t.converter:null,new le(r))}}function HF(t,e){return t=Fe(t),e=Fe(e),(t instanceof bt||t instanceof LA)&&(e instanceof bt||e instanceof LA)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function KF(t,e){return t=Fe(t),e=Fe(e),t instanceof Gn&&e instanceof Gn&&t.firestore===e.firestore&&pu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ov(this,"async_queue_retry"),this.Vu=()=>{const r=lh();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=lh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=lh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!oi(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw jt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Hv.createAndSchedule(this,e,n,r,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function k0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const A of r)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class EO{constructor(){this._progressObserver={},this._taskCompletionResolver=new yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=-1;let Ht=class extends Cu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new v_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v_(e),this._firestoreClient=void 0,await e}}};function Rn(t){if(t._terminated)throw new X(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GF(t),t._firestoreClient}function GF(t){var e,n,r;const s=t._freezeSettings(),A=function(o,a,c,d){return new XD(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PF(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new gO(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function TO(t,e){fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return zF(t,Jc.provider,{build:r=>new kF(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function FO(t){fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();zF(t,Jc.provider,{build:n=>new uO(n,e.cacheSizeBytes)})}function zF(t,e,n){if((t=et(t,Ht))._firestoreClient||t._terminated)throw new X(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new X(K.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},GF(t)}function UO(t){if(t._initialized&&!t._terminated)throw new X(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!us.D())return Promise.resolve();const s=r+"main";await us.delete(s)}(Pv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function kO(t){return function(n){const r=new yn;return n.asyncQueue.enqueueAndForget(async()=>ZL(await ty(n),r)),r.promise}(Rn(t=et(t,Ht)))}function QO(t){return mO(Rn(t=et(t,Ht)))}function SO(t){return wO(Rn(t=et(t,Ht)))}function RO(t,e){const n=Rn(t=et(t,Ht)),r=new EO;return xO(n,t._databaseId,e,r),r}function NO(t,e){return CO(Rn(t=et(t,Ht)),e).then(n=>n?new Gn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(St.fromBase64String(e))}catch(n){throw new X(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YA=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let A=0;A<r.length;++A)if(r[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=/^__.*__$/;class DO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ga(e,this.data,n,this.fieldTransforms)}}class WF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $F(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Ag{constructor(e,n,r,s,A,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return of(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($F(this.Cu)&&PO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class LO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bu(e)}Qu(e,n,r,s=!1){return new Ag({Cu:e,methodName:n,qu:r,path:Bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uo(t){const e=t._freezeSettings(),n=Bu(t._databaseId);return new LO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ig(t,e,n,r,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,n,s);cy("Data must be an object, but it was:",i,r);const o=XF(r,i);let a,c;if(A.merge)a=new er(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=Q0(e,h,n);if(!i.contains(f))throw new X(K.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ZF(d,f)||d.push(f)}a=new er(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new DO(new mn(o),a,c)}class _u extends co{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _u}}function qF(t,e,n){return new Ag({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sy extends co{_toFieldTransform(e){return new wu(e.path,new Ia)}isEqual(e){return e instanceof sy}}class Ay extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=qF(this,e,!0),r=this.Ku.map(A=>ho(A,n)),s=new qi(r);return new wu(e.path,s)}isEqual(e){return e instanceof Ay&&Dc(this.Ku,e.Ku)}}class iy extends co{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=qF(this,e,!0),r=this.Ku.map(A=>ho(A,n)),s=new Ji(r);return new wu(e.path,s)}isEqual(e){return e instanceof iy&&Dc(this.Ku,e.Ku)}}class oy extends co{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ea(e.serializer,E1(e.serializer,this.$u));return new wu(e.path,n)}isEqual(e){return e instanceof oy&&this.$u===e.$u}}function ay(t,e,n,r){const s=t.Qu(1,e,n);cy("Data must be an object, but it was:",s,r);const A=[],i=mn.empty();lo(r,(a,c)=>{const d=uy(e,a,n);c=Fe(c);const h=s.Nu(d);if(c instanceof _u)A.push(d);else{const f=ho(c,h);f!=null&&(A.push(d),i.set(d,f))}});const o=new er(A);return new WF(i,o,s.fieldTransforms)}function ly(t,e,n,r,s,A){const i=t.Qu(1,e,n),o=[Q0(e,r,n)],a=[s];if(A.length%2!=0)throw new X(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)o.push(Q0(e,A[f])),a.push(A[f+1]);const c=[],d=mn.empty();for(let f=o.length-1;f>=0;--f)if(!ZF(c,o[f])){const w=o[f];let p=a[f];p=Fe(p);const C=i.Nu(w);if(p instanceof _u)c.push(w);else{const _=ho(p,C);_!=null&&(c.push(w),d.set(w,_))}}const h=new er(c);return new WF(d,h,i.fieldTransforms)}function JF(t,e,n,r=!1){return ho(n,t.Qu(r?4:3,e))}function ho(t,e){if(YF(t=Fe(t)))return cy("Unsupported field value:",e,t),XF(t,e);if(t instanceof co)return function(r,s){if(!$F(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const A=r._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const A=[];let i=0;for(const o of r){let a=ho(o,s.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),A.push(a),i++}return{arrayValue:{values:A}}}(t,e)}return function(r,s){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const A=Ct.fromDate(r);return{timestampValue:ba(s.serializer,A)}}if(r instanceof Ct){const A=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ba(s.serializer,A)}}if(r instanceof sg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ps)return{bytesValue:L1(s.serializer,r._byteString)};if(r instanceof bt){const A=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Uv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ry)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return _v(o.serializer,a)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${rg(r)}`)}(t,e)}function XF(t,e){const n={};return i1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,s)=>{const A=ho(s,e.Mu(r));A!=null&&(n[r]=A)}),{mapValue:{fields:n}}}function YF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof sg||t instanceof ps||t instanceof bt||t instanceof co||t instanceof ry)}function cy(t,e,n){if(!YF(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=rg(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Q0(t,e,n){if((e=Fe(e))instanceof YA)return e._internalPath;if(typeof e=="string")return uy(t,e);throw of("Field path arguments must be of type string or ",t,!1,void 0,n)}const OO=new RegExp("[~\\*/\\[\\]]");function uy(t,e,n){if(e.search(OO)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new YA(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function of(t,e,n,r,s){const A=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(A||i)&&(a+=" (found",A&&(a+=` in field ${r}`),i&&(a+=` in document ${s}`),a+=")"),new X(K.INVALID_ARGUMENT,o+t+a)}function ZF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r,s,A){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MO extends Xc{data(){return super.data()}}function og(t,e){return typeof e=="string"?uy(t,e):e instanceof YA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class Iu extends dy{}function oA(t,e,...n){let r=[];e instanceof dy&&r.push(e),r=r.concat(n),function(A){const i=A.filter(a=>a instanceof hy).length,o=A.filter(a=>a instanceof ag).length;if(i>1||i>0&&o>0)throw new X(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ag extends Iu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ag(e,n,r)}_apply(e){const n=this._parse(e);return nU(e._query,n),new Gn(e.firestore,e.converter,v0(e._query,n))}_parse(e){const n=uo(e.firestore);return function(A,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){B_(h,d);const w=[];for(const p of h)w.push(y_(a,A,p));f={arrayValue:{values:w}}}else f=y_(a,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||B_(h,d),f=JF(o,i,h,d==="in"||d==="not-in");return Ge.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jO(t,e,n){const r=e,s=og("where",t);return ag._create(s,r,n)}class hy extends dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:it.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,A){let i=s;const o=A.getFlattenedFilters();for(const a of o)nU(i,a),i=v0(i,a)}(e._query,n),new Gn(e.firestore,e.converter,v0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fy extends Iu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fy(e,n)}_apply(e){const n=function(s,A,i){if(s.startAt!==null)throw new X(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(A,i)}(e._query,this._field,this._direction);return new Gn(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new $s(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function VO(t,e="asc"){const n=e,r=og("orderBy",t);return fy._create(r,n)}class lg extends Iu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lg(e,n,r)}_apply(e){return new Gn(e.firestore,e.converter,Xh(e._query,this._limit,this._limitType))}}function HO(t){return LF("limit",t),lg._create("limit",t,"F")}function KO(t){return LF("limitToLast",t),lg._create("limitToLast",t,"L")}class cg extends Iu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new cg(e,n,r)}_apply(e){const n=tU(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,function(s,A){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,n))}}function GO(...t){return cg._create("startAt",t,!0)}function zO(...t){return cg._create("startAfter",t,!1)}class ug extends Iu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ug(e,n,r)}_apply(e){const n=tU(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,function(s,A){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,n))}}function WO(...t){return ug._create("endBefore",t,!1)}function $O(...t){return ug._create("endAt",t,!0)}function tU(t,e,n,r){if(n[0]=Fe(n[0]),n[0]instanceof Xc)return function(A,i,o,a,c){if(!a)throw new X(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of Aa(A))if(h.field.isKeyField())d.push(Wi(i,a.key));else{const f=a.data.field(h.field);if(zf(f))throw new X(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new X(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new JA(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=uo(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new X(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let p=0;p<d.length;p++){const C=d[p];if(f[p].field.isKeyField()){if(typeof C!="string")throw new X(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof C}`);if(!xv(i)&&C.indexOf("/")!==-1)throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${C}' contains a slash.`);const _=i.path.child(Ke.fromString(C));if(!le.isDocumentKey(_))throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const y=new le(_);w.push(Wi(o,y))}else{const _=JF(a,c,C);w.push(_)}}return new JA(w,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function y_(t,e,n){if(typeof(n=Fe(n))=="string"){if(n==="")throw new X(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xv(e)&&n.indexOf("/")!==-1)throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!le.isDocumentKey(r))throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wi(t,new le(r))}if(n instanceof bt)return Wi(t,n._key);throw new X(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(n)}.`)}function B_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nU(t,e){const n=function(s,A){for(const i of s)for(const o of i.getFlattenedFilters())if(A.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gy{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(WA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(s,A)=>{r[s]=this.convertValue(A,n)}),r}convertVectorValue(e){var n,r,s;const A=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(i=>vt(i.doubleValue));return new ry(A)}convertGeoPoint(e){return new sg(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const n=js(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);_e(q1(r));const s=new $A(r.get(1),r.get(3)),A=new le(r.popFirst(5));return s.isEqual(n)||jt(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qO extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Vs=class extends Xc{constructor(e,n,r,s,A,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(og("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ac=class extends Vs{data(e={}){return super.data(e)}},ZA=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ui(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ac(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new ac(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ui(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>A||o.type!==3).map(o=>{const a=new ac(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ui(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:JO(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function JO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}function rU(t,e){return t instanceof Vs&&e instanceof Vs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ZA&&e instanceof ZA&&t._firestore===e._firestore&&KF(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){t=et(t,bt);const e=et(t.firestore,Ht);return RF(Rn(e),t._key).then(n=>py(e,t,n))}class fo extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function YO(t){t=et(t,bt);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return vO(n,t._key).then(s=>new Vs(e,r,t._key,s,new Ui(s!==null&&s.hasLocalMutations,!0),t.converter))}function ZO(t){t=et(t,bt);const e=et(t.firestore,Ht);return RF(Rn(e),t._key,{source:"server"}).then(n=>py(e,t,n))}function eM(t){t=et(t,Gn);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return eU(t._query),NF(n,t._query).then(s=>new ZA(e,r,t,s))}function tM(t){t=et(t,Gn);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return yO(n,t._query).then(s=>new ZA(e,r,t,s))}function nM(t){t=et(t,Gn);const e=et(t.firestore,Ht),n=Rn(e),r=new fo(e);return NF(n,t._query,{source:"server"}).then(s=>new ZA(e,r,t,s))}function x_(t,e,n){t=et(t,bt);const r=et(t.firestore,Ht),s=dg(t.converter,e,n);return Eu(r,[ig(uo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xt.none())])}function C_(t,e,n,...r){t=et(t,bt);const s=et(t.firestore,Ht),A=uo(s);let i;return i=typeof(e=Fe(e))=="string"||e instanceof YA?ly(A,"updateDoc",t._key,e,n,r):ay(A,"updateDoc",t._key,e),Eu(s,[i.toMutation(t._key,xt.exists(!0))])}function rM(t){return Eu(et(t.firestore,Ht),[new za(t._key,xt.none())])}function sM(t,e){const n=et(t.firestore,Ht),r=Af(t),s=dg(t.converter,e);return Eu(n,[ig(uo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xt.exists(!1))]).then(()=>r)}function sU(t,...e){var n,r,s;t=Fe(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||k0(e[i])||(A=e[i],i++);const o={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(k0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let a,c,d;if(t instanceof bt)c=et(t.firestore,Ht),d=Ka(t._key.path),a={next:h=>{e[i]&&e[i](py(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=et(t,Gn);c=et(h.firestore,Ht),d=h._query;const f=new fo(c);a={next:w=>{e[i]&&e[i](new ZA(c,f,h,w))},error:e[i+1],complete:e[i+2]},eU(t._query)}return function(f,w,p,C){const _=new tg(C),y=new Wv(w,_,p);return f.asyncQueue.enqueueAndForget(async()=>Kv(await Sa(f),y)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>Gv(await Sa(f),y))}}(Rn(c),d,o,a)}function AM(t,e){return BO(Rn(t=et(t,Ht)),k0(e)?e:{next:e})}function Eu(t,e){return function(r,s){const A=new yn;return r.asyncQueue.enqueueAndForget(async()=>qL(await ty(r),s,A)),A.promise}(Rn(t),e)}function py(t,e,n){const r=n.docs.get(e._key),s=new fo(t);return new Vs(t,s,e._key,r,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uo(e)}set(e,n,r){this._verifyNotCommitted();const s=wA(e,this._firestore),A=dg(s.converter,n,r),i=ig(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,xt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const A=wA(e,this._firestore);let i;return i=typeof(n=Fe(n))=="string"||n instanceof YA?ly(this._dataReader,"WriteBatch.update",A._key,n,r,s):ay(this._dataReader,"WriteBatch.update",A._key,n),this._mutations.push(i.toMutation(A._key,xt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wA(e,this._firestore);return this._mutations=this._mutations.concat(new za(n._key,xt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function wA(t,e){if((t=Fe(t)).firestore!==e)throw new X(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aM=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=uo(n)}get(n){const r=wA(n,this._firestore),s=new qO(this._firestore);return this._transaction.lookup([r._key]).then(A=>{if(!A||A.length!==1)return ve();const i=A[0];if(i.isFoundDocument())return new Xc(this._firestore,s,i.key,i,r.converter);if(i.isNoDocument())return new Xc(this._firestore,s,r._key,null,r.converter);throw ve()})}set(n,r,s){const A=wA(n,this._firestore),i=dg(A.converter,r,s),o=ig(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,o),this}update(n,r,s,...A){const i=wA(n,this._firestore);let o;return o=typeof(r=Fe(r))=="string"||r instanceof YA?ly(this._dataReader,"Transaction.update",i._key,r,s,A):ay(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=wA(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wA(e,this._firestore),r=new fo(this._firestore);return super.get(e).then(s=>new Vs(this._firestore,r,n._key,s._document,new Ui(!1,!1),n.converter))}};function lM(t,e,n){t=et(t,Ht);const r=Object.assign(Object.assign({},iM),n);return function(A){if(A.maxAttempts<1)throw new X(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(A,i,o){const a=new yn;return A.asyncQueue.enqueueAndForget(async()=>{const c=await pO(A);new fO(A.asyncQueue,c,o,i,a).au()}),a.promise}(Rn(t),s=>e(new aM(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return new _u("deleteField")}function uM(){return new sy("serverTimestamp")}function dM(...t){return new Ay("arrayUnion",t)}function hM(...t){return new iy("arrayRemove",t)}function fM(t){return new oy("increment",t)}(function(e,n=!0){(function(s){Ha=s})(Ai),GA(new hs("firestore",(r,{instanceIdentifier:s,options:A})=>{const i=r.getProvider("app").getImmediate(),o=new Ht(new vD(r.getProvider("auth-internal")),new CD(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $A(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:n},A),o._setSettings(A),o},"PUBLIC").setMultipleInstances(!0)),Kr(dC,"4.7.3",e),Kr(dC,"4.7.3","esm2017")})();const gM="@firebase/firestore-compat",pM="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function I_(){if(!qD())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}let AU=class S0{constructor(e){this._delegate=e}static fromBase64String(e){return I_(),new S0(ps.fromBase64String(e))}static fromUint8Array(e){return __(),new S0(ps.fromUint8Array(e))}toBase64(){return I_(),this._delegate.toBase64()}toUint8Array(){return __(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){return mM(t,["next","error","complete"])}function mM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{enableIndexedDbPersistence(e,n){return TO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return FO(e._delegate)}clearIndexedDbPersistence(e){return UO(e._delegate)}}class iU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $A||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){_O(this._delegate,e,n,r)}enableNetwork(){return QO(this._delegate)}disableNetwork(){return SO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return kO(this._delegate)}onSnapshotsInSync(e){return AM(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ra(this,VF(this._delegate,e))}catch(n){throw Mn(n,"collection()","Firestore.collection()")}}doc(e){try{return new _r(this,Af(this._delegate,e))}catch(n){throw Mn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new On(this,IO(this._delegate,e))}catch(n){throw Mn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return lM(this._delegate,n=>e(new oU(this,n)))}batch(){return Rn(this._delegate),new aU(new oM(this._delegate,e=>Eu(this._delegate,e)))}loadBundle(e){return RO(this._delegate,e)}namedQuery(e){return NO(this._delegate,e).then(n=>n?new On(this,n):null)}}class hg extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new AU(new ps(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return _r.forKey(n,this.firestore,null)}}function vM(t){gD(t)}class oU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}get(e){const n=ki(e);return this._delegate.get(n).then(r=>new Yc(this._firestore,new Vs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=ki(e);return r?(my("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=ki(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=ki(e);return this._delegate.delete(n),this}}class aU{constructor(e){this._delegate=e}set(e,n,r){const s=ki(e);return r?(my("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=ki(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=ki(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class eo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new ac(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=eo.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let A=s.get(n);return A||(A=new eo(e,new hg(e),n),s.set(n,A)),A}}eo.INSTANCES=new WeakMap;class _r{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _r(n,new bt(n._delegate,r,new le(e)))}static forKey(e,n,r){return new _r(n,new bt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ra(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ra(this.firestore,VF(this._delegate,e))}catch(n){throw Mn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof bt?HF(this._delegate,e):!1}set(e,n){n=my("DocumentReference.set",n);try{return n?x_(this._delegate,e,n):x_(this._delegate,e)}catch(r){throw Mn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?C_(this._delegate,e):C_(this._delegate,e,n,...r)}catch(s){throw Mn(s,"updateDoc()","DocumentReference.update()")}}delete(){return rM(this._delegate)}onSnapshot(...e){const n=lU(e),r=cU(e,s=>new Yc(this.firestore,new Vs(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return sU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=YO(this._delegate):(e==null?void 0:e.source)==="server"?n=ZO(this._delegate):n=XO(this._delegate),n.then(r=>new Yc(this.firestore,new Vs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _r(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mn(t,e,n){return t.message=t.message.replace(e,n),t}function lU(t){for(const e of t)if(typeof e=="object"&&!R0(e))return e;return{}}function cU(t,e){var n,r;let s;return R0(t[0])?s=t[0]:R0(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:A=>{s.next&&s.next(e(A))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class Yc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new _r(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return rU(this._delegate,e._delegate)}}class Zc extends Yc{data(e){const n=this._delegate.data(e);return this._delegate._converter||pD(n!==void 0),n}}class On{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hg(e)}where(e,n,r){try{return new On(this.firestore,oA(this._delegate,jO(e,n,r)))}catch(s){throw Mn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new On(this.firestore,oA(this._delegate,VO(e,n)))}catch(r){throw Mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new On(this.firestore,oA(this._delegate,HO(e)))}catch(n){throw Mn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new On(this.firestore,oA(this._delegate,KO(e)))}catch(n){throw Mn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new On(this.firestore,oA(this._delegate,GO(...e)))}catch(n){throw Mn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new On(this.firestore,oA(this._delegate,zO(...e)))}catch(n){throw Mn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new On(this.firestore,oA(this._delegate,WO(...e)))}catch(n){throw Mn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new On(this.firestore,oA(this._delegate,$O(...e)))}catch(n){throw Mn(n,"endAt()","Query.endAt()")}}isEqual(e){return KF(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=tM(this._delegate):(e==null?void 0:e.source)==="server"?n=nM(this._delegate):n=eM(this._delegate),n.then(r=>new N0(this.firestore,new ZA(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=lU(e),r=cU(e,s=>new N0(this.firestore,new ZA(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return sU(this._delegate,n,r)}withConverter(e){return new On(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class yM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Zc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class N0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new On(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new yM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Zc(this._firestore,r))})}isEqual(e){return rU(this._delegate,e._delegate)}}class Ra extends On{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _r(this.firestore,e):null}doc(e){try{return e===void 0?new _r(this.firestore,Af(this._delegate)):new _r(this.firestore,Af(this._delegate,e))}catch(n){throw Mn(n,"doc()","CollectionReference.doc()")}}add(e){return sM(this._delegate,e).then(n=>new _r(this.firestore,n))}isEqual(e){return HF(this._delegate,e._delegate)}withConverter(e){return new Ra(this.firestore,e?this._delegate.withConverter(eo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ki(t){return et(t,bt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(...e){this._delegate=new YA(...e)}static documentId(){return new wy(Bt.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof YA?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._delegate=e}static serverTimestamp(){const e=uM();return e._methodName="FieldValue.serverTimestamp",new _i(e)}static delete(){const e=cM();return e._methodName="FieldValue.delete",new _i(e)}static arrayUnion(...e){const n=dM(...e);return n._methodName="FieldValue.arrayUnion",new _i(n)}static arrayRemove(...e){const n=hM(...e);return n._methodName="FieldValue.arrayRemove",new _i(n)}static increment(e){const n=fM(e);return n._methodName="FieldValue.increment",new _i(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={Firestore:iU,GeoPoint:sg,Timestamp:Ct,Blob:AU,Transaction:oU,WriteBatch:aU,DocumentReference:_r,DocumentSnapshot:Yc,Query:On,QueryDocumentSnapshot:Zc,QuerySnapshot:N0,CollectionReference:Ra,FieldPath:wy,FieldValue:_i,setLogLevel:vM,CACHE_SIZE_UNLIMITED:bO};function xM(t,e){t.INTERNAL.registerComponent(new hs("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},BM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){xM(t,(e,n)=>new iU(e,n,new wM)),t.registerVersion(gM,pM)}CM(es);function vy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const Cl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Io={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function uU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IM=_M,EM=uU,dU=new ao("auth","Firebase",uU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Kf("@firebase/auth");function bM(t,...e){af.logLevel<=je.WARN&&af.warn(`Auth (${Ai}): ${t}`,...e)}function ch(t,...e){af.logLevel<=je.ERROR&&af.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw By(t,...e)}function en(t,...e){return By(t,...e)}function yy(t,e,n){const r=Object.assign(Object.assign({},EM()),{[e]:n});return new ao("auth","Firebase",r).create(e,{appName:t.name})}function un(t){return yy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xa(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xn(t,"argument-error"),yy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function By(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dU.create(t,...e)}function ne(t,e,...n){if(!t)throw By(e,...n)}function as(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ch(e),new Error(e)}function Wr(t,e){t||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xy(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xy()||_T()||"connection"in navigator)?navigator.onLine:!0}function FM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=LN()||uv()}get(){return TM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new bu(3e4,6e4);function Nt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pt(t,e,n,r,s={}){return fU(t,s,async()=>{let A={},i={};r&&(e==="GET"?i=r:A={body:JSON.stringify(r)});const o=Va(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},A);return MN()||(c.referrerPolicy="no-referrer"),hU.fetch()(gU(t,t.config.apiHost,n,o),c)})}async function fU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UM),e);try{const s=new SM(t),A=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw Ol(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const o=A.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ol(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Ol(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Ol(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw yy(t,d,c);xn(t,d)}}catch(s){if(s instanceof Vn)throw s;xn(t,"network-request-failed",{message:String(s)})}}async function Xs(t,e,n,r,s={}){const A=await Pt(t,e,n,r,s);return"mfaPendingCredential"in A&&xn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function gU(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Cy(t.config,s):`${t.config.apiScheme}://${s}`}function QM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),kM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ol(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=en(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){return t!==void 0&&t.getResponse!==void 0}function T_(t){return t!==void 0&&t.enterprise!==void 0}class RM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t){return(await Pt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function PM(t,e){return Pt(t,"GET","/v2/recaptchaConfig",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e){return Pt(t,"POST","/v1/accounts:delete",e)}async function LM(t,e){return Pt(t,"POST","/v1/accounts:update",e)}async function pU(t,e){return Pt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OM(t,e=!1){const n=Fe(t),r=await n.getIdToken(e),s=fg(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:r,authTime:lc(Sp(s.auth_time)),issuedAtTime:lc(Sp(s.iat)),expirationTime:lc(Sp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function Sp(t){return Number(t)*1e3}function fg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ch("JWT malformed, contained fewer than 3 sections"),null;try{const s=yT(n);return s?JSON.parse(s):(ch("Failed to decode base64 JWT payload"),null)}catch(s){return ch("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function F_(t){const e=fg(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&MM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Hs(t,pU(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?mU(A.providerUserInfo):[],o=HM(t.providerData,i),a=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:o,metadata:new P0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function VM(t){const e=Fe(t);await tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mU(t){return t.map(e=>{var{providerId:n}=e,r=vy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){const n=await fU(t,{},async()=>{const r=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=gU(t,s,"/v1/token",`key=${A}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",hU.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GM(t,e){return Pt(t,"POST","/v2/accounts:revokeToken",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=F_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:A}=await KM(e,n);this.updateTokensAndExpiration(r,s,Number(A))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:A}=n,i=new oa;return r&&(ne(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(ne(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,A=vy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new P0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const n=await Hs(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OM(this,e)}reload(){return VM(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(un(this.auth));const e=await this.getIdToken();return await Hs(this,DM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,A,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,w=(A=n.phoneNumber)!==null&&A!==void 0?A:void 0,p=(i=n.photoURL)!==null&&i!==void 0?i:void 0,C=(o=n.tenantId)!==null&&o!==void 0?o:void 0,_=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,B=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:R,isAnonymous:S,providerData:N,stsTokenManager:I}=n;ne(v&&I,e,"internal-error");const x=oa.fromJSON(this.name,I);ne(typeof v=="string",e,"internal-error"),aA(h,e.name),aA(f,e.name),ne(typeof R=="boolean",e,"internal-error"),ne(typeof S=="boolean",e,"internal-error"),aA(w,e.name),aA(p,e.name),aA(C,e.name),aA(_,e.name),aA(y,e.name),aA(B,e.name);const b=new Us({uid:v,auth:e,email:f,emailVerified:R,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:w,tenantId:C,stsTokenManager:x,createdAt:y,lastLoginAt:B});return N&&Array.isArray(N)&&(b.providerData=N.map(k=>Object.assign({},k))),_&&(b._redirectEventId=_),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new oa;s.updateFromServerResponse(n);const A=new Us({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tu(A),A}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?mU(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),o=new oa;o.updateFromIdToken(r);const a=new Us({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new P0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function hr(t){Wr(t instanceof Function,"Expected a class definition");let e=U_.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wU.type="NONE";const Na=wU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e,n){return`firebase:${t}:${e}:${n}`}class aa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:A}=this.auth;this.fullUserKey=Di(this.userKey,s.apiKey,A),this.fullPersistenceKey=Di("persistence",s.apiKey,A),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new aa(hr(Na),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||hr(Na);const i=Di(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=Us._fromJSON(e,d);c!==A&&(o=h),A=c;break}}catch{}const a=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!a.length?new aa(A,e,r):(A=a[0],o&&await A._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new aa(A,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CU(e))return"Blackberry";if(_U(e))return"Webos";if(yU(e))return"Safari";if((e.includes("chrome/")||BU(e))&&!e.includes("edge/"))return"Chrome";if(Tu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vU(t=Ft()){return/firefox\//i.test(t)}function yU(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BU(t=Ft()){return/crios\//i.test(t)}function xU(t=Ft()){return/iemobile/i.test(t)}function Tu(t=Ft()){return/android/i.test(t)}function CU(t=Ft()){return/blackberry/i.test(t)}function _U(t=Ft()){return/webos/i.test(t)}function Fu(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zM(t=Ft()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function WM(t=Ft()){var e;return Fu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $M(){return IT()&&document.documentMode===10}function IU(t=Ft()){return Fu(t)||Tu(t)||_U(t)||CU(t)||/windows phone/i.test(t)||xU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t,e=[]){let n;switch(t){case"Browser":n=k_(Ft());break;case"Worker":n=`${k_(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=A=>new Promise((i,o)=>{try{const a=e(A);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e={}){return Pt(t,"GET","/v2/passwordPolicy",Nt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=6;class YM{constructor(e){var n,r,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:XM,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,A,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(A=a.containsUppercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q_(this),this.idTokenSubscription=new Q_(this),this.beforeStateQueue=new qM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await aa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pU(this,{idToken:e}),r=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(s=a.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(un(this));const n=e?Fe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JM(this),n=new YM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const A=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(o,this,"internal-error"),o.then(()=>{i||A(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rt(t){return Fe(t)}class Q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=bT(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ej(t){Uu=t}function _y(t){return Uu.loadJS(t)}function tj(){return Uu.recaptchaV2Script}function nj(){return Uu.recaptchaEnterpriseScript}function rj(){return Uu.gapiScript}function bU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const sj="recaptcha-enterprise",Aj="NO_RECAPTCHA";class ij{constructor(e){this.type=sj,this.auth=Rt(e)}async verify(e="verify",n=!1){async function r(A){if(!n){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,o)=>{PM(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new RM(a);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function s(A,i,o){const a=window.grecaptcha;T_(a)?a.enterprise.ready(()=>{a.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(Aj)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{r(this.auth).then(o=>{if(!n&&T_(window.grecaptcha))s(o,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=nj();a.length!==0&&(a+=o),_y(a).then(()=>{s(o,A,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function S_(t,e,n,r=!1){const s=new ij(t);let A;try{A=await s.verify(n)}catch{A=await s.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function nu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await S_(t,e,n,n==="getOobCode");return r(t,A)}else return r(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await S_(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(A)})}function oj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aj(t,e,n){const r=Rt(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),A=TU(e),{host:i,port:o}=lj(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${A}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||cj()}function TU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lj(t){const e=TU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const A=s[1];return{host:A,port:R_(r.substr(A.length+1))}}else{const[A,i]=r.split(":");return{host:A,port:R_(i)}}}function R_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,n){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return Pt(t,"POST","/v1/accounts:resetPassword",Nt(t,e))}async function uj(t,e){return Pt(t,"POST","/v1/accounts:update",e)}async function dj(t,e){return Pt(t,"POST","/v1/accounts:signUp",e)}async function hj(t,e){return Pt(t,"POST","/v1/accounts:update",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e){return Xs(t,"POST","/v1/accounts:signInWithPassword",Nt(t,e))}async function gg(t,e){return Pt(t,"POST","/v1/accounts:sendOobCode",Nt(t,e))}async function gj(t,e){return gg(t,e)}async function pj(t,e){return gg(t,e)}async function mj(t,e){return gg(t,e)}async function wj(t,e){return gg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return Xs(t,"POST","/v1/accounts:signInWithEmailLink",Nt(t,e))}async function yj(t,e){return Xs(t,"POST","/v1/accounts:signInWithEmailLink",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Ya{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ru(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ru(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nu(e,n,"signInWithPassword",fj);case"emailLink":return vj(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nu(e,r,"signUpPassword",dj);case"emailLink":return yj(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return Xs(t,"POST","/v1/accounts:signInWithIdp",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="http://localhost";class ms extends Ya{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,A=vy(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new ms(r,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:Bj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){return Pt(t,"POST","/v1/accounts:sendVerificationCode",Nt(t,e))}async function Cj(t,e){return Xs(t,"POST","/v1/accounts:signInWithPhoneNumber",Nt(t,e))}async function _j(t,e){const n=await Xs(t,"POST","/v1/accounts:signInWithPhoneNumber",Nt(t,e));if(n.temporaryProof)throw Ol(t,"account-exists-with-different-credential",n);return n}const Ij={USER_NOT_FOUND:"user-not-found"};async function Ej(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Xs(t,"POST","/v1/accounts:signInWithPhoneNumber",Nt(t,n),Ij)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ya{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Li({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Li({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Cj(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return _j(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Ej(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A}=e;return!r&&!n&&!s&&!A?null:new Li({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tj(t){const e=Xo(Rl(t)).link,n=e?Xo(Rl(e)).deep_link_id:null,r=Xo(Rl(t)).deep_link_id;return(r?Xo(Rl(r)).link:null)||r||n||e||t}class pg{constructor(e){var n,r,s,A,i,o;const a=Xo(Rl(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=bj((s=a.mode)!==null&&s!==void 0?s:null);ne(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=a.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=Tj(e);try{return new pg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.providerId=ci.PROVIDER_ID}static credential(e,n){return ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pg.parseLink(n);return ne(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}ci.PROVIDER_ID="password";ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends Ys{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class la extends Za{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ne("providerId"in n&&"signInMethod"in n,"argument-error"),ms._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ne(e.idToken||e.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return la.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return la.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:A,nonce:i,providerId:o}=e;if(!r&&!s&&!n&&!A||!o)return null;try{return new la(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:A})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Za{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Za{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="http://localhost";class Pa extends Ya{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:A}=n;return!r||!s||!A||r!==s?null:new Pa(r,A)}static _create(e,n){return new Pa(e,n)}buildRequest(){return{requestUri:Fj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="saml.";class lf extends Ys{constructor(e){ne(e.startsWith(Uj),"argument-error"),super(e)}static credentialFromResult(e){return lf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Pa.fromJSON(e);return ne(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Pa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Za{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e){return Xs(t,"POST","/v1/accounts:signUp",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const A=await Us._fromIdTokenResponse(e,r,s),i=N_(r);return new kr({user:A,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N_(r);return new kr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t){var e;if(Qt(t.app))return Promise.reject(un(t));const n=Rt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await UU(n,{returnSecureToken:!0}),s=await kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends Vn{constructor(e,n,r,s){var A;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,cf.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new cf(e,n,r,s)}}function kU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?cf._fromErrorAndOperation(t,A,e,r):A})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,e){const n=Fe(t);await mg(!0,n,e);const{providerUserInfo:r}=await LM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=QU(r||[]);return n.providerData=n.providerData.filter(A=>s.has(A.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Iy(t,e,n=!1){const r=await Hs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",r)}async function mg(t,e,n){await tu(e);const r=QU(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";ne(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(un(r));const s="reauthenticate";try{const A=await Hs(t,kU(r,s,e,t),n);ne(A.idToken,r,"internal-error");const i=fg(A.idToken);ne(i,r,"internal-error");const{sub:o}=i;return ne(t.uid===o,r,"user-mismatch"),kr._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e,n=!1){if(Qt(t.app))return Promise.reject(un(t));const r="signIn",s=await kU(t,r,e),A=await kr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(A.user),A}async function wg(t,e){return RU(Rt(t),e)}async function NU(t,e){const n=Fe(t);return await mg(!1,n,e.providerId),Iy(n,e)}async function PU(t,e){return SU(Fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return Xs(t,"POST","/v1/accounts:signInWithCustomToken",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(t,e){if(Qt(t.app))return Promise.reject(un(t));const n=Rt(t),r=await Sj(n,{token:e,returnSecureToken:!0}),s=await kr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ey._fromServerResponse(e,n):"totpInfo"in n?by._fromServerResponse(e,n):xn(e,"internal-error")}}class Ey extends ku{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ey(n)}}class by extends ku{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new by(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e,n){var r;ne(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ne(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ne(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ne(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(t){const e=Rt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Nj(t,e,n){const r=Rt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&vg(r,s,n),await nu(r,s,"getOobCode",pj)}async function Pj(t,e,n){await FU(Fe(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ty(t),r})}async function Dj(t,e){await hj(Fe(t),{oobCode:e})}async function DU(t,e){const n=Fe(t),r=await FU(n,{oobCode:e}),s=r.requestType;switch(ne(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(r.mfaInfo,n,"internal-error");default:ne(r.email,n,"internal-error")}let A=null;return r.mfaInfo&&(A=ku._fromServerResponse(Rt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:A},operation:s}}async function Lj(t,e){const{data:n}=await DU(Fe(t),e);return n.email}async function Oj(t,e,n){if(Qt(t.app))return Promise.reject(un(t));const r=Rt(t),i=await nu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UU).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Ty(t),a}),o=await kr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function Mj(t,e,n){return Qt(t.app)?Promise.reject(un(t)):wg(Fe(t),ci.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ty(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jj(t,e,n){const r=Rt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function A(i,o){ne(o.handleCodeInApp,r,"argument-error"),o&&vg(r,i,o)}A(s,n),await nu(r,s,"getOobCode",mj)}function Vj(t,e){const n=pg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Hj(t,e,n){if(Qt(t.app))return Promise.reject(un(t));const r=Fe(t),s=ci.credentialWithLink(e,n||eu());return ne(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),wg(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e){return Pt(t,"POST","/v1/accounts:createAuthUri",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e){const n=xy()?eu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Kj(Fe(t),r);return s||[]}async function zj(t,e){const n=Fe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&vg(n.auth,s,e);const{email:A}=await gj(n.auth,s);A!==t.email&&await t.reload()}async function Wj(t,e,n){const r=Fe(t),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&vg(r.auth,A,n);const{email:i}=await wj(r.auth,A);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e){return Pt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Fe(t),A={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await Hs(r,$j(r.auth,A));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function Jj(t,e){const n=Fe(t);return Qt(n.auth.app)?Promise.reject(un(n.auth)):LU(n,e,null)}function Xj(t,e){return LU(Fe(t),null,e)}async function LU(t,e,n){const{auth:r}=t,A={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(A.email=e),n&&(A.password=n);const i=await Hs(t,uj(r,A));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},A=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=fg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new ca(A,o)}}if(!r)return null;switch(r){case"facebook.com":return new Zj(A,s);case"github.com":return new eV(A,s);case"google.com":return new tV(A,s);case"twitter.com":return new nV(A,s,t.screenName||null);case"custom":case"anonymous":return new ca(A,null);default:return new ca(A,r,s)}}class ca{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class OU extends ca{constructor(e,n,r,s){super(e,n,r),this.username=s}}class Zj extends ca{constructor(e,n){super(e,"facebook.com",n)}}class eV extends OU{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class tV extends ca{constructor(e,n){super(e,"google.com",n)}}class nV extends OU{constructor(e,n,r){super(e,"twitter.com",n,r)}}function rV(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Yj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Qi("enroll",e,n)}static _fromMfaPendingCredential(e){return new Qi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Qi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Qi._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Rt(e),s=n.customData._serverResponse,A=(s.mfaInfo||[]).map(o=>ku._fromServerResponse(r,o));ne(s.mfaPendingCredential,r,"internal-error");const i=Qi._fromMfaPendingCredential(s.mfaPendingCredential);return new Fy(i,A,async o=>{const a=await o._process(r,i);delete s.mfaInfo,delete s.mfaPendingCredential;const c=Object.assign(Object.assign({},s),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await kr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return ne(n.user,r,"internal-error"),kr._forOperation(n.user,n.operationType,c);default:xn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function sV(t,e){var n;const r=Fe(t),s=e;return ne(e.customData.operationType,r,"argument-error"),ne((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Fy._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:start",Nt(t,e))}function iV(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(t,e))}function oV(t,e){return Pt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(t,e))}class Uy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>ku._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Uy(e)}async getSession(){return Qi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),A=await Hs(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(A),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Hs(this.user,oV(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:A})=>A!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Rp=new WeakMap;function aV(t){const e=Fe(t);return Rp.has(e)||Rp.set(e,Uy._fromUser(e)),Rp.get(e)}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=1e3,cV=10;class jU extends MU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},A=this.storage.getItem(r);$M()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jU.type="LOCAL";const ky=jU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU extends MU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VU.type="SESSION";const to=VU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:A}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async c=>c(n.origin,A)),a=await uV(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((o,a)=>{const c=Qu("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),o(f.data.response);break;default:clearTimeout(d),clearTimeout(A),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function hV(t){Gt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function fV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pV(){return Qy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="firebaseLocalStorageDb",mV=1,df="firebaseLocalStorage",KU="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bg(t,e){return t.transaction([df],e?"readwrite":"readonly").objectStore(df)}function wV(){const t=indexedDB.deleteDatabase(HU);return new Su(t).toPromise()}function D0(){const t=indexedDB.open(HU,mV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(df,{keyPath:KU})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(df)?e(r):(r.close(),await wV(),e(await D0()))})})}async function P_(t,e,n){const r=Bg(t,!0).put({[KU]:e,value:n});return new Su(r).toPromise()}async function vV(t,e){const n=Bg(t,!1).get(e),r=await new Su(n).toPromise();return r===void 0?null:r.value}function D_(t,e){const n=Bg(t,!0).delete(e);return new Su(n).toPromise()}const yV=800,BV=3;class GU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yg._getInstance(pV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fV(),!this.activeServiceWorker)return;this.sender=new dV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await P_(e,uf,"1"),await D_(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=Bg(s,!1).getAll();return new Su(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GU.type="LOCAL";const su=GU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t,e){return Pt(t,"POST","/v2/accounts/mfaSignIn:start",Nt(t,e))}function CV(t,e){return Pt(t,"POST","/v2/accounts/mfaSignIn:finalize",Nt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=500,IV=6e4,vd=1e12;class EV{constructor(e){this.auth=e,this.counter=vd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new bV(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||vd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||vd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||vd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class bV{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ne(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=TV(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},IV)},_V))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function TV(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=bU("rcb"),FV=new bu(3e4,6e4);class UV{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Gt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ne(kV(n),e,"argument-error"),this.shouldResolveImmediately(n)&&b_(Gt().grecaptcha)?Promise.resolve(Gt().grecaptcha):new Promise((r,s)=>{const A=Gt().setTimeout(()=>{s(en(e,"network-request-failed"))},FV.get());Gt()[Np]=()=>{Gt().clearTimeout(A),delete Gt()[Np];const o=Gt().grecaptcha;if(!o||!b_(o)){s(en(e,"internal-error"));return}const a=o.render;o.render=(c,d)=>{const h=a(c,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${tj()}?${Va({onload:Np,render:"explicit",hl:n})}`;_y(i).catch(()=>{clearTimeout(A),s(en(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Gt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function kV(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class QV{async load(e){return new EV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="recaptcha",SV={theme:"light",type:"image"};let RV=class{constructor(e,n,r=Object.assign({},SV)){this.parameters=r,this.type=zU,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(e),this.isInvisible=this.parameters.size==="invisible",ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ne(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new QV:new UV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const A=i=>{i&&(this.tokenChangeListeners.delete(A),s(i))};this.tokenChangeListeners.add(A),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Gt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ne(xy()&&!Qy(),this.auth,"internal-error"),await NV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await NM(this.auth);ne(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function NV(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Li._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function PV(t,e,n){if(Qt(t.app))return Promise.reject(un(t));const r=Rt(t),s=await xg(r,e,Fe(n));return new Sy(s,A=>wg(r,A))}async function DV(t,e,n){const r=Fe(t);await mg(!1,r,"phone");const s=await xg(r.auth,e,Fe(n));return new Sy(s,A=>NU(r,A))}async function LV(t,e,n){const r=Fe(t);if(Qt(r.auth.app))return Promise.reject(un(r.auth));const s=await xg(r.auth,e,Fe(n));return new Sy(s,A=>PU(r,A))}async function xg(t,e,n){var r;const s=await n.verify();try{ne(typeof s=="string",t,"argument-error"),ne(n.type===zU,t,"argument-error");let A;if(typeof e=="string"?A={phoneNumber:e}:A=e,"session"in A){const i=A.session;if("phoneNumber"in A)return ne(i.type==="enroll",t,"internal-error"),(await AV(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{ne(i.type==="signin",t,"internal-error");const o=((r=A.multiFactorHint)===null||r===void 0?void 0:r.uid)||A.multiFactorUid;return ne(o,t,"missing-multi-factor-info"),(await xV(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await xj(t,{phoneNumber:A.phoneNumber,recaptchaToken:s});return i}}finally{n._reset()}}async function OV(t,e){const n=Fe(t);if(Qt(n.auth.app))return Promise.reject(un(n.auth));await Iy(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=class uh{constructor(e){this.providerId=uh.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,n){return xg(this.auth,e,Fe(n))}static credential(e,n){return Li._fromVerification(e,n)}static credentialFromResult(e){const n=e;return uh.credentialFromTaggedObject(n)}static credentialFromError(e){return uh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Li._fromTokenResponse(n,r):null}};no.PROVIDER_ID="phone";no.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e){return e?hr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Ya{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MV(t){return RU(t.auth,new Ry(t),t.bypassAuthState)}function jV(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),SU(n,new Ry(t),t.bypassAuthState)}async function VV(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),Iy(n,new Ry(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,n,r,s,A=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:A,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MV;case"linkViaPopup":case"linkViaRedirect":return VV;case"reauthViaPopup":case"reauthViaRedirect":return jV;default:xn(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new bu(2e3,1e4);async function KV(t,e,n){if(Qt(t.app))return Promise.reject(en(t,"operation-not-supported-in-this-environment"));const r=Rt(t);Xa(t,e,Ys);const s=go(r,n);return new ks(r,"signInViaPopup",e,s).executeNotNull()}async function GV(t,e,n){const r=Fe(t);if(Qt(r.auth.app))return Promise.reject(en(r.auth,"operation-not-supported-in-this-environment"));Xa(r.auth,e,Ys);const s=go(r.auth,n);return new ks(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function zV(t,e,n){const r=Fe(t);Xa(r.auth,e,Ys);const s=go(r.auth,n);return new ks(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class ks extends WU{constructor(e,n,r,s,A){super(e,n,s,A),this.provider=r,this.authWindow=null,this.pollId=null,ks.currentPopupAction&&ks.currentPopupAction.cancel(),ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Qu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HV.get())};e()}}ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="pendingRedirect",cc=new Map;class $V extends WU{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cc.get(this.auth._key());if(!e){try{const r=await qV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cc.set(this.auth._key(),e)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qV(t,e){const n=qU(e),r=$U(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Ny(t,e){return $U(t)._set(qU(e),"true")}function JV(){cc.clear()}function Py(t,e){cc.set(t._key(),e)}function $U(t){return hr(t._redirectPersistence)}function qU(t){return Di(WV,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t,e,n){return YV(t,e,n)}async function YV(t,e,n){if(Qt(t.app))return Promise.reject(un(t));const r=Rt(t);Xa(t,e,Ys),await r._initializationPromise;const s=go(r,n);return await Ny(s,r),s._openRedirect(r,e,"signInViaRedirect")}function ZV(t,e,n){return eH(t,e,n)}async function eH(t,e,n){const r=Fe(t);if(Xa(r.auth,e,Ys),Qt(r.auth.app))return Promise.reject(un(r.auth));await r.auth._initializationPromise;const s=go(r.auth,n);await Ny(s,r.auth);const A=await JU(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",A)}function tH(t,e,n){return nH(t,e,n)}async function nH(t,e,n){const r=Fe(t);Xa(r.auth,e,Ys),await r.auth._initializationPromise;const s=go(r.auth,n);await mg(!1,r,e.providerId),await Ny(s,r.auth);const A=await JU(r);return s._openRedirect(r.auth,e,"linkViaRedirect",A)}async function rH(t,e){return await Rt(t)._initializationPromise,Cg(t,e,!1)}async function Cg(t,e,n=!1){if(Qt(t.app))return Promise.reject(un(t));const r=Rt(t),s=go(r,e),i=await new $V(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function JU(t){const e=Qu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=10*60*1e3;class XU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YU(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sH&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZU(t,e={}){return Pt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oH=/^https?/;async function aH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZU(t);for(const n of e)try{if(lH(n))return}catch{}xn(t,"unauthorized-domain")}function lH(t){const e=eu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!oH.test(n))return!1;if(iH.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=new bu(3e4,6e4);function O_(){const t=Gt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uH(t){return new Promise((e,n)=>{var r,s,A;function i(){O_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O_(),n(en(t,"network-request-failed"))},timeout:cH.get()})}if(!((s=(r=Gt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=Gt().gapi)===null||A===void 0)&&A.load)i();else{const o=bU("iframefcb");return Gt()[o]=()=>{gapi.load?i():n(en(t,"network-request-failed"))},_y(`${rj()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw dh=null,e})}let dh=null;function dH(t){return dh=dh||uH(t),dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH=new bu(5e3,15e3),fH="__/auth/iframe",gH="emulator/auth/iframe",pH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wH(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Cy(e,gH):`https://${t.config.authDomain}/${fH}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},s=mH.get(t.config.apiHost);s&&(r.eid=s);const A=t._getFrameworks();return A.length&&(r.fw=A.join(",")),`${n}?${Va(r).slice(1)}`}async function vH(t){const e=await dH(t),n=Gt().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:wH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pH,dontclear:!0},r=>new Promise(async(s,A)=>{await r.restyle({setHideOnLeave:!1});const i=en(t,"network-request-failed"),o=Gt().setTimeout(()=>{A(i)},hH.get());function a(){Gt().clearTimeout(o),s(r)}r.ping(a).then(a,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BH=500,xH=600,CH="_blank",_H="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IH(t,e,n,r=BH,s=xH){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},yH),{width:r.toString(),height:s.toString(),top:A,left:i}),c=Ft().toLowerCase();n&&(o=BU(c)?CH:n),vU(c)&&(e=e||_H,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[w,p])=>`${f}${w}=${p},`,"");if(WM(c)&&o!=="_self")return EH(e||"",o),new M_(null);const h=window.open(e||"",o,d);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new M_(h)}function EH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH="__/auth/handler",TH="emulator/auth/handler",FH=encodeURIComponent("fac");async function L0(t,e,n,r,s,A){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:s};if(e instanceof Ys){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",GN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(A||{}))i[d]=h}if(e instanceof Za){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${FH}=${encodeURIComponent(a)}`:"";return`${UH(t)}?${Va(o).slice(1)}${c}`}function UH({config:t}){return t.emulator?Cy(t,TH):`https://${t.authDomain}/${bH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="webStorageSupport";class kH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=Cg,this._overrideRedirectResult=Py}async _openPopup(e,n,r,s){var A;Wr((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await L0(e,n,r,eu(),s);return IH(e,i,Qu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const A=await L0(e,n,r,eu(),s);return hV(A),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:A}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(A,"If manager is not set, promise should be"),A)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vH(e),r=new XU(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pp,{type:Pp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[Pp];i!==void 0&&n(!!i),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IU()||yU()||Fu()}}const QH=kH;class SH{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return as("unexpected MultiFactorSessionType")}}}class Dy extends SH{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Dy(e)}_finalizeEnroll(e,n,r){return iV(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return CV(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ek{constructor(){}static assertion(e){return Dy._fromCredential(e)}}ek.FACTOR_ID="phone";var j_="@firebase/auth",V_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PH(t){GA(new hs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;ne(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EU(t)},c=new ZM(r,s,A,a);return oj(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),GA(new hs("auth-internal",e=>{const n=Rt(e.getProvider("auth").getImmediate());return(r=>new RH(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(j_,V_,NH(t)),Kr(j_,V_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH=5*60;NN("authIdTokenMaxAge");function LH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ej({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const A=en("internal-error");A.customData=s,n(A)},r.type="text/javascript",r.charset="UTF-8",LH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PH("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=2e3;async function MH(t,e,n){var r;const{BuildInfo:s}=ro();Wr(e.sessionId,"AuthEvent did not contain a session ID");const A=await GH(e.sessionId),i={};return Fu()?i.ibi=s.packageName:Tu()?i.apn=s.packageName:xn(t,"operation-not-supported-in-this-environment"),s.displayName&&(i.appDisplayName=s.displayName),i.sessionId=A,L0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function jH(t){const{BuildInfo:e}=ro(),n={};Fu()?n.iosBundleId=e.packageName:Tu()?n.androidPackageName=e.packageName:xn(t,"operation-not-supported-in-this-environment"),await ZU(t,n)}function VH(t){const{cordova:e}=ro();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,zM()?"_blank":"_system","location=yes"),n(s)})})}async function HH(t,e,n){const{cordova:r}=ro();let s=()=>{};try{await new Promise((A,i)=>{let o=null;function a(){var h;A();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{i(en(t,"redirect-cancelled-by-user"))},OH))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(a),document.addEventListener("resume",c,!1),Tu()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(a),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{s()}}function KH(t){var e,n,r,s,A,i,o,a,c,d;const h=ro();ne(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne(typeof((A=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||A===void 0?void 0:A.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function GH(t){const e=zH(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function zH(t){if(Wr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH=20;class $H extends XU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function qH(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:YH(),postBody:null,tenantId:t.tenantId,error:en(t,"no-auth-event")}}function JH(t,e){return O0()._set(M0(t),e)}async function H_(t){const e=await O0()._get(M0(t));return e&&await O0()._remove(M0(t)),e}function XH(t,e){var n,r;const s=eK(e);if(s.includes("/__/auth/callback")){const A=hh(s),i=A.firebaseError?ZH(decodeURIComponent(A.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?en(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function YH(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<WH;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function O0(){return hr(ky)}function M0(t){return Di("authEvent",t.config.apiKey,t.name)}function ZH(t){try{return JSON.parse(t)}catch{return null}}function eK(t){const e=hh(t),n=e.link?decodeURIComponent(e.link):void 0,r=hh(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return hh(s).link||s||r||n||t}function hh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Xo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK=500;class nK{constructor(){this._redirectPersistence=to,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cg,this._overrideRedirectResult=Py}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new $H(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){xn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){KH(e);const A=await this._initialize(e);await A.initialized(),A.resetRedirect(),JV(),await this._originValidation(e);const i=qH(e,r,s);await JH(e,i);const o=await MH(e,i,n),a=await VH(o);return HH(e,A,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jH(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:A}=ro(),i=setTimeout(async()=>{await H_(e),n.onEvent(K_())},tK),o=async d=>{clearTimeout(i);const h=await H_(e);let f=null;h&&(d!=null&&d.url)&&(f=XH(h,d.url)),n.onEvent(f||K_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=s,c=`${A.packageName.toLowerCase()}://`;ro().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const rK=nK;function K_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t,e){Rt(t)._logFramework(e)}var AK="@firebase/auth-compat",iK="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=1e3;function uc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function aK(){return uc()==="http:"||uc()==="https:"}function tk(t=Ft()){return!!((uc()==="file:"||uc()==="ionic:"||uc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lK(){return uv()||cv()}function cK(){return IT()&&(document==null?void 0:document.documentMode)===11}function uK(t=Ft()){return/Edge\/\d+/.test(t)}function dK(t=Ft()){return cK()||uK(t)}function nk(){try{const t=self.localStorage,e=Qu();if(t)return t.setItem(e,"1"),t.removeItem(e),dK()?Pc():!0}catch{return Ly()&&Pc()}return!1}function Ly(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dp(){return(aK()||_T()||tk())&&!lK()&&nk()&&!Ly()}function rk(){return tk()&&typeof document<"u"}async function hK(){return rk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},oK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function fK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr={LOCAL:"local",NONE:"none",SESSION:"session"},_l=ne,sk="persistence";function gK(t,e){if(_l(Object.values(cr).includes(e),t,"invalid-persistence-type"),uv()){_l(e!==cr.SESSION,t,"unsupported-persistence-type");return}if(cv()){_l(e===cr.NONE,t,"unsupported-persistence-type");return}if(Ly()){_l(e===cr.NONE||e===cr.LOCAL&&Pc(),t,"unsupported-persistence-type");return}_l(e===cr.NONE||nk(),t,"unsupported-persistence-type")}async function j0(t){await t._initializationPromise;const e=Ak(),n=Di(sk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function pK(t,e){const n=Ak();if(!n)return[];const r=Di(sk,t,e);switch(n.getItem(r)){case cr.NONE:return[Na];case cr.LOCAL:return[su,to];case cr.SESSION:return[to];default:return[]}}function Ak(){var t;try{return((t=fK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=ne;class CA{constructor(){this.browserResolver=hr(QH),this.cordovaResolver=hr(rK),this.underlyingResolver=null,this._redirectPersistence=to,this._completeRedirectFn=Cg,this._overrideRedirectResult=Py}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await hK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){return t.unwrap()}function wK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vK(t){return ok(t)}function yK(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new BK(t,sV(t,e))}else if(r){const s=ok(e),A=e;s&&(A.credential=s,A.tenantId=r.tenantId||void 0,A.email=r.email||void 0,A.phoneNumber=r.phoneNumber||void 0)}}function ok(t){const{_tokenResponse:e}=t instanceof Vn?t.customData:t;if(!e)return null;if(!(t instanceof Vn)&&"temporaryProof"in e&&"phoneNumber"in e)return no.credentialFromResult(t);const n=e.providerId;if(!n||n===Cl.PASSWORD)return null;let r;switch(n){case Cl.GOOGLE:r=ns;break;case Cl.FACEBOOK:r=ts;break;case Cl.GITHUB:r=rs;break;case Cl.TWITTER:r=ss;break;default:const{oauthIdToken:s,oauthAccessToken:A,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!A&&!i&&!s&&!o?null:o?n.startsWith("saml.")?Pa._create(n,o):ms._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:s,accessToken:A}):new la(n).credential({idToken:s,accessToken:A,rawNonce:a})}return t instanceof Vn?r.credentialFromError(t):r.credentialFromResult(t)}function qn(t,e){return e.catch(n=>{throw n instanceof Vn&&yK(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:vK(n),additionalUserInfo:rV(n),user:Qs.getOrCreate(s)}})}async function V0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>qn(t,n.confirm(r))}}class BK{constructor(e,n){this.resolver=n,this.auth=wK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return qn(ik(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._delegate=e,this.multiFactor=aV(e)}static getOrCreate(e){return Qs.USER_MAP.has(e)||Qs.USER_MAP.set(e,new Qs(e)),Qs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return qn(this.auth,NU(this._delegate,e))}async linkWithPhoneNumber(e,n){return V0(this.auth,DV(this._delegate,e,n))}async linkWithPopup(e){return qn(this.auth,zV(this._delegate,e,CA))}async linkWithRedirect(e){return await j0(Rt(this.auth)),tH(this._delegate,e,CA)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return qn(this.auth,PU(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return V0(this.auth,LV(this._delegate,e,n))}reauthenticateWithPopup(e){return qn(this.auth,GV(this._delegate,e,CA))}async reauthenticateWithRedirect(e){return await j0(Rt(this.auth)),ZV(this._delegate,e,CA)}sendEmailVerification(e){return zj(this._delegate,e)}async unlink(e){return await Qj(this._delegate,e),this}updateEmail(e){return Jj(this._delegate,e)}updatePassword(e){return Xj(this._delegate,e)}updatePhoneNumber(e){return OV(this._delegate,e)}updateProfile(e){return qj(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return Wj(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=ne;class H0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Il(r,"invalid-api-key",{appName:e.name}),Il(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?CA:void 0;this._delegate=n.initialize({options:{persistence:xK(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(IM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){aj(this._delegate,e,n)}applyActionCode(e){return Dj(this._delegate,e)}checkActionCode(e){return DU(this._delegate,e)}confirmPasswordReset(e,n){return Pj(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return qn(this._delegate,Oj(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Gj(this._delegate,e)}isSignInWithEmailLink(e){return Vj(this._delegate,e)}async getRedirectResult(){Il(Dp(),this._delegate,"operation-not-supported-in-this-environment");const e=await rH(this._delegate,CA);return e?qn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){sK(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:A,complete:i}=G_(e,n,r);return this._delegate.onAuthStateChanged(s,A,i)}onIdTokenChanged(e,n,r){const{next:s,error:A,complete:i}=G_(e,n,r);return this._delegate.onIdTokenChanged(s,A,i)}sendSignInLinkToEmail(e,n){return jj(this._delegate,e,n)}sendPasswordResetEmail(e,n){return Nj(this._delegate,e,n||void 0)}async setPersistence(e){gK(this._delegate,e);let n;switch(e){case cr.SESSION:n=to;break;case cr.LOCAL:n=await hr(su)._isAvailable()?su:ky;break;case cr.NONE:n=Na;break;default:return xn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return qn(this._delegate,kj(this._delegate))}signInWithCredential(e){return qn(this._delegate,wg(this._delegate,e))}signInWithCustomToken(e){return qn(this._delegate,Rj(this._delegate,e))}signInWithEmailAndPassword(e,n){return qn(this._delegate,Mj(this._delegate,e,n))}signInWithEmailLink(e,n){return qn(this._delegate,Hj(this._delegate,e,n))}signInWithPhoneNumber(e,n){return V0(this._delegate,PV(this._delegate,e,n))}async signInWithPopup(e){return Il(Dp(),this._delegate,"operation-not-supported-in-this-environment"),qn(this._delegate,KV(this._delegate,e,CA))}async signInWithRedirect(e){return Il(Dp(),this._delegate,"operation-not-supported-in-this-environment"),await j0(this._delegate),XV(this._delegate,e,CA)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Lj(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}H0.Persistence=cr;function G_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:i=>s(i&&Qs.getOrCreate(i)),error:e,complete:n}}function xK(t,e){const n=pK(t,e);if(typeof self<"u"&&!n.includes(su)&&n.push(su),typeof window<"u")for(const r of[ky,to])n.includes(r)||n.push(r);return n.includes(Na)||n.push(Na),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.providerId="phone",this._delegate=new no(ik(es.auth()))}static credential(e,n){return no.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Oy.PHONE_SIGN_IN_METHOD=no.PHONE_SIGN_IN_METHOD;Oy.PROVIDER_ID=no.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=ne;class _K{constructor(e,n,r=es.app()){var s;CK((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new RV(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK="auth-compat";function EK(t){t.INTERNAL.registerComponent(new hs(IK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new H0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Io.EMAIL_SIGNIN,PASSWORD_RESET:Io.PASSWORD_RESET,RECOVER_EMAIL:Io.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Io.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Io.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Io.VERIFY_EMAIL}},EmailAuthProvider:ci,FacebookAuthProvider:ts,GithubAuthProvider:rs,GoogleAuthProvider:ns,OAuthProvider:la,SAMLAuthProvider:lf,PhoneAuthProvider:Oy,PhoneMultiFactorGenerator:ek,RecaptchaVerifier:_K,TwitterAuthProvider:ss,Auth:H0,AuthCredential:Ya,Error:Vn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(AK,iK)}EK(es);const z_={apiKey:"AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",authDomain:"zameny-b6c3f.firebaseapp.com",projectId:"zameny-b6c3f",storageBucket:"zameny-b6c3f.firebasestorage.app",messagingSenderId:"323355347910",appId:"1:323355347910:web:c81f2813dce5ee9373c0c7"};let W_,or,Jt;if(z_.apiKey)try{es.apps.length?W_=es.app():W_=es.initializeApp(z_),or=es.firestore(),Jt=es.auth()}catch(t){console.error("Firebase init error:",t)}const Lp="schoolData",Op="main",Mp="publicSchedules",_A={open:async()=>(console.log("Firestore connected"),{}),save:async t=>{if(!or){console.error("Database not initialized (missing API key)");return}const e=Jt==null?void 0:Jt.currentUser,n=["admin@gymnasium22.com","teacher@gymnasium22.com"];if(!e||!e.email||!n.includes(e.email)){console.warn(" :       .");return}try{const r=JSON.parse(JSON.stringify(t));await or.collection(Lp).doc(Op).set(r)}catch(r){throw console.error("   Firebase:",r),r.code==="permission-denied"&&alert(` :   .

:     (Firestore Rules)   Firebase,     .`),r}},load:async()=>{if(!or)return console.warn("Database not initialized. Returning initial data."),zt;try{const t=await or.collection(Lp).doc(Op).get();if(t.exists){const e=t.data(),n={...zt,...e};return e.settings&&(n.settings={...zt.settings,...e.settings}),n}else return zt}catch(t){return console.error("   Firebase:",t),t.code==="permission-denied"&&console.error("   .   (allow read: if true)."),zt}},subscribe:(t,e)=>or?or.collection(Lp).doc(Op).onSnapshot(n=>{if(n.exists){const r=n.data(),s={...zt,...r};r.settings&&(s.settings={...zt.settings,...r.settings}),t(s)}else t(zt)},n=>{console.error("Firestore subscription error:",n),n.code==="permission-denied"&&console.error("    (subscribe)."),e(n)}):(console.warn("Database not initialized. Cannot subscribe."),()=>{}),exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{if(!or)throw new Error("Database not initialized");const n=Jt==null?void 0:Jt.currentUser;if(!n||n.email!=="admin@gymnasium22.com")throw new Error("    .");try{const r={subjects:e.subjects,teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},s=JSON.parse(JSON.stringify(r));await or.collection(Mp).doc(t).set(s)}catch(r){throw console.error("  :",r),r}},getPublicData:async t=>{if(!or)return null;try{const e=await or.collection(Mp).doc(t).get();return e.exists?e.data():null}catch(e){return console.error("   :",e),null}},deletePublicData:async t=>{if(!or)throw new Error("Database not initialized");const e=Jt==null?void 0:Jt.currentUser;if(!e||e.email!=="admin@gymnasium22.com")throw new Error("     .");try{await or.collection(Mp).doc(t).delete()}catch(n){throw console.error("   :",n),n}}},ak=Q.createContext(void 0),bK="admin@gymnasium22.com",TK="teacher@gymnasium22.com",FK=({children:t})=>{const[e,n]=Q.useState(null),[r,s]=Q.useState(null),[A,i]=Q.useState(!0);Q.useEffect(()=>{if(!Jt){console.warn("Firebase Auth is not initialized. Authentication is disabled."),i(!1);return}const c=Jt.onAuthStateChanged(d=>{n(d),d?d.email===bK?s("admin"):d.email===TK?s("teacher"):(s(null),Jt==null||Jt.signOut()):s(null),i(!1)});return()=>c()},[]);const o=async()=>{Jt&&await Jt.signOut(),s(null)},a=()=>{s("guest"),i(!1)};return l.jsx(ak.Provider,{value:{user:e,role:r,loading:A,logout:o,setGuestRole:a},children:t})},po=()=>{const t=Q.useContext(ak);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},My=Q.createContext(void 0),lk=({children:t,initialData:e})=>{const[n,r]=Q.useState(zt),[s,A]=Q.useState(!0),[i,o]=Q.useState([]),[a,c]=Q.useState(-1),{user:d,role:h,loading:f}=po();Q.useEffect(()=>{if(e){r(e),o([e]),c(0),A(!1);return}if(f)return;if(!(d||h==="guest")){r(zt),A(!1);return}A(!0);const v=_A.subscribe(R=>{const S={...zt,...R};S.teachers||(S.teachers=[]),S.teachers=S.teachers.map(N=>({shifts:[ce.First,ce.Second],telegramChatId:"",...N})),S.schedule||(S.schedule=[]),S.substitutions||(S.substitutions=[]),S.bellSchedule||(S.bellSchedule=mT),S.requests||(S.requests=[]),S.settings?S.settings={...zt.settings,...S.settings}:S.settings=zt.settings,r(S),o(N=>N.length===0?[S]:N),c(N=>N===-1?0:N),A(!1)},R=>{console.error("Failed to subscribe to data:",R),r(zt),A(!1)});return()=>{v&&v()}},[e,d,h,f]);const w=Q.useCallback(async(B,v=!0)=>{const R=!d&&h==="guest",S={...n,...B};if(r(S),!e&&d&&!R)try{await _A.save(S)}catch(N){console.error("Save failed silently in background",N)}else R&&console.warn("       .");if(v){const N=i.slice(0,a+1);N.push(S),N.length>50&&N.shift(),o(N),c(N.length-1)}},[n,i,a,d,h,e]),p=Q.useCallback(async()=>{if(a>0){const B=i[a-1];c(a-1),r(B),!e&&d&&await _A.save(B)}},[i,a,d,e]),C=Q.useCallback(async()=>{if(a<i.length-1){const B=i[a+1];c(a+1),r(B),!e&&d&&await _A.save(B)}},[i,a,d,e]),_=Q.useCallback(async()=>{await w(zt)},[w]),y=Q.useMemo(()=>({data:n,isLoading:s,saveData:w,resetData:_,undo:p,redo:C,canUndo:a>0,canRedo:a<i.length-1}),[n,s,w,_,p,C,a]);return l.jsx(My.Provider,{value:y,children:t})},_g=()=>{const t=Q.useContext(My);if(!t)throw new Error("useFullData must be used within DataProvider");return t},ck=Q.createContext(void 0),uk=Q.createContext(void 0),dk=({children:t})=>{const{data:e,saveData:n}=_g(),r=Q.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,requests:e.requests}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.requests]),s=Q.useCallback(async(i,o)=>{await n(i,o)},[n]),A=Q.useMemo(()=>({...r,saveStaticData:s}),[r,s]);return l.jsx(ck.Provider,{value:A,children:t})},hk=({children:t})=>{const{data:e,saveData:n}=_g(),r=Q.useMemo(()=>({schedule:e.schedule,substitutions:e.substitutions}),[e.schedule,e.substitutions]),s=Q.useCallback(async(i,o)=>{await n(i,o)},[n]),A=Q.useMemo(()=>({...r,saveScheduleData:s}),[r,s]);return l.jsx(uk.Provider,{value:A,children:t})},Zs=()=>{const t=Q.useContext(ck);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=_g();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},el=()=>{const t=Q.useContext(uk);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=_g();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},UK=()=>{const t=Q.useContext(My);if(!t)throw new Error("useData must be used within DataProvider");return t},kK={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),MessageSquare:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Inbox:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),l.jsx("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Info:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),MapPin:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),l.jsx("circle",{cx:"12",cy:"10",r:"3"})]})},W=({name:t,size:e=24,className:n="",...r})=>{const s=kK[t];return s?l.jsx(s,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},Gr=({isOpen:t,onClose:e,title:n,children:r,maxWidth:s="max-w-lg"})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(W,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,QK=({x:t,y:e,onClose:n,actions:r})=>{if(Q.useEffect(()=>{const A=()=>n();return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[n]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:r.map((A,i)=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),A.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${A.color||"text-slate-700 dark:text-slate-200"}`,children:[A.icon&&l.jsx(W,{name:A.icon,size:16}),A.label]},i))})},SK=()=>{const{bellSchedule:t}=Zs(),[e,n]=Q.useState("..."),[r,s]=Q.useState(""),[A,i]=Q.useState(0),[o,a]=Q.useState("bg-slate-500"),[c,d]=Q.useState("");return Q.useEffect(()=>{const h=()=>{const w=new Date,p=w.getDay(),_=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][p];if(d(_||""),!_){n(" "),s(" "),a("bg-slate-400"),i(0);return}const y=w.getHours()*60+w.getMinutes();let B=t.filter(S=>S.day===_);B.length===0&&(B=t.filter(S=>S.day==="default"));let v=null;const R=S=>{const[N,I]=S.split(":").map(Number);return N*60+I};for(const S of B){const N=R(S.start),I=R(S.end);if(y>=N&&y<I){v={...S,duration:I-N,passed:y-N};break}}if(v)n(`${v.period} `),s(`${v.shift===ce.First?"1 ":"2 "}  . ${v.duration-v.passed} `),i(v.passed/v.duration*100),a("bg-indigo-600");else{let S=1/0,N=null;for(const I of B){const x=R(I.start);x>y&&x-y<S&&(S=x-y,N=I)}N&&S<30?(n(""),s(` ${S}  ${N.period} `),a("bg-amber-500"),i(100-S/20*100)):(n(" "),s(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:l.jsx(W,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),A>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${A}%`}})})]})},jp=({options:t,value:e,onChange:n,placeholder:r,groupBy:s})=>{var w;const[A,i]=Q.useState(!1),[o,a]=Q.useState(""),c=Q.useRef(null);Q.useEffect(()=>{const p=C=>{c.current&&!c.current.contains(C.target)&&i(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=((w=(s?t.flatMap(p=>p.options):t).find(p=>p.value===e))==null?void 0:w.label)||r,f=s?t.map(p=>({...p,options:p.options.filter(C=>C.label.toLowerCase().includes(o.toLowerCase()))})).filter(p=>p.options.length>0):t.filter(p=>p.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(W,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:p=>a(p.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s?f.map((p,C)=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:p.label}),p.options.map(_=>l.jsx("div",{onClick:()=>{n(_.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===_.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:_.label},_.value))]},C)):f.map(p=>l.jsx("div",{onClick:()=>{n(p.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===p.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:p.label},p.value))]})]})},yd=({children:t,className:e=""})=>{const n=Ei.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,s)=>l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:r},s))})},Vp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>l.jsx("div",{className:"space-y-3",children:t.map((r,s)=>l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},s))}),RK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,settings:A}=Zs(),{schedule:i,substitutions:o}=el(),a=hu(),[c,d]=Q.useState(localStorage.getItem("gym_notes")||""),[h]=Q.useState(new Date),[f,w]=Q.useState(""),[p,C]=Q.useState(null),[_,y]=Q.useState(!1),[B,v]=Q.useState(""),[R,S]=Q.useState(!1),[N,I]=Q.useState(""),[x,b]=Q.useState(!1);Q.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){v("");const F=setTimeout(()=>v(""),2e3);return()=>clearTimeout(F)}},[c]);const k=F=>new Date(F.getTime()-F.getTimezoneOffset()*6e4).toISOString().split("T")[0],U=Q.useMemo(()=>k(h),[h]),D=Q.useMemo(()=>{const F=h.getDay();return F===0||F===6?null:Un[F-1]},[h]),T=Q.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),e.filter(L=>L.birthDate).map(L=>{const H=new Date(L.birthDate);let $=new Date(F.getFullYear(),H.getMonth(),H.getDate());$<F&&$.setFullYear(F.getFullYear()+1);const q=Math.ceil(($.getTime()-F.getTime())/(1e3*60*60*24));return{...L,diff:q,age:F.getFullYear()-H.getFullYear()}}).filter(L=>L.diff<=30).sort((L,H)=>L.diff-H.diff)},[e]),Ee=Q.useMemo(()=>{const F=e.length,L=new Map;e.filter(te=>te.unavailableDates.includes(U)).forEach(te=>{var Qe;const ze=((Qe=te.absenceReasons)==null?void 0:Qe[U])===" "?" ":"";L.set(te.id,{id:te.id,name:te.name,displayReason:ze})});const H=o.filter(te=>te.date===U&&te.replacementTeacherId!=="conducted"&&te.replacementTeacherId!==te.originalTeacherId),$=new Map;H.forEach(te=>{if(L.has(te.originalTeacherId))return;const Ne=e.find(Se=>Se.id===te.originalTeacherId);if(!Ne)return;const ze=i.find(Se=>Se.id===te.scheduleItemId);if(!ze)return;$.has(te.originalTeacherId)||$.set(te.originalTeacherId,{teacher:Ne,lessons:[]}),$.get(te.originalTeacherId).lessons.push({period:ze.period,reason:te.lessonAbsenceReason})});const q=Array.from(L.values());$.forEach((te,Ne)=>{const ze=te.lessons.sort((be,ke)=>be.period-ke.period),Qe=ze.map(be=>be.period).join(", "),De=ze.some(be=>be.reason===" ")?" ":"";q.push({id:Ne,name:te.teacher.name,displayReason:`${Qe} : ${De}`})}),q.sort((te,Ne)=>te.name.localeCompare(Ne.name));const se=q.length,fe=F-se;return{presentPercent:F>0?Math.round(fe/F*100):0,absentCount:se,totalTeachers:F,absentTeachersList:q}},[e,U,o,i]),$e=Q.useMemo(()=>{const F=new Date(h);for(F.setDate(h.getDate()+1);F.getDay()===0||F.getDay()===6;)F.setDate(F.getDate()+1);const H=[null,"","","","","",null][F.getDay()];if(!H)return[];const $=[];return n.forEach(q=>{const se=i.filter(fe=>fe.classId===q.id&&fe.day===H);se.length===0?$.push({class:q.name,issue:`   ${H}`}):se.length<4&&$.push({class:q.name,issue:`  (${se.length})`}),se.forEach(fe=>{if(i.some(te=>te.id!==fe.id&&te.day===H&&te.period===fe.period&&te.shift===fe.shift&&te.teacherId===fe.teacherId)&&$.push({class:q.name,issue:`  (${fe.period} )`}),fe.roomId){const te=r.find(Ne=>Ne.id===fe.roomId);te&&te.capacity<q.studentsCount&&$.push({class:q.name,issue:`: ${te.name} (${fe.period} )`})}})}),$.filter((q,se,fe)=>fe.findIndex(Ue=>Ue.class===q.class&&Ue.issue===q.issue)===se).slice(0,10)},[i,n,e,r,h]),Oe=Q.useMemo(()=>{if(!D)return 0;let F=0;const L=i.filter(H=>H.day===D);for(const H of L){const $=e.find(q=>q.id===H.teacherId);if($&&$.unavailableDates.includes(U)){const q=o.find(se=>se.scheduleItemId===H.id&&se.date===U);(!q||q.replacementTeacherId==="cancelled"||q.replacementTeacherId==="conducted")&&F++}}return F},[i,e,o,U,D]),V=()=>{var ze;if(!f){C(null);return}const F=new Date,H=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][F.getDay()];if(!H){C({status:"",detail:"  ",color:"text-slate-500"});return}const $=Qe=>{const[Se,De]=Qe.split(":").map(Number);return Se*60+De},q=F.getHours()*60+F.getMinutes();let se=s.filter(Qe=>Qe.day===H);se.length===0&&(se=s.filter(Qe=>Qe.day==="default"));const fe=se.find(Qe=>{const Se=$(Qe.start),De=$(Qe.end);return q>=Se&&q<=De}),Ue=f.toLowerCase(),te=e.find(Qe=>Qe.name.toLowerCase().includes(Ue)),Ne=n.find(Qe=>Qe.name.toLowerCase().includes(Ue));if(!te&&!Ne){C({status:" ",detail:" ",color:"text-red-500"});return}if(te){if(te.unavailableDates.includes(U)){const ke=((ze=te.absenceReasons)==null?void 0:ze[U])===" "?" ":"";C({status:"",detail:ke,color:"text-red-500",icon:"UserX",items:[]});return}if(!fe){C({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Qe=i.filter(be=>be.teacherId===te.id&&be.day===H&&be.period===fe.period&&be.shift===fe.shift),Se=o.filter(be=>be.date===U&&be.replacementTeacherId===te.id).map(be=>i.find(ke=>ke.id===be.scheduleItemId)).filter(be=>!!be&&be.day===H&&be.period===fe.period&&be.shift===fe.shift);let De=[];Qe.forEach(be=>{var tt,qe,nn;const ke=o.find(rt=>rt.date===U&&rt.scheduleItemId===be.id);if(!ke||ke.replacementTeacherId===te.id){const rt=((tt=r.find(rn=>rn.id===((ke==null?void 0:ke.replacementRoomId)||be.roomId)))==null?void 0:tt.name)||(ke==null?void 0:ke.replacementRoomId)||be.roomId||" .",dn=(qe=t.find(rn=>rn.id===be.subjectId))==null?void 0:qe.name,Nn=(nn=n.find(rn=>rn.id===be.classId))==null?void 0:nn.name;De.push({room:rt,subject:dn,entityName:Nn,direction:be.direction,isSubstitution:!!(ke&&ke.replacementTeacherId===te.id),originalTeacherName:null})}}),Se.forEach(be=>{var dn,Nn,rn;const ke=o.find(O=>O.date===U&&O.scheduleItemId===be.id&&O.replacementTeacherId===te.id);if(!ke)return;const tt=((dn=r.find(O=>O.id===(ke.replacementRoomId||be.roomId)))==null?void 0:dn.name)||ke.replacementRoomId||be.roomId||" .",qe=(Nn=t.find(O=>O.id===be.subjectId))==null?void 0:Nn.name,nn=(rn=n.find(O=>O.id===be.classId))==null?void 0:rn.name,rt=e.find(O=>O.id===ke.originalTeacherId);De.push({room:tt,subject:qe,entityName:nn,direction:be.direction,isSubstitution:!0,originalTeacherName:rt==null?void 0:rt.name})}),De.length>0?C({status:` ${fe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:De}):C({status:"",detail:` ( ${fe.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(Ne){if(!fe){C({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Qe=i.filter(Se=>Se.classId===Ne.id&&Se.day===H&&Se.period===fe.period&&Se.shift===fe.shift);if(Qe.length>0){const Se=Qe.map(ke=>{var J,re,me,we,he;const tt=o.find(ie=>ie.scheduleItemId===ke.id&&ie.date===U);if(tt&&tt.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(J=t.find(ie=>ie.id===ke.subjectId))==null?void 0:J.name};const qe=!!(tt&&tt.replacementTeacherId!=="conducted"&&tt.replacementTeacherId!=="cancelled"),nn=qe?tt.replacementTeacherId:ke.teacherId,rt=(tt==null?void 0:tt.replacementRoomId)||ke.roomId,dn=(re=e.find(ie=>ie.id===nn))==null?void 0:re.name,Nn=((me=r.find(ie=>ie.id===rt))==null?void 0:me.name)||rt||" .",rn=(we=t.find(ie=>ie.id===ke.subjectId))==null?void 0:we.name,O=qe?(he=e.find(ie=>ie.id===tt.originalTeacherId))==null?void 0:he.name:null;return{room:Nn,subject:rn,entityName:dn,direction:ke.direction,isSubstitution:qe,originalTeacherName:O}}),De=Se.filter(ke=>!ke.cancelled),be=Se.filter(ke=>!!ke.cancelled);De.length>0?C({status:` ${fe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:De}):be.length>0?C({status:" ",detail:be.map(ke=>ke.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):C({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else C({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},z=async()=>{if(!N.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}b(!0);const F=` *   :*

${N}`;try{const H=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:F,parse_mode:"Markdown"})})).json();if(H.ok)alert("!   ."),S(!1),I("");else throw new Error(H.description)}catch(L){console.error("   Telegram:",L),alert(`   . : ${L}`)}finally{b(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(W,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(W,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:F=>w(F.target.value),onKeyDown:F=>F.key==="Enter"&&V(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:V,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(W,{name:"Search",size:20})})]}),p&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${p.color}`,children:[l.jsx(W,{name:p.icon||"Info",size:14})," ",p.status]}),p.items&&p.items.length>0?l.jsx("div",{className:"space-y-2",children:p.items.map((F,L)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[F.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:F.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.subject}),F.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:F.originalTeacherName?` ( ${F.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:F.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:F.room})]})]},L))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:p.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(W,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:Oe>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:Oe}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(W,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>y(!_),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:_?" ":" ",children:l.jsx(W,{name:_?"PieChart":"List",size:20})})]}),_?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Ee.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Ee.absentTeachersList.map(F=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:F.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:F.displayReason})]},F.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(W,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Ee.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Ee.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Ee.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(W,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(F=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.name}),l.jsx("span",{className:"font-bold text-slate-400",children:F.diff===0?"!":`${F.diff} .`})]},F.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(W,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:$e.length?$e.map((F,L)=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:F.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:F.issue})]},L)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(W,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:F=>d(F.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),B&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(W,{name:"Save",size:12})," ",B]})]})]})]}),l.jsx(Gr,{isOpen:R,onClose:()=>S(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:N,onChange:F=>I(F.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:z,disabled:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[x?l.jsx(W,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(W,{name:"Send",size:16}),x?"...":""]})})]})})]})};var fk={},gk={},pk={},Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});function NK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Ig.default=NK;var jy={};Object.defineProperty(jy,"__esModule",{value:!0});var PK=Ig,DK=" and ";function LK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],s=PK.default(n),A=r;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(DK)}jy.default=LK;var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});function OK(){}Vy.default=OK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Ig;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=jy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=Vy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(pk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=Q,n=pk;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(s){return!0}};var r=function(s){return function(A,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&c(!!f.matches)};return f.addListener(w),c(f.matches),function(){h=!1,f.removeListener(w)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(gk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=gk;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(fk);const MK=$I(fk),mk=({readOnly:t=!1})=>{const{subjects:e,teachers:n,classes:r,rooms:s}=Zs(),{schedule:A,saveScheduleData:i,canUndo:o,canRedo:a,undo:c,redo:d}=el(),[h,f]=Q.useState(ce.First),[w,p]=Q.useState(ur.Monday),[C,_]=Q.useState(!1),[y,B]=Q.useState({}),[v,R]=Q.useState("class"),[S,N]=Q.useState(""),[I,x]=Q.useState(""),[b,k]=Q.useState(""),[U,D]=Q.useState(!1),[T,Ee]=Q.useState({visible:!1,x:0,y:0,item:null,cell:null}),[$e,Oe]=Q.useState(null),[V,z]=Q.useState([]),[F,L]=Q.useState(null),[H,$]=Q.useState(null),q=MK({maxWidth:767}),[se,fe]=Q.useState(!0),[Ue,te]=Q.useState(!1),[Ne,ze]=Q.useState({isOpen:!1,type:"",day:"",classId:""}),[Qe,Se]=Q.useState(ur.Monday),[De,be]=Q.useState(""),ke=As[h],tt=()=>v==="week"?As[h].map(P=>({id:P.toString(),name:`${P} `})):v==="class"?S?r.filter(P=>P.id===S&&P.shift===h):r.filter(P=>P.shift===h):v==="teacher"?S?n.filter(P=>P.id===S):n:v==="subject"?S?e.filter(P=>P.id===S):e:[],qe=(P,Z)=>{let ye=[];if(v==="week"){const Ae=parseInt(P),ae=Z;ye=A.filter(ge=>ge.shift===h&&ge.period===Ae&&ge.day===ae),S&&(ye=ye.filter(ge=>ge.classId===S))}else{const Ae=Z;v==="class"&&(ye=A.filter(ae=>ae.classId===P&&ae.period===Ae&&ae.day===w&&ae.shift===h)),v==="teacher"&&(ye=A.filter(ae=>ae.teacherId===P&&ae.period===Ae&&ae.day===w&&ae.shift===h)),v==="subject"&&(ye=A.filter(ae=>ae.subjectId===P&&ae.period===Ae&&ae.day===w&&ae.shift===h))}return I&&(ye=ye.filter(Ae=>{if(!Ae.roomId)return!1;const ae=s.find(At=>At.id===Ae.roomId);return(ae?ae.name:Ae.roomId).toLowerCase().includes(I.toLowerCase())})),b&&(ye=ye.filter(Ae=>{var ae;return(ae=Ae.direction)==null?void 0:ae.toLowerCase().includes(b.toLowerCase())})),ye},nn=P=>{const Z=[],ye=A.filter(ge=>ge.id!==P.id&&ge.day===P.day&&ge.period===P.period&&ge.shift===P.shift);return ye.find(ge=>ge.teacherId===P.teacherId)&&Z.push("teacher"),ye.find(ge=>!(ge.classId!==P.classId||ge.direction&&P.direction&&ge.direction!==P.direction))&&Z.push("class"),P.roomId&&ye.find(At=>At.roomId===P.roomId)&&Z.push("room"),Z},rt=(P,Z,ye)=>{const Ae=[],ae=r.find(Je=>Je.id===P),ge=e.find(Je=>Je.id===Z),At=s.find(Je=>Je.id===ye);return At&&(ae&&At.capacity<ae.studentsCount&&Ae.push(`  !   ${ae.studentsCount} .,     ${At.capacity}.`),ge&&ge.requiredRoomType&&ge.requiredRoomType!==""&&At.type!==ge.requiredRoomType&&Ae.push(`   !   "${ge.requiredRoomType}",   "${At.type}".`)),Ae},dn=P=>{const Z=rt(P.classId,P.subjectId,P.roomId);z(Z)},Nn=P=>{t||(B(P),dn(P),_(!0))},rn=(P,Z,ye=w)=>{if(t)return;const Ae={period:Z,day:ye,shift:h,id:Math.random().toString(36).substr(2,9)};v==="class"&&(Ae.classId=P),v==="teacher"&&(Ae.teacherId=P),v==="subject"&&(Ae.subjectId=P),v==="week"&&(Ae.period=parseInt(P),Ae.day=ye,S&&r.find(ae=>ae.id===S)&&(Ae.classId=S)),B(Ae),z([]),_(!0)},O=async()=>{if(!y.subjectId||!y.teacherId||!y.classId)return;let P=[...A];const Z=P.findIndex(ye=>ye.id===y.id);Z>=0?P[Z]=y:P.push(y),await i({schedule:P}),_(!1)},J=async P=>{const Z=A.filter(ye=>ye.id!==(P||y.id));await i({schedule:Z}),_(!1)},re=(P,Z,ye)=>{t||(P.preventDefault(),P.stopPropagation(),Ee({visible:!0,x:P.clientX,y:P.clientY,item:Z,cell:ye}))},me=(P,Z)=>{if(t)return;L(Z),P.dataTransfer.effectAllowed="move";const ye=P.target;setTimeout(()=>ye.classList.add("dragging"),0)},we=P=>{P.target.classList.remove("dragging"),L(null),$(null)},he=(P,Z)=>{P.preventDefault(),!t&&$(`${Z.rowId}-${Z.colKey}`)},ie=async(P,Z)=>{if(P.preventDefault(),!F||t)return;const ye={...F};v==="week"?(ye.period=parseInt(Z.rowId),ye.day=Z.colKey):(ye.period=Z.colKey,ye.day=w,v==="class"&&(ye.classId=Z.rowId),v==="teacher"&&(ye.teacherId=Z.rowId),v==="subject"&&(ye.subjectId=Z.rowId));let Ae=A.map(ae=>ae.id===ye.id?ye:ae);await i({schedule:Ae}),L(null),$(null)},Te=[];T.item?Te.push({label:"",icon:"Copy",onClick:()=>Oe(T.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>J(T.item.id)}):T.cell&&($e&&Te.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...$e,id:Math.random().toString(36).substr(2,9),day:w,shift:h,period:T.cell.colKey};v==="week"&&(P.day=T.cell.colKey,P.period=parseInt(T.cell.rowId)),v==="class"?P.classId=T.cell.rowId:v==="teacher"?P.teacherId=T.cell.rowId:v==="subject"&&(P.subjectId=T.cell.rowId);let Z=[...A,P];await i({schedule:Z}),Oe(null)}}),Te.push({label:" ",icon:"Plus",onClick:()=>rn(T.cell.rowId,T.cell.colKey,v==="week"?T.cell.colKey:w)}));const Ce=y.subjectId?n.filter(P=>P.subjectIds.includes(y.subjectId)):[],xe=y.subjectId?n.filter(P=>!P.subjectIds.includes(y.subjectId)):n,Me=Q.useMemo(()=>{var P,Z,ye,Ae;if(S){if(v==="teacher")return(P=n.find(ae=>ae.id===S))==null?void 0:P.name;if(v==="class")return(Z=r.find(ae=>ae.id===S))==null?void 0:Z.name;if(v==="subject")return(ye=e.find(ae=>ae.id===S))==null?void 0:ye.name;if(v==="week")return(Ae=r.find(ae=>ae.id===S))==null?void 0:Ae.name}return`  ${w}`},[S,v,n,r,e,w]),st=!!S,Ye=Q.useMemo(()=>st?Un:ke,[st,ke]),Le=Q.useMemo(()=>st?As[h].map(P=>({id:P.toString(),name:`${P} `})):tt(),[st,h,tt]),qr=(P,Z)=>{if(st){const ye=parseInt(P),Ae=Z;let ae=A.filter(ge=>ge.shift===h&&ge.period===ye&&ge.day===Ae);return v==="class"||v==="week"?ae=ae.filter(ge=>ge.classId===S):v==="teacher"?ae=ae.filter(ge=>ge.teacherId===S):v==="subject"&&(ae=ae.filter(ge=>ge.subjectId===S)),ae}else return qe(P,Z)},Qr=tt(),Sr=v==="week"?Un:ke,Rr=(P,Z,ye)=>{ze({isOpen:!0,type:P,day:Z||"",classId:ye||""})},Dt=async()=>{let P=[...A];Ne.type==="clearAll"?P=[]:Ne.type==="clearDay"&&Ne.day?P=P.filter(Z=>Z.day!==Ne.day):Ne.type==="clearClass"&&Ne.classId&&(P=P.filter(Z=>Z.classId!==Ne.classId)),await i({schedule:P}),ze({isOpen:!1,type:"",day:"",classId:""}),te(!1)},Cn=(P,Z,ye)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(Ae=>{const ae=e.find(sn=>sn.id===Ae.subjectId),ge=n.find(sn=>sn.id===Ae.teacherId),At=r.find(sn=>sn.id===Ae.classId),Je=nn(Ae),qt=s.find(sn=>sn.id===Ae.roomId),Nr=qt?qt.name:Ae.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:sn=>me(sn,Ae),onDragEnd:t?void 0:we,onClick:t?void 0:()=>Nn(Ae),onContextMenu:t?void 0:sn=>re(sn,Ae,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Je.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Je.length===0&&(ae!=null&&ae.color)?{backgroundColor:`${ae.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?At==null?void 0:At.name:ae==null?void 0:ae.name}),Ae.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Ae.direction})]}),v==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:ae==null?void 0:ae.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:ge==null?void 0:ge.name,children:[l.jsx(W,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:v==="teacher"?At==null?void 0:At.name:ge==null?void 0:ge.name})]}),Nr&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:qt?`: ${qt.capacity}, : ${qt.type}`:"",children:Nr})]}),Je.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${Je.join(", ")}`,children:"!"})]},Ae.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>rn(ye,Z,v==="week"?Z:w),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(W,{name:"Plus",size:16})})]}),Pn=()=>{if(!S)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=A.filter(Z=>Z.day===w&&Z.shift===h&&(v==="class"&&Z.classId===S||v==="teacher"&&Z.teacherId===S||v==="subject"&&Z.subjectId===S)).sort((Z,ye)=>Z.period-ye.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",w,"  ",h,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(Z=>{const ye=e.find(qt=>qt.id===Z.subjectId),Ae=n.find(qt=>qt.id===Z.teacherId),ae=r.find(qt=>qt.id===Z.classId),ge=s.find(qt=>qt.id===Z.roomId),At=ge?ge.name:Z.roomId,Je=nn(Z);return l.jsxs("div",{onClick:t?void 0:()=>Nn(Z),className:`rounded-xl p-4 shadow-sm border ${Je.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[Z.period," "]}),Je.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${Je.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ye==null?void 0:ye.name," ",Z.direction&&`(${Z.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ae==null?void 0:ae.name,"  ",Ae==null?void 0:Ae.name]}),At&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",At]})]},Z.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[T.visible&&l.jsx(QK,{x:T.x,y:T.y,onClose:()=>Ee({...T,visible:!1}),actions:Te}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ce.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ce.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Un.map(P=>l.jsx("button",{onClick:()=>p(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${w===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:c,disabled:!o,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(W,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:d,disabled:!a,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(W,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{R("class"),N("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(W,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{R("teacher"),N("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(W,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{R("subject"),N("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(W,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;R("week"),N(((P=r[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(W,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(W,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:S,onChange:P=>N(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&r.filter(P=>P.shift===h).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="teacher"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="subject"&&e.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:I,onChange:P=>x(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:P=>k(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(W,{name:"List",size:16})," . ."]}),(S||v==="week")&&l.jsx("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(W,{name:"Printer",size:16})})]})]}),q&&!t&&S&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>fe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${se?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(W,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>fe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${se?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(W,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:q&&se&&!t&&S?Pn():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),Sr.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Qr.length>0?Qr.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),Sr.map(Z=>{const ye=qe(P.id,Z),Ae=`${P.id}-${Z}`;return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${H===Ae?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:ae=>re(ae,null,{rowId:P.id,colKey:Z}),onDragOver:t?void 0:ae=>he(ae,{rowId:P.id,colKey:Z}),onDrop:t?void 0:ae=>ie(ae,{rowId:P.id,colKey:Z}),children:Cn(ye,Z,P.id)},Z)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Gr,{isOpen:C,onClose:()=>_(!1),title:y.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",y.day]}),l.jsxs("span",{children:[": ",y.period]}),l.jsxs("span",{children:[": ",y.shift===ce.First?"1 ":"2 "]})]}),V.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:V.map((P,Z)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(W,{name:"AlertTriangle",size:14}),P]},Z))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(jp,{options:r.filter(P=>P.shift===h).map(P=>({value:P.id,label:P.name})),value:y.classId,onChange:P=>{B({...y,classId:P}),dn({...y,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(jp,{options:e.map(P=>({value:P.id,label:P.name})),value:y.subjectId,onChange:P=>{B({...y,subjectId:P}),dn({...y,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(jp,{options:[{value:"recommend",label:"",options:Ce.map(P=>({value:P.id,label:P.name}))},{value:"others",label:"",options:xe.map(P=>({value:P.id,label:P.name}))}],value:y.teacherId,onChange:P=>B({...y,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:y.direction||"",onChange:P=>B({...y,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:y.roomId||"",onChange:P=>{B({...y,roomId:P.target.value}),dn({...y,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),s.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[y.id&&l.jsx("button",{onClick:()=>J(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:O,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(Gr,{isOpen:Ue,onClose:()=>te(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>Rr("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:Qe,onChange:P=>Se(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Un.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>Rr("clearDay",Qe),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Qe]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:De,onChange:P=>be(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{De&&Rr("clearClass",void 0,De)},disabled:!De,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Gr,{isOpen:Ne.isOpen,onClose:()=>ze({...Ne,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>ze({...Ne,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Dt,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),U&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(W,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:Me}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:st||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),Ye.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:st||v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:Le.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),Ye.map(Z=>{const ye=qr(P.id,Z);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ye.map(Ae=>{const ae=e.find(ys=>ys.id===Ae.subjectId),ge=n.find(ys=>ys.id===Ae.teacherId),At=r.find(ys=>ys.id===Ae.classId),Je=s.find(ys=>ys.id===Ae.roomId),qt=Je?Je.name:Ae.roomId,Nr=v==="teacher",Pg=v==="subject"||v==="week"||st&&Nr?At==null?void 0:At.name:ae==null?void 0:ae.name,eA=Nr?At==null?void 0:At.name:ge==null?void 0:ge.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Pg,Ae.direction&&` (${Ae.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:eA}),qt&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:qt})]})]},Ae.id)})},Z)})]},P.id))})]})]})})]})]})},jK=()=>{var V,z;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,saveStaticData:A}=Zs(),[i,o]=Q.useState("teachers"),[a,c]=Q.useState(!1),[d,h]=Q.useState(null),[f,w]=Q.useState({}),[p,C]=Q.useState({}),[_,y]=Q.useState({}),[B,v]=Q.useState({}),[R,S]=Q.useState("default"),[N,I]=Q.useState(null),x=F=>{h(F||null),i==="teachers"?w(F?e.find(L=>L.id===F):{subjectIds:[],unavailableDates:[],shifts:[ce.First,ce.Second],telegramChatId:""}):i==="subjects"?C(F?t.find(L=>L.id===F):{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?y(F?n.find(L=>L.id===F):{shift:ce.First,studentsCount:25}):i==="rooms"&&v(F?r.find(L=>L.id===F):{capacity:30,type:""}),c(!0)},b=async()=>{const F=()=>Math.random().toString(36).substr(2,9);let L=[];if(i==="teachers"){if(!f.name)return;L=[...e],d?L=L.map(H=>H.id===d?{...H,...f}:H):L.push({...f,id:F(),unavailableDates:[]}),await A({teachers:L})}else if(i==="subjects"){if(!p.name)return;L=[...t],d?L=L.map(H=>H.id===d?{...H,...p}:H):L.push({...p,id:F()}),await A({subjects:L})}else if(i==="classes"){if(!_.name)return;L=[...n],d?L=L.map(H=>H.id===d?{...H,..._}:H):L.push({..._,id:F()}),await A({classes:L})}else if(i==="rooms"){if(!B.name)return;L=[...r],d?L=L.map(H=>H.id===d?{...H,...B}:H):L.push({...B,id:F()}),await A({rooms:L})}c(!1)},k=async F=>{window.confirm(" ?")&&(i==="teachers"&&await A({teachers:e.filter(L=>L.id!==F)}),i==="subjects"&&await A({subjects:t.filter(L=>L.id!==F)}),i==="classes"&&await A({classes:n.filter(L=>L.id!==F)}),i==="rooms"&&await A({rooms:r.filter(L=>L.id!==F)}))},U=(F,L)=>{I(L),F.dataTransfer.effectAllowed="move"},D=F=>{F.preventDefault()},T=async(F,L)=>{if(N===null||N===L)return;let H=[];i==="teachers"?H=[...e]:i==="subjects"?H=[...t]:i==="classes"?H=[...n]:H=[...r];const $=H.splice(N,1)[0];H.splice(L,0,$),i==="teachers"?await A({teachers:H}):i==="subjects"?await A({subjects:H}):i==="classes"?await A({classes:H}):await A({rooms:H}),I(null)},Ee=(F,L)=>{const H=R;let $=s.find(q=>q.shift===F&&q.period===L&&q.day===H);if(!$&&H!=="default"){const q=s.find(se=>se.shift===F&&se.period===L&&se.day==="default");return q?{...q,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return $||{start:"",end:""}},$e=async(F,L,H,$)=>{let q=[...s];const se=R,fe=q.findIndex(Ue=>Ue.shift===F&&Ue.period===L&&Ue.day===se);fe>=0?q[fe]={...q[fe],[H]:$}:q.push({shift:F,period:L,[H]:$,start:"00:00",end:"00:00",day:se}),await A({bellSchedule:q})},Oe=F=>{const L=f.shifts||[];L.includes(F)?w({...f,shifts:L.filter(H=>H!==F)}):w({...f,shifts:[...L,F]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(F=>l.jsxs("button",{onClick:()=>o(F.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===F.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:F.icon,size:18})," ",F.label]},F.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(W,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(yd,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((F,L)=>{var H,$;return l.jsxs("div",{draggable:!0,onDragStart:q=>U(q,L),onDragOver:D,onDrop:q=>T(q,L),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(W,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:F.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(W,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(W,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:F.birthDate?`: ${new Date(F.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[((H=F.shifts)==null?void 0:H.includes(ce.First))&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),(($=F.shifts)==null?void 0:$.includes(ce.Second))&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:F.subjectIds.map(q=>{const se=t.find(fe=>fe.id===q);return se?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:se.color,color:"#334155"},children:se.name},q):null})})]},F.id)})}),i==="subjects"&&l.jsx(yd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:F.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(W,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.difficulty,"  ",F.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(W,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(W,{name:"Trash2",size:16})})]})]},F.id))}),i==="classes"&&l.jsx(yd,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(W,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[F.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${F.shift===ce.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[F.shift===ce.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(W,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(W,{name:"Trash2",size:14})})]})]},F.id))}),i==="rooms"&&l.jsx(yd,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((F,L)=>l.jsxs("div",{draggable:!0,onDragStart:H=>U(H,L),onDragOver:D,onDrop:H=>T(H,L),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(W,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(W,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.capacity,"  ",F.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(W,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>k(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(W,{name:"Trash2",size:16})})]})]},F.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(F=>l.jsx("button",{onClick:()=>S(F),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${R===F?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:F==="default"?"":F===""?"":""},F))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ce.First,ce.Second].map(F=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${F===ce.First?"bg-indigo-600":"bg-purple-600"}`,children:F}),l.jsx("div",{className:"p-6 space-y-3",children:As[F].map(L=>{const H=Ee(F,L);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${H.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:L}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.start,onChange:$=>$e(F,L,"start",$.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:H.end,onChange:$=>$e(F,L,"end",$.target.value)})]})]},L)})})]},F))})]})]}),l.jsx(Gr,{isOpen:a,onClose:()=>c(!1),title:"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:F=>w({...f,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:F=>w({...f,birthDate:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:F=>w({...f,telegramChatId:F.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(V=f.shifts)==null?void 0:V.includes(ce.First),onChange:()=>Oe(ce.First)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(z=f.shifts)==null?void 0:z.includes(ce.Second),onChange:()=>Oe(ce.Second)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(F=>{var L;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(L=f.subjectIds)==null?void 0:L.includes(F.id),onChange:H=>{const $=f.subjectIds||[];w({...f,subjectIds:H.target.checked?[...$,F.id]:$.filter(q=>q!==F.id)})}}),l.jsx("span",{className:"text-sm dark:text-slate-300",children:F.name})]},F.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:p.name||"",onChange:F=>C({...p,name:F.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:p.color||"#ffffff",onChange:F=>C({...p,color:F.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.difficulty||5,onChange:F=>C({...p,difficulty:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:p.requiredRoomType,onChange:F=>C({...p,requiredRoomType:F.target.value}),children:Zx.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:_.name||"",onChange:F=>y({..._,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:_.studentsCount||25,onChange:F=>y({..._,studentsCount:parseInt(F.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>y({..._,shift:ce.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ce.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>y({..._,shift:ce.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ce.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:B.name||"",onChange:F=>v({...B,name:F.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.capacity||30,onChange:F=>v({...B,capacity:parseInt(F.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.type,onChange:F=>v({...B,type:F.target.value}),children:Zx.map(F=>l.jsx("option",{value:F,children:F},F))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},VK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,saveStaticData:A}=Zs(),{schedule:i,substitutions:o,saveScheduleData:a}=el(),c=si(),[d,h]=Q.useState(new Date().toISOString().split("T")[0]),[f,w]=Q.useState(!1),[p,C]=Q.useState(null),[_,y]=Q.useState(!1),[B,v]=Q.useState(!1),[R,S]=Q.useState(null),[N,I]=Q.useState(""),[x,b]=Q.useState(!1),[k,U]=Q.useState(""),[D,T]=Q.useState(""),[Ee,$e]=Q.useState("all"),[Oe,V]=Q.useState(""),[z,F]=Q.useState(""),[L,H]=Q.useState(""),[$,q]=Q.useState("");Q.useEffect(()=>{var O;(O=c.state)!=null&&O.subParams&&(C(c.state.subParams),H(""),q(""),w(!0),window.history.replaceState({},document.title))},[c.state]);const se=Q.useMemo(()=>{const O=new Date(d).getDay();return O===0||O===6?null:Un[O-1]},[d]),fe=Q.useMemo(()=>e.filter(O=>{const J=O.name.toLowerCase().includes(D.toLowerCase()),re=Ee==="all"?!0:O.shifts.includes(Ee);return J&&re}),[e,D,Ee]),Ue=Q.useMemo(()=>e.filter(O=>O.unavailableDates.includes(d)),[e,d]),te=Q.useMemo(()=>{if(!se)return[];const O=Ue.map(ie=>ie.id),J=i.filter(ie=>ie.day===se&&O.includes(ie.teacherId)),me=o.filter(ie=>ie.date===d).map(ie=>ie.scheduleItemId),we=i.filter(ie=>me.includes(ie.id)),he=[...J];return we.forEach(ie=>{he.find(Te=>Te.id===ie.id)||he.push(ie)}),he.sort((ie,Te)=>ie.period-Te.period)},[i,se,Ue,o,d]),Ne=O=>{var re;const J=e.find(me=>me.id===O);S(O),I(((re=J==null?void 0:J.absenceReasons)==null?void 0:re[d])||""),y(!0)},ze=Q.useCallback(async()=>{let O=[...e];const J=O.findIndex(me=>me.id===R);if(J===-1)return;const re={...O[J]};re.unavailableDates.includes(d)||(re.unavailableDates=[...re.unavailableDates,d]),re.absenceReasons||(re.absenceReasons={}),re.absenceReasons[d]=N,O[J]=re,await A({teachers:O}),y(!1)},[e,R,d,N,A]),Qe=Q.useCallback(async O=>{let J=[...e];const re=J.findIndex(we=>we.id===O);if(re===-1)return;const me={...J[re]};me.unavailableDates=me.unavailableDates.filter(we=>we!==d),me.absenceReasons&&delete me.absenceReasons[d],J[re]=me,await A({teachers:J})},[e,d,A]),Se=Q.useCallback(async(O,J=!1)=>{if(!p){alert(":   .    . ,   ."),console.error("assignSubstitution: currentSubParams is null, returning.");return}const re=[...o],me=i.find(ie=>ie.id===p.scheduleItemId);if(!me){alert(":     . ,   ."),console.error("assignSubstitution: Schedule item not found for ID:",p.scheduleItemId);return}const we=re.findIndex(ie=>ie.scheduleItemId===p.scheduleItemId&&ie.date===d),he={id:we>=0?re[we].id:Math.random().toString(36).substr(2,9),date:d,scheduleItemId:p.scheduleItemId,originalTeacherId:me.teacherId,replacementTeacherId:O,replacementRoomId:L||void 0,isMerger:J,lessonAbsenceReason:O!=="conducted"&&O!=="cancelled"&&$?$:void 0};we>=0?re[we]=he:re.push(he),await a({substitutions:re}),w(!1),V(""),H(""),q(""),C(null)},[p,d,L,i,o,e,$,a]),De=Q.useCallback(async O=>{const J=o.filter(re=>!(re.scheduleItemId===O&&re.date===d));await a({substitutions:J})},[o,d,a]),be=Q.useCallback(()=>{let O=`*  ${new Date(d).toLocaleDateString("ru-RU")}*
`;const J=o.some(me=>me.date===d&&me.replacementTeacherId!=="conducted"),re=(me,we)=>{const ie=te.filter(Te=>Te.shift===we).filter(Te=>{const Ce=o.find(xe=>xe.scheduleItemId===Te.id&&xe.date===d);return Ce&&Ce.replacementTeacherId!=="conducted"});ie.length>0&&(O+=`
 *${me.toUpperCase()}*
`,ie.forEach(Te=>{var P,Z,ye;const Ce=o.find(Ae=>Ae.scheduleItemId===Te.id&&Ae.date===d),xe=n.find(Ae=>Ae.id===Te.classId),Me=t.find(Ae=>Ae.id===Te.subjectId),st=Ce?e.find(Ae=>Ae.id===Ce.replacementTeacherId):null,Ye=e.find(Ae=>Ae.id===Te.teacherId),Le=((P=r.find(Ae=>Ae.id===Te.roomId))==null?void 0:P.name)||Te.roomId||"?",qr=(Z=Ye==null?void 0:Ye.absenceReasons)==null?void 0:Z[d],Qr=Ce==null?void 0:Ce.lessonAbsenceReason,Dt=(Qr===" "?Qr:null)||(qr===" "?qr:null),Cn=(Ye==null?void 0:Ye.name)+(Dt?` (${Dt})`:""),Pn=Ce!=null&&Ce.replacementRoomId?((ye=r.find(Ae=>Ae.id===Ce.replacementRoomId))==null?void 0:ye.name)||Ce.replacementRoomId:null;if(Ce)if(Ce.replacementTeacherId==="cancelled")O+=` ${xe==null?void 0:xe.name} (${Te.period} ): ${Me==null?void 0:Me.name} (${Cn}) ->  
`;else if(Ce.replacementTeacherId===Ce.originalTeacherId&&Pn)O+=` ${xe==null?void 0:xe.name} (${Te.period} ): ${Me==null?void 0:Me.name} (${Ye==null?void 0:Ye.name}) ->  ${Le}  ${Pn}
`;else{let Ae=` ${xe==null?void 0:xe.name} (${Te.period} ): ${Me==null?void 0:Me.name} -> ${st==null?void 0:st.name} ${Ce.isMerger?"() ":""}( ${Cn})`;Pn&&(Ae+=`  . ${Pn}`),O+=Ae+`
`}}))};J?(re(ce.First,ce.First),re(ce.Second,ce.Second)):O+=`
 .`,navigator.clipboard.writeText(O),alert("     !")},[d,o,te,n,t,e,r]),ke=Q.useCallback(()=>{let O=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(he=>he.date===d).forEach(he=>{var Rr;const ie=i.find(Dt=>Dt.id===he.scheduleItemId);if(!ie)return;let Te="Unknown";if(he.replacementTeacherId==="cancelled")Te=" ";else if(he.replacementTeacherId==="conducted")Te=" ";else{const Dt=e.find(Cn=>Cn.id===he.replacementTeacherId);Dt&&(Te=Dt.name)}const Ce=t.find(Dt=>Dt.id===ie.subjectId),xe=n.find(Dt=>Dt.id===ie.classId),Me=he.date.replace(/-/g,""),st=e.find(Dt=>Dt.id===he.originalTeacherId),Ye=(Rr=st==null?void 0:st.absenceReasons)==null?void 0:Rr[d],Le=he.lessonAbsenceReason,Sr=(Le===" "?Le:null)||(Ye===" "?Ye:null);O+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Me}
SUMMARY:: ${xe==null?void 0:xe.name} - ${Ce==null?void 0:Ce.name}
DESCRIPTION:: ${Te}${he.isMerger?" ()":""}${Sr?` (: ${Sr})`:""}
END:VEVENT
`}),O+="END:VCALENDAR";const re=new Blob([O],{type:"text/calendar"}),me=URL.createObjectURL(re),we=document.createElement("a");we.href=me,we.download="substitutions.ics",document.body.appendChild(we),we.click(),document.body.removeChild(we)},[d,o,i,e,t,n]),tt=Q.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let O=`*  ${new Date(d).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,J=!1;const re=new Set,me=[ce.First,ce.Second];for(const he of me){const Te=te.filter(Ce=>Ce.shift===he).filter(Ce=>o.some(xe=>xe.scheduleItemId===Ce.id&&xe.date===d&&xe.replacementTeacherId!=="conducted"));Te.length>0&&(J=!0,O+=` *${he.toUpperCase()}*
`,Te.forEach(Ce=>{var ye,Ae,ae;const xe=o.find(ge=>ge.scheduleItemId===Ce.id&&ge.date===d);if(!xe)return;const Me=n.find(ge=>ge.id===Ce.classId),st=t.find(ge=>ge.id===Ce.subjectId),Ye=e.find(ge=>ge.id===xe.originalTeacherId),Le=e.find(ge=>ge.id===xe.replacementTeacherId),qr=(ye=Ye==null?void 0:Ye.absenceReasons)==null?void 0:ye[d],Qr=xe.lessonAbsenceReason,Dt=(Qr===" "?Qr:null)||(qr===" "?qr:null),Cn=(Ye==null?void 0:Ye.name)+(Dt?` (${Dt})`:""),Pn=((Ae=r.find(ge=>ge.id===Ce.roomId))==null?void 0:Ae.name)||Ce.roomId||"",P=xe.replacementRoomId?((ae=r.find(ge=>ge.id===xe.replacementRoomId))==null?void 0:ae.name)||xe.replacementRoomId:Pn;let Z=`${Ce.period}  (${Me==null?void 0:Me.name} ${st==null?void 0:st.name}${Ce.direction?` ${Ce.direction}`:""}): `;xe.replacementTeacherId==="cancelled"?Z+=`* * ( ${Cn})`:xe.replacementTeacherId===xe.originalTeacherId?Z+=`: ${Cn}.  : ${Pn}  ${P}`:(Z+=`*${Le==null?void 0:Le.name}* ${xe.isMerger?"() ":""}( *${Cn}*)`,Pn!==P?Z+=`. : ${Pn}  ${P}`:P!==""&&(Z+=`. : ${P}`)),O+=`${Z}
`,Ye!=null&&Ye.telegramChatId&&re.add(Ye.telegramChatId),Le!=null&&Le.telegramChatId&&re.add(Le.telegramChatId)}),O+=`
`)}if(J||(O+=` .
`),Ue.forEach(he=>{var xe;const ie=o.some(Me=>Me.date===d&&Me.originalTeacherId===he.id&&Me.replacementTeacherId!=="cancelled"&&Me.replacementTeacherId!=="conducted"),Te=(xe=he.absenceReasons)==null?void 0:xe[d],Ce=Te===" "?Te:"";he.telegramChatId&&!ie&&he.unavailableDates.includes(d)&&(re.add(he.telegramChatId),J?O+=`_:  ${he.name} ${Ce},        /._
`:O+=`_:  ${he.name} ${Ce},      ._
`)}),re.size===0){alert("    Telegram Chat ID   .");return}const we=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const he=Array.from(re).map(ie=>fetch(we,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ie,text:O,parse_mode:"Markdown"})}));await Promise.all(he),alert(`   ${re.size} !`)}catch(he){console.error("    Telegram:",he),alert("     Telegram.     .")}},[d,te,o,n,t,e,r,Ue,s==null?void 0:s.telegramToken]),qe=Q.useMemo(()=>p?new Set(o.filter(O=>O.date===d&&O.replacementTeacherId!=="conducted"&&O.replacementTeacherId!=="cancelled").map(O=>{const J=i.find(re=>re.id===O.scheduleItemId);return J&&J.period===p.period&&J.shift===p.shift?O.replacementTeacherId:null}).filter(O=>!!O)):new Set,[o,i,d,p]),nn=Q.useMemo(()=>{if(!p||!se)return[];const O=d.substring(0,7);return e.filter(J=>J.name.toLowerCase().includes(Oe.toLowerCase())).map(J=>{const re=J.unavailableDates.includes(d),me=i.some(xe=>xe.teacherId===J.id&&xe.day===se&&xe.period===p.period&&xe.shift===p.shift),we=qe.has(J.id),he=me||we,ie=J.subjectIds.includes(p.subjectId),Te=o.filter(xe=>xe.replacementTeacherId===J.id&&xe.date.startsWith(O)).length;let Ce=0;return re&&(Ce-=1e3),he&&(Ce-=100),ie&&(Ce+=50),{teacher:J,isAbsent:re,isBusy:he,isSpecialist:ie,score:Ce,subsCount:Te}}).sort((J,re)=>re.score-J.score)},[e,p,d,Oe,se,i,o,qe]),rt=Q.useMemo(()=>{var he;if(!p)return null;const O=i.find(ie=>ie.id===p.scheduleItemId);if(!O)return null;const J=n.find(ie=>ie.id===O.classId),re=t.find(ie=>ie.id===O.subjectId),me=e.find(ie=>ie.id===O.teacherId),we=((he=me==null?void 0:me.unavailableDates)==null?void 0:he.includes(d))||!1;return{className:J==null?void 0:J.name,subjectName:re==null?void 0:re.name,teacherName:me==null?void 0:me.name,teacherId:me==null?void 0:me.id,period:O.period,roomId:O.roomId,isTeacherAbsent:we}},[p,i,n,t,e,d]),dn=Q.useMemo(()=>{if(!se||z.length<2)return[];const O=z.toLowerCase(),J=e.filter(we=>we.name.toLowerCase().includes(O)),re=n.filter(we=>we.name.toLowerCase().includes(O)),me=[];return J.forEach(we=>{i.filter(ie=>ie.teacherId===we.id&&ie.day===se).forEach(ie=>{const Te=n.find(xe=>xe.id===ie.classId),Ce=t.find(xe=>xe.id===ie.subjectId);me.push({...ie,entityName:we.name,subInfo:Te==null?void 0:Te.name,subjectName:Ce==null?void 0:Ce.name})})}),re.forEach(we=>{i.filter(ie=>ie.classId===we.id&&ie.day===se).forEach(ie=>{if(me.find(xe=>xe.id===ie.id))return;const Te=e.find(xe=>xe.id===ie.teacherId),Ce=t.find(xe=>xe.id===ie.subjectId);me.push({...ie,entityName:we.name,subInfo:Te==null?void 0:Te.name,subjectName:Ce==null?void 0:Ce.name})})}),me.sort((we,he)=>we.period-he.period)},[z,se,e,n,i,t]),Nn=Q.useCallback(async(O,J,re,me,we,he)=>{const Te=new Date(he).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Ce=J.shift===ce.First?"1 ":"2 ",xe=` *  *
${O.name}

 : ${Te}
 : ${Ce}
 : ${re==null?void 0:re.name}
1 : ${J.period}
 : ${me==null?void 0:me.name}
 : ${we||" "}`;if(s!=null&&s.telegramToken&&O.telegramChatId)try{const st=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:O.telegramChatId,text:xe,parse_mode:"Markdown"})})).json();st.ok?alert(`   Telegram  ${O.name}!`):st.description.includes("chat not found")?alert(` Telegram:   .

  ${O.name}       "" (/start).`):alert(` Telegram: ${st.description}`)}catch(Me){alert("   Telegram (/)."),console.error(Me)}else navigator.share?navigator.share({title:"",text:xe}).catch(()=>{}):(navigator.clipboard.writeText(xe),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),rn=(O,J)=>{let re=!1;if(J){if(!window.confirm("     .     ?"))return;re=!0}Se(O,re)};return l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:h-full",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 shrink-0",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(W,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:d,onChange:O=>h(O.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>b(!x),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${x?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(W,{name:"History",size:16})," ",x?" ":" "]})]}),x?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-1 md:overflow-hidden h-96 md:h-auto",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2 shrink-0",children:""}),l.jsx("input",{placeholder:"  /...",value:k,onChange:O=>U(O.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs shrink-0"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(O=>{var J;return O.date.includes(k)||((J=e.find(re=>re.id===O.replacementTeacherId))==null?void 0:J.name.toLowerCase().includes(k.toLowerCase()))}).map(O=>{const J=e.find(me=>me.id===O.replacementTeacherId),re=r.find(me=>me.id===O.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:O.date}),l.jsxs("div",{children:[(J==null?void 0:J.name)||(O.replacementTeacherId==="cancelled"?"":""),O.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),re&&l.jsxs("div",{className:"text-indigo-500",children:[". ",re.name]})]},O.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:flex-1 md:overflow-hidden h-96 md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2 shrink-0",children:[l.jsx(W,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2 shrink-0",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>$e("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ee==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>$e(ce.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ee===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>$e(ce.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ee===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(W,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:D,onChange:O=>T(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[fe.map(O=>{const J=O.unavailableDates.includes(d),re=O.absenceReasons?O.absenceReasons[d]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${J?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${J?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:O.name}),l.jsx("button",{onClick:()=>J?Qe(O.id):Ne(O.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${J?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:J?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:O.shifts.map(me=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:me===ce.First?"1":"2"},me))}),J&&l.jsxs("div",{className:"flex items-center gap-1",children:[re&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:re}),l.jsx("button",{onClick:()=>Ne(O.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(W,{name:"Edit2",size:14})})]})]})]},O.id)}),fe.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col md:overflow-hidden min-h-[500px]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",te.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(W,{name:"Calendar",size:16})," iCal"]}),te.length>0&&l.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(W,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:tt,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{F(""),v(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(W,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:te.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(W,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):te.map(O=>{var Ye;const J=o.find(Le=>Le.scheduleItemId===O.id&&Le.date===d),re=J&&J.replacementTeacherId!=="cancelled"&&J.replacementTeacherId!=="conducted"?e.find(Le=>Le.id===J.replacementTeacherId):null,me=e.find(Le=>Le.id===O.teacherId),we=t.find(Le=>Le.id===O.subjectId),he=n.find(Le=>Le.id===O.classId),ie=r.find(Le=>Le.id===O.roomId),Te=ie?ie.name:O.roomId,Ce=J==null?void 0:J.replacementRoomId,xe=Ce?((Ye=r.find(Le=>Le.id===Ce))==null?void 0:Ye.name)||Ce:null;let Me=null;if((J==null?void 0:J.replacementTeacherId)==="conducted")Me=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>De(O.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(W,{name:"X",size:16})})]});else if((J==null?void 0:J.replacementTeacherId)==="cancelled")Me=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>De(O.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(W,{name:"X",size:16})})]});else if(re||Ce){const Le=(J==null?void 0:J.replacementTeacherId)===(J==null?void 0:J.originalTeacherId)&&Ce;Me=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Le?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:Le?"  ":re==null?void 0:re.name}),J.isMerger&&l.jsx("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:""}),J.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",J.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>Nn(re||me,O,he,we,xe||Te,d),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(W,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>De(O.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(W,{name:"UserX",size:18})})]})]})}else Me=l.jsxs("button",{onClick:()=>{C({scheduleItemId:O.id,subjectId:O.subjectId,period:O.period,shift:O.shift,classId:O.classId,teacherId:O.teacherId,roomId:O.roomId,day:O.day}),w(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(W,{name:"ArrowRight",size:16})]});const st=!Ue.find(Le=>Le.id===O.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:O.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:he==null?void 0:he.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:O.shift===ce.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:we==null?void 0:we.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:st?"font-semibold":"line-through decoration-red-400 decoration-2",children:me==null?void 0:me.name}),Te&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Te," ",xe&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",xe]})]}),(J==null?void 0:J.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",J.lessonAbsenceReason,")"]})]})]})]}),Me]},O.id)})})]}),l.jsxs(Gr,{isOpen:f,onClose:()=>w(!1),title:" ",children:[rt&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[rt.className,"  ",rt.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:rt.subjectName}),l.jsx("span",{className:rt.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:rt.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:L,onChange:O=>H(O.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(O=>l.jsxs("option",{value:O.id,children:[O.name," (",O.capacity," )"]},O.id))]})]}),rt&&!rt.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:$,onChange:O=>q(O.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Se("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Se("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(rt==null?void 0:rt.teacherId)&&!rt.isTeacherAbsent&&l.jsx("button",{onClick:()=>Se(rt.teacherId),className:"w-full p-3 mb-4 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(W,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Oe,onChange:O=>V(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[nn.map(({teacher:O,isAbsent:J,isBusy:re,isSpecialist:me,subsCount:we})=>l.jsxs("button",{disabled:J,onClick:()=>rn(O.id,re),title:J?" ":re?" ":"",className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${J?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":re?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md cursor-pointer":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${me?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:me?l.jsx(W,{name:"Star",size:14,fill:"currentColor"}):O.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:O.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[me&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),re&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),J&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${we>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",we]})]})]})]}),!J&&!re&&l.jsx("div",{className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),re&&!J&&l.jsx("div",{className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]},O.id)),nn.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Gr,{isOpen:B,onClose:()=>v(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(W,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:z,onChange:O=>F(O.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[dn.map(O=>{var J;return l.jsxs("button",{onClick:()=>{v(!1),C({scheduleItemId:O.id,subjectId:O.subjectId,period:O.period,shift:O.shift,classId:O.classId,teacherId:O.teacherId,roomId:O.roomId,day:O.day}),w(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[O.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",O.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[O.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:O.subjectName}),O.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((J=r.find(re=>re.id===O.roomId))==null?void 0:J.name)||O.roomId]})]})]},O.id)}),z.length>1&&dn.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",d,")"]})]})]}),l.jsx(Gr,{isOpen:_,onClose:()=>y(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:N,onChange:O=>I(O.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:ze,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},HK=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:s}=Zs(),{schedule:A}=el(),[i,o]=Q.useState("teachers"),[a,c]=Q.useState(new Date().toISOString().split("T")[0]),[d,h]=Q.useState(ce.First),[f,w]=Q.useState(1),[p,C]=Q.useState(ce.First),[_,y]=Q.useState(1),[B,v]=Q.useState(""),[R,S]=Q.useState("");Q.useEffect(()=>{r&&(v(r.telegramToken||""),S(r.feedbackChatId||""))},[r]),Q.useEffect(()=>{w(d===ce.First?1:0)},[d]),Q.useEffect(()=>{y(p===ce.First?1:0)},[p]);const N=Q.useMemo(()=>{const U=new Date(a).getDay();return U===0||U===6?null:Un[U-1]},[a]),I=As[d],x=Q.useMemo(()=>N?e.filter(U=>U.shifts&&!U.shifts.includes(d)||U.unavailableDates.includes(a)?!1:!A.some(T=>T.teacherId===U.id&&T.day===N&&T.period>f&&T.shift===d)).sort((U,D)=>U.name.localeCompare(D.name)):[],[e,a,N,f,d,A]),b=Q.useMemo(()=>{if(!N)return[];const U=new Set;return A.forEach(T=>{T.day===N&&T.period===_&&T.shift===p&&T.roomId&&U.add(T.roomId)}),n.filter(T=>!U.has(T.id)).map(T=>T.name)},[A,n,N,_,p]),k=async()=>{await s({settings:{...r,telegramToken:B,feedbackChatId:R}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(W,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),i!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:a,onChange:U=>c(U.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),i==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>h(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>h(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${d===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:I.map(U=>l.jsx("button",{onClick:()=>w(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${f===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>C(ce.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${p===ce.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>C(ce.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${p===ce.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:As[p].map(U=>l.jsx("button",{onClick:()=>y(U),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${_===U?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:U},U))})]})]}),i==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:B,onChange:U=>v(U.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:R,onChange:U=>S(U.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:k,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Save",size:20}),"  "]})]})]}),i==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[x.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(W,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:U.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:U.subjectIds.slice(0,2).map(D=>{const T=t.find(Ee=>Ee.id===D);return T?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:T.name},D):null})})]})]},U.id)),x.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",f,"   ",d]})]}),i==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[b.map(U=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(W,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:U}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},U)),b.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(W,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K0=function(t,e){return K0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},K0(t,e)};function $r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var G0=function(){return G0=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(e[A]=n[A])}return e},G0.apply(this,arguments)};function Dn(t,e,n,r){function s(A){return A instanceof n?A:new n(function(i){i(A)})}return new(n||(n=Promise))(function(A,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function Fn(t,e){var n={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},r,s,A,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(A=n.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){n.label=c[1];break}if(c[0]===6&&n.label<A[1]){n.label=A[1],A=c;break}if(A&&n.label<A[2]){n.label=A[2],n.ops.push(c);break}A[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Bd(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,A;r<s;r++)(A||!(r in e))&&(A||(A=Array.prototype.slice.call(e,0,r)),A[r]=e[r]);return t.concat(A||e)}var Ks=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Eg=function(t,e){return Ks.fromClientRect(t,e.getBoundingClientRect())},KK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new Ks(0,0,r,s)},bg=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},$_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",GK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xd=0;xd<$_.length;xd++)GK[$_.charCodeAt(xd)]=xd;var q_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ml=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Cd=0;Cd<q_.length;Cd++)Ml[q_.charCodeAt(Cd)]=Cd;var zK=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=Ml[t.charCodeAt(r)],i=Ml[t.charCodeAt(r+1)],o=Ml[t.charCodeAt(r+2)],a=Ml[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},WK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},$K=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Oi=5,Hy=11,Hp=2,qK=Hy-Oi,wk=65536>>Oi,JK=1<<Oi,Kp=JK-1,XK=1024>>Oi,YK=wk+XK,ZK=YK,e3=32,t3=ZK+e3,n3=65536>>Hy,r3=1<<qK,s3=r3-1,J_=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},A3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},i3=function(t,e){var n=zK(t),r=Array.isArray(n)?$K(n):new Uint32Array(n),s=Array.isArray(n)?WK(n):new Uint16Array(n),A=24,i=J_(s,A/2,r[4]/2),o=r[5]===2?J_(s,(A+r[4])/2):A3(r,Math.ceil((A+r[4])/4));return new o3(r[0],r[1],r[2],r[3],i,o)},o3=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Oi],n=(n<<Hp)+(e&Kp),this.data[n];if(e<=65535)return n=this.index[wk+(e-55296>>Oi)],n=(n<<Hp)+(e&Kp),this.data[n];if(e<this.highStart)return n=t3-n3+(e>>Hy),n=this.index[n],n+=e>>Oi&s3,n=this.index[n],n=(n<<Hp)+(e&Kp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),X_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _d=0;_d<X_.length;_d++)a3[X_.charCodeAt(_d)]=_d;var l3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Y_=50,c3=1,vk=2,yk=3,u3=4,d3=5,Z_=7,Bk=8,eI=9,IA=10,z0=11,tI=12,W0=13,h3=14,jl=15,$0=16,Id=17,El=18,f3=19,nI=20,q0=21,bl=22,Gp=23,Eo=24,ar=25,Vl=26,Hl=27,bo=28,g3=29,Ii=30,p3=31,Ed=32,bd=33,J0=34,X0=35,Y0=36,Au=37,Z0=38,fh=39,gh=40,zp=41,xk=42,m3=43,w3=[9001,65288],Ck="!",He="",Td="",ew=i3(l3),Cs=[Ii,Y0],tw=[c3,vk,yk,d3],_k=[IA,Bk],rI=[Hl,Vl],v3=tw.concat(_k),sI=[Z0,fh,gh,J0,X0],y3=[jl,W0],B3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(A,i){var o=ew.get(A);if(o>Y_?(s.push(!0),o-=Y_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return r.push(i),n.push($0);if(o===u3||o===z0){if(i===0)return r.push(i),n.push(Ii);var a=n[i-1];return v3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(Ii))}if(r.push(i),o===p3)return n.push(e==="strict"?q0:Au);if(o===xk||o===g3)return n.push(Ii);if(o===m3)return A>=131072&&A<=196605||A>=196608&&A<=262141?n.push(Au):n.push(Ii);n.push(o)}),[r,n,s]},Wp=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=n;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==IA)break}if(s===IA)for(var A=n;A>0;){A--;var o=r[A];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==IA)break}if(o!==IA)break}return!1},AI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===IA)n--;else return r}return 0},x3=function(t,e,n,r,s){if(n[r]===0)return He;var A=r-1;if(Array.isArray(s)&&s[A]===!0)return He;var i=A-1,o=A+1,a=e[A],c=i>=0?e[i]:0,d=e[o];if(a===vk&&d===yk)return He;if(tw.indexOf(a)!==-1)return Ck;if(tw.indexOf(d)!==-1||_k.indexOf(d)!==-1)return He;if(AI(A,e)===Bk)return Td;if(ew.get(t[A])===z0||(a===Ed||a===bd)&&ew.get(t[o])===z0||a===Z_||d===Z_||a===eI||[IA,W0,jl].indexOf(a)===-1&&d===eI||[Id,El,f3,Eo,bo].indexOf(d)!==-1||AI(A,e)===bl||Wp(Gp,bl,A,e)||Wp([Id,El],q0,A,e)||Wp(tI,tI,A,e))return He;if(a===IA)return Td;if(a===Gp||d===Gp)return He;if(d===$0||a===$0)return Td;if([W0,jl,q0].indexOf(d)!==-1||a===h3||c===Y0&&y3.indexOf(a)!==-1||a===bo&&d===Y0||d===nI||Cs.indexOf(d)!==-1&&a===ar||Cs.indexOf(a)!==-1&&d===ar||a===Hl&&[Au,Ed,bd].indexOf(d)!==-1||[Au,Ed,bd].indexOf(a)!==-1&&d===Vl||Cs.indexOf(a)!==-1&&rI.indexOf(d)!==-1||rI.indexOf(a)!==-1&&Cs.indexOf(d)!==-1||[Hl,Vl].indexOf(a)!==-1&&(d===ar||[bl,jl].indexOf(d)!==-1&&e[o+1]===ar)||[bl,jl].indexOf(a)!==-1&&d===ar||a===ar&&[ar,bo,Eo].indexOf(d)!==-1)return He;if([ar,bo,Eo,Id,El].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===ar)return He;if([bo,Eo].indexOf(f)!==-1)h--;else break}if([Hl,Vl].indexOf(d)!==-1)for(var h=[Id,El].indexOf(a)!==-1?i:A;h>=0;){var f=e[h];if(f===ar)return He;if([bo,Eo].indexOf(f)!==-1)h--;else break}if(Z0===a&&[Z0,fh,J0,X0].indexOf(d)!==-1||[fh,J0].indexOf(a)!==-1&&[fh,gh].indexOf(d)!==-1||[gh,X0].indexOf(a)!==-1&&d===gh||sI.indexOf(a)!==-1&&[nI,Vl].indexOf(d)!==-1||sI.indexOf(d)!==-1&&a===Hl||Cs.indexOf(a)!==-1&&Cs.indexOf(d)!==-1||a===Eo&&Cs.indexOf(d)!==-1||Cs.concat(ar).indexOf(a)!==-1&&d===bl&&w3.indexOf(t[o])===-1||Cs.concat(ar).indexOf(d)!==-1&&a===El)return He;if(a===zp&&d===zp){for(var w=n[A],p=1;w>0&&(w--,e[w]===zp);)p++;if(p%2!==0)return He}return a===Ed&&d===bd?He:Td},C3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=B3(t,e.lineBreak),r=n[0],s=n[1],A=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ar,Ii,xk].indexOf(o)!==-1?Au:o}));var i=e.wordBreak==="keep-all"?A.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,s,i]},_3=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===Ck,this.start=r,this.end=s}return t.prototype.slice=function(){return Ot.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),I3=function(t,e){var n=bg(t),r=C3(n,e),s=r[0],A=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=He;c<o&&(d=x3(n,A,s,++c,i))===He;);if(d!==He||c===o){var h=new _3(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},E3=1,b3=2,Ru=4,iI=8,hf=10,oI=47,dc=92,T3=9,F3=32,Fd=34,Tl=61,U3=35,k3=36,Q3=37,Ud=39,kd=40,Fl=41,S3=95,Jn=45,R3=33,N3=60,P3=62,D3=64,L3=91,O3=93,M3=61,j3=123,Qd=63,V3=125,aI=124,H3=126,K3=128,lI=65533,$p=42,Si=43,G3=44,z3=58,W3=59,iu=46,$3=0,q3=8,J3=11,X3=14,Y3=31,Z3=127,Xr=-1,Ik=48,Ek=97,bk=101,e5=102,t5=117,n5=122,Tk=65,Fk=69,Uk=70,r5=85,s5=90,kn=function(t){return t>=Ik&&t<=57},A5=function(t){return t>=55296&&t<=57343},To=function(t){return kn(t)||t>=Tk&&t<=Uk||t>=Ek&&t<=e5},i5=function(t){return t>=Ek&&t<=n5},o5=function(t){return t>=Tk&&t<=s5},a5=function(t){return i5(t)||o5(t)},l5=function(t){return t>=K3},Sd=function(t){return t===hf||t===T3||t===F3},ff=function(t){return a5(t)||l5(t)||t===S3},cI=function(t){return ff(t)||kn(t)||t===Jn},c5=function(t){return t>=$3&&t<=q3||t===J3||t>=X3&&t<=Y3||t===Z3},fA=function(t,e){return t!==dc?!1:e!==hf},Rd=function(t,e,n){return t===Jn?ff(e)||fA(e,n):ff(t)?!0:!!(t===dc&&fA(t,e))},qp=function(t,e,n){return t===Si||t===Jn?kn(e)?!0:e===iu&&kn(n):kn(t===iu?e:t)},u5=function(t){var e=0,n=1;(t[e]===Si||t[e]===Jn)&&(t[e]===Jn&&(n=-1),e++);for(var r=[];kn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(Ot.apply(void 0,r),10):0;t[e]===iu&&e++;for(var A=[];kn(t[e]);)A.push(t[e++]);var i=A.length,o=i?parseInt(Ot.apply(void 0,A),10):0;(t[e]===Fk||t[e]===bk)&&e++;var a=1;(t[e]===Si||t[e]===Jn)&&(t[e]===Jn&&(a=-1),e++);for(var c=[];kn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Ot.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,a*d)},d5={type:2},h5={type:3},f5={type:4},g5={type:13},p5={type:8},m5={type:21},w5={type:9},v5={type:10},y5={type:11},B5={type:12},x5={type:14},Nd={type:23},C5={type:1},_5={type:25},I5={type:24},E5={type:26},b5={type:27},T5={type:28},F5={type:29},U5={type:31},nw={type:32},kk=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(bg(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==nw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Fd:return this.consumeStringToken(Fd);case U3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(cI(n)||fA(r,s)){var A=Rd(n,r,s)?b3:E3,i=this.consumeName();return{type:5,value:i,flags:A}}break;case k3:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),g5;break;case Ud:return this.consumeStringToken(Ud);case kd:return d5;case Fl:return h5;case $p:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),x5;break;case Si:if(qp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case G3:return f5;case Jn:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(qp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Rd(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===Jn&&c===P3)return this.consumeCodePoint(),this.consumeCodePoint(),I5;break;case iu:if(qp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case oI:if(this.peekCodePoint(0)===$p)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===$p&&(d=this.consumeCodePoint(),d===oI))return this.consumeToken();if(d===Xr)return this.consumeToken()}break;case z3:return E5;case W3:return b5;case N3:if(this.peekCodePoint(0)===R3&&this.peekCodePoint(1)===Jn&&this.peekCodePoint(2)===Jn)return this.consumeCodePoint(),this.consumeCodePoint(),_5;break;case D3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(Rd(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case L3:return T5;case dc:if(fA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case O3:return F5;case M3:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),p5;break;case j3:return y5;case V3:return B5;case t5:case r5:var p=this.peekCodePoint(0),C=this.peekCodePoint(1);return p===Si&&(To(C)||C===Qd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case aI:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),w5;if(this.peekCodePoint(0)===aI)return this.consumeCodePoint(),m5;break;case H3:if(this.peekCodePoint(0)===Tl)return this.consumeCodePoint(),v5;break;case Xr:return nw}return Sd(e)?(this.consumeWhiteSpace(),U5):kn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):ff(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ot(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();To(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Qd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Ot.apply(void 0,e.map(function(a){return a===Qd?Ik:a})),16),A=parseInt(Ot.apply(void 0,e.map(function(a){return a===Qd?Uk:a})),16);return{type:30,start:s,end:A}}var i=parseInt(Ot.apply(void 0,e),16);if(this.peekCodePoint(0)===Jn&&To(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];To(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var A=parseInt(Ot.apply(void 0,o),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===kd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===kd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Xr)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Ud||n===Fd){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Xr||this.peekCodePoint(0)===Fl)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Nd)}for(;;){var s=this.consumeCodePoint();if(s===Xr||s===Fl)return{type:22,value:Ot.apply(void 0,e)};if(Sd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Xr||this.peekCodePoint(0)===Fl?(this.consumeCodePoint(),{type:22,value:Ot.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Nd);if(s===Fd||s===Ud||s===kd||c5(s))return this.consumeBadUrlRemnants(),Nd;if(s===dc)if(fA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Nd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Sd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Fl||e===Xr)return;fA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=Ot.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===Xr||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===hf)return this._value.splice(0,r),C5;if(s===dc){var A=this._value[r+1];A!==Xr&&A!==void 0&&(A===hf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):fA(s,A)&&(n+=this.consumeStringSlice(r),n+=Ot(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Ru,r=this.peekCodePoint(0);for((r===Si||r===Jn)&&e.push(this.consumeCodePoint());kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===iu&&kn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=iI;kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((r===Fk||r===bk)&&((s===Si||s===Jn)&&kn(A)||kn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=iI;kn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[u5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Rd(s,A,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===Q3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(To(e)){for(var n=Ot(e);To(this.peekCodePoint(0))&&n.length<6;)n+=Ot(this.consumeCodePoint());Sd(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||A5(r)||r>1114111?lI:r}return e===Xr?lI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(cI(n))e+=Ot(n);else if(fA(n,this.peekCodePoint(0)))e+=Ot(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),Qk=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new kk;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Q5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Nu=function(t){return t.type===15},tl=function(t){return t.type===17},at=function(t){return t.type===20},k5=function(t){return t.type===0},rw=function(t,e){return at(t)&&t.value===e},Sk=function(t){return t.type!==31},Da=function(t){return t.type!==31&&t.type!==4},ws=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},Q5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ei=function(t){return t.type===17||t.type===15},Wt=function(t){return t.type===16||ei(t)},Rk=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},wn={type:17,number:0,flags:Ru},Ky={type:16,number:50,flags:Ru},EA={type:16,number:100,flags:Ru},Kl=function(t,e,n){var r=t[0],s=t[1];return[ut(r,e),ut(typeof s<"u"?s:r,n)]},ut=function(t,e){if(t.type===16)return t.number/100*e;if(Nu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Nk="deg",Pk="grad",Dk="rad",Lk="turn",Tg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Nk:return Math.PI*e.number/180;case Pk:return Math.PI/200*e.number;case Dk:return e.number;case Lk:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Ok=function(t){return t.type===15&&(t.unit===Nk||t.unit===Pk||t.unit===Dk||t.unit===Lk)},Mk=function(t){var e=t.filter(at).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[wn,wn];case"to top":case"bottom":return Ir(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[wn,EA];case"to right":case"left":return Ir(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[EA,EA];case"to bottom":case"top":return Ir(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[EA,wn];case"to left":case"right":return Ir(270)}return 0},Ir=function(t){return Math.PI*t/180},OA={name:"color",parse:function(t,e){if(e.type===18){var n=S5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return bA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return bA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return bA(parseInt(r,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return bA(parseInt(r,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var o=Ns[e.value.toUpperCase()];if(typeof o<"u")return o}return Ns.TRANSPARENT}},MA=function(t){return(255&t)===0},An=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},bA=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},uI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},dI=function(t,e){var n=e.filter(Da);if(n.length===3){var r=n.map(uI),s=r[0],A=r[1],i=r[2];return bA(s,A,i,1)}if(n.length===4){var o=n.map(uI),s=o[0],A=o[1],i=o[2],a=o[3];return bA(s,A,i,a)}return 0};function Jp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var hI=function(t,e){var n=e.filter(Da),r=n[0],s=n[1],A=n[2],i=n[3],o=(r.type===17?Ir(r.number):Tg.parse(t,r))/(Math.PI*2),a=Wt(s)?s.number/100:0,c=Wt(A)?A.number/100:0,d=typeof i<"u"&&Wt(i)?ut(i,1):1;if(a===0)return bA(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,w=Jp(f,h,o+1/3),p=Jp(f,h,o),C=Jp(f,h,o-1/3);return bA(w*255,p*255,C*255,d)},S5={hsl:hI,hsla:hI,rgb:dI,rgba:dI},hc=function(t,e){return OA.parse(t,Qk.create(e).parseComponentValue())},Ns={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},R5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(at(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},N5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fg=function(t,e){var n=OA.parse(t,e[0]),r=e[1];return r&&Wt(r)?{color:n,stop:r}:{color:n,stop:null}},fI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=wn),r.stop===null&&(r.stop=EA);for(var s=[],A=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=ut(o,e);a>A?s.push(a):s.push(A),A=a}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],w=(d-f)/(h+1),p=1;p<=h;p++)s[c+p-1]=w*p;c=null}}return t.map(function(C,_){var y=C.color;return{color:y,stop:Math.max(Math.min(1,s[_]/e),0)}})},P5=function(t,e,n){var r=e/2,s=n/2,A=ut(t[0],e)-r,i=s-ut(t[1],n);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},D5=function(t,e,n){var r=typeof t=="number"?t:P5(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),A=e/2,i=n/2,o=s/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,A-c,A+c,i-a,i+a]},Lr=function(t,e){return Math.sqrt(t*t+e*e)},gI=function(t,e,n,r,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,o){var a=o[0],c=o[1],d=Lr(n-a,r-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},L5=function(t,e,n,r,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)A=i=Math.min(Lr(e,n),Lr(e,n-s),Lr(e-r,n),Lr(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),a=gI(r,s,e,n,!0),c=a[0],d=a[1];A=Lr(c-e,(d-n)/o),i=o*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)A=i=Math.max(Lr(e,n),Lr(e,n-s),Lr(e-r,n),Lr(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=gI(r,s,e,n,!1),c=h[0],d=h[1];A=Lr(c-e,(d-n)/o),i=o*A}break}return Array.isArray(t.size)&&(A=ut(t.size[0],r),i=t.size.length===2?ut(t.size[1],s):A),[A,i]},O5=function(t,e){var n=Ir(180),r=[];return ws(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){n=Mk(s);return}else if(Ok(i)){n=Tg.parse(t,i);return}}var o=Fg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Pd=function(t,e){var n=Ir(180),r=[];return ws(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=Mk(s);return}else if(Ok(i)){n=(Tg.parse(t,i)+Ir(270))%Ir(360);return}}var o=Fg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},M5=function(t,e){var n=Ir(180),r=[],s=1,A=0,i=3,o=[];return ws(e).forEach(function(a,c){var d=a[0];if(c===0){if(at(d)&&d.value==="linear"){s=1;return}else if(at(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=OA.parse(t,d.values[0]);r.push({stop:wn,color:h})}else if(d.name==="to"){var h=OA.parse(t,d.values[0]);r.push({stop:EA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Da);if(f.length===2){var h=OA.parse(t,f[1]),w=f[0];tl(w)&&r.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),s===1?{angle:(n+Ir(180))%Ir(360),stops:r,type:s}:{size:i,shape:A,stops:r,position:o,type:s}},jk="closest-side",Vk="farthest-side",Hk="closest-corner",Kk="farthest-corner",Gk="circle",zk="ellipse",Wk="cover",$k="contain",j5=function(t,e){var n=0,r=3,s=[],A=[];return ws(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(at(f))switch(f.value){case"center":return A.push(Ky),h;case"top":case"left":return A.push(wn),h;case"right":case"bottom":return A.push(EA),h}else(Wt(f)||ei(f))&&A.push(f);else if(at(f))switch(f.value){case Gk:return n=0,!1;case zk:return n=1,!1;case"at":return c=!0,!1;case jk:return r=0,!1;case Wk:case Vk:return r=1,!1;case $k:case Hk:return r=2,!1;case Kk:return r=3,!1}else if(ei(f)||Wt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=Fg(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:A,type:2}},Dd=function(t,e){var n=0,r=3,s=[],A=[];return ws(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(at(h))switch(h.value){case"center":return A.push(Ky),!1;case"top":case"left":return A.push(wn),!1;case"right":case"bottom":return A.push(EA),!1}else if(Wt(h)||ei(h))return A.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(at(h))switch(h.value){case Gk:return n=0,!1;case zk:return n=1,!1;case $k:case jk:return r=0,!1;case Vk:return r=1,!1;case Hk:return r=2,!1;case Wk:case Kk:return r=3,!1}else if(ei(h)||Wt(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=Fg(t,i);s.push(c)}}),{size:r,shape:n,stops:s,position:A,type:2}},V5=function(t){return t.type===1},H5=function(t){return t.type===2},Gy={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=qk[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function K5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!qk[t.name])}var qk={"linear-gradient":O5,"-moz-linear-gradient":Pd,"-ms-linear-gradient":Pd,"-o-linear-gradient":Pd,"-webkit-linear-gradient":Pd,"radial-gradient":j5,"-moz-radial-gradient":Dd,"-ms-radial-gradient":Dd,"-o-radial-gradient":Dd,"-webkit-radial-gradient":Dd,"-webkit-gradient":M5},G5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Da(r)&&K5(r)}).map(function(r){return Gy.parse(t,r)})}},z5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(at(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},W5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ws(e).map(function(n){return n.filter(Wt)}).map(Rk)}},$5={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ws(e).map(function(n){return n.filter(at).map(function(r){return r.value}).join(" ")}).map(q5)}},q5=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ua;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ua||(ua={}));var J5={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ws(e).map(function(n){return n.filter(X5)})}},X5=function(t){return at(t)||Wt(t)},Ug=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Y5=Ug("top"),Z5=Ug("right"),e6=Ug("bottom"),t6=Ug("left"),kg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return Rk(n.filter(Wt))}}},n6=kg("top-left"),r6=kg("top-right"),s6=kg("bottom-right"),A6=kg("bottom-left"),Qg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},i6=Qg("top"),o6=Qg("right"),a6=Qg("bottom"),l6=Qg("left"),Sg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Nu(n)?n.number:0}}},c6=Sg("top"),u6=Sg("right"),d6=Sg("bottom"),h6=Sg("left"),f6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},g6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},p6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(at).reduce(function(n,r){return n|m6(r.value)},0)}},m6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},w6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},v6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},gf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(gf||(gf={}));var y6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return gf.STRICT;case"normal":default:return gf.NORMAL}}},B6={name:"line-height",initialValue:"normal",prefix:!1,type:4},pI=function(t,e){return at(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Wt(t)?ut(t,e):e},x6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Gy.parse(t,e)}},C6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},sw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Rg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},_6=Rg("top"),I6=Rg("right"),E6=Rg("bottom"),b6=Rg("left"),T6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},F6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ng=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},U6=Ng("top"),k6=Ng("right"),Q6=Ng("bottom"),S6=Ng("left"),R6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},N6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},P6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rw(e[0],"none")?[]:ws(e).map(function(n){for(var r={color:Ns.TRANSPARENT,offsetX:wn,offsetY:wn,blur:wn},s=0,A=0;A<n.length;A++){var i=n[A];ei(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=OA.parse(t,i)}return r})}},D6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},L6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=j6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},O6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},M6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,A,i,o]:null},j6={matrix:O6,matrix3d:M6},mI={type:16,number:50,flags:Ru},V6=[mI,mI],H6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Wt);return n.length!==2?V6:[n[0],n[1]]}},K6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},fc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(fc||(fc={}));var G6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return fc.BREAK_ALL;case"keep-all":return fc.KEEP_ALL;case"normal":default:return fc.NORMAL}}},z6={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(tl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Jk={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},W6={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return tl(e)?e.number:1}},$6={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},q6={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},J6={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},X6={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Y6={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(tl(e))return e.number;if(at(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Z6={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(at).map(function(n){return n.value})}},eG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Yt=function(t,e){return(t&e)!==0},tG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},nG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(Sk),A=0;A<s.length;A++){var i=s[A],o=s[A+1];if(i.type===20){var a=o&&tl(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},rG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(Sk),s=0;s<r.length;s++){var A=r[s],i=r[s+1];if(at(A)&&A.value!=="none"){var o=i&&tl(i)?i.number:0;n.push({counter:A.value,reset:o})}}return n}},sG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Nu).map(function(n){return Jk.parse(t,n)})}},AG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(k5);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,o=s[A+1].value;r.push({open:i,close:o})}return r}},wI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},iG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&rw(e[0],"none")?[]:ws(e).map(function(n){for(var r={color:255,offsetX:wn,offsetY:wn,blur:wn,spread:wn,inset:!1},s=0,A=0;A<n.length;A++){var i=n[A];rw(i,"inset")?r.inset=!0:ei(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=OA.parse(t,i)}return r})}},oG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(at).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},aG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},lG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Nu(e)?e.number:0}},cG=function(){function t(e,n){var r,s;this.animationDuration=pe(e,sG,n.animationDuration),this.backgroundClip=pe(e,R5,n.backgroundClip),this.backgroundColor=pe(e,N5,n.backgroundColor),this.backgroundImage=pe(e,G5,n.backgroundImage),this.backgroundOrigin=pe(e,z5,n.backgroundOrigin),this.backgroundPosition=pe(e,W5,n.backgroundPosition),this.backgroundRepeat=pe(e,$5,n.backgroundRepeat),this.backgroundSize=pe(e,J5,n.backgroundSize),this.borderTopColor=pe(e,Y5,n.borderTopColor),this.borderRightColor=pe(e,Z5,n.borderRightColor),this.borderBottomColor=pe(e,e6,n.borderBottomColor),this.borderLeftColor=pe(e,t6,n.borderLeftColor),this.borderTopLeftRadius=pe(e,n6,n.borderTopLeftRadius),this.borderTopRightRadius=pe(e,r6,n.borderTopRightRadius),this.borderBottomRightRadius=pe(e,s6,n.borderBottomRightRadius),this.borderBottomLeftRadius=pe(e,A6,n.borderBottomLeftRadius),this.borderTopStyle=pe(e,i6,n.borderTopStyle),this.borderRightStyle=pe(e,o6,n.borderRightStyle),this.borderBottomStyle=pe(e,a6,n.borderBottomStyle),this.borderLeftStyle=pe(e,l6,n.borderLeftStyle),this.borderTopWidth=pe(e,c6,n.borderTopWidth),this.borderRightWidth=pe(e,u6,n.borderRightWidth),this.borderBottomWidth=pe(e,d6,n.borderBottomWidth),this.borderLeftWidth=pe(e,h6,n.borderLeftWidth),this.boxShadow=pe(e,iG,n.boxShadow),this.color=pe(e,f6,n.color),this.direction=pe(e,g6,n.direction),this.display=pe(e,p6,n.display),this.float=pe(e,w6,n.cssFloat),this.fontFamily=pe(e,J6,n.fontFamily),this.fontSize=pe(e,X6,n.fontSize),this.fontStyle=pe(e,eG,n.fontStyle),this.fontVariant=pe(e,Z6,n.fontVariant),this.fontWeight=pe(e,Y6,n.fontWeight),this.letterSpacing=pe(e,v6,n.letterSpacing),this.lineBreak=pe(e,y6,n.lineBreak),this.lineHeight=pe(e,B6,n.lineHeight),this.listStyleImage=pe(e,x6,n.listStyleImage),this.listStylePosition=pe(e,C6,n.listStylePosition),this.listStyleType=pe(e,sw,n.listStyleType),this.marginTop=pe(e,_6,n.marginTop),this.marginRight=pe(e,I6,n.marginRight),this.marginBottom=pe(e,E6,n.marginBottom),this.marginLeft=pe(e,b6,n.marginLeft),this.opacity=pe(e,W6,n.opacity);var A=pe(e,T6,n.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=pe(e,F6,n.overflowWrap),this.paddingTop=pe(e,U6,n.paddingTop),this.paddingRight=pe(e,k6,n.paddingRight),this.paddingBottom=pe(e,Q6,n.paddingBottom),this.paddingLeft=pe(e,S6,n.paddingLeft),this.paintOrder=pe(e,oG,n.paintOrder),this.position=pe(e,N6,n.position),this.textAlign=pe(e,R6,n.textAlign),this.textDecorationColor=pe(e,$6,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=pe(e,q6,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=pe(e,P6,n.textShadow),this.textTransform=pe(e,D6,n.textTransform),this.transform=pe(e,L6,n.transform),this.transformOrigin=pe(e,H6,n.transformOrigin),this.visibility=pe(e,K6,n.visibility),this.webkitTextStrokeColor=pe(e,aG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=pe(e,lG,n.webkitTextStrokeWidth),this.wordBreak=pe(e,G6,n.wordBreak),this.zIndex=pe(e,z6,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return MA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Yt(this.display,4)||Yt(this.display,33554432)||Yt(this.display,268435456)||Yt(this.display,536870912)||Yt(this.display,67108864)||Yt(this.display,134217728)},t}(),uG=function(){function t(e,n){this.content=pe(e,tG,n.content),this.quotes=pe(e,AG,n.quotes)}return t}(),vI=function(){function t(e,n){this.counterIncrement=pe(e,nG,n.counterIncrement),this.counterReset=pe(e,rG,n.counterReset)}return t}(),pe=function(t,e,n){var r=new kk,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var A=new Qk(r.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,at(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return Tg.parse(t,A.parseComponentValue());case"color":return OA.parse(t,A.parseComponentValue());case"image":return Gy.parse(t,A.parseComponentValue());case"length":var o=A.parseComponentValue();return ei(o)?o:wn;case"length-percentage":var a=A.parseComponentValue();return Wt(a)?a:wn;case"time":return Jk.parse(t,A.parseComponentValue())}break}},dG="data-html2canvas-debug",hG=function(t){var e=t.getAttribute(dG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Aw=function(t,e){var n=hG(t);return n===1||e===n},vs=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Aw(n,3))debugger;this.styles=new cG(e,window.getComputedStyle(n,null)),aw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Eg(this.context,n),Aw(n,4)&&(this.flags|=16)}return t}(),fG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",yI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ld=0;Ld<yI.length;Ld++)Gl[yI.charCodeAt(Ld)]=Ld;var gG=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=Gl[t.charCodeAt(r)],i=Gl[t.charCodeAt(r+1)],o=Gl[t.charCodeAt(r+2)],a=Gl[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},pG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},mG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Mi=5,zy=11,Xp=2,wG=zy-Mi,Xk=65536>>Mi,vG=1<<Mi,Yp=vG-1,yG=1024>>Mi,BG=Xk+yG,xG=BG,CG=32,_G=xG+CG,IG=65536>>zy,EG=1<<wG,bG=EG-1,BI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},TG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},FG=function(t,e){var n=gG(t),r=Array.isArray(n)?mG(n):new Uint32Array(n),s=Array.isArray(n)?pG(n):new Uint16Array(n),A=24,i=BI(s,A/2,r[4]/2),o=r[5]===2?BI(s,(A+r[4])/2):TG(r,Math.ceil((A+r[4])/4));return new UG(r[0],r[1],r[2],r[3],i,o)},UG=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Mi],n=(n<<Xp)+(e&Yp),this.data[n];if(e<=65535)return n=this.index[Xk+(e-55296>>Mi)],n=(n<<Xp)+(e&Yp),this.data[n];if(e<this.highStart)return n=_G-IG+(e>>zy),n=this.index[n],n+=e>>Mi&bG,n=this.index[n],n=(n<<Xp)+(e&Yp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),xI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Od=0;Od<xI.length;Od++)kG[xI.charCodeAt(Od)]=Od;var QG=1,Zp=2,em=3,CI=4,_I=5,SG=7,II=8,tm=9,nm=10,EI=11,bI=12,TI=13,FI=14,rm=15,RG=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},NG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},PG=FG(fG),vr="",sm="",DG=function(t){return PG.get(t)},LG=function(t,e,n){var r=n-2,s=e[r],A=e[n-1],i=e[n];if(A===Zp&&i===em)return vr;if(A===Zp||A===em||A===CI||i===Zp||i===em||i===CI)return sm;if(A===II&&[II,tm,EI,bI].indexOf(i)!==-1||(A===EI||A===tm)&&(i===tm||i===nm)||(A===bI||A===nm)&&i===nm||i===TI||i===_I||i===SG||A===QG)return vr;if(A===TI&&i===FI){for(;s===_I;)s=e[--r];if(s===FI)return vr}if(A===rm&&i===rm){for(var o=0;s===rm;)o++,s=e[--r];if(o%2===0)return vr}return sm},OG=function(t){var e=RG(t),n=e.length,r=0,s=0,A=e.map(DG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=vr;r<n&&(i=LG(e,A,++r))===vr;);if(i!==vr||r===n){var o=NG.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},MG=function(t){for(var e=OG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},jG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(r),A===e)return!0}}return!1},VG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=bg(r.data).map(function(a){return Ot(a)}),A=0,i={},o=s.every(function(a,c){n.setStart(r,A),n.setEnd(r,A+a.length);var d=n.getBoundingClientRect();A+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},HG=function(){return typeof new Image().crossOrigin<"u"},KG=function(){return typeof new XMLHttpRequest().responseType=="string"},GG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},UI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},zG=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,A=e.toDataURL();s.src=A;var i=iw(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),kI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=n+"px",UI(a)?kI(iw(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),UI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},iw=function(t,e,n,r,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),o=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},kI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},gn={get SUPPORT_RANGE_BOUNDS(){var t=jG(document);return Object.defineProperty(gn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=gn.SUPPORT_RANGE_BOUNDS&&VG(document);return Object.defineProperty(gn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=GG(document);return Object.defineProperty(gn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?zG(document):Promise.resolve(!1);return Object.defineProperty(gn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=HG();return Object.defineProperty(gn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=KG();return Object.defineProperty(gn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(gn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(gn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},gc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),WG=function(t,e,n,r){var s=JG(e,n),A=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(gn.SUPPORT_RANGE_BOUNDS){var a=QI(r,i,o.length).getClientRects();if(a.length>1){var c=Wy(o),d=0;c.forEach(function(f){A.push(new gc(f,Ks.fromDOMRectList(t,QI(r,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new gc(o,Ks.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);A.push(new gc(o,$G(t,r))),r=h}else gn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),A},$G=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var A=Eg(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),A}}return Ks.EMPTY},QI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},Wy=function(t){if(gn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return MG(t)},qG=function(t,e){if(gn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return YG(t,e)},JG=function(t,e){return e.letterSpacing!==0?Wy(t):qG(t,e)},XG=[32,160,4961,65792,65793,4153,4241],YG=function(t,e){for(var n=I3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,A=function(){if(s.value){var i=s.value.slice(),o=bg(i),a="";o.forEach(function(c){XG.indexOf(c)===-1?a+=Ot(c):(a.length&&r.push(a),r.push(Ot(c)),a="")}),a.length&&r.push(a)}};!(s=n.next()).done;)A();return r},ZG=function(){function t(e,n,r){this.text=e8(n.data,r.textTransform),this.textBounds=WG(e,this.text,r,n)}return t}(),e8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(t8,n8);case 2:return t.toUpperCase();default:return t}},t8=/(^|\s|:|-|\(|\))([a-z])/g,n8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},Yk=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(vs),Zk=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(vs),eQ=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=new XMLSerializer,i=Eg(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(vs),tQ=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(vs),ow=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(vs),r8=[{type:15,flags:0,unit:"px",number:3}],s8=[{type:16,flags:0,number:50}],A8=function(t){return t.width>t.height?new Ks(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ks(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},i8=function(t){var e=t.type===o8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},pf="checkbox",mf="radio",o8="password",SI=707406591,$y=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=i8(r),(s.type===pf||s.type===mf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=A8(s.bounds)),s.type){case pf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=r8;break;case mf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=s8;break}return s}return e}(vs),nQ=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=r.options[r.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(vs),rQ=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(vs),sQ=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=iQ(n,r.contentWindow.document.documentElement);var A=r.contentWindow.document.documentElement?hc(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Ns.TRANSPARENT,i=r.contentWindow.document.body?hc(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Ns.TRANSPARENT;s.backgroundColor=MA(A)?MA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(vs),a8=["OL","UL","MENU"],ph=function(t,e,n,r){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,oQ(s)&&s.data.trim().length>0)n.textNodes.push(new ZG(t,s,n.styles));else if(Yo(s))if(uQ(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return ph(t,o,n,r)});else{var i=AQ(t,s);i.styles.isVisible()&&(l8(s,i,r)?i.flags|=4:c8(i.styles)&&(i.flags|=2),a8.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?ph(t,s.shadowRoot,i,r):!wf(s)&&!aQ(s)&&!vf(s)&&ph(t,s,i,r))}},AQ=function(t,e){return lw(e)?new Yk(t,e):lQ(e)?new Zk(t,e):aQ(e)?new eQ(t,e):u8(e)?new tQ(t,e):d8(e)?new ow(t,e):h8(e)?new $y(t,e):vf(e)?new nQ(t,e):wf(e)?new rQ(t,e):cQ(e)?new sQ(t,e):new vs(t,e)},iQ=function(t,e){var n=AQ(t,e);return n.flags|=4,ph(t,e,n,n),n},l8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||qy(t)&&n.styles.isTransparent()},c8=function(t){return t.isPositioned()||t.isFloating()},oQ=function(t){return t.nodeType===Node.TEXT_NODE},Yo=function(t){return t.nodeType===Node.ELEMENT_NODE},aw=function(t){return Yo(t)&&typeof t.style<"u"&&!mh(t)},mh=function(t){return typeof t.className=="object"},u8=function(t){return t.tagName==="LI"},d8=function(t){return t.tagName==="OL"},h8=function(t){return t.tagName==="INPUT"},f8=function(t){return t.tagName==="HTML"},aQ=function(t){return t.tagName==="svg"},qy=function(t){return t.tagName==="BODY"},lQ=function(t){return t.tagName==="CANVAS"},RI=function(t){return t.tagName==="VIDEO"},lw=function(t){return t.tagName==="IMG"},cQ=function(t){return t.tagName==="IFRAME"},NI=function(t){return t.tagName==="STYLE"},g8=function(t){return t.tagName==="SCRIPT"},wf=function(t){return t.tagName==="TEXTAREA"},vf=function(t){return t.tagName==="SELECT"},uQ=function(t){return t.tagName==="SLOT"},PI=function(t){return t.tagName.indexOf("-")>0},p8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,A=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(A=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return A&&s.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),DI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},LI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},m8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},w8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Fo=function(t,e,n,r,s,A){return t<e||t>n?ou(t,s,A.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+A},dQ=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Lt=function(t,e,n,r,s){var A=n-e+1;return(t<0?"-":"")+(dQ(Math.abs(t),A,r,function(i){return Ot(Math.floor(i%A)+e)})+s)},gi=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return dQ(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},Do=1,cA=2,uA=4,zl=8,_s=function(t,e,n,r,s,A){if(t<-9999||t>9999)return ou(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&Yt(A,Do)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&Yt(A,cA)||c===1&&a===1&&Yt(A,uA)&&t>100||c===1&&a>1&&Yt(A,zl)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},OI="",MI="",jI="",Am="",ou=function(t,e,n){var r=n?". ":"",s=n?"":"",A=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Lt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return gi(t,"",s);case 6:return Fo(t,1,3999,DI,3,r).toLowerCase();case 7:return Fo(t,1,3999,DI,3,r);case 8:return Lt(t,945,969,!1,r);case 9:return Lt(t,97,122,!1,r);case 10:return Lt(t,65,90,!1,r);case 11:return Lt(t,1632,1641,!0,r);case 12:case 49:return Fo(t,1,9999,LI,3,r);case 35:return Fo(t,1,9999,LI,3,r).toLowerCase();case 13:return Lt(t,2534,2543,!0,r);case 14:case 30:return Lt(t,6112,6121,!0,r);case 15:return gi(t,"",s);case 16:return gi(t,"",s);case 17:case 48:return _s(t,"",OI,"",s,cA|uA|zl);case 47:return _s(t,"",MI,"",s,Do|cA|uA|zl);case 42:return _s(t,"",OI,"",s,cA|uA|zl);case 41:return _s(t,"",MI,"",s,Do|cA|uA|zl);case 26:return _s(t,"","",jI,s,0);case 25:return _s(t,"","",jI,s,Do|cA|uA);case 31:return _s(t,"","",Am,A,Do|cA|uA);case 33:return _s(t,"","",Am,A,0);case 32:return _s(t,"","",Am,A,Do|cA|uA);case 18:return Lt(t,2406,2415,!0,r);case 20:return Fo(t,1,19999,w8,3,r);case 21:return Lt(t,2790,2799,!0,r);case 22:return Lt(t,2662,2671,!0,r);case 22:return Fo(t,1,10999,m8,3,r);case 23:return gi(t,"");case 24:return gi(t,"");case 27:return Lt(t,3302,3311,!0,r);case 28:return gi(t,"",s);case 29:return gi(t,"",s);case 34:return Lt(t,3792,3801,!0,r);case 37:return Lt(t,6160,6169,!0,r);case 38:return Lt(t,4160,4169,!0,r);case 39:return Lt(t,2918,2927,!0,r);case 40:return Lt(t,1776,1785,!0,r);case 43:return Lt(t,3046,3055,!0,r);case 44:return Lt(t,3174,3183,!0,r);case 45:return Lt(t,3664,3673,!0,r);case 46:return Lt(t,3872,3881,!0,r);case 3:default:return Lt(t,48,57,!0,r)}},hQ="data-html2canvas-ignore",VI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new p8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=v8(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,a=o.document,c=x8(s).then(function(){return Dn(r,void 0,void 0,function(){var d,h;return Fn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(E8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,B8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return s})]:[2,s]}})})});return a.open(),a.write(_8(document.doctype)+"<html></html>"),I8(this.referenceElement.ownerDocument,A,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(Aw(e,2))debugger;if(lQ(e))return this.createCanvasClone(e);if(RI(e))return this.createVideoClone(e);if(NI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return lw(n)&&(lw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),PI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return im(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!Yo(n)||!g8(n)&&!n.hasAttribute(hQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Yo(n)||!NI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(Yo(A)&&uQ(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,A,r)},t.prototype.cloneNode=function(e,n){if(oQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Yo(e)&&(aw(e)||mh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&aw(s)&&(this.clonedReferenceElement=s),qy(s)&&F8(s);var a=this.counters.parse(new vI(this.context,A)),c=this.resolvePseudoContent(e,s,i,pc.BEFORE);PI(e)&&(n=!0),RI(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,pc.AFTER);return d&&s.appendChild(d),this.counters.pop(a),(A&&(this.options.copyStyles||mh(e))&&!cQ(e)||n)&&im(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(wf(e)||vf(e))&&(wf(s)||vf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var A=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new vI(this.context,r));var a=new uG(this.context,r),c=o.createElement("html2canvaspseudoelement");im(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(at);w.length&&c.appendChild(o.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var p=h.values.filter(Da),C=p[0],_=p[1];if(C&&at(C)){var y=A.counters.getCounterValue(C.value),B=_&&at(_)?sw.parse(A.context,_.value):3;c.appendChild(o.createTextNode(ou(y,B,!1)))}}else if(h.name==="counters"){var v=h.values.filter(Da),C=v[0],R=v[1],_=v[2];if(C&&at(C)){var S=A.counters.getCounterValues(C.value),N=_&&at(_)?sw.parse(A.context,_.value):3,I=R&&R.type===0?R.value:"",x=S.map(function(U){return ou(U,N,!1)}).join(I);c.appendChild(o.createTextNode(x))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(wI(a.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(wI(a.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=cw+" "+uw;var d=s===pc.BEFORE?" "+cw:" "+uw;return mh(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),pc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(pc||(pc={}));var v8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(hQ,"true"),t.body.appendChild(n),n},y8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},B8=function(t){return Promise.all([].slice.call(t.images,0).map(y8))},x8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},C8=["all","d","content"],im=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);C8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},_8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},I8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},E8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},b8=":before",T8=":after",cw="___html2canvas___pseudoelement_before",uw="___html2canvas___pseudoelement_after",HI=`{
    content: "" !important;
    display: none !important;
}`,F8=function(t){U8(t,"."+cw+b8+HI+`
         .`+uw+T8+HI)},U8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},fQ=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),k8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(am(e)||N8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Dn(this,void 0,void 0,function(){var n,r,s,A,i=this;return Fn(this,function(o){switch(o.label){case 0:return n=fQ.isSameOrigin(e),r=!om(e)&&this._options.useCORS===!0&&gn.SUPPORT_CORS_IMAGES&&!n,s=!om(e)&&!n&&!am(e)&&typeof this._options.proxy=="string"&&gn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!om(e)&&!am(e)&&!s&&!r?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(P8(A)||r)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var o=gn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")A(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+s+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}a.send()})},t}(),Q8=/^data:image\/svg\+xml/i,S8=/^data:image\/.*;base64,/i,R8=/^data:image\/.*/i,N8=function(t){return gn.SUPPORT_SVG_DRAWING||!D8(t)},om=function(t){return R8.test(t)},P8=function(t){return S8.test(t)},am=function(t){return t.substr(0,4)==="blob"},D8=function(t){return t.substr(-3).toLowerCase()==="svg"||Q8.test(t)},de=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Uo=function(t,e,n){return new de(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Md=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=Uo(this.start,this.startControl,e),s=Uo(this.startControl,this.endControl,e),A=Uo(this.endControl,this.end,e),i=Uo(r,s,e),o=Uo(s,A,e),a=Uo(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,A,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),xr=function(t){return t.type===1},L8=function(){function t(e){var n=e.styles,r=e.bounds,s=Kl(n.borderTopLeftRadius,r.width,r.height),A=s[0],i=s[1],o=Kl(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=Kl(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],w=Kl(n.borderBottomLeftRadius,r.width,r.height),p=w[0],C=w[1],_=[];_.push((A+a)/r.width),_.push((p+h)/r.width),_.push((i+C)/r.height),_.push((c+f)/r.height);var y=Math.max.apply(Math,_);y>1&&(A/=y,i/=y,a/=y,c/=y,h/=y,f/=y,p/=y,C/=y);var B=r.width-a,v=r.height-f,R=r.width-h,S=r.height-C,N=n.borderTopWidth,I=n.borderRightWidth,x=n.borderBottomWidth,b=n.borderLeftWidth,k=ut(n.paddingTop,e.bounds.width),U=ut(n.paddingRight,e.bounds.width),D=ut(n.paddingBottom,e.bounds.width),T=ut(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?wt(r.left+b/3,r.top+N/3,A-b/3,i-N/3,nt.TOP_LEFT):new de(r.left+b/3,r.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?wt(r.left+B,r.top+N/3,a-I/3,c-N/3,nt.TOP_RIGHT):new de(r.left+r.width-I/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?wt(r.left+R,r.top+v,h-I/3,f-x/3,nt.BOTTOM_RIGHT):new de(r.left+r.width-I/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=p>0||C>0?wt(r.left+b/3,r.top+S,p-b/3,C-x/3,nt.BOTTOM_LEFT):new de(r.left+b/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?wt(r.left+b*2/3,r.top+N*2/3,A-b*2/3,i-N*2/3,nt.TOP_LEFT):new de(r.left+b*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?wt(r.left+B,r.top+N*2/3,a-I*2/3,c-N*2/3,nt.TOP_RIGHT):new de(r.left+r.width-I*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?wt(r.left+R,r.top+v,h-I*2/3,f-x*2/3,nt.BOTTOM_RIGHT):new de(r.left+r.width-I*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||C>0?wt(r.left+b*2/3,r.top+S,p-b*2/3,C-x*2/3,nt.BOTTOM_LEFT):new de(r.left+b*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=A>0||i>0?wt(r.left+b/2,r.top+N/2,A-b/2,i-N/2,nt.TOP_LEFT):new de(r.left+b/2,r.top+N/2),this.topRightBorderStroke=A>0||i>0?wt(r.left+B,r.top+N/2,a-I/2,c-N/2,nt.TOP_RIGHT):new de(r.left+r.width-I/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?wt(r.left+R,r.top+v,h-I/2,f-x/2,nt.BOTTOM_RIGHT):new de(r.left+r.width-I/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=p>0||C>0?wt(r.left+b/2,r.top+S,p-b/2,C-x/2,nt.BOTTOM_LEFT):new de(r.left+b/2,r.top+r.height-x/2),this.topLeftBorderBox=A>0||i>0?wt(r.left,r.top,A,i,nt.TOP_LEFT):new de(r.left,r.top),this.topRightBorderBox=a>0||c>0?wt(r.left+B,r.top,a,c,nt.TOP_RIGHT):new de(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?wt(r.left+R,r.top+v,h,f,nt.BOTTOM_RIGHT):new de(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=p>0||C>0?wt(r.left,r.top+S,p,C,nt.BOTTOM_LEFT):new de(r.left,r.top+r.height),this.topLeftPaddingBox=A>0||i>0?wt(r.left+b,r.top+N,Math.max(0,A-b),Math.max(0,i-N),nt.TOP_LEFT):new de(r.left+b,r.top+N),this.topRightPaddingBox=a>0||c>0?wt(r.left+Math.min(B,r.width-I),r.top+N,B>r.width+I?0:Math.max(0,a-I),Math.max(0,c-N),nt.TOP_RIGHT):new de(r.left+r.width-I,r.top+N),this.bottomRightPaddingBox=h>0||f>0?wt(r.left+Math.min(R,r.width-b),r.top+Math.min(v,r.height-x),Math.max(0,h-I),Math.max(0,f-x),nt.BOTTOM_RIGHT):new de(r.left+r.width-I,r.top+r.height-x),this.bottomLeftPaddingBox=p>0||C>0?wt(r.left+b,r.top+Math.min(S,r.height-x),Math.max(0,p-b),Math.max(0,C-x),nt.BOTTOM_LEFT):new de(r.left+b,r.top+r.height-x),this.topLeftContentBox=A>0||i>0?wt(r.left+b+T,r.top+N+k,Math.max(0,A-(b+T)),Math.max(0,i-(N+k)),nt.TOP_LEFT):new de(r.left+b+T,r.top+N+k),this.topRightContentBox=a>0||c>0?wt(r.left+Math.min(B,r.width+b+T),r.top+N+k,B>r.width+b+T?0:a-b+T,c-(N+k),nt.TOP_RIGHT):new de(r.left+r.width-(I+U),r.top+N+k),this.bottomRightContentBox=h>0||f>0?wt(r.left+Math.min(R,r.width-(b+T)),r.top+Math.min(v,r.height+N+k),Math.max(0,h-(I+U)),f-(x+D),nt.BOTTOM_RIGHT):new de(r.left+r.width-(I+U),r.top+r.height-(x+D)),this.bottomLeftContentBox=p>0||C>0?wt(r.left+b+T,r.top+S,Math.max(0,p-(b+T)),C-(x+D),nt.BOTTOM_LEFT):new de(r.left+b+T,r.top+r.height-(x+D))}return t}(),nt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(nt||(nt={}));var wt=function(t,e,n,r,s){var A=4*((Math.sqrt(2)-1)/3),i=n*A,o=r*A,a=t+n,c=e+r;switch(s){case nt.TOP_LEFT:return new Md(new de(t,c),new de(t,c-o),new de(a-i,e),new de(a,e));case nt.TOP_RIGHT:return new Md(new de(t,e),new de(t+i,e),new de(a,c-o),new de(a,c));case nt.BOTTOM_RIGHT:return new Md(new de(a,e),new de(a,e+o),new de(t+i,c),new de(t,c));case nt.BOTTOM_LEFT:default:return new Md(new de(a,c),new de(a-i,c),new de(t,e+o),new de(t,e))}},yf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},O8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Bf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},M8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),jd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),j8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),V8=function(t){return t.type===0},gQ=function(t){return t.type===1},H8=function(t){return t.type===2},KI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},K8=function(t,e,n,r,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,n);case 1:return A.add(e+r,n);case 2:return A.add(e+r,n+s);case 3:return A.add(e,n+s)}return A})},pQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),mQ=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new L8(this.container),this.container.styles.opacity<1&&this.effects.push(new j8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new M8(r,s,A))}if(this.container.styles.overflowX!==0){var i=yf(this.curves),o=Bf(this.curves);KI(i,o)?this.effects.push(new jd(i,6)):(this.effects.push(new jd(i,2)),this.effects.push(new jd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var A=r.effects.filter(function(a){return!gQ(a)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,A),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=yf(r.curves),o=Bf(r.curves);KI(i,o)||s.unshift(new jd(o,6))}}else s.unshift.apply(s,A);r=r.parent}return s.filter(function(a){return Yt(a.target,e)})},t}(),dw=function(t,e,n,r){t.container.elements.forEach(function(s){var A=Yt(s.flags,4),i=Yt(s.flags,2),o=new mQ(s,t);Yt(s.styles.display,2048)&&r.push(o);var a=Yt(s.flags,8)?[]:r;if(A||i){var c=A||s.styles.isPositioned()?n:e,d=new pQ(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(p,C){return h>p.element.container.styles.zIndex.order?(f=C,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;c.positiveZIndex.some(function(p,C){return h>=p.element.container.styles.zIndex.order?(w=C+1,!1):w>0}),c.positiveZIndex.splice(w,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);dw(o,d,A?d:n,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),dw(o,e,n,a);Yt(s.flags,8)&&wQ(s,a)})},wQ=function(t,e){for(var n=t instanceof ow?t.start:1,r=t instanceof ow?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof tQ&&typeof A.container.value=="number"&&A.container.value!==0&&(n=A.container.value),A.listValue=ou(n,A.container.styles.listStyleType,!0),n+=r?-1:1}},G8=function(t){var e=new mQ(t,null),n=new pQ(e),r=[];return dw(e,n,n,r),wQ(e.container,r),n},GI=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},z8=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Er(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},W8=function(t,e){switch(e){case 0:return Er(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},$8=function(t,e){switch(e){case 0:return Vd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Vd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Vd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Vd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Vd=function(t,e){var n=[];return xr(t)?n.push(t.subdivide(.5,!1)):n.push(t),xr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Er=function(t,e,n,r){var s=[];return xr(t)?s.push(t.subdivide(.5,!1)):s.push(t),xr(n)?s.push(n.subdivide(.5,!0)):s.push(n),xr(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),xr(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},vQ=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},xf=function(t){var e=t.styles,n=t.bounds,r=ut(e.paddingLeft,n.width),s=ut(e.paddingRight,n.width),A=ut(e.paddingTop,n.width),i=ut(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},q8=function(t,e){return t===0?e.bounds:t===2?xf(e):vQ(e)},J8=function(t,e){return t===0?e.bounds:t===2?xf(e):vQ(e)},lm=function(t,e,n){var r=q8(Lo(t.styles.backgroundOrigin,e),t),s=J8(Lo(t.styles.backgroundClip,e),t),A=X8(Lo(t.styles.backgroundSize,e),n,r),i=A[0],o=A[1],a=Kl(Lo(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=Y8(Lo(t.styles.backgroundRepeat,e),a,A,r,s),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},ko=function(t){return at(t)&&t.value===ua.AUTO},Hd=function(t){return typeof t=="number"},X8=function(t,e,n){var r=e[0],s=e[1],A=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Wt(i)&&o&&Wt(o))return[ut(i,n.width),ut(o,n.height)];var a=Hd(A);if(at(i)&&(i.value===ua.CONTAIN||i.value===ua.COVER)){if(Hd(A)){var c=n.width/n.height;return c<A!=(i.value===ua.COVER)?[n.width,n.width/A]:[n.height*A,n.height]}return[n.width,n.height]}var d=Hd(r),h=Hd(s),f=d||h;if(ko(i)&&(!o||ko(o))){if(d&&h)return[r,s];if(!a&&!f)return[n.width,n.height];if(f&&a){var w=d?r:s*A,p=h?s:r/A;return[w,p]}var C=d?r:n.width,_=h?s:n.height;return[C,_]}if(a){var y=0,B=0;return Wt(i)?y=ut(i,n.width):Wt(o)&&(B=ut(o,n.height)),ko(i)?y=B*A:(!o||ko(o))&&(B=y/A),[y,B]}var v=null,R=null;if(Wt(i)?v=ut(i,n.width):o&&Wt(o)&&(R=ut(o,n.height)),v!==null&&(!o||ko(o))&&(R=d&&h?v/r*s:n.height),R!==null&&ko(i)&&(v=d&&h?R/s*r:n.width),v!==null&&R!==null)return[v,R];throw new Error("Unable to calculate background-size for element")},Lo=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},Y8=function(t,e,n,r,s){var A=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new de(Math.round(r.left),Math.round(r.top+i)),new de(Math.round(r.left+r.width),Math.round(r.top+i)),new de(Math.round(r.left+r.width),Math.round(a+r.top+i)),new de(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new de(Math.round(r.left+A),Math.round(r.top)),new de(Math.round(r.left+A+o),Math.round(r.top)),new de(Math.round(r.left+A+o),Math.round(r.height+r.top)),new de(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new de(Math.round(r.left+A),Math.round(r.top+i)),new de(Math.round(r.left+A+o),Math.round(r.top+i)),new de(Math.round(r.left+A+o),Math.round(r.top+i+a)),new de(Math.round(r.left+A),Math.round(r.top+i+a))];default:return[new de(Math.round(s.left),Math.round(s.top)),new de(Math.round(s.left+s.width),Math.round(s.top)),new de(Math.round(s.left+s.width),Math.round(s.height+s.top)),new de(Math.round(s.left),Math.round(s.height+s.top))]}},Z8="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",zI="Hidden Text",e9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=Z8,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=n,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(zI)),r.appendChild(A),r.appendChild(s);var o=s.offsetTop-A.offsetTop+2;r.removeChild(A),r.appendChild(this._document.createTextNode(zI)),r.style.lineHeight="normal",s.style.verticalAlign="super";var a=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),yQ=function(){function t(e,n){this.context=e,this.options=n}return t}(),t9=1e4,n9=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new e9(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),H8(n)&&(this.ctx.globalAlpha=n.opacity),V8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),gQ(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Dn(this,void 0,void 0,function(){var r;return Fn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Dn(this,void 0,void 0,function(){return Fn(this,function(r){switch(r.label){case 0:if(Yt(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var A=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=Wy(n.text);i.reduce(function(o,a){return A.ctx.fillText(a,o,n.bounds.top+s),o+A.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=o9(n.fontFamily).join(", "),A=Nu(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(n,r){return Dn(this,void 0,void 0,function(){var s,A,i,o,a,c,d,h,f=this;return Fn(this,function(w){return s=this.createFontStyle(r),A=s[0],i=s[1],o=s[2],this.ctx.font=A,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(p){h.forEach(function(C){switch(C){case 0:f.ctx.fillStyle=An(r.color),f.renderTextWithLetterSpacing(p,r.letterSpacing,c);var _=r.textShadow;_.length&&p.text.trim().length&&(_.slice(0).reverse().forEach(function(y){f.ctx.shadowColor=An(y.color),f.ctx.shadowOffsetX=y.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=y.offsetY.number*f.options.scale,f.ctx.shadowBlur=y.blur.number,f.renderTextWithLetterSpacing(p,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=An(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(y){switch(y){case 1:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+c),p.bounds.width,1);break;case 2:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:f.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+d),p.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&p.text.trim().length&&(f.ctx.strokeStyle=An(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var A=xf(n),i=Bf(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Dn(this,void 0,void 0,function(){var r,s,A,i,o,a,B,B,c,d,h,f,R,w,p,S,C,_,y,B,v,R,S;return Fn(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,A=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof Yk))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return B=N.sent(),this.renderReplacedElement(r,s,B),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Zk&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof eQ))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return B=N.sent(),this.renderReplacedElement(r,s,B),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof sQ&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof $y&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===pf?r.checked&&(this.ctx.save(),this.path([new de(r.bounds.left+h*.39363,r.bounds.top+h*.79),new de(r.bounds.left+h*.16,r.bounds.top+h*.5549),new de(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new de(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new de(r.bounds.left+h*.72983,r.bounds.top+h*.23),new de(r.bounds.left+h*.84,r.bounds.top+h*.34085),new de(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=An(SI),this.ctx.fill(),this.ctx.restore()):r.type===mf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=An(SI),this.ctx.fill(),this.ctx.restore())),r9(r)&&r.value.length){switch(f=this.createFontStyle(A),R=f[0],w=f[1],p=this.fontMetrics.getMetrics(R,w).baseline,this.ctx.font=R,this.ctx.fillStyle=An(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=A9(r.styles.textAlign),S=xf(r),C=0,r.styles.textAlign){case 1:C+=S.width/2;break;case 2:C+=S.width;break}_=S.add(C,0,0,-S.height/2+1),this.ctx.save(),this.path([new de(S.left,S.top),new de(S.left+S.width,S.top),new de(S.left+S.width,S.top+S.height),new de(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gc(r.value,_),A.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Yt(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(y=r.styles.listStyleImage,y.type!==0)return[3,18];B=void 0,v=y.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return B=N.sent(),this.ctx.drawImage(B,r.bounds.left-(B.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(R=this.createFontStyle(A)[0],this.ctx.font=R,this.ctx.fillStyle=An(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new Ks(r.bounds.left,r.bounds.top+ut(r.styles.paddingTop,r.bounds.width),r.bounds.width,pI(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gc(n.listValue,S),A.letterSpacing,pI(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Dn(this,void 0,void 0,function(){var r,s,y,A,i,y,o,a,y,c,d,y,h,f,y,w,p,y,C,_,y;return Fn(this,function(B){switch(B.label){case 0:if(Yt(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:B.sent(),r=0,s=n.negativeZIndex,B.label=2;case 2:return r<s.length?(y=s[r],[4,this.renderStack(y)]):[3,5];case 3:B.sent(),B.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:B.sent(),A=0,i=n.nonInlineLevel,B.label=7;case 7:return A<i.length?(y=i[A],[4,this.renderNode(y)]):[3,10];case 8:B.sent(),B.label=9;case 9:return A++,[3,7];case 10:o=0,a=n.nonPositionedFloats,B.label=11;case 11:return o<a.length?(y=a[o],[4,this.renderStack(y)]):[3,14];case 12:B.sent(),B.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,B.label=15;case 15:return c<d.length?(y=d[c],[4,this.renderStack(y)]):[3,18];case 16:B.sent(),B.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,B.label=19;case 19:return h<f.length?(y=f[h],[4,this.renderNode(y)]):[3,22];case 20:B.sent(),B.label=21;case 21:return h++,[3,19];case 22:w=0,p=n.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return w<p.length?(y=p[w],[4,this.renderStack(y)]):[3,26];case 24:B.sent(),B.label=25;case 25:return w++,[3,23];case 26:C=0,_=n.positiveZIndex,B.label=27;case 27:return C<_.length?(y=_[C],[4,this.renderStack(y)]):[3,30];case 28:B.sent(),B.label=29;case 29:return C++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,A){var i=xr(s)?s.start:s;A===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),xr(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,A){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(n,r,s){var A;if(n.width===r&&n.height===s)return n;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return Dn(this,void 0,void 0,function(){var r,s,A,i,o,a;return Fn(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,f,w,k,Oe,V,T,Ee,x,p,k,Oe,V,T,Ee,C,_,y,B,v,R,S,N,I,x,b,k,U,D,T,Ee,$e,Oe,V,z,F,L,H,$,q,se,fe;return Fn(this,function(Ue){switch(Ue.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ue.label=1;case 1:return Ue.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=Ue.sent(),[3,4];case 3:return Ue.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=lm(n,r,[h.width,h.height,h.width/h.height]),k=w[0],Oe=w[1],V=w[2],T=w[3],Ee=w[4],x=A.ctx.createPattern(A.resizeImage(h,T,Ee),"repeat"),A.renderRepeat(k,x,Oe,V)),[3,6];case 5:V5(d)?(p=lm(n,r,[null,null,null]),k=p[0],Oe=p[1],V=p[2],T=p[3],Ee=p[4],C=D5(d.angle,T,Ee),_=C[0],y=C[1],B=C[2],v=C[3],R=C[4],S=document.createElement("canvas"),S.width=T,S.height=Ee,N=S.getContext("2d"),I=N.createLinearGradient(y,v,B,R),fI(d.stops,_).forEach(function(te){return I.addColorStop(te.stop,An(te.color))}),N.fillStyle=I,N.fillRect(0,0,T,Ee),T>0&&Ee>0&&(x=A.ctx.createPattern(S,"repeat"),A.renderRepeat(k,x,Oe,V))):H5(d)&&(b=lm(n,r,[null,null,null]),k=b[0],U=b[1],D=b[2],T=b[3],Ee=b[4],$e=d.position.length===0?[Ky]:d.position,Oe=ut($e[0],T),V=ut($e[$e.length-1],Ee),z=L5(d,Oe,V,T,Ee),F=z[0],L=z[1],F>0&&L>0&&(H=A.ctx.createRadialGradient(U+Oe,D+V,0,U+Oe,D+V,F),fI(d.stops,F*2).forEach(function(te){return H.addColorStop(te.stop,An(te.color))}),A.path(k),A.ctx.fillStyle=H,F!==L?($=n.bounds.left+.5*n.bounds.width,q=n.bounds.top+.5*n.bounds.height,se=L/F,fe=1/se,A.ctx.save(),A.ctx.translate($,q),A.ctx.transform(1,0,0,se,0,0),A.ctx.translate(-$,-q),A.ctx.fillRect(U,fe*(D-q)+q,T,Ee*fe),A.ctx.restore()):A.ctx.fill())),Ue.label=6;case 6:return r--,[2]}})},A=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,s(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return Dn(this,void 0,void 0,function(){return Fn(this,function(A){return this.path(GI(s,r)),this.ctx.fillStyle=An(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,A){return Dn(this,void 0,void 0,function(){var i,o;return Fn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,A)]:[3,2];case 1:return a.sent(),[2];case 2:return i=z8(A,s),this.path(i),this.ctx.fillStyle=An(n),this.ctx.fill(),o=W8(A,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Dn(this,void 0,void 0,function(){var r,s,A,i,o,a,c,d,h=this;return Fn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!MA(r.backgroundColor)||r.backgroundImage.length,A=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=s9(Lo(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),MA(r.backgroundColor)||(this.ctx.fillStyle=An(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var p=yf(n.curves),C=w.inset?0:t9,_=K8(p,-C+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(p),h.ctx.clip(),h.mask(_)):(h.mask(p),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=w.offsetX.number+C,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=An(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?An(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=A,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!MA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,A,i){return Dn(this,void 0,void 0,function(){var o,a,c,d,h,f,w,p,C,_,y,B,v,R,S,N,S,N;return Fn(this,function(I){return this.ctx.save(),o=$8(A,s),a=GI(A,s),i===2&&(this.path(a),this.ctx.clip()),xr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),xr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),s===0||s===2?w=Math.abs(c-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),p=r<3?r*3:r*2,C=r<3?r*2:r,i===3&&(p=r,C=r),_=!0,w<=p*2?_=!1:w<=p*2+C?(y=w/(2*p+C),p*=y,C*=y):(B=Math.floor((w+C)/(p+C)),v=(w-B*p)/(B-1),R=(w-(B+1)*p)/B,C=R<=0||Math.abs(C-v)<Math.abs(C-R)?v:R),_&&(i===3?this.ctx.setLineDash([0,p+C]):this.ctx.setLineDash([p,C])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=An(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(xr(a[0])&&(S=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new de(S.end.x,S.end.y),new de(N.start.x,N.start.y)]),this.ctx.stroke()),xr(a[1])&&(S=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new de(S.end.x,S.end.y),new de(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Dn(this,void 0,void 0,function(){var r;return Fn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=An(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=G8(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yQ),r9=function(t){return t instanceof rQ||t instanceof nQ?!0:t instanceof $y&&t.type!==mf&&t.type!==pf},s9=function(t,e){switch(t){case 0:return yf(e);case 2:return O8(e);case 1:default:return Bf(e)}},A9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},i9=["-apple-system","system-ui"],o9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return i9.indexOf(e)===-1}):t},a9=function(t){$r(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return Dn(this,void 0,void 0,function(){var r,s;return Fn(this,function(A){switch(A.label){case 0:return r=iw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,l9(r)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=An(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yQ),l9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},c9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Bd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Bd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Bd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Bd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),u9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new c9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new k8(this,e)}return t.instanceCount=1,t}(),d9=function(t,e){return e===void 0&&(e={}),h9(t,e)};typeof window<"u"&&fQ.setContext(window);var h9=function(t,e){return Dn(void 0,void 0,void 0,function(){var n,r,s,A,i,o,a,c,d,h,f,w,p,C,_,y,B,v,R,S,I,N,I,x,b,k,U,D,T,Ee,$e,Oe,V,z,F,L,H,$,q,se;return Fn(this,function(fe){switch(fe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(x=e.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(b=e.imageTimeout)!==null&&b!==void 0?b:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},A=G0({logging:(U=e.logging)!==null&&U!==void 0?U:!0,cache:e.cache},s),i={windowWidth:(D=e.windowWidth)!==null&&D!==void 0?D:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(Ee=e.scrollX)!==null&&Ee!==void 0?Ee:r.pageXOffset,scrollY:($e=e.scrollY)!==null&&$e!==void 0?$e:r.pageYOffset},o=new Ks(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new u9(A,o),c=(Oe=e.foreignObjectRendering)!==null&&Oe!==void 0?Oe:!1,d={allowTaint:(V=e.allowTaint)!==null&&V!==void 0?V:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new VI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=fe.sent(),p=qy(f)||f8(f)?KK(f.ownerDocument):Eg(a,f),C=p.width,_=p.height,y=p.left,B=p.top,v=f9(a,f,e.backgroundColor),R={canvas:e.canvas,backgroundColor:v,scale:(F=(z=e.scale)!==null&&z!==void 0?z:r.devicePixelRatio)!==null&&F!==void 0?F:1,x:((L=e.x)!==null&&L!==void 0?L:0)+y,y:((H=e.y)!==null&&H!==void 0?H:0)+B,width:($=e.width)!==null&&$!==void 0?$:Math.ceil(C),height:(q=e.height)!==null&&q!==void 0?q:Math.ceil(_)},c?(a.logger.debug("Document cloned, using foreign object rendering"),I=new a9(a,R),[4,I.render(f)]):[3,3];case 2:return S=fe.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+y+","+B+" with size "+C+"x"+_+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=iQ(a,f),v===N.styles.backgroundColor&&(N.styles.backgroundColor=Ns.TRANSPARENT),a.logger.debug("Starting renderer for element at "+R.x+","+R.y+" with size "+R.width+"x"+R.height),I=new n9(a,R),[4,I.render(N)];case 4:S=fe.sent(),fe.label=5;case 5:return(!((se=e.removeContainer)!==null&&se!==void 0)||se)&&(VI.destroy(w)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,S]}})})},f9=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?hc(t,getComputedStyle(r.documentElement).backgroundColor):Ns.TRANSPARENT,A=r.body?hc(t,getComputedStyle(r.body).backgroundColor):Ns.TRANSPARENT,i=typeof n=="string"?hc(t,n):n===null?Ns.TRANSPARENT:4294967295;return e===r.documentElement?MA(s)?MA(A)?i:A:s:i},g9=Object.defineProperty,Cf=Object.getOwnPropertySymbols,BQ=Object.prototype.hasOwnProperty,xQ=Object.prototype.propertyIsEnumerable,WI=(t,e,n)=>e in t?g9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p9=(t,e)=>{for(var n in e||(e={}))BQ.call(e,n)&&WI(t,n,e[n]);if(Cf)for(var n of Cf(e))xQ.call(e,n)&&WI(t,n,e[n]);return t},m9=(t,e)=>{var n={};for(var r in t)BQ.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Cf)for(var r of Cf(t))e.indexOf(r)<0&&xQ.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var so;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let p=0;p<this.size;p++)f.push(!1);for(let p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let p=1e9;for(let C=0;C<8;C++){this.applyMask(C),this.drawFormatBits(C);const _=this.getPenaltyScore();_<p&&(h=C,p=_),this.applyMask(C)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let p,C;for(p=d;;p++){const v=e.getNumDataCodewords(p,c)*8,R=o.getTotalBits(a,p);if(R<=v){C=R;break}if(p>=h)throw new RangeError("Data too long")}for(const v of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&C<=e.getNumDataCodewords(p,v)*8&&(c=v);let _=[];for(const v of a){r(v.mode.modeBits,4,_),r(v.numChars,v.mode.numCharCountBits(p),_);for(const R of v.getData())_.push(R)}A(_.length==C);const y=e.getNumDataCodewords(p,c)*8;A(_.length<=y),r(0,Math.min(4,y-_.length),_),r(0,(8-_.length%8)%8,_),A(_.length%8==0);for(let v=236;_.length<y;v^=253)r(v,8,_);let B=[];for(;B.length*8<_.length;)B.push(0);return _.forEach((v,R)=>B[R>>>3]|=v<<7-(R&7)),new e(p,c,B,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=a+h,p=c+d;0<=w&&w<this.size&&0<=p&&p<this.size&&this.setFunctionModule(w,p,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],w=Math.floor(e.getNumRawDataModules(c)/8),p=h-w%h,C=Math.floor(w/h);let _=[];const y=e.reedSolomonComputeDivisor(f);for(let v=0,R=0;v<h;v++){let S=a.slice(R,R+C-f+(v<p?0:1));R+=S.length;const N=e.reedSolomonComputeRemainder(S,y);v<p&&S.push(0),_.push(S.concat(N))}let B=[];for(let v=0;v<_[0].length;v++)_.forEach((R,S)=>{(v!=C-f||S>=p)&&B.push(R[v])});return A(B.length==w),B}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,C=(d+1&2)==0?this.size-1-h:h;!this.isFunction[C][w]&&c<a.length*8&&(this.modules[C][w]=s(a[c>>>3],7-(c&7)),c++)}}A(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let w=!1,p=0,C=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==w?(p++,p==5?a+=e.PENALTY_N1:p>5&&a++):(this.finderPenaltyAddHistory(p,C),w||(a+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),w=this.modules[f][_],p=1);a+=this.finderPenaltyTerminateAndCount(w,p,C)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,p=0,C=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==w?(p++,p==5?a+=e.PENALTY_N1:p>5&&a++):(this.finderPenaltyAddHistory(p,C),w||(a+=this.finderPenaltyCountPatterns(C)*e.PENALTY_N3),w=this.modules[_][f],p=1);a+=this.finderPenaltyTerminateAndCount(w,p,C)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const p=this.modules[f][w];p==this.modules[f][w+1]&&p==this.modules[f+1][w]&&p==this.modules[f+1][w+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((w,p)=>w+(p?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),a+=h*e.PENALTY_N4,A(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((w,p)=>d[p]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return A(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];A(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function s(a,c){return(a>>>c&1)!=0}function A(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(so||(so={}));(t=>{(e=>{const n=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(so||(so={}));(t=>{(e=>{const n=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(so||(so={}));var Wl=so;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var w9={L:Wl.QrCode.Ecc.LOW,M:Wl.QrCode.Ecc.MEDIUM,Q:Wl.QrCode.Ecc.QUARTILE,H:Wl.QrCode.Ecc.HIGH},v9=128,y9="L",B9="#FFFFFF",x9="#000000",C9=!1,CQ=4,_9=.1;function I9(t,e=0){const n=[];return t.forEach(function(r,s){let A=null;r.forEach(function(i,o){if(!i&&A!==null){n.push(`M${A+e} ${s+e}h${o-A}v1H${A+e}z`),A=null;return}if(o===r.length-1){if(!i)return;A===null?n.push(`M${o+e},${s+e} h1v1H${o+e}z`):n.push(`M${A+e},${s+e} h${o+1-A}v1H${A+e}z`);return}i&&A===null&&(A=o)})}),n.join("")}function E9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function b9(t,e,n,r){if(r==null)return null;const s=n?CQ:0,A=t.length+s*2,i=Math.floor(e*_9),o=A/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let w=Math.floor(d),p=Math.floor(h),C=Math.ceil(a+d-w),_=Math.ceil(c+h-p);f={x:w,y:p,w:C,h:_}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function T9(t){const e=t,{value:n,size:r=v9,level:s=y9,bgColor:A=B9,fgColor:i=x9,includeMargin:o=C9,imageSettings:a}=e,c=m9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Wl.QrCode.encodeText(n,w9[s]).getModules();const h=o?CQ:0,f=d.length+h*2,w=b9(d,r,o,a);let p=null;a!=null&&w!=null&&(w.excavation!=null&&(d=E9(d,w.excavation)),p=Ei.createElement("image",{xlinkHref:a.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const C=I9(d,h);return Ei.createElement("svg",p9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Ei.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Ei.createElement("path",{fill:i,d:C,shapeRendering:"crispEdges"}),p)}const F9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,requests:i,saveStaticData:o}=Zs(),{schedule:a,substitutions:c,saveScheduleData:d}=el(),h=Q.useRef(null),f=Q.useRef(null),[w,p]=Q.useState(new Date().toISOString().split("T")[0]),[C,_]=Q.useState(!1),[y,B]=Q.useState(!1),[v,R]=Q.useState(""),[S,N]=Q.useState(""),I=Q.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,requests:i,schedule:a,substitutions:c}),[t,e,n,r,s,A,i,a,c]),x=V=>{var L;const z=(L=V.target.files)==null?void 0:L[0];if(!z)return;const F=new FileReader;F.onload=async H=>{try{const $=JSON.parse(H.target.result);if($.teachers&&$.schedule){if(window.confirm("    . ?")){const q={...zt,...$,rooms:$.rooms||zt.rooms,classes:$.classes||[],schedule:$.schedule||[],teachers:$.teachers||[],subjects:$.subjects||[],substitutions:$.substitutions||[],requests:$.requests||[],settings:{...zt.settings,...$.settings}};await o(q),await d(q),alert("  !")}}else alert("  .")}catch{alert("  .")}},F.readAsText(z)},b=()=>{let V=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Un.forEach(H=>{V+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${H}</td></tr>`,[ce.First,ce.Second].forEach($=>{const q=n.filter(se=>se.shift===$);q.length!==0&&(V+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${$}</td></tr>`,V+='<tr><th class="header"></th>',As[$].forEach(se=>V+=`<th class="header">${se} </th>`),V+="</tr>",q.forEach(se=>{V+=`<tr><td class="class-cell">${se.name}</td>`,As[$].forEach(fe=>{const Ue=a.filter(te=>te.classId===se.id&&te.day===H&&te.shift===$&&te.period===fe);V+='<td style="height: 60px;">',Ue.forEach(te=>{const Ne=t.find(De=>De.id===te.subjectId),ze=e.find(De=>De.id===te.teacherId),Qe=r.find(De=>De.id===te.roomId),Se=Qe?Qe.name:te.roomId;V+=`<div style="background-color: ${(Ne==null?void 0:Ne.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(Ne==null?void 0:Ne.name)||""} ${te.direction||""}</div>
                                <div class="meta">${(ze==null?void 0:ze.name)||""} ${Se?`(. ${Se})`:""}</div>
                            </div>`}),V+="</td>"}),V+="</tr>"}))})}),V+="</table></body></html>";const z=new Blob([V],{type:"application/vnd.ms-excel"}),F=URL.createObjectURL(z),L=document.createElement("a");L.href=F,L.download="_22.xls",document.body.appendChild(L),L.click(),document.body.removeChild(L)},k=()=>{let V=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ce.First,ce.Second].forEach(H=>{const $=As[H];V+="<table>",V+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Un.length*$.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,V+="<tr>",Un.forEach(q=>{V+=`<th colspan="${$.length}" class="header" style="border: 2px solid #000;">${q}</th>`}),V+="</tr>",V+="<tr>",Un.forEach(()=>{$.forEach(q=>V+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),V+="</tr>",V+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${H}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Un.forEach(()=>{$.forEach(q=>V+=`<th class="header" style="width: 40px;">${q}</th>`)}),V+="</tr>",t.forEach(q=>{const se=e.filter(Ue=>Ue.subjectIds.includes(q.id));if(se.length===0)return;const fe=q.color||"#ffffff";se.forEach((Ue,te)=>{V+="<tr>",te===0&&(V+=`<td rowspan="${se.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${fe};">${q.name}</td>`),V+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${Ue.name}</td>`,Un.forEach(Ne=>{$.forEach(ze=>{const Qe=a.find(Se=>Se.teacherId===Ue.id&&Se.subjectId===q.id&&Se.day===Ne&&Se.period===ze&&Se.shift===H);if(Qe){const Se=n.find(nn=>nn.id===Qe.classId),De=r.find(nn=>nn.id===Qe.roomId),be=De?De.name:Qe.roomId,ke=be?`<sub>${be}</sub>`:"",tt=Qe.direction?` <span style="font-size:9px">(${Qe.direction})</span>`:"",qe=q.color||"#ffffff";V+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${qe};">${Se?Se.name:""}${tt}${ke}</td>`}else V+='<td style="border: 1px solid #000;"></td>'})}),V+="</tr>"}),V+=`<tr><td colspan="${2+Un.length*$.length}" style="height: 2px; background-color: #000;"></td></tr>`}),V+="</table><br/><br/>"}),V+="</body></html>";const z=new Blob([V],{type:"application/vnd.ms-excel"}),F=URL.createObjectURL(z),L=document.createElement("a");L.href=F,L.download="_.xls",document.body.appendChild(L),L.click(),document.body.removeChild(L)},U=()=>{let V=`							
`;Un.forEach(z=>{[ce.First,ce.Second].forEach(F=>{n.filter(H=>H.shift===F).forEach(H=>{As[F].forEach($=>{a.filter(se=>se.classId===H.id&&se.day===z&&se.shift===F&&se.period===$).forEach(se=>{const fe=t.find(ze=>ze.id===se.subjectId),Ue=e.find(ze=>ze.id===se.teacherId),te=r.find(ze=>ze.id===se.roomId),Ne=te?te.name:se.roomId||"";V+=`${z}	${F}	${H.name}	${$}	${(fe==null?void 0:fe.name)||""}	${(Ue==null?void 0:Ue.name)||""}	${Ne}	${se.direction||""}
`})})})})}),navigator.clipboard.writeText(V).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},D=async()=>{if(f.current){_(!0);try{const V=await d9(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),z=document.createElement("a");z.download=`_${w}.png`,z.href=V.toDataURL("image/png"),z.click()}catch(V){console.error(V),alert("   ")}_(!1)}},T=Q.useMemo(()=>c.filter(V=>V.date===w),[c,w]),Ee=V=>{const z=T.filter(F=>{const L=a.find(H=>H.id===F.scheduleItemId);return L&&L.shift===V}).filter(F=>F.replacementTeacherId!=="conducted");return z.length===0?null:l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:V}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:z.map(F=>{var tt;const L=a.find(qe=>qe.id===F.scheduleItemId);if(!L)return null;const H=n.find(qe=>qe.id===L.classId),$=t.find(qe=>qe.id===L.subjectId),q=e.find(qe=>qe.id===F.originalTeacherId),se=F.replacementRoomId,fe=L.roomId?r.find(qe=>qe.id===L.roomId):null,Ue=fe?fe.name:L.roomId||"",te=se?r.find(qe=>qe.id===se):null,Ne=te?te.name:se||"",ze=F.replacementTeacherId==="cancelled",Qe=ze?{name:" "}:e.find(qe=>qe.id===F.replacementTeacherId),Se=(tt=q==null?void 0:q.absenceReasons)==null?void 0:tt[w],De=F.lessonAbsenceReason,be=De===" "?De:Se===" "?Se:"",ke=F.replacementTeacherId===F.originalTeacherId&&se;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:L.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:H==null?void 0:H.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:$==null?void 0:$.name}),L.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:L.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!ke&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-red-400 line-through text-sm font-medium decoration-red-200",children:q==null?void 0:q.name}),be&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:be})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${ze?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:ke?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:q==null?void 0:q.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:Qe==null?void 0:Qe.name}),F.isMerger&&l.jsx("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:""})]})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono ${se?"font-black text-indigo-600":"text-slate-500"}`,children:se&&se!==L.roomId?l.jsxs("span",{children:[l.jsx("span",{className:"text-slate-400 line-through mr-1 decoration-slate-300 decoration-2 opacity-70 text-xs",children:Ue}),l.jsxs("span",{className:"text-indigo-600 font-black text-sm",children:[" ",Ne]})]}):Ue})]},F.id)})})]})]})},$e=async()=>{const V=Math.random().toString(36).substr(2,9);await _A.setPublicData(V,I),await o({settings:{...s,publicScheduleId:V}});const z=`${window.location.origin}${window.location.pathname}#/public?id=${V}`;R(z),N(V),B(!0)},Oe=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await _A.deletePublicData(s.publicScheduleId),await o({settings:{...s,publicScheduleId:null}}),alert("  ."),R(""),N(""))};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>_A.exportJson(I),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:x,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var V;return(V=h.current)==null?void 0:V.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(W,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(W,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:w,onChange:V=>p(V.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:D,disabled:C,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:C?l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Download",size:20}),"  PNG"]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-center",children:l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:"   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(w).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),T.length===0?l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}):l.jsxs(l.Fragment,{children:[Ee(ce.First),Ee(ce.Second)]}),l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:b,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:k,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:U,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Clipboard",size:20}),"   Google Sheets"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(W,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Oe,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:$e,disabled:C,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(W,{name:"Share2",size:20}),"  "]})]}),l.jsx(Gr,{isOpen:y,onClose:()=>B(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),v&&l.jsxs(l.Fragment,{children:[l.jsx(T9,{value:v,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:v}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(v),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Copy",size:16}),"  "]})]})]})})]})},U9=()=>{var w;const{subjects:t,teachers:e,classes:n}=Zs(),{schedule:r,substitutions:s}=el(),[A,i]=Q.useState("load"),[o,a]=Q.useState(((w=n[0])==null?void 0:w.id)||""),c=Q.useMemo(()=>e.map(C=>{const _=r.filter(I=>I.teacherId===C.id),y=_.length,B=y*4,v=s.filter(I=>I.replacementTeacherId===C.id).length,R=s.filter(I=>I.originalTeacherId===C.id).length,S=B+v-R,N={};return _.forEach(I=>{const x=t.find(b=>b.id===I.subjectId);x&&(N[x.name]=(N[x.name]||0)+1)}),{id:C.id,name:C.name,weeklyHours:y,subsTaken:v,subsMissed:R,actualHours:S,subjectBreakdown:N}}).sort((C,_)=>_.actualHours-C.actualHours),[e,r,s,t]),d=Q.useMemo(()=>o?Un.map(p=>{const _=r.filter(y=>y.classId===o&&y.day===p).reduce((y,B)=>{const v=t.find(R=>R.id===B.subjectId);return y+((v==null?void 0:v.difficulty)||5)},0);return{label:p,value:_}}):[],[r,t,o]),h=Q.useMemo(()=>{const p=e.map(_=>({name:_.name,count:s.filter(y=>y.replacementTeacherId===_.id).length})).sort((_,y)=>y.count-_.count).slice(0,5),C=e.map(_=>({name:_.name,count:_.unavailableDates.length})).sort((_,y)=>y.count-_.count).slice(0,5);return{heroes:p,absentees:C}},[e,s]),f=()=>{let p="";A==="load"?p=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+c.map(y=>`"${y.name}",${y.weeklyHours},${y.subsTaken},${y.subsMissed},${y.actualHours},"${Object.entries(y.subjectBreakdown).map(([B,v])=>B+": "+v).join(", ")}"`).join(`
`):A==="sanpin"&&(p=`Day,Score
`+d.map(y=>`${y.label},${y.value}`).join(`
`));const C=new Blob([`\uFEFF${p}`],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.href=URL.createObjectURL(C),_.download=`report_${A}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(W,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("button",{onClick:f,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2",children:[l.jsx(W,{name:"FileSpreadsheet",size:16}),"  CSV"]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>i("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${A==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${A==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>i("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${A==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),A==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:c.map(p=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:p.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:p.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",p.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",p.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:p.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(p.subjectBreakdown).map(([C,_])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[C,": ",_]},C))})})]},p.id))})]})}),A==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:p=>a(p.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(p=>l.jsx("option",{value:p.id,children:p.name},p.id))})]}),l.jsx(Vp,{items:d,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),A==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Vp,{items:h.heroes.map(p=>({label:p.name,value:p.count})),max:Math.max(...h.heroes.map(p=>p.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(W,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Vp,{items:h.absentees.map(p=>({label:p.name,value:p.count})),max:Math.max(...h.absentees.map(p=>p.count),1),barClassName:"bg-red-500"})]})]})]})},k9=()=>{const{data:t,saveData:e}=UK(),{user:n,role:r}=po(),s=t.requests||[],[A,i]=Q.useState("my"),[o,a]=Q.useState("all"),[c,d]=Q.useState("general"),[h,f]=Q.useState(""),[w,p]=Q.useState(""),[C,_]=Q.useState(""),[y,B]=Q.useState(null),[v,R]=Q.useState(""),[S,N]=Q.useState("new"),[I,x]=Q.useState(!1),b=Q.useMemo(()=>{let V=s;return r==="admin"?(o!=="all"&&(V=V.filter(z=>z.status===o)),V.sort((z,F)=>new Date(F.date).getTime()-new Date(z.date).getTime())):n?V.filter(z=>z.authorId===n.uid).sort((z,F)=>new Date(F.date).getTime()-new Date(z.date).getTime()):[]},[s,n,r,o]),k=async()=>{if(!h.trim()||!w.trim())return alert("   ");const V=C.trim(),z=r==="admin",L=[{id:Math.random().toString(36).substr(2,9),authorId:(n==null?void 0:n.uid)||"unknown",authorName:V||(z?"":""),date:new Date().toISOString(),type:c,title:h,message:w,status:"new",isAnonymous:!V&&!z,createdByAdmin:z},...s];await e({requests:L}),f(""),p(""),_(""),d("general"),i("my"),alert("  !")},U=async()=>{if(!y)return;const V=s.map(z=>z.id===y.id?{...z,status:S,adminComment:v}:z);await e({requests:V}),x(!1),B(null)},D=async()=>{if(!y||!window.confirm("     ?    ."))return;const V=s.filter(z=>z.id!==y.id);await e({requests:V}),x(!1),B(null)},T=V=>{B(V),N(V.status),R(V.adminComment||""),x(!0)},Ee=V=>{switch(V){case"new":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"in_progress":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"resolved":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"rejected":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-slate-100 text-slate-700"}},$e=V=>{switch(V){case"new":return"";case"in_progress":return" ";case"resolved":return"";case"rejected":return"";default:return V}},Oe=V=>{switch(V){case"schedule":return"Calendar";case"room":return"DoorOpen";default:return"MessageSquare"}};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsx("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(W,{name:"Inbox",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>i("my"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="my"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:r==="admin"?" ":" "}),l.jsx("button",{onClick:()=>i("create"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${A==="create"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]})}),A==="create"&&l.jsxs("div",{className:"max-w-2xl mx-auto bg-white dark:bg-dark-800 p-8 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:" "}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:" "}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("button",{onClick:()=>d("general"),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${c==="general"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:"MessageSquare",size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]}),l.jsxs("button",{onClick:()=>d("schedule"),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${c==="schedule"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:"Calendar",size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]}),l.jsxs("button",{onClick:()=>d("room"),className:`p-4 rounded-xl border flex flex-col items-center gap-2 transition-all ${c==="room"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:"DoorOpen",size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:"  ()"}),l.jsx("input",{value:C,onChange:V=>_(V.target.value),placeholder:r==="admin"?"":" ,   ",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:""}),l.jsx("input",{value:h,onChange:V=>f(V.target.value),placeholder:"  ",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:""}),l.jsx("textarea",{value:w,onChange:V=>p(V.target.value),placeholder:" ...",rows:5,className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white resize-y"})]}),l.jsxs("button",{onClick:k,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2",children:[l.jsx(W,{name:"Send",size:20})," "]})]})]}),A==="my"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[r==="admin"&&l.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 no-scrollbar",children:[l.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="all"?"bg-slate-800 text-white dark:bg-white dark:text-slate-900":"bg-white dark:bg-slate-700 text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>a("new"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="new"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 border border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>a("in_progress"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="in_progress"?"bg-amber-500 text-white shadow-md shadow-amber-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-amber-600 dark:text-amber-400 border border-slate-200 dark:border-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>a("resolved"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="resolved"?"bg-emerald-600 text-white shadow-md shadow-emerald-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-emerald-600 dark:text-emerald-400 border border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>a("rejected"),className:`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-colors ${o==="rejected"?"bg-red-600 text-white shadow-md shadow-red-200 dark:shadow-none":"bg-white dark:bg-slate-700 text-red-600 dark:text-red-400 border border-slate-200 dark:border-slate-600"}`,children:""})]}),b.length===0?l.jsxs("div",{className:"text-center py-12 text-slate-400",children:[l.jsx(W,{name:"Inbox",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:r==="admin"?"    ":"     "})]}):b.map(V=>{var z;return l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-sm ${V.createdByAdmin?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:V.createdByAdmin?l.jsx(W,{name:"Settings",size:20}):V.isAnonymous?"?":(z=V.authorName)==null?void 0:z[0]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:V.authorName||""}),V.createdByAdmin&&l.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 px-1.5 py-0.5 rounded text-[10px] font-black uppercase tracking-wider border border-purple-200 dark:border-purple-800",children:""})]}),l.jsx("div",{className:"text-xs text-slate-400",children:new Date(V.date).toLocaleString("ru-RU")})]})]}),l.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold uppercase tracking-wider border ${Ee(V.status).replace("bg-","border-").replace("text-","text-").split(" ")[0]+"-200"} ${Ee(V.status)}`,children:$e(V.status)})]}),l.jsxs("div",{className:"mb-4 pl-12 md:pl-14",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsxs("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide flex items-center gap-1 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg",children:[l.jsx(W,{name:Oe(V.type),size:12})," ",V.type==="schedule"?"":V.type==="room"?"":""]})}),l.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:V.title}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/30 p-3 rounded-xl border border-slate-100 dark:border-slate-700/50",children:V.message})]}),V.adminComment&&l.jsxs("div",{className:"mb-4 ml-12 md:ml-14 bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-xl border border-indigo-100 dark:border-indigo-900",children:[l.jsxs("div",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 mb-1 flex items-center gap-1",children:[l.jsx(W,{name:"User",size:12})," ",r==="admin"?" :":" :"]}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:V.adminComment})]}),r==="admin"&&l.jsx("div",{className:"flex justify-end pt-2 border-t border-slate-50 dark:border-slate-700 mt-4",children:l.jsxs("button",{onClick:()=>T(V),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(W,{name:"Edit2",size:16})," "]})})]},V.id)})]}),l.jsx(Gr,{isOpen:I,onClose:()=>x(!1),title:" ",children:y&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-xs font-bold uppercase text-slate-400",children:y.authorName||""}),y.createdByAdmin&&l.jsx("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-[10px] font-bold",children:""})]}),l.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:y.title}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:y.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:" "}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>N("new"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${S==="new"?"bg-blue-50 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>N("in_progress"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${S==="in_progress"?"bg-amber-50 border-amber-500 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"border-slate-200 dark:border-slate-600"}`,children:" "}),l.jsx("button",{onClick:()=>N("resolved"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${S==="resolved"?"bg-emerald-50 border-emerald-500 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"border-slate-200 dark:border-slate-600"}`,children:""}),l.jsx("button",{onClick:()=>N("rejected"),className:`p-2 rounded-lg text-xs font-bold border transition-all ${S==="rejected"?"bg-red-50 border-red-500 text-red-700 dark:bg-red-900/30 dark:text-red-400":"border-slate-200 dark:border-slate-600"}`,children:""})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2",children:" "}),l.jsx("textarea",{value:v,onChange:V=>R(V.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",rows:3,placeholder:"   ..."})]}),l.jsxs("div",{className:"flex justify-between items-center pt-2",children:[l.jsxs("button",{onClick:D,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(W,{name:"Trash2",size:18})," "]}),l.jsxs("button",{onClick:U,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(W,{name:"Save",size:18})," "]})]})]})})]})},Q9=()=>{const{setGuestRole:t,role:e,loading:n}=po(),r=hu(),[s,A]=Q.useState("select"),[i,o]=Q.useState(""),[a,c]=Q.useState(""),[d,h]=Q.useState(""),[f,w]=Q.useState(!1);Q.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const p=async _=>{if(_.preventDefault(),h(""),w(!0),!Jt){h("Firebase .  ."),w(!1);return}try{let y=i;s==="teacher"&&(y="teacher@gymnasium22.com"),await Jt.signInWithEmailAndPassword(y,a)}catch(y){console.error("Firebase Auth Error:",y);const B=y.code;let v="   .";switch(B){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":v="   .     .";break;case"auth/invalid-email":v="  email .";break;case"auth/too-many-requests":v="   .  .";break;default:v=" .       Firebase."}h(v)}finally{w(!1)}},C=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(W,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:C,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(W,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(W,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(W,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:p,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(W,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:_=>o(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:_=>c(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx(W,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},lA=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:s}=po();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(W,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(Hh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Hh,{to:"/login",replace:!0})},S9=()=>{const{role:t,loading:e}=po();return e?null:t==="guest"?l.jsx(Hh,{to:"/schedule",replace:!0}):l.jsx(Hh,{to:"/dashboard",replace:!0})},R9=()=>{const[t,e]=Q.useState(!1),[n,r]=Q.useState(localStorage.getItem("theme")||"light"),{isLoading:s}=Zs(),{logout:A,role:i,user:o}=po(),[a,c]=Q.useState(null),[d,h]=Q.useState(!1),[f,w]=Q.useState(!1);Q.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),Q.useEffect(()=>{const y=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;h(y);const B=v=>{v.preventDefault(),c(v)};return window.addEventListener("beforeinstallprompt",B),()=>window.removeEventListener("beforeinstallprompt",B)},[]);const p=async()=>{if(d)w(!0);else if(a){a.prompt();const{outcome:y}=await a.userChoice;y==="accepted"&&c(null)}};if(s)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(W,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const _=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/requests",label:"",icon:"MessageSquare",roles:["admin","teacher"]},{to:"/schedule",label:"",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(y=>y.roles.includes(i||""));return l.jsxs("div",{className:"flex h-[100dvh] bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx(W,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0 custom-scrollbar overflow-y-auto",children:_.map(y=>l.jsxs(CN,{to:y.to,onClick:()=>e(!1),className:({isActive:B})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${B?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(W,{name:y.icon,size:20}),y.label]},y.to))}),l.jsx(SK,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2 safe-pb",children:[(a||d)&&l.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-xs font-bold text-indigo-600 dark:text-indigo-400 w-full hover:bg-indigo-50 dark:hover:bg-indigo-900/20 p-2 rounded-lg transition-colors mb-2",children:[l.jsx(W,{name:"Download",size:16}),"  "]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:A,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(W,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors p-1.5",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx(W,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx(W,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 custom-scrollbar",children:l.jsx(aN,{})})]}),l.jsx(Gr,{isOpen:f,onClose:()=>w(!1),title:"  iPhone",children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"    iPhone:"}),l.jsxs("div",{className:"space-y-2 text-sm font-medium text-slate-800 dark:text-white bg-slate-100 dark:bg-slate-700 p-4 rounded-xl",children:[l.jsxs("p",{className:"flex items-center justify-center gap-2",children:['1.   "" ',l.jsx(W,{name:"Share2",size:16})]}),l.jsx("p",{children:'2.     "  "'}),l.jsx("p",{children:'3.  ""   '})]}),l.jsx("button",{onClick:()=>w(!1),className:"w-full py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})]})})]})},N9=()=>{const[t,e]=Q.useState(null),[n,r]=Q.useState(!0),[s]=EN(),A=s.get("id");return Q.useEffect(()=>{A?(r(!0),_A.getPublicData(A).then(i=>{const o={...zt,...i,settings:{...zt.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[A]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(W,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(lk,{initialData:t,children:l.jsx(dk,{children:l.jsx(hk,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(W,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(mk,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(W,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function P9(){return l.jsx(FK,{children:l.jsx(lk,{children:l.jsx(dk,{children:l.jsx(hk,{children:l.jsx(vN,{children:l.jsxs(cN,{children:[l.jsx(ir,{path:"/login",element:l.jsx(Q9,{})}),l.jsxs(ir,{path:"/",element:l.jsx(lA,{children:l.jsx(R9,{})}),children:[l.jsx(ir,{index:!0,element:l.jsx(S9,{})}),l.jsx(ir,{path:"dashboard",element:l.jsx(lA,{allowedRoles:["admin","teacher"],children:l.jsx(RK,{})})}),l.jsx(ir,{path:"requests",element:l.jsx(lA,{allowedRoles:["admin","teacher"],children:l.jsx(k9,{})})}),l.jsx(ir,{path:"schedule",element:l.jsx(D9,{})}),l.jsx(ir,{path:"substitutions",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(VK,{})})}),l.jsx(ir,{path:"directory",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(jK,{})})}),l.jsx(ir,{path:"admin",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(HK,{})})}),l.jsx(ir,{path:"reports",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(U9,{})})}),l.jsx(ir,{path:"export",element:l.jsx(lA,{allowedRoles:["admin"],children:l.jsx(F9,{})})})]}),l.jsx(ir,{path:"/public",element:l.jsx(N9,{})})]})})})})})})}const D9=()=>{const{role:t}=po();return l.jsx(mk,{readOnly:t!=="admin"})};cm.createRoot(document.getElementById("root")).render(l.jsx(Ei.StrictMode,{children:l.jsx(P9,{})}));
