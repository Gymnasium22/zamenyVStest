function WS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const A in r)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(r,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>r[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))r(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(A){if(A.ep)return;A.ep=!0;const s=n(A);fetch(A.href,s)}})();function GI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zI={exports:{}},yf={},WI={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ru=Symbol.for("react.element"),$S=Symbol.for("react.portal"),qS=Symbol.for("react.fragment"),JS=Symbol.for("react.strict_mode"),XS=Symbol.for("react.profiler"),YS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),ek=Symbol.for("react.forward_ref"),tk=Symbol.for("react.suspense"),nk=Symbol.for("react.memo"),rk=Symbol.for("react.lazy"),NB=Symbol.iterator;function Ak(t){return t===null||typeof t!="object"?null:(t=NB&&t[NB]||t["@@iterator"],typeof t=="function"?t:null)}var $I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qI=Object.assign,JI={};function Fa(t,e,n){this.props=t,this.context=e,this.refs=JI,this.updater=n||$I}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XI(){}XI.prototype=Fa.prototype;function lw(t,e,n){this.props=t,this.context=e,this.refs=JI,this.updater=n||$I}var cw=lw.prototype=new XI;cw.constructor=lw;qI(cw,Fa.prototype);cw.isPureReactComponent=!0;var PB=Array.isArray,YI=Object.prototype.hasOwnProperty,uw={current:null},ZI={key:!0,ref:!0,__self:!0,__source:!0};function eE(t,e,n){var r,A={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)YI.call(e,r)&&!ZI.hasOwnProperty(r)&&(A[r]=e[r]);var o=arguments.length-2;if(o===1)A.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];A.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)A[r]===void 0&&(A[r]=o[r]);return{$$typeof:ru,type:t,key:s,ref:i,props:A,_owner:uw.current}}function sk(t,e){return{$$typeof:ru,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dw(t){return typeof t=="object"&&t!==null&&t.$$typeof===ru}function ik(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var DB=/\/+/g;function Kg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ik(""+t.key):e.toString(36)}function Vd(t,e,n,r,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ru:case $S:i=!0}}if(i)return i=t,A=A(i),t=r===""?"."+Kg(i,0):r,PB(A)?(n="",t!=null&&(n=t.replace(DB,"$&/")+"/"),Vd(A,e,n,"",function(l){return l})):A!=null&&(dw(A)&&(A=sk(A,n+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(DB,"$&/")+"/")+t)),e.push(A)),1;if(i=0,r=r===""?".":r+":",PB(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+Kg(s,o);i+=Vd(s,e,n,a,A)}else if(a=Ak(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+Kg(s,o++),i+=Vd(s,e,n,a,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Wu(t,e,n){if(t==null)return t;var r=[],A=0;return Vd(t,r,"","",function(s){return e.call(n,s,A++)}),r}function ok(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},Hd={transition:null},ak={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:Hd,ReactCurrentOwner:uw};function tE(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:Wu,forEach:function(t,e,n){Wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wu(t,function(){e++}),e},toArray:function(t){return Wu(t,function(e){return e})||[]},only:function(t){if(!dw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Fa;De.Fragment=qS;De.Profiler=XS;De.PureComponent=lw;De.StrictMode=JS;De.Suspense=tk;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ak;De.act=tE;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=uw.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)YI.call(e,a)&&!ZI.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}return{$$typeof:ru,type:t.type,key:A,ref:s,props:r,_owner:i}};De.createContext=function(t){return t={$$typeof:ZS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YS,_context:t},t.Consumer=t};De.createElement=eE;De.createFactory=function(t){var e=eE.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:ek,render:t}};De.isValidElement=dw;De.lazy=function(t){return{$$typeof:rk,_payload:{_status:-1,_result:t},_init:ok}};De.memo=function(t,e){return{$$typeof:nk,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Hd.transition;Hd.transition={};try{t()}finally{Hd.transition=e}};De.unstable_act=tE;De.useCallback=function(t,e){return Ln.current.useCallback(t,e)};De.useContext=function(t){return Ln.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};De.useEffect=function(t,e){return Ln.current.useEffect(t,e)};De.useId=function(){return Ln.current.useId()};De.useImperativeHandle=function(t,e,n){return Ln.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return Ln.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Ln.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Ln.current.useMemo(t,e)};De.useReducer=function(t,e,n){return Ln.current.useReducer(t,e,n)};De.useRef=function(t){return Ln.current.useRef(t)};De.useState=function(t){return Ln.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return Ln.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return Ln.current.useTransition()};De.version="18.3.1";WI.exports=De;var R=WI.exports;const gi=GI(R),lk=WS({__proto__:null,default:gi},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck=R,uk=Symbol.for("react.element"),dk=Symbol.for("react.fragment"),hk=Object.prototype.hasOwnProperty,fk=ck.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gk={key:!0,ref:!0,__self:!0,__source:!0};function nE(t,e,n){var r,A={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)hk.call(e,r)&&!gk.hasOwnProperty(r)&&(A[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)A[r]===void 0&&(A[r]=e[r]);return{$$typeof:uk,type:t,key:s,ref:i,props:A,_owner:fk.current}}yf.Fragment=dk;yf.jsx=nE;yf.jsxs=nE;zI.exports=yf;var c=zI.exports,Am={},rE={exports:{}},ar={},AE={exports:{}},sE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,F){var D=G.length;G.push(F);e:for(;0<D;){var V=D-1>>>1,q=G[V];if(0<A(q,F))G[V]=F,G[D]=q,D=V;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var F=G[0],D=G.pop();if(D!==F){G[0]=D;e:for(var V=0,q=G.length,W=q>>>1;V<W;){var ge=2*(V+1)-1,he=G[ge],Ee=ge+1,xe=G[Ee];if(0>A(he,D))Ee<q&&0>A(xe,he)?(G[V]=xe,G[Ee]=D,V=Ee):(G[V]=he,G[ge]=D,V=ge);else if(Ee<q&&0>A(xe,D))G[V]=xe,G[Ee]=D,V=Ee;else break e}}return F}function A(G,F){var D=G.sortIndex-F.sortIndex;return D!==0?D:G.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],l=[],d=1,h=null,f=3,w=!1,m=!1,y=!1,I=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(G){for(var F=n(l);F!==null;){if(F.callback===null)r(l);else if(F.startTime<=G)r(l),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(l)}}function k(G){if(y=!1,_(G),!m)if(n(a)!==null)m=!0,ee(U);else{var F=n(l);F!==null&&Te(k,F.startTime-G)}}function U(G,F){m=!1,y&&(y=!1,B(x),x=-1),w=!0;var D=f;try{for(_(F),h=n(a);h!==null&&(!(h.expirationTime>F)||G&&!S());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var q=V(h.expirationTime<=F);F=t.unstable_now(),typeof q=="function"?h.callback=q:h===n(a)&&r(a),_(F)}else r(a);h=n(a)}if(h!==null)var W=!0;else{var ge=n(l);ge!==null&&Te(k,ge.startTime-F),W=!1}return W}finally{h=null,f=D,w=!1}}var N=!1,C=null,x=-1,b=5,Q=-1;function S(){return!(t.unstable_now()-Q<b)}function P(){if(C!==null){var G=t.unstable_now();Q=G;var F=!0;try{F=C(!0,G)}finally{F?T():(N=!1,C=null)}}else N=!1}var T;if(typeof v=="function")T=function(){v(P)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,We=Fe.port2;Fe.port1.onmessage=P,T=function(){We.postMessage(null)}}else T=function(){I(P,0)};function ee(G){C=G,N||(N=!0,T())}function Te(G,F){x=I(function(){G(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){m||w||(m=!0,ee(U))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(G){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var D=f;f=F;try{return G()}finally{f=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,F){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var D=f;f=G;try{return F()}finally{f=D}},t.unstable_scheduleCallback=function(G,F,D){var V=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?V+D:V):D=V,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=D+q,G={id:d++,callback:F,priorityLevel:G,startTime:D,expirationTime:q,sortIndex:-1},D>V?(G.sortIndex=D,e(l,G),n(a)===null&&G===n(l)&&(y?(B(x),x=-1):y=!0,Te(k,D-V))):(G.sortIndex=q,e(a,G),m||w||(m=!0,ee(U))),G},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(G){var F=f;return function(){var D=f;f=F;try{return G.apply(this,arguments)}finally{f=D}}}})(sE);AE.exports=sE;var pk=AE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk=R,ir=pk;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iE=new Set,dc={};function qi(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(dc[t]=e,t=0;t<e.length;t++)iE.add(e[t])}var _A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sm=Object.prototype.hasOwnProperty,wk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LB={},OB={};function vk(t){return sm.call(OB,t)?!0:sm.call(LB,t)?!1:wk.test(t)?OB[t]=!0:(LB[t]=!0,!1)}function yk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bk(t,e,n,r){if(e===null||typeof e>"u"||yk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=A,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var hw=/[\-:]([a-z])/g;function fw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hw,fw);gn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hw,fw);gn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hw,fw);gn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function gw(t,e,n,r){var A=gn.hasOwnProperty(e)?gn[e]:null;(A!==null?A.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bk(e,n,A,r)&&(n=null),r||A===null?vk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):A.mustUseProperty?t[A.propertyName]=n===null?A.type===3?!1:"":n:(e=A.attributeName,r=A.attributeNamespace,n===null?t.removeAttribute(e):(A=A.type,n=A===3||A===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var SA=mk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$u=Symbol.for("react.element"),Uo=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),pw=Symbol.for("react.strict_mode"),im=Symbol.for("react.profiler"),oE=Symbol.for("react.provider"),aE=Symbol.for("react.context"),mw=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),ww=Symbol.for("react.memo"),JA=Symbol.for("react.lazy"),lE=Symbol.for("react.offscreen"),MB=Symbol.iterator;function Al(t){return t===null||typeof t!="object"?null:(t=MB&&t[MB]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,Gg;function Cl(t){if(Gg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gg=e&&e[1]||""}return`
`+Gg+t}var zg=!1;function Wg(t,e){if(!t||zg)return"";zg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var A=l.stack.split(`
`),s=r.stack.split(`
`),i=A.length-1,o=s.length-1;1<=i&&0<=o&&A[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(A[i]!==s[o]){if(i!==1||o!==1)do if(i--,o--,0>o||A[i]!==s[o]){var a=`
`+A[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{zg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Cl(t):""}function xk(t){switch(t.tag){case 5:return Cl(t.type);case 16:return Cl("Lazy");case 13:return Cl("Suspense");case 19:return Cl("SuspenseList");case 0:case 2:case 15:return t=Wg(t.type,!1),t;case 11:return t=Wg(t.type.render,!1),t;case 1:return t=Wg(t.type,!0),t;default:return""}}function lm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qo:return"Fragment";case Uo:return"Portal";case im:return"Profiler";case pw:return"StrictMode";case om:return"Suspense";case am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aE:return(t.displayName||"Context")+".Consumer";case oE:return(t._context.displayName||"Context")+".Provider";case mw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ww:return e=t.displayName||null,e!==null?e:lm(t.type)||"Memo";case JA:e=t._payload,t=t._init;try{return lm(t(e))}catch{}}return null}function _k(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lm(e);case 8:return e===pw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ck(t){var e=cE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var A=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qu(t){t._valueTracker||(t._valueTracker=Ck(t))}function uE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ph(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cm(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Is(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dE(t,e){e=e.checked,e!=null&&gw(t,"checked",e,!1)}function um(t,e){dE(t,e);var n=Is(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&dm(t,e.type,Is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dm(t,e,n){(e!=="number"||ph(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Il=Array.isArray;function Ko(t,e,n,r){if(t=t.options,e){e={};for(var A=0;A<n.length;A++)e["$"+n[A]]=!0;for(n=0;n<t.length;n++)A=e.hasOwnProperty("$"+t[n].value),t[n].selected!==A&&(t[n].selected=A),A&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Is(n),e=null,A=0;A<t.length;A++){if(t[A].value===n){t[A].selected=!0,r&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function hm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Il(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Is(n)}}function hE(t,e){var n=Is(e.value),r=Is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function KB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ju,gE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,A){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ju=Ju||document.createElement("div"),Ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ik=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(t){Ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hl[e]=Hl[t]})});function pE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hl.hasOwnProperty(t)&&Hl[t]?(""+e).trim():e+"px"}function mE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,A=pE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,A):t[n]=A}}var Ek=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gm(t,e){if(e){if(Ek[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function vw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wm=null,Go=null,zo=null;function GB(t){if(t=iu(t)){if(typeof wm!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=If(e),wm(t.stateNode,t.type,e))}}function wE(t){Go?zo?zo.push(t):zo=[t]:Go=t}function vE(){if(Go){var t=Go,e=zo;if(zo=Go=null,GB(t),e)for(t=0;t<e.length;t++)GB(e[t])}}function yE(t,e){return t(e)}function BE(){}var $g=!1;function xE(t,e,n){if($g)return t(e,n);$g=!0;try{return yE(t,e,n)}finally{$g=!1,(Go!==null||zo!==null)&&(BE(),vE())}}function fc(t,e){var n=t.stateNode;if(n===null)return null;var r=If(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var vm=!1;if(_A)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){vm=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{vm=!1}function bk(t,e,n,r,A,s,i,o,a){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(d){this.onError(d)}}var jl=!1,mh=null,wh=!1,ym=null,Tk={onError:function(t){jl=!0,mh=t}};function Fk(t,e,n,r,A,s,i,o,a){jl=!1,mh=null,bk.apply(Tk,arguments)}function Uk(t,e,n,r,A,s,i,o,a){if(Fk.apply(this,arguments),jl){if(jl){var l=mh;jl=!1,mh=null}else throw Error(Z(198));wh||(wh=!0,ym=l)}}function Ji(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _E(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zB(t){if(Ji(t)!==t)throw Error(Z(188))}function Qk(t){var e=t.alternate;if(!e){if(e=Ji(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var A=n.return;if(A===null)break;var s=A.alternate;if(s===null){if(r=A.return,r!==null){n=r;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===n)return zB(A),t;if(s===r)return zB(A),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=A,r=s;else{for(var i=!1,o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function CE(t){return t=Qk(t),t!==null?IE(t):null}function IE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IE(t);if(e!==null)return e;t=t.sibling}return null}var EE=ir.unstable_scheduleCallback,WB=ir.unstable_cancelCallback,Sk=ir.unstable_shouldYield,kk=ir.unstable_requestPaint,Lt=ir.unstable_now,Rk=ir.unstable_getCurrentPriorityLevel,yw=ir.unstable_ImmediatePriority,bE=ir.unstable_UserBlockingPriority,vh=ir.unstable_NormalPriority,Nk=ir.unstable_LowPriority,TE=ir.unstable_IdlePriority,Bf=null,qr=null;function Pk(t){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(Bf,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Ok,Dk=Math.log,Lk=Math.LN2;function Ok(t){return t>>>=0,t===0?32:31-(Dk(t)/Lk|0)|0}var Xu=64,Yu=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,A=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~A;o!==0?r=El(o):(s&=i,s!==0&&(r=El(s)))}else i=n&~A,i!==0?r=El(i):s!==0&&(r=El(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&A)&&(A=r&-r,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sr(e),A=1<<n,r|=t[n],e&=~A;return r}function Mk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Sr(s),o=1<<i,a=A[i];a===-1?(!(o&n)||o&r)&&(A[i]=Mk(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Bm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FE(){var t=Xu;return Xu<<=1,!(Xu&4194240)&&(Xu=64),t}function qg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=n}function Hk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var A=31-Sr(n),s=1<<A;e[A]=0,r[A]=-1,t[A]=-1,n&=~s}}function Bw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sr(n),A=1<<r;A&e|t[r]&e&&(t[r]|=e),n&=~A}}var Ze=0;function UE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QE,xw,SE,kE,RE,xm=!1,Zu=[],us=null,ds=null,hs=null,gc=new Map,pc=new Map,ZA=[],jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $B(t,e){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function il(t,e,n,r,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[A]},e!==null&&(e=iu(e),e!==null&&xw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function Kk(t,e,n,r,A){switch(e){case"focusin":return us=il(us,t,e,n,r,A),!0;case"dragenter":return ds=il(ds,t,e,n,r,A),!0;case"mouseover":return hs=il(hs,t,e,n,r,A),!0;case"pointerover":var s=A.pointerId;return gc.set(s,il(gc.get(s)||null,t,e,n,r,A)),!0;case"gotpointercapture":return s=A.pointerId,pc.set(s,il(pc.get(s)||null,t,e,n,r,A)),!0}return!1}function NE(t){var e=pi(t.target);if(e!==null){var n=Ji(e);if(n!==null){if(e=n.tag,e===13){if(e=_E(n),e!==null){t.blockedOn=e,RE(t.priority,function(){SE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=iu(n),e!==null&&xw(e),t.blockedOn=n,!1;e.shift()}return!0}function qB(t,e,n){jd(t)&&n.delete(e)}function Gk(){xm=!1,us!==null&&jd(us)&&(us=null),ds!==null&&jd(ds)&&(ds=null),hs!==null&&jd(hs)&&(hs=null),gc.forEach(qB),pc.forEach(qB)}function ol(t,e){t.blockedOn===e&&(t.blockedOn=null,xm||(xm=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,Gk)))}function mc(t){function e(A){return ol(A,t)}if(0<Zu.length){ol(Zu[0],t);for(var n=1;n<Zu.length;n++){var r=Zu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(us!==null&&ol(us,t),ds!==null&&ol(ds,t),hs!==null&&ol(hs,t),gc.forEach(e),pc.forEach(e),n=0;n<ZA.length;n++)r=ZA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ZA.length&&(n=ZA[0],n.blockedOn===null);)NE(n),n.blockedOn===null&&ZA.shift()}var Wo=SA.ReactCurrentBatchConfig,Bh=!0;function zk(t,e,n,r){var A=Ze,s=Wo.transition;Wo.transition=null;try{Ze=1,_w(t,e,n,r)}finally{Ze=A,Wo.transition=s}}function Wk(t,e,n,r){var A=Ze,s=Wo.transition;Wo.transition=null;try{Ze=4,_w(t,e,n,r)}finally{Ze=A,Wo.transition=s}}function _w(t,e,n,r){if(Bh){var A=_m(t,e,n,r);if(A===null)sp(t,e,r,xh,n),$B(t,r);else if(Kk(A,t,e,n,r))r.stopPropagation();else if($B(t,r),e&4&&-1<jk.indexOf(t)){for(;A!==null;){var s=iu(A);if(s!==null&&QE(s),s=_m(t,e,n,r),s===null&&sp(t,e,r,xh,n),s===A)break;A=s}A!==null&&r.stopPropagation()}else sp(t,e,r,null,n)}}var xh=null;function _m(t,e,n,r){if(xh=null,t=vw(r),t=pi(t),t!==null)if(e=Ji(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_E(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xh=t,null}function PE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rk()){case yw:return 1;case bE:return 4;case vh:case Nk:return 16;case TE:return 536870912;default:return 16}default:return 16}}var rs=null,Cw=null,Kd=null;function DE(){if(Kd)return Kd;var t,e=Cw,n=e.length,r,A="value"in rs?rs.value:rs.textContent,s=A.length;for(t=0;t<n&&e[t]===A[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===A[s-r];r++);return Kd=A.slice(t,1<r?1-r:void 0)}function Gd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ed(){return!0}function JB(){return!1}function lr(t){function e(n,r,A,s,i){this._reactName=n,this._targetInst=A,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ed:JB,this.isPropagationStopped=JB,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ed)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ed)},persist:function(){},isPersistent:ed}),e}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iw=lr(Ua),su=Et({},Ua,{view:0,detail:0}),$k=lr(su),Jg,Xg,al,xf=Et({},su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ew,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==al&&(al&&t.type==="mousemove"?(Jg=t.screenX-al.screenX,Xg=t.screenY-al.screenY):Xg=Jg=0,al=t),Jg)},movementY:function(t){return"movementY"in t?t.movementY:Xg}}),XB=lr(xf),qk=Et({},xf,{dataTransfer:0}),Jk=lr(qk),Xk=Et({},su,{relatedTarget:0}),Yg=lr(Xk),Yk=Et({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Zk=lr(Yk),e2=Et({},Ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t2=lr(e2),n2=Et({},Ua,{data:0}),YB=lr(n2),r2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s2[t])?!!e[t]:!1}function Ew(){return i2}var o2=Et({},su,{key:function(t){if(t.key){var e=r2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ew,charCode:function(t){return t.type==="keypress"?Gd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a2=lr(o2),l2=Et({},xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZB=lr(l2),c2=Et({},su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ew}),u2=lr(c2),d2=Et({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),h2=lr(d2),f2=Et({},xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g2=lr(f2),p2=[9,13,27,32],bw=_A&&"CompositionEvent"in window,Kl=null;_A&&"documentMode"in document&&(Kl=document.documentMode);var m2=_A&&"TextEvent"in window&&!Kl,LE=_A&&(!bw||Kl&&8<Kl&&11>=Kl),ex=" ",tx=!1;function OE(t,e){switch(t){case"keyup":return p2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ME(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var So=!1;function w2(t,e){switch(t){case"compositionend":return ME(e);case"keypress":return e.which!==32?null:(tx=!0,ex);case"textInput":return t=e.data,t===ex&&tx?null:t;default:return null}}function v2(t,e){if(So)return t==="compositionend"||!bw&&OE(t,e)?(t=DE(),Kd=Cw=rs=null,So=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LE&&e.locale!=="ko"?null:e.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y2[t.type]:e==="textarea"}function VE(t,e,n,r){wE(r),e=_h(e,"onChange"),0<e.length&&(n=new Iw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,wc=null;function B2(t){YE(t,0)}function _f(t){var e=No(t);if(uE(e))return t}function x2(t,e){if(t==="change")return e}var HE=!1;if(_A){var Zg;if(_A){var ep="oninput"in document;if(!ep){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),ep=typeof rx.oninput=="function"}Zg=ep}else Zg=!1;HE=Zg&&(!document.documentMode||9<document.documentMode)}function Ax(){Gl&&(Gl.detachEvent("onpropertychange",jE),wc=Gl=null)}function jE(t){if(t.propertyName==="value"&&_f(wc)){var e=[];VE(e,wc,t,vw(t)),xE(B2,e)}}function _2(t,e,n){t==="focusin"?(Ax(),Gl=e,wc=n,Gl.attachEvent("onpropertychange",jE)):t==="focusout"&&Ax()}function C2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _f(wc)}function I2(t,e){if(t==="click")return _f(e)}function E2(t,e){if(t==="input"||t==="change")return _f(e)}function b2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:b2;function vc(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var A=n[r];if(!sm.call(e,A)||!Nr(t[A],e[A]))return!1}return!0}function sx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ix(t,e){var n=sx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sx(n)}}function KE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=ph();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ph(t.document)}return e}function Tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function T2(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KE(n.ownerDocument.documentElement,n)){if(r!==null&&Tw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=n.textContent.length,s=Math.min(r.start,A);r=r.end===void 0?s:Math.min(r.end,A),!t.extend&&s>r&&(A=r,r=s,s=A),A=ix(n,s);var i=ix(n,r);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F2=_A&&"documentMode"in document&&11>=document.documentMode,ko=null,Cm=null,zl=null,Im=!1;function ox(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Im||ko==null||ko!==ph(r)||(r=ko,"selectionStart"in r&&Tw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zl&&vc(zl,r)||(zl=r,r=_h(Cm,"onSelect"),0<r.length&&(e=new Iw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function td(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ro={animationend:td("Animation","AnimationEnd"),animationiteration:td("Animation","AnimationIteration"),animationstart:td("Animation","AnimationStart"),transitionend:td("Transition","TransitionEnd")},tp={},zE={};_A&&(zE=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Cf(t){if(tp[t])return tp[t];if(!Ro[t])return t;var e=Ro[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zE)return tp[t]=e[n];return t}var WE=Cf("animationend"),$E=Cf("animationiteration"),qE=Cf("animationstart"),JE=Cf("transitionend"),XE=new Map,ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){XE.set(t,e),qi(e,[t])}for(var np=0;np<ax.length;np++){var rp=ax[np],U2=rp.toLowerCase(),Q2=rp[0].toUpperCase()+rp.slice(1);Os(U2,"on"+Q2)}Os(WE,"onAnimationEnd");Os($E,"onAnimationIteration");Os(qE,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(JE,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("cancel close invalid load scroll toggle".split(" ").concat(bl));function lx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Uk(r,e,void 0,t),t.currentTarget=null}function YE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],A=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,l=o.currentTarget;if(o=o.listener,a!==s&&A.isPropagationStopped())break e;lx(A,o,l),s=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,l=o.currentTarget,o=o.listener,a!==s&&A.isPropagationStopped())break e;lx(A,o,l),s=a}}}if(wh)throw t=ym,wh=!1,ym=null,t}function ut(t,e){var n=e[Um];n===void 0&&(n=e[Um]=new Set);var r=t+"__bubble";n.has(r)||(ZE(e,t,2,!1),n.add(r))}function Ap(t,e,n){var r=0;e&&(r|=4),ZE(n,t,r,e)}var nd="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[nd]){t[nd]=!0,iE.forEach(function(n){n!=="selectionchange"&&(S2.has(n)||Ap(n,!1,t),Ap(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nd]||(e[nd]=!0,Ap("selectionchange",!1,e))}}function ZE(t,e,n,r){switch(PE(e)){case 1:var A=zk;break;case 4:A=Wk;break;default:A=_w}n=A.bind(null,e,n,t),A=void 0,!vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),r?A!==void 0?t.addEventListener(e,n,{capture:!0,passive:A}):t.addEventListener(e,n,!0):A!==void 0?t.addEventListener(e,n,{passive:A}):t.addEventListener(e,n,!1)}function sp(t,e,n,r,A){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===A||o.nodeType===8&&o.parentNode===A)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===A||a.nodeType===8&&a.parentNode===A))return;i=i.return}for(;o!==null;){if(i=pi(o),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}o=o.parentNode}}r=r.return}xE(function(){var l=s,d=vw(n),h=[];e:{var f=XE.get(t);if(f!==void 0){var w=Iw,m=t;switch(t){case"keypress":if(Gd(n)===0)break e;case"keydown":case"keyup":w=a2;break;case"focusin":m="focus",w=Yg;break;case"focusout":m="blur",w=Yg;break;case"beforeblur":case"afterblur":w=Yg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=XB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=u2;break;case WE:case $E:case qE:w=Zk;break;case JE:w=h2;break;case"scroll":w=$k;break;case"wheel":w=g2;break;case"copy":case"cut":case"paste":w=t2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ZB}var y=(e&4)!==0,I=!y&&t==="scroll",B=y?f!==null?f+"Capture":null:f;y=[];for(var v=l,_;v!==null;){_=v;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,B!==null&&(k=fc(v,B),k!=null&&y.push(Bc(v,k,_)))),I)break;v=v.return}0<y.length&&(f=new w(f,m,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&n!==mm&&(m=n.relatedTarget||n.fromElement)&&(pi(m)||m[CA]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(m=n.relatedTarget||n.toElement,w=l,m=m?pi(m):null,m!==null&&(I=Ji(m),m!==I||m.tag!==5&&m.tag!==6)&&(m=null)):(w=null,m=l),w!==m)){if(y=XB,k="onMouseLeave",B="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=ZB,k="onPointerLeave",B="onPointerEnter",v="pointer"),I=w==null?f:No(w),_=m==null?f:No(m),f=new y(k,v+"leave",w,n,d),f.target=I,f.relatedTarget=_,k=null,pi(d)===l&&(y=new y(B,v+"enter",m,n,d),y.target=_,y.relatedTarget=I,k=y),I=k,w&&m)t:{for(y=w,B=m,v=0,_=y;_;_=lo(_))v++;for(_=0,k=B;k;k=lo(k))_++;for(;0<v-_;)y=lo(y),v--;for(;0<_-v;)B=lo(B),_--;for(;v--;){if(y===B||B!==null&&y===B.alternate)break t;y=lo(y),B=lo(B)}y=null}else y=null;w!==null&&cx(h,f,w,y,!1),m!==null&&I!==null&&cx(h,I,m,y,!0)}}e:{if(f=l?No(l):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var U=x2;else if(nx(f))if(HE)U=E2;else{U=C2;var N=_2}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=I2);if(U&&(U=U(t,l))){VE(h,U,n,d);break e}N&&N(t,f,l),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&dm(f,"number",f.value)}switch(N=l?No(l):window,t){case"focusin":(nx(N)||N.contentEditable==="true")&&(ko=N,Cm=l,zl=null);break;case"focusout":zl=Cm=ko=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,ox(h,n,d);break;case"selectionchange":if(F2)break;case"keydown":case"keyup":ox(h,n,d)}var C;if(bw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else So?OE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(LE&&n.locale!=="ko"&&(So||x!=="onCompositionStart"?x==="onCompositionEnd"&&So&&(C=DE()):(rs=d,Cw="value"in rs?rs.value:rs.textContent,So=!0)),N=_h(l,x),0<N.length&&(x=new YB(x,t,null,n,d),h.push({event:x,listeners:N}),C?x.data=C:(C=ME(n),C!==null&&(x.data=C)))),(C=m2?w2(t,n):v2(t,n))&&(l=_h(l,"onBeforeInput"),0<l.length&&(d=new YB("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:l}),d.data=C))}YE(h,e)})}function Bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _h(t,e){for(var n=e+"Capture",r=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=fc(t,n),s!=null&&r.unshift(Bc(t,s,A)),s=fc(t,e),s!=null&&r.push(Bc(t,s,A))),t=t.return}return r}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cx(t,e,n,r,A){for(var s=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,l=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&l!==null&&(o=l,A?(a=fc(n,s),a!=null&&i.unshift(Bc(n,a,o))):A||(a=fc(n,s),a!=null&&i.push(Bc(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var k2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function ux(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(R2,"")}function rd(t,e,n){if(e=ux(e),ux(t)!==e&&n)throw Error(Z(425))}function Ch(){}var Em=null,bm=null;function Tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fm=typeof setTimeout=="function"?setTimeout:void 0,N2=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(t){return dx.resolve(null).then(t).catch(D2)}:Fm;function D2(t){setTimeout(function(){throw t})}function ip(t,e){var n=e,r=0;do{var A=n.nextSibling;if(t.removeChild(n),A&&A.nodeType===8)if(n=A.data,n==="/$"){if(r===0){t.removeChild(A),mc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=A}while(n);mc(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Qa,xc="__reactProps$"+Qa,CA="__reactContainer$"+Qa,Um="__reactEvents$"+Qa,L2="__reactListeners$"+Qa,O2="__reactHandles$"+Qa;function pi(t){var e=t[Vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[CA]||n[Vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hx(t);t!==null;){if(n=t[Vr])return n;t=hx(t)}return e}t=n,n=t.parentNode}return null}function iu(t){return t=t[Vr]||t[CA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function If(t){return t[xc]||null}var Qm=[],Po=-1;function Ms(t){return{current:t}}function ht(t){0>Po||(t.current=Qm[Po],Qm[Po]=null,Po--)}function ot(t,e){Po++,Qm[Po]=t.current,t.current=e}var Es={},In=Ms(Es),$n=Ms(!1),Qi=Es;function Aa(t,e){var n=t.type.contextTypes;if(!n)return Es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in n)A[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function qn(t){return t=t.childContextTypes,t!=null}function Ih(){ht($n),ht(In)}function fx(t,e,n){if(In.current!==Es)throw Error(Z(168));ot(In,e),ot($n,n)}function eb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var A in r)if(!(A in e))throw Error(Z(108,_k(t)||"Unknown",A));return Et({},n,r)}function Eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,Qi=In.current,ot(In,t),ot($n,$n.current),!0}function gx(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=eb(t,e,Qi),r.__reactInternalMemoizedMergedChildContext=t,ht($n),ht(In),ot(In,t)):ht($n),ot($n,n)}var dA=null,Ef=!1,op=!1;function tb(t){dA===null?dA=[t]:dA.push(t)}function M2(t){Ef=!0,tb(t)}function Vs(){if(!op&&dA!==null){op=!0;var t=0,e=Ze;try{var n=dA;for(Ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dA=null,Ef=!1}catch(A){throw dA!==null&&(dA=dA.slice(t+1)),EE(yw,Vs),A}finally{Ze=e,op=!1}}return null}var Do=[],Lo=0,bh=null,Th=0,dr=[],hr=0,Si=null,hA=1,fA="";function Ai(t,e){Do[Lo++]=Th,Do[Lo++]=bh,bh=t,Th=e}function nb(t,e,n){dr[hr++]=hA,dr[hr++]=fA,dr[hr++]=Si,Si=t;var r=hA;t=fA;var A=32-Sr(r)-1;r&=~(1<<A),n+=1;var s=32-Sr(e)+A;if(30<s){var i=A-A%5;s=(r&(1<<i)-1).toString(32),r>>=i,A-=i,hA=1<<32-Sr(e)+A|n<<A|r,fA=s+t}else hA=1<<s|n<<A|r,fA=t}function Fw(t){t.return!==null&&(Ai(t,1),nb(t,1,0))}function Uw(t){for(;t===bh;)bh=Do[--Lo],Do[Lo]=null,Th=Do[--Lo],Do[Lo]=null;for(;t===Si;)Si=dr[--hr],dr[hr]=null,fA=dr[--hr],dr[hr]=null,hA=dr[--hr],dr[hr]=null}var sr=null,rr=null,mt=!1,Ur=null;function rb(t,e){var n=gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function px(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,rr=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Si!==null?{id:hA,overflow:fA}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sr=t,rr=null,!0):!1;default:return!1}}function Sm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function km(t){if(mt){var e=rr;if(e){var n=e;if(!px(t,e)){if(Sm(t))throw Error(Z(418));e=fs(n.nextSibling);var r=sr;e&&px(t,e)?rb(r,n):(t.flags=t.flags&-4097|2,mt=!1,sr=t)}}else{if(Sm(t))throw Error(Z(418));t.flags=t.flags&-4097|2,mt=!1,sr=t}}}function mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function Ad(t){if(t!==sr)return!1;if(!mt)return mx(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tm(t.type,t.memoizedProps)),e&&(e=rr)){if(Sm(t))throw Ab(),Error(Z(418));for(;e;)rb(t,e),e=fs(e.nextSibling)}if(mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=sr?fs(t.stateNode.nextSibling):null;return!0}function Ab(){for(var t=rr;t;)t=fs(t.nextSibling)}function sa(){rr=sr=null,mt=!1}function Qw(t){Ur===null?Ur=[t]:Ur.push(t)}var V2=SA.ReactCurrentBatchConfig;function ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var A=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var o=A.refs;i===null?delete o[s]:o[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function sd(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wx(t){var e=t._init;return e(t._payload)}function sb(t){function e(B,v){if(t){var _=B.deletions;_===null?(B.deletions=[v],B.flags|=16):_.push(v)}}function n(B,v){if(!t)return null;for(;v!==null;)e(B,v),v=v.sibling;return null}function r(B,v){for(B=new Map;v!==null;)v.key!==null?B.set(v.key,v):B.set(v.index,v),v=v.sibling;return B}function A(B,v){return B=ws(B,v),B.index=0,B.sibling=null,B}function s(B,v,_){return B.index=_,t?(_=B.alternate,_!==null?(_=_.index,_<v?(B.flags|=2,v):_):(B.flags|=2,v)):(B.flags|=1048576,v)}function i(B){return t&&B.alternate===null&&(B.flags|=2),B}function o(B,v,_,k){return v===null||v.tag!==6?(v=fp(_,B.mode,k),v.return=B,v):(v=A(v,_),v.return=B,v)}function a(B,v,_,k){var U=_.type;return U===Qo?d(B,v,_.props.children,k,_.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===JA&&wx(U)===v.type)?(k=A(v,_.props),k.ref=ll(B,v,_),k.return=B,k):(k=Yd(_.type,_.key,_.props,null,B.mode,k),k.ref=ll(B,v,_),k.return=B,k)}function l(B,v,_,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=gp(_,B.mode,k),v.return=B,v):(v=A(v,_.children||[]),v.return=B,v)}function d(B,v,_,k,U){return v===null||v.tag!==7?(v=Ci(_,B.mode,k,U),v.return=B,v):(v=A(v,_),v.return=B,v)}function h(B,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=fp(""+v,B.mode,_),v.return=B,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $u:return _=Yd(v.type,v.key,v.props,null,B.mode,_),_.ref=ll(B,null,v),_.return=B,_;case Uo:return v=gp(v,B.mode,_),v.return=B,v;case JA:var k=v._init;return h(B,k(v._payload),_)}if(Il(v)||Al(v))return v=Ci(v,B.mode,_,null),v.return=B,v;sd(B,v)}return null}function f(B,v,_,k){var U=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return U!==null?null:o(B,v,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $u:return _.key===U?a(B,v,_,k):null;case Uo:return _.key===U?l(B,v,_,k):null;case JA:return U=_._init,f(B,v,U(_._payload),k)}if(Il(_)||Al(_))return U!==null?null:d(B,v,_,k,null);sd(B,_)}return null}function w(B,v,_,k,U){if(typeof k=="string"&&k!==""||typeof k=="number")return B=B.get(_)||null,o(v,B,""+k,U);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case $u:return B=B.get(k.key===null?_:k.key)||null,a(v,B,k,U);case Uo:return B=B.get(k.key===null?_:k.key)||null,l(v,B,k,U);case JA:var N=k._init;return w(B,v,_,N(k._payload),U)}if(Il(k)||Al(k))return B=B.get(_)||null,d(v,B,k,U,null);sd(v,k)}return null}function m(B,v,_,k){for(var U=null,N=null,C=v,x=v=0,b=null;C!==null&&x<_.length;x++){C.index>x?(b=C,C=null):b=C.sibling;var Q=f(B,C,_[x],k);if(Q===null){C===null&&(C=b);break}t&&C&&Q.alternate===null&&e(B,C),v=s(Q,v,x),N===null?U=Q:N.sibling=Q,N=Q,C=b}if(x===_.length)return n(B,C),mt&&Ai(B,x),U;if(C===null){for(;x<_.length;x++)C=h(B,_[x],k),C!==null&&(v=s(C,v,x),N===null?U=C:N.sibling=C,N=C);return mt&&Ai(B,x),U}for(C=r(B,C);x<_.length;x++)b=w(C,B,x,_[x],k),b!==null&&(t&&b.alternate!==null&&C.delete(b.key===null?x:b.key),v=s(b,v,x),N===null?U=b:N.sibling=b,N=b);return t&&C.forEach(function(S){return e(B,S)}),mt&&Ai(B,x),U}function y(B,v,_,k){var U=Al(_);if(typeof U!="function")throw Error(Z(150));if(_=U.call(_),_==null)throw Error(Z(151));for(var N=U=null,C=v,x=v=0,b=null,Q=_.next();C!==null&&!Q.done;x++,Q=_.next()){C.index>x?(b=C,C=null):b=C.sibling;var S=f(B,C,Q.value,k);if(S===null){C===null&&(C=b);break}t&&C&&S.alternate===null&&e(B,C),v=s(S,v,x),N===null?U=S:N.sibling=S,N=S,C=b}if(Q.done)return n(B,C),mt&&Ai(B,x),U;if(C===null){for(;!Q.done;x++,Q=_.next())Q=h(B,Q.value,k),Q!==null&&(v=s(Q,v,x),N===null?U=Q:N.sibling=Q,N=Q);return mt&&Ai(B,x),U}for(C=r(B,C);!Q.done;x++,Q=_.next())Q=w(C,B,x,Q.value,k),Q!==null&&(t&&Q.alternate!==null&&C.delete(Q.key===null?x:Q.key),v=s(Q,v,x),N===null?U=Q:N.sibling=Q,N=Q);return t&&C.forEach(function(P){return e(B,P)}),mt&&Ai(B,x),U}function I(B,v,_,k){if(typeof _=="object"&&_!==null&&_.type===Qo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case $u:e:{for(var U=_.key,N=v;N!==null;){if(N.key===U){if(U=_.type,U===Qo){if(N.tag===7){n(B,N.sibling),v=A(N,_.props.children),v.return=B,B=v;break e}}else if(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===JA&&wx(U)===N.type){n(B,N.sibling),v=A(N,_.props),v.ref=ll(B,N,_),v.return=B,B=v;break e}n(B,N);break}else e(B,N);N=N.sibling}_.type===Qo?(v=Ci(_.props.children,B.mode,k,_.key),v.return=B,B=v):(k=Yd(_.type,_.key,_.props,null,B.mode,k),k.ref=ll(B,v,_),k.return=B,B=k)}return i(B);case Uo:e:{for(N=_.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(B,v.sibling),v=A(v,_.children||[]),v.return=B,B=v;break e}else{n(B,v);break}else e(B,v);v=v.sibling}v=gp(_,B.mode,k),v.return=B,B=v}return i(B);case JA:return N=_._init,I(B,v,N(_._payload),k)}if(Il(_))return m(B,v,_,k);if(Al(_))return y(B,v,_,k);sd(B,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(B,v.sibling),v=A(v,_),v.return=B,B=v):(n(B,v),v=fp(_,B.mode,k),v.return=B,B=v),i(B)):n(B,v)}return I}var ia=sb(!0),ib=sb(!1),Fh=Ms(null),Uh=null,Oo=null,Sw=null;function kw(){Sw=Oo=Uh=null}function Rw(t){var e=Fh.current;ht(Fh),t._currentValue=e}function Rm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $o(t,e){Uh=t,Sw=Oo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function Br(t){var e=t._currentValue;if(Sw!==t)if(t={context:t,memoizedValue:e,next:null},Oo===null){if(Uh===null)throw Error(Z(308));Oo=t,Uh.dependencies={lanes:0,firstContext:t}}else Oo=Oo.next=t;return e}var mi=null;function Nw(t){mi===null?mi=[t]:mi.push(t)}function ob(t,e,n,r){var A=e.interleaved;return A===null?(n.next=n,Nw(e)):(n.next=A.next,A.next=n),e.interleaved=n,IA(t,r)}function IA(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var XA=!1;function Pw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ab(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var A=r.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),r.pending=e,IA(t,n)}return A=r.interleaved,A===null?(e.next=e,Nw(r)):(e.next=A.next,A.next=e),r.interleaved=e,IA(t,n)}function zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bw(t,n)}}function vx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var A=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?A=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?A=s=e:s=s.next=e}else A=s=e;n={baseState:r.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qh(t,e,n,r){var A=t.updateQueue;XA=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,o=A.shared.pending;if(o!==null){A.shared.pending=null;var a=o,l=a.next;a.next=null,i===null?s=l:i.next=l,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=a))}if(s!==null){var h=A.baseState;i=0,d=l=a=null,o=s;do{var f=o.lane,w=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,y=o;switch(f=e,w=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(w,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(w,h,f):m,f==null)break e;h=Et({},h,f);break e;case 2:XA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[o]:f.push(o))}else w={eventTime:w,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(l=d=w,a=h):d=d.next=w,i|=f;if(o=o.next,o===null){if(o=A.shared.pending,o===null)break;f=o,o=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(a=h),A.baseState=a,A.firstBaseUpdate=l,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Ri|=i,t.lanes=i,t.memoizedState=h}}function yx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],A=r.callback;if(A!==null){if(r.callback=null,r=n,typeof A!="function")throw Error(Z(191,A));A.call(r)}}}var ou={},Jr=Ms(ou),_c=Ms(ou),Cc=Ms(ou);function wi(t){if(t===ou)throw Error(Z(174));return t}function Dw(t,e){switch(ot(Cc,e),ot(_c,t),ot(Jr,ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fm(e,t)}ht(Jr),ot(Jr,e)}function oa(){ht(Jr),ht(_c),ht(Cc)}function lb(t){wi(Cc.current);var e=wi(Jr.current),n=fm(e,t.type);e!==n&&(ot(_c,t),ot(Jr,n))}function Lw(t){_c.current===t&&(ht(Jr),ht(_c))}var xt=Ms(0);function Sh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ap=[];function Ow(){for(var t=0;t<ap.length;t++)ap[t]._workInProgressVersionPrimary=null;ap.length=0}var Wd=SA.ReactCurrentDispatcher,lp=SA.ReactCurrentBatchConfig,ki=0,_t=null,$t=null,tn=null,kh=!1,Wl=!1,Ic=0,H2=0;function vn(){throw Error(Z(321))}function Mw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function Vw(t,e,n,r,A,s){if(ki=s,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wd.current=t===null||t.memoizedState===null?z2:W2,t=n(r,A),Wl){s=0;do{if(Wl=!1,Ic=0,25<=s)throw Error(Z(301));s+=1,tn=$t=null,e.updateQueue=null,Wd.current=$2,t=n(r,A)}while(Wl)}if(Wd.current=Rh,e=$t!==null&&$t.next!==null,ki=0,tn=$t=_t=null,kh=!1,e)throw Error(Z(300));return t}function Hw(){var t=Ic!==0;return Ic=0,t}function Mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?_t.memoizedState=tn=t:tn=tn.next=t,tn}function xr(){if($t===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=tn===null?_t.memoizedState:tn.next;if(e!==null)tn=e,$t=t;else{if(t===null)throw Error(Z(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},tn===null?_t.memoizedState=tn=t:tn=tn.next=t}return tn}function Ec(t,e){return typeof e=="function"?e(t):e}function cp(t){var e=xr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=$t,A=r.baseQueue,s=n.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}r.baseQueue=A=s,n.pending=null}if(A!==null){s=A.next,r=r.baseState;var o=i=null,a=null,l=s;do{var d=l.lane;if((ki&d)===d)a!==null&&(a=a.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var h={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,_t.lanes|=d,Ri|=d}l=l.next}while(l!==null&&l!==s);a===null?i=r:a.next=o,Nr(r,e.memoizedState)||(Kn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){A=t;do s=A.lane,_t.lanes|=s,Ri|=s,A=A.next;while(A!==t)}else A===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function up(t){var e=xr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,A=n.pending,s=e.memoizedState;if(A!==null){n.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);Nr(s,e.memoizedState)||(Kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cb(){}function ub(t,e){var n=_t,r=xr(),A=e(),s=!Nr(r.memoizedState,A);if(s&&(r.memoizedState=A,Kn=!0),r=r.queue,jw(fb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,bc(9,hb.bind(null,n,r,A,e),void 0,null),rn===null)throw Error(Z(349));ki&30||db(n,e,A)}return A}function db(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hb(t,e,n,r){e.value=n,e.getSnapshot=r,gb(e)&&pb(t)}function fb(t,e,n){return n(function(){gb(e)&&pb(t)})}function gb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function pb(t){var e=IA(t,1);e!==null&&kr(e,t,1,-1)}function Bx(t){var e=Mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:t},e.queue=t,t=t.dispatch=G2.bind(null,_t,t),[e.memoizedState,t]}function bc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mb(){return xr().memoizedState}function $d(t,e,n,r){var A=Mr();_t.flags|=t,A.memoizedState=bc(1|e,n,void 0,r===void 0?null:r)}function bf(t,e,n,r){var A=xr();r=r===void 0?null:r;var s=void 0;if($t!==null){var i=$t.memoizedState;if(s=i.destroy,r!==null&&Mw(r,i.deps)){A.memoizedState=bc(e,n,s,r);return}}_t.flags|=t,A.memoizedState=bc(1|e,n,s,r)}function xx(t,e){return $d(8390656,8,t,e)}function jw(t,e){return bf(2048,8,t,e)}function wb(t,e){return bf(4,2,t,e)}function vb(t,e){return bf(4,4,t,e)}function yb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bb(t,e,n){return n=n!=null?n.concat([t]):null,bf(4,4,yb.bind(null,e,t),n)}function Kw(){}function xb(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _b(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cb(t,e,n){return ki&21?(Nr(n,e)||(n=FE(),_t.lanes|=n,Ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=n)}function j2(t,e){var n=Ze;Ze=n!==0&&4>n?n:4,t(!0);var r=lp.transition;lp.transition={};try{t(!1),e()}finally{Ze=n,lp.transition=r}}function Ib(){return xr().memoizedState}function K2(t,e,n){var r=ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Eb(t))bb(e,n);else if(n=ob(t,e,n,r),n!==null){var A=kn();kr(n,t,r,A),Tb(n,e,r)}}function G2(t,e,n){var r=ms(t),A={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Eb(t))bb(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,o=s(i,n);if(A.hasEagerState=!0,A.eagerState=o,Nr(o,i)){var a=e.interleaved;a===null?(A.next=A,Nw(e)):(A.next=a.next,a.next=A),e.interleaved=A;return}}catch{}finally{}n=ob(t,e,A,r),n!==null&&(A=kn(),kr(n,t,r,A),Tb(n,e,r))}}function Eb(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function bb(t,e){Wl=kh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bw(t,n)}}var Rh={readContext:Br,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},z2={readContext:Br,useCallback:function(t,e){return Mr().memoizedState=[t,e===void 0?null:e],t},useContext:Br,useEffect:xx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$d(4194308,4,yb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $d(4194308,4,t,e)},useInsertionEffect:function(t,e){return $d(4,2,t,e)},useMemo:function(t,e){var n=Mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=K2.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=Mr();return t={current:t},e.memoizedState=t},useState:Bx,useDebugValue:Kw,useDeferredValue:function(t){return Mr().memoizedState=t},useTransition:function(){var t=Bx(!1),e=t[0];return t=j2.bind(null,t[1]),Mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,A=Mr();if(mt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),rn===null)throw Error(Z(349));ki&30||db(r,e,n)}A.memoizedState=n;var s={value:n,getSnapshot:e};return A.queue=s,xx(fb.bind(null,r,s,t),[t]),r.flags|=2048,bc(9,hb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mr(),e=rn.identifierPrefix;if(mt){var n=fA,r=hA;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ic++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=H2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W2={readContext:Br,useCallback:xb,useContext:Br,useEffect:jw,useImperativeHandle:Bb,useInsertionEffect:wb,useLayoutEffect:vb,useMemo:_b,useReducer:cp,useRef:mb,useState:function(){return cp(Ec)},useDebugValue:Kw,useDeferredValue:function(t){var e=xr();return Cb(e,$t.memoizedState,t)},useTransition:function(){var t=cp(Ec)[0],e=xr().memoizedState;return[t,e]},useMutableSource:cb,useSyncExternalStore:ub,useId:Ib,unstable_isNewReconciler:!1},$2={readContext:Br,useCallback:xb,useContext:Br,useEffect:jw,useImperativeHandle:Bb,useInsertionEffect:wb,useLayoutEffect:vb,useMemo:_b,useReducer:up,useRef:mb,useState:function(){return up(Ec)},useDebugValue:Kw,useDeferredValue:function(t){var e=xr();return $t===null?e.memoizedState=t:Cb(e,$t.memoizedState,t)},useTransition:function(){var t=up(Ec)[0],e=xr().memoizedState;return[t,e]},useMutableSource:cb,useSyncExternalStore:ub,useId:Ib,unstable_isNewReconciler:!1};function Tr(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tf={isMounted:function(t){return(t=t._reactInternals)?Ji(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kn(),A=ms(t),s=yA(r,A);s.payload=e,n!=null&&(s.callback=n),e=gs(t,s,A),e!==null&&(kr(e,t,A,r),zd(e,t,A))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kn(),A=ms(t),s=yA(r,A);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=gs(t,s,A),e!==null&&(kr(e,t,A,r),zd(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kn(),r=ms(t),A=yA(n,r);A.tag=2,e!=null&&(A.callback=e),e=gs(t,A,r),e!==null&&(kr(e,t,r,n),zd(e,t,r))}};function _x(t,e,n,r,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!vc(n,r)||!vc(A,s):!0}function Fb(t,e,n){var r=!1,A=Es,s=e.contextType;return typeof s=="object"&&s!==null?s=Br(s):(A=qn(e)?Qi:In.current,r=e.contextTypes,s=(r=r!=null)?Aa(t,A):Es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tf.enqueueReplaceState(e,e.state,null)}function Pm(t,e,n,r){var A=t.stateNode;A.props=n,A.state=t.memoizedState,A.refs={},Pw(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=Br(s):(s=qn(e)?Qi:In.current,A.context=Aa(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nm(t,e,s,n),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&Tf.enqueueReplaceState(A,A.state,null),Qh(t,n,A,r),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function aa(t,e){try{var n="",r=e;do n+=xk(r),r=r.return;while(r);var A=n}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function dp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q2=typeof WeakMap=="function"?WeakMap:Map;function Ub(t,e,n){n=yA(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ph||(Ph=!0,Wm=r),Dm(t,e)},n}function Qb(t,e,n){n=yA(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var A=e.value;n.payload=function(){return r(A)},n.callback=function(){Dm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dm(t,e),typeof r!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ix(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q2;var A=new Set;r.set(e,A)}else A=r.get(e),A===void 0&&(A=new Set,r.set(e,A));A.has(n)||(A.add(n),t=lR.bind(null,t,e,n),e.then(t,t))}function Ex(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bx(t,e,n,r,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yA(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var J2=SA.ReactCurrentOwner,Kn=!1;function Fn(t,e,n,r){e.child=t===null?ib(e,null,n,r):ia(e,t.child,n,r)}function Tx(t,e,n,r,A){n=n.render;var s=e.ref;return $o(e,A),r=Vw(t,e,n,r,s,A),n=Hw(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,EA(t,e,A)):(mt&&n&&Fw(e),e.flags|=1,Fn(t,e,r,A),e.child)}function Fx(t,e,n,r,A){if(t===null){var s=n.type;return typeof s=="function"&&!Yw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Sb(t,e,s,r,A)):(t=Yd(n.type,null,r,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:vc,n(i,r)&&t.ref===e.ref)return EA(t,e,A)}return e.flags|=1,t=ws(s,r),t.ref=e.ref,t.return=e,e.child=t}function Sb(t,e,n,r,A){if(t!==null){var s=t.memoizedProps;if(vc(s,r)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=r=s,(t.lanes&A)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,EA(t,e,A)}return Lm(t,e,n,r,A)}function kb(t,e,n){var r=e.pendingProps,A=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Vo,er),er|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot(Vo,er),er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ot(Vo,er),er|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ot(Vo,er),er|=r;return Fn(t,e,A,n),e.child}function Rb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lm(t,e,n,r,A){var s=qn(n)?Qi:In.current;return s=Aa(e,s),$o(e,A),n=Vw(t,e,n,r,s,A),r=Hw(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,EA(t,e,A)):(mt&&r&&Fw(e),e.flags|=1,Fn(t,e,n,A),e.child)}function Ux(t,e,n,r,A){if(qn(n)){var s=!0;Eh(e)}else s=!1;if($o(e,A),e.stateNode===null)qd(t,e),Fb(e,n,r),Pm(e,n,r,A),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,l=n.contextType;typeof l=="object"&&l!==null?l=Br(l):(l=qn(n)?Qi:In.current,l=Aa(e,l));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==l)&&Cx(e,i,r,l),XA=!1;var f=e.memoizedState;i.state=f,Qh(e,r,i,A),a=e.memoizedState,o!==r||f!==a||$n.current||XA?(typeof d=="function"&&(Nm(e,n,d,r),a=e.memoizedState),(o=XA||_x(e,n,o,r,f,a,l))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=l,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,ab(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:Tr(e.type,o),i.props=l,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Br(a):(a=qn(n)?Qi:In.current,a=Aa(e,a));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&Cx(e,i,r,a),XA=!1,f=e.memoizedState,i.state=f,Qh(e,r,i,A);var m=e.memoizedState;o!==h||f!==m||$n.current||XA?(typeof w=="function"&&(Nm(e,n,w,r),m=e.memoizedState),(l=XA||_x(e,n,l,r,f,m,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,m,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,m,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),i.props=r,i.state=m,i.context=a,r=l):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Om(t,e,n,r,s,A)}function Om(t,e,n,r,A,s){Rb(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return A&&gx(e,n,!1),EA(t,e,s);r=e.stateNode,J2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ia(e,t.child,null,s),e.child=ia(e,null,o,s)):Fn(t,e,o,s),e.memoizedState=r.state,A&&gx(e,n,!0),e.child}function Nb(t){var e=t.stateNode;e.pendingContext?fx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fx(t,e.context,!1),Dw(t,e.containerInfo)}function Qx(t,e,n,r,A){return sa(),Qw(A),e.flags|=256,Fn(t,e,n,r),e.child}var Mm={dehydrated:null,treeContext:null,retryLane:0};function Vm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pb(t,e,n){var r=e.pendingProps,A=xt.current,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(A&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),ot(xt,A&1),t===null)return km(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Qf(i,r,0,null),t=Ci(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vm(n),e.memoizedState=Mm,t):Gw(e,i));if(A=t.memoizedState,A!==null&&(o=A.dehydrated,o!==null))return X2(t,e,i,r,o,A,n);if(s){s=r.fallback,i=e.mode,A=t.child,o=A.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==A?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=ws(A,a),r.subtreeFlags=A.subtreeFlags&14680064),o!==null?s=ws(o,s):(s=Ci(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?Vm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=Mm,r}return s=t.child,t=s.sibling,r=ws(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gw(t,e){return e=Qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function id(t,e,n,r){return r!==null&&Qw(r),ia(e,t.child,null,n),t=Gw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function X2(t,e,n,r,A,s,i){if(n)return e.flags&256?(e.flags&=-257,r=dp(Error(Z(422))),id(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,A=e.mode,r=Qf({mode:"visible",children:r.children},A,0,null),s=Ci(s,A,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ia(e,t.child,null,i),e.child.memoizedState=Vm(i),e.memoizedState=Mm,s);if(!(e.mode&1))return id(t,e,i,null);if(A.data==="$!"){if(r=A.nextSibling&&A.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Z(419)),r=dp(s,r,void 0),id(t,e,i,r)}if(o=(i&t.childLanes)!==0,Kn||o){if(r=rn,r!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(r.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,IA(t,A),kr(r,t,A,-1))}return Xw(),r=dp(Error(Z(421))),id(t,e,i,r)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=cR.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,rr=fs(A.nextSibling),sr=e,mt=!0,Ur=null,t!==null&&(dr[hr++]=hA,dr[hr++]=fA,dr[hr++]=Si,hA=t.id,fA=t.overflow,Si=e),e=Gw(e,r.children),e.flags|=4096,e)}function Sx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rm(t.return,e,n)}function hp(t,e,n,r,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=A)}function Db(t,e,n){var r=e.pendingProps,A=r.revealOrder,s=r.tail;if(Fn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sx(t,n,e);else if(t.tag===19)Sx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ot(xt,r),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(n=e.child,A=null;n!==null;)t=n.alternate,t!==null&&Sh(t)===null&&(A=n),n=n.sibling;n=A,n===null?(A=e.child,e.child=null):(A=n.sibling,n.sibling=null),hp(e,!1,A,n,s);break;case"backwards":for(n=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&Sh(t)===null){e.child=A;break}t=A.sibling,A.sibling=n,n=A,A=t}hp(e,!0,n,null,s);break;case"together":hp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function EA(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=ws(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ws(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y2(t,e,n){switch(e.tag){case 3:Nb(e),sa();break;case 5:lb(e);break;case 1:qn(e.type)&&Eh(e);break;case 4:Dw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,A=e.memoizedProps.value;ot(Fh,r._currentValue),r._currentValue=A;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ot(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?Pb(t,e,n):(ot(xt,xt.current&1),t=EA(t,e,n),t!==null?t.sibling:null);ot(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Db(t,e,n);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ot(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,kb(t,e,n)}return EA(t,e,n)}var Lb,Hm,Ob,Mb;Lb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hm=function(){};Ob=function(t,e,n,r){var A=t.memoizedProps;if(A!==r){t=e.stateNode,wi(Jr.current);var s=null;switch(n){case"input":A=cm(t,A),r=cm(t,r),s=[];break;case"select":A=Et({},A,{value:void 0}),r=Et({},r,{value:void 0}),s=[];break;case"textarea":A=hm(t,A),r=hm(t,r),s=[];break;default:typeof A.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ch)}gm(n,r);var i;n=null;for(l in A)if(!r.hasOwnProperty(l)&&A.hasOwnProperty(l)&&A[l]!=null)if(l==="style"){var o=A[l];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(dc.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var a=r[l];if(o=A!=null?A[l]:void 0,r.hasOwnProperty(l)&&a!==o&&(a!=null||o!=null))if(l==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(l,n)),n=a;else l==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(l,a)):l==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(l,""+a):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(dc.hasOwnProperty(l)?(a!=null&&l==="onScroll"&&ut("scroll",t),s||o===a||(s=[])):(s=s||[]).push(l,a))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};Mb=function(t,e,n,r){n!==r&&(e.flags|=4)};function cl(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags&14680064,r|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags,r|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z2(t,e,n){var r=e.pendingProps;switch(Uw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(e),null;case 1:return qn(e.type)&&Ih(),yn(e),null;case 3:return r=e.stateNode,oa(),ht($n),ht(In),Ow(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ad(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ur!==null&&(Jm(Ur),Ur=null))),Hm(t,e),yn(e),null;case 5:Lw(e);var A=wi(Cc.current);if(n=e.type,t!==null&&e.stateNode!=null)Ob(t,e,n,r,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return yn(e),null}if(t=wi(Jr.current),Ad(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Vr]=e,r[xc]=s,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(A=0;A<bl.length;A++)ut(bl[A],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":VB(r,s),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ut("invalid",r);break;case"textarea":jB(r,s),ut("invalid",r)}gm(n,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&rd(r.textContent,o,t),A=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&rd(r.textContent,o,t),A=["children",""+o]):dc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ut("scroll",r)}switch(n){case"input":qu(r),HB(r,s,!0);break;case"textarea":qu(r),KB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ch)}r=A,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Vr]=e,t[xc]=r,Lb(t,e,!1,!1),e.stateNode=t;e:{switch(i=pm(n,r),n){case"dialog":ut("cancel",t),ut("close",t),A=r;break;case"iframe":case"object":case"embed":ut("load",t),A=r;break;case"video":case"audio":for(A=0;A<bl.length;A++)ut(bl[A],t);A=r;break;case"source":ut("error",t),A=r;break;case"img":case"image":case"link":ut("error",t),ut("load",t),A=r;break;case"details":ut("toggle",t),A=r;break;case"input":VB(t,r),A=cm(t,r),ut("invalid",t);break;case"option":A=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},A=Et({},r,{value:void 0}),ut("invalid",t);break;case"textarea":jB(t,r),A=hm(t,r),ut("invalid",t);break;default:A=r}gm(n,A),o=A;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?mE(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&gE(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&hc(t,a):typeof a=="number"&&hc(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(dc.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ut("scroll",t):a!=null&&gw(t,s,a,i))}switch(n){case"input":qu(t),HB(t,r,!1);break;case"textarea":qu(t),KB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Is(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ko(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ko(t,!!r.multiple,r.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=Ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yn(e),null;case 6:if(t&&e.stateNode!=null)Mb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=wi(Cc.current),wi(Jr.current),Ad(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vr]=e,(s=r.nodeValue!==n)&&(t=sr,t!==null))switch(t.tag){case 3:rd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=e,e.stateNode=r}return yn(e),null;case 13:if(ht(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&rr!==null&&e.mode&1&&!(e.flags&128))Ab(),sa(),e.flags|=98560,s=!1;else if(s=Ad(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Vr]=e}else sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yn(e),s=!1}else Ur!==null&&(Jm(Ur),Ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Jt===0&&(Jt=3):Xw())),e.updateQueue!==null&&(e.flags|=4),yn(e),null);case 4:return oa(),Hm(t,e),t===null&&yc(e.stateNode.containerInfo),yn(e),null;case 10:return Rw(e.type._context),yn(e),null;case 17:return qn(e.type)&&Ih(),yn(e),null;case 19:if(ht(xt),s=e.memoizedState,s===null)return yn(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)cl(s,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Sh(t),i!==null){for(e.flags|=128,cl(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ot(xt,xt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Lt()>la&&(e.flags|=128,r=!0,cl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Sh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!mt)return yn(e),null}else 2*Lt()-s.renderingStartTime>la&&n!==1073741824&&(e.flags|=128,r=!0,cl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Lt(),e.sibling=null,n=xt.current,ot(xt,r?n&1|2:n&1),e):(yn(e),null);case 22:case 23:return Jw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?er&1073741824&&(yn(e),e.subtreeFlags&6&&(e.flags|=8192)):yn(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function eR(t,e){switch(Uw(e),e.tag){case 1:return qn(e.type)&&Ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oa(),ht($n),ht(In),Ow(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lw(e),null;case 13:if(ht(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(xt),null;case 4:return oa(),null;case 10:return Rw(e.type._context),null;case 22:case 23:return Jw(),null;case 24:return null;default:return null}}var od=!1,Cn=!1,tR=typeof WeakSet=="function"?WeakSet:Set,me=null;function Mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ut(t,e,r)}else n.current=null}function jm(t,e,n){try{n()}catch(r){Ut(t,e,r)}}var kx=!1;function nR(t,e){if(Em=Bh,t=GE(),Tw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var A=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,l=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==n||A!==0&&h.nodeType!==3||(o=i+A),h!==s||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===n&&++l===A&&(o=i),f===s&&++d===r&&(a=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(bm={focusedElem:t,selectionRange:n},Bh=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,I=m.memoizedState,B=e.stateNode,v=B.getSnapshotBeforeUpdate(e.elementType===e.type?y:Tr(e.type,y),I);B.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(k){Ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return m=kx,kx=!1,m}function $l(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var A=r=r.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&jm(e,n,s)}A=A.next}while(A!==r)}}function Ff(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vb(t){var e=t.alternate;e!==null&&(t.alternate=null,Vb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[xc],delete e[Um],delete e[L2],delete e[O2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hb(t){return t.tag===5||t.tag===3||t.tag===4}function Rx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ch));else if(r!==4&&(t=t.child,t!==null))for(Gm(t,e,n),t=t.sibling;t!==null;)Gm(t,e,n),t=t.sibling}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}var on=null,Fr=!1;function jA(t,e,n){for(n=n.child;n!==null;)jb(t,e,n),n=n.sibling}function jb(t,e,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(Bf,n)}catch{}switch(n.tag){case 5:Cn||Mo(n,e);case 6:var r=on,A=Fr;on=null,jA(t,e,n),on=r,Fr=A,on!==null&&(Fr?(t=on,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(Fr?(t=on,n=n.stateNode,t.nodeType===8?ip(t.parentNode,n):t.nodeType===1&&ip(t,n),mc(t)):ip(on,n.stateNode));break;case 4:r=on,A=Fr,on=n.stateNode.containerInfo,Fr=!0,jA(t,e,n),on=r,Fr=A;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){A=r=r.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&jm(n,e,i),A=A.next}while(A!==r)}jA(t,e,n);break;case 1:if(!Cn&&(Mo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ut(n,e,o)}jA(t,e,n);break;case 21:jA(t,e,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,jA(t,e,n),Cn=r):jA(t,e,n);break;default:jA(t,e,n)}}function Nx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tR),e.forEach(function(r){var A=uR.bind(null,t,r);n.has(r)||(n.add(r),r.then(A,A))})}}function Er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var A=n[r];try{var s=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:on=o.stateNode,Fr=!1;break e;case 3:on=o.stateNode.containerInfo,Fr=!0;break e;case 4:on=o.stateNode.containerInfo,Fr=!0;break e}o=o.return}if(on===null)throw Error(Z(160));jb(s,i,A),on=null,Fr=!1;var a=A.alternate;a!==null&&(a.return=null),A.return=null}catch(l){Ut(A,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kb(e,t),e=e.sibling}function Kb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(e,t),Lr(t),r&4){try{$l(3,t,t.return),Ff(3,t)}catch(y){Ut(t,t.return,y)}try{$l(5,t,t.return)}catch(y){Ut(t,t.return,y)}}break;case 1:Er(e,t),Lr(t),r&512&&n!==null&&Mo(n,n.return);break;case 5:if(Er(e,t),Lr(t),r&512&&n!==null&&Mo(n,n.return),t.flags&32){var A=t.stateNode;try{hc(A,"")}catch(y){Ut(t,t.return,y)}}if(r&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&dE(A,s),pm(o,i);var l=pm(o,s);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?mE(A,h):d==="dangerouslySetInnerHTML"?gE(A,h):d==="children"?hc(A,h):gw(A,d,h,l)}switch(o){case"input":um(A,s);break;case"textarea":hE(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Ko(A,!!s.multiple,w,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ko(A,!!s.multiple,s.defaultValue,!0):Ko(A,!!s.multiple,s.multiple?[]:"",!1))}A[xc]=s}catch(y){Ut(t,t.return,y)}}break;case 6:if(Er(e,t),Lr(t),r&4){if(t.stateNode===null)throw Error(Z(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(y){Ut(t,t.return,y)}}break;case 3:if(Er(e,t),Lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(e.containerInfo)}catch(y){Ut(t,t.return,y)}break;case 4:Er(e,t),Lr(t);break;case 13:Er(e,t),Lr(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||($w=Lt())),r&4&&Nx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(l=Cn)||d,Er(e,t),Cn=l):Er(e,t),Lr(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!d&&t.mode&1)for(me=t,d=t.child;d!==null;){for(h=me=d;me!==null;){switch(f=me,w=f.child,f.tag){case 0:case 11:case 14:case 15:$l(4,f,f.return);break;case 1:Mo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Ut(r,n,y)}}break;case 5:Mo(f,f.return);break;case 22:if(f.memoizedState!==null){Dx(h);continue}}w!==null?(w.return=f,me=w):Dx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,l?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=pE("display",i))}catch(y){Ut(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ut(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Er(e,t),Lr(t),r&4&&Nx(t);break;case 21:break;default:Er(e,t),Lr(t)}}function Lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hb(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var A=r.stateNode;r.flags&32&&(hc(A,""),r.flags&=-33);var s=Rx(t);zm(t,s,A);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Rx(t);Gm(t,o,i);break;default:throw Error(Z(161))}}catch(a){Ut(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rR(t,e,n){me=t,Gb(t)}function Gb(t,e,n){for(var r=(t.mode&1)!==0;me!==null;){var A=me,s=A.child;if(A.tag===22&&r){var i=A.memoizedState!==null||od;if(!i){var o=A.alternate,a=o!==null&&o.memoizedState!==null||Cn;o=od;var l=Cn;if(od=i,(Cn=a)&&!l)for(me=A;me!==null;)i=me,a=i.child,i.tag===22&&i.memoizedState!==null?Lx(A):a!==null?(a.return=i,me=a):Lx(A);for(;s!==null;)me=s,Gb(s),s=s.sibling;me=A,od=o,Cn=l}Px(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,me=s):Px(t)}}function Px(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Ff(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var A=e.elementType===e.type?n.memoizedProps:Tr(e.type,n.memoizedProps);r.componentDidUpdate(A,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yx(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var d=l.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&mc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Cn||e.flags&512&&Km(e)}catch(f){Ut(e,e.return,f)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function Dx(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function Lx(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ff(4,e)}catch(a){Ut(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var A=e.return;try{r.componentDidMount()}catch(a){Ut(e,A,a)}}var s=e.return;try{Km(e)}catch(a){Ut(e,s,a)}break;case 5:var i=e.return;try{Km(e)}catch(a){Ut(e,i,a)}}}catch(a){Ut(e,e.return,a)}if(e===t){me=null;break}var o=e.sibling;if(o!==null){o.return=e.return,me=o;break}me=e.return}}var AR=Math.ceil,Nh=SA.ReactCurrentDispatcher,zw=SA.ReactCurrentOwner,vr=SA.ReactCurrentBatchConfig,Ke=0,rn=null,zt=null,hn=0,er=0,Vo=Ms(0),Jt=0,Tc=null,Ri=0,Uf=0,Ww=0,ql=null,jn=null,$w=0,la=1/0,uA=null,Ph=!1,Wm=null,ps=null,ad=!1,As=null,Dh=0,Jl=0,$m=null,Jd=-1,Xd=0;function kn(){return Ke&6?Lt():Jd!==-1?Jd:Jd=Lt()}function ms(t){return t.mode&1?Ke&2&&hn!==0?hn&-hn:V2.transition!==null?(Xd===0&&(Xd=FE()),Xd):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:PE(t.type)),t):1}function kr(t,e,n,r){if(50<Jl)throw Jl=0,$m=null,Error(Z(185));Au(t,n,r),(!(Ke&2)||t!==rn)&&(t===rn&&(!(Ke&2)&&(Uf|=n),Jt===4&&es(t,hn)),Jn(t,r),n===1&&Ke===0&&!(e.mode&1)&&(la=Lt()+500,Ef&&Vs()))}function Jn(t,e){var n=t.callbackNode;Vk(t,e);var r=yh(t,t===rn?hn:0);if(r===0)n!==null&&WB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WB(n),e===1)t.tag===0?M2(Ox.bind(null,t)):tb(Ox.bind(null,t)),P2(function(){!(Ke&6)&&Vs()}),n=null;else{switch(UE(r)){case 1:n=yw;break;case 4:n=bE;break;case 16:n=vh;break;case 536870912:n=TE;break;default:n=vh}n=Zb(n,zb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zb(t,e){if(Jd=-1,Xd=0,Ke&6)throw Error(Z(327));var n=t.callbackNode;if(qo()&&t.callbackNode!==n)return null;var r=yh(t,t===rn?hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lh(t,r);else{e=r;var A=Ke;Ke|=2;var s=$b();(rn!==t||hn!==e)&&(uA=null,la=Lt()+500,_i(t,e));do try{oR();break}catch(o){Wb(t,o)}while(!0);kw(),Nh.current=s,Ke=A,zt!==null?e=0:(rn=null,hn=0,e=Jt)}if(e!==0){if(e===2&&(A=Bm(t),A!==0&&(r=A,e=qm(t,A))),e===1)throw n=Tc,_i(t,0),es(t,r),Jn(t,Lt()),n;if(e===6)es(t,r);else{if(A=t.current.alternate,!(r&30)&&!sR(A)&&(e=Lh(t,r),e===2&&(s=Bm(t),s!==0&&(r=s,e=qm(t,s))),e===1))throw n=Tc,_i(t,0),es(t,r),Jn(t,Lt()),n;switch(t.finishedWork=A,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:si(t,jn,uA);break;case 3:if(es(t,r),(r&130023424)===r&&(e=$w+500-Lt(),10<e)){if(yh(t,0)!==0)break;if(A=t.suspendedLanes,(A&r)!==r){kn(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Fm(si.bind(null,t,jn,uA),e);break}si(t,jn,uA);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,A=-1;0<r;){var i=31-Sr(r);s=1<<i,i=e[i],i>A&&(A=i),r&=~s}if(r=A,r=Lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AR(r/1960))-r,10<r){t.timeoutHandle=Fm(si.bind(null,t,jn,uA),r);break}si(t,jn,uA);break;case 5:si(t,jn,uA);break;default:throw Error(Z(329))}}}return Jn(t,Lt()),t.callbackNode===n?zb.bind(null,t):null}function qm(t,e){var n=ql;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=Lh(t,e),t!==2&&(e=jn,jn=n,e!==null&&Jm(e)),t}function Jm(t){jn===null?jn=t:jn.push.apply(jn,t)}function sR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var A=n[r],s=A.getSnapshot;A=A.value;try{if(!Nr(s(),A))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~Ww,e&=~Uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sr(e),r=1<<n;t[n]=-1,e&=~r}}function Ox(t){if(Ke&6)throw Error(Z(327));qo();var e=yh(t,0);if(!(e&1))return Jn(t,Lt()),null;var n=Lh(t,e);if(t.tag!==0&&n===2){var r=Bm(t);r!==0&&(e=r,n=qm(t,r))}if(n===1)throw n=Tc,_i(t,0),es(t,e),Jn(t,Lt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,jn,uA),Jn(t,Lt()),null}function qw(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(la=Lt()+500,Ef&&Vs())}}function Ni(t){As!==null&&As.tag===0&&!(Ke&6)&&qo();var e=Ke;Ke|=1;var n=vr.transition,r=Ze;try{if(vr.transition=null,Ze=1,t)return t()}finally{Ze=r,vr.transition=n,Ke=e,!(Ke&6)&&Vs()}}function Jw(){er=Vo.current,ht(Vo)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N2(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(Uw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ih();break;case 3:oa(),ht($n),ht(In),Ow();break;case 5:Lw(r);break;case 4:oa();break;case 13:ht(xt);break;case 19:ht(xt);break;case 10:Rw(r.type._context);break;case 22:case 23:Jw()}n=n.return}if(rn=t,zt=t=ws(t.current,null),hn=er=e,Jt=0,Tc=null,Ww=Uf=Ri=0,jn=ql=null,mi!==null){for(e=0;e<mi.length;e++)if(n=mi[e],r=n.interleaved,r!==null){n.interleaved=null;var A=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=A,r.next=i}n.pending=r}mi=null}return t}function Wb(t,e){do{var n=zt;try{if(kw(),Wd.current=Rh,kh){for(var r=_t.memoizedState;r!==null;){var A=r.queue;A!==null&&(A.pending=null),r=r.next}kh=!1}if(ki=0,tn=$t=_t=null,Wl=!1,Ic=0,zw.current=null,n===null||n.return===null){Jt=1,Tc=e,zt=null;break}e:{var s=t,i=n.return,o=n,a=e;if(e=hn,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var l=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Ex(i);if(w!==null){w.flags&=-257,bx(w,i,o,s,e),w.mode&1&&Ix(s,l,e),e=w,a=l;var m=e.updateQueue;if(m===null){var y=new Set;y.add(a),e.updateQueue=y}else m.add(a);break e}else{if(!(e&1)){Ix(s,l,e),Xw();break e}a=Error(Z(426))}}else if(mt&&o.mode&1){var I=Ex(i);if(I!==null){!(I.flags&65536)&&(I.flags|=256),bx(I,i,o,s,e),Qw(aa(a,o));break e}}s=a=aa(a,o),Jt!==4&&(Jt=2),ql===null?ql=[s]:ql.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var B=Ub(s,a,e);vx(s,B);break e;case 1:o=a;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ps===null||!ps.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Qb(s,o,e);vx(s,k);break e}}s=s.return}while(s!==null)}Jb(n)}catch(U){e=U,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function $b(){var t=Nh.current;return Nh.current=Rh,t===null?Rh:t}function Xw(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),rn===null||!(Ri&268435455)&&!(Uf&268435455)||es(rn,hn)}function Lh(t,e){var n=Ke;Ke|=2;var r=$b();(rn!==t||hn!==e)&&(uA=null,_i(t,e));do try{iR();break}catch(A){Wb(t,A)}while(!0);if(kw(),Ke=n,Nh.current=r,zt!==null)throw Error(Z(261));return rn=null,hn=0,Jt}function iR(){for(;zt!==null;)qb(zt)}function oR(){for(;zt!==null&&!Sk();)qb(zt)}function qb(t){var e=Yb(t.alternate,t,er);t.memoizedProps=t.pendingProps,e===null?Jb(t):zt=e,zw.current=null}function Jb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eR(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,zt=null;return}}else if(n=Z2(n,e,er),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Jt===0&&(Jt=5)}function si(t,e,n){var r=Ze,A=vr.transition;try{vr.transition=null,Ze=1,aR(t,e,n,r)}finally{vr.transition=A,Ze=r}return null}function aR(t,e,n,r){do qo();while(As!==null);if(Ke&6)throw Error(Z(327));n=t.finishedWork;var A=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Hk(t,s),t===rn&&(zt=rn=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ad||(ad=!0,Zb(vh,function(){return qo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vr.transition,vr.transition=null;var i=Ze;Ze=1;var o=Ke;Ke|=4,zw.current=null,nR(t,n),Kb(n,t),T2(bm),Bh=!!Em,bm=Em=null,t.current=n,rR(n),kk(),Ke=o,Ze=i,vr.transition=s}else t.current=n;if(ad&&(ad=!1,As=t,Dh=A),s=t.pendingLanes,s===0&&(ps=null),Pk(n.stateNode),Jn(t,Lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)A=e[n],r(A.value,{componentStack:A.stack,digest:A.digest});if(Ph)throw Ph=!1,t=Wm,Wm=null,t;return Dh&1&&t.tag!==0&&qo(),s=t.pendingLanes,s&1?t===$m?Jl++:(Jl=0,$m=t):Jl=0,Vs(),null}function qo(){if(As!==null){var t=UE(Dh),e=vr.transition,n=Ze;try{if(vr.transition=null,Ze=16>t?16:t,As===null)var r=!1;else{if(t=As,As=null,Dh=0,Ke&6)throw Error(Z(331));var A=Ke;for(Ke|=4,me=t.current;me!==null;){var s=me,i=s.child;if(me.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var l=o[a];for(me=l;me!==null;){var d=me;switch(d.tag){case 0:case 11:case 15:$l(8,d,s)}var h=d.child;if(h!==null)h.return=d,me=h;else for(;me!==null;){d=me;var f=d.sibling,w=d.return;if(Vb(d),d===l){me=null;break}if(f!==null){f.return=w,me=f;break}me=w}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var I=y.sibling;y.sibling=null,y=I}while(y!==null)}}me=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,me=i;else e:for(;me!==null;){if(s=me,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$l(9,s,s.return)}var B=s.sibling;if(B!==null){B.return=s.return,me=B;break e}me=s.return}}var v=t.current;for(me=v;me!==null;){i=me;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,me=_;else e:for(i=v;me!==null;){if(o=me,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ff(9,o)}}catch(U){Ut(o,o.return,U)}if(o===i){me=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,me=k;break e}me=o.return}}if(Ke=A,Vs(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(Bf,t)}catch{}r=!0}return r}finally{Ze=n,vr.transition=e}}return!1}function Mx(t,e,n){e=aa(n,e),e=Ub(t,e,1),t=gs(t,e,1),e=kn(),t!==null&&(Au(t,1,e),Jn(t,e))}function Ut(t,e,n){if(t.tag===3)Mx(t,t,n);else for(;e!==null;){if(e.tag===3){Mx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ps===null||!ps.has(r))){t=aa(n,t),t=Qb(e,t,1),e=gs(e,t,1),t=kn(),e!==null&&(Au(e,1,t),Jn(e,t));break}}e=e.return}}function lR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(hn&n)===n&&(Jt===4||Jt===3&&(hn&130023424)===hn&&500>Lt()-$w?_i(t,0):Ww|=n),Jn(t,e)}function Xb(t,e){e===0&&(t.mode&1?(e=Yu,Yu<<=1,!(Yu&130023424)&&(Yu=4194304)):e=1);var n=kn();t=IA(t,e),t!==null&&(Au(t,e,n),Jn(t,n))}function cR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xb(t,n)}function uR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,A=t.memoizedState;A!==null&&(n=A.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),Xb(t,n)}var Yb;Yb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kn=!1,Y2(t,e,n);Kn=!!(t.flags&131072)}else Kn=!1,mt&&e.flags&1048576&&nb(e,Th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qd(t,e),t=e.pendingProps;var A=Aa(e,In.current);$o(e,n),A=Vw(null,e,r,t,A,n);var s=Hw();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(r)?(s=!0,Eh(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Pw(e),A.updater=Tf,e.stateNode=A,A._reactInternals=e,Pm(e,r,t,n),e=Om(null,e,r,!0,s,n)):(e.tag=0,mt&&s&&Fw(e),Fn(null,e,A,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qd(t,e),t=e.pendingProps,A=r._init,r=A(r._payload),e.type=r,A=e.tag=hR(r),t=Tr(r,t),A){case 0:e=Lm(null,e,r,t,n);break e;case 1:e=Ux(null,e,r,t,n);break e;case 11:e=Tx(null,e,r,t,n);break e;case 14:e=Fx(null,e,r,Tr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Tr(r,A),Lm(t,e,r,A,n);case 1:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Tr(r,A),Ux(t,e,r,A,n);case 3:e:{if(Nb(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,A=s.element,ab(t,e),Qh(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=aa(Error(Z(423)),e),e=Qx(t,e,r,n,A);break e}else if(r!==A){A=aa(Error(Z(424)),e),e=Qx(t,e,r,n,A);break e}else for(rr=fs(e.stateNode.containerInfo.firstChild),sr=e,mt=!0,Ur=null,n=ib(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sa(),r===A){e=EA(t,e,n);break e}Fn(t,e,r,n)}e=e.child}return e;case 5:return lb(e),t===null&&km(e),r=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,Tm(r,A)?i=null:s!==null&&Tm(r,s)&&(e.flags|=32),Rb(t,e),Fn(t,e,i,n),e.child;case 6:return t===null&&km(e),null;case 13:return Pb(t,e,n);case 4:return Dw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ia(e,null,r,n):Fn(t,e,r,n),e.child;case 11:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Tr(r,A),Tx(t,e,r,A,n);case 7:return Fn(t,e,e.pendingProps,n),e.child;case 8:return Fn(t,e,e.pendingProps.children,n),e.child;case 12:return Fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,ot(Fh,r._currentValue),r._currentValue=i,s!==null)if(Nr(s.value,i)){if(s.children===A.children&&!$n.current){e=EA(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){i=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=yA(-1,n&-n),a.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var d=l.pending;d===null?a.next=a:(a.next=d.next,d.next=a),l.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Rm(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Z(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Rm(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Fn(t,e,A.children,n),e=e.child}return e;case 9:return A=e.type,r=e.pendingProps.children,$o(e,n),A=Br(A),r=r(A),e.flags|=1,Fn(t,e,r,n),e.child;case 14:return r=e.type,A=Tr(r,e.pendingProps),A=Tr(r.type,A),Fx(t,e,r,A,n);case 15:return Sb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Tr(r,A),qd(t,e),e.tag=1,qn(r)?(t=!0,Eh(e)):t=!1,$o(e,n),Fb(e,r,A),Pm(e,r,A,n),Om(null,e,r,!0,t,n);case 19:return Db(t,e,n);case 22:return kb(t,e,n)}throw Error(Z(156,e.tag))};function Zb(t,e){return EE(t,e)}function dR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(t,e,n,r){return new dR(t,e,n,r)}function Yw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hR(t){if(typeof t=="function")return Yw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mw)return 11;if(t===ww)return 14}return 2}function ws(t,e){var n=t.alternate;return n===null?(n=gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yd(t,e,n,r,A,s){var i=2;if(r=t,typeof t=="function")Yw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Qo:return Ci(n.children,A,s,e);case pw:i=8,A|=8;break;case im:return t=gr(12,n,e,A|2),t.elementType=im,t.lanes=s,t;case om:return t=gr(13,n,e,A),t.elementType=om,t.lanes=s,t;case am:return t=gr(19,n,e,A),t.elementType=am,t.lanes=s,t;case lE:return Qf(n,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oE:i=10;break e;case aE:i=9;break e;case mw:i=11;break e;case ww:i=14;break e;case JA:i=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=gr(i,n,e,A),e.elementType=t,e.type=r,e.lanes=s,e}function Ci(t,e,n,r){return t=gr(7,t,r,e),t.lanes=n,t}function Qf(t,e,n,r){return t=gr(22,t,r,e),t.elementType=lE,t.lanes=n,t.stateNode={isHidden:!1},t}function fp(t,e,n){return t=gr(6,t,null,e),t.lanes=n,t}function gp(t,e,n){return e=gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fR(t,e,n,r,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qg(0),this.expirationTimes=qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qg(0),this.identifierPrefix=r,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Zw(t,e,n,r,A,s,i,o,a){return t=new fR(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pw(s),t}function gR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eT(t){if(!t)return Es;t=t._reactInternals;e:{if(Ji(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(qn(n))return eb(t,n,e)}return e}function tT(t,e,n,r,A,s,i,o,a){return t=Zw(n,r,!0,t,A,s,i,o,a),t.context=eT(null),n=t.current,r=kn(),A=ms(n),s=yA(r,A),s.callback=e??null,gs(n,s,A),t.current.lanes=A,Au(t,A,r),Jn(t,r),t}function Sf(t,e,n,r){var A=e.current,s=kn(),i=ms(A);return n=eT(n),e.context===null?e.context=n:e.pendingContext=n,e=yA(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(A,e,i),t!==null&&(kr(t,A,i,s),zd(t,A,i)),i}function Oh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ev(t,e){Vx(t,e),(t=t.alternate)&&Vx(t,e)}function pR(){return null}var nT=typeof reportError=="function"?reportError:function(t){console.error(t)};function tv(t){this._internalRoot=t}kf.prototype.render=tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Sf(t,e,null,null)};kf.prototype.unmount=tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ni(function(){Sf(null,t,null,null)}),e[CA]=null}};function kf(t){this._internalRoot=t}kf.prototype.unstable_scheduleHydration=function(t){if(t){var e=kE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ZA.length&&e!==0&&e<ZA[n].priority;n++);ZA.splice(n,0,t),n===0&&NE(t)}};function nv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function mR(t,e,n,r,A){if(A){if(typeof r=="function"){var s=r;r=function(){var l=Oh(i);s.call(l)}}var i=tT(e,r,t,0,null,!1,!1,"",Hx);return t._reactRootContainer=i,t[CA]=i.current,yc(t.nodeType===8?t.parentNode:t),Ni(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof r=="function"){var o=r;r=function(){var l=Oh(a);o.call(l)}}var a=Zw(t,0,!1,null,null,!1,!1,"",Hx);return t._reactRootContainer=a,t[CA]=a.current,yc(t.nodeType===8?t.parentNode:t),Ni(function(){Sf(e,a,n,r)}),a}function Nf(t,e,n,r,A){var s=n._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var o=A;A=function(){var a=Oh(i);o.call(a)}}Sf(e,i,t,A)}else i=mR(n,e,t,A,r);return Oh(i)}QE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=El(e.pendingLanes);n!==0&&(Bw(e,n|1),Jn(e,Lt()),!(Ke&6)&&(la=Lt()+500,Vs()))}break;case 13:Ni(function(){var r=IA(t,1);if(r!==null){var A=kn();kr(r,t,1,A)}}),ev(t,1)}};xw=function(t){if(t.tag===13){var e=IA(t,134217728);if(e!==null){var n=kn();kr(e,t,134217728,n)}ev(t,134217728)}};SE=function(t){if(t.tag===13){var e=ms(t),n=IA(t,e);if(n!==null){var r=kn();kr(n,t,e,r)}ev(t,e)}};kE=function(){return Ze};RE=function(t,e){var n=Ze;try{return Ze=t,e()}finally{Ze=n}};wm=function(t,e,n){switch(e){case"input":if(um(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var A=If(r);if(!A)throw Error(Z(90));uE(r),um(r,A)}}}break;case"textarea":hE(t,n);break;case"select":e=n.value,e!=null&&Ko(t,!!n.multiple,e,!1)}};yE=qw;BE=Ni;var wR={usingClientEntryPoint:!1,Events:[iu,No,If,wE,vE,qw]},ul={findFiberByHostInstance:pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vR={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:SA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CE(t),t===null?null:t.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||pR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Bf=ld.inject(vR),qr=ld}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR;ar.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nv(e))throw Error(Z(200));return gR(t,e,null,n)};ar.createRoot=function(t,e){if(!nv(t))throw Error(Z(299));var n=!1,r="",A=nT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=Zw(t,1,!1,null,null,n,!1,r,A),t[CA]=e.current,yc(t.nodeType===8?t.parentNode:t),new tv(e)};ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=CE(e),t=t===null?null:t.stateNode,t};ar.flushSync=function(t){return Ni(t)};ar.hydrate=function(t,e,n){if(!Rf(e))throw Error(Z(200));return Nf(null,t,e,!0,n)};ar.hydrateRoot=function(t,e,n){if(!nv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,A=!1,s="",i=nT;if(n!=null&&(n.unstable_strictMode===!0&&(A=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=tT(e,null,t,1,n??null,A,!1,s,i),t[CA]=e.current,yc(t),r)for(t=0;t<r.length;t++)n=r[t],A=n._getVersion,A=A(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,A]:e.mutableSourceEagerHydrationData.push(n,A);return new kf(e)};ar.render=function(t,e,n){if(!Rf(e))throw Error(Z(200));return Nf(null,t,e,!1,n)};ar.unmountComponentAtNode=function(t){if(!Rf(t))throw Error(Z(40));return t._reactRootContainer?(Ni(function(){Nf(null,null,t,!1,function(){t._reactRootContainer=null,t[CA]=null})}),!0):!1};ar.unstable_batchedUpdates=qw;ar.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Nf(t,e,n,!1,r)};ar.version="18.3.1-next-f1338f8080-20240426";function rT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rT)}catch(t){console.error(t)}}rT(),rE.exports=ar;var yR=rE.exports,jx=yR;Am.createRoot=jx.createRoot,Am.hydrateRoot=jx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fc.apply(this,arguments)}var ss;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ss||(ss={}));const Kx="popstate";function BR(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:o="",hash:a=""}=Xi(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Xm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(A,s){let i=A.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=A.location.href,l=a.indexOf("#");o=l===-1?a:a.slice(0,l)}return o+"#"+(typeof s=="string"?s:Mh(s))}function r(A,s){Pf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return _R(e,n,r,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xR(){return Math.random().toString(36).substr(2,8)}function Gx(t,e){return{usr:t.state,key:t.key,idx:e}}function Xm(t,e,n,r){return n===void 0&&(n=null),Fc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||xR()})}function Mh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _R(t,e,n,r){r===void 0&&(r={});let{window:A=document.defaultView,v5Compat:s=!1}=r,i=A.history,o=ss.Pop,a=null,l=d();l==null&&(l=0,i.replaceState(Fc({},i.state,{idx:l}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=ss.Pop;let I=d(),B=I==null?null:I-l;l=I,a&&a({action:o,location:y.location,delta:B})}function f(I,B){o=ss.Push;let v=Xm(y.location,I,B);n&&n(v,I),l=d()+1;let _=Gx(v,l),k=y.createHref(v);try{i.pushState(_,"",k)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;A.location.assign(k)}s&&a&&a({action:o,location:y.location,delta:1})}function w(I,B){o=ss.Replace;let v=Xm(y.location,I,B);n&&n(v,I),l=d();let _=Gx(v,l),k=y.createHref(v);i.replaceState(_,"",k),s&&a&&a({action:o,location:y.location,delta:0})}function m(I){let B=A.location.origin!=="null"?A.location.origin:A.location.href,v=typeof I=="string"?I:Mh(I);return v=v.replace(/ $/,"%20"),Ct(B,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,B)}let y={get action(){return o},get location(){return t(A,i)},listen(I){if(a)throw new Error("A history only accepts one active listener");return A.addEventListener(Kx,h),a=I,()=>{A.removeEventListener(Kx,h),a=null}},createHref(I){return e(A,I)},createURL:m,encodeLocation(I){let B=m(I);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:f,replace:w,go(I){return i.go(I)}};return y}var zx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zx||(zx={}));function CR(t,e,n){return n===void 0&&(n="/"),IR(t,e,n)}function IR(t,e,n,r){let A=typeof e=="string"?Xi(e):e,s=ca(A.pathname||"/",n);if(s==null)return null;let i=AT(t);ER(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let l=DR(s);o=NR(i[a],l)}return o}function AT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let A=(s,i,o)=>{let a={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};a.relativePath.startsWith("/")&&(Ct(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let l=vs([r,a.relativePath]),d=n.concat(a);s.children&&s.children.length>0&&(Ct(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),AT(s.children,e,d,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:kR(l,s.index),routesMeta:d})};return t.forEach((s,i)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))A(s,i);else for(let a of sT(s.path))A(s,i,a)}),e}function sT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,A=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return A?[s,""]:[s];let i=sT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?s:[s,a].join("/"))),A&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function ER(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bR=/^:[\w-]+$/,TR=3,FR=2,UR=1,QR=10,SR=-2,Wx=t=>t==="*";function kR(t,e){let n=t.split("/"),r=n.length;return n.some(Wx)&&(r+=SR),e&&(r+=FR),n.filter(A=>!Wx(A)).reduce((A,s)=>A+(bR.test(s)?TR:s===""?UR:QR),r)}function RR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,A)=>r===e[A])?t[t.length-1]-e[e.length-1]:0}function NR(t,e,n){let{routesMeta:r}=t,A={},s="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],l=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Ym({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},d),f=a.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:vs([s,h.pathname]),pathnameBase:HR(vs([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=vs([s,h.pathnameBase]))}return i}function Ym(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PR(t.path,t.caseSensitive,t.end),A=e.match(n);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),o=A.slice(1);return{params:r.reduce((l,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let y=o[h]||"";i=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=o[h];return w&&!m?l[f]=void 0:l[f]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:i,pattern:t}}function PR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Pf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),r]}function DR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ca(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const LR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OR=t=>LR.test(t);function MR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:A=""}=typeof t=="string"?Xi(t):t,s;if(n)if(OR(n))s=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Pf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?s=$x(n.substring(1),"/"):s=$x(n,e)}else s=e;return{pathname:s,search:jR(r),hash:KR(A)}}function $x(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?n.length>1&&n.pop():A!=="."&&n.push(A)}),n.length>1?n.join("/"):"/"}function pp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rv(t,e){let n=VR(t);return e?n.map((r,A)=>A===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Av(t,e,n,r){r===void 0&&(r=!1);let A;typeof t=="string"?A=Xi(t):(A=Fc({},t),Ct(!A.pathname||!A.pathname.includes("?"),pp("?","pathname","search",A)),Ct(!A.pathname||!A.pathname.includes("#"),pp("#","pathname","hash",A)),Ct(!A.search||!A.search.includes("#"),pp("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=MR(A,o),l=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(l||d)&&(a.pathname+="/"),a}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),HR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const iT=["post","put","patch","delete"];new Set(iT);const zR=["get",...iT];new Set(zR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uc.apply(this,arguments)}const Df=R.createContext(null),oT=R.createContext(null),kA=R.createContext(null),Lf=R.createContext(null),RA=R.createContext({outlet:null,matches:[],isDataRoute:!1}),aT=R.createContext(null);function WR(t,e){let{relative:n}=e===void 0?{}:e;Sa()||Ct(!1);let{basename:r,navigator:A}=R.useContext(kA),{hash:s,pathname:i,search:o}=Of(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:vs([r,i])),A.createHref({pathname:a,search:o,hash:s})}function Sa(){return R.useContext(Lf)!=null}function Hs(){return Sa()||Ct(!1),R.useContext(Lf).location}function lT(t){R.useContext(kA).static||R.useLayoutEffect(t)}function ka(){let{isDataRoute:t}=R.useContext(RA);return t?aN():$R()}function $R(){Sa()||Ct(!1);let t=R.useContext(Df),{basename:e,future:n,navigator:r}=R.useContext(kA),{matches:A}=R.useContext(RA),{pathname:s}=Hs(),i=JSON.stringify(rv(A,n.v7_relativeSplatPath)),o=R.useRef(!1);return lT(()=>{o.current=!0}),R.useCallback(function(l,d){if(d===void 0&&(d={}),!o.current)return;if(typeof l=="number"){r.go(l);return}let h=Av(l,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vs([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,s,t])}const qR=R.createContext(null);function JR(t){let e=R.useContext(RA).outlet;return e&&R.createElement(qR.Provider,{value:t},e)}function Of(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(kA),{matches:A}=R.useContext(RA),{pathname:s}=Hs(),i=JSON.stringify(rv(A,r.v7_relativeSplatPath));return R.useMemo(()=>Av(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function XR(t,e){return YR(t,e)}function YR(t,e,n,r){Sa()||Ct(!1);let{navigator:A}=R.useContext(kA),{matches:s}=R.useContext(RA),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Hs(),d;if(e){var h;let I=typeof e=="string"?Xi(e):e;a==="/"||(h=I.pathname)!=null&&h.startsWith(a)||Ct(!1),d=I}else d=l;let f=d.pathname||"/",w=f;if(a!=="/"){let I=a.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let m=CR(t,{pathname:w}),y=rN(m&&m.map(I=>Object.assign({},I,{params:Object.assign({},o,I.params),pathname:vs([a,A.encodeLocation?A.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?a:vs([a,A.encodeLocation?A.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&y?R.createElement(Lf.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ss.Pop}},y):y}function ZR(){let t=oN(),e=GR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:A},n):null,null)}const eN=R.createElement(ZR,null);class tN extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(RA.Provider,{value:this.props.routeContext},R.createElement(aT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nN(t){let{routeContext:e,match:n,children:r}=t,A=R.useContext(Df);return A&&A.static&&A.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(RA.Provider,{value:e},r)}function rN(t,e,n,r){var A;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(A=n)==null?void 0:A.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Ct(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=d),h.route.id){let{loaderData:f,errors:w}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,m=!1,y=null,I=null;n&&(w=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||eN,a&&(l<0&&f===0?(lN("route-fallback"),m=!0,I=null):l===f&&(m=!0,I=h.route.hydrateFallbackElement||null)));let B=e.concat(i.slice(0,f+1)),v=()=>{let _;return w?_=y:m?_=I:h.route.Component?_=R.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,R.createElement(nN,{match:h,routeContext:{outlet:d,matches:B,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?R.createElement(tN,{location:n.location,revalidation:n.revalidation,component:y,error:w,children:v(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):v()},null)}var cT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cT||{}),uT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uT||{});function AN(t){let e=R.useContext(Df);return e||Ct(!1),e}function sN(t){let e=R.useContext(oT);return e||Ct(!1),e}function iN(t){let e=R.useContext(RA);return e||Ct(!1),e}function dT(t){let e=iN(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function oN(){var t;let e=R.useContext(aT),n=sN(),r=dT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aN(){let{router:t}=AN(cT.UseNavigateStable),e=dT(uT.UseNavigateStable),n=R.useRef(!1);return lT(()=>{n.current=!0}),R.useCallback(function(A,s){s===void 0&&(s={}),n.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,Uc({fromRouteId:e},s)))},[t,e])}const qx={};function lN(t,e,n){qx[t]||(qx[t]=!0)}function cN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zm(t){let{to:e,replace:n,state:r,relative:A}=t;Sa()||Ct(!1);let{future:s,static:i}=R.useContext(kA),{matches:o}=R.useContext(RA),{pathname:a}=Hs(),l=ka(),d=Av(e,rv(o,s.v7_relativeSplatPath),a,A==="path"),h=JSON.stringify(d);return R.useEffect(()=>l(JSON.parse(h),{replace:n,state:r,relative:A}),[l,h,A,n,r]),null}function uN(t){return JR(t.context)}function cr(t){Ct(!1)}function dN(t){let{basename:e="/",children:n=null,location:r,navigationType:A=ss.Pop,navigator:s,static:i=!1,future:o}=t;Sa()&&Ct(!1);let a=e.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:a,navigator:s,static:i,future:Uc({v7_relativeSplatPath:!1},o)}),[a,o,s,i]);typeof r=="string"&&(r=Xi(r));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:m="default"}=r,y=R.useMemo(()=>{let I=ca(d,a);return I==null?null:{location:{pathname:I,search:h,hash:f,state:w,key:m},navigationType:A}},[a,d,h,f,w,m,A]);return y==null?null:R.createElement(kA.Provider,{value:l},R.createElement(Lf.Provider,{children:n,value:y}))}function hN(t){let{children:e,location:n}=t;return XR(e0(e),n)}new Promise(()=>{});function e0(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,A)=>{if(!R.isValidElement(r))return;let s=[...e,A];if(r.type===R.Fragment){n.push.apply(n,e0(r.props.children,s));return}r.type!==cr&&Ct(!1),!r.props.index||!r.props.children||Ct(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=e0(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vh.apply(this,arguments)}function hT(t,e){if(t==null)return{};var n={},r=Object.keys(t),A,s;for(s=0;s<r.length;s++)A=r[s],!(e.indexOf(A)>=0)&&(n[A]=t[A]);return n}function fN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gN(t,e){return t.button===0&&(!e||e==="_self")&&!fN(t)}function t0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(A=>[n,A]):[[n,r]])},[]))}function pN(t,e){let n=t0(t);return e&&e.forEach((r,A)=>{n.has(A)||e.getAll(A).forEach(s=>{n.append(A,s)})}),n}const mN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vN="6";try{window.__reactRouterVersion=vN}catch{}const yN=R.createContext({isTransitioning:!1}),BN="startTransition",Jx=lk[BN];function xN(t){let{basename:e,children:n,future:r,window:A}=t,s=R.useRef();s.current==null&&(s.current=BR({window:A,v5Compat:!0}));let i=s.current,[o,a]=R.useState({action:i.action,location:i.location}),{v7_startTransition:l}=r||{},d=R.useCallback(h=>{l&&Jx?Jx(()=>a(h)):a(h)},[a,l]);return R.useLayoutEffect(()=>i.listen(d),[i,d]),R.useEffect(()=>cN(r),[r]),R.createElement(dN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const _N=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IN=R.forwardRef(function(e,n){let{onClick:r,relative:A,reloadDocument:s,replace:i,state:o,target:a,to:l,preventScrollReset:d,viewTransition:h}=e,f=hT(e,mN),{basename:w}=R.useContext(kA),m,y=!1;if(typeof l=="string"&&CN.test(l)&&(m=l,_N))try{let _=new URL(window.location.href),k=l.startsWith("//")?new URL(_.protocol+l):new URL(l),U=ca(k.pathname,w);k.origin===_.origin&&U!=null?l=U+k.search+k.hash:y=!0}catch{}let I=WR(l,{relative:A}),B=TN(l,{replace:i,state:o,target:a,preventScrollReset:d,relative:A,viewTransition:h});function v(_){r&&r(_),_.defaultPrevented||B(_)}return R.createElement("a",Vh({},f,{href:m||I,onClick:y||s?r:v,ref:n,target:a}))}),EN=R.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:A=!1,className:s="",end:i=!1,style:o,to:a,viewTransition:l,children:d}=e,h=hT(e,wN),f=Of(a,{relative:h.relative}),w=Hs(),m=R.useContext(oT),{navigator:y,basename:I}=R.useContext(kA),B=m!=null&&UN(f)&&l===!0,v=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,_=w.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;A||(_=_.toLowerCase(),k=k?k.toLowerCase():null,v=v.toLowerCase()),k&&I&&(k=ca(k,I)||k);const U=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let N=_===v||!i&&_.startsWith(v)&&_.charAt(U)==="/",C=k!=null&&(k===v||!i&&k.startsWith(v)&&k.charAt(v.length)==="/"),x={isActive:N,isPending:C,isTransitioning:B},b=N?r:void 0,Q;typeof s=="function"?Q=s(x):Q=[s,N?"active":null,C?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let S=typeof o=="function"?o(x):o;return R.createElement(IN,Vh({},h,{"aria-current":b,className:Q,ref:n,style:S,to:a,viewTransition:l}),typeof d=="function"?d(x):d)});var n0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(n0||(n0={}));var Xx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xx||(Xx={}));function bN(t){let e=R.useContext(Df);return e||Ct(!1),e}function TN(t,e){let{target:n,replace:r,state:A,preventScrollReset:s,relative:i,viewTransition:o}=e===void 0?{}:e,a=ka(),l=Hs(),d=Of(t,{relative:i});return R.useCallback(h=>{if(gN(h,n)){h.preventDefault();let f=r!==void 0?r:Mh(l)===Mh(d);a(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,d,r,A,n,t,s,i,o])}function FN(t){let e=R.useRef(t0(t)),n=R.useRef(!1),r=Hs(),A=R.useMemo(()=>pN(r.search,n.current?null:e.current),[r.search]),s=ka(),i=R.useCallback((o,a)=>{const l=t0(typeof o=="function"?o(A):o);n.current=!0,s("?"+l,a)},[s,A]);return[A,i]}function UN(t,e){e===void 0&&(e={});let n=R.useContext(yN);n==null&&Ct(!1);let{basename:r}=bN(n0.useViewTransitionState),A=Of(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=ca(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=ca(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ym(A.pathname,i)!=null||Ym(A.pathname,s)!=null}var Yx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let A=t.charCodeAt(r);A<128?e[n++]=A:A<2048?(e[n++]=A>>6|192,e[n++]=A&63|128):(A&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=A>>18|240,e[n++]=A>>12&63|128,e[n++]=A>>6&63|128,e[n++]=A&63|128):(e[n++]=A>>12|224,e[n++]=A>>6&63|128,e[n++]=A&63|128)}return e},QN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const A=t[n++];if(A<128)e[r++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[n++];e[r++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[n++],i=t[n++],o=t[n++],a=((A&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},gT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,o=i?t[A+1]:0,a=A+2<t.length,l=a?t[A+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let f=(o&15)<<2|l>>6,w=l&63;a||(w=64,i||(f=64)),r.push(n[d],n[h],n[f],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let A=0;A<t.length;){const s=n[t.charAt(A++)],o=A<t.length?n[t.charAt(A)]:0;++A;const l=A<t.length?n[t.charAt(A)]:64;++A;const h=A<t.length?n[t.charAt(A)]:64;if(++A,s==null||o==null||l==null||h==null)throw new SN;const f=s<<2|o>>4;if(r.push(f),l!==64){const w=o<<4&240|l>>2;if(r.push(w),h!==64){const m=l<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(t){const e=fT(t);return gT.encodeByteArray(e,!0)},Hh=function(t){return kN(t).replace(/\./g,"")},pT=function(t){try{return gT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!RN(n)||(t[n]=jh(t[n],e[n]));return t}function RN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=()=>mT().__FIREBASE_DEFAULTS__,PN=()=>{if(typeof process>"u"||typeof Yx>"u")return;const t=Yx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pT(t[1]);return e&&JSON.parse(e)},sv=()=>{try{return NN()||PN()||DN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wT=()=>{var t;return(t=sv())===null||t===void 0?void 0:t.config},LN=t=>{var e;return(e=sv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hh(JSON.stringify(n)),Hh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function iv(){var t;const e=(t=sv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HN(){return typeof window<"u"||vT()}function vT(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function jN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ov(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BT(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xT(){return!iv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qc(){try{return typeof indexedDB=="object"}catch{return!1}}function KN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(r);A.onsuccess=()=>{A.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},A.onupgradeneeded=()=>{n=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="FirebaseError";class Rn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GN,Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yi.prototype.create)}}class Yi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?zN(s,r):"Error",o=`${this.serviceName}: ${i} (${A}).`;return new Rn(A,o,r)}}function zN(t,e){return t.replace(WN,(n,r)=>{const A=e[r];return A!=null?String(A):`<${r}?>`})}const WN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $N(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const A of n){if(!r.includes(A))return!1;const s=t[A],i=e[A];if(e_(s)&&e_(i)){if(!Sc(s,i))return!1}else if(s!==i)return!1}for(const A of r)if(!n.includes(A))return!1;return!0}function e_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(A=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[A,s]=r.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function Tl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _T(t,e){const n=new qN(t,e);return n.subscribe.bind(n)}class qN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let A;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JN(e,["next","error","complete"])?A=e:A={next:e,error:n,complete:r},A.next===void 0&&(A.next=mp),A.error===void 0&&(A.error=mp),A.complete===void 0&&(A.complete=mp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ON;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:n});A&&r.resolve(A)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZN(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:A});r.resolve(s)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(A)}return A}onInit(e,n){var r;const A=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(A))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const A of r)try{A(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YN(t){return t===ii?void 0:t}function ZN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=[];var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const IT={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},eP=Pe.INFO,tP={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},nP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),A=tP[e];if(A)console[A](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Mf=class{constructor(e){this.name=e,this._logLevel=eP,this._logHandler=nP,this._userLogHandler=null,av.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};function rP(t){av.forEach(e=>{e.setLogLevel(t)})}function AP(t,e){for(const n of av){let r=null;e&&e.level&&(r=IT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(A,s,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");s>=(r??A.logLevel)&&t({level:Pe[s].toLowerCase(),message:o,args:i,type:A.name})}}}const sP=(t,e)=>e.some(n=>t instanceof n);let t_,n_;function iP(){return t_||(t_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return n_||(n_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ET=new WeakMap,r0=new WeakMap,bT=new WeakMap,wp=new WeakMap,lv=new WeakMap;function aP(t){const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(ys(t.result)),A()},i=()=>{r(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&ET.set(n,t)}).catch(()=>{}),lv.set(e,t),e}function lP(t){if(r0.has(t))return;const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),A()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});r0.set(t,e)}let A0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return r0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cP(t){A0=t(A0)}function uP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vp(this),e,...n);return bT.set(r,e.sort?e.sort():[e]),ys(r)}:oP().includes(t)?function(...e){return t.apply(vp(this),e),ys(ET.get(this))}:function(...e){return ys(t.apply(vp(this),e))}}function dP(t){return typeof t=="function"?uP(t):(t instanceof IDBTransaction&&lP(t),sP(t,iP())?new Proxy(t,A0):t)}function ys(t){if(t instanceof IDBRequest)return aP(t);if(wp.has(t))return wp.get(t);const e=dP(t);return e!==t&&(wp.set(t,e),lv.set(e,t)),e}const vp=t=>lv.get(t);function hP(t,e,{blocked:n,upgrade:r,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),o=ys(i);return r&&i.addEventListener("upgradeneeded",a=>{r(ys(i.result),a.oldVersion,a.newVersion,ys(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),A&&a.addEventListener("versionchange",l=>A(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const fP=["get","getKey","getAll","getAllKeys","count"],gP=["put","add","delete","clear"],yp=new Map;function r_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,A=gP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(A||fP.includes(n)))return;const s=async function(i,...o){const a=this.transaction(i,A?"readwrite":"readonly");let l=a.store;return r&&(l=l.index(o.shift())),(await Promise.all([l[n](...o),A&&a.done]))[0]};return yp.set(e,s),s}cP(t=>({...t,get:(e,n,r)=>r_(e,n)||t.get(e,n,r),has:(e,n)=>!!r_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kh="@firebase/app",s0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Mf("@firebase/app"),wP="@firebase/app-compat",vP="@firebase/analytics-compat",yP="@firebase/analytics",BP="@firebase/app-check-compat",xP="@firebase/app-check",_P="@firebase/auth",CP="@firebase/auth-compat",IP="@firebase/database",EP="@firebase/data-connect",bP="@firebase/database-compat",TP="@firebase/functions",FP="@firebase/functions-compat",UP="@firebase/installations",QP="@firebase/installations-compat",SP="@firebase/messaging",kP="@firebase/messaging-compat",RP="@firebase/performance",NP="@firebase/performance-compat",PP="@firebase/remote-config",DP="@firebase/remote-config-compat",LP="@firebase/storage",OP="@firebase/storage-compat",MP="@firebase/firestore",VP="@firebase/vertexai-preview",HP="@firebase/firestore-compat",jP="firebase",KP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]",GP={[Kh]:"fire-core",[wP]:"fire-core-compat",[yP]:"fire-analytics",[vP]:"fire-analytics-compat",[xP]:"fire-app-check",[BP]:"fire-app-check-compat",[_P]:"fire-auth",[CP]:"fire-auth-compat",[IP]:"fire-rtdb",[EP]:"fire-data-connect",[bP]:"fire-rtdb-compat",[TP]:"fire-fn",[FP]:"fire-fn-compat",[UP]:"fire-iid",[QP]:"fire-iid-compat",[SP]:"fire-fcm",[kP]:"fire-fcm-compat",[RP]:"fire-perf",[NP]:"fire-perf-compat",[PP]:"fire-rc",[DP]:"fire-rc-compat",[LP]:"fire-gcs",[OP]:"fire-gcs-compat",[MP]:"fire-fst",[HP]:"fire-fst-compat",[VP]:"fire-vertex","fire-js":"fire-js",[jP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Map,ua=new Map,da=new Map;function kc(t,e){try{t.container.addComponent(e)}catch(n){bA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function TT(t,e){t.container.addOrOverwriteComponent(e)}function Fs(t){const e=t.name;if(da.has(e))return bA.debug(`There were multiple attempts to register component ${e}.`),!1;da.set(e,t);for(const n of Ts.values())kc(n,t);for(const n of ua.values())kc(n,t);return!0}function FT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zP(t,e,n=bs){FT(t,e).clearInstance(n)}function UT(t){return t.options!==void 0}function Qt(t){return t.settings!==void 0}function WP(){da.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Yi("app","Firebase",$P);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP extends QT{constructor(e,n,r,A){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,i,A);else{const o=e;super(o.options,i,A)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Rr(Kh,s0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){uv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw yr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=KP;function cv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bs,automaticDataCollectionEnabled:!1},e),A=r.name;if(typeof A!="string"||!A)throw yr.create("bad-app-name",{appName:String(A)});if(n||(n=wT()),!n)throw yr.create("no-options");const s=Ts.get(A);if(s){if(Sc(n,s.options)&&Sc(r,s.config))return s;throw yr.create("duplicate-app",{appName:A})}const i=new CT(A);for(const a of da.values())i.addComponent(a);const o=new QT(n,r,i);return Ts.set(A,o),o}function JP(t,e){if(HN()&&!vT())throw yr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;UT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const A=l=>[...l].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw yr.create("finalization-registry-not-supported",{});const s=""+A(JSON.stringify(r)),i=ua.get(s);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new CT(s);for(const l of da.values())o.addComponent(l);const a=new qP(n,e,s,o);return ua.set(s,a),a}function XP(t=bs){const e=Ts.get(t);if(!e&&t===bs&&wT())return cv();if(!e)throw yr.create("no-app",{appName:t});return e}function YP(){return Array.from(Ts.values())}async function uv(t){let e=!1;const n=t.name;Ts.has(n)?(e=!0,Ts.delete(n)):ua.has(n)&&t.decRefCount()<=0&&(ua.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Rr(t,e,n){var r;let A=(r=GP[t])!==null&&r!==void 0?r:t;n&&(A+=`-${n}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${A}" with version "${e}":`];s&&o.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bA.warn(o.join(" "));return}Fs(new Zr(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}function ST(t,e){if(t!==null&&typeof t!="function")throw yr.create("invalid-log-argument");AP(t,e)}function kT(t){rP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="firebase-heartbeat-database",eD=1,Rc="firebase-heartbeat-store";let Bp=null;function RT(){return Bp||(Bp=hP(ZP,eD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),Bp}async function tD(t){try{const n=(await RT()).transaction(Rc),r=await n.objectStore(Rc).get(NT(t));return await n.done,r}catch(e){if(e instanceof Rn)bA.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bA.warn(n.message)}}}async function A_(t,e){try{const r=(await RT()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,NT(t)),await r.done}catch(n){if(n instanceof Rn)bA.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bA.warn(r.message)}}}function NT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=1024,rD=30*24*60*60*1e3;class AD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=rD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=s_(),{heartbeatsToSend:r,unsentEntries:A}=sD(this._heartbeatsCache.heartbeats),s=Hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bA.warn(n),""}}}function s_(){return new Date().toISOString().substring(0,10)}function sD(t,e=nD){const n=[];let r=t.slice();for(const A of t){const s=n.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),i_(n)>e){s.dates.pop();break}}else if(n.push({agent:A.agent,dates:[A.date]}),i_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qc()?KN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return A_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function i_(t){return Hh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){Fs(new Zr("platform-logger",e=>new pP(e),"PRIVATE")),Fs(new Zr("heartbeat",e=>new AD(e),"PRIVATE")),Rr(Kh,s0,t),Rr(Kh,s0,"esm2017"),Rr("fire-js","")}oD("");const aD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Rn,SDK_VERSION:js,_DEFAULT_ENTRY_NAME:bs,_addComponent:kc,_addOrOverwriteComponent:TT,_apps:Ts,_clearComponents:WP,_components:da,_getProvider:FT,_isFirebaseApp:UT,_isFirebaseServerApp:Qt,_registerComponent:Fs,_removeServiceInstance:zP,_serverApps:ua,deleteApp:uv,getApp:XP,getApps:YP,initializeApp:cv,initializeServerApp:JP,onLog:ST,registerVersion:Rr,setLogLevel:kT},Symbol.toStringTag,{value:"Module"}));var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ii,PT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function b(){}b.prototype=x.prototype,C.D=x.prototype,C.prototype=new b,C.prototype.constructor=C,C.C=function(Q,S,P){for(var T=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)T[Fe-2]=arguments[Fe];return x.prototype[S].apply(Q,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(C,x,b){b||(b=0);var Q=Array(16);if(typeof x=="string")for(var S=0;16>S;++S)Q[S]=x.charCodeAt(b++)|x.charCodeAt(b++)<<8|x.charCodeAt(b++)<<16|x.charCodeAt(b++)<<24;else for(S=0;16>S;++S)Q[S]=x[b++]|x[b++]<<8|x[b++]<<16|x[b++]<<24;x=C.g[0],b=C.g[1],S=C.g[2];var P=C.g[3],T=x+(P^b&(S^P))+Q[0]+3614090360&4294967295;x=b+(T<<7&4294967295|T>>>25),T=P+(S^x&(b^S))+Q[1]+3905402710&4294967295,P=x+(T<<12&4294967295|T>>>20),T=S+(b^P&(x^b))+Q[2]+606105819&4294967295,S=P+(T<<17&4294967295|T>>>15),T=b+(x^S&(P^x))+Q[3]+3250441966&4294967295,b=S+(T<<22&4294967295|T>>>10),T=x+(P^b&(S^P))+Q[4]+4118548399&4294967295,x=b+(T<<7&4294967295|T>>>25),T=P+(S^x&(b^S))+Q[5]+1200080426&4294967295,P=x+(T<<12&4294967295|T>>>20),T=S+(b^P&(x^b))+Q[6]+2821735955&4294967295,S=P+(T<<17&4294967295|T>>>15),T=b+(x^S&(P^x))+Q[7]+4249261313&4294967295,b=S+(T<<22&4294967295|T>>>10),T=x+(P^b&(S^P))+Q[8]+1770035416&4294967295,x=b+(T<<7&4294967295|T>>>25),T=P+(S^x&(b^S))+Q[9]+2336552879&4294967295,P=x+(T<<12&4294967295|T>>>20),T=S+(b^P&(x^b))+Q[10]+4294925233&4294967295,S=P+(T<<17&4294967295|T>>>15),T=b+(x^S&(P^x))+Q[11]+2304563134&4294967295,b=S+(T<<22&4294967295|T>>>10),T=x+(P^b&(S^P))+Q[12]+1804603682&4294967295,x=b+(T<<7&4294967295|T>>>25),T=P+(S^x&(b^S))+Q[13]+4254626195&4294967295,P=x+(T<<12&4294967295|T>>>20),T=S+(b^P&(x^b))+Q[14]+2792965006&4294967295,S=P+(T<<17&4294967295|T>>>15),T=b+(x^S&(P^x))+Q[15]+1236535329&4294967295,b=S+(T<<22&4294967295|T>>>10),T=x+(S^P&(b^S))+Q[1]+4129170786&4294967295,x=b+(T<<5&4294967295|T>>>27),T=P+(b^S&(x^b))+Q[6]+3225465664&4294967295,P=x+(T<<9&4294967295|T>>>23),T=S+(x^b&(P^x))+Q[11]+643717713&4294967295,S=P+(T<<14&4294967295|T>>>18),T=b+(P^x&(S^P))+Q[0]+3921069994&4294967295,b=S+(T<<20&4294967295|T>>>12),T=x+(S^P&(b^S))+Q[5]+3593408605&4294967295,x=b+(T<<5&4294967295|T>>>27),T=P+(b^S&(x^b))+Q[10]+38016083&4294967295,P=x+(T<<9&4294967295|T>>>23),T=S+(x^b&(P^x))+Q[15]+3634488961&4294967295,S=P+(T<<14&4294967295|T>>>18),T=b+(P^x&(S^P))+Q[4]+3889429448&4294967295,b=S+(T<<20&4294967295|T>>>12),T=x+(S^P&(b^S))+Q[9]+568446438&4294967295,x=b+(T<<5&4294967295|T>>>27),T=P+(b^S&(x^b))+Q[14]+3275163606&4294967295,P=x+(T<<9&4294967295|T>>>23),T=S+(x^b&(P^x))+Q[3]+4107603335&4294967295,S=P+(T<<14&4294967295|T>>>18),T=b+(P^x&(S^P))+Q[8]+1163531501&4294967295,b=S+(T<<20&4294967295|T>>>12),T=x+(S^P&(b^S))+Q[13]+2850285829&4294967295,x=b+(T<<5&4294967295|T>>>27),T=P+(b^S&(x^b))+Q[2]+4243563512&4294967295,P=x+(T<<9&4294967295|T>>>23),T=S+(x^b&(P^x))+Q[7]+1735328473&4294967295,S=P+(T<<14&4294967295|T>>>18),T=b+(P^x&(S^P))+Q[12]+2368359562&4294967295,b=S+(T<<20&4294967295|T>>>12),T=x+(b^S^P)+Q[5]+4294588738&4294967295,x=b+(T<<4&4294967295|T>>>28),T=P+(x^b^S)+Q[8]+2272392833&4294967295,P=x+(T<<11&4294967295|T>>>21),T=S+(P^x^b)+Q[11]+1839030562&4294967295,S=P+(T<<16&4294967295|T>>>16),T=b+(S^P^x)+Q[14]+4259657740&4294967295,b=S+(T<<23&4294967295|T>>>9),T=x+(b^S^P)+Q[1]+2763975236&4294967295,x=b+(T<<4&4294967295|T>>>28),T=P+(x^b^S)+Q[4]+1272893353&4294967295,P=x+(T<<11&4294967295|T>>>21),T=S+(P^x^b)+Q[7]+4139469664&4294967295,S=P+(T<<16&4294967295|T>>>16),T=b+(S^P^x)+Q[10]+3200236656&4294967295,b=S+(T<<23&4294967295|T>>>9),T=x+(b^S^P)+Q[13]+681279174&4294967295,x=b+(T<<4&4294967295|T>>>28),T=P+(x^b^S)+Q[0]+3936430074&4294967295,P=x+(T<<11&4294967295|T>>>21),T=S+(P^x^b)+Q[3]+3572445317&4294967295,S=P+(T<<16&4294967295|T>>>16),T=b+(S^P^x)+Q[6]+76029189&4294967295,b=S+(T<<23&4294967295|T>>>9),T=x+(b^S^P)+Q[9]+3654602809&4294967295,x=b+(T<<4&4294967295|T>>>28),T=P+(x^b^S)+Q[12]+3873151461&4294967295,P=x+(T<<11&4294967295|T>>>21),T=S+(P^x^b)+Q[15]+530742520&4294967295,S=P+(T<<16&4294967295|T>>>16),T=b+(S^P^x)+Q[2]+3299628645&4294967295,b=S+(T<<23&4294967295|T>>>9),T=x+(S^(b|~P))+Q[0]+4096336452&4294967295,x=b+(T<<6&4294967295|T>>>26),T=P+(b^(x|~S))+Q[7]+1126891415&4294967295,P=x+(T<<10&4294967295|T>>>22),T=S+(x^(P|~b))+Q[14]+2878612391&4294967295,S=P+(T<<15&4294967295|T>>>17),T=b+(P^(S|~x))+Q[5]+4237533241&4294967295,b=S+(T<<21&4294967295|T>>>11),T=x+(S^(b|~P))+Q[12]+1700485571&4294967295,x=b+(T<<6&4294967295|T>>>26),T=P+(b^(x|~S))+Q[3]+2399980690&4294967295,P=x+(T<<10&4294967295|T>>>22),T=S+(x^(P|~b))+Q[10]+4293915773&4294967295,S=P+(T<<15&4294967295|T>>>17),T=b+(P^(S|~x))+Q[1]+2240044497&4294967295,b=S+(T<<21&4294967295|T>>>11),T=x+(S^(b|~P))+Q[8]+1873313359&4294967295,x=b+(T<<6&4294967295|T>>>26),T=P+(b^(x|~S))+Q[15]+4264355552&4294967295,P=x+(T<<10&4294967295|T>>>22),T=S+(x^(P|~b))+Q[6]+2734768916&4294967295,S=P+(T<<15&4294967295|T>>>17),T=b+(P^(S|~x))+Q[13]+1309151649&4294967295,b=S+(T<<21&4294967295|T>>>11),T=x+(S^(b|~P))+Q[4]+4149444226&4294967295,x=b+(T<<6&4294967295|T>>>26),T=P+(b^(x|~S))+Q[11]+3174756917&4294967295,P=x+(T<<10&4294967295|T>>>22),T=S+(x^(P|~b))+Q[2]+718787259&4294967295,S=P+(T<<15&4294967295|T>>>17),T=b+(P^(S|~x))+Q[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+P&4294967295}r.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var b=x-this.blockSize,Q=this.B,S=this.h,P=0;P<x;){if(S==0)for(;P<=b;)A(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<x;)if(Q[S++]=C.charCodeAt(P++),S==this.blockSize){A(this,Q),S=0;break}}else for(;P<x;)if(Q[S++]=C[P++],S==this.blockSize){A(this,Q),S=0;break}}this.h=S,this.o+=x},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var b=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=b&255,b/=256;for(this.u(C),C=Array(16),x=b=0;4>x;++x)for(var Q=0;32>Q;Q+=8)C[b++]=this.g[x]>>>Q&255;return C};function s(C,x){var b=o;return Object.prototype.hasOwnProperty.call(b,C)?b[C]:b[C]=x(C)}function i(C,x){this.h=x;for(var b=[],Q=!0,S=C.length-1;0<=S;S--){var P=C[S]|0;Q&&P==x||(b[S]=P,Q=!1)}this.g=b}var o={};function a(C){return-128<=C&&128>C?s(C,function(x){return new i([x|0],0>x?-1:0)}):new i([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return I(l(-C));for(var x=[],b=1,Q=0;C>=b;Q++)x[Q]=C/b|0,b*=4294967296;return new i(x,0)}function d(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return I(d(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(x,8)),Q=h,S=0;S<C.length;S+=8){var P=Math.min(8,C.length-S),T=parseInt(C.substring(S,S+P),x);8>P?(P=l(Math.pow(x,P)),Q=Q.j(P).add(l(T))):(Q=Q.j(b),Q=Q.add(l(T)))}return Q}var h=a(0),f=a(1),w=a(16777216);t=i.prototype,t.m=function(){if(y(this))return-I(this).m();for(var C=0,x=1,b=0;b<this.g.length;b++){var Q=this.i(b);C+=(0<=Q?Q:4294967296+Q)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(y(this))return"-"+I(this).toString(C);for(var x=l(Math.pow(C,6)),b=this,Q="";;){var S=k(b,x).g;b=B(b,S.j(x));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(C);if(b=S,m(b))return P+Q;for(;6>P.length;)P="0"+P;Q=P+Q}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=B(this,C),y(C)?-1:m(C)?0:1};function I(C){for(var x=C.g.length,b=[],Q=0;Q<x;Q++)b[Q]=~C.g[Q];return new i(b,~C.h).add(f)}t.abs=function(){return y(this)?I(this):this},t.add=function(C){for(var x=Math.max(this.g.length,C.g.length),b=[],Q=0,S=0;S<=x;S++){var P=Q+(this.i(S)&65535)+(C.i(S)&65535),T=(P>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);Q=T>>>16,P&=65535,T&=65535,b[S]=T<<16|P}return new i(b,b[b.length-1]&-2147483648?-1:0)};function B(C,x){return C.add(I(x))}t.j=function(C){if(m(this)||m(C))return h;if(y(this))return y(C)?I(this).j(I(C)):I(I(this).j(C));if(y(C))return I(this.j(I(C)));if(0>this.l(w)&&0>C.l(w))return l(this.m()*C.m());for(var x=this.g.length+C.g.length,b=[],Q=0;Q<2*x;Q++)b[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var S=0;S<C.g.length;S++){var P=this.i(Q)>>>16,T=this.i(Q)&65535,Fe=C.i(S)>>>16,We=C.i(S)&65535;b[2*Q+2*S]+=T*We,v(b,2*Q+2*S),b[2*Q+2*S+1]+=P*We,v(b,2*Q+2*S+1),b[2*Q+2*S+1]+=T*Fe,v(b,2*Q+2*S+1),b[2*Q+2*S+2]+=P*Fe,v(b,2*Q+2*S+2)}for(Q=0;Q<x;Q++)b[Q]=b[2*Q+1]<<16|b[2*Q];for(Q=x;Q<2*x;Q++)b[Q]=0;return new i(b,0)};function v(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function _(C,x){this.g=C,this.h=x}function k(C,x){if(m(x))throw Error("division by zero");if(m(C))return new _(h,h);if(y(C))return x=k(I(C),x),new _(I(x.g),I(x.h));if(y(x))return x=k(C,I(x)),new _(I(x.g),x.h);if(30<C.g.length){if(y(C)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var b=f,Q=x;0>=Q.l(C);)b=U(b),Q=U(Q);var S=N(b,1),P=N(Q,1);for(Q=N(Q,2),b=N(b,2);!m(Q);){var T=P.add(Q);0>=T.l(C)&&(S=S.add(b),P=T),Q=N(Q,1),b=N(b,1)}return x=B(C,S.j(x)),new _(S,x)}for(S=h;0<=C.l(x);){for(b=Math.max(1,Math.floor(C.m()/x.m())),Q=Math.ceil(Math.log(b)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),P=l(b),T=P.j(x);y(T)||0<T.l(C);)b-=Q,P=l(b),T=P.j(x);m(P)&&(P=f),S=S.add(P),C=B(C,T)}return new _(S,C)}t.A=function(C){return k(this,C).h},t.and=function(C){for(var x=Math.max(this.g.length,C.g.length),b=[],Q=0;Q<x;Q++)b[Q]=this.i(Q)&C.i(Q);return new i(b,this.h&C.h)},t.or=function(C){for(var x=Math.max(this.g.length,C.g.length),b=[],Q=0;Q<x;Q++)b[Q]=this.i(Q)|C.i(Q);return new i(b,this.h|C.h)},t.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),b=[],Q=0;Q<x;Q++)b[Q]=this.i(Q)^C.i(Q);return new i(b,this.h^C.h)};function U(C){for(var x=C.g.length+1,b=[],Q=0;Q<x;Q++)b[Q]=C.i(Q)<<1|C.i(Q-1)>>>31;return new i(b,C.h)}function N(C,x){var b=x>>5;x%=32;for(var Q=C.g.length-b,S=[],P=0;P<Q;P++)S[P]=0<x?C.i(P+b)>>>x|C.i(P+b+1)<<32-x:C.i(P+b);return new i(S,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PT=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=d,Ii=i}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DT,Fl,LT,Zd,i0,OT,MT,VT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function A(u,g){if(g)e:{var p=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var O=u[E];if(!(O in p))break e;p=p[O]}u=u[u.length-1],E=p[u],g=g(E),g!=E&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,E=!1,O={next:function(){if(!E&&p<u.length){var K=p++;return{value:g(K,u[K]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function l(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),u.apply(g,O)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function m(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(E,O,K){for(var ie=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ie[rt-2]=arguments[rt];return g.prototype[O].apply(E,ie)}}function y(u){const g=u.length;if(0<g){const p=Array(g);for(let E=0;E<g;E++)p[E]=u[E];return p}return[]}function I(u,g){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(a(E)){const O=u.length||0,K=E.length||0;u.length=O+K;for(let ie=0;ie<K;ie++)u[O+ie]=E[ie]}else u.push(E)}}class B{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var U=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(u,g,p){for(const E in u)g.call(p,u[E],E,u)}function C(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function x(u){const g={};for(const p in u)g[p]=u[p];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,g){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)u[p]=E[p];for(let K=0;K<b.length;K++)p=b[K],Object.prototype.hasOwnProperty.call(E,p)&&(u[p]=E[p])}}function S(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function P(u){o.setTimeout(()=>{throw u},0)}function T(){var u=F;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Fe{constructor(){this.h=this.g=null}add(g,p){const E=We.get();E.set(g,p),this.h?this.h.next=E:this.g=E,this.h=E}}var We=new B(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,G=!1,F=new Fe,D=()=>{const u=o.Promise.resolve(void 0);Te=()=>{u.then(V)}};var V=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){P(p)}var g=We;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}G=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,g),o.removeEventListener("test",p,g)}catch{}return u}();function he(u,g){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{k(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&he.aa.h.call(this)}}m(he,W);var Ee={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Tt(u,g,p,E,O){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!E,this.ha=O,this.key=++$e,this.da=this.fa=!1}function ke(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Le(u){this.src=u,this.g={},this.h=0}Le.prototype.add=function(u,g,p,E,O){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ie=Qe(u,g,E,O);return-1<ie?(g=u[ie],p||(g.fa=!1)):(g=new Tt(g,this.src,K,!!E,O),g.fa=p,u.push(g)),g};function nt(u,g){var p=g.type;if(p in u.g){var E=u.g[p],O=Array.prototype.indexOf.call(E,g,void 0),K;(K=0<=O)&&Array.prototype.splice.call(E,O,1),K&&(ke(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Qe(u,g,p,E){for(var O=0;O<u.length;++O){var K=u[O];if(!K.da&&K.listener==g&&K.capture==!!p&&K.ha==E)return O}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),At={};function Ht(u,g,p,E,O){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Ht(u,g[K],p,E,O);return null}return p=be(p),u&&u[xe]?u.K(g,p,l(E)?!!E.capture:!1,O):lt(u,g,p,!1,E,O)}function lt(u,g,p,E,O,K){if(!g)throw Error("Invalid event type");var ie=l(O)?!!O.capture:!!O,rt=ue(u);if(rt||(u[_e]=rt=new Le(u)),p=rt.add(g,p,E,ie,K),p.proxy)return p;if(E=Wt(),p.proxy=E,E.src=u,E.listener=p,u.addEventListener)ge||(O=ie),O===void 0&&(O=!1),u.addEventListener(g.toString(),E,O);else if(u.attachEvent)u.attachEvent(z(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Wt(){function u(p){return g.call(u.src,u.listener,p)}const g=ne;return u}function Xn(u,g,p,E,O){if(Array.isArray(g))for(var K=0;K<g.length;K++)Xn(u,g[K],p,E,O);else E=l(E)?!!E.capture:!!E,p=be(p),u&&u[xe]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],p=Qe(K,p,E,O),-1<p&&(ke(K[p]),Array.prototype.splice.call(K,p,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=ue(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Qe(g,p,E,O)),(p=-1<u?g[u]:null)&&L(p))}function L(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[xe])nt(g.i,u);else{var p=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(p,E,u.capture):g.detachEvent?g.detachEvent(z(p),E):g.addListener&&g.removeListener&&g.removeListener(E),(p=ue(g))?(nt(p,u),p.h==0&&(p.src=null,g[_e]=null)):ke(u)}}}function z(u){return u in At?At[u]:At[u]="on"+u}function ne(u,g){if(u.da)u=!0;else{g=new he(g,this);var p=u.listener,E=u.ha||u.src;u.fa&&L(u),u=p.call(E,g)}return u}function ue(u){return u=u[_e],u instanceof Le?u:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(u){return typeof u=="function"?u:(u[Be]||(u[Be]=function(g){return u.handleEvent(g)}),u[Be])}function se(){q.call(this),this.i=new Le(this),this.M=this,this.F=null}m(se,q),se.prototype[xe]=!0,se.prototype.removeEventListener=function(u,g,p,E){Xn(this,u,g,p,E)};function ce(u,g){var p,E=u.F;if(E)for(p=[];E;E=E.F)p.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new W(g,u);else if(g instanceof W)g.target=g.target||u;else{var O=g;g=new W(E,u),Q(g,O)}if(O=!0,p)for(var K=p.length-1;0<=K;K--){var ie=g.g=p[K];O=Ae(ie,E,!0,g)&&O}if(ie=g.g=u,O=Ae(ie,E,!0,g)&&O,O=Ae(ie,E,!1,g)&&O,p)for(K=0;K<p.length;K++)ie=g.g=p[K],O=Ae(ie,E,!1,g)&&O}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],E=0;E<p.length;E++)ke(p[E]);delete u.g[g],u.h--}}this.F=null},se.prototype.K=function(u,g,p,E){return this.i.add(String(u),g,!1,p,E)},se.prototype.L=function(u,g,p,E){return this.i.add(String(u),g,!0,p,E)};function Ae(u,g,p,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,K=0;K<g.length;++K){var ie=g[K];if(ie&&!ie.da&&ie.capture==p){var rt=ie.listener,sn=ie.ha||ie.src;ie.fa&&nt(u.i,ie),O=rt.call(sn,E)!==!1&&O}}return O&&!E.defaultPrevented}function Ce(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Xe(u){u.g=Ce(()=>{u.g=null,u.i&&(u.i=!1,Xe(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class H extends q{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $(u){q.call(this),this.h=u,this.g={}}m($,q);var re=[];function we(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&L(g)},u),u.g={}}$.prototype.N=function(){$.aa.N.call(this),we(this)},$.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=o.JSON.stringify,Ne=o.JSON.parse,qe=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function st(){}st.prototype.h=null;function ft(u){return u.h||(u.h=u.i())}function Cr(){}var Bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function iA(){W.call(this,"d")}m(iA,W);function Oe(){W.call(this,"c")}m(Oe,W);var Xs={},zy=null;function Su(){return zy=zy||new se}Xs.La="serverreachability";function Wy(u){W.call(this,Xs.La,u)}m(Wy,W);function Wa(u){const g=Su();ce(g,new Wy(g))}Xs.STAT_EVENT="statevent";function $y(u,g){W.call(this,Xs.STAT_EVENT,u),this.stat=g}m($y,W);function bn(u){const g=Su();ce(g,new $y(g,u))}Xs.Ma="timingevent";function qy(u,g){W.call(this,Xs.Ma,u),this.size=g}m(qy,W);function $a(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function qa(){this.g=!0}qa.prototype.xa=function(){this.g=!1};function CS(u,g,p,E,O,K){u.info(function(){if(u.g)if(K)for(var ie="",rt=K.split("&"),sn=0;sn<rt.length;sn++){var Ge=rt[sn].split("=");if(1<Ge.length){var mn=Ge[0];Ge=Ge[1];var wn=mn.split("_");ie=2<=wn.length&&wn[1]=="type"?ie+(mn+"="+Ge+"&"):ie+(mn+"=redacted&")}}else ie=null;else ie=K;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+g+`
`+p+`
`+ie})}function IS(u,g,p,E,O,K,ie){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+g+`
`+p+`
`+K+" "+ie})}function so(u,g,p,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+bS(u,p)+(E?" "+E:"")})}function ES(u,g){u.info(function(){return"TIMEOUT: "+g})}qa.prototype.info=function(){};function bS(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var E=p[u];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var K=O[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ie=1;ie<O.length;ie++)O[ie]=""}}}}return ve(p)}catch{return g}}var ku={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sg;function Ru(){}m(Ru,st),Ru.prototype.g=function(){return new XMLHttpRequest},Ru.prototype.i=function(){return{}},Sg=new Ru;function MA(u,g,p,E){this.j=u,this.i=g,this.l=p,this.R=E||1,this.U=new $(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Yy={},kg={};function Rg(u,g,p){u.L=1,u.v=Lu(oA(g)),u.m=p,u.P=!0,Zy(u,null)}function Zy(u,g){u.F=Date.now(),Nu(u),u.A=oA(u.v);var p=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),hB(p.i,"t",E),u.C=0,p=u.j.J,u.h=new Xy,u.g=QB(u.j,p?g:null,!u.m),0<u.O&&(u.M=new H(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,E=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(re[0]=O.toString()),O=re);for(var K=0;K<O.length;K++){var ie=Ht(p,O[K],E||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Wa(),CS(u.i,u.u,u.A,u.l,u.R,u.m)}MA.prototype.ca=function(u){u=u.target;const g=this.M;g&&aA(u)==3?g.j():this.Y(u)},MA.prototype.Y=function(u){try{if(u==this.g)e:{const wn=aA(this.g);var g=this.g.Ba();const ao=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||yB(this.g)))){this.J||wn!=4||g==7||(g==8||0>=ao?Wa(3):Wa(2)),Ng(this);var p=this.g.Z();this.X=p;t:if(eB(this)){var E=yB(this.g);u="";var O=E.length,K=aA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ys(this),Ja(this);var ie="";break t}this.h.i=new o.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(K&&g==O-1)});E.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=p==200,IS(this.i,this.u,this.A,this.l,this.R,wn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,sn=this.g;if((rt=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(rt)){var Ge=rt;break t}}Ge=null}if(p=Ge)so(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pg(this,p);else{this.o=!1,this.s=3,bn(12),Ys(this),Ja(this);break e}}if(this.P){p=!0;let Ir;for(;!this.J&&this.C<ie.length;)if(Ir=TS(this,ie),Ir==kg){wn==4&&(this.s=4,bn(14),p=!1),so(this.i,this.l,null,"[Incomplete Response]");break}else if(Ir==Yy){this.s=4,bn(15),so(this.i,this.l,ie,"[Invalid Chunk]"),p=!1;break}else so(this.i,this.l,Ir,null),Pg(this,Ir);if(eB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||ie.length!=0||this.h.h||(this.s=1,bn(16),p=!1),this.o=this.o&&p,!p)so(this.i,this.l,ie,"[Invalid Chunked Response]"),Ys(this),Ja(this);else if(0<ie.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Hg(mn),mn.M=!0,bn(11))}}else so(this.i,this.l,ie,null),Pg(this,ie);wn==4&&Ys(this),this.o&&!this.J&&(wn==4?bB(this.j,this):(this.o=!1,Nu(this)))}else GS(this.g),p==400&&0<ie.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),Ys(this),Ja(this)}}}catch{}finally{}};function eB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function TS(u,g){var p=u.C,E=g.indexOf(`
`,p);return E==-1?kg:(p=Number(g.substring(p,E)),isNaN(p)?Yy:(E+=1,E+p>g.length?kg:(g=g.slice(E,E+p),u.C=E+p,g)))}MA.prototype.cancel=function(){this.J=!0,Ys(this)};function Nu(u){u.S=Date.now()+u.I,tB(u,u.I)}function tB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$a(f(u.ba,u),g)}function Ng(u){u.B&&(o.clearTimeout(u.B),u.B=null)}MA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ES(this.i,this.A),this.L!=2&&(Wa(),bn(17)),Ys(this),this.s=2,Ja(this)):tB(this,this.S-u)};function Ja(u){u.j.G==0||u.J||bB(u.j,u)}function Ys(u){Ng(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,we(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Pg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||Dg(p.h,u))){if(!u.K&&Dg(p.h,u)&&p.G==3){try{var E=p.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Ku(p),Hu(p);else break e;Vg(p),bn(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=$a(f(p.Za,p),6e3));if(1>=AB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ei(p,11)}else if((u.K||p.g==u)&&Ku(p),!v(g))for(O=p.Da.g.parse(g),g=0;g<O.length;g++){let Ge=O[g];if(p.T=Ge[0],Ge=Ge[1],p.G==2)if(Ge[0]=="c"){p.K=Ge[1],p.ia=Ge[2];const mn=Ge[3];mn!=null&&(p.la=mn,p.j.info("VER="+p.la));const wn=Ge[4];wn!=null&&(p.Aa=wn,p.j.info("SVER="+p.Aa));const ao=Ge[5];ao!=null&&typeof ao=="number"&&0<ao&&(E=1.5*ao,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Ir=u.g;if(Ir){const zu=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zu){var K=E.h;K.g||zu.indexOf("spdy")==-1&&zu.indexOf("quic")==-1&&zu.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Lg(K,K.h),K.h=null))}if(E.D){const jg=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;jg&&(E.ya=jg,ct(E.I,E.D,jg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var ie=u;if(E.qa=UB(E,E.J?E.ia:null,E.W),ie.K){sB(E.h,ie);var rt=ie,sn=E.L;sn&&(rt.I=sn),rt.B&&(Ng(rt),Nu(rt)),E.g=ie}else IB(E);0<p.i.length&&ju(p)}else Ge[0]!="stop"&&Ge[0]!="close"||ei(p,7);else p.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?ei(p,7):Mg(p):Ge[0]!="noop"&&p.l&&p.l.ta(Ge),p.v=0)}}Wa(4)}catch{}}var FS=class{constructor(u,g){this.g=u,this.map=g}};function nB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AB(u){return u.h?1:u.g?u.g.size:0}function Dg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Lg(u,g){u.g?u.g.add(g):u.h=g}function sB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}nB.prototype.cancel=function(){if(this.i=iB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function iB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return y(u.i)}function US(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,E=0;E<p;E++)g.push(u[E]);return g}g=[],p=0;for(E in u)g[p++]=u[E];return g}function QS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const E in u)g[p++]=E;return g}}}function oB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=QS(u),E=US(u),O=E.length,K=0;K<O;K++)g.call(void 0,E[K],p&&p[K],u)}var aB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SS(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var E=u[p].indexOf("="),O=null;if(0<=E){var K=u[p].substring(0,E);O=u[p].substring(E+1)}else K=u[p];g(K,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Zs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Zs){this.h=u.h,Pu(this,u.j),this.o=u.o,this.g=u.g,Du(this,u.s),this.l=u.l;var g=u.i,p=new Za;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),lB(this,p),this.m=u.m}else u&&(g=String(u).match(aB))?(this.h=!1,Pu(this,g[1]||"",!0),this.o=Xa(g[2]||""),this.g=Xa(g[3]||"",!0),Du(this,g[4]),this.l=Xa(g[5]||"",!0),lB(this,g[6]||"",!0),this.m=Xa(g[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}Zs.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Ya(g,cB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ya(g,cB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ya(p,p.charAt(0)=="/"?NS:RS,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ya(p,DS)),u.join("")};function oA(u){return new Zs(u)}function Pu(u,g,p){u.j=p?Xa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Du(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function lB(u,g,p){g instanceof Za?(u.i=g,LS(u.i,u.h)):(p||(g=Ya(g,PS)),u.i=new Za(g,u.h))}function ct(u,g,p){u.i.set(g,p)}function Lu(u){return ct(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ya(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,kS),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cB=/[#\/\?@]/g,RS=/[#\?:]/g,NS=/[#\?]/g,PS=/[#\?@]/g,DS=/#/g;function Za(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function VA(u){u.g||(u.g=new Map,u.h=0,u.i&&SS(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Za.prototype,t.add=function(u,g){VA(this),this.i=null,u=io(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function uB(u,g){VA(u),g=io(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function dB(u,g){return VA(u),g=io(u,g),u.g.has(g)}t.forEach=function(u,g){VA(this),this.g.forEach(function(p,E){p.forEach(function(O){u.call(g,O,E,this)},this)},this)},t.na=function(){VA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let E=0;E<g.length;E++){const O=u[E];for(let K=0;K<O.length;K++)p.push(g[E])}return p},t.V=function(u){VA(this);let g=[];if(typeof u=="string")dB(this,u)&&(g=g.concat(this.g.get(io(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return VA(this),this.i=null,u=io(this,u),dB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function hB(u,g,p){uB(u,g),0<p.length&&(u.i=null,u.g.set(io(u,g),y(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var E=g[p];const K=encodeURIComponent(String(E)),ie=this.V(E);for(E=0;E<ie.length;E++){var O=K;ie[E]!==""&&(O+="="+encodeURIComponent(String(ie[E]))),u.push(O)}}return this.i=u.join("&")};function io(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function LS(u,g){g&&!u.j&&(VA(u),u.i=null,u.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&(uB(this,E),hB(this,O,p))},u)),u.j=g}function OS(u,g){const p=new qa;if(o.Image){const E=new Image;E.onload=w(HA,p,"TestLoadImage: loaded",!0,g,E),E.onerror=w(HA,p,"TestLoadImage: error",!1,g,E),E.onabort=w(HA,p,"TestLoadImage: abort",!1,g,E),E.ontimeout=w(HA,p,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function MS(u,g){const p=new qa,E=new AbortController,O=setTimeout(()=>{E.abort(),HA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(K=>{clearTimeout(O),K.ok?HA(p,"TestPingServer: ok",!0,g):HA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),HA(p,"TestPingServer: error",!1,g)})}function HA(u,g,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function VS(){this.g=new qe}function HS(u,g,p){const E=p||"";try{oB(u,function(O,K){let ie=O;l(O)&&(ie=ve(O)),g.push(E+K+"="+encodeURIComponent(ie))})}catch(O){throw g.push(E+"type="+encodeURIComponent("_badmap")),O}}function Ou(u){this.l=u.Ub||null,this.j=u.eb||!1}m(Ou,st),Ou.prototype.g=function(){return new Mu(this.l,this.j)},Ou.prototype.i=function(u){return function(){return u}}({});function Mu(u,g){se.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Mu,se),t=Mu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,tl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,el(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,tl(this)),this.g&&(this.readyState=3,tl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function fB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?el(this):tl(this),this.readyState==3&&fB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,el(this))},t.Qa=function(u){this.g&&(this.response=u,el(this))},t.ga=function(){this.g&&el(this)};function el(u){u.readyState=4,u.l=null,u.j=null,u.v=null,tl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function tl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gB(u){let g="";return N(u,function(p,E){g+=E,g+=":",g+=p,g+=`\r
`}),g}function Og(u,g,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=gB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):ct(u,g,p))}function Ft(u){se.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ft,se);var jS=/^https?$/i,KS=["POST","PUT"];t=Ft.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sg.g(),this.v=this.o?ft(this.o):ft(Sg),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){pB(this,K);return}if(u=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const K of E.keys())p.set(K,E.get(K));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(K=>K.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(KS,g,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ie]of p)this.g.setRequestHeader(K,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vB(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){pB(this,K)}};function pB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,mB(u),Vu(u)}function mB(u){u.A||(u.A=!0,ce(u,"complete"),ce(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ce(this,"complete"),ce(this,"abort"),Vu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vu(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wB(this):this.bb())},t.bb=function(){wB(this)};function wB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||aA(u)!=4||u.Z()!=2)){if(u.u&&aA(u)==4)Ce(u.Ea,0,u);else if(ce(u,"readystatechange"),aA(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var E;if(E=ie===0){var O=String(u.D).match(aB)[1]||null;!O&&o.self&&o.self.location&&(O=o.self.location.protocol.slice(0,-1)),E=!jS.test(O?O.toLowerCase():"")}p=E}if(p)ce(u,"complete"),ce(u,"success");else{u.m=6;try{var K=2<aA(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",mB(u)}}finally{Vu(u)}}}}function Vu(u,g){if(u.g){vB(u);const p=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ce(u,"ready");try{p.onreadystatechange=E}catch{}}}function vB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function aA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<aA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Ne(g)}};function yB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function GS(u){const g={};u=(u.g&&2<=aA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(v(u[E]))continue;var p=S(u[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const K=g[O]||[];g[O]=K,K.push(p)}C(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nl(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function BB(u){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nl("baseRetryDelayMs",5e3,u),this.cb=nl("retryDelaySeedMs",1e4,u),this.Wa=nl("forwardChannelMaxRetries",2,u),this.wa=nl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new nB(u&&u.concurrentRequestLimit),this.Da=new VS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=BB.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,E){bn(0),this.W=u,this.H=g||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=UB(this,null,this.W),ju(this)};function Mg(u){if(xB(u),u.G==3){var g=u.U++,p=oA(u.I);if(ct(p,"SID",u.K),ct(p,"RID",g),ct(p,"TYPE","terminate"),rl(u,p),g=new MA(u,u.j,g),g.L=2,g.v=Lu(oA(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=g.v,p=!0),p||(g.g=QB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Nu(g)}FB(u)}function Hu(u){u.g&&(Hg(u),u.g.cancel(),u.g=null)}function xB(u){Hu(u),u.u&&(o.clearTimeout(u.u),u.u=null),Ku(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function ju(u){if(!rB(u.h)&&!u.s){u.s=!0;var g=u.Ga;Te||D(),G||(Te(),G=!0),F.add(g,u),u.B=0}}function zS(u,g){return AB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$a(f(u.Ga,u,g),TB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new MA(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),Q(K,this.S)):K=this.S),this.m!==null||this.O||(O.H=K,K=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=CB(this,O,g),p=oA(this.I),ct(p,"RID",u),ct(p,"CVER",22),this.D&&ct(p,"X-HTTP-Session-Id",this.D),rl(this,p),K&&(this.O?g="headers="+encodeURIComponent(String(gB(K)))+"&"+g:this.m&&Og(p,this.m,K)),Lg(this.h,O),this.Ua&&ct(p,"TYPE","init"),this.P?(ct(p,"$req",g),ct(p,"SID","null"),O.T=!0,Rg(O,p,null)):Rg(O,p,g),this.G=2}}else this.G==3&&(u?_B(this,u):this.i.length==0||rB(this.h)||_B(this))};function _B(u,g){var p;g?p=g.l:p=u.U++;const E=oA(u.I);ct(E,"SID",u.K),ct(E,"RID",p),ct(E,"AID",u.T),rl(u,E),u.m&&u.o&&Og(E,u.m,u.o),p=new MA(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=CB(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Lg(u.h,p),Rg(p,E,g)}function rl(u,g){u.H&&N(u.H,function(p,E){ct(g,E,p)}),u.l&&oB({},function(p,E){ct(g,E,p)})}function CB(u,g,p){p=Math.min(u.i.length,p);var E=u.l?f(u.l.Na,u.l,u):null;e:{var O=u.i;let K=-1;for(;;){const ie=["count="+p];K==-1?0<p?(K=O[0].g,ie.push("ofs="+K)):K=0:ie.push("ofs="+K);let rt=!0;for(let sn=0;sn<p;sn++){let Ge=O[sn].g;const mn=O[sn].map;if(Ge-=K,0>Ge)K=Math.max(0,O[sn].g-100),rt=!1;else try{HS(mn,ie,"req"+Ge+"_")}catch{E&&E(mn)}}if(rt){E=ie.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,E}function IB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Te||D(),G||(Te(),G=!0),F.add(g,u),u.v=0}}function Vg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$a(f(u.Fa,u),TB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,EB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$a(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),Hu(this),EB(this))};function Hg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function EB(u){u.g=new MA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=oA(u.qa);ct(g,"RID","rpc"),ct(g,"SID",u.K),ct(g,"AID",u.T),ct(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&ct(g,"TO",u.ja),ct(g,"TYPE","xmlhttp"),rl(u,g),u.m&&u.o&&Og(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Lu(oA(g)),p.m=null,p.P=!0,Zy(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Hu(this),Vg(this),bn(19))};function Ku(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function bB(u,g){var p=null;if(u.g==g){Ku(u),Hg(u),u.g=null;var E=2}else if(Dg(u.h,g))p=g.D,sB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var O=u.B;E=Su(),ce(E,new qy(E,p)),ju(u)}else IB(u);else if(O=g.s,O==3||O==0&&0<g.X||!(E==1&&zS(u,g)||E==2&&Vg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),O){case 1:ei(u,5);break;case 4:ei(u,10);break;case 3:ei(u,6);break;default:ei(u,2)}}}function TB(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function ei(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),E=u.Xa;const O=!E;E=new Zs(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pu(E,"https"),Lu(E),O?OS(E.toString(),p):MS(E.toString(),p)}else bn(2);u.G=0,u.l&&u.l.sa(g),FB(u),xB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function FB(u){if(u.G=0,u.ka=[],u.l){const g=iB(u.h);(g.length!=0||u.i.length!=0)&&(I(u.ka,g),I(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function UB(u,g,p){var E=p instanceof Zs?oA(p):new Zs(p);if(E.g!="")g&&(E.g=g+"."+E.g),Du(E,E.s);else{var O=o.location;E=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var K=new Zs(null);E&&Pu(K,E),g&&(K.g=g),O&&Du(K,O),p&&(K.l=p),E=K}return p=u.D,g=u.ya,p&&g&&ct(E,p,g),ct(E,"VER",u.la),rl(u,E),E}function QB(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ft(new Ou({eb:p})):new Ft(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SB(){}t=SB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gu(){}Gu.prototype.g=function(u,g){return new Yn(u,g)};function Yn(u,g){se.call(this),this.g=new BB(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!v(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new oo(this)}m(Yn,se),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Mg(this.g)},Yn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=ve(u),u=p);g.i.push(new FS(g.Ya++,u)),g.G==3&&ju(g)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Mg(this.g),delete this.g,Yn.aa.N.call(this)};function kB(u){iA.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}m(kB,iA);function RB(){Oe.call(this),this.status=1}m(RB,Oe);function oo(u){this.g=u}m(oo,SB),oo.prototype.ua=function(){ce(this.g,"a")},oo.prototype.ta=function(u){ce(this.g,new kB(u))},oo.prototype.sa=function(u){ce(this.g,new RB)},oo.prototype.ra=function(){ce(this.g,"b")},Gu.prototype.createWebChannel=Gu.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,VT=function(){return new Gu},MT=function(){return Su()},OT=Xs,i0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ku.NO_ERROR=0,ku.TIMEOUT=8,ku.HTTP_ERROR=6,Zd=ku,Jy.COMPLETE="complete",LT=Jy,Cr.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",se.prototype.listen=se.prototype.K,Fl=Cr,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,DT=Ft}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const a_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Mf("@firebase/firestore");function _o(){return Us.logLevel}function lD(t){Us.setLogLevel(t)}function Y(t,...e){if(Us.logLevel<=Pe.DEBUG){const n=e.map(dv);Us.debug(`Firestore (${Na}): ${t}`,...n)}}function Ot(t,...e){if(Us.logLevel<=Pe.ERROR){const n=e.map(dv);Us.error(`Firestore (${Na}): ${t}`,...n)}}function eA(t,...e){if(Us.logLevel<=Pe.WARN){const n=e.map(dv);Us.warn(`Firestore (${Na}): ${t}`,...n)}}function dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+t;throw Ot(e),new Error(e)}function ye(t,e){t||pe()}function cD(t,e){t||pe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class dD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hD{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const A=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fn,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await A(this.currentUser)})},o=a=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new HT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new nn(e)}}class fD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const A=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new pD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const A=wD(40);for(let s=0;s<A.length;++s)r.length<20&&A[s]<n&&(r+=e.charAt(A[s]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function ha(t,e,n){return t.length===e.length&&t.every((r,A)=>n(r,e[A]))}function KT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new yt(0,0))}static max(){return new Ie(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let A=0;A<r;A++){const s=e.get(A),i=n.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends Nc{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(A=>A.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const vD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends Nc{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return vD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",A=0;const s=()=>{if(r.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;A<e.length;){const o=e[A];if(o==="\\"){if(A+1===e.length)throw new X(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[A+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new X(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,A+=2}else o==="`"?(i=!i,A++):o!=="."||i?(r+=o,A++):(s(),A++)}if(s(),i)throw new X(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ve.fromString(e))}static fromName(e){return new oe(Ve.fromString(e).popFirst(5))}static empty(){return new oe(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r,A){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=A}}function o0(t){return t.fields.find(e=>e.kind===2)}function oi(t){return t.fields.filter(e=>e.kind!==2)}Gh.UNKNOWN_ID=-1;class eh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Pc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Pc(0,or.min())}}function GT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,A=Ie.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new or(A,oe.empty(),e)}function zT(t){return new or(t.readTime,t.key,-1)}class or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new or(Ie.min(),oe.empty(),-1)}static max(){return new or(Ie.max(),oe.empty(),-1)}}function hv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $T{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==WT)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,A)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,A)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let A=0,s=0,i=!1;e.forEach(o=>{++A,o.next(()=>{++s,i&&s===A&&n()},a=>r(a))}),i=!0,s===A&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(A=>A?M.resolve(A):r());return n}static forEach(e,n){const r=[];return e.forEach((A,s)=>{r.push(n.call(this,A,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,A)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;n(e[l]).next(d=>{i[l]=d,++o,o===s&&r(i)},d=>A(d))}})}static doWhile(e,n){return new M((r,A)=>{const s=()=>{e()===!0?n().next(()=>{s()},A):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new fn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const A=fv(r.target.error);this.V.reject(new Xl(e,A))}}static open(e,n,r,A){try{return new Vf(n,e.transaction(A,r))}catch(s){throw new Xl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Y("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BD(n)}}class Xr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Xr.S(bt())===12.2&&Ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Y("SimpleDb","Removing database:",e),li(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Qc())return!1;if(Xr.v())return!0;const e=bt(),n=Xr.S(e),r=0<n&&n<10,A=qT(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Y("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;n(i)},A.onblocked=()=>{r(new Xl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?r(new X(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new X(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new Xl(e,i))},A.onupgradeneeded=s=>{Y("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{Y("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,A){const s=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=Vf.open(this.db,e,s?"readonly":"readwrite",r),a=A(o).next(l=>(o.g(),l)).catch(l=>(o.abort(l),M.reject(l))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,l=a.name!=="FirebaseError"&&i<3;if(Y("SimpleDb","Transaction failed with error:",a.message,"Retrying:",l),this.close(),!l)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class yD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return li(this.B.delete())}}class Xl extends X{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Gs(t){return t.name==="IndexedDbTransactionError"}class BD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),li(r)}add(e){return Y("SimpleDb","ADD",this.store.name,e,e),li(this.store.add(e))}get(e){return li(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Y("SimpleDb","DELETE",this.store.name,e),li(this.store.delete(e))}count(){return Y("SimpleDb","COUNT",this.store.name),li(this.store.count())}U(e,n){const r=this.options(e,n),A=r.index?this.store.index(r.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(r.range);return new M((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}{const s=this.cursor(r),i=[];return this.W(s,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((A,s)=>{r.onerror=i=>{s(i.target.error)},r.onsuccess=i=>{A(i.target.result)}})}j(e,n){Y("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const A=this.cursor(r);return this.W(A,(s,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const A=this.cursor(r);return this.W(A,n)}Y(e){const n=this.cursor({});return new M((r,A)=>{n.onerror=s=>{const i=fv(s.target.error);A(i)},n.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new M((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void A();const a=new yD(o),l=n(o.primaryKey,o.value,a);if(l instanceof M){const d=l.catch(h=>(a.done(),M.reject(h)));r.push(d)}a.isDone?A():a.K===null?o.continue():o.continue(a.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function li(t){return new M((e,n)=>{t.onsuccess=r=>{const A=r.target.result;e(A)},t.onerror=r=>{const A=fv(r.target.error);n(A)}})}let l_=!1;function fv(t){const e=Xr.S(bt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l_||(l_=!0,setTimeout(()=>{throw r},0)),r}}return t}class xD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Y("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Y("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Gs(n)?Y("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ks(n)}await this.X(6e4)})}}class _D{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let A=n,s=!0;return M.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return Y("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(o=>{A-=o,r.add(i)});s=!1})).next(()=>n-A)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(A=>this.localStore.localDocuments.getNextDocuments(e,n,A,r).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(o=>(Y("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((A,s)=>{const i=zT(s);hv(i,r)>0&&(r=i)}),new or(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gn.oe=-1;function au(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function JT(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c_(e)),e=CD(t.get(n),e);return c_(e)}function CD(t,e){let n=e;const r=t.length;for(let A=0;A<r;A++){const s=t.charAt(A);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function c_(t){return t+""}function zr(t){const e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),Ve.emptyPath();const n=e-2,r=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>n)&&pe(),t.charAt(i+1)){case"":const o=t.substring(s,i);let a;A.length===0?a=o:(A+=o,a=A,A=""),r.push(a);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:pe()}s=i+2}return new Ve(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e){return[t,Nn(e)]}function XT(t,e,n){return[t,Nn(e),n]}const ID={},ED=["prefixPath","collectionGroup","readTime","documentId"],bD=["prefixPath","collectionGroup","documentId"],TD=["collectionGroup","readTime","prefixPath","documentId"],FD=["canonicalId","targetId"],UD=["targetId","path"],QD=["path","targetId"],SD=["collectionId","parent"],kD=["indexId","uid"],RD=["uid","sequenceNumber"],ND=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PD=["indexId","uid","orderedDocumentKey"],DD=["userId","collectionPath","documentId"],LD=["userId","collectionPath","largestBatchId"],OD=["userId","collectionGroup","largestBatchId"],YT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MD=[...YT,"documentOverlays"],ZT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eF=ZT,gv=[...eF,"indexConfiguration","indexState","indexEntries"],VD=gv,HD=[...gv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends $T{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Yt(t,e){const n=le(t);return Xr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const A=this.comparator(e,r.key);if(A===0)return n+r.left.size;A<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,r,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,A,s){this.key=e,this.value=n,this.color=r??ln.RED,this.left=A??ln.EMPTY,this.right=s??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,A,s){return new ln(e??this.key,n??this.value,r??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let A=this;const s=r(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,n,r),null):s===0?A.copy(null,n,null,null,null):A.copy(null,null,null,null,A.right.insert(e,n,r)),A.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,A=this;if(n(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,n),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),n(e,A.key)===0){if(A.right.isEmpty())return ln.EMPTY;r=A.right.min(),A=A.copy(r.key,r.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,n))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,A,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const A=r.getNext();if(this.comparator(A.key,e[1])>=0)return;n(A.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new h_(this.data.getIterator())}getIteratorFrom(e){return new h_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class h_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function co(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new tt(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nF("Invalid base64 string: "+s):s}}(e);return new St(n)}static fromUint8Array(e){const n=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let A=0;A<n.length;A++)r[A]=n.charCodeAt(A);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const KD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function TA(t){if(ye(!!t),typeof t=="string"){let e=0;const n=KD.exec(t);if(ye(!!n),n[1]){let A=n[1];A=(A+"000000000").substr(0,9),e=Number(A)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qs(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pv(t){const e=t.mapValue.fields.__previous_value__;return Hf(e)?pv(e):e}function Lc(t){const e=TA(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,A,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Ss{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ss("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ss&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nh={nullValue:"NULL_VALUE"};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hf(t)?4:rF(t)?9007199254740991:jf(t)?10:11:pe()}function tA(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lc(t).isEqual(Lc(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=TA(A.timestampValue),o=TA(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return Qs(A.bytesValue).isEqual(Qs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return pt(A.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(A.geoPointValue.longitude)===pt(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return pt(A.integerValue)===pt(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=pt(A.doubleValue),o=pt(s.doubleValue);return i===o?Dc(i)===Dc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ha(t.arrayValue.values||[],e.arrayValue.values||[],tA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},o=s.mapValue.fields||{};if(d_(i)!==d_(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!tA(i[a],o[a])))return!1;return!0}(t,e);default:return pe()}}function Oc(t,e){return(t.values||[]).find(n=>tA(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=Pi(t),r=Pi(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=pt(s.integerValue||s.doubleValue),a=pt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return f_(t.timestampValue,e.timestampValue);case 4:return f_(Lc(t),Lc(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Qs(s),a=Qs(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const d=Se(o[l],a[l]);if(d!==0)return d}return Se(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Se(pt(s.latitude),pt(i.latitude));return o!==0?o:Se(pt(s.longitude),pt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g_(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,l,d;const h=s.fields||{},f=i.fields||{},w=(o=h.value)===null||o===void 0?void 0:o.arrayValue,m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=Se(((l=w==null?void 0:w.values)===null||l===void 0?void 0:l.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:g_(w,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===is.mapValue&&i===is.mapValue)return 0;if(s===is.mapValue)return 1;if(i===is.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},d=Object.keys(l);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Se(a[h],d[h]);if(f!==0)return f;const w=ks(o[a[h]],l[d[h]]);if(w!==0)return w}return Se(a.length,d.length)}(t.mapValue,e.mapValue);default:throw pe()}}function f_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=TA(t),r=TA(e),A=Se(n.seconds,r.seconds);return A!==0?A:Se(n.nanos,r.nanos)}function g_(t,e){const n=t.values||[],r=e.values||[];for(let A=0;A<n.length&&A<r.length;++A){const s=ks(n[A],r[A]);if(s)return s}return Se(n.length,r.length)}function fa(t){return l0(t)}function l0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=TA(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",A=!0;for(const s of n.values||[])A?A=!1:r+=",",r+=l0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let A="{",s=!0;for(const i of r)s?s=!1:A+=",",A+=`${i}:${l0(n.fields[i])}`;return A+"}"}(t.mapValue):pe()}function Di(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function c0(t){return!!t&&"integerValue"in t}function Mc(t){return!!t&&"arrayValue"in t}function p_(t){return!!t&&"nullValue"in t}function m_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rh(t){return!!t&&"mapValue"in t}function jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Yl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const AF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function zD(t){return"nullValue"in t?nh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Di(Ss.empty(),oe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?jf(t)?AF:{mapValue:{}}:pe()}function WD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Di(Ss.empty(),oe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?AF:"mapValue"in t?jf(t)?{mapValue:{}}:is:pe()}function w_(t,e){const n=ks(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function v_(t,e){const n=ks(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yl(n)}setAll(e){let n=wt.emptyPath(),r={},A=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,A),r={},A=[],n=o.popLast()}i?r[o.lastSegment()]=Yl(i):A.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,A)}delete(e){const n=this.field(e.popLast());rh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tA(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let A=n.mapValue.fields[e.get(r)];rh(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=A),n=A}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(A,s)=>e[A]=s);for(const A of r)delete e[A]}clone(){return new un(Yl(this.value))}}function sF(t){const e=[];return Zi(t.fields,(n,r)=>{const A=new wt([n]);if(rh(r)){const s=sF(r.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,A,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=A,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new dt(e,0,Ie.min(),Ie.min(),Ie.min(),un.empty(),0)}static newFoundDocument(e,n,r,A){return new dt(e,1,n,Ie.min(),r,A,0)}static newNoDocument(e,n){return new dt(e,2,n,Ie.min(),Ie.min(),un.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,Ie.min(),Ie.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){this.position=e,this.inclusive=n}}function y_(t,e,n){let r=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?r=oe.comparator(oe.fromName(i.referenceValue),n.key):r=ks(i,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function B_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tA(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function $D(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{}class He extends iF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qD(e,n,r):n==="array-contains"?new YD(e,r):n==="in"?new dF(e,r):n==="not-in"?new ZD(e,r):n==="array-contains-any"?new e4(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JD(e,r):new XD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ks(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends iF{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ye(e,n)}matches(e){return ga(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ga(t){return t.op==="and"}function u0(t){return t.op==="or"}function mv(t){return oF(t)&&ga(t)}function oF(t){for(const e of t.filters)if(e instanceof Ye)return!1;return!0}function d0(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(mv(t))return t.filters.map(e=>d0(e)).join(",");{const e=t.filters.map(n=>d0(n)).join(",");return`${t.op}(${e})`}}function aF(t,e){return t instanceof He?function(r,A){return A instanceof He&&r.op===A.op&&r.field.isEqual(A.field)&&tA(r.value,A.value)}(t,e):t instanceof Ye?function(r,A){return A instanceof Ye&&r.op===A.op&&r.filters.length===A.filters.length?r.filters.reduce((s,i,o)=>s&&aF(i,A.filters[o]),!0):!1}(t,e):void pe()}function lF(t,e){const n=t.filters.concat(e);return Ye.create(n,t.op)}function cF(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${fa(n.value)}`}(t):t instanceof Ye?function(n){return n.op.toString()+" {"+n.getFilters().map(cF).join(" ,")+"}"}(t):"Filter"}class qD extends He{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class JD extends He{constructor(e,n){super(e,"in",n),this.keys=uF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XD extends He{constructor(e,n){super(e,"not-in",n),this.keys=uF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class YD extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mc(n)&&Oc(n.arrayValue,this.value)}}class dF extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class ZD extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Oc(this.value.arrayValue,n)}}class e4 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n=null,r=[],A=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=A,this.limit=s,this.startAt=i,this.endAt=o,this.ue=null}}function h0(t,e=null,n=[],r=[],A=null,s=null,i=null){return new t4(t,e,n,r,A,s,i)}function Li(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>d0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),au(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fa(r)).join(",")),e.ue=n}return e.ue}function lu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$D(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B_(t.startAt,e.startAt)&&B_(t.endAt,e.endAt)}function zh(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Wh(t,e){return t.filters.filter(n=>n instanceof He&&n.field.isEqual(e))}function x_(t,e,n){let r=nh,A=!0;for(const s of Wh(t,e)){let i=nh,o=!0;switch(s.op){case"<":case"<=":i=zD(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,o=!1;break;case"!=":case"not-in":i=nh}w_({value:r,inclusive:A},{value:i,inclusive:o})<0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];w_({value:r,inclusive:A},{value:i,inclusive:n.inclusive})<0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}function __(t,e,n){let r=is,A=!0;for(const s of Wh(t,e)){let i=is,o=!0;switch(s.op){case">=":case">":i=WD(s.value),o=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,o=!1;break;case"!=":case"not-in":i=is}v_({value:r,inclusive:A},{value:i,inclusive:o})>0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];v_({value:r,inclusive:A},{value:i,inclusive:n.inclusive})>0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n=null,r=[],A=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=A,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hF(t,e,n,r,A,s,i,o){return new NA(t,e,n,r,A,s,i,o)}function Pa(t){return new NA(t)}function C_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wv(t){return t.collectionGroup!==null}function Jo(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new tt(wt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(l=>{l.isInequality()&&(o=o.add(l.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vc(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new Vc(wt.keyField(),r))}return e.ce}function Pn(t){const e=le(t);return e.le||(e.le=n4(e,Jo(t))),e.le}function n4(t,e){if(t.limitType==="F")return h0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new Vc(A.field,s)});const n=t.endAt?new Rs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rs(t.startAt.position,t.startAt.inclusive):null;return h0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function f0(t,e){const n=t.filters.concat([e]);return new NA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $h(t,e,n){return new NA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cu(t,e){return lu(Pn(t),Pn(e))&&t.limitType===e.limitType}function fF(t){return`${Li(Pn(t))}|lt:${t.limitType}`}function Co(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(A=>cF(A)).join(", ")}]`),au(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(A=>fa(A)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(A=>fa(A)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function uu(t,e){return e.isFoundDocument()&&function(r,A){const s=A.key.path;return r.collectionGroup!==null?A.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,A){for(const s of Jo(r))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,A){for(const s of r.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(r,A){return!(r.startAt&&!function(i,o,a){const l=y_(i,o,a);return i.inclusive?l<=0:l<0}(r.startAt,Jo(r),A)||r.endAt&&!function(i,o,a){const l=y_(i,o,a);return i.inclusive?l>=0:l>0}(r.endAt,Jo(r),A))}(t,e)}function gF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pF(t){return(e,n)=>{let r=!1;for(const A of Jo(t)){const s=r4(A,e,n);if(s!==0)return s;r=r||A.field.isKeyField()}return 0}}function r4(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?ks(a,l):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[A,s]of r)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),A=this.inner[r];if(A===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,n]);A.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let A=0;A<r.length;A++)if(this.equalsFn(r[A][0],e))return r.length===1?delete this.inner[n]:r.splice(A,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(const[A,s]of r)e(A,s)})}isEmpty(){return tF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new at(oe.comparator);function Wn(){return A4}const mF=new at(oe.comparator);function Ul(...t){let e=mF;for(const n of t)e=e.insert(n.key,n);return e}function wF(t){let e=mF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return Zl()}function vF(){return Zl()}function Zl(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const s4=new at(oe.comparator),i4=new tt(oe.comparator);function Re(...t){let e=i4;for(const n of t)e=e.add(n);return e}const o4=new tt(Se);function vv(){return o4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function yF(t){return{integerValue:""+t}}function BF(t,e){return JT(e)?yF(e):yv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this._=void 0}}function a4(t,e,n){return t instanceof pa?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&Hf(s)&&(s=pv(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Oi?_F(t,e):t instanceof Mi?CF(t,e):function(A,s){const i=xF(A,s),o=I_(i)+I_(A.Pe);return c0(i)&&c0(A.Pe)?yF(o):yv(A.serializer,o)}(t,e)}function l4(t,e,n){return t instanceof Oi?_F(t,e):t instanceof Mi?CF(t,e):n}function xF(t,e){return t instanceof ma?function(r){return c0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class pa extends Kf{}class Oi extends Kf{constructor(e){super(),this.elements=e}}function _F(t,e){const n=IF(e);for(const r of t.elements)n.some(A=>tA(A,r))||n.push(r);return{arrayValue:{values:n}}}class Mi extends Kf{constructor(e){super(),this.elements=e}}function CF(t,e){let n=IF(e);for(const r of t.elements)n=n.filter(A=>!tA(A,r));return{arrayValue:{values:n}}}class ma extends Kf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function I_(t){return pt(t.integerValue||t.doubleValue)}function IF(t){return Mc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.field=e,this.transform=n}}function c4(t,e){return t.field.isEqual(e.field)&&function(r,A){return r instanceof Oi&&A instanceof Oi||r instanceof Mi&&A instanceof Mi?ha(r.elements,A.elements,tA):r instanceof ma&&A instanceof ma?tA(r.Pe,A.Pe):r instanceof pa&&A instanceof pa}(t.transform,e.transform)}class u4{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gf{}function EF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new La(t.key,vt.none()):new Da(t.key,t.data,vt.none());{const n=t.data,r=un.empty();let A=new tt(wt.comparator);for(let s of e.fields)if(!A.has(s)){let i=n.field(s);i===null&&s.length>1&&(s=s.popLast(),i=n.field(s)),i===null?r.delete(s):r.set(s,i),A=A.add(s)}return new PA(t.key,r,new zn(A.toArray()),vt.none())}}function d4(t,e,n){t instanceof Da?function(A,s,i){const o=A.value.clone(),a=b_(A.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof PA?function(A,s,i){if(!Ah(A.precondition,s))return void s.convertToUnknownDocument(i.version);const o=b_(A.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(bF(A)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ec(t,e,n,r){return t instanceof Da?function(s,i,o,a){if(!Ah(s.precondition,i))return o;const l=s.value.clone(),d=T_(s.fieldTransforms,a,i);return l.setAll(d),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof PA?function(s,i,o,a){if(!Ah(s.precondition,i))return o;const l=T_(s.fieldTransforms,a,i),d=i.data;return d.setAll(bF(s)),d.setAll(l),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,o){return Ah(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function h4(t,e){let n=null;for(const r of t.fieldTransforms){const A=e.data.field(r.field),s=xF(r.transform,A||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function E_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,A){return r===void 0&&A===void 0||!(!r||!A)&&ha(r,A,(s,i)=>c4(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Da extends Gf{constructor(e,n,r,A=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class PA extends Gf{constructor(e,n,r,A,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function b_(t,e,n){const r=new Map;ye(t.length===n.length);for(let A=0;A<n.length;A++){const s=t[A],i=s.transform,o=e.data.field(s.field);r.set(s.field,l4(i,o,n[A]))}return r}function T_(t,e,n){const r=new Map;for(const A of t){const s=A.transform,i=n.data.field(A.field);r.set(A.field,a4(s,i,e))}return r}class La extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bv extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,A){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=A}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&d4(s,e,r[A])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ec(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vF();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=n.has(A.key)?null:o;const a=EF(i,o);a!==null&&r.set(A.key,a),i.isValidDocument()||i.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(n,r)=>E_(n,r))&&ha(this.baseMutations,e.baseMutations,(n,r)=>E_(n,r))}}class _v{constructor(e,n,r,A){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=A}static from(e,n,r){ye(e.mutations.length===r.length);let A=function(){return s4}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,r[i].version);return new _v(e,n,r,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,je;function TF(t){switch(t){default:return pe();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function FF(t){if(t===void 0)return Ot("GRPC error has no .code"),j.UNKNOWN;switch(t){case jt.OK:return j.OK;case jt.CANCELLED:return j.CANCELLED;case jt.UNKNOWN:return j.UNKNOWN;case jt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case jt.INTERNAL:return j.INTERNAL;case jt.UNAVAILABLE:return j.UNAVAILABLE;case jt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case jt.NOT_FOUND:return j.NOT_FOUND;case jt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case jt.ABORTED:return j.ABORTED;case jt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case jt.DATA_LOSS:return j.DATA_LOSS;default:return pe()}}(je=jt||(jt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new Ii([4294967295,4294967295],0);function F_(t){const e=UF().encode(t),n=new PT;return n.update(e),new Uint8Array(n.digest())}function U_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ii([n,r],0),new Ii([A,s],0)]}class Iv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ii.fromNumber(this.Ie)}Ee(e,n,r){let A=e.add(n.multiply(Ii.fromNumber(r)));return A.compare(g4)===1&&(A=new Ii([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=F_(e),[r,A]=U_(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);if(!this.de(i))return!1}return!0}static create(e,n,r){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Iv(s,A,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=F_(e),[r,A]=U_(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,A,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const A=new Map;return A.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hu(Ie.min(),A,new at(Se),Wn(),Re())}}class fu{constructor(e,n,r,A,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fu(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r,A){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=A}}class QF{constructor(e,n){this.targetId=e,this.me=n}}class SF{constructor(e,n,r=St.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=A}}class Q_{constructor(){this.fe=0,this.ge=k_(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),r=Re();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:n=n.add(A);break;case 1:r=r.add(A);break;default:pe()}}),new fu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=k_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class p4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wn(),this.qe=S_(),this.Qe=new at(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,A)=>{this.ze(A)&&n(A)})}He(e){const n=e.targetId,r=e.me.count,A=this.Je(n);if(A){const s=A.target;if(zh(s))if(r===0){const i=new oe(s.path);this.Ue(n,i,dt.newNoDocument(i,Ie.min()))}else ye(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const l=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:A=0},hashCount:s=0}=n;let i,o;try{i=Qs(r).toUint8Array()}catch(a){if(a instanceof nF)return eA("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Iv(i,A,s)}catch(a){return eA(a instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let A=0;return r.forEach(s=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),A++)}),A}rt(e){const n=new Map;this.Be.forEach((s,i)=>{const o=this.Je(i);if(o){if(s.current&&zh(o.target)){const a=new oe(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,dt.newNoDocument(a,e))}s.be&&(n.set(i,s.ve()),s.Ce())}});let r=Re();this.qe.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const l=this.Je(a);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new hu(e,n,this.Qe,this.ke,r);return this.ke=Wn(),this.qe=S_(),this.Qe=new at(Se),A}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,n)?A.Fe(n,1):A.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Q_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Q_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function S_(){return new at(oe.comparator)}function k_(){return new at(oe.comparator)}const m4={asc:"ASCENDING",desc:"DESCENDING"},w4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v4={and:"AND",or:"OR"};class y4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function g0(t,e){return t.useProto3Json||au(e)?e:{value:e}}function wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B4(t,e){return wa(t,e.toTimestamp())}function Mt(t){return ye(!!t),Ie.fromTimestamp(function(n){const r=TA(n);return new yt(r.seconds,r.nanos)}(t))}function Ev(t,e){return p0(t,e).canonicalString()}function p0(t,e){const n=function(A){return new Ve(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RF(t){const e=Ve.fromString(t);return ye(KF(e)),e}function Hc(t,e){return Ev(t.databaseId,e.path)}function Yr(t,e){const n=RF(e);if(n.get(1)!==t.databaseId.projectId)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(DF(n))}function NF(t,e){return Ev(t.databaseId,e)}function PF(t){const e=RF(t);return e.length===4?Ve.emptyPath():DF(e)}function m0(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DF(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R_(t,e,n){return{name:Hc(t,e),fields:n.value.mapValue.fields}}function LF(t,e,n){const r=Yr(t,e.name),A=Mt(e.updateTime),s=e.createTime?Mt(e.createTime):Ie.min(),i=new un({mapValue:{fields:e.fields}}),o=dt.newFoundDocument(r,A,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function x4(t,e){return"found"in e?function(r,A){ye(!!A.found),A.found.name,A.found.updateTime;const s=Yr(r,A.found.name),i=Mt(A.found.updateTime),o=A.found.createTime?Mt(A.found.createTime):Ie.min(),a=new un({mapValue:{fields:A.found.fields}});return dt.newFoundDocument(s,i,o,a)}(t,e):"missing"in e?function(r,A){ye(!!A.missing),ye(!!A.readTime);const s=Yr(r,A.missing),i=Mt(A.readTime);return dt.newNoDocument(s,i)}(t,e):pe()}function _4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(ye(d===void 0||typeof d=="string"),St.fromBase64String(d||"")):(ye(d===void 0||d instanceof Buffer||d instanceof Uint8Array),St.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(l){const d=l.code===void 0?j.UNKNOWN:FF(l.code);return new X(d,l.message||"")}(i);n=new SF(r,A,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const A=Yr(t,r.document.name),s=Mt(r.document.updateTime),i=r.document.createTime?Mt(r.document.createTime):Ie.min(),o=new un({mapValue:{fields:r.document.fields}}),a=dt.newFoundDocument(A,s,i,o),l=r.targetIds||[],d=r.removedTargetIds||[];n=new sh(l,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const A=Yr(t,r.document),s=r.readTime?Mt(r.readTime):Ie.min(),i=dt.newNoDocument(A,s),o=r.removedTargetIds||[];n=new sh([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const A=Yr(t,r.document),s=r.removedTargetIds||[];n=new sh([],s,A,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:A=0,unchangedNames:s}=r,i=new f4(A,s),o=r.targetId;n=new QF(o,i)}}return n}function jc(t,e){let n;if(e instanceof Da)n={update:R_(t,e.key,e.value)};else if(e instanceof La)n={delete:Hc(t,e.key)};else if(e instanceof PA)n={update:R_(t,e.key,e.data),updateMask:F4(e.fieldMask)};else{if(!(e instanceof Bv))return pe();n={verify:Hc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof pa)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Oi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Mi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ma)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:B4(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pe()}(t,e.precondition)),n}function w0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?vt.updateTime(Mt(s.updateTime)):s.exists!==void 0?vt.exists(s.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(A=>function(i,o){let a=null;if("setToServerValue"in o)ye(o.setToServerValue==="REQUEST_TIME"),a=new pa;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new Oi(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Mi(d)}else"increment"in o?a=new ma(i,o.increment):pe();const l=wt.fromServerFormat(o.fieldPath);return new du(l,a)}(t,A)):[];if(e.update){e.update.name;const A=Yr(t,e.update.name),s=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const l=a.fieldPaths||[];return new zn(l.map(d=>wt.fromServerFormat(d)))}(e.updateMask);return new PA(A,s,i,n,r)}return new Da(A,s,n,r)}if(e.delete){const A=Yr(t,e.delete);return new La(A,n)}if(e.verify){const A=Yr(t,e.verify);return new Bv(A,n)}return pe()}function C4(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(A,s){let i=A.updateTime?Mt(A.updateTime):Mt(s);return i.isEqual(Ie.min())&&(i=Mt(s)),new u4(i,A.transformResults||[])}(n,e))):[]}function OF(t,e){return{documents:[NF(t,e.path)]}}function MF(t,e){const n={structuredQuery:{}},r=e.path;let A;e.collectionGroup!==null?(A=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NF(t,A);const s=function(l){if(l.length!==0)return jF(Ye.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(d=>function(f){return{field:Io(f.field),direction:E4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=g0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:A}}function VF(t){let e=PF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let A=null;if(r>0){ye(r===1);const d=n.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=HF(h);return f instanceof Ye&&mv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(m){return new Vc(Eo(m.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,au(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,w=h.values||[];return new Rs(w,f)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const f=!h.before,w=h.values||[];return new Rs(w,f)}(n.endAt)),hF(e,A,i,s,o,"F",a,l)}function I4(t,e){const n=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Eo(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const A=Eo(n.unaryFilter.field);return He.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eo(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Eo(n.unaryFilter.field);return He.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Eo(n.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ye.create(n.compositeFilter.filters.map(r=>HF(r)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function E4(t){return m4[t]}function b4(t){return w4[t]}function T4(t){return v4[t]}function Io(t){return{fieldPath:t.canonicalString()}}function Eo(t){return wt.fromServerFormat(t.fieldPath)}function jF(t){return t instanceof He?function(n){if(n.op==="=="){if(m_(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(p_(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m_(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(p_(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:b4(n.op),value:n.value}}}(t):t instanceof Ye?function(n){const r=n.getFilters().map(A=>jF(A));return r.length===1?r[0]:{compositeFilter:{op:T4(n.op),filters:r}}}(t):pe()}function F4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,r,A,s=Ie.min(),i=Ie.min(),o=St.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new gA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gA(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e){this.ct=e}}function U4(t,e){let n;if(e.document)n=LF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),A=Hi(e.noDocument.readTime);n=dt.newNoDocument(r,A),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe();{const r=oe.fromSegments(e.unknownDocument.path),A=Hi(e.unknownDocument.version);n=dt.newUnknownDocument(r,A)}}return e.readTime&&n.setReadTime(function(A){const s=new yt(A[0],A[1]);return Ie.fromTimestamp(s)}(e.readTime)),n}function N_(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:Hc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:wa(s,i.version.toTimestamp()),createTime:wa(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Vi(e.version)};else{if(!e.isUnknownDocument())return pe();r.unknownDocument={path:n.path.toArray(),version:Vi(e.version)}}return r}function qh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hi(t){const e=new yt(t.seconds,t.nanoseconds);return Ie.fromTimestamp(e)}function ci(t,e){const n=(e.baseMutations||[]).map(s=>w0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>w0(t.ct,s)),A=yt.fromMillis(e.localWriteTimeMs);return new xv(e.batchId,A,n,r)}function Sl(t){const e=Hi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Hi(t.lastLimboFreeSnapshotVersion):Ie.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ye(s.documents.length===1),Pn(Pa(PF(s.documents[0])))}(t.query):function(s){return Pn(VF(s))}(t.query),new gA(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,St.fromBase64String(t.resumeToken))}function zF(t,e){const n=Vi(e.snapshotVersion),r=Vi(e.lastLimboFreeSnapshotVersion);let A;A=zh(e.target)?OF(t.ct,e.target):MF(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Li(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:A}}function bv(t){const e=VF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$h(e,e.limit,"L"):e}function xp(t,e){return new Cv(e.largestBatchId,w0(t.ct,e.overlayMutation))}function P_(t,e){const n=e.path.lastSegment();return[t,Nn(e.path.popLast()),n]}function D_(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Vi(r.readTime),documentKey:Nn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{getBundleMetadata(e,n){return L_(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Hi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return L_(e).put(function(A){return{bundleId:A.id,createTime:Vi(Mt(A.createTime)),version:A.version}}(n))}getNamedQuery(e,n){return O_(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:bv(s.bundledQuery),readTime:Hi(s.readTime)}}(r)})}saveNamedQuery(e,n){return O_(e).put(function(A){return{name:A.name,readTime:Vi(Mt(A.readTime)),bundledQuery:A.bundledQuery}}(n))}}function L_(t){return Yt(t,"bundles")}function O_(t){return Yt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new zf(e,r)}getOverlay(e,n){return dl(e).get(P_(this.userId,n)).next(r=>r?xp(this.serializer,r):null)}getOverlays(e,n){const r=Wr();return M.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){const A=[];return r.forEach((s,i)=>{const o=new Cv(n,i);A.push(this.ht(e,o))}),M.waitFor(A)}removeOverlaysForBatchId(e,n,r){const A=new Set;n.forEach(i=>A.add(Nn(i.getCollectionPath())));const s=[];return A.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);s.push(dl(e).j("collectionPathOverlayIndex",o))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const A=Wr(),s=Nn(n),i=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return dl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const l=xp(this.serializer,a);A.set(l.getKey(),l)}return A})}getOverlaysForCollectionGroup(e,n,r,A){const s=Wr();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return dl(e).J({index:"collectionGroupOverlayIndex",range:o},(a,l,d)=>{const h=xp(this.serializer,l);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return dl(e).put(function(A,s,i){const[o,a,l]=P_(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:l,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:jc(A.ct,i.mutation)}}(this.serializer,this.userId,n))}}function dl(t){return Yt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{Pt(e){return Yt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Dc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=TA(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Qs(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?rF(e)?this.dt(n,Number.MAX_SAFE_INTEGER):jf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):pe()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const A of Object.keys(r))this.Vt(A,n),this.Tt(r[A],n)}wt(e,n){var r,A;const s=e.fields||{};this.dt(n,53);const i="value",o=((A=(r=s[i].arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.length)||0;this.dt(n,15),n.At(pt(o)),this.Vt(i,n),this.Tt(s[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const A of r)this.Tt(A,n)}yt(e,n){this.dt(n,37),oe.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ui.vt=new ui;function k4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function M_(t){const e=64-function(r){let A=0;for(let s=0;s<8;++s){const i=k4(255&r[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class R4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const A=n.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const A=n.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const n=this.qt(e),r=M_(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=255&n[A]}Kt(e){const n=this.qt(e),r=M_(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=~(255&n[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let A=1;A<n.length;++A)n[A]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const A=new Uint8Array(r);A.set(this.buffer),this.buffer=A}}class N4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class P4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class hl{constructor(){this.jt=new R4,this.Ht=new N4(this.jt),this.Jt=new P4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,r,A){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=A}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new di(this.indexId,this.documentKey,this.arrayValue,r)}}function KA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=V_(t.arrayValue,e.arrayValue),n!==0?n:(n=V_(t.directionalValue,e.directionalValue),n!==0?n:oe.comparator(t.documentKey,e.documentKey)))}function V_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.Xt=new tt((n,r)=>wt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ye(e.collectionGroup===this.collectionId),this.nn)return!1;const n=o0(e);if(n!==void 0&&!this.sn(n))return!1;const r=oi(e);let A=new Set,s=0,i=0;for(;s<r.length&&this.sn(r[s]);++s)A=A.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!A.has(o.field.canonicalString())){const a=r[s];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++s}for(;s<r.length;++s){const o=r[s];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new tt(wt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new eh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new eh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new eh(r.field,r.dir==="asc"?0:1)));return new Gh(Gh.UNKNOWN_ID,this.collectionId,n,Pc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t){var e,n;if(ye(t instanceof He||t instanceof Ye),t instanceof He){if(t instanceof dF){const A=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>He.create(t.field,"==",s)))||[];return Ye.create(A,"or")}return t}const r=t.filters.map(A=>WF(A));return Ye.create(r,t.op)}function D4(t){if(t.getFilters().length===0)return[];const e=B0(WF(t));return ye($F(e)),v0(e)||y0(e)?[e]:e.getFilters()}function v0(t){return t instanceof He}function y0(t){return t instanceof Ye&&mv(t)}function $F(t){return v0(t)||y0(t)||function(n){if(n instanceof Ye&&u0(n)){for(const r of n.getFilters())if(!v0(r)&&!y0(r))return!1;return!0}return!1}(t)}function B0(t){if(ye(t instanceof He||t instanceof Ye),t instanceof He)return t;if(t.filters.length===1)return B0(t.filters[0]);const e=t.filters.map(r=>B0(r));let n=Ye.create(e,t.op);return n=Jh(n),$F(n)?n:(ye(n instanceof Ye),ye(ga(n)),ye(n.filters.length>1),n.filters.reduce((r,A)=>Tv(r,A)))}function Tv(t,e){let n;return ye(t instanceof He||t instanceof Ye),ye(e instanceof He||e instanceof Ye),n=t instanceof He?e instanceof He?function(A,s){return Ye.create([A,s],"and")}(t,e):j_(t,e):e instanceof He?j_(e,t):function(A,s){if(ye(A.filters.length>0&&s.filters.length>0),ga(A)&&ga(s))return lF(A,s.getFilters());const i=u0(A)?A:s,o=u0(A)?s:A,a=i.filters.map(l=>Tv(l,o));return Ye.create(a,"or")}(t,e),Jh(n)}function j_(t,e){if(ga(e))return lF(e,t.getFilters());{const n=e.filters.map(r=>Tv(t,r));return Ye.create(n,"or")}}function Jh(t){if(ye(t instanceof He||t instanceof Ye),t instanceof He)return t;const e=t.getFilters();if(e.length===1)return Jh(e[0]);if(oF(t))return t;const n=e.map(A=>Jh(A)),r=[];return n.forEach(A=>{A instanceof He?r.push(A):A instanceof Ye&&(A.op===t.op?r.push(...A.filters):r.push(A))}),r.length===1?r[0]:Ye.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.un=new Fv}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(or.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(or.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Fv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n]||new tt(Ve.comparator),s=!A.has(r);return this.index[n]=A.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n];return A&&A.has(r)}getEntries(e){return(this.index[e]||new tt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new Uint8Array(0);class O4{constructor(e,n){this.databaseId=n,this.cn=new Fv,this.ln=new zs(r=>Li(r),(r,A)=>lu(r,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),A=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Nn(A)};return K_(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],A=IDBKeyRange.bound([n,""],[KT(n),""],!1,!0);return K_(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==n)break;r.push(zr(i.parent))}return r})}addFieldIndex(e,n){const r=fl(e),A=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete A.indexId;const s=r.add(A);if(n.indexState){const i=ho(e);return s.next(o=>{i.put(D_(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=fl(e),A=ho(e),s=uo(e);return r.delete(n.indexId).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=fl(e),r=uo(e),A=ho(e);return n.j().next(()=>r.j()).next(()=>A.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(A=>{if(A===0||A===1){const s=new H_(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=uo(e);let A=!0;const s=new Map;return M.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{A&&(A=!!o),s.set(i,o)})).next(()=>{if(A){let i=Re();const o=[];return M.forEach(s,(a,l)=>{Y("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(a)} to execute ${Li(n)}`);const d=function(_,k){const U=o0(k);if(U===void 0)return null;for(const N of Wh(_,U.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(l,a),h=function(_,k){const U=new Map;for(const N of oi(k))for(const C of Wh(_,N.fieldPath))switch(C.op){case"==":case"in":U.set(N.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return U.set(N.fieldPath.canonicalString(),C.value),Array.from(U.values())}return null}(l,a),f=function(_,k){const U=[];let N=!0;for(const C of oi(k)){const x=C.kind===0?x_(_,C.fieldPath,_.startAt):__(_,C.fieldPath,_.startAt);U.push(x.value),N&&(N=x.inclusive)}return new Rs(U,N)}(l,a),w=function(_,k){const U=[];let N=!0;for(const C of oi(k)){const x=C.kind===0?__(_,C.fieldPath,_.endAt):x_(_,C.fieldPath,_.endAt);U.push(x.value),N&&(N=x.inclusive)}return new Rs(U,N)}(l,a),m=this.In(a,l,f),y=this.In(a,l,w),I=this.Tn(a,l,h),B=this.En(a.indexId,d,m,f.inclusive,y,w.inclusive,I);return M.forEach(B,v=>r.G(v,n.limit).next(_=>{_.forEach(k=>{const U=oe.fromSegments(k.documentKey);i.has(U)||(i=i.add(U),o.push(U))})}))}).next(()=>o)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=D4(Ye.create(e.filters,"and")).map(r=>h0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,A,s,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,s.length),l=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/l]):dd,w=this.An(e,f,r[h%l],A),m=this.Rn(e,f,s[h%l],i),y=o.map(I=>this.An(e,f,I,!0));d.push(...this.createRange(w,m,y))}return d}An(e,n,r,A){const s=new di(e,oe.empty(),n,r);return A?s:s.Zt()}Rn(e,n,r,A){const s=new di(e,oe.empty(),n,r);return A?s.Zt():s}Pn(e,n){const r=new H_(n),A=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const o of s)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const A=this.hn(n);return M.forEach(A,s=>this.Pn(e,s).next(i=>{i?r!==0&&i.fields.length<function(a){let l=new tt(wt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:l=l.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&A.length>1&&r===2?1:r)}Vn(e,n){const r=new hl;for(const A of oi(e)){const s=n.data.field(A.fieldPath);if(s==null)return null;const i=r.Yt(A.kind);ui.vt.It(s,i)}return r.zt()}dn(e){const n=new hl;return ui.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new hl;return ui.vt.It(Di(this.databaseId,n),r.Yt(function(s){const i=oi(s);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let A=[];A.push(new hl);let s=0;for(const i of oi(e)){const o=r[s++];for(const a of A)if(this.fn(n,i.fieldPath)&&Mc(o))A=this.gn(A,i,o);else{const l=a.Yt(i.kind);ui.vt.It(o,l)}}return this.pn(A)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const A=[...e],s=[];for(const i of r.arrayValue.values||[])for(const o of A){const a=new hl;a.seed(o.zt()),ui.vt.It(i,a.Yt(n.kind)),s.push(a)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof He&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=fl(e),A=ho(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const i=[];return M.forEach(s,o=>A.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new Pc(h.sequenceNumber,new or(Hi(h.readTime),new oe(zr(h.documentKey)),h.largestBatchId)):Pc.empty(),w=d.fields.map(([m,y])=>new eh(wt.fromServerFormat(m),y));return new Gh(d.indexId,d.collectionGroup,w,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,A)=>{const s=r.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Se(r.collectionGroup,A.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const A=fl(e),s=ho(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,a=>s.put(D_(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(A,s)=>{const i=r.get(A.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(o=>(r.set(A.collectionGroup,o),M.forEach(o,a=>this.wn(e,A,a).next(l=>{const d=this.Sn(s,a);return l.isEqual(d)?M.resolve():this.bn(e,s,a,l,d)}))))})}Dn(e,n,r,A){return uo(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,A){return uo(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const A=uo(e);let s=new tt(KA);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{s=s.add(new di(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,n){let r=new tt(KA);const A=this.Vn(n,e);if(A==null)return r;const s=o0(n);if(s!=null){const i=e.data.field(s.fieldPath);if(Mc(i))for(const o of i.arrayValue.values||[])r=r.add(new di(n.indexId,e.key,this.dn(o),A))}else r=r.add(new di(n.indexId,e.key,dd,A));return r}bn(e,n,r,A,s){Y("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,l,d,h,f){const w=a.getIterator(),m=l.getIterator();let y=co(w),I=co(m);for(;y||I;){let B=!1,v=!1;if(y&&I){const _=d(y,I);_<0?v=!0:_>0&&(B=!0)}else y!=null?v=!0:B=!0;B?(h(I),I=co(m)):v?(f(y),y=co(w)):(y=co(w),I=co(m))}}(A,s,KA,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),M.waitFor(i)}yn(e){let n=1;return ho(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,A,s)=>{s.done(),n=A.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>KA(i,o)).filter((i,o,a)=>!o||KA(i,a[o-1])!==0);const A=[];A.push(e);for(const i of r){const o=KA(i,e),a=KA(i,n);if(o===0)A[0]=e.Zt();else if(o>0&&a<0)A.push(i),A.push(i.Zt());else if(a>0)break}A.push(n);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const o=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,dd,[]],a=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,dd,[]];s.push(IDBKeyRange.bound(o,a))}return s}Cn(e,n){return KA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(G_)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(A=>A||pe())).next(G_)}}function K_(t){return Yt(t,"collectionParents")}function uo(t){return Yt(t,"indexEntries")}function fl(t){return Yt(t,"indexConfiguration")}function ho(t){return Yt(t,"indexState")}function G_(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const A=t[r].indexState.offset;hv(A,e)<0&&(e=A),n<A.largestBatchId&&(n=A.largestBatchId)}return new or(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t,e,n){const r=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));s.push(a.next(()=>{ye(o===1)}));const l=[];for(const d of n.mutations){const h=XT(e,d.key.path,n.batchId);s.push(A.delete(h)),l.push(d.key)}return M.waitFor(s).next(()=>l)}function Xh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(41943040,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);class Wf{constructor(e,n,r,A){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=A,this.Fn={}}static lt(e,n,r,A){ye(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Wf(s,n,r,A)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return GA(e).J({index:"userMutationsIndex",range:r},(A,s,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,A){const s=bo(e),i=GA(e);return i.add({}).next(o=>{ye(typeof o=="number");const a=new xv(o,n,r,A),l=function(w,m,y){const I=y.baseMutations.map(v=>jc(w.ct,v)),B=y.mutations.map(v=>jc(w.ct,v));return{userId:m,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:I,mutations:B}}(this.serializer,this.userId,a),d=[];let h=new tt((f,w)=>Se(f.canonicalString(),w.canonicalString()));for(const f of A){const w=XT(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(l)),d.push(s.put(w,ID))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),M.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return GA(e).get(n).next(r=>r?(ye(r.userId===this.userId),ci(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const A=r.keys();return this.Fn[n]=A,A}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return GA(e).J({index:"userMutationsIndex",range:A},(i,o,a)=>{o.userId===this.userId&&(ye(o.batchId>=r),s=ci(this.serializer,o)),a.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return GA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(A,s,i)=>{r=s.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return GA(e).U("userMutationsIndex",n).next(r=>r.map(A=>ci(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=th(this.userId,n.path),A=IDBKeyRange.lowerBound(r),s=[];return bo(e).J({range:A},(i,o,a)=>{const[l,d,h]=i,f=zr(d);if(l===this.userId&&n.path.isEqual(f))return GA(e).get(h).next(w=>{if(!w)throw pe();ye(w.userId===this.userId),s.push(ci(this.serializer,w))});a.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(Se);const A=[];return n.forEach(s=>{const i=th(this.userId,s.path),o=IDBKeyRange.lowerBound(i),a=bo(e).J({range:o},(l,d,h)=>{const[f,w,m]=l,y=zr(w);f===this.userId&&s.path.isEqual(y)?r=r.add(m):h.done()});A.push(a)}),M.waitFor(A).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1,s=th(this.userId,r),i=IDBKeyRange.lowerBound(s);let o=new tt(Se);return bo(e).J({range:i},(a,l,d)=>{const[h,f,w]=a,m=zr(f);h===this.userId&&r.isPrefixOf(m)?m.length===A&&(o=o.add(w)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],A=[];return n.forEach(s=>{A.push(GA(e).get(s).next(i=>{if(i===null)throw pe();ye(i.userId===this.userId),r.push(ci(this.serializer,i))}))}),M.waitFor(A).next(()=>r)}removeMutationBatch(e,n){return qF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return bo(e).J({range:r},(s,i,o)=>{if(s[0]===this.userId){const a=zr(s[1]);A.push(a)}else o.done()}).next(()=>{ye(A.length===0)})})}containsKey(e,n){return JF(e,this.userId,n)}Nn(e){return XF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JF(t,e,n){const r=th(e,n.path),A=r[1],s=IDBKeyRange.lowerBound(r);let i=!1;return bo(t).J({range:s,H:!0},(o,a,l)=>{const[d,h,f]=o;d===e&&h===A&&(i=!0),l.done()}).next(()=>i)}function GA(t){return Yt(t,"mutations")}function bo(t){return Yt(t,"documentMutations")}function XF(t){return Yt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ji(0)}static kn(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new ji(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ie.fromTimestamp(new yt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(A=>(A.highestListenSequenceNumber=n,r&&(A.lastRemoteSnapshotVersion=r.toTimestamp()),n>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=n),this.Qn(e,A)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fo(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let A=0;const s=[];return fo(e).J((i,o)=>{const a=Sl(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(A++,s.push(this.removeTargetData(e,a)))}).next(()=>M.waitFor(s)).next(()=>A)}forEachTarget(e,n){return fo(e).J((r,A)=>{const s=Sl(A);n(s)})}qn(e){return W_(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}Qn(e,n){return W_(e).put("targetGlobalKey",n)}Kn(e,n){return fo(e).put(zF(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Li(n),A=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return fo(e).J({range:A,index:"queryTargetsIndex"},(i,o,a)=>{const l=Sl(o);lu(n,l.target)&&(s=l,a.done())}).next(()=>s)}addMatchingKeys(e,n,r){const A=[],s=ts(e);return n.forEach(i=>{const o=Nn(i.path);A.push(s.put({targetId:r,path:o})),A.push(this.referenceDelegate.addReference(e,r,i))}),M.waitFor(A)}removeMatchingKeys(e,n,r){const A=ts(e);return M.forEach(n,s=>{const i=Nn(s.path);return M.waitFor([A.delete([r,i]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ts(e),A=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(A)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),A=ts(e);let s=Re();return A.J({range:r,H:!0},(i,o,a)=>{const l=zr(i[1]),d=new oe(l);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Nn(n.path),A=IDBKeyRange.bound([r],[KT(r)],!1,!0);let s=0;return ts(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,o],a,l)=>{i!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,n){return fo(e).get(n).next(r=>r?Sl(r):null)}}function fo(t){return Yt(t,"targets")}function W_(t){return Yt(t,"targetGlobal")}function ts(t){return Yt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_([t,e],[n,r]){const A=Se(t,n);return A===0?Se(e,r):A}class V4{constructor(e){this.Un=e,this.buffer=new tt($_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Y("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gs(n)?Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ks(n)}await this.Hn(3e5)})}}class j4{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Gn.oe);const r=new V4(n);return this.Jn.forEachTarget(e,A=>r.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>r.zn(A))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(z_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z_):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,A,s,i,o,a,l;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),_o()<=Pe.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(l-a)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function K4(t,e){return new j4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n){this.db=e,this.garbageCollector=K4(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(A=>r+A))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,A)=>n(A))}addReference(e,n,r){return hd(e,r)}removeReference(e,n,r){return hd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return hd(e,n)}nr(e,n){return function(A,s){let i=!1;return XF(A).Y(o=>JF(A,o,s).next(a=>(a&&(i=!0),M.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(l=>{if(!l)return s++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Ie.min()),ts(e).delete(function(h){return[0,Nn(h.path)]}(i))))});A.push(a)}}).next(()=>M.waitFor(A)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return hd(e,n)}tr(e,n){const r=ts(e);let A,s=Gn.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:l})=>{i===0?(s!==Gn.oe&&n(new oe(zr(A)),s),s=l,A=a):s=Gn.oe}).next(()=>{s!==Gn.oe&&n(new oe(zr(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hd(t,e){return ts(t).put(function(r,A){return{targetId:0,path:Nn(r.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ti(e).put(r)}removeEntry(e,n,r){return ti(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],qh(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=dt.newInvalidDocument(n);return ti(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gl(n))},(A,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:dt.newInvalidDocument(n)};return ti(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gl(n))},(A,s)=>{r={document:this.ir(n,s),size:Xh(s)}}).next(()=>r)}getEntries(e,n){let r=Wn();return this._r(e,n,(A,s)=>{const i=this.ir(A,s);r=r.insert(A,i)}).next(()=>r)}ar(e,n){let r=Wn(),A=new at(oe.comparator);return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o),A=A.insert(s,Xh(i))}).next(()=>({documents:r,ur:A}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let A=new tt(X_);n.forEach(a=>A=A.add(a));const s=IDBKeyRange.bound(gl(A.first()),gl(A.last())),i=A.getIterator();let o=i.getNext();return ti(e).J({index:"documentKeyIndex",range:s},(a,l,d)=>{const h=oe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;o&&X_(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,l),o=i.hasNext()?i.getNext():null),o?d.$(gl(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,A,s){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),qh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ti(e).U(IDBKeyRange.bound(o,a,!0)).next(l=>{s==null||s.incrementDocumentReadCount(l.length);let d=Wn();for(const h of l){const f=this.ir(oe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(uu(n,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,A){let s=Wn();const i=J_(n,r),o=J_(n,or.max());return ti(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,l,d)=>{const h=this.ir(oe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new W4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return q_(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}rr(e,n){return q_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=U4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ie.min())))return r}return dt.newInvalidDocument(e)}}function ZF(t){return new z4(t)}class W4 extends YF{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new zs(r=>r.toString(),(r,A)=>r.isEqual(A))}applyChanges(e){const n=[];let r=0,A=new tt((s,i)=>Se(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=N_(this.cr.serializer,i);A=A.add(s.path.popLast());const l=Xh(a);r+=l-o.size,n.push(this.cr.addEntry(e,s,a))}else if(r-=o.size,this.trackRemovals){const a=N_(this.cr.serializer,i.convertToNoDocument(Ie.min()));n.push(this.cr.addEntry(e,s,a))}}),A.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:r.get(s).readTime})}),r))}}function q_(t){return Yt(t,"remoteDocumentGlobal")}function ti(t){return Yt(t,"remoteDocumentsV14")}function gl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J_(t,e){const n=e.documentKey.path.toArray();return[t,qh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function X_(t,e){const n=t.path.toArray(),r=e.path.toArray();let A=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(A=Se(n[s],r[s]),A)return A;return A=Se(n.length,r.length),A||(A=Se(n[n.length-2],r[r.length-2]),A||Se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,A){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=A}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(A=>(r=A,this.remoteDocumentCache.getEntry(e,n))).next(A=>(r!==null&&ec(r.mutation,A,zn.empty(),yt.now()),A))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const A=Wr();return this.populateOverlays(e,A,n).next(()=>this.computeViews(e,n,A,r).next(s=>{let i=Ul();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const A=[];return r.forEach(s=>{n.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,A){let s=Wn();const i=Zl(),o=function(){return Zl()}();return n.forEach((a,l)=>{const d=r.get(l.key);A.has(l.key)&&(d===void 0||d.mutation instanceof PA)?s=s.insert(l.key,l):d!==void 0?(i.set(l.key,d.mutation.getFieldMask()),ec(d.mutation,l,d.mutation.getFieldMask(),yt.now())):i.set(l.key,zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((l,d)=>i.set(l,d)),n.forEach((l,d)=>{var h;return o.set(l,new $4(d,(h=i.get(l))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Zl();let A=new at((i,o)=>i-o),s=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const l=n.get(a);if(l===null)return;let d=r.get(a)||zn.empty();d=o.applyToLocalView(l,d),r.set(a,d);const h=(A.get(o.batchId)||Re()).add(a);A=A.insert(o.batchId,h)})}).next(()=>{const i=[],o=A.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),l=a.key,d=a.value,h=vF();d.forEach(f=>{if(!s.has(f)){const w=EF(n.get(f),r.get(f));w!==null&&h.set(f,w),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,l,h))}return M.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,A){return function(i){return oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,A):this.getDocumentsMatchingCollectionQuery(e,n,r,A)}getNextDocuments(e,n,r,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,A-s.size):M.resolve(Wr());let o=-1,a=s;return i.next(l=>M.forEach(l,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,a,l,Re())).next(d=>({batchId:o,changes:wF(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let A=Ul();return r.isFoundDocument()&&(A=A.insert(r.key,r)),A})}getDocumentsMatchingCollectionGroupQuery(e,n,r,A){const s=n.collectionGroup;let i=Ul();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,a=>{const l=function(h,f){return new NA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,A))).next(i=>{s.forEach((a,l)=>{const d=l.getKey();i.get(d)===null&&(i=i.insert(d,dt.newInvalidDocument(d)))});let o=Ul();return i.forEach((a,l)=>{const d=s.get(a);d!==void 0&&ec(d.mutation,l,zn.empty(),yt.now()),uu(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(A){return{id:A.id,version:A.version,createTime:Mt(A.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(A){return{name:A.name,query:bv(A.bundledQuery),readTime:Mt(A.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.overlays=new at(oe.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return M.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((A,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const A=this.Ir.get(r);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const A=Wr(),s=n.length+1,i=new oe(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,l=a.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&a.largestBatchId>r&&A.set(a.getKey(),a)}return M.resolve(A)}getOverlaysForCollectionGroup(e,n,r,A){let s=new at((l,d)=>l-d);const i=this.overlays.getIterator();for(;i.hasNext();){const l=i.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Wr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}const o=Wr(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((l,d)=>o.set(l,d)),!(o.size()>=A)););return M.resolve(o)}ht(e,n,r){const A=this.overlays.get(r.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(r.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Cv(n,r));let s=this.Ir.get(n);s===void 0&&(s=Re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.Tr=new tt(en.Er),this.dr=new tt(en.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new en(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new en(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new oe(new Ve([])),r=new en(n,e),A=new en(n,e+1),s=[];return this.dr.forEachInRange([r,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Ve([])),r=new en(n,e),A=new en(n,e+1);let s=Re();return this.dr.forEachInRange([r,A],i=>{s=s.add(i.key)}),s}containsKey(e){const n=new en(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(en.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new xv(s,n,r,A);this.mutationQueue.push(i);for(const o of A)this.br=this.br.add(new en(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=this.vr(r),s=A<0?0:A;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new en(n,0),A=new en(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,A],i=>{const o=this.Dr(i.wr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(Se);return n.forEach(A=>{const s=new en(A,0),i=new en(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],o=>{r=r.add(o.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1;let s=r;oe.isDocumentKey(s)||(s=s.child(""));const i=new en(new oe(s),0);let o=new tt(Se);return this.br.forEachWhile(a=>{const l=a.key.path;return!!r.isPrefixOf(l)&&(l.length===A&&(o=o.add(a.wr)),!0)},i),M.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const A=this.Dr(r);A!==null&&n.push(A)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,A=>{const s=new en(A.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new en(n,0),A=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.Mr=e,this.docs=function(){return new at(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,A=this.docs.get(r),s=A?A.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(A=>{const s=this.docs.get(A);r=r.insert(A,s?s.document.mutableCopy():dt.newInvalidDocument(A))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,A){let s=Wn();const i=n.path,o=new oe(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:l,value:{document:d}}=a.getNext();if(!i.isPrefixOf(l.path))break;l.path.length>i.length+1||hv(zT(d),r)<=0||(A.has(d.key)||uu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,A){pe()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eL(this)}getSize(e){return M.resolve(this.size)}}class eL extends YF{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,A)=>{A.isValidDocument()?n.push(this.cr.addEntry(e,A)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.persistence=e,this.Nr=new zs(n=>Li(n),lu),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Uv,this.targetCount=0,this.kr=ji.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,A)=>n(A)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let A=0;const s=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),A++)}),M.waitFor(s).next(()=>A)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const A=this.persistence.referenceDelegate,s=[];return A&&n.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gn(0),this.Kr=!1,this.Kr=!0,this.$r=new X4,this.referenceDelegate=e(this),this.Ur=new tL(this),this.indexManager=new L4,this.remoteDocumentCache=function(A){return new Z4(A)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new GF(n),this.Gr=new q4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new J4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Y4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const A=new nL(this.Qr.next());return this.referenceDelegate.zr(),r(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nL extends $T{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Jr=new Uv,this.Yr=null}static Zr(e){return new $f(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(A=>this.Xr.add(A.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const A=oe.fromPath(r);return this.ei(e,A).next(s=>{s||n.removeEntry(A,Ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.serializer=e}O(e,n,r,A){const s=new Vf("createOrUpgrade",n);r<1&&A>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u_,{unique:!0}),a.createObjectStore("documentMutations")}(e),Y_(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return r<3&&A>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Y_(e)),i=i.next(()=>function(a){const l=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ie.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&A>=4&&(r!==0&&(i=i.next(()=>function(a,l){return l.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u_,{unique:!0});const h=l.store("mutations"),f=d.map(w=>h.put(w));return M.waitFor(f)})}(e,s))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&A>=5&&(i=i.next(()=>this.ni(s))),r<6&&A>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&A>=7&&(i=i.next(()=>this.ii(s))),r<8&&A>=8&&(i=i.next(()=>this.si(e,s))),r<9&&A>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&A>=10&&(i=i.next(()=>this.oi(s))),r<11&&A>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&A>=12&&(i=i.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:DD});l.createIndex("collectionPathOverlayIndex",LD,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",OD,{unique:!1})})(e)})),r<13&&A>=13&&(i=i.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:ED});l.createIndex("documentKeyIndex",bD),l.createIndex("collectionGroupIndex",TD)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),r<15&&A>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:kD}).createIndex("sequenceNumberIndex",RD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:ND}).createIndex("documentKeyIndex",PD,{unique:!1})}(e))),r<16&&A>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&A>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,A)=>{n+=Xh(A)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(A=>M.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>M.forEach(o,a=>{ye(a.userId===s.userId);const l=ci(this.serializer,a);return qF(e,s.userId,l).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return r.J((i,o)=>{const a=new Ve(i),l=function(h){return[0,Nn(h)]}(a);s.push(n.get(l).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Nn(h),sequenceNumber:A.highestListenSequenceNumber}))(a)))}).next(()=>M.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:SD});const r=n.store("collectionParents"),A=new Fv,s=i=>{if(A.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Nn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new Ve(i);return s(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],l)=>{const d=zr(o);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,A)=>{const s=Sl(A),i=zF(this.serializer,s);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),A=[];return r.J((s,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new oe(Ve.fromString(h.document.name).popFirst(5)):h.noDocument?oe.fromSegments(h.noDocument.path):h.unknownDocument?oe.fromSegments(h.unknownDocument.path):pe()}(i).path.toArray(),l={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(o.put(l))}).next(()=>M.waitFor(A))}ai(e,n){const r=n.store("mutations"),A=ZF(this.serializer),s=new t1($f.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var l;let d=(l=o.get(a.userId))!==null&&l!==void 0?l:Re();ci(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),M.forEach(o,(a,l)=>{const d=new nn(l),h=zf.lt(this.serializer,d),f=s.getIndexManager(d),w=Wf.lt(d,this.serializer,f,s.referenceDelegate);return new e1(A,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new a0(n,Gn.oe),a).next()})})}}function Y_(t){t.createObjectStore("targetDocuments",{keyPath:UD}).createIndex("documentTargetsIndex",QD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FD,{unique:!0}),t.createObjectStore("targetGlobal")}const _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qv{constructor(e,n,r,A,s,i,o,a,l,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=i,this.document=o,this.ci=l,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Qv.D())throw new X(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G4(this,A),this.Ai=n+"main",this.serializer=new GF(a),this.Ri=new Xr(this.Ai,this.hi,new rL(this.serializer)),this.$r=new S4,this.Ur=new M4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZF(this.serializer),this.Gr=new Q4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(j.FAILED_PRECONDITION,_p);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Gn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Gs(e))return Y("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pl(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return fd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Yt(n,"clientMetadata");return r.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(o=>s.indexOf(o)===-1);return M.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):pl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new X(j.FAILED_PRECONDITION,_p);return!1}}return!(!this.networkEnabled||!this.inForeground)||fd(e).U().next(r=>this.xi(r,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,o=this.networkEnabled===A.networkEnabled;if(s||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new a0(e,Gn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>fd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Wf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new O4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return zf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("IndexedDbPersistence","Starting transaction:",e);const A=n==="readonly"?"readonly":"readwrite",s=function(a){return a===17?HD:a===16?VD:a===15?gv:a===14?eF:a===13?ZT:a===12?MD:a===11?YT:void pe()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,o=>(i=new a0(o,this.Qr?this.Qr.next():Gn.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw Ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new X(j.FAILED_PRECONDITION,WT);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return pl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(j.FAILED_PRECONDITION,_p)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pl(e).put("owner",n)}static D(){return Xr.D()}bi(e){const n=pl(e);return n.get("owner").next(r=>this.vi(r)?(Y("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;xT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return Y("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ot("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ot("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pl(t){return Yt(t,"owner")}function fd(t){return Yt(t,"clientMetadata")}function Sv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,r,A){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=A}static Wi(e,n){let r=Re(),A=Re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new kv(e,n.fromCache,r,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xT()?8:qT(bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,A){const s={result:null};return this.Yi(e,n).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,n,A,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new AL;return this.Xi(e,n,i).next(o=>{if(s.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>s.result)}es(e,n,r,A){return r.documentReadCount<this.ji?(_o()<=Pe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(_o()<=Pe.DEBUG&&Y("QueryEngine","Query:",Co(n),"scans",r.documentReadCount,"local documents and returns",A,"documents as results."),r.documentReadCount>this.Hi*A?(_o()<=Pe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):M.resolve())}Yi(e,n){if(C_(n))return M.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(A=>A===0?null:(n.limit!==null&&A===1&&(n=$h(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=Re(...s);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const l=this.ts(n,o);return this.ns(n,l,i,a.readTime)?this.Yi(e,$h(n,null,"F")):this.rs(e,l,n,a)}))})))}Zi(e,n,r,A){return C_(n)||A.isEqual(Ie.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const i=this.ts(n,s);return this.ns(n,i,r,A)?M.resolve(null):(_o()<=Pe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Co(n)),this.rs(e,i,n,GT(A,-1)).next(o=>o))})}ts(e,n){let r=new tt(pF(e));return n.forEach((A,s)=>{uu(e,s)&&(r=r.add(s))}),r}ns(e,n,r,A){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,n,r){return _o()<=Pe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Co(n)),this.Ji.getDocumentsMatchingQuery(e,n,or.min(),r)}rs(e,n,r,A){return this.Ji.getDocumentsMatchingQuery(e,r,A).next(s=>(n.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,A){this.persistence=e,this.ss=n,this.serializer=A,this.os=new at(Se),this._s=new zs(s=>Li(s),lu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function r1(t,e,n,r){return new sL(t,e,n,r)}async function A1(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let A;return n.mutationQueue.getAllMutationBatches(r).next(s=>(A=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=Re();for(const l of A){i.push(l.batchId);for(const d of l.mutations)a=a.add(d.key)}for(const l of s){o.push(l.batchId);for(const d of l.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(l=>({hs:l,removedBatchIds:i,addedBatchIds:o}))})})}function iL(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const A=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,l,d){const h=l.batch,f=h.keys();let w=M.resolve();return f.forEach(m=>{w=w.next(()=>d.getEntry(a,m)).next(y=>{const I=l.docVersions.get(m);ye(I!==null),y.version.compareTo(I)<0&&(h.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),d.addEntry(y)))})}),w.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,A,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Re();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,A))})}function s1(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function oL(t,e){const n=le(t),r=e.snapshotVersion;let A=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});A=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let w=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(St.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),A=A.insert(h,w),function(y,I,B){return y.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(f,w,d)&&o.push(n.Ur.updateTargetData(s,w))});let a=Wn(),l=Re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(i1(s,i,e.documentUpdates).next(d=>{a=d.Ps,l=d.Is})),!r.isEqual(Ie.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return M.waitFor(o).next(()=>i.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,l)).next(()=>a)}).then(s=>(n.os=A,s))}function i1(t,e,n){let r=Re(),A=Re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=Wn();return n.forEach((o,a)=>{const l=s.get(o);a.isFoundDocument()!==l.isFoundDocument()&&(A=A.add(o)),a.isNoDocument()&&a.version.isEqual(Ie.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!l.isValidDocument()||a.version.compareTo(l.version)>0||a.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):Y("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",a.version)}),{Ps:i,Is:A}})}function aL(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function va(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let A;return n.Ur.getTargetData(r,e).next(s=>s?(A=s,M.resolve(A)):n.Ur.allocateTargetId(r).next(i=>(A=new gA(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,A).next(()=>A))))}).then(r=>{const A=n.os.get(r.targetId);return(A===null||r.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ya(t,e,n){const r=le(t),A=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!Gs(i))throw i;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(A.target)}function Yh(t,e,n){const r=le(t);let A=Ie.min(),s=Re();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,l,d){const h=le(a),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(l,d)}(r,i,Pn(e)).next(o=>{if(o)return A=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?A:Ie.min(),n?s:Re())).next(o=>(l1(r,gF(e),o),{documents:o,Ts:s})))}function o1(t,e){const n=le(t),r=le(n.Ur),A=n.os.get(e);return A?Promise.resolve(A.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(i=>i?i.target:null))}function a1(t,e){const n=le(t),r=n.us.get(e)||Ie.min();return n.persistence.runTransaction("Get new document changes","readonly",A=>n.cs.getAllFromCollectionGroup(A,e,GT(r,-1),Number.MAX_SAFE_INTEGER)).then(A=>(l1(n,e,A),A))}function l1(t,e,n){let r=t.us.get(e)||Ie.min();n.forEach((A,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function lL(t,e,n,r){const A=le(t);let s=Re(),i=Wn();for(const l of n){const d=e.Es(l.metadata.name);l.document&&(s=s.add(d));const h=e.ds(l);h.setReadTime(e.As(l.metadata.readTime)),i=i.insert(d,h)}const o=A.cs.newChangeBuffer({trackRemovals:!0}),a=await va(A,function(d){return Pn(Pa(Ve.fromString(`__bundle__/docs/${d}`)))}(r));return A.persistence.runTransaction("Apply bundle documents","readwrite",l=>i1(l,o,i).next(d=>(o.apply(l),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(l,a.targetId).next(()=>A.Ur.addMatchingKeys(l,s,a.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))}async function cL(t,e,n=Re()){const r=await va(t,Pn(bv(e.bundledQuery))),A=le(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=Mt(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const o=r.withResumeToken(St.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(o.targetId,o),A.Ur.updateTargetData(s,o).next(()=>A.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>A.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function Z_(t,e){return`firestore_clients_${t}_${e}`}function eC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Cp(t,e){return`firestore_targets_${t}_${e}`}class Zh{constructor(e,n,r,A){this.user=e,this.batchId=n,this.state=r,this.error=A}static Rs(e,n,r){const A=JSON.parse(r);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new X(A.error.code,A.error.message))),i?new Zh(e,n,A.state,s):(Ot("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let A,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(A=new X(r.error.code,r.error.message))),s?new tc(e,r.state,A):(Ot("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ef{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let A=typeof r=="object"&&r.activeTargetIds instanceof Array,s=vv();for(let i=0;A&&i<r.activeTargetIds.length;++i)A=JT(r.activeTargetIds[i]),s=s.add(r.activeTargetIds[i]);return A?new ef(e,s):(Ot("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Rv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Rv(n.clientId,n.onlineState):(Ot("SharedClientState",`Failed to parse online state: ${e}`),null)}}class x0{constructor(){this.activeTargetIds=vv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ip{constructor(e,n,r,A,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new at(Se),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Z_(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new x0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const A=this.getItem(Z_(this.persistenceKey,r));if(A){const s=ef.Rs(r,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,A)=>{A.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Cp(this.persistenceKey,e));if(A){const s=tc.Rs(e,A);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(A=>{this.Qs(A)}),this.currentUser=e,r.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y("SharedClientState","READ",e,n),n}setItem(e,n){Y("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(Y("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let i=Gn.oe;if(s!=null)try{const o=JSON.parse(s);ye(typeof o=="number"),i=o}catch(o){Ot("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==Gn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const A=new Zh(this.currentUser,e,n,r),s=eC(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const n=eC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const A=Cp(this.persistenceKey,e),s=new tc(e,n,r);this.setItem(A,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return ef.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),A=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Zh.Rs(new nn(s),A,n)}Ys(e,n){const r=this.Ms.exec(e),A=Number(r[1]);return tc.Rs(A,n)}Ls(e){return Rv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Y("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(r),i=[],o=[];return s.forEach(a=>{A.has(a)||i.push(a)}),A.forEach(a=>{s.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=vv();return e.forEach((r,A)=>{n=n.unionWith(A.activeTargetIds)}),n}}class c1{constructor(){this.so=new x0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new x0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd=null;function Ep(){return gd===null?gd=function(){return 268435456+Math.round(2147483648*Math.random())}():gd++,"0x"+gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class fL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(n,r,A,s,i){const o=Ep(),a=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${o}:`,a,A);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,i),this.No(n,a,l,A).then(d=>(Y("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw eA("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",A),d})}Lo(n,r,A,s,i,o){return this.Mo(n,r,A,s,i)}Oo(n,r,A){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>n[i]=s),A&&A.headers.forEach((s,i)=>n[i]=s)}xo(n,r){const A=dL[n];return`${this.Do}/v1/${r}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,A){const s=Ep();return new Promise((i,o)=>{const a=new DT;a.setWithCredentials(!0),a.listenOnce(LT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Zd.NO_ERROR:const d=a.getResponseJson();Y(Bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case Zd.TIMEOUT:Y(Bn,`RPC '${e}' ${s} timed out`),o(new X(j.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const h=a.getStatus();if(Y(Bn,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const m=function(I){const B=I.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(B)>=0?B:j.UNKNOWN}(w.status);o(new X(m,w.message))}else o(new X(j.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new X(j.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{Y(Bn,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(A);Y(Bn,`RPC '${e}' ${s} sending request:`,A),a.send(n,"POST",l,r,15)})}Bo(e,n,r){const A=Ep(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=VT(),o=MT(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=s.join("");Y(Bn,`Creating RPC '${e}' stream ${A}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,w=!1;const m=new hL({Io:I=>{w?Y(Bn,`Not sending because RPC '${e}' stream ${A} is closed:`,I):(f||(Y(Bn,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),Y(Bn,`RPC '${e}' stream ${A} sending:`,I),h.send(I))},To:()=>h.close()}),y=(I,B,v)=>{I.listen(B,_=>{try{v(_)}catch(k){setTimeout(()=>{throw k},0)}})};return y(h,Fl.EventType.OPEN,()=>{w||(Y(Bn,`RPC '${e}' stream ${A} transport opened.`),m.yo())}),y(h,Fl.EventType.CLOSE,()=>{w||(w=!0,Y(Bn,`RPC '${e}' stream ${A} transport closed`),m.So())}),y(h,Fl.EventType.ERROR,I=>{w||(w=!0,eA(Bn,`RPC '${e}' stream ${A} transport errored:`,I),m.So(new X(j.UNAVAILABLE,"The operation could not be completed")))}),y(h,Fl.EventType.MESSAGE,I=>{var B;if(!w){const v=I.data[0];ye(!!v);const _=v,k=_.error||((B=_[0])===null||B===void 0?void 0:B.error);if(k){Y(Bn,`RPC '${e}' stream ${A} received error:`,k);const U=k.status;let N=function(b){const Q=jt[b];if(Q!==void 0)return FF(Q)}(U),C=k.message;N===void 0&&(N=j.INTERNAL,C="Unknown error status: "+U+" with message "+k.message),w=!0,m.So(new X(N,C)),h.close()}else Y(Bn,`RPC '${e}' stream ${A} received:`,v),m.bo(v)}}),y(o,OT.STAT_EVENT,I=>{I.stat===i0.PROXY?Y(Bn,`RPC '${e}' stream ${A} detected buffering proxy`):I.stat===i0.NOPROXY&&Y(Bn,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return typeof window<"u"?window:null}function ih(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){return new y4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,r=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),A=Math.max(0,n-r);A>0&&Y("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r,A,s,i,o,a){this.ui=e,this.Ho=r,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,A])=>{this.Yo===n&&this.P_(r,A)},r=>{e(()=>{const A=new X(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(A)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{r(()=>this.I_(A))}),this.stream.onMessage(A=>{r(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gL extends d1{constructor(e,n,r,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=_4(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ie.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Ie.min():i.readTime?Mt(i.readTime):Ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=m0(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=zh(a)?{documents:OF(s,a)}:{query:MF(s,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=kF(s,i.resumeToken);const l=g0(s,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(Ie.min())>0){o.readTime=wa(s,i.snapshotVersion.toTimestamp());const l=g0(s,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=I4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=m0(this.serializer),n.removeTarget=e,this.a_(n)}}class pL extends d1{constructor(e,n,r,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=C4(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=m0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL extends class{}{constructor(e,n,r,A){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,p0(n,r),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(j.UNKNOWN,s.toString())})}Lo(e,n,r,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,p0(n,r),A,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(j.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class wL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ot(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,r,A,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{r.enqueueAndForget(async()=>{Ws(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=le(a);l.L_.add(4),await Oa(l),l.q_.set("Unknown"),l.L_.delete(4),await pu(l)}(this))})}),this.q_=new wL(r,A)}}async function pu(t){if(Ws(t))for(const e of t.B_)await e(!0)}async function Oa(t){for(const e of t.B_)await e(!1)}function qf(t,e){const n=le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Lv(n)?Dv(n):Va(n).r_()&&Pv(n,e))}function Ba(t,e){const n=le(t),r=Va(n);n.N_.delete(e),r.r_()&&h1(n,e),n.N_.size===0&&(r.r_()?r.o_():Ws(n)&&n.q_.set("Unknown"))}function Pv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Va(t).A_(e)}function h1(t,e){t.Q_.xe(e),Va(t).R_(e)}function Dv(t){t.Q_=new p4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Va(t).start(),t.q_.v_()}function Lv(t){return Ws(t)&&!Va(t).n_()&&t.N_.size>0}function Ws(t){return le(t).L_.size===0}function f1(t){t.Q_=void 0}async function yL(t){t.q_.set("Online")}async function BL(t){t.N_.forEach((e,n)=>{Pv(t,e)})}async function xL(t,e){f1(t),Lv(t)?(t.q_.M_(e),Dv(t)):t.q_.set("Unknown")}async function _L(t,e,n){if(t.q_.set("Online"),e instanceof SF&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const o of s.targetIds)A.N_.has(o)&&(await A.remoteSyncer.rejectListen(o,i),A.N_.delete(o),A.Q_.removeTarget(o))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tf(t,r)}else if(e instanceof sh?t.Q_.Ke(e):e instanceof QF?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ie.min()))try{const r=await s1(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Q_.rt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const d=s.N_.get(a);if(!d)return;s.N_.set(a,d.withResumeToken(St.EMPTY_BYTE_STRING,d.snapshotVersion)),h1(s,a);const h=new gA(d.target,a,l,d.sequenceNumber);Pv(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await tf(t,r)}}async function tf(t,e,n){if(!Gs(e))throw e;t.L_.add(1),await Oa(t),t.q_.set("Offline"),n||(n=()=>s1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pu(t)})}function g1(t,e){return e().catch(n=>tf(t,n,e))}async function Ma(t){const e=le(t),n=Ns(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CL(e);)try{const A=await aL(e.localStore,r);if(A===null){e.O_.length===0&&n.o_();break}r=A.batchId,IL(e,A)}catch(A){await tf(e,A)}p1(e)&&m1(e)}function CL(t){return Ws(t)&&t.O_.length<10}function IL(t,e){t.O_.push(e);const n=Ns(t);n.r_()&&n.V_&&n.m_(e.mutations)}function p1(t){return Ws(t)&&!Ns(t).n_()&&t.O_.length>0}function m1(t){Ns(t).start()}async function EL(t){Ns(t).p_()}async function bL(t){const e=Ns(t);for(const n of t.O_)e.m_(n.mutations)}async function TL(t,e,n){const r=t.O_.shift(),A=_v.from(r,e,n);await g1(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await Ma(t)}async function FL(t,e){e&&Ns(t).V_&&await async function(r,A){if(function(i){return TF(i)&&i!==j.ABORTED}(A.code)){const s=r.O_.shift();Ns(r).s_(),await g1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,A)),await Ma(r)}}(t,e),p1(t)&&m1(t)}async function nC(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.L_.add(3),await Oa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pu(n)}async function _0(t,e){const n=le(t);e?(n.L_.delete(2),await pu(n)):e||(n.L_.add(2),await Oa(n),n.q_.set("Unknown"))}function Va(t){return t.K_||(t.K_=function(n,r,A){const s=le(n);return s.w_(),new gL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:yL.bind(null,t),Ro:BL.bind(null,t),mo:xL.bind(null,t),d_:_L.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Lv(t)?Dv(t):t.q_.set("Unknown")):(await t.K_.stop(),f1(t))})),t.K_}function Ns(t){return t.U_||(t.U_=function(n,r,A){const s=le(n);return s.w_(),new pL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:EL.bind(null,t),mo:FL.bind(null,t),f_:bL.bind(null,t),g_:TL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ma(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,A,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=A,this.removalCallback=s,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,A,s){const i=Date.now()+r,o=new Ov(e,n,i,A,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ha(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),Gs(t))return new X(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=Ul(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new Xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.W_=new at(oe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class xa{constructor(e,n,r,A,s,i,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,A,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new xa(e,n,Xo.emptySet(n),i,r,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let A=0;A<n.length;A++)if(n[A].type!==r[A].type||!n[A].doc.isEqual(r[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QL{constructor(){this.queries=AC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const A=le(n),s=A.queries;A.queries=AC(),s.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new X(j.ABORTED,"Firestore shutting down"))}}function AC(){return new zs(t=>fF(t),cu)}async function Mv(t,e){const n=le(t);let r=3;const A=e.query;let s=n.queries.get(A);s?!s.H_()&&e.J_()&&(r=2):(s=new UL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(A,!0);break;case 1:s.z_=await n.onListen(A,!1);break;case 2:await n.onFirstRemoteStoreListen(A)}}catch(i){const o=Ha(i,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(o)}n.queries.set(A,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Hv(n)}async function Vv(t,e){const n=le(t),r=e.query;let A=3;const s=n.queries.get(r);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SL(t,e){const n=le(t);let r=!1;for(const A of e){const s=A.query,i=n.queries.get(s);if(i){for(const o of i.j_)o.X_(A)&&(r=!0);i.z_=A}}r&&Hv(n)}function kL(t,e,n){const r=le(t),A=r.queries.get(e);if(A)for(const s of A.j_)s.onError(n);r.queries.delete(e)}function Hv(t){t.Y_.forEach(e=>{e.next()})}var C0,sC;(sC=C0||(C0={})).ea="default",sC.Cache="cache";class jv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const A of e.docChanges)A.type!==3&&r.push(A);e=new xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==C0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.serializer=e}Es(e){return Yr(this.serializer,e)}ds(e){return e.metadata.exists?LF(this.serializer,e.document,!1):dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Mt(e)}}class NL{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=w1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new iC(this.serializer);for(const A of e)if(A.metadata.queries){const s=r.Es(A.metadata.name);for(const i of A.metadata.queries){const o=(n.get(i)||Re()).add(s);n.set(i,o)}}return n}async complete(){const e=await lL(this.localStore,new iC(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await cL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function w1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.key=e}}class y1{constructor(e){this.key=e}}class B1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=pF(e),this.Ra=new Xo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new rC,A=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,i=A,o=!1;const a=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,l=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),w=uu(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),y=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let I=!1;f&&w?f.data.isEqual(w.data)?m!==y&&(r.track({type:3,doc:w}),I=!0):this.ga(f,w)||(r.track({type:2,doc:w}),I=!0,(a&&this.Aa(w,a)>0||l&&this.Aa(w,l)<0)&&(o=!0)):!f&&w?(r.track({type:0,doc:w}),I=!0):f&&!w&&(r.track({type:1,doc:f}),I=!0,(a||l)&&(o=!0)),I&&(w?(i=i.add(w),s=y?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,m){const y=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return y(w)-y(m)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),A=A!=null&&A;const o=n&&!A?this.ya():[],a=this.da.size===0&&this.current&&!A?1:0,l=a!==this.Ea;return this.Ea=a,i.length!==0||l?{snapshot:new xa(this.query,e.Ra,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new y1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new v1(r))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class PL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DL{constructor(e){this.key=e,this.va=!1}}class LL{constructor(e,n,r,A,s,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new zs(o=>fF(o),cu),this.Ma=new Map,this.xa=new Set,this.Oa=new at(oe.comparator),this.Na=new Map,this.La=new Uv,this.Ba={},this.ka=new Map,this.qa=ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function OL(t,e,n=!0){const r=Jf(t);let A;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await x1(r,e,n,!0),A}async function ML(t,e){const n=Jf(t);await x1(n,e,!0,!1)}async function x1(t,e,n,r){const A=await va(t.localStore,Pn(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Kv(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&n&&qf(t.remoteStore,A),o}async function Kv(t,e,n,r,A){t.Ka=(h,f,w)=>async function(y,I,B,v){let _=I.view.ma(B);_.ns&&(_=await Yh(y.localStore,I.query,!1).then(({documents:C})=>I.view.ma(C,_)));const k=v&&v.targetChanges.get(I.targetId),U=v&&v.targetMismatches.get(I.targetId)!=null,N=I.view.applyChanges(_,y.isPrimaryClient,k,U);return I0(y,I.targetId,N.wa),N.snapshot}(t,h,f,w);const s=await Yh(t.localStore,e,!0),i=new B1(e,s.Ts),o=i.ma(s.documents),a=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",A),l=i.applyChanges(o,t.isPrimaryClient,a);I0(t,n,l.wa);const d=new PL(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot}async function VL(t,e,n){const r=le(t),A=r.Fa.get(e),s=r.Ma.get(A.targetId);if(s.length>1)return r.Ma.set(A.targetId,s.filter(i=>!cu(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(A.targetId),r.sharedClientState.isActiveQueryTarget(A.targetId)||await ya(r.localStore,A.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(A.targetId),n&&Ba(r.remoteStore,A.targetId),_a(r,A.targetId)}).catch(Ks)):(_a(r,A.targetId),await ya(r.localStore,A.targetId,!0))}async function HL(t,e){const n=le(t),r=n.Fa.get(e),A=n.Ma.get(r.targetId);n.isPrimaryClient&&A.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ba(n.remoteStore,r.targetId))}async function jL(t,e,n){const r=$v(t);try{const A=await function(i,o){const a=le(i),l=yt.now(),d=o.reduce((w,m)=>w.add(m.key),Re());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",w=>{let m=Wn(),y=Re();return a.cs.getEntries(w,d).next(I=>{m=I,m.forEach((B,v)=>{v.isValidDocument()||(y=y.add(B))})}).next(()=>a.localDocuments.getOverlayedDocuments(w,m)).next(I=>{h=I;const B=[];for(const v of o){const _=h4(v,h.get(v.key).overlayedDocument);_!=null&&B.push(new PA(v.key,_,sF(_.value.mapValue),vt.exists(!0)))}return a.mutationQueue.addMutationBatch(w,l,B,o)}).next(I=>{f=I;const B=I.applyToLocalDocumentSet(h,y);return a.documentOverlayCache.saveOverlays(w,I.batchId,B)})}).then(()=>({batchId:f.batchId,changes:wF(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(A.batchId),function(i,o,a){let l=i.Ba[i.currentUser.toKey()];l||(l=new at(Se)),l=l.insert(o,a),i.Ba[i.currentUser.toKey()]=l}(r,A.batchId,n),await DA(r,A.changes),await Ma(r.remoteStore)}catch(A){const s=Ha(A,"Failed to persist write");n.reject(s)}}async function _1(t,e){const n=le(t);try{const r=await oL(n.localStore,e);e.targetChanges.forEach((A,s)=>{const i=n.Na.get(s);i&&(ye(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?ye(i.va):A.removedDocuments.size>0&&(ye(i.va),i.va=!1))}),await DA(n,r,e)}catch(r){await Ks(r)}}function oC(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const A=[];r.Fa.forEach((s,i)=>{const o=i.view.Z_(e);o.snapshot&&A.push(o.snapshot)}),function(i,o){const a=le(i);a.onlineState=o;let l=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(l=!0)}),l&&Hv(a)}(r.eventManager,e),A.length&&r.Ca.d_(A),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KL(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const A=r.Na.get(e),s=A&&A.key;if(s){let i=new at(oe.comparator);i=i.insert(s,dt.newNoDocument(s,Ie.min()));const o=Re().add(s),a=new hu(Ie.min(),new Map,new at(Se),i,o);await _1(r,a),r.Oa=r.Oa.remove(s),r.Na.delete(e),Wv(r)}else await ya(r.localStore,e,!1).then(()=>_a(r,e,n)).catch(Ks)}async function GL(t,e){const n=le(t),r=e.batch.batchId;try{const A=await iL(n.localStore,e);zv(n,r,null),Gv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await DA(n,A)}catch(A){await Ks(A)}}async function zL(t,e,n){const r=le(t);try{const A=await function(i,o){const a=le(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(ye(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>a.localDocuments.getDocuments(l,d))})}(r.localStore,e);zv(r,e,n),Gv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await DA(r,A)}catch(A){await Ks(A)}}async function WL(t,e){const n=le(t);Ws(n.remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=le(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const A=n.ka.get(r)||[];A.push(e),n.ka.set(r,A)}catch(r){const A=Ha(r,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function Gv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function zv(t,e,n){const r=le(t);let A=r.Ba[r.currentUser.toKey()];if(A){const s=A.get(e);s&&(n?s.reject(n):s.resolve(),A=A.remove(e)),r.Ba[r.currentUser.toKey()]=A}}function _a(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||C1(t,r)})}function C1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ba(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Wv(t))}function I0(t,e,n){for(const r of n)r instanceof v1?(t.La.addReference(r.key,e),$L(t,r)):r instanceof y1?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||C1(t,r.key)):pe()}function $L(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),Wv(t))}function Wv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Ve.fromString(e)),r=t.qa.next();t.Na.set(r,new DL(n)),t.Oa=t.Oa.insert(n,r),qf(t.remoteStore,new gA(Pn(Pa(n.path)),r,"TargetPurposeLimboResolution",Gn.oe))}}async function DA(t,e,n){const r=le(t),A=[],s=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){const h=l?!l.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(l){A.push(l);const h=kv.Wi(a.targetId,l);s.push(h)}}))}),await Promise.all(i),r.Ca.d_(A),await async function(a,l){const d=le(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(l,f=>M.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>M.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!Gs(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),m=w.snapshotVersion,y=w.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(f,y)}}}(r.localStore,s))}async function qL(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await A1(n.localStore,e);n.currentUser=e,function(s,i){s.ka.forEach(o=>{o.forEach(a=>{a.reject(new X(j.CANCELLED,i))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await DA(n,r.hs)}}function JL(t,e){const n=le(t),r=n.Na.get(e);if(r&&r.va)return Re().add(r.key);{let A=Re();const s=n.Ma.get(e);if(!s)return A;for(const i of s){const o=n.Fa.get(i);A=A.unionWith(o.view.Va)}return A}}async function XL(t,e){const n=le(t),r=await Yh(n.localStore,e.query,!0),A=e.view.ba(r);return n.isPrimaryClient&&I0(n,e.targetId,A.wa),A}async function YL(t,e){const n=le(t);return a1(n.localStore,e).then(r=>DA(n,r))}async function ZL(t,e,n,r){const A=le(t),s=await function(o,a){const l=le(o),d=le(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?l.localDocuments.getDocuments(h,f):M.resolve(null)))}(A.localStore,e);s!==null?(n==="pending"?await Ma(A.remoteStore):n==="acknowledged"||n==="rejected"?(zv(A,e,r||null),Gv(A,e),function(o,a){le(le(o).mutationQueue).On(a)}(A.localStore,e)):pe(),await DA(A,s)):Y("SyncEngine","Cannot apply mutation batch with id: "+e)}async function eO(t,e){const n=le(t);if(Jf(n),$v(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),A=await aC(n,r.toArray());n.Qa=!0,await _0(n.remoteStore,!0);for(const s of A)qf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let A=Promise.resolve();n.Ma.forEach((s,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):A=A.then(()=>(_a(n,i),ya(n.localStore,i,!0))),Ba(n.remoteStore,i)}),await A,await aC(n,r),function(i){const o=le(i);o.Na.forEach((a,l)=>{Ba(o.remoteStore,l)}),o.La.pr(),o.Na=new Map,o.Oa=new at(oe.comparator)}(n),n.Qa=!1,await _0(n.remoteStore,!1)}}async function aC(t,e,n){const r=le(t),A=[],s=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await va(r.localStore,Pn(a[0]));for(const l of a){const d=r.Fa.get(l),h=await XL(r,d);h.snapshot&&s.push(h.snapshot)}}else{const l=await o1(r.localStore,i);o=await va(r.localStore,l),await Kv(r,I1(l),i,!1,o.resumeToken)}A.push(o)}return r.Ca.d_(s),A}function I1(t){return hF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tO(t){return function(n){return le(le(n).persistence).Qi()}(le(t).localStore)}async function nO(t,e,n,r){const A=le(t);if(A.Qa)return void Y("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const i=await a1(A.localStore,gF(s[0])),o=hu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",St.EMPTY_BYTE_STRING);await DA(A,i,o);break}case"rejected":await ya(A.localStore,e,!0),_a(A,e,r);break;default:pe()}}async function rO(t,e,n){const r=Jf(t);if(r.Qa){for(const A of e){if(r.Ma.has(A)&&r.sharedClientState.isActiveQueryTarget(A)){Y("SyncEngine","Adding an already active target "+A);continue}const s=await o1(r.localStore,A),i=await va(r.localStore,s);await Kv(r,I1(s),i.targetId,!1,i.resumeToken),qf(r.remoteStore,i)}for(const A of n)r.Ma.has(A)&&await ya(r.localStore,A,!1).then(()=>{Ba(r.remoteStore,A),_a(r,A)}).catch(Ks)}}function Jf(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KL.bind(null,e),e.Ca.d_=SL.bind(null,e.eventManager),e.Ca.$a=kL.bind(null,e.eventManager),e}function $v(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zL.bind(null,e),e}function AO(t,e,n){const r=le(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(w,m){const y=le(w),I=Mt(m.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",B=>y.Gr.getBundleMetadata(B,m.id)).then(B=>!!B&&B.createTime.compareTo(I)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(w1(a));const l=new NL(a,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await l.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await l.complete();return await DA(s,h.Ia,void 0),await function(w,m){const y=le(w);return y.persistence.runTransaction("Save bundle","readwrite",I=>y.Gr.saveBundleMetadata(I,m))}(s.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return eA("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(A=>{r.sharedClientState.notifyBundleLoaded(A)})}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return r1(this.persistence,new n1,e.initialUser,this.serializer)}Ga(e){return new t1($f.Zr,this.serializer)}Wa(e){return new c1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class E1 extends Kc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await $v(this.Ja.syncEngine),await Ma(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return r1(this.persistence,new n1,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new H4(r,e.asyncQueue,n)}Ha(e,n){const r=new _D(n,this.persistence);return new xD(e.asyncQueue,r)}Ga(e){const n=Sv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new Qv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,u1(),ih(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new c1}}class sO extends E1{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Ip&&(this.sharedClientState.syncEngine={no:ZL.bind(null,n),ro:nO.bind(null,n),io:rO.bind(null,n),Qi:tO.bind(null,n),eo:YL.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await eO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=u1();if(!Ip.D(n))throw new X(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Sv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ip(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qL.bind(null,this.syncEngine),await _0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QL}()}createDatastore(e){const n=gu(e.databaseInfo.databaseId),r=function(s){return new fL(s)}(e.databaseInfo);return function(s,i,o,a){return new mL(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,A,s,i,o){return new vL(r,A,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>oC(this.syncEngine,n,0),function(){return tC.D()?new tC:new uL}())}createSyncEngine(e,n){return function(A,s,i,o,a,l,d){const h=new LL(A,s,i,o,a,l);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(A){const s=le(A);Y("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Oa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gc.provider={build:()=>new Gc};function lC(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new fn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const A=await this.iu(r);return new RL(JSON.parse(A),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new X(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(A,s){const i=le(A),o={documents:s.map(h=>Hc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Ve.emptyPath(),o,s.length),l=new Map;a.forEach(h=>{const f=x4(i.serializer,h);l.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=l.get(h.toString());ye(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new La(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const A=oe.fromPath(r);this.mutations.push(new Bv(A,this.precondition(A)))}),await async function(r,A){const s=le(r),i={writes:A.map(o=>jc(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,Ve.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pe();n=Ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ie.min())?vt.exists(!1):vt.updateTime(n):vt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ie.min()))throw new X(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(n)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,A,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=A,this.deferred=s,this._u=r.maxAttempts,this.t_=new Nv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new oO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(A=>{this.lu(A)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!au(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!TF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n,r,A,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=A,this.user=nn.UNAUTHENTICATED,this.clientId=jT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{Y("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Y("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ha(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bp(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async A=>{r.isEqual(A)||(await A1(e.localStore,A),r=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qv(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,A)=>nC(e.remoteStore,A)),t._onlineComponents=e}async function qv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(A){return A.name==="FirebaseError"?A.code===j.FAILED_PRECONDITION||A.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(n))throw n;eA("Error using user provided cache. Falling back to memory cache: "+n),await bp(t,new Kc)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await bp(t,new Kc);return t._offlineComponents}async function Yf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await cC(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await cC(t,new Gc))),t._onlineComponents}function b1(t){return qv(t).then(e=>e.persistence)}function Jv(t){return qv(t).then(e=>e.localStore)}function T1(t){return Yf(t).then(e=>e.remoteStore)}function Xv(t){return Yf(t).then(e=>e.syncEngine)}function cO(t){return Yf(t).then(e=>e.datastore)}async function Ca(t){const e=await Yf(t),n=e.eventManager;return n.onListen=OL.bind(null,e.syncEngine),n.onUnlisten=VL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ML.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HL.bind(null,e.syncEngine),n}function uO(t){return t.asyncQueue.enqueue(async()=>{const e=await b1(t),n=await T1(t);return e.setNetworkEnabled(!0),function(A){const s=le(A);return s.L_.delete(0),pu(s)}(n)})}function dO(t){return t.asyncQueue.enqueue(async()=>{const e=await b1(t),n=await T1(t);return e.setNetworkEnabled(!1),async function(A){const s=le(A);s.L_.add(0),await Oa(s),s.q_.set("Offline")}(n)})}function hO(t,e){const n=new fn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await function(l,d){const h=le(l);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new X(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ha(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await Jv(t),e,n)),n.promise}function F1(t,e,n={}){const r=new fn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const d=new Xf({next:f=>{d.Za(),i.enqueueAndForget(()=>Vv(s,h));const w=f.docs.has(o);!w&&f.fromCache?l.reject(new X(j.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&a&&a.source==="server"?l.reject(new X(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new jv(Pa(o.path),d,{includeMetadataChanges:!0,_a:!0});return Mv(s,h)}(await Ca(t),t.asyncQueue,e,n,r)),r.promise}function fO(t,e){const n=new fn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await Yh(A,s,!0),a=new B1(s,o.Ts),l=a.ma(o.documents),d=a.applyChanges(l,!1);i.resolve(d.snapshot)}catch(o){const a=Ha(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await Jv(t),e,n)),n.promise}function U1(t,e,n={}){const r=new fn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const d=new Xf({next:f=>{d.Za(),i.enqueueAndForget(()=>Vv(s,h)),f.fromCache&&a.source==="server"?l.reject(new X(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new jv(o,d,{includeMetadataChanges:!0,_a:!0});return Mv(s,h)}(await Ca(t),t.asyncQueue,e,n,r)),r.promise}function gO(t,e){const n=new Xf(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){le(A).Y_.add(s),s.next()}(await Ca(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){le(A).Y_.delete(s)}(await Ca(t),n))}}function pO(t,e,n,r){const A=function(i,o){let a;return a=typeof i=="string"?UF().encode(i):i,function(d,h){return new iO(d,h)}(function(d,h){if(d instanceof Uint8Array)return lC(d,h);if(d instanceof ArrayBuffer)return lC(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,gu(e));t.asyncQueue.enqueueAndForget(async()=>{AO(await Xv(t),A,r)})}function mO(t,e){return t.asyncQueue.enqueue(async()=>function(r,A){const s=le(r);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await Jv(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t,e,n){if(!n)throw new X(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S1(t,e,n,r){if(e===!0&&r===!0)throw new X(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dC(t){if(!oe.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hC(t){if(oe.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zf(t);throw new X(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function k1(t,e){if(e<=0)throw new X(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,A){return r.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mu{constructor(e,n,r,A){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uD;switch(r.type){case"firstParty":return new gD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uC.get(n);r&&(Y("ComponentProvider","Removing Datastore"),uC.delete(n),r.terminate())}(this),Promise.resolve()}}function wO(t,e,n,r={}){var A;const s=(t=ze(t,mu))._getSettings(),i=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&eA("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=nn.MOCK_USER;else{o=MN(r.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new X(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new nn(l)}t._authCredentials=new dD(new HT(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dn=class R1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new R1(this.firestore,e,this._query)}},It=class N1{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new N1(this.firestore,e,this._key)}},Bs=class P1 extends Dn{constructor(e,n,r){super(e,n,Pa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new oe(e))}withConverter(e){return new P1(this.firestore,e,this._path)}};function D1(t,e,...n){if(t=Ue(t),Yv("collection","path",e),t instanceof mu){const r=Ve.fromString(e,...n);return hC(r),new Bs(t,null,r)}{if(!(t instanceof It||t instanceof Bs))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return hC(r),new Bs(t.firestore,null,r)}}function vO(t,e){if(t=ze(t,mu),Yv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dn(t,null,function(r){return new NA(Ve.emptyPath(),r)}(e))}function Qr(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=jT.newId()),Yv("doc","path",e),t instanceof mu){const r=Ve.fromString(e,...n);return dC(r),new It(t,null,new oe(r))}{if(!(t instanceof It||t instanceof Bs))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return dC(r),new It(t.firestore,t instanceof Bs?t.converter:null,new oe(r))}}function L1(t,e){return t=Ue(t),e=Ue(e),(t instanceof It||t instanceof Bs)&&(e instanceof It||e instanceof Bs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function O1(t,e){return t=Ue(t),e=Ue(e),t instanceof Dn&&e instanceof Dn&&t.firestore===e.firestore&&cu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Nv(this,"async_queue_retry"),this.Vu=()=>{const r=ih();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ih();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ih();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gs(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const A=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Ot("INTERNAL UNHANDLED ERROR: ",A),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const A=Ov.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function E0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const A=n;for(const s of r)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class yO{constructor(){this._progressObserver={},this._taskCompletionResolver=new fn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=-1;let Vt=class extends mu{constructor(e,n,r,A){super(e,n,r,A),this.type="firestore",this._queue=new gC,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gC(e),this._firestoreClient=void 0,await e}}};function En(t){if(t._terminated)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||M1(t),t._firestoreClient}function M1(t){var e,n,r;const A=t._freezeSettings(),s=function(o,a,l,d){return new GD(o,a,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Q1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((n=A.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=A.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new lO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function xO(t,e){eA("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return V1(t,Gc.provider,{build:r=>new E1(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function _O(t){eA("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();V1(t,Gc.provider,{build:n=>new sO(n,e.cacheSizeBytes)})}function V1(t,e,n){if((t=ze(t,Vt))._firestoreClient||t._terminated)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new X(j.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},M1(t)}function CO(t){if(t._initialized&&!t._terminated)throw new X(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Xr.D())return Promise.resolve();const A=r+"main";await Xr.delete(A)}(Sv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function IO(t){return function(n){const r=new fn;return n.asyncQueue.enqueueAndForget(async()=>WL(await Xv(n),r)),r.promise}(En(t=ze(t,Vt)))}function EO(t){return uO(En(t=ze(t,Vt)))}function bO(t){return dO(En(t=ze(t,Vt)))}function TO(t,e){const n=En(t=ze(t,Vt)),r=new yO;return pO(n,t._databaseId,e,r),r}function FO(t,e){return mO(En(t=ze(t,Vt)),e).then(n=>n?new Dn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nA(St.fromBase64String(e))}catch(n){throw new X(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nA(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ps=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,A){if(r.length!==A.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=/^__.*__$/;class QO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new PA(e,this.data,this.fieldMask,n,this.fieldTransforms):new Da(e,this.data,n,this.fieldTransforms)}}class H1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new PA(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function j1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class tg{constructor(e,n,r,A,s,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.Ou(e),A}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(j1(this.Cu)&&UO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gu(e)}Qu(e,n,r,A=!1){return new tg({Cu:e,methodName:n,qu:r,path:wt.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function to(t){const e=t._freezeSettings(),n=gu(t._databaseId);return new SO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ng(t,e,n,r,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,n,A);iy("Data must be an object, but it was:",i,r);const o=z1(r,i);let a,l;if(s.merge)a=new zn(i.fieldMask),l=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=b0(e,h,n);if(!i.contains(f))throw new X(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);$1(d,f)||d.push(f)}a=new zn(d),l=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,l=i.fieldTransforms;return new QO(new un(o),a,l)}class wu extends eo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wu}}function K1(t,e,n){return new tg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ey extends eo{_toFieldTransform(e){return new du(e.path,new pa)}isEqual(e){return e instanceof ey}}class ty extends eo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=K1(this,e,!0),r=this.Ku.map(s=>no(s,n)),A=new Oi(r);return new du(e.path,A)}isEqual(e){return e instanceof ty&&Sc(this.Ku,e.Ku)}}class ny extends eo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=K1(this,e,!0),r=this.Ku.map(s=>no(s,n)),A=new Mi(r);return new du(e.path,A)}isEqual(e){return e instanceof ny&&Sc(this.Ku,e.Ku)}}class ry extends eo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ma(e.serializer,BF(e.serializer,this.$u));return new du(e.path,n)}isEqual(e){return e instanceof ry&&this.$u===e.$u}}function Ay(t,e,n,r){const A=t.Qu(1,e,n);iy("Data must be an object, but it was:",A,r);const s=[],i=un.empty();Zi(r,(a,l)=>{const d=oy(e,a,n);l=Ue(l);const h=A.Nu(d);if(l instanceof wu)s.push(d);else{const f=no(l,h);f!=null&&(s.push(d),i.set(d,f))}});const o=new zn(s);return new H1(i,o,A.fieldTransforms)}function sy(t,e,n,r,A,s){const i=t.Qu(1,e,n),o=[b0(e,r,n)],a=[A];if(s.length%2!=0)throw new X(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(b0(e,s[f])),a.push(s[f+1]);const l=[],d=un.empty();for(let f=o.length-1;f>=0;--f)if(!$1(l,o[f])){const w=o[f];let m=a[f];m=Ue(m);const y=i.Nu(w);if(m instanceof wu)l.push(w);else{const I=no(m,y);I!=null&&(l.push(w),d.set(w,I))}}const h=new zn(l);return new H1(d,h,i.fieldTransforms)}function G1(t,e,n,r=!1){return no(n,t.Qu(r?4:3,e))}function no(t,e){if(W1(t=Ue(t)))return iy("Unsupported field value:",e,t),z1(t,e);if(t instanceof eo)return function(r,A){if(!j1(A.Cu))throw A.Bu(`${r._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,A){const s=[];let i=0;for(const o of r){let a=no(o,A.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,A){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BF(A.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=yt.fromDate(r);return{timestampValue:wa(A.serializer,s)}}if(r instanceof yt){const s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wa(A.serializer,s)}}if(r instanceof eg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nA)return{bytesValue:kF(A.serializer,r._byteString)};if(r instanceof It){const s=A.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ev(r.firestore._databaseId||A.databaseId,r._key.path)}}if(r instanceof Zv)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return yv(o.serializer,a)})}}}}}}(r,A);throw A.Bu(`Unsupported field value: ${Zf(r)}`)}(t,e)}function z1(t,e){const n={};return tF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,A)=>{const s=no(A,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function W1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof eg||t instanceof nA||t instanceof It||t instanceof eo||t instanceof Zv)}function iy(t,e,n){if(!W1(n)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(n)){const r=Zf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function b0(t,e,n){if((e=Ue(e))instanceof Ps)return e._internalPath;if(typeof e=="string")return oy(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const kO=new RegExp("[~\\*/\\[\\]]");function oy(t,e,n){if(e.search(kO)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ps(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,A){const s=r&&!r.isEmpty(),i=A!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${A}`),a+=")"),new X(j.INVALID_ARGUMENT,o+t+a)}function $1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r,A,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RO extends zc{data(){return super.data()}}function rg(t,e){return typeof e=="string"?oy(t,e):e instanceof Ps?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ay{}class vu extends ay{}function zA(t,e,...n){let r=[];e instanceof ay&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof ly).length,o=s.filter(a=>a instanceof Ag).length;if(i>1||i>0&&o>0)throw new X(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const A of r)t=A._apply(t);return t}class Ag extends vu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ag(e,n,r)}_apply(e){const n=this._parse(e);return X1(e._query,n),new Dn(e.firestore,e.converter,f0(e._query,n))}_parse(e){const n=to(e.firestore);return function(s,i,o,a,l,d,h){let f;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){mC(h,d);const w=[];for(const m of h)w.push(pC(a,s,m));f={arrayValue:{values:w}}}else f=pC(a,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||mC(h,d),f=G1(o,i,h,d==="in"||d==="not-in");return He.create(l,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function NO(t,e,n){const r=e,A=rg("where",t);return Ag._create(A,r,n)}class ly extends ay{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ly(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ye.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(A,s){let i=A;const o=s.getFlattenedFilters();for(const a of o)X1(i,a),i=f0(i,a)}(e._query,n),new Dn(e.firestore,e.converter,f0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cy extends vu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cy(e,n)}_apply(e){const n=function(A,s,i){if(A.startAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(s,i)}(e._query,this._field,this._direction);return new Dn(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new NA(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,n))}}function PO(t,e="asc"){const n=e,r=rg("orderBy",t);return cy._create(r,n)}class sg extends vu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sg(e,n,r)}_apply(e){return new Dn(e.firestore,e.converter,$h(e._query,this._limit,this._limitType))}}function DO(t){return k1("limit",t),sg._create("limit",t,"F")}function LO(t){return k1("limitToLast",t),sg._create("limitToLast",t,"L")}class ig extends vu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ig(e,n,r)}_apply(e){const n=J1(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(A,s){return new NA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,n))}}function OO(...t){return ig._create("startAt",t,!0)}function MO(...t){return ig._create("startAfter",t,!1)}class og extends vu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new og(e,n,r)}_apply(e){const n=J1(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(A,s){return new NA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,n))}}function VO(...t){return og._create("endBefore",t,!1)}function HO(...t){return og._create("endAt",t,!0)}function J1(t,e,n,r){if(n[0]=Ue(n[0]),n[0]instanceof zc)return function(s,i,o,a,l){if(!a)throw new X(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of Jo(s))if(h.field.isKeyField())d.push(Di(i,a.key));else{const f=a.data.field(h.field);if(Hf(f))throw new X(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new X(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new Rs(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const A=to(t.firestore);return function(i,o,a,l,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new X(j.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let m=0;m<d.length;m++){const y=d[m];if(f[m].field.isKeyField()){if(typeof y!="string")throw new X(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof y}`);if(!wv(i)&&y.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${y}' contains a slash.`);const I=i.path.child(Ve.fromString(y));if(!oe.isDocumentKey(I))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const B=new oe(I);w.push(Di(o,B))}else{const I=G1(a,l,y);w.push(I)}}return new Rs(w,h)}(t._query,t.firestore._databaseId,A,e,n,r)}}function pC(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new X(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wv(e)&&n.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!oe.isDocumentKey(r))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Di(t,new oe(r))}if(n instanceof It)return Di(t,n._key);throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zf(n)}.`)}function mC(t,e){if(!Array.isArray(t)||t.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function X1(t,e){const n=function(A,s){for(const i of A)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uy{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zi(e,(A,s)=>{r[A]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,A;const s=(A=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.map(i=>pt(i.doubleValue));return new Zv(s)}convertGeoPoint(e){return new eg(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const n=TA(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);ye(KF(r));const A=new Ss(r.get(1),r.get(3)),s=new oe(r.popFirst(5));return A.isEqual(n)||Ot(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class jO extends uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new nA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let FA=class extends zc{constructor(e,n,r,A,s,i){super(e,n,r,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},nc=class extends FA{data(e={}){return super.data(e)}},Ds=class{constructor(e,n,r,A){this._firestore=e,this._userDataWriter=n,this._snapshot=A,this.metadata=new vi(A.hasPendingWrites,A.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nc(this._firestore,this._userDataWriter,r.key,r,new vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(o=>{const a=new nc(A._firestore,A._userDataWriter,o.doc.key,o.doc,new vi(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new nc(A._firestore,A._userDataWriter,o.doc.key,o.doc,new vi(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);let l=-1,d=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:KO(o.type),doc:a,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function KO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}function Y1(t,e){return t instanceof FA&&e instanceof FA?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ds&&e instanceof Ds&&t._firestore===e._firestore&&O1(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t){t=ze(t,It);const e=ze(t.firestore,Vt);return F1(En(e),t._key).then(n=>hy(e,t,n))}class ro extends uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new nA(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function GO(t){t=ze(t,It);const e=ze(t.firestore,Vt),n=En(e),r=new ro(e);return hO(n,t._key).then(A=>new FA(e,r,t._key,A,new vi(A!==null&&A.hasLocalMutations,!0),t.converter))}function zO(t){t=ze(t,It);const e=ze(t.firestore,Vt);return F1(En(e),t._key,{source:"server"}).then(n=>hy(e,t,n))}function WO(t){t=ze(t,Dn);const e=ze(t.firestore,Vt),n=En(e),r=new ro(e);return q1(t._query),U1(n,t._query).then(A=>new Ds(e,r,t,A))}function $O(t){t=ze(t,Dn);const e=ze(t.firestore,Vt),n=En(e),r=new ro(e);return fO(n,t._query).then(A=>new Ds(e,r,t,A))}function qO(t){t=ze(t,Dn);const e=ze(t.firestore,Vt),n=En(e),r=new ro(e);return U1(n,t._query,{source:"server"}).then(A=>new Ds(e,r,t,A))}function rc(t,e,n){t=ze(t,It);const r=ze(t.firestore,Vt),A=ag(t.converter,e,n);return yu(r,[ng(to(r),"setDoc",t._key,A,t.converter!==null,n).toMutation(t._key,vt.none())])}function wC(t,e,n,...r){t=ze(t,It);const A=ze(t.firestore,Vt),s=to(A);let i;return i=typeof(e=Ue(e))=="string"||e instanceof Ps?sy(s,"updateDoc",t._key,e,n,r):Ay(s,"updateDoc",t._key,e),yu(A,[i.toMutation(t._key,vt.exists(!0))])}function Z1(t){return yu(ze(t.firestore,Vt),[new La(t._key,vt.none())])}function JO(t,e){const n=ze(t.firestore,Vt),r=Qr(t),A=ag(t.converter,e);return yu(n,[ng(to(t.firestore),"addDoc",r._key,A,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function dy(t,...e){var n,r,A;t=Ue(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||E0(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(E0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let a,l,d;if(t instanceof It)l=ze(t.firestore,Vt),d=Pa(t._key.path),a={next:h=>{e[i]&&e[i](hy(l,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ze(t,Dn);l=ze(h.firestore,Vt),d=h._query;const f=new ro(l);a={next:w=>{e[i]&&e[i](new Ds(l,f,h,w))},error:e[i+1],complete:e[i+2]},q1(t._query)}return function(f,w,m,y){const I=new Xf(y),B=new jv(w,I,m);return f.asyncQueue.enqueueAndForget(async()=>Mv(await Ca(f),B)),()=>{I.Za(),f.asyncQueue.enqueueAndForget(async()=>Vv(await Ca(f),B))}}(En(l),d,o,a)}function XO(t,e){return gO(En(t=ze(t,Vt)),E0(e)?e:{next:e})}function yu(t,e){return function(r,A){const s=new fn;return r.asyncQueue.enqueueAndForget(async()=>jL(await Xv(r),A,s)),s.promise}(En(t),e)}function hy(t,e,n){const r=n.docs.get(e._key),A=new ro(t);return new FA(t,A,e._key,r,new vi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZO=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=to(e)}set(e,n,r){this._verifyNotCommitted();const A=ns(e,this._firestore),s=ag(A.converter,n,r),i=ng(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,r);return this._mutations.push(i.toMutation(A._key,vt.none())),this}update(e,n,r,...A){this._verifyNotCommitted();const s=ns(e,this._firestore);let i;return i=typeof(n=Ue(n))=="string"||n instanceof Ps?sy(this._dataReader,"WriteBatch.update",s._key,n,r,A):Ay(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(i.toMutation(s._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ns(e,this._firestore);return this._mutations=this._mutations.concat(new La(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ns(t,e){if((t=Ue(t)).firestore!==e)throw new X(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eM=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=to(n)}get(n){const r=ns(n,this._firestore),A=new jO(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return pe();const i=s[0];if(i.isFoundDocument())return new zc(this._firestore,A,i.key,i,r.converter);if(i.isNoDocument())return new zc(this._firestore,A,r._key,null,r.converter);throw pe()})}set(n,r,A){const s=ns(n,this._firestore),i=ag(s.converter,r,A),o=ng(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,o),this}update(n,r,A,...s){const i=ns(n,this._firestore);let o;return o=typeof(r=Ue(r))=="string"||r instanceof Ps?sy(this._dataReader,"Transaction.update",i._key,r,A,s):Ay(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=ns(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ns(e,this._firestore),r=new ro(this._firestore);return super.get(e).then(A=>new FA(this._firestore,r,n._key,A._document,new vi(!1,!1),n.converter))}};function tM(t,e,n){t=ze(t,Vt);const r=Object.assign(Object.assign({},YO),n);return function(s){if(s.maxAttempts<1)throw new X(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,o){const a=new fn;return s.asyncQueue.enqueueAndForget(async()=>{const l=await cO(s);new aO(s.asyncQueue,l,o,i,a).au()}),a.promise}(En(t),A=>e(new eM(t,A)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(){return new wu("deleteField")}function rM(){return new ey("serverTimestamp")}function AM(...t){return new ty("arrayUnion",t)}function sM(...t){return new ny("arrayRemove",t)}function iM(t){return new ry("increment",t)}(function(e,n=!0){(function(A){Na=A})(js),Fs(new Zr("firestore",(r,{instanceIdentifier:A,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new Vt(new hD(r.getProvider("auth-internal")),new mD(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new X(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ss(l.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Rr(a_,"4.7.3",e),Rr(a_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n){this._delegate=e,this.firebase=n,kc(e,new Zr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),uv(this._delegate)))}_getService(e,n=bs){var r;this._delegate.checkDestroyed();const A=this._delegate.container.getProvider(e);return!A.isInitialized()&&((r=A.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&A.initialize(),A.getImmediate({identifier:n})}_removeServiceInstance(e,n=bs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){kc(this._delegate,e)}_addOrOverwriteComponent(e){TT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},vC=new Yi("app-compat","Firebase",aM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){const e={},n={__esModule:!0,initializeApp:s,app:A,registerVersion:Rr,setLogLevel:kT,onLog:ST,apps:null,SDK_VERSION:js,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:aD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(l){delete e[l]}function A(l){if(l=l||bs,!Zx(e,l))throw vC.create("no-app",{appName:l});return e[l]}A.App=t;function s(l,d={}){const h=cv(l,d);if(Zx(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(l=>e[l])}function o(l){const d=l.name,h=d.replace("-compat","");if(Fs(l)&&l.type==="PUBLIC"){const f=(w=A())=>{if(typeof w[h]!="function")throw vC.create("invalid-app-argument",{appName:d});return w[h]()};l.serviceProps!==void 0&&jh(f,l.serviceProps),n[h]=f,t.prototype[h]=function(...w){return this._getService.bind(this,d).apply(this,l.multipleInstances?w:[])}}return l.type==="PUBLIC"?n[h]:null}function a(l,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){const t=lM(oM);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:eU,extendNamespace:e,createSubscribe:_T,ErrorFactory:Yi,deepExtend:jh});function e(n){jh(t,n)}return t}const cM=eU();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new Mf("@firebase/app-compat"),uM="@firebase/app-compat",dM="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){Rr(uM,dM,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=mT();if(t.firebase!==void 0){yC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&yC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const $s=cM;hM();var fM="firebase",gM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s.registerVersion(fM,gM,"app-compat");const pM="@firebase/firestore-compat",mM="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function xC(){if(!jD())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}let tU=class F0{constructor(e){this._delegate=e}static fromBase64String(e){return xC(),new F0(nA.fromBase64String(e))}static fromUint8Array(e){return BC(),new F0(nA.fromUint8Array(e))}toBase64(){return xC(),this._delegate.toBase64()}toUint8Array(){return BC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){return wM(t,["next","error","complete"])}function wM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{enableIndexedDbPersistence(e,n){return xO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return _O(e._delegate)}clearIndexedDbPersistence(e){return CO(e._delegate)}}class nU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ss||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&eA("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){wO(this._delegate,e,n,r)}enableNetwork(){return EO(this._delegate)}disableNetwork(){return bO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,S1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return IO(this._delegate)}onSnapshotsInSync(e){return XO(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ia(this,D1(this._delegate,e))}catch(n){throw Qn(n,"collection()","Firestore.collection()")}}doc(e){try{return new pr(this,Qr(this._delegate,e))}catch(n){throw Qn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Un(this,vO(this._delegate,e))}catch(n){throw Qn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return tM(this._delegate,n=>e(new rU(this,n)))}batch(){return En(this._delegate),new AU(new ZO(this._delegate,e=>yu(this._delegate,e)))}loadBundle(e){return TO(this._delegate,e)}namedQuery(e){return FO(this._delegate,e).then(n=>n?new Un(this,n):null)}}class lg extends uy{constructor(e){super(),this.firestore=e}convertBytes(e){return new tU(new nA(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return pr.forKey(n,this.firestore,null)}}function yM(t){lD(t)}class rU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}get(e){const n=yi(e);return this._delegate.get(n).then(r=>new Wc(this._firestore,new FA(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const A=yi(e);return r?(fy("Transaction.set",r),this._delegate.set(A,n,r)):this._delegate.set(A,n),this}update(e,n,r,...A){const s=yi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...A),this}delete(e){const n=yi(e);return this._delegate.delete(n),this}}class AU{constructor(e){this._delegate=e}set(e,n,r){const A=yi(e);return r?(fy("WriteBatch.set",r),this._delegate.set(A,n,r)):this._delegate.set(A,n),this}update(e,n,r,...A){const s=yi(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...A),this}delete(e){const n=yi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ki{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new nc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $c(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ki.INSTANCES;let A=r.get(e);A||(A=new WeakMap,r.set(e,A));let s=A.get(n);return s||(s=new Ki(e,new lg(e),n),A.set(n,s)),s}}Ki.INSTANCES=new WeakMap;class pr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pr(n,new It(n._delegate,r,new oe(e)))}static forKey(e,n,r){return new pr(n,new It(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ia(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ia(this.firestore,D1(this._delegate,e))}catch(n){throw Qn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ue(e),e instanceof It?L1(this._delegate,e):!1}set(e,n){n=fy("DocumentReference.set",n);try{return n?rc(this._delegate,e,n):rc(this._delegate,e)}catch(r){throw Qn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?wC(this._delegate,e):wC(this._delegate,e,n,...r)}catch(A){throw Qn(A,"updateDoc()","DocumentReference.update()")}}delete(){return Z1(this._delegate)}onSnapshot(...e){const n=sU(e),r=iU(e,A=>new Wc(this.firestore,new FA(this.firestore._delegate,this._userDataWriter,A._key,A._document,A.metadata,this._delegate.converter)));return dy(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=GO(this._delegate):(e==null?void 0:e.source)==="server"?n=zO(this._delegate):n=T0(this._delegate),n.then(r=>new Wc(this.firestore,new FA(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pr(this.firestore,e?this._delegate.withConverter(Ki.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qn(t,e,n){return t.message=t.message.replace(e,n),t}function sU(t){for(const e of t)if(typeof e=="object"&&!U0(e))return e;return{}}function iU(t,e){var n,r;let A;return U0(t[0])?A=t[0]:U0(t[1])?A=t[1]:typeof t[0]=="function"?A={next:t[0],error:t[1],complete:t[2]}:A={next:t[1],error:t[2],complete:t[3]},{next:s=>{A.next&&A.next(e(s))},error:(n=A.error)===null||n===void 0?void 0:n.bind(A),complete:(r=A.complete)===null||r===void 0?void 0:r.bind(A)}}class Wc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new pr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Y1(this._delegate,e._delegate)}}class $c extends Wc{data(e){const n=this._delegate.data(e);return this._delegate._converter||cD(n!==void 0),n}}class Un{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new lg(e)}where(e,n,r){try{return new Un(this.firestore,zA(this._delegate,NO(e,n,r)))}catch(A){throw Qn(A,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Un(this.firestore,zA(this._delegate,PO(e,n)))}catch(r){throw Qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Un(this.firestore,zA(this._delegate,DO(e)))}catch(n){throw Qn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Un(this.firestore,zA(this._delegate,LO(e)))}catch(n){throw Qn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Un(this.firestore,zA(this._delegate,OO(...e)))}catch(n){throw Qn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Un(this.firestore,zA(this._delegate,MO(...e)))}catch(n){throw Qn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Un(this.firestore,zA(this._delegate,VO(...e)))}catch(n){throw Qn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Un(this.firestore,zA(this._delegate,HO(...e)))}catch(n){throw Qn(n,"endAt()","Query.endAt()")}}isEqual(e){return O1(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=$O(this._delegate):(e==null?void 0:e.source)==="server"?n=qO(this._delegate):n=WO(this._delegate),n.then(r=>new Q0(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=sU(e),r=iU(e,A=>new Q0(this.firestore,new Ds(this.firestore._delegate,this._userDataWriter,this._delegate,A._snapshot)));return dy(this._delegate,n,r)}withConverter(e){return new Un(this.firestore,e?this._delegate.withConverter(Ki.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class BM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new $c(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Q0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Un(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $c(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new BM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new $c(this._firestore,r))})}isEqual(e){return Y1(this._delegate,e._delegate)}}class Ia extends Un{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pr(this.firestore,e):null}doc(e){try{return e===void 0?new pr(this.firestore,Qr(this._delegate)):new pr(this.firestore,Qr(this._delegate,e))}catch(n){throw Qn(n,"doc()","CollectionReference.doc()")}}add(e){return JO(this._delegate,e).then(n=>new pr(this.firestore,n))}isEqual(e){return L1(this._delegate,e._delegate)}withConverter(e){return new Ia(this.firestore,e?this._delegate.withConverter(Ki.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function yi(t){return ze(t,It)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(...e){this._delegate=new Ps(...e)}static documentId(){return new gy(wt.keyField().canonicalString())}isEqual(e){return e=Ue(e),e instanceof Ps?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._delegate=e}static serverTimestamp(){const e=rM();return e._methodName="FieldValue.serverTimestamp",new hi(e)}static delete(){const e=nM();return e._methodName="FieldValue.delete",new hi(e)}static arrayUnion(...e){const n=AM(...e);return n._methodName="FieldValue.arrayUnion",new hi(n)}static arrayRemove(...e){const n=sM(...e);return n._methodName="FieldValue.arrayRemove",new hi(n)}static increment(e){const n=iM(e);return n._methodName="FieldValue.increment",new hi(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM={Firestore:nU,GeoPoint:eg,Timestamp:yt,Blob:tU,Transaction:rU,WriteBatch:AU,DocumentReference:pr,DocumentSnapshot:Wc,Query:Un,QueryDocumentSnapshot:$c,QuerySnapshot:Q0,CollectionReference:Ia,FieldPath:gy,FieldValue:hi,setLogLevel:yM,CACHE_SIZE_UNLIMITED:BO};function _M(t,e){t.INTERNAL.registerComponent(new Zr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),A=n.getProvider("firestore").getImmediate();return e(r,A)},"PUBLIC").setServiceProps(Object.assign({},xM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){_M(t,(e,n)=>new nU(e,n,new vM)),t.registerVersion(pM,mM)}CM($s);function py(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,r=Object.getOwnPropertySymbols(t);A<r.length;A++)e.indexOf(r[A])<0&&Object.prototype.propertyIsEnumerable.call(t,r[A])&&(n[r[A]]=t[r[A]]);return n}const ml={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},go={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function oU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EM=IM,bM=oU,aU=new Yi("auth","Firebase",oU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Mf("@firebase/auth");function TM(t,...e){rf.logLevel<=Pe.WARN&&rf.warn(`Auth (${js}): ${t}`,...e)}function oh(t,...e){rf.logLevel<=Pe.ERROR&&rf.error(`Auth (${js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,...e){throw wy(t,...e)}function Xt(t,...e){return wy(t,...e)}function my(t,e,n){const r=Object.assign(Object.assign({},bM()),{[e]:n});return new Yi("auth","Firebase",r).create(e,{appName:t.name})}function An(t){return my(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ja(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pn(t,"argument-error"),my(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return aU.create(t,...e)}function te(t,e,...n){if(!t)throw wy(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oh(e),new Error(e)}function Pr(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vy(){return _C()==="http:"||_C()==="https:"}function _C(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vy()||yT()||"connection"in navigator)?navigator.onLine:!0}function UM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pr(n>e,"Short delay should be less than long delay!"),this.isMobile=VN()||ov()}get(){return FM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){Pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=new Bu(3e4,6e4);function Rt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nt(t,e,n,r,A={}){return cU(t,A,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=Ra(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:a},s);return jN()||(l.referrerPolicy="no-referrer"),lU.fetch()(uU(t,t.config.apiHost,n,o),l)})}async function cU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QM),e);try{const A=new RM(t),s=await Promise.race([n(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw kl(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,l]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw kl(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw my(t,d,l);pn(t,d)}}catch(A){if(A instanceof Rn)throw A;pn(t,"network-request-failed",{message:String(A)})}}async function LA(t,e,n,r,A={}){const s=await Nt(t,e,n,r,A);return"mfaPendingCredential"in s&&pn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function uU(t,e,n,r){const A=`${e}${n}?${r}`;return t.config.emulator?yy(t.config,A):`${t.config.apiScheme}://${A}`}function kM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),SM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const A=Xt(t,e,r);return A.customData._tokenResponse=n,A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){return t!==void 0&&t.getResponse!==void 0}function IC(t){return t!==void 0&&t.enterprise!==void 0}class NM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t){return(await Nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function DM(t,e){return Nt(t,"GET","/v2/recaptchaConfig",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e){return Nt(t,"POST","/v1/accounts:delete",e)}async function OM(t,e){return Nt(t,"POST","/v1/accounts:update",e)}async function dU(t,e){return Nt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MM(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),A=cg(r);te(A&&A.exp&&A.auth_time&&A.iat,n.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:r,authTime:Ac(Tp(A.auth_time)),issuedAtTime:Ac(Tp(A.iat)),expirationTime:Ac(Tp(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Tp(t){return Number(t)*1e3}function cg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const A=pT(n);return A?JSON.parse(A):(oh("Failed to decode base64 JWT payload"),null)}catch(A){return oh("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function EC(t){const e=cg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rn&&VM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const A=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t){var e;const n=t.auth,r=await t.getIdToken(),A=await UA(t,dU(n,{idToken:r}));te(A==null?void 0:A.users.length,n,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hU(s.providerUserInfo):[],o=KM(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new S0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function jM(t){const e=Ue(t);await Jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KM(t,e){return[...t.filter(r=>!e.some(A=>A.providerId===r.providerId)),...e]}function hU(t){return t.map(e=>{var{providerId:n}=e,r=py(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(t,e){const n=await cU(t,{},async()=>{const r=Ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=uU(t,A,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",lU.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zM(t,e){return Nt(t,"POST","/v2/accounts:revokeToken",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=EC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:A,expiresIn:s}=await GM(e,n);this.updateTokensAndExpiration(r,A,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:A,expirationTime:s}=n,i=new Yo;return r&&(te(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),A&&(te(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(te(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pA{constructor(e){var{uid:n,auth:r,stsTokenManager:A}=e,s=py(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new S0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await UA(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MM(this,e)}reload(){return jM(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(An(this.auth));const e=await this.getIdToken();return await UA(this,LM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,A,s,i,o,a,l,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(A=n.email)!==null&&A!==void 0?A:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=n.photoURL)!==null&&i!==void 0?i:void 0,y=(o=n.tenantId)!==null&&o!==void 0?o:void 0,I=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,B=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:k,isAnonymous:U,providerData:N,stsTokenManager:C}=n;te(_&&C,e,"internal-error");const x=Yo.fromJSON(this.name,C);te(typeof _=="string",e,"internal-error"),WA(h,e.name),WA(f,e.name),te(typeof k=="boolean",e,"internal-error"),te(typeof U=="boolean",e,"internal-error"),WA(w,e.name),WA(m,e.name),WA(y,e.name),WA(I,e.name),WA(B,e.name),WA(v,e.name);const b=new pA({uid:_,auth:e,email:f,emailVerified:k,displayName:h,isAnonymous:U,photoURL:m,phoneNumber:w,tenantId:y,stsTokenManager:x,createdAt:B,lastLoginAt:v});return N&&Array.isArray(N)&&(b.providerData=N.map(Q=>Object.assign({},Q))),I&&(b._redirectEventId=I),b}static async _fromIdTokenResponse(e,n,r=!1){const A=new Yo;A.updateFromServerResponse(n);const s=new pA({uid:n.localId,auth:e,stsTokenManager:A,isAnonymous:r});return await Jc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const A=n.users[0];te(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?hU(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),o=new Yo;o.updateFromIdToken(r);const a=new pA({uid:A.localId,auth:e,stsTokenManager:o,isAnonymous:i}),l={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new S0(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,l),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Map;function Ar(t){Pr(t instanceof Function,"Expected a class definition");let e=bC.get(t);return e?(Pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fU.type="NONE";const Ea=fU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e,n){return`firebase:${t}:${e}:${n}`}class Zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:A,name:s}=this.auth;this.fullUserKey=Ei(this.userKey,A.apiKey,s),this.fullPersistenceKey=Ei("persistence",A.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zo(Ar(Ea),e,r);const A=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=A[0]||Ar(Ea);const i=Ei(r,e.config.apiKey,e.name);let o=null;for(const l of n)try{const d=await l._get(i);if(d){const h=pA._fromJSON(e,d);l!==s&&(o=h),s=l;break}}catch{}const a=A.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Zo(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(i)}catch{}})),new Zo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vU(e))return"Blackberry";if(yU(e))return"Webos";if(pU(e))return"Safari";if((e.includes("chrome/")||mU(e))&&!e.includes("edge/"))return"Chrome";if(xu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gU(t=bt()){return/firefox\//i.test(t)}function pU(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mU(t=bt()){return/crios\//i.test(t)}function wU(t=bt()){return/iemobile/i.test(t)}function xu(t=bt()){return/android/i.test(t)}function vU(t=bt()){return/blackberry/i.test(t)}function yU(t=bt()){return/webos/i.test(t)}function _u(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WM(t=bt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function $M(t=bt()){var e;return _u(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qM(){return BT()&&document.documentMode===10}function BU(t=bt()){return _u(t)||xu(t)||yU(t)||vU(t)||/windows phone/i.test(t)||wU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t,e=[]){let n;switch(t){case"Browser":n=TC(bt());break;case"Worker":n=`${TC(bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const A of n)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e={}){return Nt(t,"GET","/v2/passwordPolicy",Rt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=6;class ZM{constructor(e){var n,r,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:YM,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,A,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(A=a.containsLowercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),A&&(n.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let A=0;A<e.length;A++)r=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,r,A){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FC(this),this.idTokenSubscription=new FC(this),this.beforeStateQueue=new JM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ar(n)),this._initializationPromise=this.queue(async()=>{var r,A;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dU(this,{idToken:e}),r=await pA._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let A=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=A==null?void 0:A._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(A=a.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(An(this));const n=e?Ue(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(An(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(An(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XM(this),n=new ZM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ar(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,A){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,A);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const A=await this._getAppCheckToken();return A&&(n["X-Firebase-AppCheck"]=A),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kt(t){return Ue(t)}class FC{constructor(e){this.auth=e,this.observer=null,this.addObserver=_T(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tV(t){Cu=t}function By(t){return Cu.loadJS(t)}function nV(){return Cu.recaptchaV2Script}function rV(){return Cu.recaptchaEnterpriseScript}function AV(){return Cu.gapiScript}function _U(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const sV="recaptcha-enterprise",iV="NO_RECAPTCHA";class oV{constructor(e){this.type=sV,this.auth=kt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{DM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new NM(a);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,i(l.siteKey)}}).catch(a=>{o(a)})})}function A(s,i,o){const a=window.grecaptcha;IC(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(l=>{i(l)}).catch(()=>{i(iV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{r(this.auth).then(o=>{if(!n&&IC(window.grecaptcha))A(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=rV();a.length!==0&&(a+=o),By(a).then(()=>{A(o,s,i)}).catch(l=>{i(l)})}}).catch(o=>{i(o)})})}}async function UC(t,e,n,r=!1){const A=new oV(t);let s;try{s=await A.verify(n)}catch{s=await A.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Xc(t,e,n,r){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await UC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await UC(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(s)})}function aV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lV(t,e,n){const r=kt(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const A=!!(n!=null&&n.disableWarnings),s=CU(e),{host:i,port:o}=cV(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||uV()}function CU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cV(t){const e=CU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(r);if(A){const s=A[1];return{host:s,port:QC(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:QC(i)}}}function QC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(t,e){return Nt(t,"POST","/v1/accounts:resetPassword",Rt(t,e))}async function dV(t,e){return Nt(t,"POST","/v1/accounts:update",e)}async function hV(t,e){return Nt(t,"POST","/v1/accounts:signUp",e)}async function fV(t,e){return Nt(t,"POST","/v1/accounts:update",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e){return LA(t,"POST","/v1/accounts:signInWithPassword",Rt(t,e))}async function ug(t,e){return Nt(t,"POST","/v1/accounts:sendOobCode",Rt(t,e))}async function pV(t,e){return ug(t,e)}async function mV(t,e){return ug(t,e)}async function wV(t,e){return ug(t,e)}async function vV(t,e){return ug(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e){return LA(t,"POST","/v1/accounts:signInWithEmailLink",Rt(t,e))}async function BV(t,e){return LA(t,"POST","/v1/accounts:signInWithEmailLink",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Ka{constructor(e,n,r,A=null){super("password",r),this._email=e,this._password=n,this._tenantId=A}static _fromEmailAndPassword(e,n){return new Yc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,n,"signInWithPassword",gV);case"emailLink":return yV(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,r,"signUpPassword",hV);case"emailLink":return BV(e,{idToken:n,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return LA(t,"POST","/v1/accounts:signInWithIdp",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV="http://localhost";class rA extends Ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A}=n,s=py(n,["providerId","signInMethod"]);if(!r||!A)return null;const i=new rA(r,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return BA(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,BA(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,BA(e,n)}buildRequest(){const e={requestUri:xV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e){return Nt(t,"POST","/v1/accounts:sendVerificationCode",Rt(t,e))}async function CV(t,e){return LA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,e))}async function IV(t,e){const n=await LA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,e));if(n.temporaryProof)throw kl(t,"account-exists-with-different-credential",n);return n}const EV={USER_NOT_FOUND:"user-not-found"};async function bV(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return LA(t,"POST","/v1/accounts:signInWithPhoneNumber",Rt(t,n),EV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Ka{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new bi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new bi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return CV(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return IV(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return bV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:A}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:A}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:A,temporaryProof:s}=e;return!r&&!n&&!A&&!s?null:new bi({verificationId:n,verificationCode:r,phoneNumber:A,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FV(t){const e=Ho(Tl(t)).link,n=e?Ho(Tl(e)).deep_link_id:null,r=Ho(Tl(t)).deep_link_id;return(r?Ho(Tl(r)).link:null)||r||n||e||t}class dg{constructor(e){var n,r,A,s,i,o;const a=Ho(Tl(e)),l=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=TV((A=a.mode)!==null&&A!==void 0?A:null);te(l&&d&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=d,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=FV(e);try{return new dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.providerId=qs.PROVIDER_ID}static credential(e,n){return Yc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dg.parseLink(n);return te(r,"argument-error"),Yc._fromEmailAndCode(e,r.code,r.tenantId)}}qs.PROVIDER_ID="password";qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends OA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ea extends Ga{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return te("providerId"in n&&"signInMethod"in n,"argument-error"),rA._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),rA._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ea.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ea.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:A,pendingToken:s,nonce:i,providerId:o}=e;if(!r&&!A&&!n&&!s||!o)return null;try{return new ea(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Ga{constructor(){super("facebook.com")}static credential(e){return rA._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rA._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jr.credential(n,r)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Ga{constructor(){super("github.com")}static credential(e){return rA._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="http://localhost";class ba extends Ka{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return BA(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,BA(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,BA(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A,pendingToken:s}=n;return!r||!A||!s||r!==A?null:new ba(r,s)}static _create(e,n){return new ba(e,n)}buildRequest(){return{requestUri:UV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="saml.";class Af extends OA{constructor(e){te(e.startsWith(QV),"argument-error"),super(e)}static credentialFromResult(e){return Af.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Af.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=ba.fromJSON(e);return te(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return ba._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Ga{constructor(){super("twitter.com")}static credential(e,n){return rA._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(t,e){return LA(t,"POST","/v1/accounts:signUp",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,A=!1){const s=await pA._fromIdTokenResponse(e,r,A),i=SC(r);return new _r({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const A=SC(r);return new _r({user:e,providerId:A,_tokenResponse:r,operationType:n})}}function SC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(t){var e;if(Qt(t.app))return Promise.reject(An(t));const n=kt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new _r({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await EU(n,{returnSecureToken:!0}),A=await _r._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(A.user),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends Rn{constructor(e,n,r,A){var s;super(n.code,n.message),this.operationType=r,this.user=A,Object.setPrototypeOf(this,sf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,A){return new sf(e,n,r,A)}}function bU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sf._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t,e){const n=Ue(t);await hg(!0,n,e);const{providerUserInfo:r}=await OM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),A=TU(r||[]);return n.providerData=n.providerData.filter(s=>A.has(s.providerId)),A.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xy(t,e,n=!1){const r=await UA(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _r._forOperation(t,"link",r)}async function hg(t,e,n){await Jc(e);const r=TU(e.providerData),A=t===!1?"provider-already-linked":"no-such-provider";te(r.has(n)===t,e.auth,A)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(An(r));const A="reauthenticate";try{const s=await UA(t,bU(r,A,e,t),n);te(s.idToken,r,"internal-error");const i=cg(s.idToken);te(i,r,"internal-error");const{sub:o}=i;return te(t.uid===o,r,"user-mismatch"),_r._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e,n=!1){if(Qt(t.app))return Promise.reject(An(t));const r="signIn",A=await bU(t,r,e),s=await _r._fromIdTokenResponse(t,r,A);return n||await t._updateCurrentUser(s.user),s}async function fg(t,e){return UU(kt(t),e)}async function QU(t,e){const n=Ue(t);return await hg(!1,n,e.providerId),xy(n,e)}async function SU(t,e){return FU(Ue(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){return LA(t,"POST","/v1/accounts:signInWithCustomToken",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){if(Qt(t.app))return Promise.reject(An(t));const n=kt(t),r=await RV(n,{token:e,returnSecureToken:!0}),A=await _r._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(A.user),A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?_y._fromServerResponse(e,n):"totpInfo"in n?Cy._fromServerResponse(e,n):pn(e,"internal-error")}}class _y extends Iu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new _y(n)}}class Cy extends Iu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Cy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e,n){var r;te(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),te(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(te(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(te(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iy(t){const e=kt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PV(t,e,n){const r=kt(t),A={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&gg(r,A,n),await Xc(r,A,"getOobCode",mV)}async function DV(t,e,n){await IU(Ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Iy(t),r})}async function LV(t,e){await fV(Ue(t),{oobCode:e})}async function kU(t,e){const n=Ue(t),r=await IU(n,{oobCode:e}),A=r.requestType;switch(te(A,n,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,n,"internal-error");default:te(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Iu._fromServerResponse(kt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:A}}async function OV(t,e){const{data:n}=await kU(Ue(t),e);return n.email}async function MV(t,e,n){if(Qt(t.app))return Promise.reject(An(t));const r=kt(t),i=await Xc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EU).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Iy(t),a}),o=await _r._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function VV(t,e,n){return Qt(t.app)?Promise.reject(An(t)):fg(Ue(t),qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Iy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e,n){const r=kt(t),A={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(i,o){te(o.handleCodeInApp,r,"argument-error"),o&&gg(r,i,o)}s(A,n),await Xc(r,A,"getOobCode",wV)}function jV(t,e){const n=dg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function KV(t,e,n){if(Qt(t.app))return Promise.reject(An(t));const r=Ue(t),A=qs.credentialWithLink(e,n||qc());return te(A._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),fg(r,A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(t,e){return Nt(t,"POST","/v1/accounts:createAuthUri",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){const n=vy()?qc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:A}=await GV(Ue(t),r);return A||[]}async function WV(t,e){const n=Ue(t),A={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&gg(n.auth,A,e);const{email:s}=await pV(n.auth,A);s!==t.email&&await t.reload()}async function $V(t,e,n){const r=Ue(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&gg(r.auth,s,n);const{email:i}=await vV(r.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t,e){return Nt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ue(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await UA(r,qV(r.auth,s));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function XV(t,e){const n=Ue(t);return Qt(n.auth.app)?Promise.reject(An(n.auth)):RU(n,e,null)}function YV(t,e){return RU(Ue(t),null,e)}async function RU(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const i=await UA(t,dV(r,s));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t){var e,n;if(!t)return null;const{providerId:r}=t,A=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=cg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new ta(s,o)}}if(!r)return null;switch(r){case"facebook.com":return new eH(s,A);case"github.com":return new tH(s,A);case"google.com":return new nH(s,A);case"twitter.com":return new rH(s,A,t.screenName||null);case"custom":case"anonymous":return new ta(s,null);default:return new ta(s,r,A)}}class ta{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class NU extends ta{constructor(e,n,r,A){super(e,n,r),this.username=A}}class eH extends ta{constructor(e,n){super(e,"facebook.com",n)}}class tH extends NU{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class nH extends ta{constructor(e,n){super(e,"google.com",n)}}class rH extends NU{constructor(e,n,r){super(e,"twitter.com",n,r)}}function AH(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ZV(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Bi("enroll",e,n)}static _fromMfaPendingCredential(e){return new Bi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Bi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Bi._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=kt(e),A=n.customData._serverResponse,s=(A.mfaInfo||[]).map(o=>Iu._fromServerResponse(r,o));te(A.mfaPendingCredential,r,"internal-error");const i=Bi._fromMfaPendingCredential(A.mfaPendingCredential);return new Ey(i,s,async o=>{const a=await o._process(r,i);delete A.mfaInfo,delete A.mfaPendingCredential;const l=Object.assign(Object.assign({},A),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await _r._fromIdTokenResponse(r,n.operationType,l);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return te(n.user,r,"internal-error"),_r._forOperation(n.user,n.operationType,l);default:pn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function sH(t,e){var n;const r=Ue(t),A=e;return te(e.customData.operationType,r,"argument-error"),te((n=A.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Ey._fromError(r,A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:start",Rt(t,e))}function oH(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(t,e))}function aH(t,e){return Nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(t,e))}class by{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Iu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new by(e)}async getSession(){return Bi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,A=await this.getSession(),s=await UA(this.user,r._process(this.user.auth,A,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const A=await UA(this.user,aH(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(A),await this.user.reload()}catch(A){throw A}}}const Fp=new WeakMap;function lH(t){const e=Ue(t);return Fp.has(e)||Fp.set(e,by._fromUser(e)),Fp.get(e)}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH=1e3,uH=10;class DU extends PU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),A=this.localCache[n];r!==A&&e(n,A,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);qM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,uH):A()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DU.type="LOCAL";const Ty=DU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU extends PU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LU.type="SESSION";const Gi=LU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(A=>A.isListeningto(e));if(n)return n;const r=new pg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:A,data:s}=n.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:A});const o=Array.from(i).map(async l=>l(n.origin,s)),a=await dH(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:A,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=Eu("",20);A.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(d),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return window}function fH(t){Kt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){return typeof Kt().WorkerGlobalScope<"u"&&typeof Kt().importScripts=="function"}async function gH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function mH(){return Fy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="firebaseLocalStorageDb",wH=1,af="firebaseLocalStorage",MU="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mg(t,e){return t.transaction([af],e?"readwrite":"readonly").objectStore(af)}function vH(){const t=indexedDB.deleteDatabase(OU);return new bu(t).toPromise()}function k0(){const t=indexedDB.open(OU,wH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(af,{keyPath:MU})}catch(A){n(A)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(af)?e(r):(r.close(),await vH(),e(await k0()))})})}async function kC(t,e,n){const r=mg(t,!0).put({[MU]:e,value:n});return new bu(r).toPromise()}async function yH(t,e){const n=mg(t,!1).get(e),r=await new bu(n).toPromise();return r===void 0?null:r.value}function RC(t,e){const n=mg(t,!0).delete(e);return new bu(n).toPromise()}const BH=800,xH=3;class VU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await k0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pg._getInstance(mH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await gH(),!this.activeServiceWorker)return;this.sender=new hH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await k0();return await kC(e,of,"1"),await RC(e,of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=mg(A,!1).getAll();return new bu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)r.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),n.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!r.has(A)&&(this.notifyListeners(A,null),n.push(A));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VU.type="LOCAL";const Zc=VU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(t,e){return Nt(t,"POST","/v2/accounts/mfaSignIn:start",Rt(t,e))}function CH(t,e){return Nt(t,"POST","/v2/accounts/mfaSignIn:finalize",Rt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=500,EH=6e4,pd=1e12;class bH{constructor(e){this.auth=e,this.counter=pd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new TH(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||pd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||pd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||pd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class TH{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A=typeof e=="string"?document.getElementById(e):e;te(A,"argument-error",{appName:n}),this.container=A,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=FH(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},EH)},IH))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function FH(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=_U("rcb"),UH=new Bu(3e4,6e4);class QH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Kt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(SH(n),e,"argument-error"),this.shouldResolveImmediately(n)&&CC(Kt().grecaptcha)?Promise.resolve(Kt().grecaptcha):new Promise((r,A)=>{const s=Kt().setTimeout(()=>{A(Xt(e,"network-request-failed"))},UH.get());Kt()[Up]=()=>{Kt().clearTimeout(s),delete Kt()[Up];const o=Kt().grecaptcha;if(!o||!CC(o)){A(Xt(e,"internal-error"));return}const a=o.render;o.render=(l,d)=>{const h=a(l,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${nV()}?${Ra({onload:Up,render:"explicit",hl:n})}`;By(i).catch(()=>{clearTimeout(s),A(Xt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Kt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function SH(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class kH{async load(e){return new bH(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="recaptcha",RH={theme:"light",type:"image"};let NH=class{constructor(e,n,r=Object.assign({},RH)){this.parameters=r,this.type=HU,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kt(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A=typeof n=="string"?document.getElementById(n):n;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kH:new QH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(A=>{const s=i=>{i&&(this.tokenChangeListeners.delete(s),A(i))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Kt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(vy()&&!Fy(),this.auth,"internal-error"),await PH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PM(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function PH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=bi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function DH(t,e,n){if(Qt(t.app))return Promise.reject(An(t));const r=kt(t),A=await wg(r,e,Ue(n));return new Uy(A,s=>fg(r,s))}async function LH(t,e,n){const r=Ue(t);await hg(!1,r,"phone");const A=await wg(r.auth,e,Ue(n));return new Uy(A,s=>QU(r,s))}async function OH(t,e,n){const r=Ue(t);if(Qt(r.auth.app))return Promise.reject(An(r.auth));const A=await wg(r.auth,e,Ue(n));return new Uy(A,s=>SU(r,s))}async function wg(t,e,n){var r;const A=await n.verify();try{te(typeof A=="string",t,"argument-error"),te(n.type===HU,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const i=s.session;if("phoneNumber"in s)return te(i.type==="enroll",t,"internal-error"),(await iH(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te(i.type==="signin",t,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return te(o,t,"missing-multi-factor-info"),(await _H(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await _V(t,{phoneNumber:s.phoneNumber,recaptchaToken:A});return i}}finally{n._reset()}}async function MH(t,e){const n=Ue(t);if(Qt(n.auth.app))return Promise.reject(An(n.auth));await xy(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi=class ah{constructor(e){this.providerId=ah.PROVIDER_ID,this.auth=kt(e)}verifyPhoneNumber(e,n){return wg(this.auth,e,Ue(n))}static credential(e,n){return bi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ah.credentialFromTaggedObject(n)}static credentialFromError(e){return ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?bi._fromTokenResponse(n,r):null}};zi.PROVIDER_ID="phone";zi.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t,e){return e?Ar(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends Ka{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return BA(e,this._buildIdpRequest())}_linkToIdToken(e,n){return BA(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return BA(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VH(t){return UU(t.auth,new Qy(t),t.bypassAuthState)}function HH(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),FU(n,new Qy(t),t.bypassAuthState)}async function jH(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),xy(n,new Qy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,n,r,A,s=!1){this.auth=e,this.resolver=r,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:A,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VH;case"linkViaPopup":case"linkViaRedirect":return jH;case"reauthViaPopup":case"reauthViaRedirect":return HH;default:pn(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=new Bu(2e3,1e4);async function GH(t,e,n){if(Qt(t.app))return Promise.reject(Xt(t,"operation-not-supported-in-this-environment"));const r=kt(t);ja(t,e,OA);const A=Ao(r,n);return new mA(r,"signInViaPopup",e,A).executeNotNull()}async function zH(t,e,n){const r=Ue(t);if(Qt(r.auth.app))return Promise.reject(Xt(r.auth,"operation-not-supported-in-this-environment"));ja(r.auth,e,OA);const A=Ao(r.auth,n);return new mA(r.auth,"reauthViaPopup",e,A,r).executeNotNull()}async function WH(t,e,n){const r=Ue(t);ja(r.auth,e,OA);const A=Ao(r.auth,n);return new mA(r.auth,"linkViaPopup",e,A,r).executeNotNull()}class mA extends jU{constructor(e,n,r,A,s){super(e,n,A,s),this.provider=r,this.authWindow=null,this.pollId=null,mA.currentPopupAction&&mA.currentPopupAction.cancel(),mA.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=Eu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mA.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KH.get())};e()}}mA.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H="pendingRedirect",sc=new Map;class qH extends jU{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sc.get(this.auth._key());if(!e){try{const r=await JH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sc.set(this.auth._key(),e)}return this.bypassAuthState||sc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JH(t,e){const n=GU(e),r=KU(t);if(!await r._isAvailable())return!1;const A=await r._get(n)==="true";return await r._remove(n),A}async function Sy(t,e){return KU(t)._set(GU(e),"true")}function XH(){sc.clear()}function ky(t,e){sc.set(t._key(),e)}function KU(t){return Ar(t._redirectPersistence)}function GU(t){return Ei($H,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(t,e,n){return ZH(t,e,n)}async function ZH(t,e,n){if(Qt(t.app))return Promise.reject(An(t));const r=kt(t);ja(t,e,OA),await r._initializationPromise;const A=Ao(r,n);return await Sy(A,r),A._openRedirect(r,e,"signInViaRedirect")}function ej(t,e,n){return tj(t,e,n)}async function tj(t,e,n){const r=Ue(t);if(ja(r.auth,e,OA),Qt(r.auth.app))return Promise.reject(An(r.auth));await r.auth._initializationPromise;const A=Ao(r.auth,n);await Sy(A,r.auth);const s=await zU(r);return A._openRedirect(r.auth,e,"reauthViaRedirect",s)}function nj(t,e,n){return rj(t,e,n)}async function rj(t,e,n){const r=Ue(t);ja(r.auth,e,OA),await r.auth._initializationPromise;const A=Ao(r.auth,n);await hg(!1,r,e.providerId),await Sy(A,r.auth);const s=await zU(r);return A._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Aj(t,e){return await kt(t)._initializationPromise,vg(t,e,!1)}async function vg(t,e,n=!1){if(Qt(t.app))return Promise.reject(An(t));const r=kt(t),A=Ao(r,e),i=await new qH(r,A,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function zU(t){const e=Eu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=10*60*1e3;class WU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ij(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$U(e)){const A=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,A))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sj&&this.cachedEventUids.clear(),this.cachedEventUids.has(NC(e))}saveEventToCache(e){this.cachedEventUids.add(NC(e)),this.lastProcessedEventTime=Date.now()}}function NC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $U({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ij(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $U(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e={}){return Nt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aj=/^https?/;async function lj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qU(t);for(const n of e)try{if(cj(n))return}catch{}pn(t,"unauthorized-domain")}function cj(t){const e=qc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!aj.test(n))return!1;if(oj.test(t))return r===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Bu(3e4,6e4);function PC(){const t=Kt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dj(t){return new Promise((e,n)=>{var r,A,s;function i(){PC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PC(),n(Xt(t,"network-request-failed"))},timeout:uj.get()})}if(!((A=(r=Kt().gapi)===null||r===void 0?void 0:r.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=Kt().gapi)===null||s===void 0)&&s.load)i();else{const o=_U("iframefcb");return Kt()[o]=()=>{gapi.load?i():n(Xt(t,"network-request-failed"))},By(`${AV()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw lh=null,e})}let lh=null;function hj(t){return lh=lh||dj(t),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=new Bu(5e3,15e3),gj="__/auth/iframe",pj="emulator/auth/iframe",mj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vj(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yy(e,pj):`https://${t.config.authDomain}/${gj}`,r={apiKey:e.apiKey,appName:t.name,v:js},A=wj.get(t.config.apiHost);A&&(r.eid=A);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ra(r).slice(1)}`}async function yj(t){const e=await hj(t),n=Kt().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:vj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mj,dontclear:!0},r=>new Promise(async(A,s)=>{await r.restyle({setHideOnLeave:!1});const i=Xt(t,"network-request-failed"),o=Kt().setTimeout(()=>{s(i)},fj.get());function a(){Kt().clearTimeout(o),A(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xj=500,_j=600,Cj="_blank",Ij="http://localhost";class DC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ej(t,e,n,r=xj,A=_j){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},Bj),{width:r.toString(),height:A.toString(),top:s,left:i}),l=bt().toLowerCase();n&&(o=mU(l)?Cj:n),gU(l)&&(e=e||Ij,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[w,m])=>`${f}${w}=${m},`,"");if($M(l)&&o!=="_self")return bj(e||"",o),new DC(null);const h=window.open(e||"",o,d);te(h,t,"popup-blocked");try{h.focus()}catch{}return new DC(h)}function bj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="__/auth/handler",Fj="emulator/auth/handler",Uj=encodeURIComponent("fac");async function R0(t,e,n,r,A,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:A};if(e instanceof OA){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",$N(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))i[d]=h}if(e instanceof Ga){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),l=a?`#${Uj}=${encodeURIComponent(a)}`:"";return`${Qj(t)}?${Ra(o).slice(1)}${l}`}function Qj({config:t}){return t.emulator?yy(t,Fj):`https://${t.authDomain}/${Tj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class Sj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gi,this._completeRedirectFn=vg,this._overrideRedirectResult=ky}async _openPopup(e,n,r,A){var s;Pr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await R0(e,n,r,qc(),A);return Ej(e,i,Eu())}async _openRedirect(e,n,r,A){await this._originValidation(e);const s=await R0(e,n,r,qc(),A);return fH(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:A,promise:s}=this.eventManagers[n];return A?Promise.resolve(A):(Pr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yj(e),r=new WU(e);return n.register("authEvent",A=>(te(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:r.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[Qp];i!==void 0&&n(!!i),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BU()||pU()||_u()}}const kj=Sj;class Rj{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return $r("unexpected MultiFactorSessionType")}}}class Ry extends Rj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Ry(e)}_finalizeEnroll(e,n,r){return oH(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return CH(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class JU{constructor(){}static assertion(e){return Ry._fromCredential(e)}}JU.FACTOR_ID="phone";var LC="@firebase/auth",OC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(t){Fs(new Zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;te(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xU(t)},l=new eV(r,A,s,a);return aV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fs(new Zr("auth-internal",e=>{const n=kt(e.getProvider("auth").getImmediate());return(r=>new Nj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr(LC,OC,Pj(t)),Rr(LC,OC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=5*60;LN("authIdTokenMaxAge");function Oj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=A=>{const s=Xt("internal-error");s.customData=A,n(s)},r.type="text/javascript",r.charset="UTF-8",Oj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=2e3;async function Vj(t,e,n){var r;const{BuildInfo:A}=Wi();Pr(e.sessionId,"AuthEvent did not contain a session ID");const s=await zj(e.sessionId),i={};return _u()?i.ibi=A.packageName:xu()?i.apn=A.packageName:pn(t,"operation-not-supported-in-this-environment"),A.displayName&&(i.appDisplayName=A.displayName),i.sessionId=s,R0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function Hj(t){const{BuildInfo:e}=Wi(),n={};_u()?n.iosBundleId=e.packageName:xu()?n.androidPackageName=e.packageName:pn(t,"operation-not-supported-in-this-environment"),await qU(t,n)}function jj(t){const{cordova:e}=Wi();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let A=null;r?e.plugins.browsertab.openUrl(t):A=e.InAppBrowser.open(t,WM()?"_blank":"_system","location=yes"),n(A)})})}async function Kj(t,e,n){const{cordova:r}=Wi();let A=()=>{};try{await new Promise((s,i)=>{let o=null;function a(){var h;s();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function l(){o||(o=window.setTimeout(()=>{i(Xt(t,"redirect-cancelled-by-user"))},Mj))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&l()}e.addPassiveListener(a),document.addEventListener("resume",l,!1),xu()&&document.addEventListener("visibilitychange",d,!1),A=()=>{e.removePassiveListener(a),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{A()}}function Gj(t){var e,n,r,A,s,i,o,a,l,d;const h=Wi();te(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof((s=(A=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||A===void 0?void 0:A.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((d=(l=h==null?void 0:h.cordova)===null||l===void 0?void 0:l.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function zj(t){const e=Wj(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(A=>A.toString(16).padStart(2,"0")).join("")}function Wj(t){if(Pr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=20;class qj extends WU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Jj(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Zj(),postBody:null,tenantId:t.tenantId,error:Xt(t,"no-auth-event")}}function Xj(t,e){return N0()._set(P0(t),e)}async function MC(t){const e=await N0()._get(P0(t));return e&&await N0()._remove(P0(t)),e}function Yj(t,e){var n,r;const A=tK(e);if(A.includes("/__/auth/callback")){const s=ch(A),i=s.firebaseError?eK(decodeURIComponent(s.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?Xt(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:A,postBody:null}}return null}function Zj(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<$j;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function N0(){return Ar(Ty)}function P0(t){return Ei("authEvent",t.config.apiKey,t.name)}function eK(t){try{return JSON.parse(t)}catch{return null}}function tK(t){const e=ch(t),n=e.link?decodeURIComponent(e.link):void 0,r=ch(n).link,A=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ch(A).link||A||r||n||t}function ch(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ho(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK=500;class rK{constructor(){this._redirectPersistence=Gi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vg,this._overrideRedirectResult=ky}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new qj(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){pn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,A){Gj(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),XH(),await this._originValidation(e);const i=Jj(e,r,A);await Xj(e,i);const o=await Vj(e,i,n),a=await jj(o);return Kj(e,s,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Hj(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:A,BuildInfo:s}=Wi(),i=setTimeout(async()=>{await MC(e),n.onEvent(VC())},nK),o=async d=>{clearTimeout(i);const h=await MC(e);let f=null;h&&(d!=null&&d.url)&&(f=Yj(h,d.url)),n.onEvent(f||VC())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=A,l=`${s.packageName.toLowerCase()}://`;Wi().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(l)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const AK=rK;function VC(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t,e){kt(t)._logFramework(e)}var iK="@firebase/auth-compat",oK="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=1e3;function ic(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function lK(){return ic()==="http:"||ic()==="https:"}function XU(t=bt()){return!!((ic()==="file:"||ic()==="ionic:"||ic()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cK(){return ov()||iv()}function uK(){return BT()&&(document==null?void 0:document.documentMode)===11}function dK(t=bt()){return/Edge\/\d+/.test(t)}function hK(t=bt()){return uK()||dK(t)}function YU(){try{const t=self.localStorage,e=Eu();if(t)return t.setItem(e,"1"),t.removeItem(e),hK()?Qc():!0}catch{return Ny()&&Qc()}return!1}function Ny(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sp(){return(lK()||yT()||XU())&&!cK()&&YU()&&!Ny()}function ZU(){return XU()&&typeof document<"u"}async function fK(){return ZU()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},aK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function gK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr={LOCAL:"local",NONE:"none",SESSION:"session"},wl=te,eQ="persistence";function pK(t,e){if(wl(Object.values(tr).includes(e),t,"invalid-persistence-type"),ov()){wl(e!==tr.SESSION,t,"unsupported-persistence-type");return}if(iv()){wl(e===tr.NONE,t,"unsupported-persistence-type");return}if(Ny()){wl(e===tr.NONE||e===tr.LOCAL&&Qc(),t,"unsupported-persistence-type");return}wl(e===tr.NONE||YU(),t,"unsupported-persistence-type")}async function D0(t){await t._initializationPromise;const e=tQ(),n=Ei(eQ,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function mK(t,e){const n=tQ();if(!n)return[];const r=Ei(eQ,t,e);switch(n.getItem(r)){case tr.NONE:return[Ea];case tr.LOCAL:return[Zc,Gi];case tr.SESSION:return[Gi];default:return[]}}function tQ(){var t;try{return((t=gK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wK=te;class os{constructor(){this.browserResolver=Ar(kj),this.cordovaResolver=Ar(AK),this.underlyingResolver=null,this._redirectPersistence=Gi,this._completeRedirectFn=vg,this._overrideRedirectResult=ky}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,A){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,A)}async _openRedirect(e,n,r,A){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,A)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ZU()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await fK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQ(t){return t.unwrap()}function vK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(t){return rQ(t)}function BK(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const A=e;A.resolver=new xK(t,sH(t,e))}else if(r){const A=rQ(e),s=e;A&&(s.credential=A,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function rQ(t){const{_tokenResponse:e}=t instanceof Rn?t.customData:t;if(!e)return null;if(!(t instanceof Rn)&&"temporaryProof"in e&&"phoneNumber"in e)return zi.credentialFromResult(t);const n=e.providerId;if(!n||n===ml.PASSWORD)return null;let r;switch(n){case ml.GOOGLE:r=jr;break;case ml.FACEBOOK:r=Hr;break;case ml.GITHUB:r=Kr;break;case ml.TWITTER:r=Gr;break;default:const{oauthIdToken:A,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!s&&!i&&!A&&!o?null:o?n.startsWith("saml.")?ba._create(n,o):rA._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:A,accessToken:s}):new ea(n).credential({idToken:A,accessToken:s,rawNonce:a})}return t instanceof Rn?r.credentialFromError(t):r.credentialFromResult(t)}function Vn(t,e){return e.catch(n=>{throw n instanceof Rn&&BK(t,n),n}).then(n=>{const r=n.operationType,A=n.user;return{operationType:r,credential:yK(n),additionalUserInfo:AH(n),user:wA.getOrCreate(A)}})}async function L0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Vn(t,n.confirm(r))}}class xK{constructor(e,n){this.resolver=n,this.auth=vK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Vn(nQ(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this._delegate=e,this.multiFactor=lH(e)}static getOrCreate(e){return wA.USER_MAP.has(e)||wA.USER_MAP.set(e,new wA(e)),wA.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Vn(this.auth,QU(this._delegate,e))}async linkWithPhoneNumber(e,n){return L0(this.auth,LH(this._delegate,e,n))}async linkWithPopup(e){return Vn(this.auth,WH(this._delegate,e,os))}async linkWithRedirect(e){return await D0(kt(this.auth)),nj(this._delegate,e,os)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Vn(this.auth,SU(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return L0(this.auth,OH(this._delegate,e,n))}reauthenticateWithPopup(e){return Vn(this.auth,zH(this._delegate,e,os))}async reauthenticateWithRedirect(e){return await D0(kt(this.auth)),ej(this._delegate,e,os)}sendEmailVerification(e){return WV(this._delegate,e)}async unlink(e){return await kV(this._delegate,e),this}updateEmail(e){return XV(this._delegate,e)}updatePassword(e){return YV(this._delegate,e)}updatePhoneNumber(e){return MH(this._delegate,e)}updateProfile(e){return JV(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return $V(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wA.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=te;class O0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;vl(r,"invalid-api-key",{appName:e.name}),vl(r,"invalid-api-key",{appName:e.name});const A=typeof window<"u"?os:void 0;this._delegate=n.initialize({options:{persistence:_K(r,e.name),popupRedirectResolver:A}}),this._delegate._updateErrorMap(EM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wA.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){lV(this._delegate,e,n)}applyActionCode(e){return LV(this._delegate,e)}checkActionCode(e){return kU(this._delegate,e)}confirmPasswordReset(e,n){return DV(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Vn(this._delegate,MV(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return zV(this._delegate,e)}isSignInWithEmailLink(e){return jV(this._delegate,e)}async getRedirectResult(){vl(Sp(),this._delegate,"operation-not-supported-in-this-environment");const e=await Aj(this._delegate,os);return e?Vn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){sK(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:A,error:s,complete:i}=HC(e,n,r);return this._delegate.onAuthStateChanged(A,s,i)}onIdTokenChanged(e,n,r){const{next:A,error:s,complete:i}=HC(e,n,r);return this._delegate.onIdTokenChanged(A,s,i)}sendSignInLinkToEmail(e,n){return HV(this._delegate,e,n)}sendPasswordResetEmail(e,n){return PV(this._delegate,e,n||void 0)}async setPersistence(e){pK(this._delegate,e);let n;switch(e){case tr.SESSION:n=Gi;break;case tr.LOCAL:n=await Ar(Zc)._isAvailable()?Zc:Ty;break;case tr.NONE:n=Ea;break;default:return pn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Vn(this._delegate,SV(this._delegate))}signInWithCredential(e){return Vn(this._delegate,fg(this._delegate,e))}signInWithCustomToken(e){return Vn(this._delegate,NV(this._delegate,e))}signInWithEmailAndPassword(e,n){return Vn(this._delegate,VV(this._delegate,e,n))}signInWithEmailLink(e,n){return Vn(this._delegate,KV(this._delegate,e,n))}signInWithPhoneNumber(e,n){return L0(this._delegate,DH(this._delegate,e,n))}async signInWithPopup(e){return vl(Sp(),this._delegate,"operation-not-supported-in-this-environment"),Vn(this._delegate,GH(this._delegate,e,os))}async signInWithRedirect(e){return vl(Sp(),this._delegate,"operation-not-supported-in-this-environment"),await D0(this._delegate),YH(this._delegate,e,os)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return OV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}O0.Persistence=tr;function HC(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const A=r;return{next:i=>A(i&&wA.getOrCreate(i)),error:e,complete:n}}function _K(t,e){const n=mK(t,e);if(typeof self<"u"&&!n.includes(Zc)&&n.push(Zc),typeof window<"u")for(const r of[Ty,Gi])n.includes(r)||n.push(r);return n.includes(Ea)||n.push(Ea),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.providerId="phone",this._delegate=new zi(nQ($s.auth()))}static credential(e,n){return zi.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Py.PHONE_SIGN_IN_METHOD=zi.PHONE_SIGN_IN_METHOD;Py.PROVIDER_ID=zi.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=te;class IK{constructor(e,n,r=$s.app()){var A;CK((A=r.options)===null||A===void 0?void 0:A.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new NH(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK="auth-compat";function bK(t){t.INTERNAL.registerComponent(new Zr(EK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new O0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:go.EMAIL_SIGNIN,PASSWORD_RESET:go.PASSWORD_RESET,RECOVER_EMAIL:go.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:go.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:go.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:go.VERIFY_EMAIL}},EmailAuthProvider:qs,FacebookAuthProvider:Hr,GithubAuthProvider:Kr,GoogleAuthProvider:jr,OAuthProvider:ea,SAMLAuthProvider:Af,PhoneAuthProvider:Py,PhoneMultiFactorGenerator:JU,RecaptchaVerifier:IK,TwitterAuthProvider:Gr,Auth:O0,AuthCredential:Ka,Error:Rn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(iK,oK)}bK($s);const TK={VITE_FIREBASE_API_KEY:"AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",VITE_FIREBASE_APP_ID:"1:323355347910:web:c81f2813dce5ee9373c0c7",VITE_FIREBASE_AUTH_DOMAIN:"zameny-b6c3f.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"323355347910",VITE_FIREBASE_PROJECT_ID:"zameny-b6c3f",VITE_FIREBASE_STORAGE_BUCKET:"zameny-b6c3f.firebasestorage.app"},po=TK,AQ={apiKey:po.VITE_FIREBASE_API_KEY,authDomain:po.VITE_FIREBASE_AUTH_DOMAIN,projectId:po.VITE_FIREBASE_PROJECT_ID,storageBucket:po.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:po.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:po.VITE_FIREBASE_APP_ID};if(!AQ.apiKey)throw alert(" :  Firebase API . ,    .env          VITE_"),new Error("CRITICAL ERROR: Firebase API Key is missing. Check that your .env file exists and is configured correctly with VITE_ variables.");$s.initializeApp(AQ);const ai=$s.firestore(),uh=$s.auth();var ae=(t=>(t.First="1 ",t.Second="2 ",t))(ae||{}),nr=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(nr||{});const Sn=["","","","",""],vA={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},jC=["","","/","","","",""," "],sQ=[{shift:ae.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ae.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ae.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ae.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ae.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ae.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ae.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ae.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ae.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ae.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ae.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ae.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ae.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ae.Second,period:6,start:"18:50",end:"19:35",day:"default"}],cn={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ae.First,studentsCount:25},{id:"c2",name:"6",shift:ae.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],substitutions:[],bellSchedule:sQ,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}},kp="schoolData",Rp="main",Np="publicSchedules",Ti={save:async t=>{try{const e=Qr(ai,kp,Rp);await rc(e,t)}catch(e){throw console.error("Error saving to cloud:",e),e}},load:async()=>{try{const t=Qr(ai,kp,Rp),e=await T0(t);if(e.exists()){const n=e.data(),r={...cn,...n};return n.settings&&(r.settings={...cn.settings,...n.settings}),r}else{console.log("No data found, initializing cloud DB...");const n=Qr(ai,kp,Rp);return await rc(n,cn),cn}}catch(t){return console.error("Error loading from cloud:",t),cn}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{try{const n={subjects:e.subjects,teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",feedbackChatId:"",publicScheduleId:e.settings.publicScheduleId}},r=Qr(ai,Np,t);await rc(r,n)}catch(n){throw console.error("Error publishing schedule:",n),n}},getPublicData:async t=>{try{const e=Qr(ai,Np,t),n=await T0(e);return n.exists()?n.data():null}catch(e){return console.error("Error loading public schedule:",e),null}},deletePublicData:async t=>{try{const e=Qr(ai,Np,t);await Z1(e)}catch(e){throw console.error("Error deleting public schedule:",e),e}}},iQ=R.createContext(void 0),FK="admin@gymnasium22.com",UK="teacher@gymnasium22.com",QK=({children:t})=>{const[e,n]=R.useState(null),[r,A]=R.useState(null),[s,i]=R.useState(!0);R.useEffect(()=>{const l=uh.onAuthStateChanged(d=>{n(d),d?d.email===FK?A("admin"):d.email===UK?A("teacher"):(A(null),uh.signOut()):A(null),i(!1)});return()=>l()},[]);const o=async()=>{await uh.signOut(),A(null)},a=()=>{A("guest"),i(!1)};return c.jsx(iQ.Provider,{value:{user:e,role:r,loading:s,logout:o,setGuestRole:a},children:t})},yg=()=>{const t=R.useContext(iQ);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},oQ=R.createContext(void 0),aQ=({children:t,initialData:e})=>{const{role:n}=yg(),r=n!=="admin",[A,s]=R.useState(cn),[i,o]=R.useState(!0),[a,l]=R.useState([]),[d,h]=R.useState(-1);R.useEffect(()=>{if(e)s(e),l([e]),h(0),o(!1);else{o(!0);const B=Qr(ai,"schoolData","main"),v=dy(B,_=>{if(_.exists()){const k=_.data(),U={...cn,...k};U.teachers||(U.teachers=[]),U.teachers=U.teachers.map(N=>({shifts:[ae.First,ae.Second],telegramChatId:"",...N})),U.schedule||(U.schedule=[]),U.substitutions||(U.substitutions=[]),U.bellSchedule||(U.bellSchedule=sQ),U.settings?U.settings={...cn.settings,...U.settings}:U.settings=cn.settings,s(U),l(N=>{const C=N[N.length-1];return!C||JSON.stringify(C)!==JSON.stringify(U)?[...N,U].slice(-50):N}),h(N=>N<0?0:N+1)}else s(cn),l([cn]),h(0);o(!1)},_=>{console.error("Firebase sync error:",_),o(!1)});return()=>v()}},[e]);const f=R.useCallback(async(B,v=!0)=>{if(r){console.warn("Attempted to save in Read-Only mode");return}const _={...A,...B};await Ti.save(_)},[A,r]),w=R.useCallback(async()=>{if(!r&&d>0){const B=a[d-1];await Ti.save(B)}},[a,d,r]),m=R.useCallback(async()=>{if(!r&&d<a.length-1){const B=a[d+1];await Ti.save(B)}},[a,d,r]),y=R.useCallback(async()=>{await f(cn)},[f]),I=R.useMemo(()=>({data:A,isLoading:i,saveData:f,resetData:y,undo:w,redo:m,canUndo:!r&&d>0,canRedo:!r&&d<a.length-1,isReadOnly:r}),[A,i,f,y,w,m,d,r]);return c.jsx(oQ.Provider,{value:I,children:t})},Tu=()=>{const t=R.useContext(oQ);if(!t)throw new Error("useFullData must be used within DataProvider");return t},lQ=R.createContext(void 0),cQ=R.createContext(void 0),uQ=({children:t})=>{const{data:e,saveData:n}=Tu(),r=R.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=R.useCallback(async(i,o)=>{await n(i,o)},[n]),s=R.useMemo(()=>({...r,saveStaticData:A}),[r,A]);return c.jsx(lQ.Provider,{value:s,children:t})},dQ=({children:t})=>{const{data:e,saveData:n}=Tu(),r=R.useMemo(()=>({schedule:e.schedule,substitutions:e.substitutions}),[e.schedule,e.substitutions]),A=R.useCallback(async(i,o)=>{await n(i,o)},[n]),s=R.useMemo(()=>({...r,saveScheduleData:A}),[r,A]);return c.jsx(cQ.Provider,{value:s,children:t})},Js=()=>{const t=R.useContext(lQ);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Tu();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData,isReadOnly:e.isReadOnly}},Fu=()=>{const t=R.useContext(cQ);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Tu();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData,isReadOnly:e.isReadOnly}},hQ=Tu,SK={Home:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),c.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),c.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),c.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"3"}),c.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"7 10 12 15 17 10"}),c.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),c.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),c.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"3 6 5 6 21 6"}),c.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),c.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),c.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"9",cy:"7",r:"4"}),c.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),c.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),c.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"5"}),c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),c.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),c.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),c.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),c.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),c.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),c.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),c.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"11",cy:"11",r:"8"}),c.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"1 4 1 10 7 10"}),c.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"23 4 23 10 17 10"}),c.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),c.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),c.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"18",cy:"5",r:"3"}),c.jsx("circle",{cx:"6",cy:"12",r:"3"}),c.jsx("circle",{cx:"18",cy:"19",r:"3"}),c.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),c.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),c.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),c.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),c.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),c.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),c.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),c.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),c.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),c.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),c.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),c.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),c.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),c.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),c.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),c.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),c.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),c.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),c.jsx("polyline",{points:"14 2 14 8 20 8"}),c.jsx("path",{d:"M8 13h2"}),c.jsx("path",{d:"M8 17h2"}),c.jsx("path",{d:"M14 13h2"}),c.jsx("path",{d:"M14 17h2"})]}),Activity:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),c.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),c.jsx("path",{d:"M3 9h18"}),c.jsx("path",{d:"M12 21V9"})]}),Image:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),c.jsx("circle",{cx:"9",cy:"9",r:"2"}),c.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"17 8 12 3 7 8"}),c.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M3 3v5h5"}),c.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),c.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"9",cy:"7",r:"4"}),c.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),c.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),c.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"9",cy:"12",r:"1"}),c.jsx("circle",{cx:"9",cy:"5",r:"1"}),c.jsx("circle",{cx:"9",cy:"19",r:"1"}),c.jsx("circle",{cx:"15",cy:"12",r:"1"}),c.jsx("circle",{cx:"15",cy:"5",r:"1"}),c.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),c.jsx("path",{d:"M2 20h3"}),c.jsx("path",{d:"M13 20h9"}),c.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),c.jsx("path",{d:"M13 12h1"}),c.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),c.jsx("path",{d:"M8 12h1"}),c.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),c.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),c.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"9 11 12 14 22 4"}),c.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),c.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),c.jsx("path",{d:"M17 17h.01"}),c.jsx("path",{d:"M12 17h.01"}),c.jsx("path",{d:"M14 14h.01"}),c.jsx("path",{d:"M17 14h.01"}),c.jsx("path",{d:"M14 12h.01"}),c.jsx("path",{d:"M19 12h.01"}),c.jsx("path",{d:"M12 19h.01"}),c.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),c.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 12H3"}),c.jsx("path",{d:"M21 6H3"}),c.jsx("path",{d:"M21 18H3"})]}),Send:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),c.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Eye:t=>c.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]})},J=({name:t,size:e=24,className:n="",...r})=>{const A=SK[t];return A?c.jsx(A,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},xs=({isOpen:t,onClose:e,title:n,children:r,maxWidth:A="max-w-lg"})=>t?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:c.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),c.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(J,{name:"X",size:24})})]}),c.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,kK=({x:t,y:e,onClose:n,actions:r})=>{if(R.useEffect(()=>{const s=()=>n();return window.addEventListener("click",s),()=>window.removeEventListener("click",s)},[n]),t===null||e===null)return null;const A={top:e,left:t};return window.innerWidth-t<200&&(A.left=t-200),c.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:A,children:r.map((s,i)=>c.jsxs("button",{onClick:o=>{o.stopPropagation(),s.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${s.color||"text-slate-700 dark:text-slate-200"}`,children:[s.icon&&c.jsx(J,{name:s.icon,size:16}),s.label]},i))})},RK=()=>{const{bellSchedule:t}=Js(),[e,n]=R.useState("..."),[r,A]=R.useState(""),[s,i]=R.useState(0),[o,a]=R.useState("bg-slate-500"),[l,d]=R.useState("");return R.useEffect(()=>{const h=()=>{const w=new Date,m=w.getDay(),I=[null,nr.Monday,nr.Tuesday,nr.Wednesday,nr.Thursday,nr.Friday,null][m];if(d(I||""),!I){n(" "),A(" "),a("bg-slate-400"),i(0);return}const B=w.getHours()*60+w.getMinutes();let v=t.filter(U=>U.day===I);v.length===0&&(v=t.filter(U=>U.day==="default"));let _=null;const k=U=>{const[N,C]=U.split(":").map(Number);return N*60+C};for(const U of v){const N=k(U.start),C=k(U.end);if(B>=N&&B<C){_={...U,duration:C-N,passed:B-N};break}}if(_)n(`${_.period} `),A(`${_.shift===ae.First?"1 ":"2 "}  . ${_.duration-_.passed} `),i(_.passed/_.duration*100),a("bg-indigo-600");else{let U=1/0,N=null;for(const C of v){const x=k(C.start);x>B&&x-B<U&&(U=x-B,N=C)}N&&U<30?(n(""),A(` ${U}  ${N.period} `),a("bg-amber-500"),i(100-U/20*100)):(n(" "),A(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),c.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),c.jsxs("div",{className:"flex justify-between items-start z-10",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:l}),c.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),c.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),c.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:c.jsx(J,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),s>0&&c.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:c.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${s}%`}})})]})},KC=({options:t,value:e,onChange:n,placeholder:r,groupBy:A})=>{var m;const[s,i]=R.useState(!1),[o,a]=R.useState(""),l=R.useRef(null);R.useEffect(()=>{const y=I=>{l.current&&!l.current.contains(I.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const d=t||[],f=((m=(A?d.flatMap(y=>y.options||[]):d).find(y=>y.value===e))==null?void 0:m.label)||r,w=A?d.map(y=>({...y,options:(y.options||[]).filter(I=>I.label.toLowerCase().includes(o.toLowerCase()))})).filter(y=>y.options.length>0):d.filter(y=>y.label.toLowerCase().includes(o.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:l,children:[c.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[c.jsx("span",{className:e?"":"text-slate-400",children:f}),c.jsx(J,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&c.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[c.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:c.jsx("input",{autoFocus:!0,value:o,onChange:y=>a(y.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A?w.map((y,I)=>c.jsxs("div",{children:[c.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:y.label}),y.options.map(B=>c.jsx("div",{onClick:()=>{n(B.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===B.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:B.label},B.value))]},I)):w.map(y=>c.jsx("div",{onClick:()=>{n(y.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===y.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:y.label},y.value))]})]})},md=({children:t,className:e=""})=>{const n=gi.Children.toArray(t);return c.jsx("div",{className:e,children:n.map((r,A)=>c.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:r},A))})},Pp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>c.jsx("div",{className:"space-y-3",children:t.map((r,A)=>c.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[c.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),c.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),c.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},A))}),NK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,settings:s}=Js(),{schedule:i,substitutions:o}=Fu(),a=ka(),[l,d]=R.useState(localStorage.getItem("gym_notes")||""),[h]=R.useState(new Date),[f,w]=R.useState(""),[m,y]=R.useState(null),[I,B]=R.useState(!1),[v,_]=R.useState(""),[k,U]=R.useState(!1),[N,C]=R.useState(""),[x,b]=R.useState(!1);R.useEffect(()=>{if(localStorage.setItem("gym_notes",l),l){_("");const F=setTimeout(()=>_(""),2e3);return()=>clearTimeout(F)}},[l]);const Q=F=>new Date(F.getTime()-F.getTimezoneOffset()*6e4).toISOString().split("T")[0],S=R.useMemo(()=>Q(h),[h]),P=R.useMemo(()=>{const F=h.getDay();return F===0||F===6?null:Sn[F-1]},[h]),T=R.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),e.filter(D=>D.birthDate).map(D=>{const V=new Date(D.birthDate);let q=new Date(F.getFullYear(),V.getMonth(),V.getDate());q<F&&q.setFullYear(F.getFullYear()+1);const W=Math.ceil((q.getTime()-F.getTime())/(1e3*60*60*24));return{...D,diff:W,age:F.getFullYear()-V.getFullYear()}}).filter(D=>D.diff<=30).sort((D,V)=>D.diff-V.diff)},[e]),Fe=R.useMemo(()=>{const F=e.length,D=e.filter(ge=>ge.unavailableDates.includes(S)),V=D.length,q=F-V;return{presentPercent:F>0?Math.round(q/F*100):0,absentCount:V,totalTeachers:F,absentTeachersList:D}},[e,S]),We=R.useMemo(()=>{const F=new Date(h);for(F.setDate(h.getDate()+1);F.getDay()===0||F.getDay()===6;)F.setDate(F.getDate()+1);const V=[null,"","","","","",null][F.getDay()];if(!V)return[];const q=[];return n.forEach(W=>{const ge=i.filter(he=>he.classId===W.id&&he.day===V);ge.length===0?q.push({class:W.name,issue:`   ${V}`}):ge.length<4&&q.push({class:W.name,issue:`  (${ge.length})`}),ge.forEach(he=>{if(i.some(xe=>xe.id!==he.id&&xe.day===V&&xe.period===he.period&&xe.shift===he.shift&&xe.teacherId===he.teacherId)&&q.push({class:W.name,issue:`  (${he.period} )`}),he.roomId){const xe=r.find($e=>$e.id===he.roomId);xe&&xe.capacity<W.studentsCount&&q.push({class:W.name,issue:`: ${xe.name} (${he.period} )`})}})}),q.filter((W,ge,he)=>he.findIndex(Ee=>Ee.class===W.class&&Ee.issue===W.issue)===ge).slice(0,10)},[i,n,e,r,h]),ee=R.useMemo(()=>{if(!P)return 0;let F=0;const D=i.filter(V=>V.day===P);for(const V of D){const q=e.find(W=>W.id===V.teacherId);if(q&&q.unavailableDates.includes(S)){const W=o.find(ge=>ge.scheduleItemId===V.id&&ge.date===S);(!W||W.replacementTeacherId==="cancelled"||W.replacementTeacherId==="conducted")&&F++}}return F},[i,e,o,S,P]),Te=()=>{var Tt;if(!f){y(null);return}const F=new Date,V=[null,nr.Monday,nr.Tuesday,nr.Wednesday,nr.Thursday,nr.Friday,null][F.getDay()];if(!V){y({status:"",detail:"  ",color:"text-slate-500"});return}const q=ke=>{const[Le,nt]=ke.split(":").map(Number);return Le*60+nt},W=F.getHours()*60+F.getMinutes();let ge=A.filter(ke=>ke.day===V);ge.length===0&&(ge=A.filter(ke=>ke.day==="default"));const he=ge.find(ke=>{const Le=q(ke.start),nt=q(ke.end);return W>=Le&&W<=nt}),Ee=f.toLowerCase(),xe=e.find(ke=>ke.name.toLowerCase().includes(Ee)),$e=n.find(ke=>ke.name.toLowerCase().includes(Ee));if(!xe&&!$e){y({status:" ",detail:" ",color:"text-red-500"});return}if(xe){if(xe.unavailableDates.includes(S)){const Qe=(Tt=xe.absenceReasons)==null?void 0:Tt[S],_e=Qe===" "?Qe:"";y({status:_e,detail:_e,color:"text-red-500",icon:"UserX",items:[]});return}if(!he){y({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const ke=i.filter(Qe=>Qe.teacherId===xe.id&&Qe.day===V&&Qe.period===he.period),Le=o.filter(Qe=>Qe.date===S&&Qe.replacementTeacherId===xe.id).map(Qe=>i.find(_e=>_e.id===Qe.scheduleItemId)).filter(Qe=>!!Qe&&Qe.day===V&&Qe.period===he.period);let nt=[];ke.forEach(Qe=>{var At,Ht,lt;const _e=o.find(Wt=>Wt.date===S&&Wt.scheduleItemId===Qe.id);if(!_e||_e.replacementTeacherId===xe.id){const Wt=((At=r.find(z=>z.id===((_e==null?void 0:_e.replacementRoomId)||Qe.roomId)))==null?void 0:At.name)||(_e==null?void 0:_e.replacementRoomId)||Qe.roomId||" .",Xn=(Ht=t.find(z=>z.id===Qe.subjectId))==null?void 0:Ht.name,L=(lt=n.find(z=>z.id===Qe.classId))==null?void 0:lt.name;nt.push({room:Wt,subject:Xn,entityName:L,direction:Qe.direction,isSubstitution:!!(_e&&_e.replacementTeacherId===xe.id),originalTeacherName:null})}}),Le.forEach(Qe=>{var Xn,L,z;const _e=o.find(ne=>ne.date===S&&ne.scheduleItemId===Qe.id&&ne.replacementTeacherId===xe.id);if(!_e)return;const At=((Xn=r.find(ne=>ne.id===(_e.replacementRoomId||Qe.roomId)))==null?void 0:Xn.name)||_e.replacementRoomId||Qe.roomId||" .",Ht=(L=t.find(ne=>ne.id===Qe.subjectId))==null?void 0:L.name,lt=(z=n.find(ne=>ne.id===Qe.classId))==null?void 0:z.name,Wt=e.find(ne=>ne.id===_e.originalTeacherId);nt.push({room:At,subject:Ht,entityName:lt,direction:Qe.direction,isSubstitution:!0,originalTeacherName:Wt==null?void 0:Wt.name})}),nt.length>0?y({status:` ${he.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:nt}):y({status:"",detail:` ( ${he.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if($e){if(!he){y({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const ke=i.filter(Le=>Le.classId===$e.id&&Le.day===V&&Le.period===he.period);if(ke.length>0){const Le=ke.map(_e=>{var ue,Be,be,se,ce;const At=o.find(Ae=>Ae.scheduleItemId===_e.id&&Ae.date===S);if(At&&At.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(ue=t.find(Ae=>Ae.id===_e.subjectId))==null?void 0:ue.name};const Ht=!!(At&&At.replacementTeacherId!=="conducted"&&At.replacementTeacherId!=="cancelled"),lt=Ht?At.replacementTeacherId:_e.teacherId,Wt=(At==null?void 0:At.replacementRoomId)||_e.roomId,Xn=(Be=e.find(Ae=>Ae.id===lt))==null?void 0:Be.name,L=((be=r.find(Ae=>Ae.id===Wt))==null?void 0:be.name)||Wt||" .",z=(se=t.find(Ae=>Ae.id===_e.subjectId))==null?void 0:se.name,ne=Ht?(ce=e.find(Ae=>Ae.id===At.originalTeacherId))==null?void 0:ce.name:null;return{room:L,subject:z,entityName:Xn,direction:_e.direction,isSubstitution:Ht,originalTeacherName:ne}}),nt=Le.filter(_e=>!_e.cancelled),Qe=Le.filter(_e=>!!_e.cancelled);nt.length>0?y({status:` ${he.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:nt}):Qe.length>0?y({status:" ",detail:Qe.map(_e=>_e.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):y({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else y({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},G=async()=>{if(!N.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}b(!0);const F=` *   :*

${N}`;try{const V=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:F,parse_mode:"Markdown"})})).json();if(V.ok)alert("!   ."),U(!1),C("");else throw new Error(V.description)}catch(D){console.error("   Telegram:",D),alert(`   . : ${D}`)}finally{b(!1)}};return c.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[c.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),c.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[c.jsx(J,{name:"Send",size:16}),"  "]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:c.jsx(J,{name:"Search",size:20})}),c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsx("input",{placeholder:"  ...",value:f,onChange:F=>w(F.target.value),onKeyDown:F=>F.key==="Enter"&&Te(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),c.jsx("button",{onClick:Te,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:c.jsx(J,{name:"Search",size:20})})]}),m&&c.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[c.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${m.color}`,children:[c.jsx(J,{name:m.icon||"Info",size:14})," ",m.status]}),m.items&&m.items.length>0?c.jsx("div",{className:"space-y-2",children:m.items.map((F,D)=>c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[F.direction&&c.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:F.direction}),c.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.subject}),F.isSubstitution&&c.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:F.originalTeacherName?` ( ${F.originalTeacherName})`:" "}),c.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[c.jsx("span",{children:F.entityName}),c.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:F.room})]})]},D))}):c.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:m.detail})]})]}),c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:c.jsx(J,{name:"AlertTriangle",size:20})}),c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:ee>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:ee}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),c.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[c.jsx(J,{name:"ArrowRight",size:16}),"   "]})]}):c.jsxs(c.Fragment,{children:[c.jsx(J,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),c.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:c.jsx(J,{name:"PieChart",size:20})}),c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),c.jsx("button",{onClick:()=>B(!I),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:I?" ":" ",children:c.jsx(J,{name:I?"PieChart":"List",size:20})})]}),I?c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Fe.absentTeachersList.length>0?c.jsx("div",{className:"space-y-2",children:Fe.absentTeachersList.map(F=>{var D;return c.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:F.name}),c.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:((D=F.absenceReasons)==null?void 0:D[Q(h)])===" "?" ":""})]},F.id)})}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[c.jsx(J,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),c.jsx("p",{className:"text-sm",children:"   "})]})}):c.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[c.jsxs("div",{className:"relative w-24 h-24",children:[c.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[c.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),c.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Fe.presentPercent}, 100`})]}),c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[c.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),c.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Fe.presentPercent,"%"]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-3xl font-black text-red-500",children:Fe.absentCount}),c.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",c.jsx("br",{}),""]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:c.jsx(J,{name:"Gift",size:20})}),c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(F=>c.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[c.jsx("span",{children:F.name}),c.jsx("span",{className:"font-bold text-slate-400",children:F.diff===0?"!":`${F.diff} .`})]},F.id)):c.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:c.jsx(J,{name:"AlertTriangle",size:20})}),c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:We.length?We.map((F,D)=>c.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[c.jsx("span",{children:F.class}),c.jsx("span",{className:"text-amber-600 text-xs font-bold",children:F.issue})]},D)):c.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:c.jsx(J,{name:"CheckSquare",size:20})}),c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),c.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{navigator.clipboard.writeText(l),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),c.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:l,onChange:F=>d(F.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),v&&c.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[c.jsx(J,{name:"Save",size:12})," ",v]})]})]})]}),c.jsx(xs,{isOpen:k,onClose:()=>U(!1),title:"   ",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),c.jsx("textarea",{value:N,onChange:F=>C(F.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{onClick:G,disabled:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[x?c.jsx(J,{name:"Loader",size:16,className:"animate-spin"}):c.jsx(J,{name:"Send",size:16}),x?"...":""]})})]})})]})};var fQ={},gQ={},pQ={},Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});function PK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Bg.default=PK;var Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});var DK=Bg,LK=" and ";function OK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],A=DK.default(n),s=r;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(LK)}Dy.default=OK;var Ly={};Object.defineProperty(Ly,"__esModule",{value:!0});function MK(){}Ly.default=MK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Bg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=Dy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=Ly;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(pQ);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=R,n=pQ;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(A){return!0}};var r=function(A){return function(s,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],l=o[1],d=n.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&l(!!f.matches)};return f.addListener(w),l(f.matches),function(){h=!1,f.removeListener(w)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(gQ);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=gQ;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(fQ);const VK=GI(fQ),HK=({isOpen:t,onClose:e,item:n,onSave:r,onDelete:A})=>{const{subjects:s,teachers:i,classes:o,rooms:a}=Js(),[l,d]=R.useState({}),[h,f]=R.useState([]);R.useEffect(()=>{t&&(d(n||{}),f([]))},[t,n]);const w=(v,_,k)=>{const U=[],N=o.find(Q=>Q.id===v),C=s.find(Q=>Q.id===_),x=a.find(Q=>Q.id===k);if(!x&&k&&U.push(`  ID ${k}  .`),!N&&v&&U.push(`  ID ${v}  .`),!C&&_&&U.push(`  ID ${_}  .`),!x||!N||!C)return U;x.capacity<N.studentsCount&&U.push(`  !   ${N.studentsCount} .,     ${x.capacity}.`);const b=C.requiredRoomType==="undefined"?"":C.requiredRoomType;return b&&b!==""&&x.type!==b?U.push(`   !   "${b}",   "${x.type}".`):b===""&&x.type!==""&&U.push(`    .  "",   "${x.type}".`),U},m=(v,_)=>{const k={...l,[v]:_};d(k),k.classId&&k.subjectId&&k.roomId?f(w(k.classId,k.subjectId,k.roomId)):f([])},y=l.subjectId?i.filter(v=>v.subjectIds.includes(l.subjectId)):[],I=l.subjectId?i.filter(v=>!v.subjectIds.includes(l.subjectId)):i,B=(n==null?void 0:n.id)&&(n==null?void 0:n.classId);return t?c.jsxs(xs,{isOpen:t,onClose:e,title:B?" ":" ",children:[c.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-700/50 rounded-xl mb-6 text-sm text-center",children:[c.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:":"})," ",l.day,c.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 ml-4",children:" :"})," ",l.period,c.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 ml-4",children:" :"})," ",l.shift]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsxs("select",{value:l.classId||"",onChange:v=>m("classId",v.target.value),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",children:[c.jsx("option",{value:"",disabled:!0,children:" "}),o.map(v=>c.jsx("option",{value:v.id,children:`${v.name} (${v.shift===ae.First?"1 .":"2 ."})`},v.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsx(KC,{placeholder:" ",value:l.subjectId,onChange:v=>m("subjectId",v),options:s.map(v=>({value:v.id,label:v.name}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsx(KC,{placeholder:" ",value:l.teacherId,onChange:v=>m("teacherId",v),options:[{label:"",options:y.map(v=>({value:v.id,label:v.name}))},{label:"",options:I.map(v=>({value:v.id,label:v.name}))}],groupBy:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),c.jsx("input",{placeholder:": 1 .  ",value:l.direction||"",onChange:v=>m("direction",v.target.value),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsxs("select",{value:l.roomId||"",onChange:v=>m("roomId",v.target.value),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",children:[c.jsx("option",{value:"",children:" "}),a.map(v=>c.jsx("option",{value:v.id,children:`${v.name} (${v.type})`},v.id))]})]}),h.length>0&&c.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg space-y-1",children:h.map((v,_)=>c.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 font-medium",children:v},_))}),c.jsxs("div",{className:"flex justify-between items-center pt-4",children:[B?c.jsx("button",{onClick:()=>{window.confirm(" ?")&&A()},className:"px-5 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition",children:""}):c.jsx("div",{}),c.jsx("button",{onClick:()=>r(l),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})]}):null},mQ=({readOnly:t=!1})=>{const{subjects:e,teachers:n,classes:r,rooms:A}=Js(),{schedule:s,saveScheduleData:i,canUndo:o,canRedo:a,undo:l,redo:d,isReadOnly:h}=Fu(),f=t||h,[w,m]=R.useState(ae.First),[y,I]=R.useState(nr.Monday),[B,v]=R.useState(!1),[_,k]=R.useState(null),[U,N]=R.useState("class"),[C,x]=R.useState(""),[b,Q]=R.useState(""),[S,P]=R.useState(""),[T,Fe]=R.useState({visible:!1,x:0,y:0,item:null,cell:null}),[We,ee]=R.useState(null),[Te,G]=R.useState(null),[F,D]=R.useState(null),V=VK({maxWidth:767}),[q,W]=R.useState(!0),[ge,he]=R.useState(!1),[Ee,xe]=R.useState(nr.Monday),[$e,Tt]=R.useState(""),ke=vA[w],Le=()=>U==="week"?vA[w].map(H=>({id:H.toString(),name:`${H} `})):U==="class"?C?r.filter(H=>H.id===C&&H.shift===w):r.filter(H=>H.shift===w):U==="teacher"?C?n.filter(H=>H.id===C):n:U==="subject"?C?e.filter(H=>H.id===C):e:[],nt=(H,$)=>{let re=[];if(U==="week"){const we=parseInt(H),ve=$;re=s.filter(Ne=>Ne.shift===w&&Ne.period===we&&Ne.day===ve),C&&(re=re.filter(Ne=>Ne.classId===C))}else{const we=$;U==="class"&&(re=s.filter(ve=>ve.classId===H&&ve.period===we&&ve.day===y&&ve.shift===w)),U==="teacher"&&(re=s.filter(ve=>ve.teacherId===H&&ve.period===we&&ve.day===y&&ve.shift===w)),U==="subject"&&(re=s.filter(ve=>ve.subjectId===H&&ve.period===we&&ve.day===y&&ve.shift===w))}return b&&(re=re.filter(we=>{if(!we.roomId)return!1;const ve=A.find(qe=>qe.id===we.roomId);return(ve?ve.name:we.roomId).toLowerCase().includes(b.toLowerCase())})),S&&(re=re.filter(we=>{var ve;return(ve=we.direction)==null?void 0:ve.toLowerCase().includes(S.toLowerCase())})),re},Qe=H=>{const $=[],re=s.filter(Ne=>Ne.id!==H.id&&Ne.day===H.day&&Ne.period===H.period&&Ne.shift===H.shift);return re.find(Ne=>Ne.teacherId===H.teacherId)&&$.push("teacher"),re.find(Ne=>!(Ne.classId!==H.classId||Ne.direction&&H.direction&&Ne.direction!==H.direction))&&$.push("class"),H.roomId&&re.find(qe=>qe.roomId===H.roomId)&&$.push("room"),$},_e=H=>{f||(k(H),v(!0))},At=(H,$,re=y)=>{if(f)return;const we={period:$,day:re,shift:w,id:Math.random().toString(36).substr(2,9)};if(U==="class"&&(we.classId=H),U==="teacher"&&(we.teacherId=H),U==="subject"&&(we.subjectId=H),U==="week"&&(we.period=parseInt(H),we.day=re,C)){const ve=r.find(Ne=>Ne.id===C);ve&&(we.classId=ve.id)}k(we),v(!0)},Ht=async H=>{if(!H.subjectId||!H.teacherId||!H.classId)return;let $=[...s];const re=$.findIndex(we=>we.id===H.id);re>=0?$[re]=H:$.push(H),await i({schedule:$}),v(!1)},lt=async H=>{const $=H||(_==null?void 0:_.id);if(!$)return;const re=s.filter(we=>we.id!==$);await i({schedule:re}),v(!1)},Wt=(H,$,re)=>{f||(H.preventDefault(),H.stopPropagation(),Fe({visible:!0,x:H.clientX,y:H.clientY,item:$,cell:re}))},Xn=(H,$)=>{if(f)return;G($),H.dataTransfer.effectAllowed="move";const re=H.target;setTimeout(()=>re.classList.add("dragging"),0)},L=H=>{H.target.classList.remove("dragging"),G(null),D(null)},z=(H,$)=>{H.preventDefault(),!f&&D(`${$.rowId}-${$.colKey}`)},ne=async(H,$)=>{if(H.preventDefault(),!Te||f)return;const re={...Te};U==="week"?(re.period=parseInt($.rowId),re.day=$.colKey):(re.period=$.colKey,re.day=y,U==="class"&&(re.classId=$.rowId),U==="teacher"&&(re.teacherId=$.rowId),U==="subject"&&(re.subjectId=$.rowId));let we=s.map(ve=>ve.id===re.id?re:ve);await i({schedule:we}),G(null),D(null)},ue=[];T.item?ue.push({label:"",icon:"Copy",onClick:()=>ee(T.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>lt(T.item.id)}):T.cell&&(We&&ue.push({label:"",icon:"Clipboard",onClick:async()=>{const H={...We,id:Math.random().toString(36).substr(2,9),day:y,shift:w,period:T.cell.colKey};U==="week"&&(H.day=T.cell.colKey,H.period=parseInt(T.cell.rowId)),U==="class"?H.classId=T.cell.rowId:U==="teacher"?H.teacherId=T.cell.rowId:U==="subject"&&(H.subjectId=T.cell.rowId);let $=[...s,H];await i({schedule:$}),ee(null)}}),ue.push({label:" ",icon:"Plus",onClick:()=>At(T.cell.rowId,T.cell.colKey,U==="week"?T.cell.colKey:y)})),R.useMemo(()=>{var H,$,re;if(f&&C){if(U==="teacher")return(H=n.find(we=>we.id===C))==null?void 0:H.name;if(U==="class")return($=r.find(we=>we.id===C))==null?void 0:$.name;if(U==="subject")return(re=e.find(we=>we.id===C))==null?void 0:re.name}return""},[C,U,n,r,e,f]);const Be=Le(),be=U==="week"?Sn:ke,se=async()=>{window.confirm(" ,     ?   .")&&(await i({schedule:[]}),he(!1))},ce=async()=>{if(window.confirm(` ,       ${Ee}?`)){const H=s.filter($=>$.day!==Ee);await i({schedule:H}),he(!1)}},Ae=async()=>{var $;if(!$e)return;const H=($=r.find(re=>re.id===$e))==null?void 0:$.name;if(window.confirm(` ,        ${H}?`)){const re=s.filter(we=>we.classId!==$e);await i({schedule:re}),he(!1)}},Ce=(H,$,re)=>f&&H.length===0?null:c.jsxs("div",{className:"h-full flex flex-col gap-1",children:[H.map(we=>{const ve=e.find(Bt=>Bt.id===we.subjectId),Ne=n.find(Bt=>Bt.id===we.teacherId),qe=r.find(Bt=>Bt.id===we.classId),st=Qe(we),ft=A.find(Bt=>Bt.id===we.roomId),Cr=ft?ft.name:we.roomId;return c.jsxs("div",{draggable:!f,onDragStart:f?void 0:Bt=>Xn(Bt,we),onDragEnd:f?void 0:L,onClick:f?void 0:()=>_e(we),onContextMenu:f?void 0:Bt=>Wt(Bt,we,null),className:`rounded-lg p-2 text-xs shadow-sm ${f?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${st.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:st.length===0&&(ve!=null&&ve.color)?{backgroundColor:`${ve.color}40`}:{},children:[c.jsxs("div",{className:"flex justify-between items-center gap-1",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:U==="subject"||U==="week"?qe==null?void 0:qe.name:ve==null?void 0:ve.name}),we.direction&&c.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:we.direction})]}),U==="week"&&c.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:ve==null?void 0:ve.name}),c.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[c.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:Ne==null?void 0:Ne.name,children:[c.jsx(J,{name:U==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),c.jsx("span",{className:"truncate",children:U==="teacher"?qe==null?void 0:qe.name:Ne==null?void 0:Ne.name})]}),Cr&&c.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:ft?`: ${ft.capacity}, : ${ft.type}`:"",children:Cr})]}),st.length>0&&c.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${st.join(", ")}`,children:"!"})]},we.id)}),!f&&H.length<3&&c.jsx("button",{onClick:()=>At(re,$,U==="week"?$:y),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:c.jsx(J,{name:"Plus",size:16})})]}),Xe=()=>{if(!C)return c.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const H=s.filter($=>$.day===y&&$.shift===w&&(U==="class"&&$.classId===C||U==="teacher"&&$.teacherId===C||U==="subject"&&$.subjectId===C)).sort(($,re)=>$.period-re.period);return H.length===0?c.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",y,"  ",w,"."]}):c.jsx("div",{className:"p-4 space-y-4",children:H.map($=>{const re=e.find(ft=>ft.id===$.subjectId),we=n.find(ft=>ft.id===$.teacherId),ve=r.find(ft=>ft.id===$.classId),Ne=A.find(ft=>ft.id===$.roomId),qe=Ne?Ne.name:$.roomId,st=Qe($);return c.jsxs("div",{onClick:f?void 0:()=>_e($),className:`rounded-xl p-4 shadow-sm border ${st.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${f?"":"cursor-pointer"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[$.period," "]}),st.length>0&&c.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${st.join(", ")}`,children:"!"})]}),c.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[re==null?void 0:re.name," ",$.direction&&`(${$.direction})`]}),c.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ve==null?void 0:ve.name,"  ",we==null?void 0:we.name]}),qe&&c.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",qe]})]},$.id)})})};return c.jsxs("div",{className:"h-full flex flex-col",children:[T.visible&&c.jsx(kK,{x:T.x,y:T.y,onClose:()=>Fe({...T,visible:!1}),actions:ue}),c.jsx(HK,{isOpen:B,onClose:()=>v(!1),item:_,onSave:Ht,onDelete:lt}),c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[c.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[c.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>m(ae.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${w===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),c.jsx("button",{onClick:()=>m(ae.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${w===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),U!=="week"&&c.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Sn.map(H=>c.jsx("button",{onClick:()=>I(H),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${y===H?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:H},H))}),!f&&c.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[c.jsx("button",{onClick:l,disabled:!o,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:c.jsx(J,{name:"RotateCcw",size:18})}),c.jsx("button",{onClick:d,disabled:!a,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:c.jsx(J,{name:"RotateCw",size:18})})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[c.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>{N("class"),x("")},className:`p-2 rounded-md ${U==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:c.jsx(J,{name:"GraduationCap",size:18})}),c.jsx("button",{onClick:()=>{N("teacher"),x("")},className:`p-2 rounded-md ${U==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:c.jsx(J,{name:"Users",size:18})}),c.jsx("button",{onClick:()=>{N("subject"),x("")},className:`p-2 rounded-md ${U==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:c.jsx(J,{name:"BookOpen",size:18})}),c.jsx("button",{onClick:()=>{var H;N("week"),x(((H=r[0])==null?void 0:H.id)||"")},className:`p-2 rounded-md ${U==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:c.jsx(J,{name:"Calendar",size:18})})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[c.jsx(J,{name:"Filter",size:16,className:"text-slate-400"}),c.jsxs("select",{value:C,onChange:H=>x(H.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[c.jsxs("option",{value:"",children:[" ",U==="class"?"":U==="teacher"?"":U==="week"?" ()":""]}),(U==="class"||U==="week")&&r.filter(H=>H.shift===w).map(H=>c.jsx("option",{value:H.id,children:H.name},H.id)),U==="teacher"&&n.map(H=>c.jsx("option",{value:H.id,children:H.name},H.id)),U==="subject"&&e.map(H=>c.jsx("option",{value:H.id,children:H.name},H.id))]})]}),c.jsx("input",{placeholder:"...",value:b,onChange:H=>Q(H.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),c.jsx("input",{placeholder:"...",value:S,onChange:H=>P(H.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!f&&c.jsxs("button",{onClick:()=>he(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[c.jsx(J,{name:"List",size:16})," . ."]}),(C||U==="week")&&c.jsx("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:c.jsx(J,{name:"Printer",size:16})})]})]}),V&&!f&&C&&c.jsx("div",{className:"flex justify-center mb-4 no-print",children:c.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>W(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${q?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:c.jsx(J,{name:"Columns",size:16})}),c.jsx("button",{onClick:()=>W(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${q?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:c.jsx(J,{name:"Rows",size:16})})]})}),c.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300",children:c.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:V&&q&&!f&&C?Xe():c.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:U==="week"?"":U==="class"?"":U==="teacher"?"":""}),be.map(H=>c.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:U==="week"?H:`${H} `},H))]})}),c.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Be.length>0?Be.map(H=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:H.name}),be.map($=>{const re=nt(H.id,$),we=`${H.id}-${$}`;return c.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${F===we?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:f?void 0:ve=>Wt(ve,null,{rowId:H.id,colKey:$}),onDragOver:f?void 0:ve=>z(ve,{rowId:H.id,colKey:$}),onDrop:f?void 0:ve=>ne(ve,{rowId:H.id,colKey:$}),children:Ce(re,$,H.id)},$)})]},H.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),c.jsx(xs,{isOpen:ge,onClose:()=>he(!1),title:"   ",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 -mt-2",children:':       ""   .'}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"  "}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"     ( ,  ,  )."}),c.jsxs("button",{onClick:se,className:"w-full justify-center flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[c.jsx(J,{name:"Trash2",size:16}),"  "]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"   "}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"      ."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("select",{value:Ee,onChange:H=>xe(H.target.value),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",children:Sn.map(H=>c.jsx("option",{value:H,children:H},H))}),c.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-bold whitespace-nowrap",children:[" ",Ee]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"   "}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"     ."}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{value:$e,onChange:H=>Tt(H.target.value),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",children:[c.jsx("option",{value:"",children:" "}),r.map(H=>c.jsx("option",{value:H.id,children:H.name},H.id))]}),c.jsx("button",{onClick:Ae,disabled:!$e,className:"px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded-lg text-sm font-bold whitespace-nowrap disabled:opacity-50",children:"  "})]})]})]})})]})},jK=()=>{var Te,G;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,saveStaticData:s}=Js(),[i,o]=R.useState("teachers"),[a,l]=R.useState(!1),[d,h]=R.useState(null),[f,w]=R.useState({}),[m,y]=R.useState({}),[I,B]=R.useState({}),[v,_]=R.useState({}),[k,U]=R.useState("default"),[N,C]=R.useState(null),x=F=>{h(F||null),i==="teachers"?w(F?e.find(D=>D.id===F):{subjectIds:[],unavailableDates:[],shifts:[ae.First,ae.Second],telegramChatId:""}):i==="subjects"?y(F?t.find(D=>D.id===F):{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?B(F?n.find(D=>D.id===F):{shift:ae.First,studentsCount:25}):i==="rooms"&&_(F?r.find(D=>D.id===F):{capacity:30,type:""}),l(!0)},b=async()=>{const F=()=>Math.random().toString(36).substr(2,9);if(i==="teachers"){if(!f.name)return;let D=[...e];d?D=D.map(V=>V.id===d?{...V,...f}:V):D.push({...f,id:F(),unavailableDates:[]}),await s({teachers:D})}else if(i==="subjects"){if(!m.name)return;let D=[...t];d?D=D.map(V=>V.id===d?{...V,...m}:V):D.push({...m,id:F()}),await s({subjects:D})}else if(i==="classes"){if(!I.name)return;let D=[...n];d?D=D.map(V=>V.id===d?{...V,...I}:V):D.push({...I,id:F()}),await s({classes:D})}else if(i==="rooms"){if(!v.name)return;let D=[...r];d?D=D.map(V=>V.id===d?{...V,...v}:V):D.push({...v,id:F()}),await s({rooms:D})}l(!1)},Q=async F=>{window.confirm(" ?")&&(i==="teachers"&&await s({teachers:e.filter(D=>D.id!==F)}),i==="subjects"&&await s({subjects:t.filter(D=>D.id!==F)}),i==="classes"&&await s({classes:n.filter(D=>D.id!==F)}),i==="rooms"&&await s({rooms:r.filter(D=>D.id!==F)}))},S=(F,D)=>{C(D),F.dataTransfer.effectAllowed="move"},P=F=>{F.preventDefault()},T=async(F,D)=>{if(N===null||N===D)return;let V=[];i==="teachers"?V=[...e]:i==="subjects"?V=[...t]:i==="classes"?V=[...n]:V=[...r];const q=V.splice(N,1)[0];V.splice(D,0,q),i==="teachers"?await s({teachers:V}):i==="subjects"?await s({subjects:V}):i==="classes"?await s({classes:V}):await s({rooms:V}),C(null)},Fe=(F,D)=>{const V=k;let q=A.find(W=>W.shift===F&&W.period===D&&W.day===V);if(!q&&V!=="default"){const W=A.find(ge=>ge.shift===F&&ge.period===D&&ge.day==="default");return W?{...W,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return q||{start:"",end:""}},We=async(F,D,V,q)=>{let W=[...A];const ge=k,he=W.findIndex(Ee=>Ee.shift===F&&Ee.period===D&&Ee.day===ge);he>=0?W[he]={...W[he],[V]:q}:W.push({shift:F,period:D,[V]:q,start:"00:00",end:"00:00",day:ge}),await s({bellSchedule:W})},ee=F=>{const D=f.shifts||[];D.includes(F)?w({...f,shifts:D.filter(V=>V!==F)}):w({...f,shifts:[...D,F]})};return c.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[c.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(F=>c.jsxs("button",{onClick:()=>o(F.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===F.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[c.jsx(J,{name:F.icon,size:18})," ",F.label]},F.id))}),i!=="bells"&&c.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[c.jsx(J,{name:"Plus",size:20})," "]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&c.jsx(md,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((F,D)=>{var V,q;return c.jsxs("div",{draggable:!0,onDragStart:W=>S(W,D),onDragOver:P,onDrop:W=>T(W,D),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),c.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:F.name})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>x(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:c.jsx(J,{name:"Edit2",size:16})}),c.jsx("button",{onClick:()=>Q(F.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:c.jsx(J,{name:"Trash2",size:16})})]})]}),c.jsx("div",{className:"text-xs text-slate-500 mb-2",children:F.birthDate?`: ${new Date(F.birthDate).toLocaleDateString("ru-RU")}`:""}),c.jsxs("div",{className:"flex gap-2 mb-3",children:[((V=F.shifts)==null?void 0:V.includes(ae.First))&&c.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),((q=F.shifts)==null?void 0:q.includes(ae.Second))&&c.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:F.subjectIds.map(W=>{const ge=t.find(he=>he.id===W);return ge?c.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:ge.color,color:"#334155"},children:ge.name},W):null})})]},F.id)})}),i==="subjects"&&c.jsx(md,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((F,D)=>c.jsxs("div",{draggable:!0,onDragStart:V=>S(V,D),onDragOver:P,onDrop:V=>T(V,D),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:F.color},children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),c.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.difficulty,"  ",F.requiredRoomType]})]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:c.jsx(J,{name:"Edit2",size:16})}),c.jsx("button",{onClick:()=>Q(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:c.jsx(J,{name:"Trash2",size:16})})]})]},F.id))}),i==="classes"&&c.jsx(md,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((F,D)=>c.jsxs("div",{draggable:!0,onDragStart:V=>S(V,D),onDragOver:P,onDrop:V=>T(V,D),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[c.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:c.jsx(J,{name:"GripVertical",size:14})}),c.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:F.name}),c.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[F.studentsCount||0," "]}),c.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${F.shift===ae.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[F.shift===ae.First?"I":"II"," "]}),c.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>x(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:c.jsx(J,{name:"Edit2",size:14})}),c.jsx("button",{onClick:()=>Q(F.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:c.jsx(J,{name:"Trash2",size:14})})]})]},F.id))}),i==="rooms"&&c.jsx(md,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((F,D)=>c.jsxs("div",{draggable:!0,onDragStart:V=>S(V,D),onDragOver:P,onDrop:V=>T(V,D),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),c.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:c.jsx(J,{name:"DoorOpen",size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:F.name}),c.jsxs("div",{className:"text-xs text-slate-400",children:[": ",F.capacity,"  ",F.type]})]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>x(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:c.jsx(J,{name:"Edit2",size:16})}),c.jsx("button",{onClick:()=>Q(F.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:c.jsx(J,{name:"Trash2",size:16})})]})]},F.id))}),i==="bells"&&c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(F=>c.jsx("button",{onClick:()=>U(F),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${k===F?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:F==="default"?"":F===""?"":""},F))})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ae.First,ae.Second].map(F=>c.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[c.jsx("div",{className:`p-4 font-bold text-lg text-white ${F===ae.First?"bg-indigo-600":"bg-purple-600"}`,children:F}),c.jsx("div",{className:"p-6 space-y-3",children:vA[F].map(D=>{const V=Fe(F,D);return c.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${V.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[c.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:D}),c.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[c.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:V.start,onChange:q=>We(F,D,"start",q.target.value)}),c.jsx("span",{className:"text-slate-300",children:""}),c.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:V.end,onChange:q=>We(F,D,"end",q.target.value)})]})]},D)})})]},F))})]})]}),c.jsx(xs,{isOpen:a,onClose:()=>l(!1),title:"",children:c.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:F=>w({...f,name:F.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),c.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:F=>w({...f,birthDate:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),c.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:F=>w({...f,telegramChatId:F.target.value}),placeholder:"12345678"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Te=f.shifts)==null?void 0:Te.includes(ae.First),onChange:()=>ee(ae.First)}),c.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(G=f.shifts)==null?void 0:G.includes(ae.Second),onChange:()=>ee(ae.Second)}),c.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),c.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),c.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(F=>{var D;return c.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(D=f.subjectIds)==null?void 0:D.includes(F.id),onChange:V=>{const q=f.subjectIds||[];w({...f,subjectIds:V.target.checked?[...q,F.id]:q.filter(W=>W!==F.id)})}}),c.jsx("span",{className:"text-sm dark:text-slate-300",children:F.name})]},F.id)})})]}),i==="subjects"&&c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:m.name||"",onChange:F=>y({...m,name:F.target.value})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),c.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:m.color||"#ffffff",onChange:F=>y({...m,color:F.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),c.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.difficulty||5,onChange:F=>y({...m,difficulty:parseInt(F.target.value)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),c.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.requiredRoomType,onChange:F=>y({...m,requiredRoomType:F.target.value}),children:jC.map(F=>c.jsx("option",{value:F,children:F},F))})]})]}),i==="classes"&&c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:I.name||"",onChange:F=>B({...I,name:F.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),c.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:I.studentsCount||25,onChange:F=>B({...I,studentsCount:parseInt(F.target.value)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("button",{onClick:()=>B({...I,shift:ae.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===ae.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),c.jsx("button",{onClick:()=>B({...I,shift:ae.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${I.shift===ae.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:v.name||"",onChange:F=>_({...v,name:F.target.value})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),c.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.capacity||30,onChange:F=>_({...v,capacity:parseInt(F.target.value)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),c.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.type,onChange:F=>_({...v,type:F.target.value}),children:jC.map(F=>c.jsx("option",{value:F,children:F},F))})]})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{onClick:b,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},KK=()=>{const{data:t,saveData:e}=hQ(),{subjects:n,teachers:r,classes:A,rooms:s,settings:i,schedule:o,substitutions:a}=t,l=Hs(),[d,h]=R.useState(new Date().toISOString().split("T")[0]),[f,w]=R.useState(!1),[m,y]=R.useState(null),[I,B]=R.useState(!1),[v,_]=R.useState(!1),[k,U]=R.useState(null),[N,C]=R.useState(""),[x,b]=R.useState(!1),[Q,S]=R.useState(""),[P,T]=R.useState(""),[Fe,We]=R.useState("all"),[ee,Te]=R.useState(""),[G,F]=R.useState(""),[D,V]=R.useState(""),[q,W]=R.useState("");R.useEffect(()=>{var L;(L=l.state)!=null&&L.subParams&&(y(l.state.subParams),V(""),W(""),w(!0),window.history.replaceState({},document.title))},[l.state]);const ge=R.useMemo(()=>{const L=new Date(d).getDay();return L===0||L===6?null:Sn[L-1]},[d]),he=R.useMemo(()=>r.filter(L=>{const z=L.name.toLowerCase().includes(P.toLowerCase()),ne=Fe==="all"?!0:L.shifts.includes(Fe);return z&&ne}),[r,P,Fe]),Ee=R.useMemo(()=>r.filter(L=>L.unavailableDates.includes(d)),[r,d]),xe=R.useMemo(()=>{if(!ge)return[];const L=Ee.map(se=>se.id),z=o.filter(se=>se.day===ge&&L.includes(se.teacherId)),ue=a.filter(se=>se.date===d).map(se=>se.scheduleItemId),Be=o.filter(se=>ue.includes(se.id)),be=[...z];return Be.forEach(se=>{be.find(ce=>ce.id===se.id)||be.push(se)}),be.sort((se,ce)=>se.period-ce.period)},[o,ge,Ee,a,d]),$e=L=>{var ne;const z=r.find(ue=>ue.id===L);U(L),C(((ne=z==null?void 0:z.absenceReasons)==null?void 0:ne[d])||""),B(!0)},Tt=R.useCallback(async()=>{let L=[...r];const z=L.findIndex(ue=>ue.id===k);if(z===-1)return;const ne={...L[z]};ne.unavailableDates.includes(d)||(ne.unavailableDates=[...ne.unavailableDates,d]),ne.absenceReasons={...ne.absenceReasons||{},[d]:N},L[z]=ne,await e({teachers:L}),B(!1)},[r,k,d,N,e]),ke=R.useCallback(async L=>{let z=[...r];const ne=z.findIndex(Be=>Be.id===L);if(ne===-1)return;const ue={...z[ne]};if(ue.unavailableDates=ue.unavailableDates.filter(Be=>Be!==d),ue.absenceReasons){const Be={...ue.absenceReasons};delete Be[d],ue.absenceReasons=Be}z[ne]=ue,await e({teachers:z})},[r,d,e]),Le=async L=>{var se,ce;if(!m){alert(":   .    . ,   ."),console.error("assignSubstitution: currentSubParams is null, returning.");return}const z=[...a],ne=o.find(Ae=>Ae.id===m.scheduleItemId);if(!ne){alert(":     . ,   ."),console.error("assignSubstitution: Schedule item not found for ID:",m.scheduleItemId);return}const ue=((ce=(se=r.find(Ae=>Ae.id===ne.teacherId))==null?void 0:se.unavailableDates)==null?void 0:ce.includes(d))||!1,Be=z.findIndex(Ae=>Ae.scheduleItemId===m.scheduleItemId&&Ae.date===d),be={id:Be>=0?z[Be].id:Math.random().toString(36).substr(2,9),date:d,scheduleItemId:m.scheduleItemId,originalTeacherId:ne.teacherId,replacementTeacherId:L,replacementRoomId:D||null,lessonAbsenceReason:L!=="conducted"&&L!=="cancelled"&&!ue&&q?q:null};Be>=0?z[Be]=be:z.push(be),await e({substitutions:z}),w(!1),Te(""),V(""),W(""),y(null)},nt=R.useCallback(async L=>{const z=a.filter(ne=>!(ne.scheduleItemId===L&&ne.date===d));await e({substitutions:z})},[a,d,e]),Qe=R.useCallback(()=>{let L=`*  ${new Date(d).toLocaleDateString("ru-RU")}*
`;const z=a.some(ue=>ue.date===d&&ue.replacementTeacherId!=="conducted"),ne=(ue,Be)=>{const se=xe.filter(ce=>ce.shift===Be).filter(ce=>{const Ae=a.find(Ce=>Ce.scheduleItemId===ce.id&&Ce.date===d);return Ae&&Ae.replacementTeacherId!=="conducted"});se.length>0&&(L+=`
 *${ue.toUpperCase()}*
`,se.forEach(ce=>{var Cr,Bt,iA;const Ae=a.find(Oe=>Oe.scheduleItemId===ce.id&&Oe.date===d),Ce=A.find(Oe=>Oe.id===ce.classId),Xe=n.find(Oe=>Oe.id===ce.subjectId),H=Ae?r.find(Oe=>Oe.id===Ae.replacementTeacherId):null,$=r.find(Oe=>Oe.id===ce.teacherId),re=((Cr=s.find(Oe=>Oe.id===ce.roomId))==null?void 0:Cr.name)||ce.roomId||"?",we=(Bt=$==null?void 0:$.absenceReasons)==null?void 0:Bt[d],ve=Ae==null?void 0:Ae.lessonAbsenceReason,Ne=$!=null&&$.unavailableDates.includes(d)&&we===" "?" ":null,qe=ve||Ne,st=($==null?void 0:$.name)+(qe?` (${qe})`:""),ft=Ae!=null&&Ae.replacementRoomId?((iA=s.find(Oe=>Oe.id===Ae.replacementRoomId))==null?void 0:iA.name)||Ae.replacementRoomId:null;if(Ae)if(Ae.replacementTeacherId==="cancelled")L+=` ${Ce==null?void 0:Ce.name} (${ce.period} ): ${Xe==null?void 0:Xe.name} (${st}) ->  
`;else if(Ae.replacementTeacherId===Ae.originalTeacherId&&ft)L+=` ${Ce==null?void 0:Ce.name} (${ce.period} ): ${Xe==null?void 0:Xe.name} (${$==null?void 0:$.name}) ->  ${re}  ${ft}
`;else{let Oe=` ${Ce==null?void 0:Ce.name} (${ce.period} ): ${Xe==null?void 0:Xe.name} -> ${H==null?void 0:H.name} ( ${st})`;ft&&(Oe+=`  . ${ft}`),L+=Oe+`
`}}))};z?(ne(ae.First,ae.First),ne(ae.Second,ae.Second)):L+=`
 .`,navigator.clipboard.writeText(L),alert("     !")},[d,a,xe,A,n,r,s]),_e=R.useCallback(()=>{let L=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;a.filter(be=>be.date===d).forEach(be=>{var Ne;const se=o.find(qe=>qe.id===be.scheduleItemId);if(!se)return;let ce="Unknown";if(be.replacementTeacherId==="cancelled")ce=" ";else if(be.replacementTeacherId==="conducted")ce=" ";else{const qe=r.find(st=>st.id===be.replacementTeacherId);qe&&(ce=qe.name)}const Ae=n.find(qe=>qe.id===se.subjectId),Ce=A.find(qe=>qe.id===se.classId),Xe=be.date.replace(/-/g,""),H=r.find(qe=>qe.id===be.originalTeacherId),$=(Ne=H==null?void 0:H.absenceReasons)==null?void 0:Ne[d],re=be.lessonAbsenceReason,we=H!=null&&H.unavailableDates.includes(d)&&$===" "?" ":null,ve=re||we;L+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Xe}
SUMMARY:: ${Ce==null?void 0:Ce.name} - ${Ae==null?void 0:Ae.name}
DESCRIPTION:: ${ce}${ve?` (: ${ve})`:""}
END:VEVENT
`}),L+="END:VCALENDAR";const ne=new Blob([L],{type:"text/calendar"}),ue=URL.createObjectURL(ne),Be=document.createElement("a");Be.href=ue,Be.download="substitutions.ics",document.body.appendChild(Be),Be.click(),document.body.removeChild(Be)},[d,a,o,r,n,A]),At=R.useCallback(async()=>{if(!(i!=null&&i.telegramToken)){alert(" Telegram      ''.");return}let L=`*  ${new Date(d).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,z=!1;const ne=new Set,ue=[ae.First,ae.Second];for(const be of ue){const ce=xe.filter(Ae=>Ae.shift===be).filter(Ae=>a.some(Ce=>Ce.scheduleItemId===Ae.id&&Ce.date===d&&Ce.replacementTeacherId!=="conducted"));ce.length>0&&(z=!0,L+=` *${be.toUpperCase()}*
`,ce.forEach(Ae=>{var ft,Cr,Bt,iA;const Ce=a.find(Oe=>Oe.scheduleItemId===Ae.id&&Oe.date===d);if(!Ce)return;const Xe=A.find(Oe=>Oe.id===Ae.classId),H=n.find(Oe=>Oe.id===Ae.subjectId),$=r.find(Oe=>Oe.id===Ce.originalTeacherId),re=r.find(Oe=>Oe.id===Ce.replacementTeacherId),we=((ft=s.find(Oe=>Oe.id===Ae.roomId))==null?void 0:ft.name)||Ae.roomId||"",ve=Ce.replacementRoomId?((Cr=s.find(Oe=>Oe.id===Ce.replacementRoomId))==null?void 0:Cr.name)||Ce.replacementRoomId:we,Ne=($==null?void 0:$.name)||"/",qe=(re==null?void 0:re.name)||"/";let st=`${Ae.period}  (${Xe==null?void 0:Xe.name} ${H==null?void 0:H.name}${Ae.direction?` ${Ae.direction}`:""}): `;Ce.replacementTeacherId==="cancelled"?st+=`* * ( ${Ne})`:Ce.replacementTeacherId===Ce.originalTeacherId?st+=`: ${Ne}.  : ${we}  ${ve}`:(st+=`*${qe}* ( *${Ne}*)`,we!==ve?st+=`. : ${we}  ${ve}`:ve!==""&&(st+=`. : ${ve}`)),Ce.lessonAbsenceReason?st+=` (: ${Ce.lessonAbsenceReason})`:(Bt=$==null?void 0:$.unavailableDates)!=null&&Bt.includes(d)&&((iA=$==null?void 0:$.absenceReasons)==null?void 0:iA[d])===" "&&(st+=" (:  )"),L+=`${st}
`,$!=null&&$.telegramChatId&&ne.add($.telegramChatId),re!=null&&re.telegramChatId&&ne.add(re.telegramChatId)}),L+=`
`)}if(z||(L+=` .
`),Ee.forEach(be=>{var ce;const se=a.some(Ae=>Ae.date===d&&Ae.originalTeacherId===be.id&&Ae.replacementTeacherId!=="cancelled"&&Ae.replacementTeacherId!=="conducted");if(be.telegramChatId&&!se&&be.unavailableDates.includes(d)){ne.add(be.telegramChatId);const Ae=(ce=be.absenceReasons)==null?void 0:ce[d],Ce=Ae===" "?Ae:"";z?L+=`_:  ${be.name} ${Ce},        /._
`:L+=`_:  ${be.name} ${Ce},      ._
`}}),ne.size===0){alert("    Telegram Chat ID   .");return}const Be=`https://api.telegram.org/bot${i.telegramToken}/sendMessage`;try{const be=Array.from(ne).map(se=>fetch(Be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:se,text:L,parse_mode:"Markdown"})}));await Promise.all(be),alert(`   ${ne.size} !`)}catch(be){console.error("    Telegram:",be),alert("     Telegram.     .")}},[d,xe,a,A,n,r,s,Ee,i==null?void 0:i.telegramToken,o]),Ht=R.useMemo(()=>{if(!m||!ge)return[];const L=d.substring(0,7);return r.filter(z=>z.name.toLowerCase().includes(ee.toLowerCase())).map(z=>{const ne=z.unavailableDates.includes(d),ue=o.some(ce=>ce.teacherId===z.id&&ce.day===ge&&ce.period===m.period&&ce.shift===m.shift),Be=z.subjectIds.includes(m.subjectId),be=a.filter(ce=>ce.replacementTeacherId===z.id&&ce.date.startsWith(L)).length;let se=0;return ne&&(se-=1e3),ue&&(se-=100),Be&&(se+=50),{teacher:z,isAbsent:ne,isBusy:ue,isSpecialist:Be,score:se,subsCount:be}}).sort((z,ne)=>ne.score-z.score)},[r,m,d,ee,ge,o,a]),lt=R.useMemo(()=>{var be;if(!m)return null;const L=o.find(se=>se.id===m.scheduleItemId);if(!L)return null;const z=A.find(se=>se.id===L.classId),ne=n.find(se=>se.id===L.subjectId),ue=r.find(se=>se.id===L.teacherId),Be=((be=ue==null?void 0:ue.unavailableDates)==null?void 0:be.includes(d))||!1;return{className:z==null?void 0:z.name,subjectName:ne==null?void 0:ne.name,teacherName:ue==null?void 0:ue.name,teacherId:ue==null?void 0:ue.id,period:L.period,roomId:L.roomId,isTeacherAbsent:Be}},[m,o,A,n,r,d]),Wt=R.useMemo(()=>{if(!ge||G.length<2)return[];const L=G.toLowerCase(),z=r.filter(Be=>Be.name.toLowerCase().includes(L)),ne=A.filter(Be=>Be.name.toLowerCase().includes(L)),ue=[];return z.forEach(Be=>{o.filter(se=>se.teacherId===Be.id&&se.day===ge).forEach(se=>{const ce=A.find(Ce=>Ce.id===se.classId),Ae=n.find(Ce=>Ce.id===se.subjectId);ue.push({...se,entityName:Be.name,subInfo:ce==null?void 0:ce.name,subjectName:Ae==null?void 0:Ae.name})})}),ne.forEach(Be=>{o.filter(se=>se.classId===Be.id&&se.day===ge).forEach(se=>{if(ue.find(Ce=>Ce.id===se.id))return;const ce=r.find(Ce=>Ce.id===se.teacherId),Ae=n.find(Ce=>Ce.id===se.subjectId);ue.push({...se,entityName:Be.name,subInfo:ce==null?void 0:ce.name,subjectName:Ae==null?void 0:Ae.name})})}),ue.sort((Be,be)=>Be.period-be.period)},[G,ge,r,A,o,n]),Xn=R.useCallback(async(L,z,ne,ue,Be,be)=>{const ce=new Date(be).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Ae=z.shift===ae.First?"1 ":"2 ",Ce=` *  *
${L.name}

 : ${ce}
 : ${Ae}
 : ${ne==null?void 0:ne.name}
1 : ${z.period}
 : ${ue==null?void 0:ue.name}
 : ${Be||" "}`;if(i!=null&&i.telegramToken&&L.telegramChatId)try{const H=await(await fetch(`https://api.telegram.org/bot${i.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:L.telegramChatId,text:Ce,parse_mode:"Markdown"})})).json();H.ok?alert(`   Telegram  ${L.name}!`):H.description.includes("chat not found")?alert(` Telegram:   .

  ${L.name}       "" (/start).`):alert(` Telegram: ${H.description}`)}catch(Xe){alert("   Telegram (/)."),console.error(Xe)}else navigator.share?navigator.share({title:"",text:Ce}).catch(()=>{}):(navigator.clipboard.writeText(Ce),alert(" ! (Telegram     Chat ID)"))},[i==null?void 0:i.telegramToken]);return c.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[c.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),c.jsxs("div",{className:"relative",children:[c.jsx(J,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{type:"date",value:d,onChange:L=>h(L.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),c.jsxs("button",{onClick:()=>b(!x),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${x?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[c.jsx(J,{name:"History",size:16})," ",x?" ":" "]})]}),x?c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),c.jsx("input",{placeholder:"  /...",value:Q,onChange:L=>S(L.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:a.filter(L=>{var z;return L.date.includes(Q)||((z=r.find(ne=>ne.id===L.replacementTeacherId))==null?void 0:z.name.toLowerCase().includes(Q.toLowerCase()))}).map(L=>{const z=r.find(ue=>ue.id===L.replacementTeacherId),ne=s.find(ue=>ue.id===L.replacementRoomId);return c.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[c.jsx("div",{className:"font-bold",children:L.date}),c.jsx("div",{children:(z==null?void 0:z.name)||(L.replacementTeacherId==="cancelled"?"":"")}),ne&&c.jsxs("div",{className:"text-indigo-500",children:[". ",ne.name]})]},L.id)})})]}):c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[c.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[c.jsx(J,{name:"UserX",size:18,className:"text-red-500"})," "]}),c.jsxs("div",{className:"mb-3 space-y-2",children:[c.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>We("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Fe==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),c.jsx("button",{onClick:()=>We(ae.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Fe===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),c.jsx("button",{onClick:()=>We(ae.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Fe===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),c.jsxs("div",{className:"relative",children:[c.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),c.jsx("input",{placeholder:" ...",value:P,onChange:L=>T(L.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[he.map(L=>{const z=L.unavailableDates.includes(d),ne=L.absenceReasons?L.absenceReasons[d]:"";return c.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${z?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:`text-sm font-medium ${z?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:L.name}),c.jsx("button",{onClick:()=>z?ke(L.id):$e(L.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${z?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:z?"":""})]}),c.jsxs("div",{className:"flex justify-between items-end",children:[c.jsx("div",{className:"flex gap-1",children:L.shifts.map(ue=>c.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:ue===ae.First?"1":"2"},ue))}),z&&c.jsxs("div",{className:"flex items-center gap-1",children:[ne&&c.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:ne}),c.jsx("button",{onClick:()=>$e(L.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:c.jsx(J,{name:"Edit2",size:14})})]})]})]},L.id)}),he.length===0&&c.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),c.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",xe.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:_e,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[c.jsx(J,{name:"Calendar",size:16})," iCal"]}),xe.length>0&&c.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[c.jsx(J,{name:"Copy",size:16})," "]}),c.jsxs("button",{onClick:At,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[c.jsx(J,{name:"Send",size:16})," Telegram"]}),c.jsxs("button",{onClick:()=>{F(""),_(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[c.jsx(J,{name:"Search",size:16}),"  "]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:xe.length===0?c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[c.jsx(J,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),c.jsx("p",{children:" ,     "})]}):xe.map(L=>{var $;const z=a.find(re=>re.scheduleItemId===L.id&&re.date===d),ne=z&&z.replacementTeacherId!=="cancelled"&&z.replacementTeacherId!=="conducted"?r.find(re=>re.id===z.replacementTeacherId):null,ue=r.find(re=>re.id===L.teacherId),Be=n.find(re=>re.id===L.subjectId),be=A.find(re=>re.id===L.classId),se=s.find(re=>re.id===L.roomId),ce=se?se.name:L.roomId,Ae=z==null?void 0:z.replacementRoomId,Ce=Ae?(($=s.find(re=>re.id===Ae))==null?void 0:$.name)||Ae:null;let Xe=null;if((z==null?void 0:z.replacementTeacherId)==="conducted")Xe=c.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[c.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),c.jsx("button",{onClick:()=>nt(L.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:c.jsx(J,{name:"X",size:16})})]});else if((z==null?void 0:z.replacementTeacherId)==="cancelled")Xe=c.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[c.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),c.jsx("button",{onClick:()=>nt(L.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:c.jsx(J,{name:"X",size:16})})]});else if(ne||Ae){const re=(z==null?void 0:z.replacementTeacherId)===(z==null?void 0:z.originalTeacherId)&&Ae;Xe=c.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:re?" ":" "}),c.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:re?"  ":ne==null?void 0:ne.name}),z.lessonAbsenceReason&&c.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",z.lessonAbsenceReason]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>Xn(ne||ue,L,be,Be,Ce||ce,d),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:c.jsx(J,{name:"Send",size:18})}),c.jsx("button",{onClick:()=>nt(L.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:c.jsx(J,{name:"UserX",size:18})})]})]})}else Xe=c.jsxs("button",{onClick:()=>{y({scheduleItemId:L.id,subjectId:L.subjectId,period:L.period,shift:L.shift,classId:L.classId,teacherId:L.teacherId,roomId:L.roomId,day:L.day}),w(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",c.jsx(J,{name:"ArrowRight",size:16})]});const H=!Ee.find(re=>re.id===L.teacherId);return c.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),c.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:L.period})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:be==null?void 0:be.name}),c.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:L.shift===ae.First?"1":"2"}),c.jsx("span",{className:"text-slate-400",children:"|"}),c.jsx("span",{children:Be==null?void 0:Be.name})]})]}),c.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[c.jsx("span",{className:H?"font-semibold":"line-through decoration-red-400 decoration-2",children:ue==null?void 0:ue.name}),ce&&c.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[ce," ",Ce&&c.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",Ce]})]}),(z==null?void 0:z.lessonAbsenceReason)&&c.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",z.lessonAbsenceReason,")"]})]})]})]}),Xe]},L.id)})})]}),c.jsxs(xs,{isOpen:f,onClose:()=>w(!1),title:" ",children:[lt&&c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[lt.className,"  ",lt.period," "]}),c.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[c.jsx("span",{children:lt.subjectName}),c.jsx("span",{className:lt.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:lt.teacherName})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),c.jsxs("select",{value:D,onChange:L=>V(L.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[c.jsx("option",{value:"",children:"  "}),s.map(L=>c.jsxs("option",{value:L.id,children:[L.name," (",L.capacity," )"]},L.id))]})]}),lt&&!lt.isTeacherAbsent&&c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),c.jsxs("select",{value:q,onChange:L=>W(L.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[c.jsx("option",{value:"",children:" "}),c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:" "}),c.jsx("option",{children:""}),c.jsx("option",{children:" "})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[c.jsx("button",{onClick:()=>Le("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),c.jsx("button",{onClick:()=>Le("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(lt==null?void 0:lt.teacherId)&&!lt.isTeacherAbsent&&c.jsx("button",{onClick:()=>Le(lt.teacherId),className:"w-full p-3 mb-4 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),c.jsx("input",{autoFocus:!0,placeholder:"  ...",value:ee,onChange:L=>Te(L.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),c.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[Ht.map(({teacher:L,isAbsent:z,isBusy:ne,isSpecialist:ue,subsCount:Be})=>c.jsxs("button",{disabled:z||ne,onClick:()=>Le(L.id),title:z?" ":ne?" ":"",className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${z?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":ne?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 opacity-60":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${ue?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:ue?c.jsx(J,{name:"Star",size:14,fill:"currentColor"}):L.name[0]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:L.name}),c.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[ue&&c.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),ne&&c.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded",children:""}),z&&c.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),c.jsxs("span",{className:`px-1.5 rounded font-medium ${Be>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Be]})]})]})]}),!z&&!ne&&c.jsx("div",{className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""})]},L.id)),Ht.length===0&&c.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),c.jsxs(xs,{isOpen:v,onClose:()=>_(!1),title:"  ",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),c.jsxs("div",{className:"relative",children:[c.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),c.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:G,onChange:L=>F(L.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),c.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[Wt.map(L=>{var z;return c.jsxs("button",{onClick:()=>{_(!1),y({scheduleItemId:L.id,subjectId:L.subjectId,period:L.period,shift:L.shift,classId:L.classId,teacherId:L.teacherId,roomId:L.roomId,day:L.day}),w(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[L.entityName," ",c.jsxs("span",{className:"font-normal text-slate-500",children:["(",L.subInfo,")"]})]}),c.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[L.period," "]})]}),c.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[c.jsx("span",{children:L.subjectName}),L.roomId&&c.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((z=s.find(ne=>ne.id===L.roomId))==null?void 0:z.name)||L.roomId]})]})]},L.id)}),G.length>1&&Wt.length===0&&c.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",d,")"]})]})]}),c.jsx(xs,{isOpen:I,onClose:()=>B(!1),title:" ",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("select",{value:N,onChange:L=>C(L.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:""}),c.jsx("option",{children:" "}),c.jsx("option",{children:""}),c.jsx("option",{children:" "})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:Tt,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},GK=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:A}=Js(),{schedule:s}=Fu(),[i,o]=R.useState("teachers"),[a,l]=R.useState(new Date().toISOString().split("T")[0]),[d,h]=R.useState(ae.First),[f,w]=R.useState(1),[m,y]=R.useState(ae.First),[I,B]=R.useState(1),[v,_]=R.useState((r==null?void 0:r.telegramToken)||""),[k,U]=R.useState((r==null?void 0:r.feedbackChatId)||"");R.useEffect(()=>{_((r==null?void 0:r.telegramToken)||""),U((r==null?void 0:r.feedbackChatId)||"")},[r]),R.useEffect(()=>{w(d===ae.First?1:0)},[d]),R.useEffect(()=>{B(m===ae.First?1:0)},[m]);const N=R.useMemo(()=>{const S=new Date(a).getDay();return S===0||S===6?null:Sn[S-1]},[a]),C=vA[d],x=R.useMemo(()=>N?e.filter(S=>S.shifts&&!S.shifts.includes(d)||S.unavailableDates.includes(a)?!1:!s.some(T=>T.teacherId===S.id&&T.day===N&&T.period>f&&T.shift===d)).sort((S,P)=>S.name.localeCompare(P.name)):[],[e,a,N,f,d,s]),b=R.useMemo(()=>{if(!N)return[];const S=new Set;return s.forEach(T=>{T.day===N&&T.period===I&&T.shift===m&&T.roomId&&S.add(T.roomId)}),n.filter(T=>!S.has(T.id)).map(T=>T.name)},[s,n,N,I,m]),Q=async()=>{await A({settings:{...r,telegramToken:v,feedbackChatId:k}}),alert(" !")};return c.jsxs("div",{className:"max-w-5xl mx-auto w-full",children:[c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[c.jsx(J,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),c.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),c.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),i!=="settings"&&c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsx("input",{type:"date",value:a,onChange:S=>l(S.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto"})]}),i==="teachers"&&c.jsxs("div",{className:"flex flex-wrap gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>h(ae.First),className:`px-3 py-2 rounded-lg text-sm font-bold transition-all ${d===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),c.jsx("button",{onClick:()=>h(ae.Second),className:`px-3 py-2 rounded-lg text-sm font-bold transition-all ${d===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"   "}),c.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit",children:C.map(S=>c.jsx("button",{onClick:()=>w(S),className:`w-10 h-10 rounded-lg font-bold text-sm transition-all ${f===S?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:S},S))})]})]}),i==="rooms"&&c.jsxs("div",{className:"flex flex-wrap gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[c.jsx("button",{onClick:()=>y(ae.First),className:`px-3 py-2 rounded-lg text-sm font-bold transition-all ${m===ae.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),c.jsx("button",{onClick:()=>y(ae.Second),className:`px-3 py-2 rounded-lg text-sm font-bold transition-all ${m===ae.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" "}),c.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit",children:vA[m].map(S=>c.jsx("button",{onClick:()=>B(S),className:`w-10 h-10 rounded-lg font-bold text-sm transition-all ${I===S?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:S},S))})]})]}),i==="settings"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"Telegram Bot Token"}),c.jsx("input",{type:"password",value:v,onChange:S=>_(S.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none dark:bg-slate-700 dark:text-white",placeholder:"123456789:ABCDefGhIjkLmNoPqRsTuVwXyZ"}),c.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["   @BotFather.        ",c.jsx("b",{children:"/start"}),",   ."]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"Telegram Chat ID   "}),c.jsx("input",{type:"text",value:k,onChange:S=>U(S.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none dark:bg-slate-700 dark:text-white",placeholder:"  Chat ID  ID "}),c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"            ."})]}),c.jsx("button",{onClick:Q,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]}),i==="teachers"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[x.map(S=>c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center",children:c.jsx(J,{name:"CheckCircle",size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.name}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:S.subjectIds.slice(0,2).map(P=>{const T=t.find(Fe=>Fe.id===P);return T?c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:T.name},P):null})})]})]},S.id)),x.length===0&&c.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",f,"   ",d]})]}),i==="rooms"&&c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[b.map(S=>c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all",children:[c.jsx(J,{name:"DoorOpen",size:24,className:"text-emerald-500 mb-2"}),c.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:S}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold uppercase",children:""})]},S)),b.length===0&&c.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[c.jsx(J,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),c.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M0=function(t,e){return M0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(n[A]=r[A])},M0(t,e)};function Dr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var V0=function(){return V0=Object.assign||function(e){for(var n,r=1,A=arguments.length;r<A;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},V0.apply(this,arguments)};function Tn(t,e,n,r){function A(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function o(d){try{l(r.next(d))}catch(h){i(h)}}function a(d){try{l(r.throw(d))}catch(h){i(h)}}function l(d){d.done?s(d.value):A(d.value).then(o,a)}l((r=r.apply(t,[])).next())})}function xn(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,A,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(d){return a([l,d])}}function a(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,A&&(s=l[0]&2?A.return:l[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,l[1])).done)return s;switch(A=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,A=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],A=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function wd(t,e,n){if(arguments.length===2)for(var r=0,A=e.length,s;r<A;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var QA=function(){function t(e,n,r,A){this.left=e,this.top=n,this.width=r,this.height=A}return t.prototype.add=function(e,n,r,A){return new t(this.left+e,this.top+n,this.width+r,this.height+A)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(A){return A.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),xg=function(t,e){return QA.fromClientRect(t,e.getBoundingClientRect())},zK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),A=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new QA(0,0,r,A)},_g=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},Dt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},GC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",WK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vd=0;vd<GC.length;vd++)WK[GC.charCodeAt(vd)]=vd;var zC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yd=0;yd<zC.length;yd++)Rl[zC.charCodeAt(yd)]=yd;var $K=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<n;r+=4)s=Rl[t.charCodeAt(r)],i=Rl[t.charCodeAt(r+1)],o=Rl[t.charCodeAt(r+2)],a=Rl[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return l},qK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},JK=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Fi=5,Oy=11,Dp=2,XK=Oy-Fi,wQ=65536>>Fi,YK=1<<Fi,Lp=YK-1,ZK=1024>>Fi,e3=wQ+ZK,t3=e3,n3=32,r3=t3+n3,A3=65536>>Oy,s3=1<<XK,i3=s3-1,WC=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},o3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},a3=function(t,e){var n=$K(t),r=Array.isArray(n)?JK(n):new Uint32Array(n),A=Array.isArray(n)?qK(n):new Uint16Array(n),s=24,i=WC(A,s/2,r[4]/2),o=r[5]===2?WC(A,(s+r[4])/2):o3(r,Math.ceil((s+r[4])/4));return new l3(r[0],r[1],r[2],r[3],i,o)},l3=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Fi],n=(n<<Dp)+(e&Lp),this.data[n];if(e<=65535)return n=this.index[wQ+(e-55296>>Fi)],n=(n<<Dp)+(e&Lp),this.data[n];if(e<this.highStart)return n=r3-A3+(e>>Oy),n=this.index[n],n+=e>>Fi&i3,n=this.index[n],n=(n<<Dp)+(e&Lp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),$C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Bd=0;Bd<$C.length;Bd++)c3[$C.charCodeAt(Bd)]=Bd;var u3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",qC=50,d3=1,vQ=2,yQ=3,h3=4,f3=5,JC=7,BQ=8,XC=9,as=10,H0=11,YC=12,j0=13,g3=14,Nl=15,K0=16,xd=17,yl=18,p3=19,ZC=20,G0=21,Bl=22,Op=23,mo=24,Zn=25,Pl=26,Dl=27,wo=28,m3=29,fi=30,w3=31,_d=32,Cd=33,z0=34,W0=35,$0=36,eu=37,q0=38,dh=39,hh=40,Mp=41,xQ=42,v3=43,y3=[9001,65288],_Q="!",Me="",Id="",J0=a3(u3),lA=[fi,$0],X0=[d3,vQ,yQ,f3],CQ=[as,BQ],eI=[Dl,Pl],B3=X0.concat(CQ),tI=[q0,dh,hh,z0,W0],x3=[Nl,j0],_3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],A=[];return t.forEach(function(s,i){var o=J0.get(s);if(o>qC?(A.push(!0),o-=qC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),n.push(K0);if(o===h3||o===H0){if(i===0)return r.push(i),n.push(fi);var a=n[i-1];return B3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(fi))}if(r.push(i),o===w3)return n.push(e==="strict"?G0:eu);if(o===xQ||o===m3)return n.push(fi);if(o===v3)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(eu):n.push(fi);n.push(o)}),[r,n,A]},Vp=function(t,e,n,r){var A=r[n];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=n;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==as)break}if(A===as)for(var s=n;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==as)break}if(o!==as)break}return!1},nI=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===as)n--;else return r}return 0},C3=function(t,e,n,r,A){if(n[r]===0)return Me;var s=r-1;if(Array.isArray(A)&&A[s]===!0)return Me;var i=s-1,o=s+1,a=e[s],l=i>=0?e[i]:0,d=e[o];if(a===vQ&&d===yQ)return Me;if(X0.indexOf(a)!==-1)return _Q;if(X0.indexOf(d)!==-1||CQ.indexOf(d)!==-1)return Me;if(nI(s,e)===BQ)return Id;if(J0.get(t[s])===H0||(a===_d||a===Cd)&&J0.get(t[o])===H0||a===JC||d===JC||a===XC||[as,j0,Nl].indexOf(a)===-1&&d===XC||[xd,yl,p3,mo,wo].indexOf(d)!==-1||nI(s,e)===Bl||Vp(Op,Bl,s,e)||Vp([xd,yl],G0,s,e)||Vp(YC,YC,s,e))return Me;if(a===as)return Id;if(a===Op||d===Op)return Me;if(d===K0||a===K0)return Id;if([j0,Nl,G0].indexOf(d)!==-1||a===g3||l===$0&&x3.indexOf(a)!==-1||a===wo&&d===$0||d===ZC||lA.indexOf(d)!==-1&&a===Zn||lA.indexOf(a)!==-1&&d===Zn||a===Dl&&[eu,_d,Cd].indexOf(d)!==-1||[eu,_d,Cd].indexOf(a)!==-1&&d===Pl||lA.indexOf(a)!==-1&&eI.indexOf(d)!==-1||eI.indexOf(a)!==-1&&lA.indexOf(d)!==-1||[Dl,Pl].indexOf(a)!==-1&&(d===Zn||[Bl,Nl].indexOf(d)!==-1&&e[o+1]===Zn)||[Bl,Nl].indexOf(a)!==-1&&d===Zn||a===Zn&&[Zn,wo,mo].indexOf(d)!==-1)return Me;if([Zn,wo,mo,xd,yl].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===Zn)return Me;if([wo,mo].indexOf(f)!==-1)h--;else break}if([Dl,Pl].indexOf(d)!==-1)for(var h=[xd,yl].indexOf(a)!==-1?i:s;h>=0;){var f=e[h];if(f===Zn)return Me;if([wo,mo].indexOf(f)!==-1)h--;else break}if(q0===a&&[q0,dh,z0,W0].indexOf(d)!==-1||[dh,z0].indexOf(a)!==-1&&[dh,hh].indexOf(d)!==-1||[hh,W0].indexOf(a)!==-1&&d===hh||tI.indexOf(a)!==-1&&[ZC,Pl].indexOf(d)!==-1||tI.indexOf(d)!==-1&&a===Dl||lA.indexOf(a)!==-1&&lA.indexOf(d)!==-1||a===mo&&lA.indexOf(d)!==-1||lA.concat(Zn).indexOf(a)!==-1&&d===Bl&&y3.indexOf(t[o])===-1||lA.concat(Zn).indexOf(d)!==-1&&a===yl)return Me;if(a===Mp&&d===Mp){for(var w=n[s],m=1;w>0&&(w--,e[w]===Mp);)m++;if(m%2!==0)return Me}return a===_d&&d===Cd?Me:Id},I3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=_3(t,e.lineBreak),r=n[0],A=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(o){return[Zn,fi,xQ].indexOf(o)!==-1?eu:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,A,i]},E3=function(){function t(e,n,r,A){this.codePoints=e,this.required=n===_Q,this.start=r,this.end=A}return t.prototype.slice=function(){return Dt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),b3=function(t,e){var n=_g(t),r=I3(n,e),A=r[0],s=r[1],i=r[2],o=n.length,a=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var d=Me;l<o&&(d=C3(n,s,A,++l,i))===Me;);if(d!==Me||l===o){var h=new E3(n,d,a,l);return a=l,{value:h,done:!1}}return{done:!0,value:null}}}},T3=1,F3=2,Uu=4,rI=8,lf=10,AI=47,oc=92,U3=9,Q3=32,Ed=34,xl=61,S3=35,k3=36,R3=37,bd=39,Td=40,_l=41,N3=95,Hn=45,P3=33,D3=60,L3=62,O3=64,M3=91,V3=93,H3=61,j3=123,Fd=63,K3=125,sI=124,G3=126,z3=128,iI=65533,Hp=42,xi=43,W3=44,$3=58,q3=59,tu=46,J3=0,X3=8,Y3=11,Z3=14,e5=31,t5=127,Or=-1,IQ=48,EQ=97,bQ=101,n5=102,r5=117,A5=122,TQ=65,FQ=69,UQ=70,s5=85,i5=90,_n=function(t){return t>=IQ&&t<=57},o5=function(t){return t>=55296&&t<=57343},vo=function(t){return _n(t)||t>=TQ&&t<=UQ||t>=EQ&&t<=n5},a5=function(t){return t>=EQ&&t<=A5},l5=function(t){return t>=TQ&&t<=i5},c5=function(t){return a5(t)||l5(t)},u5=function(t){return t>=z3},Ud=function(t){return t===lf||t===U3||t===Q3},cf=function(t){return c5(t)||u5(t)||t===N3},oI=function(t){return cf(t)||_n(t)||t===Hn},d5=function(t){return t>=J3&&t<=X3||t===Y3||t>=Z3&&t<=e5||t===t5},YA=function(t,e){return t!==oc?!1:e!==lf},Qd=function(t,e,n){return t===Hn?cf(e)||YA(e,n):cf(t)?!0:!!(t===oc&&YA(t,e))},jp=function(t,e,n){return t===xi||t===Hn?_n(e)?!0:e===tu&&_n(n):_n(t===tu?e:t)},h5=function(t){var e=0,n=1;(t[e]===xi||t[e]===Hn)&&(t[e]===Hn&&(n=-1),e++);for(var r=[];_n(t[e]);)r.push(t[e++]);var A=r.length?parseInt(Dt.apply(void 0,r),10):0;t[e]===tu&&e++;for(var s=[];_n(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(Dt.apply(void 0,s),10):0;(t[e]===FQ||t[e]===bQ)&&e++;var a=1;(t[e]===xi||t[e]===Hn)&&(t[e]===Hn&&(a=-1),e++);for(var l=[];_n(t[e]);)l.push(t[e++]);var d=l.length?parseInt(Dt.apply(void 0,l),10):0;return n*(A+o*Math.pow(10,-i))*Math.pow(10,a*d)},f5={type:2},g5={type:3},p5={type:4},m5={type:13},w5={type:8},v5={type:21},y5={type:9},B5={type:10},x5={type:11},_5={type:12},C5={type:14},Sd={type:23},I5={type:1},E5={type:25},b5={type:24},T5={type:26},F5={type:27},U5={type:28},Q5={type:29},S5={type:31},Y0={type:32},QQ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(_g(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Y0;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ed:return this.consumeStringToken(Ed);case S3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),A=this.peekCodePoint(2);if(oI(n)||YA(r,A)){var s=Qd(n,r,A)?F3:T3,i=this.consumeName();return{type:5,value:i,flags:s}}break;case k3:if(this.peekCodePoint(0)===xl)return this.consumeCodePoint(),m5;break;case bd:return this.consumeStringToken(bd);case Td:return f5;case _l:return g5;case Hp:if(this.peekCodePoint(0)===xl)return this.consumeCodePoint(),C5;break;case xi:if(jp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case W3:return p5;case Hn:var o=e,a=this.peekCodePoint(0),l=this.peekCodePoint(1);if(jp(o,a,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Qd(o,a,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===Hn&&l===L3)return this.consumeCodePoint(),this.consumeCodePoint(),b5;break;case tu:if(jp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case AI:if(this.peekCodePoint(0)===Hp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Hp&&(d=this.consumeCodePoint(),d===AI))return this.consumeToken();if(d===Or)return this.consumeToken()}break;case $3:return T5;case q3:return F5;case D3:if(this.peekCodePoint(0)===P3&&this.peekCodePoint(1)===Hn&&this.peekCodePoint(2)===Hn)return this.consumeCodePoint(),this.consumeCodePoint(),E5;break;case O3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(Qd(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case M3:return U5;case oc:if(YA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case V3:return Q5;case H3:if(this.peekCodePoint(0)===xl)return this.consumeCodePoint(),w5;break;case j3:return x5;case K3:return _5;case r5:case s5:var m=this.peekCodePoint(0),y=this.peekCodePoint(1);return m===xi&&(vo(y)||y===Fd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case sI:if(this.peekCodePoint(0)===xl)return this.consumeCodePoint(),y5;if(this.peekCodePoint(0)===sI)return this.consumeCodePoint(),v5;break;case G3:if(this.peekCodePoint(0)===xl)return this.consumeCodePoint(),B5;break;case Or:return Y0}return Ud(e)?(this.consumeWhiteSpace(),S5):_n(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):cf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Dt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();vo(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Fd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var A=parseInt(Dt.apply(void 0,e.map(function(a){return a===Fd?IQ:a})),16),s=parseInt(Dt.apply(void 0,e.map(function(a){return a===Fd?UQ:a})),16);return{type:30,start:A,end:s}}var i=parseInt(Dt.apply(void 0,e),16);if(this.peekCodePoint(0)===Hn&&vo(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];vo(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var s=parseInt(Dt.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Td?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Td?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Or)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===bd||n===Ed){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Or||this.peekCodePoint(0)===_l)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Sd)}for(;;){var A=this.consumeCodePoint();if(A===Or||A===_l)return{type:22,value:Dt.apply(void 0,e)};if(Ud(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Or||this.peekCodePoint(0)===_l?(this.consumeCodePoint(),{type:22,value:Dt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Sd);if(A===Ed||A===bd||A===Td||d5(A))return this.consumeBadUrlRemnants(),Sd;if(A===oc)if(YA(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Sd;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;Ud(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===_l||e===Or)return;YA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var A=Math.min(n,e);r+=Dt.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var A=this._value[r];if(A===Or||A===void 0||A===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(A===lf)return this._value.splice(0,r),I5;if(A===oc){var s=this._value[r+1];s!==Or&&s!==void 0&&(s===lf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):YA(A,s)&&(n+=this.consumeStringSlice(r),n+=Dt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Uu,r=this.peekCodePoint(0);for((r===xi||r===Hn)&&e.push(this.consumeCodePoint());_n(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(r===tu&&_n(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=rI;_n(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===FQ||r===bQ)&&((A===xi||A===Hn)&&_n(s)||_n(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=rI;_n(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[h5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Qd(A,s,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return A===R3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(vo(e)){for(var n=Dt(e);vo(this.peekCodePoint(0))&&n.length<6;)n+=Dt(this.consumeCodePoint());Ud(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||o5(r)||r>1114111?iI:r}return e===Or?iI:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(oI(n))e+=Dt(n);else if(YA(n,this.peekCodePoint(0)))e+=Dt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),SQ=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new QQ;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||R5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Y0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Qu=function(t){return t.type===15},za=function(t){return t.type===17},et=function(t){return t.type===20},k5=function(t){return t.type===0},Z0=function(t,e){return et(t)&&t.value===e},kQ=function(t){return t.type!==31},Ta=function(t){return t.type!==31&&t.type!==4},AA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},R5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ls=function(t){return t.type===17||t.type===15},Gt=function(t){return t.type===16||Ls(t)},RQ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},dn={type:17,number:0,flags:Uu},My={type:16,number:50,flags:Uu},ls={type:16,number:100,flags:Uu},Ll=function(t,e,n){var r=t[0],A=t[1];return[it(r,e),it(typeof A<"u"?A:r,n)]},it=function(t,e){if(t.type===16)return t.number/100*e;if(Qu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},NQ="deg",PQ="grad",DQ="rad",LQ="turn",Cg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case NQ:return Math.PI*e.number/180;case PQ:return Math.PI/200*e.number;case DQ:return e.number;case LQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},OQ=function(t){return t.type===15&&(t.unit===NQ||t.unit===PQ||t.unit===DQ||t.unit===LQ)},MQ=function(t){var e=t.filter(et).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[dn,dn];case"to top":case"bottom":return mr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[dn,ls];case"to right":case"left":return mr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ls,ls];case"to bottom":case"top":return mr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ls,dn];case"to left":case"right":return mr(270)}return 0},mr=function(t){return Math.PI*t/180},_s={name:"color",parse:function(t,e){if(e.type===18){var n=N5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return cs(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return cs(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return cs(parseInt(r,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return cs(parseInt(r,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=xA[e.value.toUpperCase()];if(typeof o<"u")return o}return xA.TRANSPARENT}},Cs=function(t){return(255&t)===0},Zt=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+r+","+n+","+e/255+")":"rgb("+A+","+r+","+n+")"},cs=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},aI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},lI=function(t,e){var n=e.filter(Ta);if(n.length===3){var r=n.map(aI),A=r[0],s=r[1],i=r[2];return cs(A,s,i,1)}if(n.length===4){var o=n.map(aI),A=o[0],s=o[1],i=o[2],a=o[3];return cs(A,s,i,a)}return 0};function Kp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var cI=function(t,e){var n=e.filter(Ta),r=n[0],A=n[1],s=n[2],i=n[3],o=(r.type===17?mr(r.number):Cg.parse(t,r))/(Math.PI*2),a=Gt(A)?A.number/100:0,l=Gt(s)?s.number/100:0,d=typeof i<"u"&&Gt(i)?it(i,1):1;if(a===0)return cs(l*255,l*255,l*255,1);var h=l<=.5?l*(a+1):l+a-l*a,f=l*2-h,w=Kp(f,h,o+1/3),m=Kp(f,h,o),y=Kp(f,h,o-1/3);return cs(w*255,m*255,y*255,d)},N5={hsl:cI,hsla:cI,rgb:lI,rgba:lI},ac=function(t,e){return _s.parse(t,SQ.create(e).parseComponentValue())},xA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},P5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(et(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},D5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ig=function(t,e){var n=_s.parse(t,e[0]),r=e[1];return r&&Gt(r)?{color:n,stop:r}:{color:n,stop:null}},uI=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=dn),r.stop===null&&(r.stop=ls);for(var A=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=it(o,e);a>s?A.push(a):A.push(s),s=a}else A.push(null)}for(var l=null,i=0;i<A.length;i++){var d=A[i];if(d===null)l===null&&(l=i);else if(l!==null){for(var h=i-l,f=A[l-1],w=(d-f)/(h+1),m=1;m<=h;m++)A[l+m-1]=w*m;l=null}}return t.map(function(y,I){var B=y.color;return{color:B,stop:Math.max(Math.min(1,A[I]/e),0)}})},L5=function(t,e,n){var r=e/2,A=n/2,s=it(t[0],e)-r,i=A-it(t[1],n);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},O5=function(t,e,n){var r=typeof t=="number"?t:L5(t,e,n),A=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,i=n/2,o=A/2,a=Math.sin(r-Math.PI/2)*o,l=Math.cos(r-Math.PI/2)*o;return[A,s-l,s+l,i-a,i+a]},br=function(t,e){return Math.sqrt(t*t+e*e)},dI=function(t,e,n,r,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],l=o[1],d=br(n-a,r-l);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},M5=function(t,e,n,r,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-A)));break;case 2:if(t.shape===0)s=i=Math.min(br(e,n),br(e,n-A),br(e-r,n),br(e-r,n-A));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-A))/Math.min(Math.abs(e),Math.abs(e-r)),a=dI(r,A,e,n,!0),l=a[0],d=a[1];s=br(l-e,(d-n)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-A)));break;case 3:if(t.shape===0)s=i=Math.max(br(e,n),br(e,n-A),br(e-r,n),br(e-r,n-A));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-A))/Math.max(Math.abs(e),Math.abs(e-r)),h=dI(r,A,e,n,!1),l=h[0],d=h[1];s=br(l-e,(d-n)/o),i=o*s}break}return Array.isArray(t.size)&&(s=it(t.size[0],r),i=t.size.length===2?it(t.size[1],A):s),[s,i]},V5=function(t,e){var n=mr(180),r=[];return AA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){n=MQ(A);return}else if(OQ(i)){n=Cg.parse(t,i);return}}var o=Ig(t,A);r.push(o)}),{angle:n,stops:r,type:1}},kd=function(t,e){var n=mr(180),r=[];return AA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=MQ(A);return}else if(OQ(i)){n=(Cg.parse(t,i)+mr(270))%mr(360);return}}var o=Ig(t,A);r.push(o)}),{angle:n,stops:r,type:1}},H5=function(t,e){var n=mr(180),r=[],A=1,s=0,i=3,o=[];return AA(e).forEach(function(a,l){var d=a[0];if(l===0){if(et(d)&&d.value==="linear"){A=1;return}else if(et(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=_s.parse(t,d.values[0]);r.push({stop:dn,color:h})}else if(d.name==="to"){var h=_s.parse(t,d.values[0]);r.push({stop:ls,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Ta);if(f.length===2){var h=_s.parse(t,f[1]),w=f[0];za(w)&&r.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),A===1?{angle:(n+mr(180))%mr(360),stops:r,type:A}:{size:i,shape:s,stops:r,position:o,type:A}},VQ="closest-side",HQ="farthest-side",jQ="closest-corner",KQ="farthest-corner",GQ="circle",zQ="ellipse",WQ="cover",$Q="contain",j5=function(t,e){var n=0,r=3,A=[],s=[];return AA(e).forEach(function(i,o){var a=!0;if(o===0){var l=!1;a=i.reduce(function(h,f){if(l)if(et(f))switch(f.value){case"center":return s.push(My),h;case"top":case"left":return s.push(dn),h;case"right":case"bottom":return s.push(ls),h}else(Gt(f)||Ls(f))&&s.push(f);else if(et(f))switch(f.value){case GQ:return n=0,!1;case zQ:return n=1,!1;case"at":return l=!0,!1;case VQ:return r=0,!1;case WQ:case HQ:return r=1,!1;case $Q:case jQ:return r=2,!1;case KQ:return r=3,!1}else if(Ls(f)||Gt(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=Ig(t,i);A.push(d)}}),{size:r,shape:n,stops:A,position:s,type:2}},Rd=function(t,e){var n=0,r=3,A=[],s=[];return AA(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(et(h))switch(h.value){case"center":return s.push(My),!1;case"top":case"left":return s.push(dn),!1;case"right":case"bottom":return s.push(ls),!1}else if(Gt(h)||Ls(h))return s.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(et(h))switch(h.value){case GQ:return n=0,!1;case zQ:return n=1,!1;case $Q:case VQ:return r=0,!1;case HQ:return r=1,!1;case jQ:return r=2,!1;case WQ:case KQ:return r=3,!1}else if(Ls(h)||Gt(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var l=Ig(t,i);A.push(l)}}),{size:r,shape:n,stops:A,position:s,type:2}},K5=function(t){return t.type===1},G5=function(t){return t.type===2},Vy={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=qQ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function z5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!qQ[t.name])}var qQ={"linear-gradient":V5,"-moz-linear-gradient":kd,"-ms-linear-gradient":kd,"-o-linear-gradient":kd,"-webkit-linear-gradient":kd,"radial-gradient":j5,"-moz-radial-gradient":Rd,"-ms-radial-gradient":Rd,"-o-radial-gradient":Rd,"-webkit-radial-gradient":Rd,"-webkit-gradient":H5},W5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return Ta(r)&&z5(r)}).map(function(r){return Vy.parse(t,r)})}},$5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(et(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},q5={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return AA(e).map(function(n){return n.filter(Gt)}).map(RQ)}},J5={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return AA(e).map(function(n){return n.filter(et).map(function(r){return r.value}).join(" ")}).map(X5)}},X5=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},na;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(na||(na={}));var Y5={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return AA(e).map(function(n){return n.filter(Z5)})}},Z5=function(t){return et(t)||Gt(t)},Eg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},e6=Eg("top"),t6=Eg("right"),n6=Eg("bottom"),r6=Eg("left"),bg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return RQ(n.filter(Gt))}}},A6=bg("top-left"),s6=bg("top-right"),i6=bg("bottom-right"),o6=bg("bottom-left"),Tg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},a6=Tg("top"),l6=Tg("right"),c6=Tg("bottom"),u6=Tg("left"),Fg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Qu(n)?n.number:0}}},d6=Fg("top"),h6=Fg("right"),f6=Fg("bottom"),g6=Fg("left"),p6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},m6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},w6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(et).reduce(function(n,r){return n|v6(r.value)},0)}},v6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},y6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},B6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},uf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(uf||(uf={}));var x6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return uf.STRICT;case"normal":default:return uf.NORMAL}}},_6={name:"line-height",initialValue:"normal",prefix:!1,type:4},hI=function(t,e){return et(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Gt(t)?it(t,e):e},C6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Vy.parse(t,e)}},I6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ew={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ug=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},E6=Ug("top"),b6=Ug("right"),T6=Ug("bottom"),F6=Ug("left"),U6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(et).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Q6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Qg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},S6=Qg("top"),k6=Qg("right"),R6=Qg("bottom"),N6=Qg("left"),P6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},D6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},L6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Z0(e[0],"none")?[]:AA(e).map(function(n){for(var r={color:xA.TRANSPARENT,offsetX:dn,offsetY:dn,blur:dn},A=0,s=0;s<n.length;s++){var i=n[s];Ls(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:r.blur=i,A++):r.color=_s.parse(t,i)}return r})}},O6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},M6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=j6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},V6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},H6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,A,s,i,o]:null},j6={matrix:V6,matrix3d:H6},fI={type:16,number:50,flags:Uu},K6=[fI,fI],G6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(Gt);return n.length!==2?K6:[n[0],n[1]]}},z6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},lc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(lc||(lc={}));var W6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return lc.BREAK_ALL;case"keep-all":return lc.KEEP_ALL;case"normal":default:return lc.NORMAL}}},$6={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(za(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},q6={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return za(e)?e.number:1}},J6={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},X6={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(et).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Y6={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:n.push(A.value);break;case 17:n.push(A.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},Z6={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},eG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(za(e))return e.number;if(et(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},tG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(et).map(function(n){return n.value})}},nG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},qt=function(t,e){return(t&e)!==0},rG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},AG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],A=e.filter(kQ),s=0;s<A.length;s++){var i=A[s],o=A[s+1];if(i.type===20){var a=o&&za(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},sG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(kQ),A=0;A<r.length;A++){var s=r[A],i=r[A+1];if(et(s)&&s.value!=="none"){var o=i&&za(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},iG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Qu).map(function(n){return JQ.parse(t,n)})}},oG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],A=e.filter(k5);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,o=A[s+1].value;r.push({open:i,close:o})}return r}},gI=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},aG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Z0(e[0],"none")?[]:AA(e).map(function(n){for(var r={color:255,offsetX:dn,offsetY:dn,blur:dn,spread:dn,inset:!1},A=0,s=0;s<n.length;s++){var i=n[s];Z0(i,"inset")?r.inset=!0:Ls(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:A===2?r.blur=i:r.spread=i,A++):r.color=_s.parse(t,i)}return r})}},lG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(et).forEach(function(A){switch(A.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(A){r.indexOf(A)===-1&&r.push(A)}),r}},cG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},uG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Qu(e)?e.number:0}},dG=function(){function t(e,n){var r,A;this.animationDuration=fe(e,iG,n.animationDuration),this.backgroundClip=fe(e,P5,n.backgroundClip),this.backgroundColor=fe(e,D5,n.backgroundColor),this.backgroundImage=fe(e,W5,n.backgroundImage),this.backgroundOrigin=fe(e,$5,n.backgroundOrigin),this.backgroundPosition=fe(e,q5,n.backgroundPosition),this.backgroundRepeat=fe(e,J5,n.backgroundRepeat),this.backgroundSize=fe(e,Y5,n.backgroundSize),this.borderTopColor=fe(e,e6,n.borderTopColor),this.borderRightColor=fe(e,t6,n.borderRightColor),this.borderBottomColor=fe(e,n6,n.borderBottomColor),this.borderLeftColor=fe(e,r6,n.borderLeftColor),this.borderTopLeftRadius=fe(e,A6,n.borderTopLeftRadius),this.borderTopRightRadius=fe(e,s6,n.borderTopRightRadius),this.borderBottomRightRadius=fe(e,i6,n.borderBottomRightRadius),this.borderBottomLeftRadius=fe(e,o6,n.borderBottomLeftRadius),this.borderTopStyle=fe(e,a6,n.borderTopStyle),this.borderRightStyle=fe(e,l6,n.borderRightStyle),this.borderBottomStyle=fe(e,c6,n.borderBottomStyle),this.borderLeftStyle=fe(e,u6,n.borderLeftStyle),this.borderTopWidth=fe(e,d6,n.borderTopWidth),this.borderRightWidth=fe(e,h6,n.borderRightWidth),this.borderBottomWidth=fe(e,f6,n.borderBottomWidth),this.borderLeftWidth=fe(e,g6,n.borderLeftWidth),this.boxShadow=fe(e,aG,n.boxShadow),this.color=fe(e,p6,n.color),this.direction=fe(e,m6,n.direction),this.display=fe(e,w6,n.display),this.float=fe(e,y6,n.cssFloat),this.fontFamily=fe(e,Y6,n.fontFamily),this.fontSize=fe(e,Z6,n.fontSize),this.fontStyle=fe(e,nG,n.fontStyle),this.fontVariant=fe(e,tG,n.fontVariant),this.fontWeight=fe(e,eG,n.fontWeight),this.letterSpacing=fe(e,B6,n.letterSpacing),this.lineBreak=fe(e,x6,n.lineBreak),this.lineHeight=fe(e,_6,n.lineHeight),this.listStyleImage=fe(e,C6,n.listStyleImage),this.listStylePosition=fe(e,I6,n.listStylePosition),this.listStyleType=fe(e,ew,n.listStyleType),this.marginTop=fe(e,E6,n.marginTop),this.marginRight=fe(e,b6,n.marginRight),this.marginBottom=fe(e,T6,n.marginBottom),this.marginLeft=fe(e,F6,n.marginLeft),this.opacity=fe(e,q6,n.opacity);var s=fe(e,U6,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=fe(e,Q6,n.overflowWrap),this.paddingTop=fe(e,S6,n.paddingTop),this.paddingRight=fe(e,k6,n.paddingRight),this.paddingBottom=fe(e,R6,n.paddingBottom),this.paddingLeft=fe(e,N6,n.paddingLeft),this.paintOrder=fe(e,lG,n.paintOrder),this.position=fe(e,D6,n.position),this.textAlign=fe(e,P6,n.textAlign),this.textDecorationColor=fe(e,J6,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=fe(e,X6,(A=n.textDecorationLine)!==null&&A!==void 0?A:n.textDecoration),this.textShadow=fe(e,L6,n.textShadow),this.textTransform=fe(e,O6,n.textTransform),this.transform=fe(e,M6,n.transform),this.transformOrigin=fe(e,G6,n.transformOrigin),this.visibility=fe(e,z6,n.visibility),this.webkitTextStrokeColor=fe(e,cG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=fe(e,uG,n.webkitTextStrokeWidth),this.wordBreak=fe(e,W6,n.wordBreak),this.zIndex=fe(e,$6,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Cs(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return qt(this.display,4)||qt(this.display,33554432)||qt(this.display,268435456)||qt(this.display,536870912)||qt(this.display,67108864)||qt(this.display,134217728)},t}(),hG=function(){function t(e,n){this.content=fe(e,rG,n.content),this.quotes=fe(e,oG,n.quotes)}return t}(),pI=function(){function t(e,n){this.counterIncrement=fe(e,AG,n.counterIncrement),this.counterReset=fe(e,sG,n.counterReset)}return t}(),fe=function(t,e,n){var r=new QQ,A=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(A);var s=new SQ(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,et(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Cg.parse(t,s.parseComponentValue());case"color":return _s.parse(t,s.parseComponentValue());case"image":return Vy.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Ls(o)?o:dn;case"length-percentage":var a=s.parseComponentValue();return Gt(a)?a:dn;case"time":return JQ.parse(t,s.parseComponentValue())}break}},fG="data-html2canvas-debug",gG=function(t){var e=t.getAttribute(fG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},tw=function(t,e){var n=gG(t);return n===1||e===n},sA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,tw(n,3))debugger;this.styles=new dG(e,window.getComputedStyle(n,null)),Aw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=xg(this.context,n),tw(n,4)&&(this.flags|=16)}return t}(),pG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",mI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ol=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nd=0;Nd<mI.length;Nd++)Ol[mI.charCodeAt(Nd)]=Nd;var mG=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(l)?l:new Uint8Array(l);for(r=0;r<n;r+=4)s=Ol[t.charCodeAt(r)],i=Ol[t.charCodeAt(r+1)],o=Ol[t.charCodeAt(r+2)],a=Ol[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return l},wG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},vG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Ui=5,Hy=11,Gp=2,yG=Hy-Ui,XQ=65536>>Ui,BG=1<<Ui,zp=BG-1,xG=1024>>Ui,_G=XQ+xG,CG=_G,IG=32,EG=CG+IG,bG=65536>>Hy,TG=1<<yG,FG=TG-1,wI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},UG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},QG=function(t,e){var n=mG(t),r=Array.isArray(n)?vG(n):new Uint32Array(n),A=Array.isArray(n)?wG(n):new Uint16Array(n),s=24,i=wI(A,s/2,r[4]/2),o=r[5]===2?wI(A,(s+r[4])/2):UG(r,Math.ceil((s+r[4])/4));return new SG(r[0],r[1],r[2],r[3],i,o)},SG=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Ui],n=(n<<Gp)+(e&zp),this.data[n];if(e<=65535)return n=this.index[XQ+(e-55296>>Ui)],n=(n<<Gp)+(e&zp),this.data[n];if(e<this.highStart)return n=EG-bG+(e>>Hy),n=this.index[n],n+=e>>Ui&FG,n=this.index[n],n=(n<<Gp)+(e&zp),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),vI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pd=0;Pd<vI.length;Pd++)kG[vI.charCodeAt(Pd)]=Pd;var RG=1,Wp=2,$p=3,yI=4,BI=5,NG=7,xI=8,qp=9,Jp=10,_I=11,CI=12,II=13,EI=14,Xp=15,PG=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},DG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},LG=QG(pG),ur="",Yp="",OG=function(t){return LG.get(t)},MG=function(t,e,n){var r=n-2,A=e[r],s=e[n-1],i=e[n];if(s===Wp&&i===$p)return ur;if(s===Wp||s===$p||s===yI||i===Wp||i===$p||i===yI)return Yp;if(s===xI&&[xI,qp,_I,CI].indexOf(i)!==-1||(s===_I||s===qp)&&(i===qp||i===Jp)||(s===CI||s===Jp)&&i===Jp||i===II||i===BI||i===NG||s===RG)return ur;if(s===II&&i===EI){for(;A===BI;)A=e[--r];if(A===EI)return ur}if(s===Xp&&i===Xp){for(var o=0;A===Xp;)o++,A=e[--r];if(o%2===0)return ur}return Yp},VG=function(t){var e=PG(t),n=e.length,r=0,A=0,s=e.map(OG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=ur;r<n&&(i=MG(e,s,++r))===ur;);if(i!==ur||r===n){var o=DG.apply(null,e.slice(A,r));return A=r,{value:o,done:!1}}return{done:!0,value:null}}}},HG=function(t){for(var e=VG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},jG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var A=n.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(r),s===e)return!0}}return!1},KG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,A=_g(r.data).map(function(a){return Dt(a)}),s=0,i={},o=A.every(function(a,l){n.setStart(r,s),n.setEnd(r,s+a.length);var d=n.getBoundingClientRect();s+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,l===0?!0:h});return t.body.removeChild(e),o},GG=function(){return typeof new Image().crossOrigin<"u"},zG=function(){return typeof new XMLHttpRequest().responseType=="string"},WG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},bI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},$G=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var A=new Image,s=e.toDataURL();A.src=s;var i=nw(n,n,0,0,A);return r.fillStyle="red",r.fillRect(0,0,n,n),TI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var l=t.createElement("div");return l.style.backgroundImage="url("+s+")",l.style.height=n+"px",bI(a)?TI(nw(n,n,0,0,l)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),bI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},nw=function(t,e,n,r,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(A),i},TI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},an={get SUPPORT_RANGE_BOUNDS(){var t=jG(document);return Object.defineProperty(an,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=an.SUPPORT_RANGE_BOUNDS&&KG(document);return Object.defineProperty(an,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=WG(document);return Object.defineProperty(an,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?$G(document):Promise.resolve(!1);return Object.defineProperty(an,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=GG();return Object.defineProperty(an,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=zG();return Object.defineProperty(an,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(an,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(an,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},cc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),qG=function(t,e,n,r){var A=YG(e,n),s=[],i=0;return A.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(an.SUPPORT_RANGE_BOUNDS){var a=FI(r,i,o.length).getClientRects();if(a.length>1){var l=jy(o),d=0;l.forEach(function(f){s.push(new cc(f,QA.fromDOMRectList(t,FI(r,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new cc(o,QA.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new cc(o,JG(t,r))),r=h}else an.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},JG=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(r,e);var s=xg(t,r);return r.firstChild&&A.replaceChild(r.firstChild,r),s}}return QA.EMPTY},FI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var A=r.createRange();return A.setStart(t,e),A.setEnd(t,e+n),A},jy=function(t){if(an.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return HG(t)},XG=function(t,e){if(an.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return e8(t,e)},YG=function(t,e){return e.letterSpacing!==0?jy(t):XG(t,e)},ZG=[32,160,4961,65792,65793,4153,4241],e8=function(t,e){for(var n=b3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],A,s=function(){if(A.value){var i=A.value.slice(),o=_g(i),a="";o.forEach(function(l){ZG.indexOf(l)===-1?a+=Dt(l):(a.length&&r.push(a),r.push(Dt(l)),a="")}),a.length&&r.push(a)}};!(A=n.next()).done;)s();return r},t8=function(){function t(e,n,r){this.text=n8(n.data,r.textTransform),this.textBounds=qG(e,this.text,r,n)}return t}(),n8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(r8,A8);case 2:return t.toUpperCase();default:return t}},r8=/(^|\s|:|-|\(|\))([a-z])/g,A8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},YQ=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.src=r.currentSrc||r.src,A.intrinsicWidth=r.naturalWidth,A.intrinsicHeight=r.naturalHeight,A.context.cache.addImage(A.src),A}return e}(sA),ZQ=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r,A.intrinsicWidth=r.width,A.intrinsicHeight=r.height,A}return e}(sA),eS=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=new XMLSerializer,i=xg(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),A.intrinsicWidth=r.width.baseVal.value,A.intrinsicHeight=r.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(sA),tS=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(sA),rw=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.start=r.start,A.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,A}return e}(sA),s8=[{type:15,flags:0,unit:"px",number:3}],i8=[{type:16,flags:0,number:50}],o8=function(t){return t.width>t.height?new QA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new QA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},a8=function(t){var e=t.type===l8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},df="checkbox",hf="radio",l8="password",UI=707406591,Ky=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;switch(A.type=r.type.toLowerCase(),A.checked=r.checked,A.value=a8(r),(A.type===df||A.type===hf)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=o8(A.bounds)),A.type){case df:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=s8;break;case hf:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=i8;break}return A}return e}(sA),nS=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(sA),rS=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(sA),AS=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;A.src=r.src,A.width=parseInt(r.width,10)||0,A.height=parseInt(r.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){A.tree=iS(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?ac(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):xA.TRANSPARENT,i=r.contentWindow.document.body?ac(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):xA.TRANSPARENT;A.backgroundColor=Cs(s)?Cs(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(sA),c8=["OL","UL","MENU"],fh=function(t,e,n,r){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,oS(A)&&A.data.trim().length>0)n.textNodes.push(new t8(t,A,n.styles));else if(jo(A))if(uS(A)&&A.assignedNodes)A.assignedNodes().forEach(function(o){return fh(t,o,n,r)});else{var i=sS(t,A);i.styles.isVisible()&&(u8(A,i,r)?i.flags|=4:d8(i.styles)&&(i.flags|=2),c8.indexOf(A.tagName)!==-1&&(i.flags|=8),n.elements.push(i),A.slot,A.shadowRoot?fh(t,A.shadowRoot,i,r):!ff(A)&&!aS(A)&&!gf(A)&&fh(t,A,i,r))}},sS=function(t,e){return sw(e)?new YQ(t,e):lS(e)?new ZQ(t,e):aS(e)?new eS(t,e):h8(e)?new tS(t,e):f8(e)?new rw(t,e):g8(e)?new Ky(t,e):gf(e)?new nS(t,e):ff(e)?new rS(t,e):cS(e)?new AS(t,e):new sA(t,e)},iS=function(t,e){var n=sS(t,e);return n.flags|=4,fh(t,e,n,n),n},u8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Gy(t)&&n.styles.isTransparent()},d8=function(t){return t.isPositioned()||t.isFloating()},oS=function(t){return t.nodeType===Node.TEXT_NODE},jo=function(t){return t.nodeType===Node.ELEMENT_NODE},Aw=function(t){return jo(t)&&typeof t.style<"u"&&!gh(t)},gh=function(t){return typeof t.className=="object"},h8=function(t){return t.tagName==="LI"},f8=function(t){return t.tagName==="OL"},g8=function(t){return t.tagName==="INPUT"},p8=function(t){return t.tagName==="HTML"},aS=function(t){return t.tagName==="svg"},Gy=function(t){return t.tagName==="BODY"},lS=function(t){return t.tagName==="CANVAS"},QI=function(t){return t.tagName==="VIDEO"},sw=function(t){return t.tagName==="IMG"},cS=function(t){return t.tagName==="IFRAME"},SI=function(t){return t.tagName==="STYLE"},m8=function(t){return t.tagName==="SCRIPT"},ff=function(t){return t.tagName==="TEXTAREA"},gf=function(t){return t.tagName==="SELECT"},uS=function(t){return t.tagName==="SLOT"},kI=function(t){return t.tagName.indexOf("-")>0},w8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,A=e.counterReset,s=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(s=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return s&&A.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),RI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},NI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},v8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},y8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},yo=function(t,e,n,r,A,s){return t<e||t>n?nu(t,A,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},dS=function(t,e,n,r){var A="";do n||t--,A=r(t)+A,t/=e;while(t*e>=e);return A},Pt=function(t,e,n,r,A){var s=n-e+1;return(t<0?"-":"")+(dS(Math.abs(t),s,r,function(i){return Dt(Math.floor(i%s)+e)})+A)},ni=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return dS(Math.abs(t),r,!1,function(A){return e[Math.floor(A%r)]})+n},To=1,$A=2,qA=4,Ml=8,cA=function(t,e,n,r,A,s){if(t<-9999||t>9999)return nu(t,4,A.length>0);var i=Math.abs(t),o=A;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var l=i%10;l===0&&qt(s,To)&&o!==""?o=e[l]+o:l>1||l===1&&a===0||l===1&&a===1&&qt(s,$A)||l===1&&a===1&&qt(s,qA)&&t>100||l===1&&a>1&&qt(s,Ml)?o=e[l]+(a>0?n[a-1]:"")+o:l===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},PI="",DI="",LI="",Zp="",nu=function(t,e,n){var r=n?". ":"",A=n?"":"",s=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Pt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return ni(t,"",A);case 6:return yo(t,1,3999,RI,3,r).toLowerCase();case 7:return yo(t,1,3999,RI,3,r);case 8:return Pt(t,945,969,!1,r);case 9:return Pt(t,97,122,!1,r);case 10:return Pt(t,65,90,!1,r);case 11:return Pt(t,1632,1641,!0,r);case 12:case 49:return yo(t,1,9999,NI,3,r);case 35:return yo(t,1,9999,NI,3,r).toLowerCase();case 13:return Pt(t,2534,2543,!0,r);case 14:case 30:return Pt(t,6112,6121,!0,r);case 15:return ni(t,"",A);case 16:return ni(t,"",A);case 17:case 48:return cA(t,"",PI,"",A,$A|qA|Ml);case 47:return cA(t,"",DI,"",A,To|$A|qA|Ml);case 42:return cA(t,"",PI,"",A,$A|qA|Ml);case 41:return cA(t,"",DI,"",A,To|$A|qA|Ml);case 26:return cA(t,"","",LI,A,0);case 25:return cA(t,"","",LI,A,To|$A|qA);case 31:return cA(t,"","",Zp,s,To|$A|qA);case 33:return cA(t,"","",Zp,s,0);case 32:return cA(t,"","",Zp,s,To|$A|qA);case 18:return Pt(t,2406,2415,!0,r);case 20:return yo(t,1,19999,y8,3,r);case 21:return Pt(t,2790,2799,!0,r);case 22:return Pt(t,2662,2671,!0,r);case 22:return yo(t,1,10999,v8,3,r);case 23:return ni(t,"");case 24:return ni(t,"");case 27:return Pt(t,3302,3311,!0,r);case 28:return ni(t,"",A);case 29:return ni(t,"",A);case 34:return Pt(t,3792,3801,!0,r);case 37:return Pt(t,6160,6169,!0,r);case 38:return Pt(t,4160,4169,!0,r);case 39:return Pt(t,2918,2927,!0,r);case 40:return Pt(t,1776,1785,!0,r);case 43:return Pt(t,3046,3055,!0,r);case 44:return Pt(t,3174,3183,!0,r);case 45:return Pt(t,3664,3673,!0,r);case 46:return Pt(t,3872,3881,!0,r);case 3:default:return Pt(t,48,57,!0,r)}},hS="data-html2canvas-ignore",OI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new w8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,A=B8(e,n);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=A.contentWindow,a=o.document,l=C8(A).then(function(){return Tn(r,void 0,void 0,function(){var d,h;return xn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(T8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,_8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return A})]:[2,A]}})})});return a.open(),a.write(E8(document.doctype)+"<html></html>"),b8(this.referenceElement.ownerDocument,s,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},t.prototype.createElementClone=function(e){if(tw(e,2))debugger;if(lS(e))return this.createCanvasClone(e);if(QI(e))return this.createVideoClone(e);if(SI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return sw(n)&&(sw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),kI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return em(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=r,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,n,r){(!jo(n)||!m8(n)&&!n.hasAttribute(hS)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!jo(n)||!SI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(jo(s)&&uS(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return A.appendChildNode(n,o,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(oS(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&jo(e)&&(Aw(e)||gh(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&Aw(A)&&(this.clonedReferenceElement=A),Gy(A)&&Q8(A);var a=this.counters.parse(new pI(this.context,s)),l=this.resolvePseudoContent(e,A,i,uc.BEFORE);kI(e)&&(n=!0),QI(e)||this.cloneChildNodes(e,A,n),l&&A.insertBefore(l,A.firstChild);var d=this.resolvePseudoContent(e,A,o,uc.AFTER);return d&&A.appendChild(d),this.counters.pop(a),(s&&(this.options.copyStyles||gh(e))&&!cS(e)||n)&&em(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(ff(e)||gf(e))&&(ff(A)||gf(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,A){var s=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new pI(this.context,r));var a=new hG(this.context,r),l=o.createElement("html2canvaspseudoelement");em(r,l),a.content.forEach(function(h){if(h.type===0)l.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",l.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(et);w.length&&l.appendChild(o.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var m=h.values.filter(Ta),y=m[0],I=m[1];if(y&&et(y)){var B=s.counters.getCounterValue(y.value),v=I&&et(I)?ew.parse(s.context,I.value):3;l.appendChild(o.createTextNode(nu(B,v,!1)))}}else if(h.name==="counters"){var _=h.values.filter(Ta),y=_[0],k=_[1],I=_[2];if(y&&et(y)){var U=s.counters.getCounterValues(y.value),N=I&&et(I)?ew.parse(s.context,I.value):3,C=k&&k.type===0?k.value:"",x=U.map(function(S){return nu(S,N,!1)}).join(C);l.appendChild(o.createTextNode(x))}}}else if(h.type===20)switch(h.value){case"open-quote":l.appendChild(o.createTextNode(gI(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(gI(a.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(h.value))}}),l.className=iw+" "+ow;var d=A===uc.BEFORE?" "+iw:" "+ow;return gh(n)?n.className.baseValue+=d:n.className+=d,l}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),uc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(uc||(uc={}));var B8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(hS,"true"),t.body.appendChild(n),n},x8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},_8=function(t){return Promise.all([].slice.call(t.images,0).map(x8))},C8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var A=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},I8=["all","d","content"],em=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);I8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},E8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},b8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},T8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},F8=":before",U8=":after",iw="___html2canvas___pseudoelement_before",ow="___html2canvas___pseudoelement_after",MI=`{
    content: "" !important;
    display: none !important;
}`,Q8=function(t){S8(t,"."+iw+F8+MI+`
         .`+ow+U8+MI)},S8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},fS=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),k8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(nm(e)||D8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Tn(this,void 0,void 0,function(){var n,r,A,s,i=this;return xn(this,function(o){switch(o.label){case 0:return n=fS.isSameOrigin(e),r=!tm(e)&&this._options.useCORS===!0&&an.SUPPORT_CORS_IMAGES&&!n,A=!tm(e)&&!n&&!nm(e)&&typeof this._options.proxy=="string"&&an.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!tm(e)&&!nm(e)&&!A&&!r?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,l){var d=new Image;d.onload=function(){return a(d)},d.onerror=l,(L8(s)||r)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var o=an.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")s(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+A+" with status code "+a.status)},a.onerror=i;var l=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+l+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}a.send()})},t}(),R8=/^data:image\/svg\+xml/i,N8=/^data:image\/.*;base64,/i,P8=/^data:image\/.*/i,D8=function(t){return an.SUPPORT_SVG_DRAWING||!O8(t)},tm=function(t){return P8.test(t)},L8=function(t){return N8.test(t)},nm=function(t){return t.substr(0,4)==="blob"},O8=function(t){return t.substr(-3).toLowerCase()==="svg"||R8.test(t)},de=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),Bo=function(t,e,n){return new de(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Dd=function(){function t(e,n,r,A){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=A}return t.prototype.subdivide=function(e,n){var r=Bo(this.start,this.startControl,e),A=Bo(this.startControl,this.endControl,e),s=Bo(this.endControl,this.end,e),i=Bo(r,A,e),o=Bo(A,s,e),a=Bo(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),fr=function(t){return t.type===1},M8=function(){function t(e){var n=e.styles,r=e.bounds,A=Ll(n.borderTopLeftRadius,r.width,r.height),s=A[0],i=A[1],o=Ll(n.borderTopRightRadius,r.width,r.height),a=o[0],l=o[1],d=Ll(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],w=Ll(n.borderBottomLeftRadius,r.width,r.height),m=w[0],y=w[1],I=[];I.push((s+a)/r.width),I.push((m+h)/r.width),I.push((i+y)/r.height),I.push((l+f)/r.height);var B=Math.max.apply(Math,I);B>1&&(s/=B,i/=B,a/=B,l/=B,h/=B,f/=B,m/=B,y/=B);var v=r.width-a,_=r.height-f,k=r.width-h,U=r.height-y,N=n.borderTopWidth,C=n.borderRightWidth,x=n.borderBottomWidth,b=n.borderLeftWidth,Q=it(n.paddingTop,e.bounds.width),S=it(n.paddingRight,e.bounds.width),P=it(n.paddingBottom,e.bounds.width),T=it(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?gt(r.left+b/3,r.top+N/3,s-b/3,i-N/3,Je.TOP_LEFT):new de(r.left+b/3,r.top+N/3),this.topRightBorderDoubleOuterBox=s>0||i>0?gt(r.left+v,r.top+N/3,a-C/3,l-N/3,Je.TOP_RIGHT):new de(r.left+r.width-C/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?gt(r.left+k,r.top+_,h-C/3,f-x/3,Je.BOTTOM_RIGHT):new de(r.left+r.width-C/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=m>0||y>0?gt(r.left+b/3,r.top+U,m-b/3,y-x/3,Je.BOTTOM_LEFT):new de(r.left+b/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?gt(r.left+b*2/3,r.top+N*2/3,s-b*2/3,i-N*2/3,Je.TOP_LEFT):new de(r.left+b*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?gt(r.left+v,r.top+N*2/3,a-C*2/3,l-N*2/3,Je.TOP_RIGHT):new de(r.left+r.width-C*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?gt(r.left+k,r.top+_,h-C*2/3,f-x*2/3,Je.BOTTOM_RIGHT):new de(r.left+r.width-C*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||y>0?gt(r.left+b*2/3,r.top+U,m-b*2/3,y-x*2/3,Je.BOTTOM_LEFT):new de(r.left+b*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=s>0||i>0?gt(r.left+b/2,r.top+N/2,s-b/2,i-N/2,Je.TOP_LEFT):new de(r.left+b/2,r.top+N/2),this.topRightBorderStroke=s>0||i>0?gt(r.left+v,r.top+N/2,a-C/2,l-N/2,Je.TOP_RIGHT):new de(r.left+r.width-C/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?gt(r.left+k,r.top+_,h-C/2,f-x/2,Je.BOTTOM_RIGHT):new de(r.left+r.width-C/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=m>0||y>0?gt(r.left+b/2,r.top+U,m-b/2,y-x/2,Je.BOTTOM_LEFT):new de(r.left+b/2,r.top+r.height-x/2),this.topLeftBorderBox=s>0||i>0?gt(r.left,r.top,s,i,Je.TOP_LEFT):new de(r.left,r.top),this.topRightBorderBox=a>0||l>0?gt(r.left+v,r.top,a,l,Je.TOP_RIGHT):new de(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?gt(r.left+k,r.top+_,h,f,Je.BOTTOM_RIGHT):new de(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=m>0||y>0?gt(r.left,r.top+U,m,y,Je.BOTTOM_LEFT):new de(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?gt(r.left+b,r.top+N,Math.max(0,s-b),Math.max(0,i-N),Je.TOP_LEFT):new de(r.left+b,r.top+N),this.topRightPaddingBox=a>0||l>0?gt(r.left+Math.min(v,r.width-C),r.top+N,v>r.width+C?0:Math.max(0,a-C),Math.max(0,l-N),Je.TOP_RIGHT):new de(r.left+r.width-C,r.top+N),this.bottomRightPaddingBox=h>0||f>0?gt(r.left+Math.min(k,r.width-b),r.top+Math.min(_,r.height-x),Math.max(0,h-C),Math.max(0,f-x),Je.BOTTOM_RIGHT):new de(r.left+r.width-C,r.top+r.height-x),this.bottomLeftPaddingBox=m>0||y>0?gt(r.left+b,r.top+Math.min(U,r.height-x),Math.max(0,m-b),Math.max(0,y-x),Je.BOTTOM_LEFT):new de(r.left+b,r.top+r.height-x),this.topLeftContentBox=s>0||i>0?gt(r.left+b+T,r.top+N+Q,Math.max(0,s-(b+T)),Math.max(0,i-(N+Q)),Je.TOP_LEFT):new de(r.left+b+T,r.top+N+Q),this.topRightContentBox=a>0||l>0?gt(r.left+Math.min(v,r.width+b+T),r.top+N+Q,v>r.width+b+T?0:a-b+T,l-(N+Q),Je.TOP_RIGHT):new de(r.left+r.width-(C+S),r.top+N+Q),this.bottomRightContentBox=h>0||f>0?gt(r.left+Math.min(k,r.width-(b+T)),r.top+Math.min(_,r.height+N+Q),Math.max(0,h-(C+S)),f-(x+P),Je.BOTTOM_RIGHT):new de(r.left+r.width-(C+S),r.top+r.height-(x+P)),this.bottomLeftContentBox=m>0||y>0?gt(r.left+b+T,r.top+U,Math.max(0,m-(b+T)),y-(x+P),Je.BOTTOM_LEFT):new de(r.left+b+T,r.top+r.height-(x+P))}return t}(),Je;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Je||(Je={}));var gt=function(t,e,n,r,A){var s=4*((Math.sqrt(2)-1)/3),i=n*s,o=r*s,a=t+n,l=e+r;switch(A){case Je.TOP_LEFT:return new Dd(new de(t,l),new de(t,l-o),new de(a-i,e),new de(a,e));case Je.TOP_RIGHT:return new Dd(new de(t,e),new de(t+i,e),new de(a,l-o),new de(a,l));case Je.BOTTOM_RIGHT:return new Dd(new de(a,e),new de(a,e+o),new de(t+i,l),new de(t,l));case Je.BOTTOM_LEFT:default:return new Dd(new de(a,l),new de(a-i,l),new de(t,e+o),new de(t,e))}},pf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},V8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},mf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},H8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),Ld=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),j8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),K8=function(t){return t.type===0},gS=function(t){return t.type===1},G8=function(t){return t.type===2},VI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},z8=function(t,e,n,r,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+A);case 3:return s.add(e,n+A)}return s})},pS=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),mS=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new M8(this.container),this.container.styles.opacity<1&&this.effects.push(new j8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new H8(r,A,s))}if(this.container.styles.overflowX!==0){var i=pf(this.curves),o=mf(this.curves);VI(i,o)?this.effects.push(new Ld(i,6)):(this.effects.push(new Ld(i,2)),this.effects.push(new Ld(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,A=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!gS(a)});if(n||r.container.styles.position!==0||!r.parent){if(A.unshift.apply(A,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=pf(r.curves),o=mf(r.curves);VI(i,o)||A.unshift(new Ld(o,6))}}else A.unshift.apply(A,s);r=r.parent}return A.filter(function(a){return qt(a.target,e)})},t}(),aw=function(t,e,n,r){t.container.elements.forEach(function(A){var s=qt(A.flags,4),i=qt(A.flags,2),o=new mS(A,t);qt(A.styles.display,2048)&&r.push(o);var a=qt(A.flags,8)?[]:r;if(s||i){var l=s||A.styles.isPositioned()?n:e,d=new pS(o);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;l.negativeZIndex.some(function(m,y){return h>m.element.container.styles.zIndex.order?(f=y,!1):f>0}),l.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;l.positiveZIndex.some(function(m,y){return h>=m.element.container.styles.zIndex.order?(w=y+1,!1):w>0}),l.positiveZIndex.splice(w,0,d)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?l.nonPositionedFloats.push(d):l.nonPositionedInlineLevel.push(d);aw(o,d,s?d:n,a)}else A.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),aw(o,e,n,a);qt(A.flags,8)&&wS(A,a)})},wS=function(t,e){for(var n=t instanceof rw?t.start:1,r=t instanceof rw?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof tS&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=nu(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},W8=function(t){var e=new mS(t,null),n=new pS(e),r=[];return aw(e,n,n,r),wS(e.container,r),n},HI=function(t,e){switch(e){case 0:return wr(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return wr(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return wr(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return wr(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$8=function(t,e){switch(e){case 0:return wr(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return wr(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return wr(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return wr(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},q8=function(t,e){switch(e){case 0:return wr(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return wr(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return wr(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return wr(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},J8=function(t,e){switch(e){case 0:return Od(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Od(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Od(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Od(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Od=function(t,e){var n=[];return fr(t)?n.push(t.subdivide(.5,!1)):n.push(t),fr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},wr=function(t,e,n,r){var A=[];return fr(t)?A.push(t.subdivide(.5,!1)):A.push(t),fr(n)?A.push(n.subdivide(.5,!0)):A.push(n),fr(r)?A.push(r.subdivide(.5,!0).reverse()):A.push(r),fr(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},vS=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},wf=function(t){var e=t.styles,n=t.bounds,r=it(e.paddingLeft,n.width),A=it(e.paddingRight,n.width),s=it(e.paddingTop,n.width),i=it(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},X8=function(t,e){return t===0?e.bounds:t===2?wf(e):vS(e)},Y8=function(t,e){return t===0?e.bounds:t===2?wf(e):vS(e)},rm=function(t,e,n){var r=X8(Fo(t.styles.backgroundOrigin,e),t),A=Y8(Fo(t.styles.backgroundClip,e),t),s=Z8(Fo(t.styles.backgroundSize,e),n,r),i=s[0],o=s[1],a=Ll(Fo(t.styles.backgroundPosition,e),r.width-i,r.height-o),l=e9(Fo(t.styles.backgroundRepeat,e),a,s,r,A),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[l,d,h,i,o]},xo=function(t){return et(t)&&t.value===na.AUTO},Md=function(t){return typeof t=="number"},Z8=function(t,e,n){var r=e[0],A=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Gt(i)&&o&&Gt(o))return[it(i,n.width),it(o,n.height)];var a=Md(s);if(et(i)&&(i.value===na.CONTAIN||i.value===na.COVER)){if(Md(s)){var l=n.width/n.height;return l<s!=(i.value===na.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=Md(r),h=Md(A),f=d||h;if(xo(i)&&(!o||xo(o))){if(d&&h)return[r,A];if(!a&&!f)return[n.width,n.height];if(f&&a){var w=d?r:A*s,m=h?A:r/s;return[w,m]}var y=d?r:n.width,I=h?A:n.height;return[y,I]}if(a){var B=0,v=0;return Gt(i)?B=it(i,n.width):Gt(o)&&(v=it(o,n.height)),xo(i)?B=v*s:(!o||xo(o))&&(v=B/s),[B,v]}var _=null,k=null;if(Gt(i)?_=it(i,n.width):o&&Gt(o)&&(k=it(o,n.height)),_!==null&&(!o||xo(o))&&(k=d&&h?_/r*A:n.height),k!==null&&xo(i)&&(_=d&&h?k/A*r:n.width),_!==null&&k!==null)return[_,k];throw new Error("Unable to calculate background-size for element")},Fo=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},e9=function(t,e,n,r,A){var s=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new de(Math.round(r.left),Math.round(r.top+i)),new de(Math.round(r.left+r.width),Math.round(r.top+i)),new de(Math.round(r.left+r.width),Math.round(a+r.top+i)),new de(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new de(Math.round(r.left+s),Math.round(r.top)),new de(Math.round(r.left+s+o),Math.round(r.top)),new de(Math.round(r.left+s+o),Math.round(r.height+r.top)),new de(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new de(Math.round(r.left+s),Math.round(r.top+i)),new de(Math.round(r.left+s+o),Math.round(r.top+i)),new de(Math.round(r.left+s+o),Math.round(r.top+i+a)),new de(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new de(Math.round(A.left),Math.round(A.top)),new de(Math.round(A.left+A.width),Math.round(A.top)),new de(Math.round(A.left+A.width),Math.round(A.height+A.top)),new de(Math.round(A.left),Math.round(A.height+A.top))]}},t9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jI="Hidden Text",n9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),A.src=t9,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(jI)),r.appendChild(s),r.appendChild(A);var o=A.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(jI)),r.style.lineHeight="normal",A.style.verticalAlign="super";var a=A.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),yS=function(){function t(e,n){this.context=e,this.options=n}return t}(),r9=1e4,A9=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A._activeEffects=[],A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),r.canvas||(A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px"),A.fontMetrics=new n9(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),A}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(A){return r.applyEffect(A)})},e.prototype.applyEffect=function(n){this.ctx.save(),G8(n)&&(this.ctx.globalAlpha=n.opacity),K8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),gS(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Tn(this,void 0,void 0,function(){var r;return xn(this,function(A){switch(A.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Tn(this,void 0,void 0,function(){return xn(this,function(r){switch(r.label){case 0:if(qt(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,A){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+A);else{var i=jy(n.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,n.bounds.top+A),o+s.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=l9(n.fontFamily).join(", "),s=Qu(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(n,r){return Tn(this,void 0,void 0,function(){var A,s,i,o,a,l,d,h,f=this;return xn(this,function(w){return A=this.createFontStyle(r),s=A[0],i=A[1],o=A[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),l=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(m){h.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=Zt(r.color),f.renderTextWithLetterSpacing(m,r.letterSpacing,l);var I=r.textShadow;I.length&&m.text.trim().length&&(I.slice(0).reverse().forEach(function(B){f.ctx.shadowColor=Zt(B.color),f.ctx.shadowOffsetX=B.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=B.offsetY.number*f.options.scale,f.ctx.shadowBlur=B.blur.number,f.renderTextWithLetterSpacing(m,r.letterSpacing,l)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=Zt(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(B){switch(B){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+l),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=Zt(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+l)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,A){if(A&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=wf(n),i=mf(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Tn(this,void 0,void 0,function(){var r,A,s,i,o,a,v,v,l,d,h,f,k,w,m,U,y,I,B,v,_,k,U;return xn(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,A=n.curves,s=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof YQ))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=N.sent(),this.renderReplacedElement(r,A,v),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof ZQ&&this.renderReplacedElement(r,A,r.canvas),!(r instanceof eS))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=N.sent(),this.renderReplacedElement(r,A,v),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof AS&&r.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,l.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof Ky&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===df?r.checked&&(this.ctx.save(),this.path([new de(r.bounds.left+h*.39363,r.bounds.top+h*.79),new de(r.bounds.left+h*.16,r.bounds.top+h*.5549),new de(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new de(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new de(r.bounds.left+h*.72983,r.bounds.top+h*.23),new de(r.bounds.left+h*.84,r.bounds.top+h*.34085),new de(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=Zt(UI),this.ctx.fill(),this.ctx.restore()):r.type===hf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Zt(UI),this.ctx.fill(),this.ctx.restore())),s9(r)&&r.value.length){switch(f=this.createFontStyle(s),k=f[0],w=f[1],m=this.fontMetrics.getMetrics(k,w).baseline,this.ctx.font=k,this.ctx.fillStyle=Zt(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=o9(r.styles.textAlign),U=wf(r),y=0,r.styles.textAlign){case 1:y+=U.width/2;break;case 2:y+=U.width;break}I=U.add(y,0,0,-U.height/2+1),this.ctx.save(),this.path([new de(U.left,U.top),new de(U.left+U.width,U.top),new de(U.left+U.width,U.top+U.height),new de(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new cc(r.value,I),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!qt(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(B=r.styles.listStyleImage,B.type!==0)return[3,18];v=void 0,_=B.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return v=N.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(k=this.createFontStyle(s)[0],this.ctx.font=k,this.ctx.fillStyle=Zt(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new QA(r.bounds.left,r.bounds.top+it(r.styles.paddingTop,r.bounds.width),r.bounds.width,hI(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new cc(n.listValue,U),s.letterSpacing,hI(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Tn(this,void 0,void 0,function(){var r,A,B,s,i,B,o,a,B,l,d,B,h,f,B,w,m,B,y,I,B;return xn(this,function(v){switch(v.label){case 0:if(qt(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:v.sent(),r=0,A=n.negativeZIndex,v.label=2;case 2:return r<A.length?(B=A[r],[4,this.renderStack(B)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:v.sent(),s=0,i=n.nonInlineLevel,v.label=7;case 7:return s<i.length?(B=i[s],[4,this.renderNode(B)]):[3,10];case 8:v.sent(),v.label=9;case 9:return s++,[3,7];case 10:o=0,a=n.nonPositionedFloats,v.label=11;case 11:return o<a.length?(B=a[o],[4,this.renderStack(B)]):[3,14];case 12:v.sent(),v.label=13;case 13:return o++,[3,11];case 14:l=0,d=n.nonPositionedInlineLevel,v.label=15;case 15:return l<d.length?(B=d[l],[4,this.renderStack(B)]):[3,18];case 16:v.sent(),v.label=17;case 17:return l++,[3,15];case 18:h=0,f=n.inlineLevel,v.label=19;case 19:return h<f.length?(B=f[h],[4,this.renderNode(B)]):[3,22];case 20:v.sent(),v.label=21;case 21:return h++,[3,19];case 22:w=0,m=n.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return w<m.length?(B=m[w],[4,this.renderStack(B)]):[3,26];case 24:v.sent(),v.label=25;case 25:return w++,[3,23];case 26:y=0,I=n.positiveZIndex,v.label=27;case 27:return y<I.length?(B=I[y],[4,this.renderStack(B)]):[3,30];case 28:v.sent(),v.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(A,s){var i=fr(A)?A.start:A;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),fr(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(n,r,A,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(n,r,A){var s;if(n.width===r&&n.height===A)return n;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,A);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,A),o},e.prototype.renderBackgroundImage=function(n){return Tn(this,void 0,void 0,function(){var r,A,s,i,o,a;return xn(this,function(l){switch(l.label){case 0:r=n.styles.backgroundImage.length-1,A=function(d){var h,f,w,Q,ee,Te,T,Fe,x,m,Q,ee,Te,T,Fe,y,I,B,v,_,k,U,N,C,x,b,Q,S,P,T,Fe,We,ee,Te,G,F,D,V,q,W,ge,he;return xn(this,function(Ee){switch(Ee.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=Ee.sent(),[3,4];case 3:return Ee.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=rm(n,r,[h.width,h.height,h.width/h.height]),Q=w[0],ee=w[1],Te=w[2],T=w[3],Fe=w[4],x=s.ctx.createPattern(s.resizeImage(h,T,Fe),"repeat"),s.renderRepeat(Q,x,ee,Te)),[3,6];case 5:K5(d)?(m=rm(n,r,[null,null,null]),Q=m[0],ee=m[1],Te=m[2],T=m[3],Fe=m[4],y=O5(d.angle,T,Fe),I=y[0],B=y[1],v=y[2],_=y[3],k=y[4],U=document.createElement("canvas"),U.width=T,U.height=Fe,N=U.getContext("2d"),C=N.createLinearGradient(B,_,v,k),uI(d.stops,I).forEach(function(xe){return C.addColorStop(xe.stop,Zt(xe.color))}),N.fillStyle=C,N.fillRect(0,0,T,Fe),T>0&&Fe>0&&(x=s.ctx.createPattern(U,"repeat"),s.renderRepeat(Q,x,ee,Te))):G5(d)&&(b=rm(n,r,[null,null,null]),Q=b[0],S=b[1],P=b[2],T=b[3],Fe=b[4],We=d.position.length===0?[My]:d.position,ee=it(We[0],T),Te=it(We[We.length-1],Fe),G=M5(d,ee,Te,T,Fe),F=G[0],D=G[1],F>0&&D>0&&(V=s.ctx.createRadialGradient(S+ee,P+Te,0,S+ee,P+Te,F),uI(d.stops,F*2).forEach(function(xe){return V.addColorStop(xe.stop,Zt(xe.color))}),s.path(Q),s.ctx.fillStyle=V,F!==D?(q=n.bounds.left+.5*n.bounds.width,W=n.bounds.top+.5*n.bounds.height,ge=D/F,he=1/ge,s.ctx.save(),s.ctx.translate(q,W),s.ctx.transform(1,0,0,ge,0,0),s.ctx.translate(-q,-W),s.ctx.fillRect(S,he*(P-W)+W,T,Fe*he),s.ctx.restore()):s.ctx.fill())),Ee.label=6;case 6:return r--,[2]}})},s=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return i<o.length?(a=o[i],[5,A(a)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,A){return Tn(this,void 0,void 0,function(){return xn(this,function(s){return this.path(HI(A,r)),this.ctx.fillStyle=Zt(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,A,s){return Tn(this,void 0,void 0,function(){var i,o;return xn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,A,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=$8(s,A),this.path(i),this.ctx.fillStyle=Zt(n),this.ctx.fill(),o=q8(s,A),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Tn(this,void 0,void 0,function(){var r,A,s,i,o,a,l,d,h=this;return xn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,A=!Cs(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=i9(Fo(r.backgroundClip,0),n.curves),A||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Cs(r.backgroundColor)||(this.ctx.fillStyle=Zt(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var m=pf(n.curves),y=w.inset?0:r9,I=z8(m,-y+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(m),h.ctx.clip(),h.mask(I)):(h.mask(m),h.ctx.clip(),h.path(I)),h.ctx.shadowOffsetX=w.offsetX.number+y,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=Zt(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?Zt(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,l=s,f.label=3;case 3:return a<l.length?(d=l[a],d.style!==0&&!Cs(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,A,s,i){return Tn(this,void 0,void 0,function(){var o,a,l,d,h,f,w,m,y,I,B,v,_,k,U,N,U,N;return xn(this,function(C){return this.ctx.save(),o=J8(s,A),a=HI(s,A),i===2&&(this.path(a),this.ctx.clip()),fr(a[0])?(l=a[0].start.x,d=a[0].start.y):(l=a[0].x,d=a[0].y),fr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),A===0||A===2?w=Math.abs(l-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),m=r<3?r*3:r*2,y=r<3?r*2:r,i===3&&(m=r,y=r),I=!0,w<=m*2?I=!1:w<=m*2+y?(B=w/(2*m+y),m*=B,y*=B):(v=Math.floor((w+y)/(m+y)),_=(w-v*m)/(v-1),k=(w-(v+1)*m)/v,y=k<=0||Math.abs(y-_)<Math.abs(y-k)?_:k),I&&(i===3?this.ctx.setLineDash([0,m+y]):this.ctx.setLineDash([m,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Zt(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(fr(a[0])&&(U=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new de(U.end.x,U.end.y),new de(N.start.x,N.start.y)]),this.ctx.stroke()),fr(a[1])&&(U=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new de(U.end.x,U.end.y),new de(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Tn(this,void 0,void 0,function(){var r;return xn(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Zt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=W8(n),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yS),s9=function(t){return t instanceof rS||t instanceof nS?!0:t instanceof Ky&&t.type!==hf&&t.type!==df},i9=function(t,e){switch(t){case 0:return pf(e);case 2:return V8(e);case 1:default:return mf(e)}},o9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},a9=["-apple-system","system-ui"],l9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return a9.indexOf(e)===-1}):t},c9=function(t){Dr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=r,A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),A}return e.prototype.render=function(n){return Tn(this,void 0,void 0,function(){var r,A;return xn(this,function(s){switch(s.label){case 0:return r=nw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,u9(r)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Zt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yS),u9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},d9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,wd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,wd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,wd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,wd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),h9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new d9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new k8(this,e)}return t.instanceCount=1,t}(),f9=function(t,e){return e===void 0&&(e={}),g9(t,e)};typeof window<"u"&&fS.setContext(window);var g9=function(t,e){return Tn(void 0,void 0,void 0,function(){var n,r,A,s,i,o,a,l,d,h,f,w,m,y,I,B,v,_,k,U,C,N,C,x,b,Q,S,P,T,Fe,We,ee,Te,G,F,D,V,q,W,ge;return xn(this,function(he){switch(he.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return A={allowTaint:(x=e.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(b=e.imageTimeout)!==null&&b!==void 0?b:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=V0({logging:(S=e.logging)!==null&&S!==void 0?S:!0,cache:e.cache},A),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(Fe=e.scrollX)!==null&&Fe!==void 0?Fe:r.pageXOffset,scrollY:(We=e.scrollY)!==null&&We!==void 0?We:r.pageYOffset},o=new QA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new h9(s,o),l=(ee=e.foreignObjectRendering)!==null&&ee!==void 0?ee:!1,d={allowTaint:(Te=e.allowTaint)!==null&&Te!==void 0?Te:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new OI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=he.sent(),m=Gy(f)||p8(f)?zK(f.ownerDocument):xg(a,f),y=m.width,I=m.height,B=m.left,v=m.top,_=p9(a,f,e.backgroundColor),k={canvas:e.canvas,backgroundColor:_,scale:(F=(G=e.scale)!==null&&G!==void 0?G:r.devicePixelRatio)!==null&&F!==void 0?F:1,x:((D=e.x)!==null&&D!==void 0?D:0)+B,y:((V=e.y)!==null&&V!==void 0?V:0)+v,width:(q=e.width)!==null&&q!==void 0?q:Math.ceil(y),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(I)},l?(a.logger.debug("Document cloned, using foreign object rendering"),C=new c9(a,k),[4,C.render(f)]):[3,3];case 2:return U=he.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+B+","+v+" with size "+y+"x"+I+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=iS(a,f),_===N.styles.backgroundColor&&(N.styles.backgroundColor=xA.TRANSPARENT),a.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),C=new A9(a,k),[4,C.render(N)];case 4:U=he.sent(),he.label=5;case 5:return(!((ge=e.removeContainer)!==null&&ge!==void 0)||ge)&&(OI.destroy(w)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,U]}})})},p9=function(t,e,n){var r=e.ownerDocument,A=r.documentElement?ac(t,getComputedStyle(r.documentElement).backgroundColor):xA.TRANSPARENT,s=r.body?ac(t,getComputedStyle(r.body).backgroundColor):xA.TRANSPARENT,i=typeof n=="string"?ac(t,n):n===null?xA.TRANSPARENT:4294967295;return e===r.documentElement?Cs(A)?Cs(s)?i:s:A:i},m9=Object.defineProperty,vf=Object.getOwnPropertySymbols,BS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,KI=(t,e,n)=>e in t?m9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w9=(t,e)=>{for(var n in e||(e={}))BS.call(e,n)&&KI(t,n,e[n]);if(vf)for(var n of vf(e))xS.call(e,n)&&KI(t,n,e[n]);return t},v9=(t,e)=>{var n={};for(var r in t)BS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&vf)for(var r of vf(t))e.indexOf(r)<0&&xS.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var $i;(t=>{const e=class{constructor(a,l,d,h){if(this.version=a,this.errorCorrectionLevel=l,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let m=0;m<this.size;m++)f.push(!1);for(let m=0;m<this.size;m++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let m=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const I=this.getPenaltyScore();I<m&&(h=y,m=I),this.applyMask(y)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,l){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,l)}static encodeBinary(a,l){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],l)}static encodeSegments(a,l,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let m,y;for(m=d;;m++){const _=e.getNumDataCodewords(m,l)*8,k=o.getTotalBits(a,m);if(k<=_){y=k;break}if(m>=h)throw new RangeError("Data too long")}for(const _ of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&y<=e.getNumDataCodewords(m,_)*8&&(l=_);let I=[];for(const _ of a){r(_.mode.modeBits,4,I),r(_.numChars,_.mode.numCharCountBits(m),I);for(const k of _.getData())I.push(k)}s(I.length==y);const B=e.getNumDataCodewords(m,l)*8;s(I.length<=B),r(0,Math.min(4,B-I.length),I),r(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let _=236;I.length<B;_^=253)r(_,8,I);let v=[];for(;v.length*8<I.length;)v.push(0);return I.forEach((_,k)=>v[k>>>3]|=_<<7-(k&7)),new e(m,l,v,f)}getModule(a,l){return 0<=a&&a<this.size&&0<=l&&l<this.size&&this.modules[l][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),l=a.length;for(let d=0;d<l;d++)for(let h=0;h<l;h++)d==0&&h==0||d==0&&h==l-1||d==l-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const l=this.errorCorrectionLevel.formatBits<<3|a;let d=l;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(l<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const l=this.version<<12|a;s(l>>>18==0);for(let d=0;d<18;d++){const h=A(l,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(a,l){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=a+h,m=l+d;0<=w&&w<this.size&&0<=m&&m<this.size&&this.setFunctionModule(w,m,f!=2&&f!=4)}}drawAlignmentPattern(a,l){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,l+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,l,d){this.modules[l][a]=d,this.isFunction[l][a]=!0}addEccAndInterleave(a){const l=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(l,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][l],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][l],w=Math.floor(e.getNumRawDataModules(l)/8),m=h-w%h,y=Math.floor(w/h);let I=[];const B=e.reedSolomonComputeDivisor(f);for(let _=0,k=0;_<h;_++){let U=a.slice(k,k+y-f+(_<m?0:1));k+=U.length;const N=e.reedSolomonComputeRemainder(U,B);_<m&&U.push(0),I.push(U.concat(N))}let v=[];for(let _=0;_<I[0].length;_++)I.forEach((k,U)=>{(_!=y-f||U>=m)&&v.push(k[_])});return s(v.length==w),v}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let l=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,y=(d+1&2)==0?this.size-1-h:h;!this.isFunction[y][w]&&l<a.length*8&&(this.modules[y][w]=A(a[l>>>3],7-(l&7)),l++)}}s(l==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let l=0;l<this.size;l++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+l)%2==0;break;case 1:h=l%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+l)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(l/2))%2==0;break;case 5:h=d*l%2+d*l%3==0;break;case 6:h=(d*l%2+d*l%3)%2==0;break;case 7:h=((d+l)%2+d*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][d]&&h&&(this.modules[l][d]=!this.modules[l][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let w=!1,m=0,y=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[f][I]==w?(m++,m==5?a+=e.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,y),w||(a+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),w=this.modules[f][I],m=1);a+=this.finderPenaltyTerminateAndCount(w,m,y)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,m=0,y=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][f]==w?(m++,m==5?a+=e.PENALTY_N1:m>5&&a++):(this.finderPenaltyAddHistory(m,y),w||(a+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),w=this.modules[I][f],m=1);a+=this.finderPenaltyTerminateAndCount(w,m,y)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const m=this.modules[f][w];m==this.modules[f][w+1]&&m==this.modules[f+1][w]&&m==this.modules[f+1][w+1]&&(a+=e.PENALTY_N2)}let l=0;for(const f of this.modules)l=f.reduce((w,m)=>w+(m?1:0),l);const d=this.size*this.size,h=Math.ceil(Math.abs(l*20-d*10)/d)-1;return s(0<=h&&h<=9),a+=h*e.PENALTY_N4,s(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,l=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=l)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let l=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;l-=(25*d-10)*d-55,a>=7&&(l-=36)}return s(208<=l&&l<=29648),l}static getNumDataCodewords(a,l){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[l.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let l=[];for(let h=0;h<a-1;h++)l.push(0);l.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<l.length;f++)l[f]=e.reedSolomonMultiply(l[f],d),f+1<l.length&&(l[f]^=l[f+1]);d=e.reedSolomonMultiply(d,2)}return l}static reedSolomonComputeRemainder(a,l){let d=l.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),l.forEach((w,m)=>d[m]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(a,l){if(a>>>8||l>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(l>>>h&1)*a;return s(d>>>8==0),d}finderPenaltyCountPatterns(a){const l=a[1];s(l<=this.size*3);const d=l>0&&a[2]==l&&a[3]==l*3&&a[4]==l&&a[5]==l;return(d&&a[0]>=l*4&&a[6]>=l?1:0)+(d&&a[6]>=l*4&&a[0]>=l?1:0)}finderPenaltyTerminateAndCount(a,l,d){return a&&(this.finderPenaltyAddHistory(l,d),l=0),l+=this.size,this.finderPenaltyAddHistory(l,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,l){l[0]==0&&(a+=this.size),l.pop(),l.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,l,d){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let h=l-1;h>=0;h--)d.push(a>>>h&1)}function A(a,l){return(a>>>l&1)!=0}function s(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,l,d){if(this.mode=a,this.numChars=l,this.bitData=d,l<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let l=[];for(const d of a)r(d,8,l);return new i(i.Mode.BYTE,a.length,l)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let l=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,l),d+=h}return new i(i.Mode.NUMERIC,a.length,l)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let l=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,l)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,l),new i(i.Mode.ALPHANUMERIC,a.length,l)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let l=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,l);else if(a<16384)r(2,2,l),r(a,14,l);else if(a<1e6)r(6,3,l),r(a,21,l);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,l)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,l){let d=0;for(const h of a){const f=h.mode.numCharCountBits(l);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let l=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?l.push(a.charCodeAt(d)):(l.push(parseInt(a.substr(d+1,2),16)),d+=2);return l}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})($i||($i={}));(t=>{(e=>{const n=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})($i||($i={}));(t=>{(e=>{const n=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})($i||($i={}));var Vl=$i;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var y9={L:Vl.QrCode.Ecc.LOW,M:Vl.QrCode.Ecc.MEDIUM,Q:Vl.QrCode.Ecc.QUARTILE,H:Vl.QrCode.Ecc.HIGH},B9=128,x9="L",_9="#FFFFFF",C9="#000000",I9=!1,_S=4,E9=.1;function b9(t,e=0){const n=[];return t.forEach(function(r,A){let s=null;r.forEach(function(i,o){if(!i&&s!==null){n.push(`M${s+e} ${A+e}h${o-s}v1H${s+e}z`),s=null;return}if(o===r.length-1){if(!i)return;s===null?n.push(`M${o+e},${A+e} h1v1H${o+e}z`):n.push(`M${s+e},${A+e} h${o+1-s}v1H${s+e}z`);return}i&&s===null&&(s=o)})}),n.join("")}function T9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function F9(t,e,n,r){if(r==null)return null;const A=n?_S:0,s=t.length+A*2,i=Math.floor(e*E9),o=s/e,a=(r.width||i)*o,l=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-l/2:r.y*o;let f=null;if(r.excavate){let w=Math.floor(d),m=Math.floor(h),y=Math.ceil(a+d-w),I=Math.ceil(l+h-m);f={x:w,y:m,w:y,h:I}}return{x:d,y:h,h:l,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function U9(t){const e=t,{value:n,size:r=B9,level:A=x9,bgColor:s=_9,fgColor:i=C9,includeMargin:o=I9,imageSettings:a}=e,l=v9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Vl.QrCode.encodeText(n,y9[A]).getModules();const h=o?_S:0,f=d.length+h*2,w=F9(d,r,o,a);let m=null;a!=null&&w!=null&&(w.excavation!=null&&(d=T9(d,w.excavation)),m=gi.createElement("image",{xlinkHref:a.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const y=b9(d,h);return gi.createElement("svg",w9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},l),gi.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),gi.createElement("path",{fill:i,d:y,shapeRendering:"crispEdges"}),m)}const Q9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,saveStaticData:i}=Js(),{schedule:o,substitutions:a,saveScheduleData:l}=Fu(),d=R.useRef(null),h=R.useRef(null),[f,w]=R.useState(new Date().toISOString().split("T")[0]),[m,y]=R.useState(!1),[I,B]=R.useState(!1),[v,_]=R.useState(""),[k,U]=R.useState(""),N=R.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,schedule:o,substitutions:a}),[t,e,n,r,A,s,o,a]),C=ee=>{var F;const Te=(F=ee.target.files)==null?void 0:F[0];if(!Te)return;const G=new FileReader;G.onload=async D=>{try{const V=JSON.parse(D.target.result);if(V.teachers&&V.schedule){if(window.confirm("    . ?")){const q={...cn,...V,rooms:V.rooms||cn.rooms,classes:V.classes||[],schedule:V.schedule||[],teachers:V.teachers||[],subjects:V.subjects||[],substitutions:V.substitutions||[],settings:{...cn.settings,...V.settings}};await i(q),await l(q),alert("  !")}}else alert("  .")}catch{alert("  .")}},G.readAsText(Te)},x=()=>{let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Sn.forEach(D=>{ee+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${D}</td></tr>`,[ae.First,ae.Second].forEach(V=>{const q=n.filter(W=>W.shift===V);q.length!==0&&(ee+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${V}</td></tr>`,ee+='<tr><th class="header"></th>',vA[V].forEach(W=>ee+=`<th class="header">${W} </th>`),ee+="</tr>",q.forEach(W=>{ee+=`<tr><td class="class-cell">${W.name}</td>`,vA[V].forEach(ge=>{const he=o.filter(Ee=>Ee.classId===W.id&&Ee.day===D&&Ee.shift===V&&Ee.period===ge);ee+='<td style="height: 60px;">',he.forEach(Ee=>{const xe=t.find(Le=>Le.id===Ee.subjectId),$e=e.find(Le=>Le.id===Ee.teacherId),Tt=r.find(Le=>Le.id===Ee.roomId),ke=Tt?Tt.name:Ee.roomId;ee+=`<div style="background-color: ${(xe==null?void 0:xe.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(xe==null?void 0:xe.name)||""} ${Ee.direction||""}</div>
                                <div class="meta">${($e==null?void 0:$e.name)||""} ${ke?`(. ${ke})`:""}</div>
                            </div>`}),ee+="</td>"}),ee+="</tr>"}))})}),ee+="</table></body></html>";const Te=new Blob([ee],{type:"application/vnd.ms-excel"}),G=URL.createObjectURL(Te),F=document.createElement("a");F.href=G,F.download="_22.xls",document.body.appendChild(F),F.click(),document.body.removeChild(F)},b=()=>{let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ae.First,ae.Second].forEach(D=>{const V=vA[D];ee+="<table>",ee+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Sn.length*V.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,ee+="<tr>",Sn.forEach(q=>{ee+=`<th colspan="${V.length}" class="header" style="border: 2px solid #000;">${q}</th>`}),ee+="</tr>",ee+="<tr>",Sn.forEach(()=>{V.forEach(q=>ee+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),ee+="</tr>",ee+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${D}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Sn.forEach(()=>{V.forEach(q=>ee+=`<th class="header" style="width: 40px;">${q}</th>`)}),ee+="</tr>",t.forEach(q=>{const W=e.filter(he=>he.subjectIds.includes(q.id));if(W.length===0)return;const ge=q.color||"#ffffff";W.forEach((he,Ee)=>{ee+="<tr>",Ee===0&&(ee+=`<td rowspan="${W.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${ge};">${q.name}</td>`),ee+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${he.name}</td>`,Sn.forEach(xe=>{V.forEach($e=>{const Tt=o.find(ke=>ke.teacherId===he.id&&ke.subjectId===q.id&&ke.day===xe&&ke.period===$e&&ke.shift===D);if(Tt){const ke=n.find(Ht=>Ht.id===Tt.classId),Le=r.find(Ht=>Ht.id===Tt.roomId),nt=Le?Le.name:Tt.roomId,Qe=nt?`<sub>${nt}</sub>`:"",_e=Tt.direction?` <span style="font-size:9px">(${Tt.direction})</span>`:"",At=q.color||"#ffffff";ee+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${At};">${ke?ke.name:""}${_e}${Qe}</td>`}else ee+='<td style="border: 1px solid #000;"></td>'})}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+Sn.length*V.length}" style="height: 2px; background-color: #000;"></td></tr>`}),ee+="</table><br/><br/>"}),ee+="</body></html>";const Te=new Blob([ee],{type:"application/vnd.ms-excel"}),G=URL.createObjectURL(Te),F=document.createElement("a");F.href=G,F.download="_.xls",document.body.appendChild(F),F.click(),document.body.removeChild(F)},Q=()=>{let ee=`							
`;Sn.forEach(Te=>{[ae.First,ae.Second].forEach(G=>{n.filter(D=>D.shift===G).forEach(D=>{vA[G].forEach(V=>{o.filter(W=>W.classId===D.id&&W.day===Te&&W.shift===G&&W.period===V).forEach(W=>{const ge=t.find($e=>$e.id===W.subjectId),he=e.find($e=>$e.id===W.teacherId),Ee=r.find($e=>$e.id===W.roomId),xe=Ee?Ee.name:W.roomId||"";ee+=`${Te}	${G}	${D.name}	${V}	${(ge==null?void 0:ge.name)||""}	${(he==null?void 0:he.name)||""}	${xe}	${W.direction||""}
`})})})})}),navigator.clipboard.writeText(ee).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},S=async()=>{if(h.current){y(!0);try{const ee=await f9(h.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),Te=document.createElement("a");Te.download=`_${f}.png`,Te.href=ee.toDataURL("image/png"),Te.click()}catch(ee){console.error(ee),alert("   ")}y(!1)}},P=R.useMemo(()=>a.filter(ee=>ee.date===f),[a,f]),T=ee=>{const Te=P.filter(G=>{const F=o.find(D=>D.id===G.scheduleItemId);return F&&F.shift===ee}).filter(G=>G.replacementTeacherId!=="conducted");return Te.length===0?null:c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:ee}),c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200",children:[c.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),c.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),c.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),c.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),c.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),c.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:Te.map(G=>{var Qe;const F=o.find(_e=>_e.id===G.scheduleItemId);if(!F)return null;const D=n.find(_e=>_e.id===F.classId),V=t.find(_e=>_e.id===F.subjectId),q=e.find(_e=>_e.id===G.originalTeacherId),W=G.replacementRoomId,ge=F.roomId?r.find(_e=>_e.id===F.roomId):null,he=ge?ge.name:F.roomId||"",Ee=W?r.find(_e=>_e.id===W):null,xe=Ee?Ee.name:W||"",$e=G.replacementTeacherId==="cancelled",Tt=$e?{name:" "}:e.find(_e=>_e.id===G.replacementTeacherId),ke=(Qe=q==null?void 0:q.absenceReasons)==null?void 0:Qe[f],Le=ke&&ke===" "?ke:"",nt=G.replacementTeacherId===G.originalTeacherId&&W;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:F.period}),c.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:D==null?void 0:D.name}),c.jsxs("td",{className:"py-3 px-2",children:[c.jsx("div",{className:"font-semibold text-slate-800",children:V==null?void 0:V.name}),F.direction&&c.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:F.direction})]}),c.jsx("td",{className:"py-3 px-2",children:!nt&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-red-400 line-through text-sm font-medium decoration-red-200",children:q==null?void 0:q.name}),Le&&c.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:Le})]})}),c.jsx("td",{className:`py-3 px-2 font-bold text-sm ${$e?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:nt?c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-800",children:q==null?void 0:q.name}),c.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):Tt==null?void 0:Tt.name}),c.jsx("td",{className:`py-3 px-2 text-right font-mono ${W?"font-black text-indigo-600":"text-slate-500"}`,children:W&&W!==F.roomId?c.jsxs("span",{children:[c.jsx("span",{className:"text-slate-400 line-through mr-1 decoration-slate-300 decoration-2 opacity-70 text-xs",children:he}),c.jsxs("span",{className:"text-indigo-600 font-black text-sm",children:[" ",xe]})]}):he})]},G.id)})})]})]})},Fe=async()=>{const ee=Math.random().toString(36).substr(2,9);await Ti.setPublicData(ee,N),await i({settings:{...A,publicScheduleId:ee}});const Te=`${window.location.origin}${window.location.pathname}#/public?id=${ee}`;_(Te),U(ee),B(!0)},We=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await Ti.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),_(""),U(""))};return c.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[c.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(J,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsxs("button",{onClick:()=>Ti.exportJson(N),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[c.jsx(J,{name:"Download",size:20}),"  JSON"]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"file",ref:d,onChange:C,accept:".json",className:"hidden"}),c.jsxs("button",{onClick:()=>{var ee;return(ee=d.current)==null?void 0:ee.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[c.jsx(J,{name:"Upload",size:20}),"  JSON"]})]})]})]}),c.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx(J,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("input",{type:"date",value:f,onChange:ee=>w(ee.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),c.jsx("button",{onClick:S,disabled:m,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?c.jsxs(c.Fragment,{children:[c.jsx(J,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):c.jsxs(c.Fragment,{children:[c.jsx(J,{name:"Download",size:20}),"  PNG"]})})]})]}),c.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-center",children:c.jsxs("div",{ref:h,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[c.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),c.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:"   "})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),c.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),P.length===0?c.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:c.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}):c.jsxs(c.Fragment,{children:[T(ae.First),T(ae.Second)]}),c.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[c.jsx("div",{children:" "}),c.jsxs("div",{className:"flex flex-col items-end gap-2",children:[c.jsx("div",{className:"h-px w-32 bg-slate-300"}),c.jsx("div",{children:" "})]})]})]})})]}),c.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(J,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsxs("button",{onClick:x,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[c.jsx(J,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),c.jsxs("button",{onClick:b,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[c.jsx(J,{name:"Table",size:20}),"   (XLS)"]}),c.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[c.jsx(J,{name:"Clipboard",size:20}),"   Google Sheets"]})]})]}),c.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(J,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?c.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",c.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),c.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[c.jsx(J,{name:"Share2",size:16}),"  QR-  "]}),c.jsxs("button",{onClick:We,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[c.jsx(J,{name:"Trash2",size:16}),"  "]})]})}):c.jsxs("button",{onClick:Fe,disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[c.jsx(J,{name:"Share2",size:20}),"  "]})]}),c.jsx(xs,{isOpen:I,onClose:()=>B(!1),title:" ",children:c.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),v&&c.jsxs(c.Fragment,{children:[c.jsx(U9,{value:v,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:v}),c.jsxs("button",{onClick:()=>navigator.clipboard.writeText(v),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[c.jsx(J,{name:"Copy",size:16}),"  "]})]})]})})]})},S9=()=>{var w;const{subjects:t,teachers:e,classes:n}=Js(),{schedule:r,substitutions:A}=Fu(),[s,i]=R.useState("load"),[o,a]=R.useState(((w=n[0])==null?void 0:w.id)||""),l=R.useMemo(()=>e.map(y=>{const I=r.filter(C=>C.teacherId===y.id),B=I.length,v=B*4,_=A.filter(C=>C.replacementTeacherId===y.id).length,k=A.filter(C=>C.originalTeacherId===y.id).length,U=v+_-k,N={};return I.forEach(C=>{const x=t.find(b=>b.id===C.subjectId);x&&(N[x.name]=(N[x.name]||0)+1)}),{id:y.id,name:y.name,weeklyHours:B,subsTaken:_,subsMissed:k,actualHours:U,subjectBreakdown:N}}).sort((y,I)=>I.actualHours-y.actualHours),[e,r,A,t]),d=R.useMemo(()=>o?Sn.map(m=>{const I=r.filter(B=>B.classId===o&&B.day===m).reduce((B,v)=>{const _=t.find(k=>k.id===v.subjectId);return B+((_==null?void 0:_.difficulty)||5)},0);return{label:m,value:I}}):[],[r,t,o]),h=R.useMemo(()=>{const m=e.map(I=>({name:I.name,count:A.filter(B=>B.replacementTeacherId===I.id).length})).sort((I,B)=>B.count-I.count).slice(0,5),y=e.map(I=>({name:I.name,count:I.unavailableDates.length})).sort((I,B)=>B.count-I.count).slice(0,5);return{heroes:m,absentees:y}},[e,A]),f=()=>{let m="";s==="load"?m=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+l.map(B=>`"${B.name}",${B.weeklyHours},${B.subsTaken},${B.subsMissed},${B.actualHours},"${Object.entries(B.subjectBreakdown).map(([v,_])=>v+": "+_).join(", ")}"`).join(`
`):s==="sanpin"&&(m=`Day,Score
`+d.map(B=>`${B.label},${B.value}`).join(`
`));const y=new Blob([`\uFEFF${m}`],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a");I.href=URL.createObjectURL(y),I.download=`report_${s}.csv`,document.body.appendChild(I),I.click(),document.body.removeChild(I)};return c.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[c.jsx(J,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),c.jsxs("button",{onClick:f,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2",children:[c.jsx(J,{name:"FileSpreadsheet",size:16}),"  CSV"]})]}),c.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[c.jsx("button",{onClick:()=>i("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),c.jsx("button",{onClick:()=>i("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),c.jsx("button",{onClick:()=>i("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${s==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),s==="load"&&c.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),c.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),c.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),c.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),c.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),c.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:l.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:m.name}),c.jsx("td",{className:"p-4 text-right font-mono",children:m.weeklyHours}),c.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",m.subsTaken]}),c.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",m.subsMissed]}),c.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:m.actualHours}),c.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:c.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(m.subjectBreakdown).map(([y,I])=>c.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[y,": ",I]},y))})})]},m.id))})]})}),s==="sanpin"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),c.jsx("select",{value:o,onChange:m=>a(m.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(m=>c.jsx("option",{value:m.id,children:m.name},m.id))})]}),c.jsx(Pp,{items:d,max:60,barClassName:"bg-indigo-500"}),c.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),c.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[c.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),c.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[c.jsxs("li",{className:"flex gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),s==="rating"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[c.jsx(J,{name:"TrendingUp",size:20}),"   ( 5)"]}),c.jsx(Pp,{items:h.heroes.map(m=>({label:m.name,value:m.count})),max:Math.max(...h.heroes.map(m=>m.count),1),barClassName:"bg-emerald-500"})]}),c.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[c.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[c.jsx(J,{name:"Activity",size:20}),"  ( 5)"]}),c.jsx(Pp,{items:h.absentees.map(m=>({label:m.name,value:m.count})),max:Math.max(...h.absentees.map(m=>m.count),1),barClassName:"bg-red-500"})]})]})]})},k9=()=>{const{setGuestRole:t,role:e,loading:n}=yg(),r=ka(),[A,s]=R.useState("select"),[i,o]=R.useState(""),[a,l]=R.useState(""),[d,h]=R.useState(""),[f,w]=R.useState(!1);R.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const m=async I=>{I.preventDefault(),h(""),w(!0);try{let B=i;A==="teacher"&&(B="teacher@gymnasium22.com"),await uh.signInWithEmailAndPassword(B,a)}catch(B){console.error("Firebase Auth Error:",B);const v=B.code;let _="   .";switch(v){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":_="   .     .";break;case"auth/invalid-email":_="  email .";break;case"auth/too-many-requests":_="   .  .";break;default:_=" .       Firebase."}h(_)}finally{w(!1)}},y=()=>{t(),r("/schedule")};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:c.jsx(J,{name:"GraduationCap",size:48})}),c.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),A==="select"&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:y,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[c.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:c.jsx(J,{name:"Users",size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),c.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[c.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:c.jsx(J,{name:"BookOpen",size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),c.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[c.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:c.jsx(J,{name:"Settings",size:24})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),A!=="select"&&c.jsxs("form",{onSubmit:m,className:"space-y-4 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:c.jsx(J,{name:"ArrowRight",className:"rotate-180",size:20})}),c.jsx("h2",{className:"font-bold text-lg dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:i,onChange:I=>o(I.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),c.jsx("input",{type:"password",value:a,onChange:I=>l(I.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&c.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),c.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&c.jsx(J,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},R9=()=>{const[t,e]=R.useState(!1),[n,r]=R.useState(localStorage.getItem("theme")||"light"),{isLoading:A,isReadOnly:s}=hQ(),{role:i,logout:o}=yg(),a=ka();R.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const l=async()=>{await o(),a("/login")};if(A)return c.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:c.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:"",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(i||"guest"));return c.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&c.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),c.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:c.jsxs("div",{className:"h-full flex flex-col",children:[c.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[c.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:c.jsx(J,{name:"GraduationCap",size:24})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),c.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-1",children:h.map(f=>c.jsxs(EN,{to:f.to,onClick:()=>e(!1),className:({isActive:w})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${w?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[c.jsx(J,{name:f.icon,size:20}),f.label]},f.to))}),c.jsx(RK,{}),c.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 px-2",children:n==="light"?c.jsxs(c.Fragment,{children:[c.jsx(J,{name:"Moon",size:16}),"  "]}):c.jsxs(c.Fragment,{children:[c.jsx(J,{name:"Sun",size:16}),"  "]})}),c.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-xs font-bold text-red-500 px-2 mt-2 hover:bg-red-50 dark:hover:bg-red-900/20 py-2 rounded-lg transition-colors",children:[c.jsx(J,{name:"UserX",size:16})," "]})]})]})}),c.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[c.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[c.jsx("button",{onClick:()=>e(!0),children:c.jsx(J,{name:"Menu",size:24})}),c.jsx("span",{className:"font-bold",children:""})]}),c.jsxs("div",{className:"flex-1 overflow-auto p-4 lg:p-8 relative",children:[s&&c.jsxs("div",{className:"absolute top-4 right-8 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 z-10 pointer-events-none no-print",children:[c.jsx(J,{name:"Eye",size:12}),"  "]}),c.jsx(uN,{})]})]})]})},ri=({children:t,allowedRoles:e})=>{const{role:n,loading:r}=yg();return r?c.jsx("div",{className:"h-screen flex items-center justify-center",children:c.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e.includes(n)?t:c.jsx(Zm,{to:"/schedule",replace:!0}):c.jsx(Zm,{to:"/login",replace:!0})},N9=()=>{const[t,e]=R.useState(null),[n,r]=R.useState(!0),[A]=FN(),s=A.get("id");return R.useEffect(()=>{s?(r(!0),Ti.getPublicData(s).then(i=>{const o={...cn,...i,settings:{...cn.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error(i),e(null),r(!1)})):(r(!1),e(null))},[s]),n?c.jsx("div",{className:"h-screen flex items-center justify-center",children:c.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?c.jsx(aQ,{initialData:t,children:c.jsx(uQ,{children:c.jsx(dQ,{children:c.jsx("div",{className:"min-h-screen bg-slate-50 p-4",children:c.jsx(mQ,{readOnly:!0})})})})}):c.jsx("div",{children:"  "})};function P9(){return c.jsx(QK,{children:c.jsx(aQ,{children:c.jsx(uQ,{children:c.jsx(dQ,{children:c.jsx(xN,{children:c.jsxs(hN,{children:[c.jsx(cr,{path:"/login",element:c.jsx(k9,{})}),c.jsxs(cr,{path:"/",element:c.jsx(R9,{}),children:[c.jsx(cr,{index:!0,element:c.jsx(Zm,{to:"/login",replace:!0})}),c.jsx(cr,{path:"dashboard",element:c.jsx(ri,{allowedRoles:["admin","teacher"],children:c.jsx(NK,{})})}),c.jsx(cr,{path:"schedule",element:c.jsxs(ri,{allowedRoles:["admin","teacher","guest"],children:[c.jsx(mQ,{readOnly:!1})," "]})}),c.jsx(cr,{path:"substitutions",element:c.jsx(ri,{allowedRoles:["admin"],children:c.jsx(KK,{})})}),c.jsx(cr,{path:"directory",element:c.jsx(ri,{allowedRoles:["admin"],children:c.jsx(jK,{})})}),c.jsx(cr,{path:"admin",element:c.jsx(ri,{allowedRoles:["admin"],children:c.jsx(GK,{})})}),c.jsx(cr,{path:"reports",element:c.jsx(ri,{allowedRoles:["admin"],children:c.jsx(S9,{})})}),c.jsx(cr,{path:"export",element:c.jsx(ri,{allowedRoles:["admin"],children:c.jsx(Q9,{})})})]}),c.jsx(cr,{path:"/public",element:c.jsx(N9,{})})]})})})})})})}Am.createRoot(document.getElementById("root")).render(c.jsx(gi.StrictMode,{children:c.jsx(P9,{})}));
